<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TG-AIæ™ºæ§ç‹ ç®¡ç†å¾Œå°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .gradient-text { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .card { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); }
        .glass { background: rgba(31, 41, 55, 0.8); backdrop-filter: blur(10px); }
        
        /* ç‹è€…æ¦®è€€é¢¨æ ¼ç­‰ç´šé¡è‰² */
        .rank-bronze { color: #CD7F32; }
        .rank-silver { color: #C0C0C0; }
        .rank-gold { color: #FFD700; }
        .rank-diamond { color: #B9F2FF; }
        .rank-star { color: #9B59B6; }
        .rank-king { color: #FF6B6B; }
        
        .bg-bronze { background: linear-gradient(135deg, #CD7F32 0%, #8B4513 100%); }
        .bg-silver { background: linear-gradient(135deg, #C0C0C0 0%, #808080 100%); }
        .bg-gold { background: linear-gradient(135deg, #FFD700 0%, #DAA520 100%); }
        .bg-diamond { background: linear-gradient(135deg, #B9F2FF 0%, #00CED1 100%); }
        .bg-star { background: linear-gradient(135deg, #9B59B6 0%, #8E44AD 100%); }
        .bg-king { background: linear-gradient(135deg, #FF6B6B 0%, #EE5A5A 100%); }
        
        /* Logo å‹•ç•« */
        .logo-glow {
            text-shadow: 0 0 10px rgba(102, 126, 234, 0.5), 0 0 20px rgba(118, 75, 162, 0.3);
        }
        
        /* æ»¾å‹•æ¢ */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }
        
        /* è¡¨æ ¼ hover */
        .table-row-hover:hover { background: rgba(139, 92, 246, 0.1); }
    </style>
    <script>
        // æª¢æŸ¥ç™»éŒ„ç‹€æ…‹
        (function() {
            const token = localStorage.getItem('admin_token') || sessionStorage.getItem('admin_token');
            if (!token) {
                window.location.href = '/login.html';
            }
        })();
    </script>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <div id="app">
        <!-- å´é‚Šæ¬„ -->
        <div class="fixed left-0 top-0 h-full w-64 bg-gray-800 border-r border-gray-700 z-50 flex flex-col">
            <!-- Logo -->
            <div class="p-6 border-b border-gray-700">
                <div class="flex items-center">
                    <span class="text-3xl mr-2">ğŸ¤–</span>
                    <div>
                        <h1 class="text-xl font-bold gradient-text logo-glow">TG-AIæ™ºæ§ç‹</h1>
                        <p class="text-gray-400 text-xs">ç®¡ç†å¾Œå° v2.0</p>
                    </div>
                </div>
            </div>
            
            <!-- å°èˆªèœå–® -->
            <nav class="flex-1 overflow-y-auto py-4">
                <a v-for="item in menuItems" :key="item.id" 
                   @click="currentPage = item.id"
                   :class="['flex items-center px-6 py-3 cursor-pointer transition-all',
                           currentPage === item.id ? 'bg-purple-600/30 border-r-2 border-purple-500 text-white' : 'text-gray-400 hover:bg-gray-700/50 hover:text-white']">
                    <span class="text-xl mr-3">{{ item.icon }}</span>
                    <span>{{ item.name }}</span>
                    <span v-if="item.badge" class="ml-auto bg-red-500 text-white text-xs px-2 py-0.5 rounded-full">
                        {{ item.badge }}
                    </span>
                </a>
            </nav>
            
            <!-- ç”¨æˆ¶ä¿¡æ¯ -->
            <div class="p-4 border-t border-gray-700">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="w-10 h-10 rounded-full gradient-bg flex items-center justify-center">
                            <span class="text-lg">ğŸ‘¤</span>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium">{{ adminUser?.name || 'ç®¡ç†å“¡' }}</p>
                            <p class="text-xs text-gray-400">{{ adminUser?.role === 'super_admin' ? 'è¶…ç´šç®¡ç†å“¡' : 'ç®¡ç†å“¡' }}</p>
                        </div>
                    </div>
                    <div class="flex gap-1">
                        <button @click="openPasswordModal" class="text-gray-400 hover:text-blue-400 transition-colors p-2" title="ä¿®æ”¹å¯†ç¢¼">
                            ğŸ”‘
                        </button>
                        <button @click="handleLogout" class="text-gray-400 hover:text-red-400 transition-colors p-2" title="ç™»å‡º">
                            ğŸšª
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ä¸»å…§å®¹å€ -->
        <div class="ml-64 min-h-screen">
            <!-- é ‚éƒ¨å°èˆª -->
            <div class="sticky top-0 z-40 bg-gray-900/80 backdrop-blur-sm border-b border-gray-700 px-8 py-4">
                <div class="flex items-center justify-between">
                    <h2 class="text-xl font-semibold">
                        {{ menuItems.find(m => m.id === currentPage)?.icon }}
                        {{ menuItems.find(m => m.id === currentPage)?.name }}
                    </h2>
                    <div class="flex items-center gap-4">
                        <span class="text-sm text-gray-400">
                            æœ€å¾Œæ›´æ–°: {{ lastUpdate || 'åŠ è¼‰ä¸­...' }}
                        </span>
                        <button @click="refreshData" 
                                :disabled="isLoading"
                                class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg text-sm transition-colors flex items-center">
                            <span :class="{'animate-spin': isLoading}">ğŸ”„</span>
                            <span class="ml-2">åˆ·æ–°</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="p-8">
                <!-- ==================== å„€è¡¨ç›¤ ==================== -->
                <div v-if="currentPage === 'dashboard'">
                    <!-- çµ±è¨ˆå¡ç‰‡ -->
                    <div class="grid grid-cols-4 gap-6 mb-8">
                        <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-blue-100">ç¸½ç”¨æˆ¶æ•¸</p>
                                    <p class="text-3xl font-bold mt-2">{{ (stats.totalUsers || 0).toLocaleString() }}</p>
                                    <p class="text-blue-200 text-sm mt-1">+{{ stats.newUsersToday || 0 }} ä»Šæ—¥æ–°å¢</p>
                                </div>
                                <span class="text-5xl opacity-50">ğŸ‘¥</span>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-green-100">ä»˜è²»ç”¨æˆ¶</p>
                                    <p class="text-3xl font-bold mt-2">{{ (stats.paidUsers || 0).toLocaleString() }}</p>
                                    <p class="text-green-200 text-sm mt-1">è½‰åŒ–ç‡ {{ stats.conversionRate || 0 }}%</p>
                                </div>
                                <span class="text-5xl opacity-50">ğŸ’</span>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-purple-100">ç¸½æ”¶å…¥</p>
                                    <p class="text-3xl font-bold mt-2">{{ (stats.totalRevenue || 0).toLocaleString() }} USDT</p>
                                    <p class="text-purple-200 text-sm mt-1">+{{ stats.revenueToday || 0 }} USDT ä»Šæ—¥</p>
                                </div>
                                <span class="text-5xl opacity-50">ğŸ’°</span>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-6 shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-orange-100">å¯ç”¨å¡å¯†</p>
                                    <p class="text-3xl font-bold mt-2">{{ (stats.unusedLicenses || 0).toLocaleString() }}</p>
                                    <p class="text-orange-200 text-sm mt-1">å…± {{ stats.totalLicenses || 0 }} å¼µ</p>
                                </div>
                                <span class="text-5xl opacity-50">ğŸŸï¸</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åœ–è¡¨ -->
                    <div class="grid grid-cols-2 gap-6 mb-8">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“ˆ æ”¶å…¥è¶¨å‹¢ï¼ˆè¿‘7å¤©ï¼‰</h3>
                            <canvas id="revenueChart" height="200"></canvas>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ‘‘ æœƒå“¡ç­‰ç´šåˆ†å¸ƒ</h3>
                            <canvas id="levelChart" height="200"></canvas>
                        </div>
                    </div>
                    
                    <!-- å¡å¯†åˆ†é¡çµ±è¨ˆ -->
                    <div class="bg-gray-800 rounded-xl p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ« å¡å¯†åº«å­˜</h3>
                        <div class="grid grid-cols-5 gap-4">
                            <div v-for="(info, level) in licenseStats" :key="level" 
                                 :class="['rounded-xl p-4 text-center', 'bg-' + level]">
                                <p class="text-3xl">{{ info.icon }}</p>
                                <p class="font-medium mt-1 text-white">{{ info.name }}</p>
                                <p class="text-3xl font-bold mt-2 text-white">{{ info.unused }}</p>
                                <p class="text-sm text-white/70">å¯ç”¨ / {{ info.total }}</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ğŸ†• é›™æ± å¥åº·åº¦ -->
                    <div class="grid grid-cols-2 gap-6 mt-6">
                        <!-- API å°æ¥æ± å¥åº·åº¦ -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold">ğŸ”‘ API å°æ¥æ± å¥åº·åº¦</h3>
                                <button @click="currentPage = 'apiPool'" class="text-blue-400 hover:text-blue-300 text-sm">
                                    æŸ¥çœ‹è©³æƒ… â†’
                                </button>
                            </div>
                            <div class="grid grid-cols-4 gap-4 mb-4">
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-green-400">{{ dashboardPoolStats.api?.available || 0 }}</p>
                                    <p class="text-xs text-gray-400">å¯ç”¨</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-blue-400">{{ dashboardPoolStats.api?.total_allocations || 0 }}</p>
                                    <p class="text-xs text-gray-400">å·²åˆ†é…</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-yellow-400">{{ dashboardPoolStats.api?.full || 0 }}</p>
                                    <p class="text-xs text-gray-400">å·²æ»¿</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-red-400">{{ dashboardPoolStats.api?.banned || 0 }}</p>
                                    <p class="text-xs text-gray-400">å°ç¦</p>
                                </div>
                            </div>
                            <!-- å¥åº·åº¦é€²åº¦æ¢ -->
                            <div class="relative h-2 bg-gray-700 rounded-full overflow-hidden">
                                <div class="absolute h-full bg-green-500 rounded-full" 
                                     :style="{width: dashboardPoolStats.api?.healthPercent + '%'}"></div>
                            </div>
                            <p class="text-center text-sm text-gray-400 mt-2">
                                å¥åº·åº¦: <span :class="dashboardPoolStats.api?.healthPercent >= 80 ? 'text-green-400' : dashboardPoolStats.api?.healthPercent >= 50 ? 'text-yellow-400' : 'text-red-400'">
                                    {{ dashboardPoolStats.api?.healthPercent || 0 }}%
                                </span>
                                <span class="text-gray-500">ï¼ˆ{{ dashboardPoolStats.api?.total || 0 }} çµ„æ†‘æ“šï¼‰</span>
                            </p>
                        </div>
                        
                        <!-- ä»£ç†æ± å¥åº·åº¦ -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold">ğŸŒ ä»£ç†æ± å¥åº·åº¦</h3>
                                <button @click="currentPage = 'proxies'" class="text-blue-400 hover:text-blue-300 text-sm">
                                    æŸ¥çœ‹è©³æƒ… â†’
                                </button>
                            </div>
                            <div class="grid grid-cols-4 gap-4 mb-4">
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-green-400">{{ dashboardPoolStats.proxy?.available || 0 }}</p>
                                    <p class="text-xs text-gray-400">å¯ç”¨</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-blue-400">{{ dashboardPoolStats.proxy?.assigned || 0 }}</p>
                                    <p class="text-xs text-gray-400">å·²åˆ†é…</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-yellow-400">{{ dashboardPoolStats.proxy?.testing || 0 }}</p>
                                    <p class="text-xs text-gray-400">æ¸¬è©¦ä¸­</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-red-400">{{ dashboardPoolStats.proxy?.failed || 0 }}</p>
                                    <p class="text-xs text-gray-400">å¤±æ•—</p>
                                </div>
                            </div>
                            <!-- å¥åº·åº¦é€²åº¦æ¢ -->
                            <div class="relative h-2 bg-gray-700 rounded-full overflow-hidden">
                                <div class="absolute h-full bg-green-500 rounded-full" 
                                     :style="{width: dashboardPoolStats.proxy?.healthPercent + '%'}"></div>
                            </div>
                            <p class="text-center text-sm text-gray-400 mt-2">
                                å¥åº·åº¦: <span :class="dashboardPoolStats.proxy?.healthPercent >= 80 ? 'text-green-400' : dashboardPoolStats.proxy?.healthPercent >= 50 ? 'text-yellow-400' : 'text-red-400'">
                                    {{ dashboardPoolStats.proxy?.healthPercent || 0 }}%
                                </span>
                                <span class="text-gray-500">ï¼ˆ{{ dashboardPoolStats.proxy?.total || 0 }} å€‹ä»£ç†ï¼‰</span>
                            </p>
                        </div>
                    </div>
                    
                    <!-- ğŸ†• ç³»çµ±å‘Šè­¦ä¸­å¿ƒ -->
                    <div v-if="systemAlerts.alerts && systemAlerts.alerts.length > 0" class="mt-6">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold flex items-center gap-2">
                                    <span v-if="systemAlerts.alert_level === 'critical'" class="text-red-400">ğŸš¨</span>
                                    <span v-else-if="systemAlerts.alert_level === 'warning'" class="text-yellow-400">âš ï¸</span>
                                    <span v-else class="text-green-400">âœ…</span>
                                    ç³»çµ±å‘Šè­¦
                                    <span v-if="systemAlerts.alert_level === 'critical'" 
                                          class="text-xs bg-red-500/20 text-red-400 px-2 py-0.5 rounded-full animate-pulse">
                                        ç·Šæ€¥
                                    </span>
                                    <span v-else-if="systemAlerts.alert_level === 'warning'" 
                                          class="text-xs bg-yellow-500/20 text-yellow-400 px-2 py-0.5 rounded-full">
                                        è­¦å‘Š
                                    </span>
                                </h3>
                                <button @click="dismissAlerts" class="text-gray-500 hover:text-gray-300 text-sm">
                                    æš«æ™‚å¿½ç•¥
                                </button>
                            </div>
                            
                            <div class="space-y-3">
                                <div v-for="(alert, idx) in systemAlerts.alerts" :key="idx"
                                     :class="[
                                         'rounded-lg p-4 border-l-4',
                                         alert.level === 'critical' ? 'bg-red-500/10 border-red-500' : 'bg-yellow-500/10 border-yellow-500'
                                     ]">
                                    <div class="flex items-start justify-between">
                                        <div>
                                            <p :class="alert.level === 'critical' ? 'text-red-300' : 'text-yellow-300'" class="font-medium">
                                                {{ alert.message }}
                                            </p>
                                            <p class="text-gray-400 text-sm mt-1">{{ alert.suggestion }}</p>
                                        </div>
                                        <span class="text-xs text-gray-500 whitespace-nowrap ml-4">
                                            {{ alert.type }}
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- å®¹é‡é æ¸¬ -->
                            <div v-if="capacityForecast.days_until_exhausted" class="mt-4 pt-4 border-t border-gray-700">
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-400">ğŸ“Š å®¹é‡é æ¸¬</span>
                                    <span :class="capacityForecast.days_until_exhausted < 7 ? 'text-red-400' : capacityForecast.days_until_exhausted < 14 ? 'text-yellow-400' : 'text-green-400'">
                                        {{ capacityForecast.forecast_message }}
                                    </span>
                                </div>
                                <div class="flex items-center gap-4 mt-2 text-xs text-gray-500">
                                    <span>æ—¥å‡åˆ†é…: {{ capacityForecast.avg_daily_allocations }} å€‹</span>
                                    <span>å‰©é¤˜å®¹é‡: {{ capacityForecast.remaining_capacity }} å€‹</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç„¡å‘Šè­¦æ™‚é¡¯ç¤ºå¥åº·ç‹€æ…‹ -->
                    <div v-else-if="systemAlerts.alert_level === 'normal'" class="mt-6">
                        <div class="bg-green-500/10 border border-green-500/30 rounded-xl p-4 flex items-center gap-3">
                            <span class="text-2xl">âœ…</span>
                            <div>
                                <p class="text-green-400 font-medium">ç³»çµ±é‹è¡Œæ­£å¸¸</p>
                                <p class="text-gray-400 text-sm">API æ± å’Œä»£ç†æ± å®¹é‡å……è¶³ï¼Œç„¡éœ€æ“”å¿ƒ</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== ç”¨æˆ¶ç®¡ç† ==================== -->
                <div v-if="currentPage === 'users'">
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4">
                            <input type="text" v-model="userSearch" placeholder="æœç´¢ç”¨æˆ¶..." 
                                   class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500 w-64">
                            <select v-model="userFilter" class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option value="all">å…¨éƒ¨ç­‰ç´š</option>
                                <option value="bronze">âš”ï¸ é’éŠ…æˆ°å£«</option>
                                <option value="silver">ğŸ¥ˆ ç™½éŠ€ç²¾è‹±</option>
                                <option value="gold">ğŸ¥‡ é»ƒé‡‘å¤§å¸«</option>
                                <option value="diamond">ğŸ’ é‘½çŸ³ç‹ç‰Œ</option>
                                <option value="star">ğŸŒŸ æ˜Ÿè€€å‚³èªª</option>
                                <option value="king">ğŸ‘‘ æ¦®è€€ç‹è€…</option>
                            </select>
                        </div>
                        <div class="text-sm text-gray-400">
                            å…± {{ userPagination.total || filteredUsers.length }} å€‹ç”¨æˆ¶
                            <span v-if="userPagination.total_pages > 1" class="ml-2">
                                (ç¬¬ {{ userPagination.page }}/{{ userPagination.total_pages }} é )
                            </span>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">ç”¨æˆ¶</th>
                                    <th class="text-left px-6 py-4 font-medium">ç­‰ç´š</th>
                                    <th class="text-left px-6 py-4 font-medium">åˆ°æœŸæ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium">é‚€è«‹æ•¸</th>
                                    <th class="text-left px-6 py-4 font-medium">é¤˜é¡/æ¶ˆè²»</th>
                                    <th class="text-left px-6 py-4 font-medium">è¨»å†Šæ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="user in filteredUsers" :key="user.id" 
                                    class="border-t border-gray-700 table-row-hover transition-colors">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center mr-3 text-lg font-bold">
                                                {{ user.avatarLetter || '?' }}
                                            </div>
                                            <div>
                                                <p class="font-medium">{{ user.displayName }}</p>
                                                <p class="text-sm text-gray-400">
                                                    <span v-if="user.telegramUsername">@{{ user.telegramUsername }}</span>
                                                    <span v-else-if="user.email">{{ user.email }}</span>
                                                    <span v-else>{{ user.userId?.slice(0,12) }}...</span>
                                                </p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="'rank-' + user.level" class="font-medium">
                                            {{ user.levelIcon }} {{ user.levelName }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span v-if="user.isLifetime" class="text-purple-400">â™¾ï¸ çµ‚èº«</span>
                                        <span v-else :class="isExpired(user.expiresAt) ? 'text-red-400' : 'text-green-400'">
                                            {{ formatDate(user.expiresAt) || 'æœªæ¿€æ´»' }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span v-if="user.totalInvites > 0" class="text-blue-400">
                                            {{ user.totalInvites }} äºº
                                        </span>
                                        <span v-else class="text-gray-500">-</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="space-y-1">
                                            <div v-if="user.walletBalance > 0 || user.walletBonus > 0" class="text-green-400 font-medium">
                                                ğŸ’° {{ user.walletBalanceDisplay }}
                                                <span v-if="user.walletBonus > 0" class="text-yellow-400 text-xs">(+{{ user.walletBonusDisplay }})</span>
                                            </div>
                                            <div v-if="user.totalConsumed > 0" class="text-gray-400 text-xs">
                                                æ¶ˆè²»: {{ user.totalConsumedDisplay }}
                                            </div>
                                            <div v-if="user.walletStatus === 'frozen'" class="text-red-400 text-xs">
                                                ğŸ”’ å·²å‡çµ
                                            </div>
                                            <span v-if="user.walletBalance === 0 && user.walletBonus === 0 && user.totalConsumed === 0" class="text-gray-500">-</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ formatDate(user.createdAt) }}</td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button @click="viewUser(user)" 
                                                    class="text-blue-400 hover:text-blue-300 text-sm">è©³æƒ…</button>
                                            <button @click="extendUser(user)" 
                                                    class="text-green-400 hover:text-green-300 text-sm">çºŒè²»</button>
                                            <button v-if="!user.isBanned" @click="banUser(user)" 
                                                    class="text-red-400 hover:text-red-300 text-sm">å°ç¦</button>
                                            <button v-else @click="unbanUser(user)" 
                                                    class="text-yellow-400 hover:text-yellow-300 text-sm">è§£å°</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr v-if="filteredUsers.length === 0">
                                    <td colspan="7" class="px-6 py-12 text-center text-gray-500">
                                        æš«ç„¡ç”¨æˆ¶æ•¸æ“š
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== å³å°‡åˆ°æœŸç”¨æˆ¶ ==================== -->
                <div v-if="currentPage === 'expiring'">
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4 items-center">
                            <span class="text-gray-400">å³å°‡åœ¨</span>
                            <select v-model="expiringDays" @change="loadExpiringUsers" 
                                    class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option :value="3">3 å¤©</option>
                                <option :value="7">7 å¤©</option>
                                <option :value="14">14 å¤©</option>
                                <option :value="30">30 å¤©</option>
                            </select>
                            <span class="text-gray-400">å…§åˆ°æœŸ</span>
                        </div>
                        <button @click="batchSendExpiryReminders" 
                                :disabled="expiringUsers.length === 0"
                                class="bg-orange-600 hover:bg-orange-700 disabled:bg-gray-600 px-6 py-2 rounded-lg font-medium transition-colors">
                            ğŸ“¨ æ‰¹é‡ç™¼é€æé†’ ({{ expiringUsers.length }})
                        </button>
                    </div>
                    
                    <div v-if="expiringUsers.length === 0" class="bg-gray-800 rounded-xl p-12 text-center">
                        <div class="text-6xl mb-4">ğŸ‰</div>
                        <p class="text-xl text-gray-400">å¤ªæ£’äº†ï¼æ²’æœ‰å³å°‡åˆ°æœŸçš„ç”¨æˆ¶</p>
                    </div>
                    
                    <div v-else class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">ç”¨æˆ¶</th>
                                    <th class="text-left px-6 py-4 font-medium">ç­‰ç´š</th>
                                    <th class="text-left px-6 py-4 font-medium">åˆ°æœŸæ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium">å‰©é¤˜å¤©æ•¸</th>
                                    <th class="text-left px-6 py-4 font-medium">æ¶ˆè²»é‡‘é¡</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="user in expiringUsers" :key="user.user_id" 
                                    class="border-t border-gray-700 table-row-hover">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 rounded-full bg-gradient-to-r from-orange-500 to-red-500 flex items-center justify-center mr-3 font-bold">
                                                {{ (user.nickname || user.email || '?')[0].toUpperCase() }}
                                            </div>
                                            <div>
                                                <p class="font-medium">{{ user.nickname || user.email || user.telegram_username || 'æœªè¨­ç½®' }}</p>
                                                <p class="text-sm text-gray-400">{{ user.user_id?.slice(0,12) }}...</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="'rank-' + user.level" class="font-medium">
                                            {{ user.level_icon || 'âš”ï¸' }} {{ user.level_name || getLevelName(user.level) }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-orange-400">
                                        {{ formatDate(user.expires_at) }}
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="px-3 py-1 rounded-full text-sm"
                                              :class="user.days_remaining <= 3 ? 'bg-red-500/20 text-red-400' : 'bg-orange-500/20 text-orange-400'">
                                            {{ user.days_remaining }} å¤©
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-green-400">
                                        {{ user.total_spent || 0 }} USDT
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button @click="sendExpiryReminder(user.user_id)" 
                                                    class="text-orange-400 hover:text-orange-300 text-sm">ç™¼é€æé†’</button>
                                            <button @click="extendUser(user)" 
                                                    class="text-green-400 hover:text-green-300 text-sm">çºŒè²»</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== å¡å¯†ç®¡ç† ==================== -->
                <div v-if="currentPage === 'licenses'">
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4">
                            <select v-model="licenseFilter" class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option value="all">å…¨éƒ¨ç‹€æ…‹</option>
                                <option value="unused">æœªä½¿ç”¨</option>
                                <option value="used">å·²ä½¿ç”¨</option>
                                <option value="disabled">å·²ç¦ç”¨</option>
                            </select>
                            <select v-model="licenseLevelFilter" class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option value="all">å…¨éƒ¨ç­‰ç´š</option>
                                <option value="silver">ğŸ¥ˆ ç™½éŠ€ç²¾è‹±</option>
                                <option value="gold">ğŸ¥‡ é»ƒé‡‘å¤§å¸«</option>
                                <option value="diamond">ğŸ’ é‘½çŸ³ç‹ç‰Œ</option>
                                <option value="star">ğŸŒŸ æ˜Ÿè€€å‚³èªª</option>
                                <option value="king">ğŸ‘‘ æ¦®è€€ç‹è€…</option>
                            </select>
                        </div>
                        <div class="flex gap-3">
                            <button @click="exportLicenses" 
                                    class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm transition-colors">
                                ğŸ“¥ å°å‡º CSV
                            </button>
                            <button @click="showGenerateModal = true" 
                                    class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity">
                                â• ç”Ÿæˆå¡å¯†
                            </button>
                        </div>
                    </div>
                    
                    <!-- å¡å¯†åº«å­˜æ¦‚è¦½ -->
                    <div class="grid grid-cols-5 gap-4 mb-6">
                        <div v-for="(info, level) in licenseStats" :key="level" 
                             class="bg-gray-800 rounded-xl p-4 text-center border border-gray-700">
                            <p class="text-2xl">{{ info.icon }}</p>
                            <p class="font-medium mt-1">{{ info.name }}</p>
                            <p class="text-2xl font-bold mt-2 text-green-400">{{ info.unused }}</p>
                            <p class="text-sm text-gray-400">å¯ç”¨ / {{ info.total }}</p>
                        </div>
                    </div>
                    
                    <!-- å¡å¯†åˆ—è¡¨ -->
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">å¡å¯†</th>
                                    <th class="text-left px-6 py-4 font-medium">é¡å‹</th>
                                    <th class="text-left px-6 py-4 font-medium">åƒ¹æ ¼</th>
                                    <th class="text-left px-6 py-4 font-medium">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium">å‰µå»ºæ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium">ä½¿ç”¨æ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="license in filteredLicenses" :key="license.key" 
                                    class="border-t border-gray-700 table-row-hover transition-colors">
                                    <td class="px-6 py-4">
                                        <code class="text-sm bg-gray-700 px-2 py-1 rounded">{{ license.key }}</code>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="'rank-' + license.level">{{ license.typeName }}</span>
                                    </td>
                                    <td class="px-6 py-4">{{ license.price }} USDT</td>
                                    <td class="px-6 py-4">
                                        <span :class="getStatusClass(license.status)" 
                                              class="px-2 py-1 rounded text-sm">
                                            {{ getStatusText(license.status) }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ license.createdAt }}</td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ license.usedAt || '-' }}</td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button v-if="license.status === 'unused'" 
                                                    @click="copyLicense(license.key)"
                                                    class="text-blue-400 hover:text-blue-300 text-sm">è¤‡è£½</button>
                                            <button v-if="license.status === 'unused'"
                                                    @click="disableLicense(license.key)"
                                                    class="text-red-400 hover:text-red-300 text-sm">ç¦ç”¨</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr v-if="filteredLicenses.length === 0">
                                    <td colspan="7" class="px-6 py-12 text-center text-gray-500">
                                        æš«ç„¡å¡å¯†æ•¸æ“š
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== è¨‚å–®ç®¡ç† ==================== -->
                <div v-if="currentPage === 'orders'">
                    <!-- æœç´¢å’Œç¯©é¸ -->
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4">
                            <input type="text" v-model="orderSearch" placeholder="æœç´¢è¨‚å–®è™Ÿ..."
                                   class="bg-gray-700 rounded-lg px-4 py-2 w-64 focus:ring-2 focus:ring-blue-500">
                            <select v-model="orderStatusFilter" @change="loadOrders"
                                    class="bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500">
                                <option value="">å…¨éƒ¨ç‹€æ…‹</option>
                                <option value="pending">å¾…æ”¯ä»˜</option>
                                <option value="paid">å·²æ”¯ä»˜</option>
                                <option value="cancelled">å·²å–æ¶ˆ</option>
                            </select>
                        </div>
                        <div class="text-gray-400">
                            å…± {{ filteredOrders.length }} å€‹è¨‚å–®
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">è¨‚å–®è™Ÿ</th>
                                    <th class="text-left px-6 py-4 font-medium">ç”¨æˆ¶</th>
                                    <th class="text-left px-6 py-4 font-medium">ç”¢å“</th>
                                    <th class="text-left px-6 py-4 font-medium">é‡‘é¡</th>
                                    <th class="text-left px-6 py-4 font-medium">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium">æ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="order in filteredOrders" :key="order.id" 
                                    class="border-t border-gray-700 table-row-hover transition-colors">
                                    <td class="px-6 py-4">
                                        <code class="text-sm text-blue-400">{{ order.orderId || order.order_id }}</code>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-400">{{ order.user_id || '-' }}</td>
                                    <td class="px-6 py-4">{{ order.productName || order.product_name || '-' }}</td>
                                    <td class="px-6 py-4">
                                        <span class="font-medium text-green-400">{{ order.final_price || 0 }} USDT</span>
                                        <span v-if="order.discount_amount" class="text-xs text-gray-500 ml-1">
                                            (-{{ order.discount_amount }} USDT)
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="{
                                            'bg-green-600/30 text-green-400': order.status === 'paid',
                                            'bg-yellow-600/30 text-yellow-400': order.status === 'pending',
                                            'bg-gray-600/30 text-gray-400': order.status === 'cancelled'
                                        }" class="px-2 py-1 rounded text-sm">
                                            {{ order.status === 'paid' ? 'å·²æ”¯ä»˜' : order.status === 'pending' ? 'å¾…æ”¯ä»˜' : 'å·²å–æ¶ˆ' }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ formatDate(order.created_at) }}</td>
                                    <td class="px-6 py-4">
                                        <button v-if="order.status === 'pending'" 
                                                @click="confirmPayment(order.order_id)"
                                                class="px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-sm transition-colors">
                                            ç¢ºèªæ”¯ä»˜
                                        </button>
                                        <span v-else class="text-gray-500 text-sm">-</span>
                                    </td>
                                </tr>
                                <tr v-if="filteredOrders.length === 0">
                                    <td colspan="6" class="px-6 py-12 text-center text-gray-500">
                                        æš«ç„¡è¨‚å–®æ•¸æ“š
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== é‚€è«‹ç®¡ç† ==================== -->
                <div v-if="currentPage === 'referrals'">
                    <!-- é‚€è«‹çµ±è¨ˆ -->
                    <div class="grid grid-cols-3 gap-6 mb-6">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-400">ç¸½é‚€è«‹æ•¸</p>
                                    <p class="text-3xl font-bold mt-2">{{ referralStats.totalReferrals || 0 }}</p>
                                </div>
                                <span class="text-4xl">ğŸ‘¥</span>
                            </div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-400">ç¸½çå‹µç™¼æ”¾</p>
                                    <p class="text-3xl font-bold mt-2 text-green-400">{{ referralStats.totalEarnings || 0 }} USDT</p>
                                </div>
                                <span class="text-4xl">ğŸ’°</span>
                            </div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-400">é‚€è«‹é”äºº</p>
                                    <p class="text-3xl font-bold mt-2">{{ referralStats.leaderboard?.length || 0 }}</p>
                                </div>
                                <span class="text-4xl">ğŸ†</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- é‚€è«‹æ’è¡Œæ¦œ -->
                    <div class="grid grid-cols-2 gap-6">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ† é‚€è«‹æ’è¡Œæ¦œ</h3>
                            <div class="space-y-3">
                                <div v-for="(user, index) in referralStats.leaderboard" :key="user.user_id"
                                     class="flex items-center justify-between p-3 bg-gray-700/50 rounded-lg">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">{{ index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : 'ğŸ…' }}</span>
                                        <div>
                                            <p class="font-medium">{{ user.nickname || user.email || 'æœªçŸ¥ç”¨æˆ¶' }}</p>
                                            <p class="text-sm text-gray-400">é‚€è«‹ç¢¼: {{ user.invite_code }}</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-blue-400">{{ user.total_invites }} äºº</p>
                                        <p class="text-sm text-green-400">{{ user.invite_earnings || 0 }} USDT</p>
                                    </div>
                                </div>
                                <div v-if="!referralStats.leaderboard?.length" class="text-center text-gray-500 py-8">
                                    æš«ç„¡é‚€è«‹æ•¸æ“š
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“‹ çå‹µè¦å‰‡</h3>
                            <div class="space-y-4">
                                <div class="p-4 bg-gray-700/50 rounded-lg">
                                    <p class="font-medium text-blue-400">ğŸ‘‹ é‚€è«‹è¨»å†Šçå‹µ</p>
                                    <p class="text-sm text-gray-400 mt-1">é‚€è«‹è€…ç²å¾— 3 å¤©æœƒå“¡ï¼Œè¢«é‚€è«‹è€…ç²å¾— 1 å¤©æœƒå“¡</p>
                                </div>
                                <div class="p-4 bg-gray-700/50 rounded-lg">
                                    <p class="font-medium text-green-400">ğŸ’ é¦–æ¬¡ä»˜è²»çå‹µ</p>
                                    <div class="text-sm text-gray-400 mt-1 space-y-1">
                                        <p>ç™½éŠ€: 7å¤© + 1 USDT</p>
                                        <p>é»ƒé‡‘: 15å¤© + 3 USDT</p>
                                        <p>é‘½çŸ³: 30å¤© + 10 USDT</p>
                                        <p>æ˜Ÿè€€: 45å¤© + 30 USDT</p>
                                        <p>ç‹è€…: 60å¤© + 100 USDT</p>
                                    </div>
                                </div>
                                <div class="p-4 bg-gray-700/50 rounded-lg">
                                    <p class="font-medium text-purple-400">ğŸ”„ é‡è¤‡ä»˜è²»è¿”å‚­</p>
                                    <p class="text-sm text-gray-400 mt-1">è¢«é‚€è«‹è€…æ¯æ¬¡ä»˜è²»ï¼Œé‚€è«‹è€…ç²å¾— 10% è¿”å‚­</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== å¯©è¨ˆæ—¥èªŒ ==================== -->
                <div v-if="currentPage === 'logs'">
                    <!-- çµ±è¨ˆå¡ç‰‡ -->
                    <div class="grid grid-cols-4 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4">
                            <p class="text-blue-200 text-sm">èªè­‰æ“ä½œ</p>
                            <p class="text-2xl font-bold mt-1">{{ logsStats.by_category?.auth || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-4">
                            <p class="text-green-200 text-sm">ç”¨æˆ¶ç®¡ç†</p>
                            <p class="text-2xl font-bold mt-1">{{ logsStats.by_category?.user || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl p-4">
                            <p class="text-purple-200 text-sm">å¡å¯†æ“ä½œ</p>
                            <p class="text-2xl font-bold mt-1">{{ logsStats.by_category?.license || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-orange-600 to-orange-700 rounded-xl p-4">
                            <p class="text-orange-200 text-sm">è¨‚å–®æ“ä½œ</p>
                            <p class="text-2xl font-bold mt-1">{{ logsStats.by_category?.order || 0 }}</p>
                        </div>
                    </div>
                    
                    <!-- ç¯©é¸å·¥å…·æ¬„ -->
                    <div class="flex gap-4 mb-4">
                        <select v-model="logsFilter.category" @change="filterLogs"
                                class="bg-gray-700 rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">å…¨éƒ¨é¡å‹</option>
                            <option value="auth">ğŸ” èªè­‰æ“ä½œ</option>
                            <option value="user">ğŸ‘¤ ç”¨æˆ¶ç®¡ç†</option>
                            <option value="license">ğŸŸï¸ å¡å¯†æ“ä½œ</option>
                            <option value="order">ğŸ’° è¨‚å–®æ“ä½œ</option>
                            <option value="system">âš™ï¸ ç³»çµ±è¨­ç½®</option>
                        </select>
                        <select v-model="logsFilter.status" @change="filterLogs"
                                class="bg-gray-700 rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">å…¨éƒ¨ç‹€æ…‹</option>
                            <option value="success">âœ… æˆåŠŸ</option>
                            <option value="failed">âŒ å¤±æ•—</option>
                        </select>
                        <div class="flex-grow"></div>
                        <div class="text-sm text-gray-400 flex items-center">
                            å…± {{ logsPagination.total }} æ¢è¨˜éŒ„
                        </div>
                    </div>
                    
                    <!-- æ—¥èªŒåˆ—è¡¨ -->
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium w-40">æ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium w-28">æ“ä½œå“¡</th>
                                    <th class="text-left px-6 py-4 font-medium w-32">é¡å‹</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œæè¿°</th>
                                    <th class="text-left px-6 py-4 font-medium w-24">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium w-32">IP åœ°å€</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="log in logs" :key="log.log_id" 
                                    class="border-t border-gray-700 table-row-hover transition-colors">
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ log.formattedTime }}</td>
                                    <td class="px-6 py-4 font-medium">{{ log.admin_username }}</td>
                                    <td class="px-6 py-4">
                                        <span class="px-2 py-1 rounded text-sm bg-gray-700">
                                            {{ log.actionIcon }} {{ log.action_description }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="text-sm">{{ log.description }}</div>
                                        <div v-if="log.resource_id" class="text-xs text-gray-500 mt-1">
                                            {{ log.resource_type }}: {{ log.resource_id.slice(0, 12) }}...
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="log.statusClass" class="text-sm font-medium">
                                            {{ log.status === 'success' ? 'âœ“ æˆåŠŸ' : 'âœ— å¤±æ•—' }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-gray-500 text-sm font-mono">{{ log.ip_address }}</td>
                                </tr>
                                <tr v-if="logs.length === 0">
                                    <td colspan="6" class="px-6 py-12 text-center text-gray-500">
                                        æš«ç„¡æ“ä½œæ—¥èªŒ
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- åˆ†é  -->
                    <div v-if="logsPagination.total_pages > 1" class="flex justify-center items-center gap-2 mt-6">
                        <button @click="goToLogsPage(1)" :disabled="logsPagination.page === 1"
                                class="px-3 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed">
                            &laquo;
                        </button>
                        <button @click="goToLogsPage(logsPagination.page - 1)" :disabled="logsPagination.page === 1"
                                class="px-3 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed">
                            &lsaquo;
                        </button>
                        <span class="px-4 py-2 text-gray-400">
                            ç¬¬ {{ logsPagination.page }} / {{ logsPagination.total_pages }} é 
                        </span>
                        <button @click="goToLogsPage(logsPagination.page + 1)" :disabled="logsPagination.page === logsPagination.total_pages"
                                class="px-3 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed">
                            &rsaquo;
                        </button>
                        <button @click="goToLogsPage(logsPagination.total_pages)" :disabled="logsPagination.page === logsPagination.total_pages"
                                class="px-3 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed">
                            &raquo;
                        </button>
                    </div>
                </div>
                
                <!-- ==================== ä»£ç†æ± ç®¡ç† ==================== -->
                <div v-if="currentPage === 'proxies'">
                    <!-- çµ±è¨ˆå¡ç‰‡ -->
                    <div class="grid grid-cols-4 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-4">
                            <p class="text-green-200 text-sm">å¯ç”¨ä»£ç†</p>
                            <p class="text-2xl font-bold mt-1">{{ proxyStats.available || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4">
                            <p class="text-blue-200 text-sm">å·²åˆ†é…</p>
                            <p class="text-2xl font-bold mt-1">{{ proxyStats.assigned || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-red-600 to-red-700 rounded-xl p-4">
                            <p class="text-red-200 text-sm">å¤±æ•—</p>
                            <p class="text-2xl font-bold mt-1">{{ proxyStats.failed || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl p-4">
                            <p class="text-purple-200 text-sm">ç¸½è¨ˆ</p>
                            <p class="text-2xl font-bold mt-1">{{ proxyStats.total || 0 }}</p>
                        </div>
                    </div>
                    
                    <!-- æ“ä½œæ¬„ -->
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4">
                            <select v-model="proxyFilter" @change="loadProxies" 
                                    class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option value="">å…¨éƒ¨ç‹€æ…‹</option>
                                <option value="available">å¯ç”¨</option>
                                <option value="assigned">å·²åˆ†é…</option>
                                <option value="failed">å¤±æ•—</option>
                                <option value="disabled">å·²ç¦ç”¨</option>
                            </select>
                        </div>
                        <button @click="openProxyModal" 
                                class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity">
                            â• æ‰¹é‡æ·»åŠ ä»£ç†
                        </button>
                    </div>
                    
                    <!-- ä»£ç†åˆ—è¡¨ -->
                    <div class="glass-card rounded-2xl p-6">
                        <table class="w-full">
                            <thead>
                                <tr class="text-gray-400 text-sm">
                                    <th class="text-left px-6 py-4 font-medium">ä»£ç†åœ°å€</th>
                                    <th class="text-left px-6 py-4 font-medium">é¡å‹</th>
                                    <th class="text-left px-6 py-4 font-medium">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium">ç¶å®šå¸³è™Ÿ</th>
                                    <th class="text-left px-6 py-4 font-medium">å»¶é²</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="proxy in proxies" :key="proxy.id" 
                                    class="border-t border-gray-700 table-row-hover">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <span class="text-lg mr-2">ğŸŒ</span>
                                            <div>
                                                <p class="font-medium">{{ proxy.host }}:{{ proxy.port }}</p>
                                                <p class="text-sm text-gray-400" v-if="proxy.country || proxy.provider">
                                                    {{ proxy.country || '' }} {{ proxy.provider || '' }}
                                                </p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="px-2 py-1 rounded bg-gray-700 text-sm">{{ proxy.proxy_type?.toUpperCase() }}</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="getProxyStatusClass(proxy.status)" class="font-medium">
                                            {{ getProxyStatusText(proxy.status) }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span v-if="proxy.assigned_phone" class="text-blue-400">
                                            ğŸ“± {{ proxy.assigned_phone }}
                                        </span>
                                        <span v-else class="text-gray-500">-</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span v-if="proxy.last_check_latency" class="text-green-400">
                                            {{ proxy.last_check_latency }}ms
                                        </span>
                                        <span v-else class="text-gray-500">-</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button @click="testProxy(proxy.id)" 
                                                    class="text-blue-400 hover:text-blue-300 text-sm">æ¸¬è©¦</button>
                                            <button v-if="proxy.status === 'assigned'" @click="releaseProxy(proxy)" 
                                                    class="text-yellow-400 hover:text-yellow-300 text-sm">é‡‹æ”¾</button>
                                            <button @click="deleteProxy(proxy.id)" 
                                                    class="text-red-400 hover:text-red-300 text-sm">åˆªé™¤</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr v-if="proxies.length === 0">
                                    <td colspan="6" class="px-6 py-12 text-center text-gray-500">
                                        æš«ç„¡ä»£ç†ï¼Œé»æ“Šä¸Šæ–¹æŒ‰éˆ•æ·»åŠ 
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- ä½¿ç”¨èªªæ˜ -->
                    <div class="mt-6 glass-card rounded-xl p-4">
                        <h4 class="font-medium mb-2">ğŸ“– ä½¿ç”¨èªªæ˜</h4>
                        <ul class="text-sm text-gray-400 space-y-1">
                            <li>â€¢ æ·»åŠ éœæ…‹ä»£ç†å¾Œï¼Œæ–°ç™»éŒ„çš„ Telegram å¸³è™Ÿå°‡è‡ªå‹•åˆ†é…å¯ç”¨ä»£ç†</li>
                            <li>â€¢ æ¯å€‹å¸³è™Ÿç¶å®šå›ºå®šä»£ç†ï¼Œé¿å… IP è®ŠåŒ–è§¸ç™¼é¢¨æ§</li>
                            <li>â€¢ å»ºè­°ä½¿ç”¨ <span class="text-blue-400">éœæ…‹ISPä»£ç†</span> ä»¥ç²å¾—æœ€é«˜ä¿¡ä»»åº¦</li>
                            <li>â€¢ æ”¯æŒæ ¼å¼ï¼š<code class="bg-gray-700 px-1 rounded">socks5://user:pass@host:port</code> æˆ– <code class="bg-gray-700 px-1 rounded">host:port</code></li>
                        </ul>
                    </div>
                </div>
                
                <!-- ==================== API å°æ¥æ± ç®¡ç† ==================== -->
                <div v-if="currentPage === 'apiPool'">
                    <!-- çµ±è¨ˆå¡ç‰‡ -->
                    <div class="grid grid-cols-4 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-4">
                            <p class="text-green-200 text-sm">å¯ç”¨ API</p>
                            <p class="text-2xl font-bold mt-1">{{ apiPoolStats.available_for_assign || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4">
                            <p class="text-blue-200 text-sm">å·²åˆ†é…å¸³è™Ÿ</p>
                            <p class="text-2xl font-bold mt-1">{{ apiPoolStats.total_allocations || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-yellow-600 to-yellow-700 rounded-xl p-4">
                            <p class="text-yellow-200 text-sm">å·²æ»¿ / ç¦ç”¨</p>
                            <p class="text-2xl font-bold mt-1">{{ (apiPoolStats.full || 0) + (apiPoolStats.disabled || 0) }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl p-4">
                            <p class="text-purple-200 text-sm">ç¸½è¨ˆ</p>
                            <p class="text-2xl font-bold mt-1">{{ apiPoolStats.total || 0 }}</p>
                        </div>
                    </div>
                    
                    <!-- æ“ä½œæ¬„ -->
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4">
                            <select v-model="apiPoolFilter" @change="loadApiPool" 
                                    class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option value="">å…¨éƒ¨ç‹€æ…‹</option>
                                <option value="available">å¯ç”¨</option>
                                <option value="full">å·²æ»¿</option>
                                <option value="disabled">å·²ç¦ç”¨</option>
                                <option value="banned">å·²å°ç¦</option>
                            </select>
                            <!-- ğŸ†• åˆ†çµ„éæ¿¾å™¨ -->
                            <select v-model="apiPoolGroupFilter" @change="loadApiPool" 
                                    class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option value="">å…¨éƒ¨åˆ†çµ„</option>
                                <option v-for="group in apiGroups" :key="group.id" :value="group.id">
                                    {{ group.icon }} {{ group.name }} ({{ group.api_count }})
                                </option>
                            </select>
                            <!-- ğŸ†• åˆ†é…ç­–ç•¥é¸æ“‡å™¨ -->
                            <div class="flex items-center gap-2">
                                <span class="text-sm text-gray-400">åˆ†é…ç­–ç•¥:</span>
                                <select v-model="apiPoolStrategy" @change="setApiPoolStrategy" 
                                        class="bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-sm">
                                    <option value="balanced">ğŸ”„ è² è¼‰å‡è¡¡</option>
                                    <option value="success_rate">âœ… æˆåŠŸç‡å„ªå…ˆ</option>
                                    <option value="least_failures">ğŸ›¡ï¸ æœ€å°‘å¤±æ•—</option>
                                    <option value="round_robin">ğŸ”ƒ è¼ªè©¢åˆ†é…</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button @click="openGroupManagerModal" 
                                    class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg font-medium transition-colors">
                                ğŸ“ åˆ†çµ„ç®¡ç†
                            </button>
                            <button @click="openApiPoolModal" 
                                    class="gradient-bg hover:opacity-90 px-4 py-2 rounded-lg font-medium transition-opacity">
                                â• æ·»åŠ å–®å€‹
                            </button>
                            <button @click="openApiPoolBatchModal" 
                                    class="bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded-lg font-medium transition-colors">
                                ğŸ“¥ æ‰¹é‡å°å…¥
                            </button>
                        </div>
                    </div>
                    
                    <!-- API åˆ—è¡¨ -->
                    <div class="glass-card rounded-2xl p-6">
                        <table class="w-full">
                            <thead>
                                <tr class="text-gray-400 text-sm">
                                    <th class="text-left px-6 py-4 font-medium">API æ†‘æ“š</th>
                                    <th class="text-left px-6 py-4 font-medium">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium">ç¶å®šå¸³è™Ÿ</th>
                                    <th class="text-left px-6 py-4 font-medium">æˆåŠŸç‡</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="api in apiPoolList" :key="api.id" 
                                    class="border-t border-gray-700 table-row-hover">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <span class="text-lg mr-2">ğŸ”‘</span>
                                            <div>
                                                <p class="font-medium">{{ api.name }}</p>
                                                <p class="text-sm text-gray-400">
                                                    ID: {{ api.api_id }}
                                                    <span v-if="api.api_hash_masked" class="ml-2">Hash: {{ api.api_hash_masked }}</span>
                                                </p>
                                                <p class="text-xs text-gray-500" v-if="api.source_phone">ä¾†æº: {{ api.source_phone }}</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="getApiStatusClass(api.status)" class="font-medium">
                                            {{ getApiStatusText(api.status) }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="text-blue-400">
                                            {{ api.current_accounts }} / {{ api.max_accounts }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="api.success_rate >= 80 ? 'text-green-400' : api.success_rate >= 50 ? 'text-yellow-400' : 'text-red-400'">
                                            {{ api.success_rate }}%
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button @click="toggleApiStatus(api)" 
                                                    :class="api.status === 'disabled' ? 'text-green-400 hover:text-green-300' : 'text-yellow-400 hover:text-yellow-300'"
                                                    class="text-sm">
                                                {{ api.status === 'disabled' ? 'å•Ÿç”¨' : 'ç¦ç”¨' }}
                                            </button>
                                            <button @click="deleteApiFromPool(api.api_id)" 
                                                    class="text-red-400 hover:text-red-300 text-sm">åˆªé™¤</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr v-if="apiPoolList.length === 0">
                                    <td colspan="5" class="px-6 py-12 text-center text-gray-500">
                                        æš«ç„¡ API æ†‘æ“šï¼Œé»æ“Šä¸Šæ–¹æŒ‰éˆ•æ·»åŠ 
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- ä½¿ç”¨èªªæ˜ -->
                    <div class="mt-6 glass-card rounded-xl p-4">
                        <h4 class="font-medium mb-2">ğŸ“– ä½¿ç”¨èªªæ˜</h4>
                        <ul class="text-sm text-gray-400 space-y-1">
                            <li>â€¢ æœ¬æ± ç‚º <span class="text-blue-400">Telegram å®˜æ–¹ API æ†‘æ“šæ± </span>ï¼Œèˆ‡ã€Œä»£ç†æ± ã€ç‚ºå…©å€‹ç¨ç«‹åŠŸèƒ½</li>
                            <li>â€¢ æ†‘æ“šé ˆåœ¨ <a href="https://my.telegram.org" target="_blank" class="text-blue-400 hover:underline">my.telegram.org</a> ç™»å…¥ â†’ API development tools â†’ å‰µå»ºæ‡‰ç”¨å¾Œç²å¾—</li>
                            <li>â€¢ æ¯å€‹å¸³è™Ÿç™»éŒ„æ™‚ <span class="text-yellow-400">å…ˆ</span> å¾æœ¬æ± å–ä¸€çµ„ API æ†‘æ“šï¼Œ<span class="text-yellow-400">å†</span> å¾ä»£ç†æ± å–ç¨ç«‹ IP</li>
                            <li>â€¢ æ¯å€‹å¸³è™Ÿ = <span class="text-green-400">ä¸€çµ„ API + ä¸€å€‹ IP</span>ï¼Œé›™é‡éš”é›¢ä»¥é™ä½é¢¨æ§</li>
                            <li>â€¢ æ¯çµ„ API å»ºè­°æœ€å¤šç¶å®š 3-5 å€‹å¸³è™Ÿï¼Œé¿å…éåº¦ä½¿ç”¨è§¸ç™¼é¢¨æ§</li>
                        </ul>
                    </div>
                </div>
                
                <!-- ==================== ğŸ†• ç³»çµ±è¨­ç½® ==================== -->
                <div v-if="currentPage === 'sysSettings'" @vue:mounted="loadSystemSettings()">
                    <div class="grid grid-cols-2 gap-6">
                        <!-- å‘Šè­¦é…ç½® -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                                ğŸ”” å‘Šè­¦æ¨é€é…ç½®
                                <span v-if="alertChannels.webhook || alertChannels.email || alertChannels.telegram" 
                                      class="text-xs bg-green-500/20 text-green-400 px-2 py-0.5 rounded-full">å·²é…ç½®</span>
                            </h3>
                            
                            <div class="space-y-4">
                                <!-- åŸºæœ¬è¨­ç½® -->
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-400">å•Ÿç”¨å‘Šè­¦æ¨é€</span>
                                    <button @click="alertConfig.enabled = !alertConfig.enabled"
                                            :class="alertConfig.enabled ? 'bg-green-600' : 'bg-gray-600'"
                                            class="px-4 py-1 rounded-full text-sm transition-colors">
                                        {{ alertConfig.enabled ? 'å·²å•Ÿç”¨' : 'å·²åœç”¨' }}
                                    </button>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm text-gray-400 mb-1">ç¯€æµé–“éš”ï¼ˆåˆ†é˜ï¼‰</label>
                                        <input v-model.number="alertConfig.throttle_minutes" type="number" min="1" max="1440"
                                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm text-gray-400 mb-1">æœ€ä½å‘Šè­¦ç´šåˆ¥</label>
                                        <select v-model="alertConfig.min_level"
                                                class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm">
                                            <option value="info">â„¹ï¸ é€šçŸ¥</option>
                                            <option value="warning">âš ï¸ è­¦å‘Š</option>
                                            <option value="critical">ğŸš¨ ç·Šæ€¥</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Webhook -->
                                <div class="border-t border-gray-700 pt-4">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium">Webhook</span>
                                        <span :class="alertChannels.webhook ? 'text-green-400' : 'text-gray-500'" class="text-xs">
                                            {{ alertChannels.webhook ? 'âœ“ å·²é…ç½®' : 'æœªé…ç½®' }}
                                        </span>
                                    </div>
                                    <input v-model="alertConfig.webhook_url" type="url" placeholder="https://your-webhook-url.com/alerts"
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm mb-2">
                                    <input v-model="alertConfig.webhook_secret" type="password" placeholder="Webhook å¯†é‘°ï¼ˆå¯é¸ï¼‰"
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm">
                                </div>
                                
                                <!-- Telegram -->
                                <div class="border-t border-gray-700 pt-4">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium">Telegram Bot</span>
                                        <span :class="alertChannels.telegram ? 'text-green-400' : 'text-gray-500'" class="text-xs">
                                            {{ alertChannels.telegram ? 'âœ“ å·²é…ç½®' : 'æœªé…ç½®' }}
                                        </span>
                                    </div>
                                    <input v-model="alertConfig.telegram_bot_token" type="password" placeholder="Bot Token"
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm mb-2">
                                    <input v-model="alertConfig.telegram_chat_id" type="text" placeholder="Chat ID"
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm">
                                </div>
                                
                                <!-- éƒµä»¶ -->
                                <div class="border-t border-gray-700 pt-4">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium">éƒµä»¶é€šçŸ¥</span>
                                        <button @click="alertConfig.email_enabled = !alertConfig.email_enabled"
                                                :class="alertConfig.email_enabled ? 'bg-green-600' : 'bg-gray-600'"
                                                class="px-3 py-0.5 rounded-full text-xs transition-colors">
                                            {{ alertConfig.email_enabled ? 'å•Ÿç”¨' : 'åœç”¨' }}
                                        </button>
                                    </div>
                                    <div v-if="alertConfig.email_enabled" class="space-y-2">
                                        <div class="grid grid-cols-2 gap-2">
                                            <input v-model="alertConfig.email_smtp_host" type="text" placeholder="SMTP ä¸»æ©Ÿ"
                                                   class="bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm">
                                            <input v-model.number="alertConfig.email_smtp_port" type="number" placeholder="ç«¯å£"
                                                   class="bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm">
                                        </div>
                                        <input v-model="alertConfig.email_smtp_user" type="text" placeholder="SMTP ç”¨æˆ¶å"
                                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm">
                                        <input v-model="alertConfig.email_smtp_password" type="password" placeholder="SMTP å¯†ç¢¼"
                                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm">
                                        <input v-model="alertConfig.email_from" type="email" placeholder="ç™¼ä»¶äººéƒµç®±"
                                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm">
                                        <input v-model="alertConfig.email_to" type="text" placeholder="æ”¶ä»¶äººéƒµç®±ï¼ˆå¤šå€‹ç”¨é€—è™Ÿåˆ†éš”ï¼‰"
                                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm">
                                    </div>
                                </div>
                                
                                <!-- æ“ä½œæŒ‰éˆ• -->
                                <div class="flex gap-2 pt-4">
                                    <button @click="saveAlertConfig" class="flex-1 bg-blue-600 hover:bg-blue-500 py-2 rounded-lg text-sm">
                                        ğŸ’¾ ä¿å­˜é…ç½®
                                    </button>
                                    <button @click="testAlertChannel('webhook')" :disabled="!alertConfig.webhook_url"
                                            class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm disabled:opacity-50">
                                        æ¸¬è©¦
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- å®šæ™‚ä»»å‹™ -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">â° å®šæ™‚ä»»å‹™ç®¡ç†</h3>
                            
                            <div class="space-y-3">
                                <div v-for="task in scheduledTasks" :key="task.id"
                                     class="bg-gray-700/50 rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-2">
                                        <div class="flex items-center gap-2">
                                            <span class="font-medium">{{ task.name }}</span>
                                            <span :class="task.enabled ? 'bg-green-500/20 text-green-400' : 'bg-gray-500/20 text-gray-400'"
                                                  class="text-xs px-2 py-0.5 rounded-full">
                                                {{ task.enabled ? 'é‹è¡Œä¸­' : 'å·²åœç”¨' }}
                                            </span>
                                        </div>
                                        <button @click="updateScheduledTask(task.id, {enabled: !task.enabled})"
                                                :class="task.enabled ? 'text-yellow-400' : 'text-green-400'"
                                                class="text-sm hover:underline">
                                            {{ task.enabled ? 'åœç”¨' : 'å•Ÿç”¨' }}
                                        </button>
                                    </div>
                                    <div class="text-sm text-gray-400 space-y-1">
                                        <p>é–“éš”: {{ task.interval_minutes }} åˆ†é˜</p>
                                        <p>ä¸Šæ¬¡åŸ·è¡Œ: {{ task.last_run ? new Date(task.last_run).toLocaleString() : 'å¾æœª' }}</p>
                                        <p>åŸ·è¡Œæ¬¡æ•¸: {{ task.run_count }} æ¬¡ (å¤±æ•—: {{ task.fail_count }})</p>
                                    </div>
                                    <div class="flex gap-2 mt-3">
                                        <button @click="runTaskNow(task.id)" 
                                                class="px-3 py-1 bg-blue-600/20 text-blue-400 rounded text-sm hover:bg-blue-600/40">
                                            â–¶ï¸ ç«‹å³åŸ·è¡Œ
                                        </button>
                                        <input v-model.number="task.interval_minutes" type="number" min="1" max="1440"
                                               @change="updateScheduledTask(task.id, {interval_minutes: task.interval_minutes})"
                                               class="w-24 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm">
                                        <span class="text-gray-500 text-sm leading-loose">åˆ†é˜</span>
                                    </div>
                                </div>
                                
                                <div v-if="scheduledTasks.length === 0" class="text-center text-gray-400 py-8">
                                    æš«ç„¡å®šæ™‚ä»»å‹™
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ•¸æ“šå°å‡º -->
                    <div class="bg-gray-800 rounded-xl p-6 mt-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“¤ æ•¸æ“šå°å‡º</h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="bg-gray-700/50 rounded-lg p-4">
                                <h4 class="font-medium mb-2">ğŸ”‘ API æ± æ•¸æ“š</h4>
                                <p class="text-sm text-gray-400 mb-3">å°å‡ºæ‰€æœ‰ API æ†‘æ“šä¿¡æ¯</p>
                                <div class="flex gap-2">
                                    <button @click="exportData('api-pool', 'csv')" 
                                            class="flex-1 bg-green-600 hover:bg-green-500 py-2 rounded text-sm">
                                        CSV
                                    </button>
                                    <button @click="exportData('api-pool', 'json')" 
                                            class="flex-1 bg-blue-600 hover:bg-blue-500 py-2 rounded text-sm">
                                        JSON
                                    </button>
                                </div>
                            </div>
                            <div class="bg-gray-700/50 rounded-lg p-4">
                                <h4 class="font-medium mb-2">ğŸ“‹ åˆ†é…æ­·å²</h4>
                                <p class="text-sm text-gray-400 mb-3">å°å‡º API åˆ†é…è¨˜éŒ„</p>
                                <div class="flex gap-2">
                                    <button @click="exportData('allocation-history', 'csv')" 
                                            class="flex-1 bg-green-600 hover:bg-green-500 py-2 rounded text-sm">
                                        CSV
                                    </button>
                                    <button @click="exportData('allocation-history', 'json')" 
                                            class="flex-1 bg-blue-600 hover:bg-blue-500 py-2 rounded text-sm">
                                        JSON
                                    </button>
                                </div>
                            </div>
                            <div class="bg-gray-700/50 rounded-lg p-4">
                                <h4 class="font-medium mb-2">ğŸš¨ å‘Šè­¦æ­·å²</h4>
                                <p class="text-sm text-gray-400 mb-3">å°å‡ºç³»çµ±å‘Šè­¦è¨˜éŒ„</p>
                                <div class="flex gap-2">
                                    <button @click="exportData('alert-history', 'csv')" 
                                            class="flex-1 bg-green-600 hover:bg-green-500 py-2 rounded text-sm">
                                        CSV
                                    </button>
                                    <button @click="exportData('alert-history', 'json')" 
                                            class="flex-1 bg-blue-600 hover:bg-blue-500 py-2 rounded text-sm">
                                        JSON
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== ğŸ†• P7: æ™ºèƒ½é‹ç¶­ ==================== -->
                <div v-if="currentPage === 'smartOps'" @vue:mounted="loadSmartOpsData()">
                    <!-- å¥åº·æ‘˜è¦å¡ç‰‡ -->
                    <div class="grid grid-cols-4 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-4">
                            <p class="text-green-200 text-sm">å¥åº· API</p>
                            <p class="text-2xl font-bold mt-1">{{ (healthSummary.grade_distribution?.excellent || 0) + (healthSummary.grade_distribution?.good || 0) }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-yellow-600 to-yellow-700 rounded-xl p-4">
                            <p class="text-yellow-200 text-sm">éœ€é—œæ³¨</p>
                            <p class="text-2xl font-bold mt-1">{{ healthSummary.needs_attention || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4">
                            <p class="text-blue-200 text-sm">å¹³å‡å¥åº·åˆ†</p>
                            <p class="text-2xl font-bold mt-1">{{ healthSummary.average_score || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl p-4">
                            <p class="text-purple-200 text-sm">Webhook æˆåŠŸç‡</p>
                            <p class="text-2xl font-bold mt-1">{{ webhookStats.success_rate || 100 }}%</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-6">
                        <!-- å¥åº·è©•åˆ†åˆ—è¡¨ -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                                ğŸ’š API å¥åº·è©•åˆ†
                            </h3>
                            <div class="space-y-3 max-h-96 overflow-y-auto">
                                <div v-for="api in healthScores.slice(0, 10)" :key="api.api_id" 
                                     class="bg-gray-700/50 rounded-lg p-3 flex items-center justify-between">
                                    <div>
                                        <p class="font-medium">{{ api.name || api.api_id }}</p>
                                        <p class="text-xs text-gray-400">{{ api.status }}</p>
                                    </div>
                                    <div class="text-right">
                                        <span :class="['text-lg font-bold', 
                                            api.health_grade === 'excellent' ? 'text-green-400' : 
                                            api.health_grade === 'good' ? 'text-blue-400' : 
                                            api.health_grade === 'fair' ? 'text-yellow-400' : 'text-red-400']">
                                            {{ api.health_score }}
                                        </span>
                                        <p class="text-xs text-gray-400">{{ api.health_grade }}</p>
                                    </div>
                                </div>
                                <p v-if="healthScores.length === 0" class="text-gray-400 text-center py-4">æš«ç„¡æ•¸æ“š</p>
                            </div>
                        </div>
                        
                        <!-- ç•°å¸¸æª¢æ¸¬ -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                                ğŸš¨ ç•°å¸¸ API
                            </h3>
                            <div class="space-y-3 max-h-96 overflow-y-auto">
                                <div v-for="api in anomalies" :key="api.api_id" 
                                     class="bg-red-900/30 border border-red-500/30 rounded-lg p-3">
                                    <div class="flex justify-between items-start">
                                        <p class="font-medium text-red-300">{{ api.name || api.api_id }}</p>
                                        <span class="text-red-400 font-bold">{{ api.score }}</span>
                                    </div>
                                    <div class="mt-2">
                                        <span v-for="issue in api.issues" :key="issue" 
                                              class="inline-block bg-red-600/50 text-xs px-2 py-0.5 rounded mr-1 mb-1">
                                            {{ issue }}
                                        </span>
                                    </div>
                                </div>
                                <p v-if="anomalies.length === 0" class="text-green-400 text-center py-4">
                                    âœ“ æ‰€æœ‰ API é‹è¡Œæ­£å¸¸
                                </p>
                            </div>
                        </div>
                        
                        <!-- é æ¸¬å ±å‘Š -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                                ğŸ“Š æ™ºèƒ½é æ¸¬
                            </h3>
                            <div v-if="predictionReport">
                                <div class="grid grid-cols-2 gap-4 mb-4">
                                    <div class="bg-gray-700/50 rounded-lg p-3">
                                        <p class="text-xs text-gray-400">è¶¨å‹¢</p>
                                        <p :class="['font-bold', 
                                            predictionReport.daily_prediction?.trend === 'up' ? 'text-green-400' :
                                            predictionReport.daily_prediction?.trend === 'down' ? 'text-red-400' : 'text-gray-400']">
                                            {{ predictionReport.daily_prediction?.trend === 'up' ? 'ğŸ“ˆ ä¸Šå‡' : 
                                               predictionReport.daily_prediction?.trend === 'down' ? 'ğŸ“‰ ä¸‹é™' : 'â¡ï¸ ç©©å®š' }}
                                        </p>
                                    </div>
                                    <div class="bg-gray-700/50 rounded-lg p-3">
                                        <p class="text-xs text-gray-400">é¢¨éšªç­‰ç´š</p>
                                        <p :class="['font-bold', 
                                            predictionReport.risk_assessment?.level === 'high' ? 'text-red-400' :
                                            predictionReport.risk_assessment?.level === 'medium' ? 'text-yellow-400' : 'text-green-400']">
                                            {{ predictionReport.risk_assessment?.level === 'high' ? 'ğŸ”´ é«˜' : 
                                               predictionReport.risk_assessment?.level === 'medium' ? 'ğŸŸ¡ ä¸­' : 'ğŸŸ¢ ä½' }}
                                        </p>
                                    </div>
                                </div>
                                <div class="bg-gray-700/50 rounded-lg p-3">
                                    <p class="text-xs text-gray-400 mb-2">å®¹é‡é æ¸¬</p>
                                    <p class="text-sm">
                                        ç•¶å‰ä½¿ç”¨ç‡: <span class="font-bold">{{ predictionReport.capacity_prediction?.current_utilization || 0 }}%</span>
                                    </p>
                                    <p class="text-sm" v-if="predictionReport.capacity_prediction?.days_until_full">
                                        é è¨ˆè€—ç›¡: <span class="font-bold text-yellow-400">{{ predictionReport.capacity_prediction?.days_until_full }} å¤©å¾Œ</span>
                                    </p>
                                </div>
                            </div>
                            <p v-else class="text-gray-400 text-center py-4">åŠ è¼‰ä¸­...</p>
                        </div>
                        
                        <!-- Webhook è¨‚é–±è€… -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold flex items-center gap-2">
                                    ğŸ”— Webhook è¨‚é–±
                                </h3>
                                <button @click="showWebhookModal = true" 
                                        class="bg-purple-600 hover:bg-purple-500 px-3 py-1 rounded text-sm">
                                    + æ·»åŠ 
                                </button>
                            </div>
                            <div class="space-y-2 max-h-48 overflow-y-auto">
                                <div v-for="sub in webhookSubscribers" :key="sub.id" 
                                     class="bg-gray-700/50 rounded-lg p-3 flex items-center justify-between">
                                    <div>
                                        <p class="font-medium">{{ sub.name }}</p>
                                        <p class="text-xs text-gray-400 truncate" style="max-width: 200px;">{{ sub.url }}</p>
                                    </div>
                                    <div class="flex gap-2">
                                        <button @click="testWebhook(sub.id)" class="text-blue-400 hover:text-blue-300 text-sm">æ¸¬è©¦</button>
                                        <button @click="deleteWebhookSubscriber(sub.id)" class="text-red-400 hover:text-red-300 text-sm">åˆªé™¤</button>
                                    </div>
                                </div>
                                <p v-if="webhookSubscribers.length === 0" class="text-gray-400 text-center py-4">æš«ç„¡è¨‚é–±è€…</p>
                            </div>
                        </div>
                        
                        <!-- æ“´ç¸®å®¹ç­–ç•¥ -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold flex items-center gap-2">
                                    âš¡ è‡ªå‹•æ“´ç¸®å®¹
                                </h3>
                                <button @click="showScalingModal = true" 
                                        class="bg-purple-600 hover:bg-purple-500 px-3 py-1 rounded text-sm">
                                    + ç­–ç•¥
                                </button>
                            </div>
                            <!-- æ“´ç¸®å®¹å»ºè­° -->
                            <div v-if="scalingRecommendations.length > 0" class="mb-4">
                                <p class="text-sm text-yellow-400 mb-2">ğŸ’¡ æ“´ç¸®å®¹å»ºè­°</p>
                                <div v-for="rec in scalingRecommendations" :key="rec.policy_id" 
                                     class="bg-yellow-900/30 border border-yellow-500/30 rounded-lg p-3 mb-2">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <p class="font-medium">{{ rec.policy_name }}</p>
                                            <p class="text-xs text-gray-400">{{ rec.reason }}</p>
                                        </div>
                                        <button @click="executeScaling(rec)" 
                                                class="bg-yellow-600 hover:bg-yellow-500 px-3 py-1 rounded text-sm">
                                            {{ rec.action === 'scale_up' ? 'æ“´å®¹' : 'ç¸®å®¹' }}
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- ç­–ç•¥åˆ—è¡¨ -->
                            <div class="space-y-2 max-h-32 overflow-y-auto">
                                <div v-for="policy in scalingPolicies" :key="policy.id" 
                                     class="bg-gray-700/50 rounded-lg p-3 flex items-center justify-between">
                                    <div>
                                        <p class="font-medium">{{ policy.name }}</p>
                                        <p class="text-xs text-gray-400">
                                            æ“´å®¹ >{{ policy.scale_up?.threshold || 80 }}% | ç¸®å®¹ &lt;{{ policy.scale_down?.threshold || 30 }}%
                                        </p>
                                    </div>
                                    <span :class="['px-2 py-0.5 rounded text-xs', 
                                        policy.is_active ? 'bg-green-600' : 'bg-gray-600']">
                                        {{ policy.is_active ? 'å•Ÿç”¨' : 'ç¦ç”¨' }}
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- è¨ˆè²»æ–¹æ¡ˆ -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                                ğŸ’° è¨ˆè²»æ–¹æ¡ˆ
                            </h3>
                            <div class="space-y-2 max-h-48 overflow-y-auto">
                                <div v-for="plan in billingPlans" :key="plan.id" 
                                     class="bg-gray-700/50 rounded-lg p-3 flex items-center justify-between">
                                    <div>
                                        <p class="font-medium">{{ plan.name }}</p>
                                        <p class="text-xs text-gray-400">{{ plan.plan_type }}</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-green-400">${{ plan.base_price || 0 }}</p>
                                        <p class="text-xs text-gray-400">/ æœˆ</p>
                                    </div>
                                </div>
                                <p v-if="billingPlans.length === 0" class="text-gray-400 text-center py-4">æš«ç„¡è¨ˆè²»æ–¹æ¡ˆ</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Webhook æ·»åŠ å½ˆçª— -->
                <div v-if="showWebhookModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-xl p-6 w-full max-w-md">
                        <h3 class="text-xl font-bold mb-4">æ·»åŠ  Webhook è¨‚é–±è€…</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">åç¨±</label>
                                <input v-model="webhookForm.name" type="text" 
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                       placeholder="è¨‚é–±è€…åç¨±">
                            </div>
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">Webhook URL</label>
                                <input v-model="webhookForm.url" type="url" 
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                       placeholder="https://...">
                            </div>
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">Secret (å¯é¸)</label>
                                <input v-model="webhookForm.secret" type="password" 
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                       placeholder="ç”¨æ–¼ç°½åé©—è­‰">
                            </div>
                        </div>
                        <div class="flex justify-end gap-3 mt-6">
                            <button @click="showWebhookModal = false" 
                                    class="px-6 py-2 rounded-lg bg-gray-700 hover:bg-gray-600">å–æ¶ˆ</button>
                            <button @click="addWebhookSubscriber" 
                                    class="px-6 py-2 rounded-lg gradient-bg hover:opacity-90">æ·»åŠ </button>
                        </div>
                    </div>
                </div>
                
                <!-- æ“´ç¸®å®¹ç­–ç•¥å½ˆçª— -->
                <div v-if="showScalingModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-xl p-6 w-full max-w-md">
                        <h3 class="text-xl font-bold mb-4">å‰µå»ºæ“´ç¸®å®¹ç­–ç•¥</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">ç­–ç•¥åç¨±</label>
                                <input v-model="scalingForm.name" type="text" 
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                       placeholder="ç­–ç•¥åç¨±">
                            </div>
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">æ“´å®¹é–¾å€¼ (%)</label>
                                <input v-model.number="scalingForm.scale_up_threshold" type="number" 
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                       min="50" max="100">
                            </div>
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">ç¸®å®¹é–¾å€¼ (%)</label>
                                <input v-model.number="scalingForm.scale_down_threshold" type="number" 
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                       min="0" max="50">
                            </div>
                        </div>
                        <div class="flex justify-end gap-3 mt-6">
                            <button @click="showScalingModal = false" 
                                    class="px-6 py-2 rounded-lg bg-gray-700 hover:bg-gray-600">å–æ¶ˆ</button>
                            <button @click="createScalingPolicy" 
                                    class="px-6 py-2 rounded-lg gradient-bg hover:opacity-90">å‰µå»º</button>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== ğŸ†• P9: æœå‹™å¥åº·å„€è¡¨ç›¤ ==================== -->
                <div v-if="currentPage === 'serviceDashboard'" @vue:mounted="loadServiceDashboard()">
                    <!-- ç³»çµ±ç‹€æ…‹å¡ç‰‡ -->
                    <div class="grid grid-cols-4 gap-4 mb-6">
                        <div :class="['rounded-xl p-4', 
                            serviceDashboard.overall_status === 'operational' ? 'bg-gradient-to-r from-green-600 to-green-700' :
                            serviceDashboard.overall_status === 'degraded' ? 'bg-gradient-to-r from-yellow-600 to-yellow-700' :
                            'bg-gradient-to-r from-red-600 to-red-700']">
                            <p class="text-white/80 text-sm">ç³»çµ±ç‹€æ…‹</p>
                            <p class="text-2xl font-bold mt-1">{{ serviceDashboard.overall_status_display || 'æ­£å¸¸' }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4">
                            <p class="text-blue-200 text-sm">å¹³å‡å¯ç”¨æ€§</p>
                            <p class="text-2xl font-bold mt-1">{{ serviceDashboard.average_uptime || 100 }}%</p>
                        </div>
                        <div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl p-4">
                            <p class="text-purple-200 text-sm">SLA åˆè¦</p>
                            <p class="text-2xl font-bold mt-1">{{ serviceDashboard.sla?.compliance_percent || 100 }}%</p>
                        </div>
                        <div class="bg-gradient-to-r from-orange-600 to-orange-700 rounded-xl p-4">
                            <p class="text-orange-200 text-sm">æ´»èºäº‹ä»¶</p>
                            <p class="text-2xl font-bold mt-1">{{ serviceDashboard.active_incidents || 0 }}</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-6">
                        <!-- æœå‹™çµ„ä»¶ç‹€æ…‹ -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                                ğŸ”§ æœå‹™çµ„ä»¶
                            </h3>
                            <div class="space-y-3 max-h-96 overflow-y-auto">
                                <div v-for="comp in serviceDashboard.components?.list || []" :key="comp.id" 
                                     class="bg-gray-700/50 rounded-lg p-3 flex items-center justify-between">
                                    <div>
                                        <p class="font-medium">{{ comp.name }}</p>
                                        <p class="text-xs text-gray-400">{{ comp.description }}</p>
                                    </div>
                                    <div class="text-right">
                                        <span :class="['px-2 py-1 rounded text-xs font-medium',
                                            comp.status === 'operational' ? 'bg-green-600' :
                                            comp.status === 'degraded' ? 'bg-yellow-600' :
                                            comp.status === 'maintenance' ? 'bg-blue-600' : 'bg-red-600']">
                                            {{ comp.status === 'operational' ? 'æ­£å¸¸' : 
                                               comp.status === 'degraded' ? 'é™ç´š' : 
                                               comp.status === 'maintenance' ? 'ç¶­è­·' : 'ä¸­æ–·' }}
                                        </span>
                                        <p class="text-xs text-gray-400 mt-1">{{ comp.uptime_percent?.toFixed(1) }}%</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- SLA ç›®æ¨™ -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                                ğŸ“Š SLA ç›®æ¨™
                            </h3>
                            <div class="space-y-3">
                                <div v-for="sla in serviceDashboard.sla?.details || []" :key="sla.id" 
                                     class="bg-gray-700/50 rounded-lg p-3">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="font-medium">{{ sla.name }}</span>
                                        <span :class="['px-2 py-0.5 rounded text-xs',
                                            sla.status === 'met' ? 'bg-green-600' :
                                            sla.status === 'at_risk' ? 'bg-yellow-600' : 'bg-red-600']">
                                            {{ sla.status === 'met' ? 'é”æ¨™' : sla.status === 'at_risk' ? 'é¢¨éšª' : 'é•ç´„' }}
                                        </span>
                                    </div>
                                    <div class="flex justify-between text-sm text-gray-400">
                                        <span>ç›®æ¨™: {{ sla.target_value }}</span>
                                        <span>ç•¶å‰: {{ sla.current_value }}</span>
                                    </div>
                                    <div class="mt-2 bg-gray-600 rounded-full h-2">
                                        <div :class="['h-2 rounded-full',
                                            sla.status === 'met' ? 'bg-green-500' :
                                            sla.status === 'at_risk' ? 'bg-yellow-500' : 'bg-red-500']"
                                             :style="{width: Math.min(100, (sla.current_value / sla.target_value) * 100) + '%'}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- æ´»èºäº‹ä»¶ -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold flex items-center gap-2">
                                    ğŸš¨ æ´»èºäº‹ä»¶
                                </h3>
                                <button @click="showIncidentModal = true" 
                                        class="bg-red-600 hover:bg-red-500 px-3 py-1 rounded text-sm">
                                    + å ±å‘Šäº‹ä»¶
                                </button>
                            </div>
                            <div class="space-y-2 max-h-48 overflow-y-auto">
                                <div v-for="incident in serviceDashboard.incidents || []" :key="incident.id" 
                                     class="bg-red-900/30 border border-red-500/30 rounded-lg p-3">
                                    <div class="flex justify-between">
                                        <span class="font-medium text-red-300">{{ incident.title }}</span>
                                        <span class="text-xs text-gray-400">{{ incident.created_at?.split('T')[0] }}</span>
                                    </div>
                                    <p class="text-sm text-gray-400 mt-1">{{ incident.message }}</p>
                                </div>
                                <p v-if="!serviceDashboard.incidents?.length" class="text-green-400 text-center py-4">
                                    âœ“ æš«ç„¡æ´»èºäº‹ä»¶
                                </p>
                            </div>
                        </div>
                        
                        <!-- è¨ˆåŠƒç¶­è­· -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold flex items-center gap-2">
                                    ğŸ”§ è¨ˆåŠƒç¶­è­·
                                </h3>
                                <button @click="showMaintenanceModal = true" 
                                        class="bg-blue-600 hover:bg-blue-500 px-3 py-1 rounded text-sm">
                                    + æ’ç¨‹
                                </button>
                            </div>
                            <div class="space-y-2 max-h-48 overflow-y-auto">
                                <div v-for="maint in serviceDashboard.upcoming_maintenance || []" :key="maint.id" 
                                     class="bg-blue-900/30 border border-blue-500/30 rounded-lg p-3">
                                    <div class="flex justify-between">
                                        <span class="font-medium text-blue-300">{{ maint.title }}</span>
                                        <span class="text-xs text-gray-400">{{ maint.scheduled_start?.split('T')[0] }}</span>
                                    </div>
                                    <p class="text-sm text-gray-400 mt-1">{{ maint.description }}</p>
                                </div>
                                <p v-if="!serviceDashboard.upcoming_maintenance?.length" class="text-gray-400 text-center py-4">
                                    æš«ç„¡è¨ˆåŠƒç¶­è­·
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- äº‹ä»¶å ±å‘Šå½ˆçª— -->
                <div v-if="showIncidentModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-xl p-6 w-full max-w-md">
                        <h3 class="text-xl font-bold mb-4">å ±å‘Šäº‹ä»¶</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">æ¨™é¡Œ</label>
                                <input v-model="incidentForm.title" type="text" 
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                       placeholder="äº‹ä»¶æ¨™é¡Œ">
                            </div>
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">æè¿°</label>
                                <textarea v-model="incidentForm.message" rows="3"
                                          class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                          placeholder="äº‹ä»¶æè¿°"></textarea>
                            </div>
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">åš´é‡ç¨‹åº¦</label>
                                <select v-model="incidentForm.status" 
                                        class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                                    <option value="degraded">æ€§èƒ½ä¸‹é™</option>
                                    <option value="partial_outage">éƒ¨åˆ†ä¸­æ–·</option>
                                    <option value="major_outage">åš´é‡ä¸­æ–·</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex justify-end gap-3 mt-6">
                            <button @click="showIncidentModal = false" 
                                    class="px-6 py-2 rounded-lg bg-gray-700 hover:bg-gray-600">å–æ¶ˆ</button>
                            <button @click="createStatusUpdate" 
                                    class="px-6 py-2 rounded-lg bg-red-600 hover:bg-red-500">å ±å‘Š</button>
                        </div>
                    </div>
                </div>
                
                <!-- ç¶­è­·æ’ç¨‹å½ˆçª— -->
                <div v-if="showMaintenanceModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-xl p-6 w-full max-w-md">
                        <h3 class="text-xl font-bold mb-4">æ’ç¨‹ç¶­è­·</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">æ¨™é¡Œ</label>
                                <input v-model="maintenanceForm.title" type="text" 
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                       placeholder="ç¶­è­·æ¨™é¡Œ">
                            </div>
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">æè¿°</label>
                                <textarea v-model="maintenanceForm.description" rows="3"
                                          class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                          placeholder="ç¶­è­·æè¿°"></textarea>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">é–‹å§‹æ™‚é–“</label>
                                    <input v-model="maintenanceForm.scheduled_start" type="datetime-local"
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">çµæŸæ™‚é–“</label>
                                    <input v-model="maintenanceForm.scheduled_end" type="datetime-local"
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-end gap-3 mt-6">
                            <button @click="showMaintenanceModal = false" 
                                    class="px-6 py-2 rounded-lg bg-gray-700 hover:bg-gray-600">å–æ¶ˆ</button>
                            <button @click="scheduleMaintenance" 
                                    class="px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-500">æ’ç¨‹</button>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== ğŸ†• P10: åˆ†æä¸­å¿ƒ ==================== -->
                <div v-if="currentPage === 'analyticsCenter'" @vue:mounted="loadAnalyticsCenter()">
                    <!-- æ¨™ç±¤é å°èˆª -->
                    <div class="flex gap-2 mb-6">
                        <button v-for="tab in [
                            {id: 'predictions', name: 'æ™ºèƒ½é æ¸¬', icon: 'ğŸ”®'},
                            {id: 'cost', name: 'æˆæœ¬åˆ†æ', icon: 'ğŸ’°'},
                            {id: 'performance', name: 'æ€§èƒ½ç›£æ§', icon: 'âš¡'},
                            {id: 'reports', name: 'å ±å‘Šä¸­å¿ƒ', icon: 'ğŸ“Š'},
                            {id: 'disaster', name: 'ç½å‚™ç‹€æ…‹', icon: 'ğŸ›¡ï¸'}
                        ]" :key="tab.id"
                                @click="analyticsActiveTab = tab.id"
                                :class="['px-4 py-2 rounded-lg font-medium transition-all',
                                        analyticsActiveTab === tab.id 
                                            ? 'bg-blue-600 text-white' 
                                            : 'bg-gray-700 text-gray-300 hover:bg-gray-600']">
                            {{ tab.icon }} {{ tab.name }}
                        </button>
                    </div>
                    
                    <!-- æ™ºèƒ½é æ¸¬ -->
                    <div v-if="analyticsActiveTab === 'predictions'" class="space-y-6">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-bold mb-4">ğŸ”® ä½¿ç”¨é‡é æ¸¬</h3>
                            <div class="grid grid-cols-3 gap-4">
                                <div class="bg-gray-700 rounded-lg p-4">
                                    <p class="text-gray-400 text-sm">é æ¸¬é¡å‹</p>
                                    <p class="text-xl font-bold mt-1">{{ analyticsCenter.predictions?.prediction?.type || 'ä½¿ç”¨é‡' }}</p>
                                </div>
                                <div class="bg-gray-700 rounded-lg p-4">
                                    <p class="text-gray-400 text-sm">ç½®ä¿¡åº¦</p>
                                    <p class="text-xl font-bold mt-1">{{ ((analyticsCenter.predictions?.prediction?.confidence || 0) * 100).toFixed(1) }}%</p>
                                </div>
                                <div class="bg-gray-700 rounded-lg p-4">
                                    <p class="text-gray-400 text-sm">é æ¸¬æ™‚æ®µ</p>
                                    <p class="text-xl font-bold mt-1">æœªä¾† 24 å°æ™‚</p>
                                </div>
                            </div>
                            <div class="mt-4 h-40 flex items-center justify-center bg-gray-700 rounded-lg">
                                <span class="text-gray-400">é æ¸¬è¶¨å‹¢åœ–ï¼ˆåŸºæ–¼çµ±è¨ˆæ¨¡å‹ï¼‰</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æˆæœ¬åˆ†æ -->
                    <div v-if="analyticsActiveTab === 'cost'" class="space-y-6">
                        <div class="grid grid-cols-4 gap-4">
                            <div class="bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-4">
                                <p class="text-white/80 text-sm">30å¤©ç¸½æˆæœ¬</p>
                                <p class="text-2xl font-bold mt-1">${{ (analyticsCenter.costSummary?.total_cost || 0).toFixed(2) }}</p>
                            </div>
                            <div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4">
                                <p class="text-blue-200 text-sm">æ—¥å‡æˆæœ¬</p>
                                <p class="text-2xl font-bold mt-1">${{ (analyticsCenter.costSummary?.avg_daily_cost || 0).toFixed(2) }}</p>
                            </div>
                            <div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl p-4">
                                <p class="text-purple-200 text-sm">è¨˜éŒ„æ•¸</p>
                                <p class="text-2xl font-bold mt-1">{{ analyticsCenter.costSummary?.record_count || 0 }}</p>
                            </div>
                            <div class="bg-gradient-to-r from-orange-600 to-orange-700 rounded-xl p-4">
                                <p class="text-orange-200 text-sm">å„ªåŒ–æ©Ÿæœƒ</p>
                                <p class="text-2xl font-bold mt-1">å¾…ç™¼ç¾</p>
                            </div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-bold mb-4">ğŸ“Š æˆæœ¬åˆ†ä½ˆ</h3>
                            <div class="space-y-2">
                                <div v-for="(data, type) in analyticsCenter.costSummary?.by_resource_type || {}" :key="type" 
                                     class="flex justify-between items-center p-3 bg-gray-700 rounded-lg">
                                    <span>{{ type }}</span>
                                    <span class="font-bold">${{ (data.total_cost || 0).toFixed(2) }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ€§èƒ½ç›£æ§ -->
                    <div v-if="analyticsActiveTab === 'performance'" class="space-y-6">
                        <div class="grid grid-cols-4 gap-4">
                            <div :class="['rounded-xl p-4',
                                analyticsCenter.performanceSummary?.overall_status === 'excellent' ? 'bg-gradient-to-r from-green-600 to-green-700' :
                                analyticsCenter.performanceSummary?.overall_status === 'good' ? 'bg-gradient-to-r from-blue-600 to-blue-700' :
                                'bg-gradient-to-r from-yellow-600 to-yellow-700']">
                                <p class="text-white/80 text-sm">æ•´é«”å¥åº·</p>
                                <p class="text-2xl font-bold mt-1">{{ analyticsCenter.performanceSummary?.overall_health_score || 0 }}åˆ†</p>
                            </div>
                            <div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4">
                                <p class="text-blue-200 text-sm">å¹³å‡å»¶é²</p>
                                <p class="text-2xl font-bold mt-1">{{ analyticsCenter.performanceSummary?.latency_summary?.mean || '-' }}ms</p>
                            </div>
                            <div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl p-4">
                                <p class="text-purple-200 text-sm">P99 å»¶é²</p>
                                <p class="text-2xl font-bold mt-1">{{ analyticsCenter.performanceSummary?.latency_summary?.p99 || '-' }}ms</p>
                            </div>
                            <div class="bg-gradient-to-r from-red-600 to-red-700 rounded-xl p-4">
                                <p class="text-red-200 text-sm">æ´»èºç“¶é ¸</p>
                                <p class="text-2xl font-bold mt-1">{{ analyticsCenter.performanceSummary?.active_bottlenecks?.count || 0 }}</p>
                            </div>
                        </div>
                        <div class="flex gap-4">
                            <button @click="detectBottlenecks" class="px-4 py-2 bg-orange-600 hover:bg-orange-500 rounded-lg">
                                ğŸ” æª¢æ¸¬ç“¶é ¸
                            </button>
                        </div>
                    </div>
                    
                    <!-- å ±å‘Šä¸­å¿ƒ -->
                    <div v-if="analyticsActiveTab === 'reports'" class="space-y-6">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-bold">ğŸ“Š å ±å‘Šåˆ—è¡¨</h3>
                            <button @click="showReportModal = true" class="px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg">
                                â• ç”Ÿæˆå ±å‘Š
                            </button>
                        </div>
                        <div class="bg-gray-800 rounded-xl overflow-hidden">
                            <table class="w-full">
                                <thead class="bg-gray-700">
                                    <tr>
                                        <th class="px-4 py-3 text-left">æ¨™é¡Œ</th>
                                        <th class="px-4 py-3 text-left">é¡å‹</th>
                                        <th class="px-4 py-3 text-left">é€±æœŸ</th>
                                        <th class="px-4 py-3 text-left">ç”Ÿæˆæ™‚é–“</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="report in analyticsCenter.reports" :key="report.id" 
                                        class="border-t border-gray-700 hover:bg-gray-700/50">
                                        <td class="px-4 py-3">{{ report.title }}</td>
                                        <td class="px-4 py-3">{{ report.report_type }}</td>
                                        <td class="px-4 py-3">{{ report.period_start?.slice(0, 10) }}</td>
                                        <td class="px-4 py-3">{{ report.generated_at?.slice(0, 16) }}</td>
                                    </tr>
                                    <tr v-if="!analyticsCenter.reports?.length">
                                        <td colspan="4" class="px-4 py-8 text-center text-gray-400">æš«ç„¡å ±å‘Š</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- ç½å‚™ç‹€æ…‹ -->
                    <div v-if="analyticsActiveTab === 'disaster'" class="space-y-6">
                        <div class="grid grid-cols-3 gap-4">
                            <div :class="['rounded-xl p-4',
                                analyticsCenter.drStats?.rpo?.status === 'met' ? 'bg-gradient-to-r from-green-600 to-green-700' :
                                'bg-gradient-to-r from-red-600 to-red-700']">
                                <p class="text-white/80 text-sm">RPO ç‹€æ…‹</p>
                                <p class="text-2xl font-bold mt-1">{{ analyticsCenter.drStats?.rpo?.status === 'met' ? 'é”æ¨™' : 'è¶…æ™‚' }}</p>
                                <p class="text-sm mt-1">ç›®æ¨™: {{ analyticsCenter.drStats?.rpo?.target_hours || 4 }} å°æ™‚</p>
                            </div>
                            <div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4">
                                <p class="text-blue-200 text-sm">RTO å¹³å‡</p>
                                <p class="text-2xl font-bold mt-1">{{ analyticsCenter.drStats?.rto?.avg_seconds || 0 }}s</p>
                                <p class="text-sm mt-1">æˆåŠŸç‡: {{ analyticsCenter.drStats?.rto?.success_rate || 100 }}%</p>
                            </div>
                            <div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl p-4">
                                <p class="text-purple-200 text-sm">æ´»èºèª¿åº¦</p>
                                <p class="text-2xl font-bold mt-1">{{ analyticsCenter.drStats?.active_schedules || 0 }}</p>
                            </div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-bold mb-4">ğŸ“¦ å‚™ä»½çµ±è¨ˆ</h3>
                            <div class="grid grid-cols-4 gap-4">
                                <div v-for="(data, status) in analyticsCenter.drStats?.backups || {}" :key="status"
                                     class="bg-gray-700 rounded-lg p-4">
                                    <p class="text-gray-400 text-sm">{{ status }}</p>
                                    <p class="text-xl font-bold mt-1">{{ data.count || 0 }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç”Ÿæˆå ±å‘Šå½ˆçª— -->
                    <div v-if="showReportModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                        <div class="bg-gray-800 rounded-2xl p-6 w-full max-w-md">
                            <h3 class="text-xl font-bold mb-4">ğŸ“Š ç”Ÿæˆå ±å‘Š</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">å ±å‘Šé¡å‹</label>
                                    <select v-model="reportForm.type" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                                        <option value="daily">æ¯æ—¥æ‘˜è¦</option>
                                        <option value="weekly">æ¯é€±å›é¡§</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">æ—¥æœŸï¼ˆå¯é¸ï¼‰</label>
                                    <input v-model="reportForm.date" type="date" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                                </div>
                            </div>
                            <div class="flex justify-end gap-3 mt-6">
                                <button @click="showReportModal = false" 
                                        class="px-6 py-2 rounded-lg bg-gray-700 hover:bg-gray-600">å–æ¶ˆ</button>
                                <button @click="generateReport" 
                                        class="px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-500">ç”Ÿæˆ</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- æ·»åŠ ä»£ç†å½ˆçª— -->
                <div v-if="showProxyModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-2xl p-6 w-full max-w-lg">
                        <h3 class="text-xl font-bold mb-4">ğŸŒ æ‰¹é‡æ·»åŠ ä»£ç†</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">ä»£ç†åˆ—è¡¨ï¼ˆæ¯è¡Œä¸€å€‹ï¼‰</label>
                                <textarea v-model="proxyForm.text" 
                                          class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 h-40"
                                          placeholder="æ”¯æŒæ ¼å¼ï¼š
socks5://user:pass@host:port
socks5://host:port
host:port:user:pass
host:port"></textarea>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">æœå‹™å•†ï¼ˆå¯é¸ï¼‰</label>
                                    <input v-model="proxyForm.provider" type="text" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                           placeholder="å¦‚ï¼šBlurpath">
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">åœ‹å®¶/åœ°å€ï¼ˆå¯é¸ï¼‰</label>
                                    <input v-model="proxyForm.country" type="text" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                           placeholder="å¦‚ï¼šUS, HK">
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-end gap-3 mt-6">
                            <button @click="showProxyModal = false" 
                                    class="px-6 py-2 rounded-lg bg-gray-700 hover:bg-gray-600">å–æ¶ˆ</button>
                            <button @click="addProxies" 
                                    class="px-6 py-2 rounded-lg gradient-bg hover:opacity-90">æ·»åŠ ä»£ç†</button>
                        </div>
                    </div>
                </div>
                
                <!-- æ·»åŠ  API æ†‘æ“šå½ˆçª— -->
                <div v-if="showApiPoolModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-2xl p-6 w-full max-w-lg">
                        <h3 class="text-xl font-bold mb-4">ğŸ”‘ æ·»åŠ  API æ†‘æ“š</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">API ID <span class="text-red-400">*</span></label>
                                <input v-model="apiPoolForm.api_id" type="text" 
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                       placeholder="å¦‚ï¼š12345678">
                            </div>
                            
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">API Hash <span class="text-red-400">*</span></label>
                                <input v-model="apiPoolForm.api_hash" type="password" 
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                       placeholder="32 ä½å­—ç¬¦">
                            </div>
                            
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">åˆ¥å</label>
                                <input v-model="apiPoolForm.name" type="text" 
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                       placeholder="å¦‚ï¼šæˆ‘çš„ API 1">
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">ä¾†æºæ‰‹æ©Ÿè™Ÿï¼ˆå¯é¸ï¼‰</label>
                                    <input v-model="apiPoolForm.source_phone" type="text" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                           placeholder="ç”³è«‹æ™‚ç”¨çš„æ‰‹æ©Ÿè™Ÿ">
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">æœ€å¤§ç¶å®šå¸³è™Ÿæ•¸</label>
                                    <input v-model="apiPoolForm.max_accounts" type="number" min="1" max="50"
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">å‚™è¨»ï¼ˆå¯é¸ï¼‰</label>
                                <input v-model="apiPoolForm.note" type="text" 
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                       placeholder="ä»»æ„å‚™è¨»ä¿¡æ¯">
                            </div>
                        </div>
                        
                        <div class="mt-4 p-3 bg-gray-700/50 rounded-lg text-sm text-gray-400">
                            ğŸ’¡ ç²å–æ–¹å¼ï¼šç™»éŒ„ <a href="https://my.telegram.org" target="_blank" class="text-blue-400 hover:underline">my.telegram.org</a> â†’ API development tools â†’ å‰µå»ºæ‡‰ç”¨
                        </div>
                        
                        <div class="flex justify-end gap-3 mt-6">
                            <button @click="showApiPoolModal = false" 
                                    class="px-6 py-2 rounded-lg bg-gray-700 hover:bg-gray-600">å–æ¶ˆ</button>
                            <button @click="addApiToPool" 
                                    class="px-6 py-2 rounded-lg gradient-bg hover:opacity-90">æ·»åŠ </button>
                        </div>
                    </div>
                </div>
                
                <!-- æ‰¹é‡å°å…¥ API æ†‘æ“šå½ˆçª— -->
                <div v-if="showApiPoolBatchModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
                        <h3 class="text-xl font-bold mb-4">ğŸ“¥ æ‰¹é‡å°å…¥ API æ†‘æ“š</h3>
                        
                        <div class="space-y-4">
                            <!-- æ ¼å¼èªªæ˜ -->
                            <div class="bg-gray-700/50 rounded-lg p-4">
                                <h4 class="font-medium text-sm mb-2">ğŸ“– æ”¯æŒæ ¼å¼</h4>
                                <div class="text-xs text-gray-400 space-y-1">
                                    <p><span class="text-blue-400">CSV æ ¼å¼</span>ï¼šapi_id,api_hash,name,source_phone,max_accounts</p>
                                    <p><span class="text-blue-400">ç°¡å–®æ ¼å¼</span>ï¼šapi_id:api_hash æˆ– api_id,api_hashï¼ˆæ¯è¡Œä¸€æ¢ï¼‰</p>
                                    <p><span class="text-blue-400">JSON æ ¼å¼</span>ï¼š[{"api_id":"123","api_hash":"abc"}]</p>
                                </div>
                            </div>
                            
                            <!-- æ–‡æœ¬è¼¸å…¥ -->
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">ç²˜è²¼æˆ–è¼¸å…¥ API åˆ—è¡¨</label>
                                <textarea v-model="apiPoolBatchForm.text" 
                                          class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 h-48 font-mono text-sm"
                                          placeholder="ç¤ºä¾‹ï¼š
12345678,abc123def456789012345678901234,MyApp1,+8613800138000,5
87654321,xyz789abc123456789012345678901,MyApp2,,3

æˆ– CSV æ ¼å¼ï¼ˆå¸¶è¡¨é ­ï¼‰ï¼š
api_id,api_hash,name
12345678,abc123def456789012345678901234,MyApp1"></textarea>
                            </div>
                            
                            <!-- é»˜èªè¨­ç½® -->
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">é»˜èªæœ€å¤§ç¶å®šå¸³è™Ÿæ•¸</label>
                                    <input v-model="apiPoolBatchForm.default_max_accounts" type="number" min="1" max="50"
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                                </div>
                                <div class="flex items-end">
                                    <p class="text-sm text-gray-500">æœªæŒ‡å®šæ™‚ä½¿ç”¨æ­¤å€¼</p>
                                </div>
                            </div>
                            
                            <!-- å°å…¥çµæœ -->
                            <div v-if="apiPoolBatchResult" class="bg-gray-700/50 rounded-lg p-4">
                                <h4 class="font-medium text-sm mb-2">å°å…¥çµæœ</h4>
                                <div class="flex gap-4 text-sm">
                                    <span class="text-green-400">âœ… æˆåŠŸ: {{ apiPoolBatchResult.success }}</span>
                                    <span class="text-yellow-400">ğŸ”„ é‡è¤‡: {{ apiPoolBatchResult.duplicates || 0 }}</span>
                                    <span class="text-red-400">âŒ å¤±æ•—: {{ apiPoolBatchResult.failed - (apiPoolBatchResult.duplicates || 0) }}</span>
                                </div>
                                <div v-if="apiPoolBatchResult.errors && apiPoolBatchResult.errors.length > 0" class="mt-2 text-xs text-red-400 max-h-24 overflow-y-auto">
                                    <div v-for="err in apiPoolBatchResult.errors.slice(0, 5)" :key="err.api_id">
                                        {{ err.api_id }}: {{ err.error }}
                                    </div>
                                    <div v-if="apiPoolBatchResult.errors.length > 5" class="text-gray-500">
                                        ...é‚„æœ‰ {{ apiPoolBatchResult.errors.length - 5 }} æ¢éŒ¯èª¤
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-end gap-3 mt-6">
                            <button @click="showApiPoolBatchModal = false" 
                                    class="px-6 py-2 rounded-lg bg-gray-700 hover:bg-gray-600">é—œé–‰</button>
                            <button @click="importApisFromText" 
                                    :disabled="!apiPoolBatchForm.text.trim()"
                                    :class="apiPoolBatchForm.text.trim() ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-600 cursor-not-allowed'"
                                    class="px-6 py-2 rounded-lg font-medium">å°å…¥</button>
                        </div>
                    </div>
                </div>
                
                <!-- ğŸ†• åˆ†çµ„ç®¡ç†å½ˆçª— -->
                <div v-if="showGroupManagerModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-2xl p-6 w-full max-w-3xl max-h-[85vh] overflow-y-auto">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold">ğŸ“ API åˆ†çµ„ç®¡ç†</h3>
                            <button @click="showGroupManagerModal = false" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                        </div>
                        
                        <!-- æ–°å»ºåˆ†çµ„è¡¨å–® -->
                        <div class="bg-gray-700/50 rounded-xl p-4 mb-6">
                            <h4 class="font-medium mb-3">æ–°å»ºåˆ†çµ„</h4>
                            <div class="flex gap-4">
                                <div class="flex-1">
                                    <input v-model="newGroupForm.name" type="text" placeholder="åˆ†çµ„åç¨±"
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                                </div>
                                <div class="w-24">
                                    <input v-model="newGroupForm.icon" type="text" placeholder="ğŸ“"
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-center">
                                </div>
                                <div class="w-24">
                                    <input v-model="newGroupForm.color" type="color" 
                                           class="w-full h-10 bg-gray-700 border border-gray-600 rounded-lg">
                                </div>
                                <button @click="createApiGroup" 
                                        :disabled="!newGroupForm.name.trim()"
                                        class="px-6 py-2 rounded-lg bg-green-600 hover:bg-green-500 disabled:bg-gray-600 disabled:cursor-not-allowed">
                                    â• å‰µå»º
                                </button>
                            </div>
                            <input v-model="newGroupForm.description" type="text" placeholder="åˆ†çµ„æè¿°ï¼ˆå¯é¸ï¼‰"
                                   class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 mt-2">
                        </div>
                        
                        <!-- åˆ†çµ„åˆ—è¡¨ -->
                        <div class="space-y-3">
                            <div v-for="group in apiGroups" :key="group.id"
                                 class="bg-gray-700/30 rounded-xl p-4 border-l-4"
                                 :style="{borderColor: group.color}">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-3">
                                        <span class="text-2xl">{{ group.icon }}</span>
                                        <div>
                                            <h5 class="font-medium">{{ group.name }}</h5>
                                            <p class="text-sm text-gray-400">{{ group.description || 'ç„¡æè¿°' }}</p>
                                        </div>
                                        <span v-if="group.is_default" class="text-xs bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded-full">é»˜èª</span>
                                    </div>
                                    <div class="flex items-center gap-4">
                                        <div class="text-right text-sm">
                                            <p class="text-gray-300">{{ group.api_count }} å€‹ API</p>
                                            <p class="text-gray-500">{{ group.total_allocations }} å€‹å¸³è™Ÿ</p>
                                        </div>
                                        <div v-if="!group.is_default" class="flex gap-2">
                                            <button @click="editApiGroup(group)" 
                                                    class="p-2 rounded-lg bg-blue-600/20 hover:bg-blue-600/40 text-blue-400">âœï¸</button>
                                            <button @click="deleteApiGroup(group.id)" 
                                                    class="p-2 rounded-lg bg-red-600/20 hover:bg-red-600/40 text-red-400">ğŸ—‘ï¸</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div v-if="apiGroups.length === 0" class="text-center text-gray-400 py-8">
                                æš«ç„¡åˆ†çµ„ï¼Œè«‹å…ˆå‰µå»ºä¸€å€‹åˆ†çµ„
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ğŸ†• æ‰¹é‡èª¿è³¬å½ˆçª— -->
                <div v-if="showBatchAdjustModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-2xl p-6 w-full max-w-lg">
                        <h3 class="text-xl font-bold mb-4">ğŸ’³ æ‰¹é‡èª¿è³¬</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">ç”¨æˆ¶IDåˆ—è¡¨ï¼ˆæ¯è¡Œä¸€å€‹æˆ–ç”¨é€—è™Ÿåˆ†éš”ï¼‰</label>
                                <textarea v-model="batchAdjustForm.userIds" rows="4" 
                                          class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                          placeholder="user_id_1&#10;user_id_2&#10;user_id_3"></textarea>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">é‡‘é¡ï¼ˆåˆ†ï¼Œæ­£æ•¸åŠ æ¬¾ï¼Œè² æ•¸æ‰£æ¬¾ï¼‰</label>
                                    <input v-model.number="batchAdjustForm.amount" type="number" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                           placeholder="å¦‚ 100 = $1.00">
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">é¡å‹</label>
                                    <select v-model="batchAdjustForm.isBonus" 
                                            class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                                        <option :value="false">ä¸»é¤˜é¡</option>
                                        <option :value="true">è´ˆé€é¤˜é¡</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">åŸå› ï¼ˆå¿…å¡«ï¼‰</label>
                                <input v-model="batchAdjustForm.reason" type="text" 
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                       placeholder="å¦‚ï¼šç³»çµ±è£œå„Ÿã€æ´»å‹•çå‹µ">
                            </div>
                        </div>
                        
                        <div class="flex justify-end gap-3 mt-6">
                            <button @click="showBatchAdjustModal = false" 
                                    class="px-6 py-2 rounded-lg bg-gray-700 hover:bg-gray-600">å–æ¶ˆ</button>
                            <button @click="executeBatchAdjust" 
                                    class="px-6 py-2 rounded-lg gradient-bg hover:opacity-90">ç¢ºèªèª¿è³¬</button>
                        </div>
                    </div>
                </div>
                
                <!-- ğŸ†• ç‡ŸéŠ·æ´»å‹•çå‹µå½ˆçª— -->
                <div v-if="showCampaignModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-2xl p-6 w-full max-w-lg">
                        <h3 class="text-xl font-bold mb-4">ğŸ¯ ç™¼æ”¾æ´»å‹•çå‹µ</h3>
                        
                        <div class="space-y-4">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">æ´»å‹•ID</label>
                                    <input v-model="campaignForm.campaignId" type="text" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                           placeholder="å¦‚ï¼šnewyear2026">
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">æ´»å‹•åç¨±</label>
                                    <input v-model="campaignForm.campaignName" type="text" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                           placeholder="å¦‚ï¼šæ–°å¹´æ´»å‹•">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">ç²çç”¨æˆ¶IDåˆ—è¡¨</label>
                                <textarea v-model="campaignForm.userIds" rows="4" 
                                          class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                          placeholder="æ¯è¡Œä¸€å€‹ç”¨æˆ¶ID"></textarea>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">çå‹µé‡‘é¡ï¼ˆåˆ†ï¼‰</label>
                                    <input v-model.number="campaignForm.rewardAmount" type="number" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                           placeholder="å¦‚ 100 = $1.00">
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">çå‹µé¡å‹</label>
                                    <select v-model="campaignForm.rewardType" 
                                            class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                                        <option value="bonus">è´ˆé€é¤˜é¡</option>
                                        <option value="balance">ä¸»é¤˜é¡</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-end gap-3 mt-6">
                            <button @click="showCampaignModal = false" 
                                    class="px-6 py-2 rounded-lg bg-gray-700 hover:bg-gray-600">å–æ¶ˆ</button>
                            <button @click="executeCampaignReward" 
                                    class="px-6 py-2 rounded-lg gradient-bg hover:opacity-90">ç™¼æ”¾çå‹µ</button>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== ç®¡ç†å“¡ç®¡ç† ==================== -->
                <div v-if="currentPage === 'admins'">
                    <div class="flex justify-end mb-6">
                        <button @click="openNewAdminModal" 
                                class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity">
                            â• æ·»åŠ ç®¡ç†å“¡
                        </button>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">ç”¨æˆ¶å</th>
                                    <th class="text-left px-6 py-4 font-medium">å§“å</th>
                                    <th class="text-left px-6 py-4 font-medium">éƒµç®±</th>
                                    <th class="text-left px-6 py-4 font-medium">è§’è‰²</th>
                                    <th class="text-left px-6 py-4 font-medium">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium">æœ€å¾Œç™»éŒ„</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="admin in admins" :key="admin.id"
                                    class="border-t border-gray-700 table-row-hover transition-colors">
                                    <td class="px-6 py-4 font-medium">
                                        <span v-if="admin.username === 'admin'" class="text-yellow-400">ğŸ‘‘ {{ admin.username }}</span>
                                        <span v-else>{{ admin.username }}</span>
                                    </td>
                                    <td class="px-6 py-4">{{ admin.name || '-' }}</td>
                                    <td class="px-6 py-4 text-gray-400">{{ admin.email || '-' }}</td>
                                    <td class="px-6 py-4">
                                        <span :class="{
                                            'bg-yellow-600/30 text-yellow-400': admin.role === 'super_admin',
                                            'bg-blue-600/30 text-blue-400': admin.role === 'admin',
                                            'bg-gray-600/30 text-gray-400': admin.role === 'viewer'
                                        }" class="px-2 py-1 rounded text-sm">
                                            {{ admin.role === 'super_admin' ? 'è¶…ç´šç®¡ç†å“¡' : admin.role === 'admin' ? 'ç®¡ç†å“¡' : 'æŸ¥çœ‹è€…' }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="admin.is_active ? 'text-green-400' : 'text-red-400'">
                                            {{ admin.is_active ? 'âœ“ æ­£å¸¸' : 'âœ— ç¦ç”¨' }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ formatDate(admin.last_login_at) || 'å¾æœª' }}</td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2" v-if="admin.username !== 'admin'">
                                            <button @click="editAdmin(admin)"
                                                    class="px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm transition-colors">
                                                ç·¨è¼¯
                                            </button>
                                            <button @click="toggleAdminStatus(admin)"
                                                    :class="admin.is_active ? 'bg-yellow-600 hover:bg-yellow-700' : 'bg-green-600 hover:bg-green-700'"
                                                    class="px-3 py-1 rounded text-sm transition-colors">
                                                {{ admin.is_active ? 'ç¦ç”¨' : 'å•Ÿç”¨' }}
                                            </button>
                                            <button @click="deleteAdmin(admin)"
                                                    class="px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm transition-colors">
                                                åˆªé™¤
                                            </button>
                                        </div>
                                        <span v-else class="text-gray-500 text-sm">è¶…ç´šç®¡ç†å“¡</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- è§’è‰²æ¬Šé™èªªæ˜ -->
                    <div class="mt-6 bg-gray-800 rounded-xl p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“‹ è§’è‰²æ¬Šé™èªªæ˜</h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="bg-gray-700 rounded-lg p-4">
                                <h4 class="font-medium text-yellow-400 mb-2">ğŸ‘‘ è¶…ç´šç®¡ç†å“¡</h4>
                                <ul class="text-sm text-gray-400 space-y-1">
                                    <li>â€¢ æ‰€æœ‰æ¬Šé™</li>
                                    <li>â€¢ ç®¡ç†å…¶ä»–ç®¡ç†å“¡</li>
                                    <li>â€¢ ç³»çµ±è¨­ç½®</li>
                                </ul>
                            </div>
                            <div class="bg-gray-700 rounded-lg p-4">
                                <h4 class="font-medium text-blue-400 mb-2">ğŸ‘¤ ç®¡ç†å“¡</h4>
                                <ul class="text-sm text-gray-400 space-y-1">
                                    <li>â€¢ ç”¨æˆ¶ç®¡ç†</li>
                                    <li>â€¢ å¡å¯†ç®¡ç†</li>
                                    <li>â€¢ è¨‚å–®ç®¡ç†</li>
                                    <li>â€¢ å…¬å‘Šç®¡ç†</li>
                                </ul>
                            </div>
                            <div class="bg-gray-700 rounded-lg p-4">
                                <h4 class="font-medium text-gray-400 mb-2">ğŸ‘ï¸ æŸ¥çœ‹è€…</h4>
                                <ul class="text-sm text-gray-400 space-y-1">
                                    <li>â€¢ æŸ¥çœ‹æ•¸æ“š</li>
                                    <li>â€¢ ç„¡ä¿®æ”¹æ¬Šé™</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ç®¡ç†å“¡ç·¨è¼¯å½ˆçª— -->
                <div v-if="showAdminModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-xl p-6 w-full max-w-md">
                        <h3 class="text-xl font-bold mb-4">{{ editingAdmin ? 'ç·¨è¼¯ç®¡ç†å“¡' : 'æ·»åŠ ç®¡ç†å“¡' }}</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-gray-400 text-sm mb-1">ç”¨æˆ¶å *</label>
                                <input type="text" v-model="adminForm.username" 
                                       :disabled="editingAdmin"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 disabled:opacity-50"
                                       placeholder="ç™»éŒ„ç”¨æˆ¶å">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm mb-1">å¯†ç¢¼ {{ editingAdmin ? '(ç•™ç©ºä¸ä¿®æ”¹)' : '*' }}</label>
                                <input type="password" v-model="adminForm.password"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="è‡³å°‘6ä½">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm mb-1">å§“å</label>
                                <input type="text" v-model="adminForm.name"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="é¡¯ç¤ºåç¨±">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm mb-1">éƒµç®±</label>
                                <input type="email" v-model="adminForm.email"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="email@example.com">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm mb-1">è§’è‰²</label>
                                <select v-model="adminForm.role"
                                        class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500">
                                    <option value="admin">ç®¡ç†å“¡</option>
                                    <option value="viewer">æŸ¥çœ‹è€…</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="flex justify-end gap-3 mt-6">
                            <button @click="showAdminModal = false"
                                    class="px-6 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg transition-colors">
                                å–æ¶ˆ
                            </button>
                            <button @click="saveAdmin"
                                    class="px-6 py-2 gradient-bg hover:opacity-90 rounded-lg transition-opacity">
                                ä¿å­˜
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== å…¬å‘Šç®¡ç† ==================== -->
                <div v-if="currentPage === 'announcements'">
                    <div class="flex justify-end mb-6">
                        <button @click="openNewAnnouncement" 
                                class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity">
                            â• ç™¼å¸ƒå…¬å‘Š
                        </button>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">æ¨™é¡Œ</th>
                                    <th class="text-left px-6 py-4 font-medium">é¡å‹</th>
                                    <th class="text-left px-6 py-4 font-medium">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium">ç½®é ‚</th>
                                    <th class="text-left px-6 py-4 font-medium">å‰µå»ºæ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="ann in announcements" :key="ann.id" 
                                    class="border-t border-gray-700 table-row-hover transition-colors">
                                    <td class="px-6 py-4 font-medium">{{ ann.title }}</td>
                                    <td class="px-6 py-4">
                                        <span :class="{
                                            'bg-blue-600/30 text-blue-400': ann.announcement_type === 'info',
                                            'bg-yellow-600/30 text-yellow-400': ann.announcement_type === 'warning',
                                            'bg-red-600/30 text-red-400': ann.announcement_type === 'urgent',
                                            'bg-green-600/30 text-green-400': ann.announcement_type === 'update'
                                        }" class="px-2 py-1 rounded text-sm">
                                            {{ ann.announcement_type }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="ann.status === 'published' ? 'text-green-400' : 'text-gray-400'">
                                            {{ ann.status === 'published' ? 'å·²ç™¼å¸ƒ' : 'è‰ç¨¿' }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span v-if="ann.is_pinned" class="text-yellow-400">ğŸ“Œ</span>
                                        <span v-else class="text-gray-500">-</span>
                                    </td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ formatDate(ann.created_at) }}</td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button @click="editAnnouncement(ann)" 
                                                    class="text-blue-400 hover:text-blue-300 text-sm">ç·¨è¼¯</button>
                                            <button @click="deleteAnnouncement(ann.id)" 
                                                    class="text-red-400 hover:text-red-300 text-sm">åˆªé™¤</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr v-if="announcements.length === 0">
                                    <td colspan="6" class="px-6 py-12 text-center text-gray-500">
                                        æš«ç„¡å…¬å‘Š
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== ğŸ†• Phase 1.1: æ”¯ä»˜é…ç½® ==================== -->
                <div v-if="currentPage === 'payment'">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold">ğŸ’ æ”¯ä»˜é…ç½®ç®¡ç†</h2>
                        <div class="flex gap-2">
                            <button @click="openCouponModal()" 
                                    class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm">
                                ğŸ« å‰µå»ºå„ªæƒ åˆ¸
                            </button>
                            <button @click="showAddressModal = true" 
                                    class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-sm">
                                â• æ·»åŠ æ”¶æ¬¾åœ°å€
                            </button>
                        </div>
                    </div>
                    
                    <!-- çµ±è¨ˆå¡ç‰‡ -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-gray-800 rounded-xl p-4">
                            <div class="text-gray-400 text-sm mb-1">ä»Šæ—¥åˆ†é…</div>
                            <div class="text-2xl font-bold text-white">{{ paymentStats.today?.allocations || 0 }}</div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4">
                            <div class="text-gray-400 text-sm mb-1">ä»Šæ—¥ç¢ºèª</div>
                            <div class="text-2xl font-bold text-green-400">{{ paymentStats.today?.confirmed || 0 }}</div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4">
                            <div class="text-gray-400 text-sm mb-1">ä»Šæ—¥æ”¶æ¬¾</div>
                            <div class="text-2xl font-bold text-purple-400">${{ (paymentStats.today?.confirmed_amount || 0).toFixed(2) }}</div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4">
                            <div class="text-gray-400 text-sm mb-1">å¾…ç¢ºèªè¨‚å–®</div>
                            <div class="text-2xl font-bold text-yellow-400">{{ pendingRecharges.length }}</div>
                        </div>
                    </div>
                    
                    <!-- æ”¯ä»˜æ¸ é“é–‹é—œ -->
                    <div class="bg-gray-800 rounded-xl p-6 mb-6">
                        <h3 class="text-lg font-semibold mb-4">æ”¯ä»˜æ¸ é“é…ç½®</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div v-for="channel in paymentChannels" :key="channel.id"
                                 class="bg-gray-700 rounded-lg p-4 flex items-center justify-between">
                                <div>
                                    <div class="font-medium">{{ channel.display_name }}</div>
                                    <div class="text-sm text-gray-400">
                                        æ‰‹çºŒè²»: {{ (channel.fee_rate * 100).toFixed(1) }}% | 
                                        æœ€ä½: ${{ (channel.min_amount / 100).toFixed(0) }}
                                    </div>
                                </div>
                                <button @click="togglePaymentChannel(channel)"
                                        :class="['px-3 py-1 rounded-full text-sm transition-colors',
                                                 channel.enabled ? 'bg-green-600 hover:bg-green-700' : 'bg-gray-600 hover:bg-gray-500']">
                                    {{ channel.enabled ? 'å·²å•Ÿç”¨' : 'å·²åœç”¨' }}
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ”¶æ¬¾åœ°å€åˆ—è¡¨ -->
                    <div class="bg-gray-800 rounded-xl p-6 mb-6">
                        <h3 class="text-lg font-semibold mb-4">æ”¶æ¬¾åœ°å€æ± </h3>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-700">
                                        <th class="py-3 text-left text-gray-400 text-sm">ç¶²çµ¡</th>
                                        <th class="py-3 text-left text-gray-400 text-sm">åœ°å€</th>
                                        <th class="py-3 text-left text-gray-400 text-sm">æ¨™ç±¤</th>
                                        <th class="py-3 text-center text-gray-400 text-sm">ä½¿ç”¨æ¬¡æ•¸</th>
                                        <th class="py-3 text-center text-gray-400 text-sm">ç´¯è¨ˆæ”¶æ¬¾</th>
                                        <th class="py-3 text-center text-gray-400 text-sm">ç‹€æ…‹</th>
                                        <th class="py-3 text-center text-gray-400 text-sm">æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="addr in paymentAddresses" :key="addr.id" 
                                        class="border-b border-gray-700/50 table-row-hover">
                                        <td class="py-3">
                                            <span :class="['px-2 py-1 rounded text-xs uppercase', getNetworkBadgeClass(addr.network)]">
                                                {{ addr.network }}
                                            </span>
                                        </td>
                                        <td class="py-3 font-mono text-sm">{{ addr.address_masked || addr.address }}</td>
                                        <td class="py-3 text-gray-400">{{ addr.label || '-' }}</td>
                                        <td class="py-3 text-center">
                                            {{ addr.usage_count }}
                                            <span v-if="addr.max_usage > 0" class="text-gray-500">/{{ addr.max_usage }}</span>
                                        </td>
                                        <td class="py-3 text-center text-green-400">${{ (addr.total_received || 0).toFixed(2) }}</td>
                                        <td class="py-3 text-center">
                                            <span :class="['px-2 py-1 rounded text-xs',
                                                          addr.status === 'active' ? 'bg-green-600/30 text-green-400' :
                                                          addr.status === 'exhausted' ? 'bg-yellow-600/30 text-yellow-400' :
                                                          'bg-red-600/30 text-red-400']">
                                                {{ addr.status === 'active' ? 'æ´»èº' : addr.status === 'exhausted' ? 'å·²è€—ç›¡' : 'å·²åœç”¨' }}
                                            </span>
                                        </td>
                                        <td class="py-3 text-center">
                                            <button @click="togglePaymentAddress(addr)" 
                                                    class="text-blue-400 hover:text-blue-300 mr-2">
                                                {{ addr.status === 'active' ? 'åœç”¨' : 'å•Ÿç”¨' }}
                                            </button>
                                            <button @click="deletePaymentAddress(addr)" 
                                                    class="text-red-400 hover:text-red-300">
                                                åˆªé™¤
                                            </button>
                                        </td>
                                    </tr>
                                    <tr v-if="paymentAddresses.length === 0">
                                        <td colspan="7" class="py-8 text-center text-gray-500">
                                            æš«ç„¡æ”¶æ¬¾åœ°å€ï¼Œè«‹é»æ“Šå³ä¸Šè§’æ·»åŠ 
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- å¾…ç¢ºèªè¨‚å–® -->
                    <div class="bg-gray-800 rounded-xl p-6">
                        <h3 class="text-lg font-semibold mb-4">å¾…ç¢ºèªå……å€¼è¨‚å–®</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-700">
                                        <th class="py-3 text-left text-gray-400 text-sm">è¨‚å–®è™Ÿ</th>
                                        <th class="py-3 text-left text-gray-400 text-sm">ç”¨æˆ¶</th>
                                        <th class="py-3 text-center text-gray-400 text-sm">é‡‘é¡</th>
                                        <th class="py-3 text-center text-gray-400 text-sm">æ”¯ä»˜æ–¹å¼</th>
                                        <th class="py-3 text-center text-gray-400 text-sm">ç‹€æ…‹</th>
                                        <th class="py-3 text-center text-gray-400 text-sm">å‰µå»ºæ™‚é–“</th>
                                        <th class="py-3 text-center text-gray-400 text-sm">æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="order in pendingRecharges" :key="order.id"
                                        class="border-b border-gray-700/50 table-row-hover">
                                        <td class="py-3 font-mono text-sm">{{ order.order_no }}</td>
                                        <td class="py-3 text-gray-400">{{ order.user_id?.slice(0, 8) }}...</td>
                                        <td class="py-3 text-center font-bold text-green-400">
                                            ${{ (order.amount / 100).toFixed(2) }}
                                        </td>
                                        <td class="py-3 text-center">
                                            <span class="px-2 py-1 bg-purple-600/30 rounded text-xs">
                                                {{ order.payment_method?.toUpperCase() }}
                                            </span>
                                        </td>
                                        <td class="py-3 text-center">
                                            <span :class="['px-2 py-1 rounded text-xs',
                                                          order.status === 'pending' ? 'bg-yellow-600/30 text-yellow-400' :
                                                          order.status === 'paid' ? 'bg-blue-600/30 text-blue-400' :
                                                          'bg-gray-600/30 text-gray-400']">
                                                {{ order.status === 'pending' ? 'å¾…æ”¯ä»˜' : order.status === 'paid' ? 'å¾…ç¢ºèª' : order.status }}
                                            </span>
                                        </td>
                                        <td class="py-3 text-center text-gray-400 text-sm">
                                            {{ new Date(order.created_at).toLocaleString('zh-TW') }}
                                        </td>
                                        <td class="py-3 text-center">
                                            <button @click="confirmRechargeOrder(order)"
                                                    class="bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-sm">
                                                ç¢ºèªå…¥è³¬
                                            </button>
                                        </td>
                                    </tr>
                                    <tr v-if="pendingRecharges.length === 0">
                                        <td colspan="7" class="py-8 text-center text-gray-500">
                                            æš«ç„¡å¾…è™•ç†è¨‚å–®
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- æ·»åŠ åœ°å€å½ˆçª— -->
                <div v-if="showAddressModal" 
                     class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-2xl p-6 w-full max-w-md mx-4">
                        <h3 class="text-xl font-bold mb-6">æ·»åŠ æ”¶æ¬¾åœ°å€</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-gray-400 text-sm mb-2">ç¶²çµ¡é¡å‹</label>
                                <select v-model="addressForm.network"
                                        class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                                    <option value="trc20">TRC20 (TRON)</option>
                                    <option value="erc20">ERC20 (Ethereum)</option>
                                    <option value="bep20">BEP20 (BSC)</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-gray-400 text-sm mb-2">éŒ¢åŒ…åœ°å€</label>
                                <input v-model="addressForm.address" type="text"
                                       :placeholder="addressForm.network === 'trc20' ? 'Té–‹é ­çš„34ä½åœ°å€' : '0xé–‹é ­çš„42ä½åœ°å€'"
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 font-mono">
                            </div>
                            
                            <div>
                                <label class="block text-gray-400 text-sm mb-2">æ¨™ç±¤ï¼ˆå¯é¸ï¼‰</label>
                                <input v-model="addressForm.label" type="text" placeholder="ä¾‹å¦‚ï¼šä¸»è¦æ”¶æ¬¾åœ°å€"
                                       class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">å„ªå…ˆç´š</label>
                                    <input v-model.number="addressForm.priority" type="number" min="0"
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                                    <p class="text-gray-500 text-xs mt-1">æ•¸å­—è¶Šå°è¶Šå„ªå…ˆ</p>
                                </div>
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">æœ€å¤§ä½¿ç”¨æ¬¡æ•¸</label>
                                    <input v-model.number="addressForm.max_usage" type="number" min="0"
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                                    <p class="text-gray-500 text-xs mt-1">0 = ç„¡é™åˆ¶</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex gap-3 mt-6">
                            <button @click="showAddressModal = false" 
                                    class="flex-1 bg-gray-600 hover:bg-gray-500 py-2 rounded-lg">
                                å–æ¶ˆ
                            </button>
                            <button @click="addPaymentAddress" 
                                    class="flex-1 bg-purple-600 hover:bg-purple-700 py-2 rounded-lg">
                                æ·»åŠ 
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== ğŸ†• éŒ¢åŒ…é‹ç‡Ÿ ==================== -->
                <div v-if="currentPage === 'walletOps'">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold">ğŸ’³ éŒ¢åŒ…é‹ç‡Ÿå·¥å…·</h2>
                        <div class="flex gap-2">
                            <button @click="showBatchAdjustModal = true" 
                                    class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm">
                                â• æ‰¹é‡èª¿è³¬
                            </button>
                            <button @click="executeBatchFreeze"
                                    class="bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded-lg text-sm">
                                ğŸ”’ æ‰¹é‡å‡çµ
                            </button>
                            <button @click="executeBatchUnfreeze"
                                    class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm">
                                ğŸ”“ æ‰¹é‡è§£å‡
                            </button>
                        </div>
                    </div>
                    
                    <!-- éŒ¢åŒ…çµ±è¨ˆæ¦‚è¦½ -->
                    <div class="grid grid-cols-4 gap-4 mb-6">
                        <div class="bg-gray-800 rounded-xl p-4">
                            <div class="text-gray-400 text-sm">ç¸½éŒ¢åŒ…æ•¸</div>
                            <div class="text-2xl font-bold text-blue-400">{{ walletAnalytics.overview?.total_wallets || 0 }}</div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4">
                            <div class="text-gray-400 text-sm">æ´»èºéŒ¢åŒ…</div>
                            <div class="text-2xl font-bold text-green-400">{{ walletAnalytics.overview?.active_wallets || 0 }}</div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4">
                            <div class="text-gray-400 text-sm">å‡çµéŒ¢åŒ…</div>
                            <div class="text-2xl font-bold text-red-400">{{ walletAnalytics.overview?.frozen_wallets || 0 }}</div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4">
                            <div class="text-gray-400 text-sm">ç¸½é¤˜é¡</div>
                            <div class="text-2xl font-bold text-purple-400">{{ walletAnalytics.overview?.total_balance_display || '$0.00' }}</div>
                        </div>
                    </div>
                    
                    <!-- æ“ä½œè¨˜éŒ„ -->
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-700 flex justify-between items-center">
                            <h3 class="font-medium">æ‰¹é‡æ“ä½œè¨˜éŒ„</h3>
                            <button @click="loadWalletOperations" class="text-blue-400 text-sm hover:underline">åˆ·æ–°</button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-700/50">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs text-gray-400">æ™‚é–“</th>
                                        <th class="px-4 py-3 text-left text-xs text-gray-400">é¡å‹</th>
                                        <th class="px-4 py-3 text-left text-xs text-gray-400">æè¿°</th>
                                        <th class="px-4 py-3 text-center text-xs text-gray-400">æˆåŠŸ/ç¸½æ•¸</th>
                                        <th class="px-4 py-3 text-center text-xs text-gray-400">ç‹€æ…‹</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-700">
                                    <tr v-for="op in walletOperations" :key="op.id" class="hover:bg-gray-700/30">
                                        <td class="px-4 py-3 text-sm text-gray-400">{{ new Date(op.created_at).toLocaleString() }}</td>
                                        <td class="px-4 py-3 text-sm">{{ op.type }}</td>
                                        <td class="px-4 py-3 text-sm text-gray-300">{{ op.description }}</td>
                                        <td class="px-4 py-3 text-center">
                                            <span class="text-green-400">{{ op.success }}</span> / {{ op.total }}
                                        </td>
                                        <td class="px-4 py-3 text-center">
                                            <span :class="op.status === 'completed' ? 'text-green-400' : 'text-yellow-400'">
                                                {{ op.status === 'completed' ? 'å®Œæˆ' : op.status }}
                                            </span>
                                        </td>
                                    </tr>
                                    <tr v-if="walletOperations.length === 0">
                                        <td colspan="5" class="px-6 py-12 text-center text-gray-500">æš«ç„¡æ“ä½œè¨˜éŒ„</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== ğŸ†• å‘Šè­¦ç›£æ§ ==================== -->
                <div v-if="currentPage === 'alerts'">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold">ğŸš¨ å‘Šè­¦ç›£æ§</h2>
                        <div class="flex gap-2">
                            <select v-model="alertFilter" @change="loadAlerts" 
                                    class="bg-gray-700 rounded-lg px-3 py-2 text-sm">
                                <option value="">å…¨éƒ¨å‘Šè­¦</option>
                                <option value="critical">åš´é‡</option>
                                <option value="warning">è­¦å‘Š</option>
                                <option value="info">ä¿¡æ¯</option>
                            </select>
                            <button @click="triggerAnomalyScan"
                                    class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-sm">
                                ğŸ” ç«‹å³æƒæ
                            </button>
                        </div>
                    </div>
                    
                    <!-- å‘Šè­¦çµ±è¨ˆ -->
                    <div class="grid grid-cols-4 gap-4 mb-6">
                        <div class="bg-gray-800 rounded-xl p-4">
                            <div class="text-gray-400 text-sm">ç¸½å‘Šè­¦</div>
                            <div class="text-2xl font-bold">{{ alertSummary.total }}</div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4">
                            <div class="text-gray-400 text-sm">æœªç¢ºèª</div>
                            <div class="text-2xl font-bold text-red-400">{{ alertSummary.unacknowledged }}</div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4">
                            <div class="text-gray-400 text-sm">è¿‘24å°æ™‚</div>
                            <div class="text-2xl font-bold text-yellow-400">{{ alertSummary.recent_24h }}</div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4">
                            <div class="text-gray-400 text-sm">åš´é‡å‘Šè­¦</div>
                            <div class="text-2xl font-bold text-red-500">{{ alertSummary.by_severity?.critical || 0 }}</div>
                        </div>
                    </div>
                    
                    <!-- å‘Šè­¦åˆ—è¡¨ -->
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700/50">
                                <tr>
                                    <th class="px-4 py-3 text-left text-xs text-gray-400">æ™‚é–“</th>
                                    <th class="px-4 py-3 text-left text-xs text-gray-400">åš´é‡ç¨‹åº¦</th>
                                    <th class="px-4 py-3 text-left text-xs text-gray-400">é¡å‹</th>
                                    <th class="px-4 py-3 text-left text-xs text-gray-400">æ¶ˆæ¯</th>
                                    <th class="px-4 py-3 text-center text-xs text-gray-400">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-700">
                                <tr v-for="alert in alerts" :key="alert.id" class="hover:bg-gray-700/30">
                                    <td class="px-4 py-3 text-sm text-gray-400">{{ new Date(alert.created_at).toLocaleString() }}</td>
                                    <td class="px-4 py-3">
                                        <span :class="getAlertSeverityClass(alert.severity)" class="font-medium">
                                            {{ alert.severity === 'critical' ? 'ğŸ”´ åš´é‡' : alert.severity === 'warning' ? 'ğŸŸ¡ è­¦å‘Š' : 'ğŸ”µ ä¿¡æ¯' }}
                                        </span>
                                    </td>
                                    <td class="px-4 py-3 text-sm">{{ alert.type }}</td>
                                    <td class="px-4 py-3 text-sm text-gray-300">{{ alert.message }}</td>
                                    <td class="px-4 py-3 text-center">
                                        <button v-if="!alert.acknowledged" 
                                                @click="acknowledgeAlert(alert.id)"
                                                class="text-green-400 text-sm hover:underline">
                                            ç¢ºèª
                                        </button>
                                        <span v-else class="text-gray-500 text-sm">å·²ç¢ºèª</span>
                                    </td>
                                </tr>
                                <tr v-if="alerts.length === 0">
                                    <td colspan="5" class="px-6 py-12 text-center text-gray-500">æš«ç„¡å‘Šè­¦</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== ğŸ†• ç‡ŸéŠ·æ´»å‹• ==================== -->
                <div v-if="currentPage === 'campaigns'">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold">ğŸ¯ ç‡ŸéŠ·æ´»å‹•</h2>
                        <button @click="showCampaignModal = true" 
                                class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-sm">
                            ğŸ ç™¼æ”¾æ´»å‹•çå‹µ
                        </button>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl p-6 mb-6">
                        <h3 class="font-medium mb-4">æ´»å‹•çå‹µç™¼æ”¾</h3>
                        <p class="text-gray-400 text-sm mb-4">
                            é€šéç‡ŸéŠ·æ´»å‹•ç‚ºæŒ‡å®šç”¨æˆ¶æ‰¹é‡ç™¼æ”¾çå‹µï¼Œå¯é¸æ“‡ç™¼æ”¾åˆ°ä¸»é¤˜é¡æˆ–è´ˆé€é¤˜é¡ã€‚
                        </p>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-gray-700/50 rounded-lg p-4">
                                <div class="text-3xl mb-2">ğŸ’°</div>
                                <h4 class="font-medium">æ‰¹é‡çå‹µ</h4>
                                <p class="text-gray-400 text-sm">ä¸€æ¬¡æ€§å‘å¤šå€‹ç”¨æˆ¶ç™¼æ”¾çå‹µ</p>
                            </div>
                            <div class="bg-gray-700/50 rounded-lg p-4">
                                <div class="text-3xl mb-2">ğŸ“Š</div>
                                <h4 class="font-medium">æ´»å‹•è¿½è¹¤</h4>
                                <p class="text-gray-400 text-sm">æŸ¥çœ‹æ­·å²ç™¼æ”¾è¨˜éŒ„</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ´»å‹•çå‹µè¨˜éŒ„ -->
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-700">
                            <h3 class="font-medium">æ´»å‹•çå‹µç™¼æ”¾è¨˜éŒ„</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-700/50">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs text-gray-400">æ™‚é–“</th>
                                        <th class="px-4 py-3 text-left text-xs text-gray-400">æ´»å‹•æè¿°</th>
                                        <th class="px-4 py-3 text-center text-xs text-gray-400">æˆåŠŸ/ç¸½æ•¸</th>
                                        <th class="px-4 py-3 text-center text-xs text-gray-400">ç‹€æ…‹</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-700">
                                    <tr v-for="op in walletOperations.filter(o => o.type === 'campaign_reward')" :key="op.id" class="hover:bg-gray-700/30">
                                        <td class="px-4 py-3 text-sm text-gray-400">{{ new Date(op.created_at).toLocaleString() }}</td>
                                        <td class="px-4 py-3 text-sm text-gray-300">{{ op.description }}</td>
                                        <td class="px-4 py-3 text-center">
                                            <span class="text-green-400">{{ op.success }}</span> / {{ op.total }}
                                        </td>
                                        <td class="px-4 py-3 text-center text-green-400">
                                            {{ op.status === 'completed' ? 'å®Œæˆ' : op.status }}
                                        </td>
                                    </tr>
                                    <tr v-if="walletOperations.filter(o => o.type === 'campaign_reward').length === 0">
                                        <td colspan="4" class="px-6 py-12 text-center text-gray-500">æš«ç„¡æ´»å‹•è¨˜éŒ„</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== æ”¶å…¥å ±è¡¨ ==================== -->
                <div v-if="currentPage === 'revenue'">
                    <!-- æ™‚é–“ç¯„åœé¸æ“‡ -->
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-2">
                            <button v-for="d in [7, 30, 90]" :key="d"
                                    @click="revenueReportDays = d; loadRevenueReport()"
                                    :class="['px-4 py-2 rounded-lg transition-colors',
                                            revenueReportDays === d ? 'gradient-bg' : 'bg-gray-700 hover:bg-gray-600']">
                                {{ d }}å¤©
                            </button>
                        </div>
                        <div class="text-gray-400">
                            {{ revenueReport.period || 'åŠ è¼‰ä¸­...' }}
                        </div>
                    </div>
                    
                    <!-- æ”¶å…¥æ¦‚è¦½ -->
                    <div class="grid grid-cols-4 gap-6 mb-6">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <p class="text-gray-400 text-sm">ç¸½æ”¶å…¥</p>
                            <p class="text-3xl font-bold mt-2 text-green-400">{{ (revenueReport.summary?.total_revenue || 0).toLocaleString() }} USDT</p>
                            <p class="text-sm mt-1" :class="(revenueReport.summary?.growth_rate || 0) >= 0 ? 'text-green-400' : 'text-red-400'">
                                {{ (revenueReport.summary?.growth_rate || 0) >= 0 ? 'â†‘' : 'â†“' }} 
                                {{ Math.abs(revenueReport.summary?.growth_rate || 0) }}% è¼ƒä¸ŠæœŸ
                            </p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <p class="text-gray-400 text-sm">è¨‚å–®æ•¸</p>
                            <p class="text-3xl font-bold mt-2 text-blue-400">{{ (revenueReport.summary?.total_orders || 0).toLocaleString() }}</p>
                            <p class="text-sm text-gray-500 mt-1">ä»˜è²»è¨‚å–®</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <p class="text-gray-400 text-sm">ä»˜è²»ç”¨æˆ¶</p>
                            <p class="text-3xl font-bold mt-2 text-purple-400">{{ (revenueReport.summary?.unique_buyers || 0).toLocaleString() }}</p>
                            <p class="text-sm text-gray-500 mt-1">ç¨ç«‹è²·å®¶</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <p class="text-gray-400 text-sm">å®¢å–®åƒ¹</p>
                            <p class="text-3xl font-bold mt-2 text-orange-400">{{ (revenueReport.summary?.avg_order_value || 0).toFixed(2) }} USDT</p>
                            <p class="text-sm text-gray-500 mt-1">å¹³å‡è¨‚å–®é‡‘é¡</p>
                        </div>
                    </div>
                    
                    <!-- åœ–è¡¨ -->
                    <div class="grid grid-cols-2 gap-6 mb-6">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“ˆ æ”¶å…¥è¶¨å‹¢</h3>
                            <canvas id="revenueTrendChart" height="250"></canvas>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ’ ç­‰ç´šæ”¶å…¥åˆ†å¸ƒ</h3>
                            <canvas id="revenueByLevelChart" height="250"></canvas>
                        </div>
                    </div>
                    
                    <!-- è©³ç´°æ•¸æ“šè¡¨ -->
                    <div class="grid grid-cols-2 gap-6">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">æŒ‰ç­‰ç´šçµ±è¨ˆ</h3>
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="text-gray-400 border-b border-gray-700">
                                        <th class="text-left py-2">ç­‰ç´š</th>
                                        <th class="text-right py-2">è¨‚å–®æ•¸</th>
                                        <th class="text-right py-2">æ”¶å…¥</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="item in revenueReport.byLevel" :key="item.product_level" 
                                        class="border-b border-gray-700/50">
                                        <td class="py-2">{{ getLevelName(item.product_level) }}</td>
                                        <td class="text-right py-2">{{ item.order_count }}</td>
                                        <td class="text-right py-2 text-green-400">{{ item.revenue?.toLocaleString() }} USDT</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">æŒ‰æ™‚é•·çµ±è¨ˆ</h3>
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="text-gray-400 border-b border-gray-700">
                                        <th class="text-left py-2">æ™‚é•·</th>
                                        <th class="text-right py-2">è¨‚å–®æ•¸</th>
                                        <th class="text-right py-2">æ”¶å…¥</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="item in revenueReport.byDuration" :key="item.duration_type"
                                        class="border-b border-gray-700/50">
                                        <td class="py-2">{{ getDurationName(item.duration_type) }}</td>
                                        <td class="text-right py-2">{{ item.order_count }}</td>
                                        <td class="text-right py-2 text-green-400">{{ item.revenue?.toLocaleString() }} USDT</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== ç”¨æˆ¶åˆ†æ ==================== -->
                <div v-if="currentPage === 'analytics'">
                    <!-- é—œéµæŒ‡æ¨™ -->
                    <div class="grid grid-cols-5 gap-4 mb-6">
                        <div class="bg-gray-800 rounded-xl p-4 text-center">
                            <p class="text-gray-400 text-sm">ç¸½ç”¨æˆ¶</p>
                            <p class="text-2xl font-bold mt-1">{{ userAnalytics.conversion?.totalUsers || 0 }}</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4 text-center">
                            <p class="text-gray-400 text-sm">ä»˜è²»ç”¨æˆ¶</p>
                            <p class="text-2xl font-bold mt-1 text-green-400">{{ userAnalytics.conversion?.paidUsers || 0 }}</p>
                            <p class="text-xs text-gray-500">{{ userAnalytics.conversion?.paidRate || 0 }}%</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4 text-center">
                            <p class="text-gray-400 text-sm">ARPU</p>
                            <p class="text-2xl font-bold mt-1 text-blue-400">{{ userAnalytics.arpu || 0 }} USDT</p>
                            <p class="text-xs text-gray-500">ç”¨æˆ¶å¹³å‡æ”¶å…¥</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4 text-center">
                            <p class="text-gray-400 text-sm">ARPPU</p>
                            <p class="text-2xl font-bold mt-1 text-purple-400">{{ userAnalytics.arppu || 0 }} USDT</p>
                            <p class="text-xs text-gray-500">ä»˜è²»ç”¨æˆ¶å¹³å‡</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4 text-center">
                            <p class="text-gray-400 text-sm">é‚€è«‹è½‰åŒ–</p>
                            <p class="text-2xl font-bold mt-1 text-orange-400">{{ userAnalytics.referralStats?.converted_referrals || 0 }}</p>
                            <p class="text-xs text-gray-500">å…± {{ userAnalytics.referralStats?.total_referrals || 0 }} äºº</p>
                        </div>
                    </div>
                    
                    <!-- ç•™å­˜ç‡ -->
                    <div class="bg-gray-800 rounded-xl p-6 mb-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“Š ç”¨æˆ¶ç•™å­˜ç‡ (è¿‘30å¤©è¨»å†Šç”¨æˆ¶)</h3>
                        <div class="grid grid-cols-3 gap-6">
                            <div class="text-center">
                                <div class="w-24 h-24 mx-auto rounded-full border-4 border-green-500 flex items-center justify-center">
                                    <span class="text-2xl font-bold">{{ userAnalytics.retention?.day1 || 0 }}%</span>
                                </div>
                                <p class="mt-2 text-gray-400">æ¬¡æ—¥ç•™å­˜</p>
                            </div>
                            <div class="text-center">
                                <div class="w-24 h-24 mx-auto rounded-full border-4 border-blue-500 flex items-center justify-center">
                                    <span class="text-2xl font-bold">{{ userAnalytics.retention?.day7 || 0 }}%</span>
                                </div>
                                <p class="mt-2 text-gray-400">7æ—¥ç•™å­˜</p>
                            </div>
                            <div class="text-center">
                                <div class="w-24 h-24 mx-auto rounded-full border-4 border-purple-500 flex items-center justify-center">
                                    <span class="text-2xl font-bold">{{ userAnalytics.retention?.day30 || 0 }}%</span>
                                </div>
                                <p class="mt-2 text-gray-400">30æ—¥ç•™å­˜</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åœ–è¡¨ -->
                    <div class="grid grid-cols-2 gap-6 mb-6">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“ˆ ç”¨æˆ¶å¢é•·è¶¨å‹¢</h3>
                            <canvas id="userGrowthChart" height="250"></canvas>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ‘¥ ç­‰ç´šåˆ†å¸ƒ</h3>
                            <canvas id="userLevelChart" height="250"></canvas>
                        </div>
                    </div>
                    
                    <!-- é‚€è«‹æ•ˆæœ -->
                    <div class="bg-gray-800 rounded-xl p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ é‚€è«‹æ•ˆæœè¿½è¹¤</h3>
                        <div class="grid grid-cols-3 gap-6 text-center">
                            <div>
                                <p class="text-4xl font-bold text-blue-400">{{ userAnalytics.referralStats?.total_referrals || 0 }}</p>
                                <p class="text-gray-400 mt-1">ç¸½é‚€è«‹æ•¸</p>
                            </div>
                            <div>
                                <p class="text-4xl font-bold text-green-400">{{ userAnalytics.referralStats?.converted_referrals || 0 }}</p>
                                <p class="text-gray-400 mt-1">è½‰åŒ–ä»˜è²»</p>
                            </div>
                            <div>
                                <p class="text-4xl font-bold text-purple-400">{{ (userAnalytics.referralStats?.total_rewards || 0).toLocaleString() }} USDT</p>
                                <p class="text-gray-400 mt-1">ç¸½çå‹µç™¼æ”¾</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== é…é¡ç›£æ§ ==================== -->
                <div v-if="currentPage === 'quotas'">
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4">
                            <select v-model="quotaFilter" class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option value="all">å…¨éƒ¨ç”¨æˆ¶</option>
                                <option value="exceeded">é…é¡ç·Šå¼µ (â‰¥90%)</option>
                                <option value="bronze">âš”ï¸ é’éŠ…æˆ°å£«</option>
                                <option value="silver">ğŸ¥ˆ ç™½éŠ€ç²¾è‹±</option>
                                <option value="gold">ğŸ¥‡ é»ƒé‡‘å¤§å¸«</option>
                                <option value="diamond">ğŸ’ é‘½çŸ³ç‹ç‰Œ</option>
                                <option value="star">ğŸŒŸ æ˜Ÿè€€å‚³èªª</option>
                                <option value="king">ğŸ‘‘ æ¦®è€€ç‹è€…</option>
                            </select>
                        </div>
                        <button @click="loadQuotaStats" 
                                class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition-colors">
                            ğŸ”„ åˆ·æ–°
                        </button>
                    </div>
                    
                    <!-- é…é¡çµ±è¨ˆæ¦‚è¦½ -->
                    <div class="grid grid-cols-4 gap-4 mb-6">
                        <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-5 border border-gray-700">
                            <p class="text-gray-400 text-sm">ä»Šæ—¥ç¸½æ¶ˆæ¯</p>
                            <p class="text-3xl font-bold mt-2 text-cyan-400">{{ quotaStats.reduce((sum, u) => sum + (u.messagesUsed || 0), 0).toLocaleString() }}</p>
                        </div>
                        <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-5 border border-gray-700">
                            <p class="text-gray-400 text-sm">ä»Šæ—¥ AI èª¿ç”¨</p>
                            <p class="text-3xl font-bold mt-2 text-purple-400">{{ quotaStats.reduce((sum, u) => sum + (u.aiUsed || 0), 0).toLocaleString() }}</p>
                        </div>
                        <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-5 border border-gray-700">
                            <p class="text-gray-400 text-sm">é…é¡ç·Šå¼µç”¨æˆ¶</p>
                            <p class="text-3xl font-bold mt-2 text-orange-400">{{ quotaStats.filter(u => u.messagesPercent >= 90 || u.aiPercent >= 90).length }}</p>
                        </div>
                        <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-5 border border-gray-700">
                            <p class="text-gray-400 text-sm">æ´»èºç”¨æˆ¶</p>
                            <p class="text-3xl font-bold mt-2 text-green-400">{{ quotaStats.filter(u => u.messagesUsed > 0 || u.aiUsed > 0).length }}</p>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">ç”¨æˆ¶</th>
                                    <th class="text-left px-6 py-4 font-medium">ç­‰ç´š</th>
                                    <th class="text-left px-6 py-4 font-medium">æ¶ˆæ¯ç”¨é‡</th>
                                    <th class="text-left px-6 py-4 font-medium">AI ç”¨é‡</th>
                                    <th class="text-left px-6 py-4 font-medium">æœ€å¾Œæ´»å‹•</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="user in filteredQuotaStats" :key="user.user_id" 
                                    class="border-t border-gray-700 table-row-hover">
                                    <td class="px-6 py-4">
                                        <p class="font-medium">{{ user.email || user.user_id }}</p>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="'rank-' + user.level">{{ user.level_icon }} {{ user.level_name }}</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="flex items-center gap-3">
                                            <div class="w-24 h-2 bg-gray-700 rounded-full overflow-hidden">
                                                <div class="h-full rounded-full transition-all"
                                                     :class="user.messagesPercent >= 90 ? 'bg-red-500' : user.messagesPercent >= 70 ? 'bg-orange-500' : 'bg-green-500'"
                                                     :style="{width: Math.min(user.messagesPercent || 0, 100) + '%'}"></div>
                                            </div>
                                            <span class="text-sm">{{ user.messagesUsed || 0 }}/{{ user.messagesMax === -1 ? 'âˆ' : user.messagesMax }}</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="flex items-center gap-3">
                                            <div class="w-24 h-2 bg-gray-700 rounded-full overflow-hidden">
                                                <div class="h-full rounded-full transition-all"
                                                     :class="user.aiPercent >= 90 ? 'bg-red-500' : user.aiPercent >= 70 ? 'bg-orange-500' : 'bg-purple-500'"
                                                     :style="{width: Math.min(user.aiPercent || 0, 100) + '%'}"></div>
                                            </div>
                                            <span class="text-sm">{{ user.aiUsed || 0 }}/{{ user.aiMax === -1 ? 'âˆ' : user.aiMax }}</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ formatDate(user.last_active) }}</td>
                                </tr>
                                <tr v-if="filteredQuotaStats.length === 0">
                                    <td colspan="5" class="px-6 py-12 text-center text-gray-500">æš«ç„¡æ•¸æ“š</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== æ‰¹é‡é€šçŸ¥ ==================== -->
                <div v-if="currentPage === 'notifications'">
                    <div class="grid grid-cols-2 gap-6">
                        <!-- ç™¼é€é€šçŸ¥ -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“¨ ç™¼é€æ‰¹é‡é€šçŸ¥</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">ç›®æ¨™ç”¨æˆ¶</label>
                                    <select v-model="notificationForm.targetLevel" 
                                            class="w-full bg-gray-700 rounded-lg px-4 py-2">
                                        <option value="all">æ‰€æœ‰ç”¨æˆ¶</option>
                                        <option value="bronze">âš”ï¸ é’éŠ…æˆ°å£«</option>
                                        <option value="silver">ğŸ¥ˆ ç™½éŠ€ç²¾è‹±</option>
                                        <option value="gold">ğŸ¥‡ é»ƒé‡‘å¤§å¸«</option>
                                        <option value="diamond">ğŸ’ é‘½çŸ³ç‹ç‰Œ</option>
                                        <option value="star">ğŸŒŸ æ˜Ÿè€€å‚³èªª</option>
                                        <option value="king">ğŸ‘‘ æ¦®è€€ç‹è€…</option>
                                        <option value="paid">æ‰€æœ‰ä»˜è²»ç”¨æˆ¶</option>
                                        <option value="free">å…è²»ç”¨æˆ¶</option>
                                    </select>
                                </div>
                                
                                <div class="flex items-center gap-4">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" v-model="notificationForm.targetExpiring" 
                                               class="rounded bg-gray-700 border-gray-600">
                                        <span class="text-gray-300">åƒ…é™å³å°‡åˆ°æœŸç”¨æˆ¶</span>
                                    </label>
                                    <select v-if="notificationForm.targetExpiring" 
                                            v-model="notificationForm.expiringDays"
                                            class="bg-gray-700 rounded-lg px-3 py-1 text-sm">
                                        <option :value="3">3 å¤©å…§</option>
                                        <option :value="7">7 å¤©å…§</option>
                                        <option :value="14">14 å¤©å…§</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">é€šçŸ¥é¡å‹</label>
                                    <select v-model="notificationForm.type" 
                                            class="w-full bg-gray-700 rounded-lg px-4 py-2">
                                        <option value="info">â„¹ï¸ ä¿¡æ¯</option>
                                        <option value="success">âœ… æˆåŠŸ</option>
                                        <option value="warning">âš ï¸ è­¦å‘Š</option>
                                        <option value="promo">ğŸ ä¿ƒéŠ·</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">æ¨™é¡Œ</label>
                                    <input type="text" v-model="notificationForm.title" 
                                           class="w-full bg-gray-700 rounded-lg px-4 py-2"
                                           placeholder="é€šçŸ¥æ¨™é¡Œ">
                                </div>
                                
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">å…§å®¹</label>
                                    <textarea v-model="notificationForm.content" rows="4"
                                              class="w-full bg-gray-700 rounded-lg px-4 py-2"
                                              placeholder="é€šçŸ¥å…§å®¹..."></textarea>
                                </div>
                                
                                <button @click="sendBatchNotification"
                                        class="w-full gradient-bg hover:opacity-90 py-3 rounded-lg font-medium transition-opacity">
                                    ğŸ“¤ ç™¼é€é€šçŸ¥
                                </button>
                            </div>
                        </div>
                        
                        <!-- é€šçŸ¥æ­·å² -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“‹ ç™¼é€æ­·å²</h3>
                            
                            <div v-if="notificationHistory.length === 0" class="text-center text-gray-500 py-8">
                                æš«ç„¡ç™¼é€è¨˜éŒ„
                            </div>
                            
                            <div v-else class="space-y-3 max-h-96 overflow-y-auto">
                                <div v-for="notif in notificationHistory" :key="notif.id" 
                                     class="bg-gray-700/50 rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-2">
                                        <span class="font-medium">{{ notif.title }}</span>
                                        <span class="text-xs text-gray-400">{{ formatDate(notif.created_at) }}</span>
                                    </div>
                                    <p class="text-sm text-gray-400 mb-2">{{ notif.content }}</p>
                                    <div class="flex gap-3 text-xs">
                                        <span class="text-blue-400">ğŸ“¨ {{ notif.sent_count }} å·²ç™¼é€</span>
                                        <span class="text-gray-500">ç›®æ¨™: {{ notif.target_level }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== è¨­å‚™ç®¡ç† ==================== -->
                <div v-if="currentPage === 'devices'">
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4">
                            <select v-model="deviceFilter" class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option value="all">å…¨éƒ¨è¨­å‚™</option>
                                <option value="online">ğŸŸ¢ åœ¨ç·š</option>
                                <option value="offline">âš« é›¢ç·š</option>
                            </select>
                        </div>
                        <div class="text-sm text-gray-400">
                            å…± {{ filteredDevices.length }} å€‹è¨­å‚™
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">è¨­å‚™</th>
                                    <th class="text-left px-6 py-4 font-medium">ç”¨æˆ¶</th>
                                    <th class="text-left px-6 py-4 font-medium">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium">æœ€å¾Œæ´»å‹•</th>
                                    <th class="text-left px-6 py-4 font-medium">IP åœ°å€</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="device in filteredDevices" :key="device.id" 
                                    class="border-t border-gray-700 table-row-hover">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <span class="text-2xl mr-3">ğŸ’»</span>
                                            <div>
                                                <p class="font-medium">{{ device.device_name || 'æœªçŸ¥è¨­å‚™' }}</p>
                                                <p class="text-xs text-gray-500 font-mono">{{ device.machine_id?.slice(0, 16) }}...</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <p class="font-medium">{{ device.email || 'æœªè¨­ç½®' }}</p>
                                        <span :class="'rank-' + device.level" class="text-sm">{{ device.level_icon }} {{ device.level_name }}</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span v-if="device.isOnline" class="px-3 py-1 rounded-full text-sm bg-green-500/20 text-green-400">
                                            ğŸŸ¢ åœ¨ç·š
                                        </span>
                                        <span v-else class="px-3 py-1 rounded-full text-sm bg-gray-500/20 text-gray-400">
                                            âš« é›¢ç·š
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ formatDate(device.last_active) }}</td>
                                    <td class="px-6 py-4 text-gray-400 text-sm font-mono">{{ device.ip_address || '-' }}</td>
                                    <td class="px-6 py-4">
                                        <button @click="revokeDevice(device.id)" 
                                                class="text-red-400 hover:text-red-300 text-sm">è§£ç¶</button>
                                    </td>
                                </tr>
                                <tr v-if="filteredDevices.length === 0">
                                    <td colspan="6" class="px-6 py-12 text-center text-gray-500">æš«ç„¡è¨­å‚™æ•¸æ“š</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== ç³»çµ±è¨­ç½® ==================== -->
                <div v-if="currentPage === 'settings'">
                    
                    <!-- ä¿®æ”¹å¯†ç¢¼å€å¡Š -->
                    <div class="bg-gray-800 rounded-xl p-6 mb-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ” ä¿®æ”¹ç®¡ç†å“¡å¯†ç¢¼</h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div>
                                <label class="block text-gray-400 text-sm mb-2">èˆŠå¯†ç¢¼</label>
                                <input type="password" v-model="passwordForm.old_password"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="è¼¸å…¥ç•¶å‰å¯†ç¢¼">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm mb-2">æ–°å¯†ç¢¼</label>
                                <input type="password" v-model="passwordForm.new_password"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="è¼¸å…¥æ–°å¯†ç¢¼ (è‡³å°‘6ä½)">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm mb-2">ç¢ºèªæ–°å¯†ç¢¼</label>
                                <input type="password" v-model="passwordForm.confirm_password"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="å†æ¬¡è¼¸å…¥æ–°å¯†ç¢¼">
                            </div>
                        </div>
                        <button @click="changePassword" 
                                class="mt-4 bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg transition-colors">
                            ä¿®æ”¹å¯†ç¢¼
                        </button>
                    </div>
                    
                    <!-- Telegram é€šçŸ¥è¨­ç½® -->
                    <div class="bg-gray-800 rounded-xl p-6 mb-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“± Telegram é€šçŸ¥è¨­ç½®</h3>
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-gray-400 text-sm mb-2">Bot Token</label>
                                <input type="text" v-model="telegramConfig.bot_token"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="ä¾‹: 123456789:ABCdefGHIjklMNOpqrsTUVwxyz">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm mb-2">Chat ID</label>
                                <input type="text" v-model="telegramConfig.chat_id"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="ä¾‹: -1001234567890">
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <button @click="saveTelegramConfig" 
                                    class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg transition-colors">
                                ä¿å­˜é…ç½®
                            </button>
                            <button @click="testTelegram" 
                                    class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded-lg transition-colors">
                                ç™¼é€æ¸¬è©¦
                            </button>
                        </div>
                        <p class="text-gray-500 text-sm mt-3">
                            ğŸ’¡ å‰µå»º Bot: åœ¨ Telegram æœç´¢ @BotFatherï¼Œç™¼é€ /newbot<br>
                            ğŸ’¡ ç²å– Chat ID: å°‡ Bot åŠ å…¥ç¾¤çµ„ï¼Œè¨ªå• https://api.telegram.org/bot&lt;TOKEN&gt;/getUpdates
                        </p>
                    </div>
                    
                    <!-- æ•¸æ“šå°å‡ºå€å¡Š -->
                    <div class="bg-gray-800 rounded-xl p-6 mb-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“¥ æ•¸æ“šå°å‡º</h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="bg-gray-700 rounded-lg p-4">
                                <h4 class="font-medium mb-2">ğŸ‘¥ ç”¨æˆ¶æ•¸æ“š</h4>
                                <p class="text-gray-400 text-sm mb-3">å°å‡ºæ‰€æœ‰ç”¨æˆ¶ä¿¡æ¯</p>
                                <button @click="exportData('users')" 
                                        class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors">
                                    å°å‡º CSV
                                </button>
                            </div>
                            <div class="bg-gray-700 rounded-lg p-4">
                                <h4 class="font-medium mb-2">ğŸ’° è¨‚å–®æ•¸æ“š</h4>
                                <p class="text-gray-400 text-sm mb-3">å°å‡ºè¿‘30å¤©è¨‚å–®</p>
                                <button @click="exportData('orders')" 
                                        class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors">
                                    å°å‡º CSV
                                </button>
                            </div>
                            <div class="bg-gray-700 rounded-lg p-4">
                                <h4 class="font-medium mb-2">ğŸŸï¸ å¡å¯†æ•¸æ“š</h4>
                                <p class="text-gray-400 text-sm mb-3">å°å‡ºæœªä½¿ç”¨å¡å¯†</p>
                                <button @click="exportData('licenses', 'unused')" 
                                        class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors">
                                    å°å‡º CSV
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-6">
                        <!-- æ”¯ä»˜è¨­ç½® -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ’³ æ”¯ä»˜è¨­ç½®</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">USDT TRC20 åœ°å€</label>
                                    <input type="text" v-model="settings.usdt_trc20_address" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded px-4 py-2 focus:outline-none focus:border-purple-500"
                                           placeholder="TRC20 éŒ¢åŒ…åœ°å€">
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">USDT åŒ¯ç‡ (1 USDT = ? CNY)</label>
                                    <input type="number" v-model="settings.usdt_rate" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded px-4 py-2 focus:outline-none focus:border-purple-500"
                                           placeholder="7.2">
                                </div>
                                <div class="flex items-center gap-4">
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="settings.alipay_enabled" class="mr-2">
                                        <span class="text-gray-400">æ”¯ä»˜å¯¶</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="settings.wechat_enabled" class="mr-2">
                                        <span class="text-gray-400">å¾®ä¿¡æ”¯ä»˜</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ç³»çµ±è¨­ç½® -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">âš™ï¸ ç³»çµ±è¨­ç½®</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">è©¦ç”¨å¤©æ•¸</label>
                                    <input type="number" v-model="settings.trial_days" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded px-4 py-2 focus:outline-none focus:border-purple-500"
                                           placeholder="3">
                                </div>
                                <div class="flex items-center gap-4">
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="settings.registration_enabled" class="mr-2">
                                        <span class="text-gray-400">é–‹æ”¾è¨»å†Š</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="settings.referral_enabled" class="mr-2">
                                        <span class="text-gray-400">é‚€è«‹çå‹µ</span>
                                    </label>
                                </div>
                                <div class="flex items-center gap-4">
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="settings.maintenance_mode" class="mr-2">
                                        <span class="text-yellow-400">ç¶­è­·æ¨¡å¼</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-end">
                        <button @click="saveSettings" 
                                class="gradient-bg hover:opacity-90 px-8 py-3 rounded-lg font-medium transition-opacity">
                            ğŸ’¾ ä¿å­˜è¨­ç½®
                        </button>
                    </div>
                    
                    <!-- åƒ¹æ ¼é…ç½® -->
                    <div class="bg-gray-800 rounded-xl p-6 mt-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold">ğŸ’° æœƒå“¡åƒ¹æ ¼é…ç½® (USDT)</h3>
                            <button @click="savePrices" 
                                    class="px-4 py-2 rounded-lg text-sm transition-colors"
                                    :class="editingPrices ? 'bg-green-600 hover:bg-green-700' : 'bg-purple-600 hover:bg-purple-700'">
                                {{ editingPrices ? 'ğŸ’¾ ä¿å­˜åƒ¹æ ¼' : 'âœï¸ ç·¨è¼¯åƒ¹æ ¼' }}
                            </button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="text-gray-400">
                                        <th class="text-left py-3">ç­‰ç´š</th>
                                        <th class="text-center py-3">å‘¨å¡</th>
                                        <th class="text-center py-3">æœˆå¡</th>
                                        <th class="text-center py-3">å­£å¡</th>
                                        <th class="text-center py-3">å¹´å¡</th>
                                        <th class="text-center py-3">çµ‚èº«</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="(config, level) in quotaConfig" :key="level" class="border-t border-gray-700">
                                        <td class="py-3">
                                            <span :class="'rank-' + level">{{ config.icon }} {{ config.name }}</span>
                                        </td>
                                        <template v-if="editingPrices && level !== 'bronze' && config.prices">
                                            <td class="text-center py-3">
                                                <input type="number" step="0.1" v-model.number="config.prices.week" 
                                                       class="w-20 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-center text-sm">
                                            </td>
                                            <td class="text-center py-3">
                                                <input type="number" step="0.1" v-model.number="config.prices.month" 
                                                       class="w-20 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-center text-sm">
                                            </td>
                                            <td class="text-center py-3">
                                                <input type="number" step="0.1" v-model.number="config.prices.quarter" 
                                                       class="w-20 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-center text-sm">
                                            </td>
                                            <td class="text-center py-3">
                                                <input type="number" step="0.1" v-model.number="config.prices.year" 
                                                       class="w-20 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-center text-sm">
                                            </td>
                                            <td class="text-center py-3">
                                                <input type="number" step="0.1" v-model.number="config.prices.lifetime" 
                                                       class="w-20 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-center text-sm">
                                            </td>
                                        </template>
                                        <template v-else>
                                            <td class="text-center py-3 text-green-400">{{ config.prices?.week || 0 }}</td>
                                            <td class="text-center py-3 text-green-400">{{ config.prices?.month || 0 }}</td>
                                            <td class="text-center py-3 text-green-400">{{ config.prices?.quarter || 0 }}</td>
                                            <td class="text-center py-3 text-green-400">{{ config.prices?.year || 0 }}</td>
                                            <td class="text-center py-3 text-green-400">{{ config.prices?.lifetime || 0 }}</td>
                                        </template>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="text-xs text-gray-500 mt-3">ğŸ’¡ ä¿®æ”¹åƒ¹æ ¼å¾Œï¼Œæ–°è¨‚å–®å°‡ä½¿ç”¨æ–°åƒ¹æ ¼ã€‚å·²ç”Ÿæˆçš„å¡å¯†åƒ¹æ ¼ä¸è®Šã€‚</p>
                    </div>
                    
                    <!-- é…é¡é…ç½® -->
                    <div class="bg-gray-800 rounded-xl p-6 mt-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“Š æœƒå“¡é…é¡é…ç½®</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="text-gray-400">
                                        <th class="text-left py-3">ç­‰ç´š</th>
                                        <th class="text-center py-3">TGå¸³è™Ÿ</th>
                                        <th class="text-center py-3">æ—¥æ¶ˆæ¯</th>
                                        <th class="text-center py-3">AIèª¿ç”¨</th>
                                        <th class="text-center py-3">è¨­å‚™æ•¸</th>
                                        <th class="text-center py-3">ç¾¤çµ„æ•¸</th>
                                        <th class="text-center py-3">è‡ªå‹•å›è¦†</th>
                                        <th class="text-center py-3">å®šæ™‚ä»»å‹™</th>
                                        <th class="text-center py-3">å¹³å°API</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="(config, level) in quotaConfig" :key="level" class="border-t border-gray-700">
                                        <td class="py-3">
                                            <span :class="'rank-' + level">{{ config.icon }} {{ config.name }}</span>
                                        </td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.tg_accounts) }}</td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.daily_messages) }}</td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.ai_calls) }}</td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.devices) }}</td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.groups) }}</td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.auto_reply_rules) }}</td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.scheduled_tasks) }}</td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.platform_api_quota) }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ==================== ç”Ÿæˆå¡å¯†å½ˆçª— ==================== -->
        <div v-if="showGenerateModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-xl p-6 w-[500px] border border-gray-700">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="text-2xl mr-2">ğŸŸï¸</span>
                    æ‰¹é‡ç”Ÿæˆå¡å¯†
                </h3>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">æœƒå“¡ç­‰ç´š</label>
                        <select v-model="generateForm.level" 
                                class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                            <option value="B">ğŸ¥ˆ ç™½éŠ€ç²¾è‹±</option>
                            <option value="G">ğŸ¥‡ é»ƒé‡‘å¤§å¸«</option>
                            <option value="D">ğŸ’ é‘½çŸ³ç‹ç‰Œ</option>
                            <option value="S">ğŸŒŸ æ˜Ÿè€€å‚³èªª</option>
                            <option value="K">ğŸ‘‘ æ¦®è€€ç‹è€…</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">æ™‚é•·é¡å‹</label>
                        <select v-model="generateForm.duration" 
                                class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                            <option value="1">å‘¨å¡ (7å¤©)</option>
                            <option value="2">æœˆå¡ (30å¤©)</option>
                            <option value="3">å­£å¡ (90å¤©)</option>
                            <option value="Y">å¹´å¡ (365å¤©)</option>
                            <option value="L">çµ‚èº«</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">ç”Ÿæˆæ•¸é‡ (æœ€å¤š100å€‹)</label>
                        <input type="number" v-model="generateForm.count" min="1" max="100"
                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">æ‰¹æ¬¡å‚™è¨» (å¯é¸)</label>
                        <input type="text" v-model="generateForm.notes" placeholder="ä¾‹å¦‚ï¼šæ´»å‹•è´ˆé€"
                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                    </div>
                </div>
                
                <div class="flex justify-end gap-4 mt-6">
                    <button @click="showGenerateModal = false" 
                            class="px-6 py-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors">
                        å–æ¶ˆ
                    </button>
                    <button @click="generateLicenses" 
                            :disabled="isGenerating"
                            class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity disabled:opacity-50">
                        {{ isGenerating ? 'ç”Ÿæˆä¸­...' : 'ç”Ÿæˆå¡å¯†' }}
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ==================== ä¿®æ”¹å¯†ç¢¼å½ˆçª— ==================== -->
        <div v-if="showPasswordModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-xl p-6 w-[450px] border border-gray-700">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="text-2xl mr-2">ğŸ”‘</span>
                    ä¿®æ”¹å¯†ç¢¼
                </h3>
                
                <!-- éŒ¯èª¤æç¤º -->
                <div v-if="passwordErrors.length > 0" class="bg-red-500/20 border border-red-500/50 rounded-lg p-3 mb-4">
                    <ul class="text-red-400 text-sm list-disc list-inside">
                        <li v-for="err in passwordErrors" :key="err">{{ err }}</li>
                    </ul>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">èˆŠå¯†ç¢¼</label>
                        <input type="password" v-model="passwordForm.oldPassword"
                               class="w-full bg-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
                               placeholder="è«‹è¼¸å…¥ç•¶å‰å¯†ç¢¼">
                    </div>
                    
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">æ–°å¯†ç¢¼</label>
                        <input type="password" v-model="passwordForm.newPassword"
                               @input="checkPasswordStrength"
                               class="w-full bg-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
                               placeholder="è«‹è¼¸å…¥æ–°å¯†ç¢¼">
                        <!-- å¯†ç¢¼å¼·åº¦æŒ‡ç¤ºå™¨ -->
                        <div class="mt-2">
                            <div class="flex gap-1 mb-1">
                                <div class="h-1 flex-1 rounded" 
                                     :class="passwordStrength.score >= 1 ? (passwordStrength.label === 'weak' ? 'bg-red-500' : passwordStrength.label === 'medium' ? 'bg-yellow-500' : 'bg-green-500') : 'bg-gray-600'"></div>
                                <div class="h-1 flex-1 rounded" 
                                     :class="passwordStrength.score >= 3 ? (passwordStrength.label === 'medium' ? 'bg-yellow-500' : 'bg-green-500') : 'bg-gray-600'"></div>
                                <div class="h-1 flex-1 rounded" 
                                     :class="passwordStrength.score >= 5 ? 'bg-green-500' : 'bg-gray-600'"></div>
                            </div>
                            <p class="text-xs" :class="{
                                'text-red-400': passwordStrength.label === 'weak',
                                'text-yellow-400': passwordStrength.label === 'medium',
                                'text-green-400': passwordStrength.label === 'strong'
                            }">
                                {{ passwordStrength.label === 'weak' ? 'å¼±' : passwordStrength.label === 'medium' ? 'ä¸­ç­‰' : passwordStrength.label === 'strong' ? 'å¼·' : '' }}
                                <span v-if="passwordStrength.suggestions.length" class="text-gray-500 ml-2">
                                    {{ passwordStrength.suggestions[0] }}
                                </span>
                            </p>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">ç¢ºèªæ–°å¯†ç¢¼</label>
                        <input type="password" v-model="passwordForm.confirmPassword"
                               class="w-full bg-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
                               placeholder="è«‹å†æ¬¡è¼¸å…¥æ–°å¯†ç¢¼">
                        <p v-if="passwordForm.confirmPassword && passwordForm.newPassword !== passwordForm.confirmPassword" 
                           class="text-red-400 text-xs mt-1">å…©æ¬¡è¼¸å…¥çš„å¯†ç¢¼ä¸ä¸€è‡´</p>
                    </div>
                </div>
                
                <!-- å¯†ç¢¼è¦å‰‡èªªæ˜ -->
                <div class="bg-gray-700/50 rounded-lg p-3 mt-4 text-xs text-gray-400">
                    <p class="font-medium mb-1">å¯†ç¢¼è¦æ±‚ï¼š</p>
                    <ul class="list-disc list-inside space-y-0.5">
                        <li>è‡³å°‘ 8 å€‹å­—ç¬¦</li>
                        <li>åŒ…å«å¤§å¯«å’Œå°å¯«å­—æ¯</li>
                        <li>åŒ…å«è‡³å°‘ä¸€å€‹æ•¸å­—</li>
                    </ul>
                </div>
                
                <div class="flex justify-end gap-4 mt-6">
                    <button @click="showPasswordModal = false" 
                            class="px-6 py-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors">
                        å–æ¶ˆ
                    </button>
                    <button @click="changePassword"
                            :disabled="!passwordForm.oldPassword || !passwordForm.newPassword || passwordForm.newPassword !== passwordForm.confirmPassword"
                            class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity disabled:opacity-50 disabled:cursor-not-allowed">
                        ç¢ºèªä¿®æ”¹
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ==================== çºŒè²»å½ˆçª— ==================== -->
        <div v-if="showExtendModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-xl p-6 w-[450px] border border-gray-700">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="text-2xl mr-2">â°</span>
                    æ‰‹å‹•çºŒè²»
                </h3>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">ç”¨æˆ¶</label>
                        <input type="text" :value="extendForm.userDisplay" disabled
                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-gray-400">
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">å»¶é•·å¤©æ•¸</label>
                        <select v-model="extendForm.days" 
                                class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                            <option :value="7">7 å¤©ï¼ˆå‘¨å¡ï¼‰</option>
                            <option :value="30">30 å¤©ï¼ˆæœˆå¡ï¼‰</option>
                            <option :value="90">90 å¤©ï¼ˆå­£å¡ï¼‰</option>
                            <option :value="365">365 å¤©ï¼ˆå¹´å¡ï¼‰</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">å‡ç´šç­‰ç´šï¼ˆå¯é¸ï¼‰</label>
                        <select v-model="extendForm.level" 
                                class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                            <option value="">ä¿æŒåŸç­‰ç´š</option>
                            <option value="silver">ğŸ¥ˆ ç™½éŠ€ç²¾è‹±</option>
                            <option value="gold">ğŸ¥‡ é»ƒé‡‘å¤§å¸«</option>
                            <option value="diamond">ğŸ’ é‘½çŸ³ç‹ç‰Œ</option>
                            <option value="star">ğŸŒŸ æ˜Ÿè€€å‚³èªª</option>
                            <option value="king">ğŸ‘‘ æ¦®è€€ç‹è€…</option>
                        </select>
                    </div>
                </div>
                
                <div class="flex justify-end gap-4 mt-6">
                    <button @click="showExtendModal = false" 
                            class="px-6 py-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors">
                        å–æ¶ˆ
                    </button>
                    <button @click="submitExtend" 
                            class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded-lg font-medium transition-colors">
                        ç¢ºèªçºŒè²»
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ==================== ç”¨æˆ¶è©³æƒ…å½ˆçª— ==================== -->
        <div v-if="showUserModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50 overflow-y-auto py-8">
            <div class="bg-gray-800 rounded-xl w-[800px] border border-gray-700 max-h-[90vh] overflow-y-auto">
                <!-- æ¨™é¡Œ -->
                <div class="sticky top-0 bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center">
                    <h3 class="text-xl font-bold flex items-center">
                        <span class="text-2xl mr-2">ğŸ‘¤</span>
                        ç”¨æˆ¶è©³æƒ…
                    </h3>
                    <button @click="showUserModal = false" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                </div>
                
                <div class="p-6 space-y-6" v-if="userDetail">
                    <!-- åŸºæœ¬ä¿¡æ¯ -->
                    <div class="grid grid-cols-2 gap-6">
                        <div class="bg-gray-700/50 rounded-lg p-4">
                            <h4 class="text-sm text-gray-400 mb-3">åŸºæœ¬ä¿¡æ¯</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span class="text-gray-400">ç”¨æˆ¶ID</span>
                                    <span class="font-mono">{{ userDetail.user?.user_id }}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">éƒµç®±</span>
                                    <span>{{ userDetail.user?.email || 'æœªè¨­ç½®' }}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">æš±ç¨±</span>
                                    <span>{{ userDetail.user?.nickname || 'æœªè¨­ç½®' }}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">æ©Ÿå™¨ç¢¼</span>
                                    <span class="font-mono text-xs">{{ (userDetail.user?.machine_id || '').slice(0, 20) }}...</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">è¨»å†Šæ™‚é–“</span>
                                    <span>{{ formatDate(userDetail.user?.created_at) }}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">æœ€å¾Œæ´»å‹•</span>
                                    <span>{{ formatDate(userDetail.user?.last_active_at) || '-' }}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700/50 rounded-lg p-4">
                            <h4 class="text-sm text-gray-400 mb-3">æœƒå“¡ä¿¡æ¯</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-400">æœƒå“¡ç­‰ç´š</span>
                                    <span :class="'rank-' + (userDetail.user?.membership_level || 'bronze')" class="font-medium">
                                        {{ userDetail.user?.levelIcon }} {{ userDetail.user?.levelName }}
                                    </span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">åˆ°æœŸæ™‚é–“</span>
                                    <span :class="userDetail.user?.is_lifetime ? 'text-purple-400' : ''">
                                        {{ userDetail.user?.is_lifetime ? 'â™¾ï¸ çµ‚èº«' : formatDate(userDetail.user?.expires_at) }}
                                    </span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">é‚€è«‹ç¢¼</span>
                                    <span class="font-mono text-blue-400">{{ userDetail.user?.invite_code }}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">é‚€è«‹äººæ•¸</span>
                                    <span>{{ userDetail.user?.total_invites || 0 }} äºº</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">é‚€è«‹æ”¶ç›Š</span>
                                    <span class="text-green-400">{{ userDetail.user?.invite_earnings || 0 }} USDT</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">é¤˜é¡</span>
                                    <span class="text-yellow-400">{{ userDetail.user?.balance || 0 }} USDT</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- éŒ¢åŒ…ä¿¡æ¯ -->
                    <div class="bg-gray-700/50 rounded-lg p-4">
                        <h4 class="text-sm text-gray-400 mb-3">ğŸ’° éŒ¢åŒ…ä¿¡æ¯</h4>
                        <div v-if="userDetail.wallet" class="grid grid-cols-4 gap-4 text-center">
                            <div>
                                <p class="text-2xl font-bold text-green-400">{{ userDetail.wallet?.balanceDisplay || '$0.00' }}</p>
                                <p class="text-gray-400 text-sm">ä¸»é¤˜é¡</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-yellow-400">{{ userDetail.wallet?.bonusDisplay || '$0.00' }}</p>
                                <p class="text-gray-400 text-sm">è´ˆé€é¤˜é¡</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-red-400">{{ userDetail.wallet?.frozenDisplay || '$0.00' }}</p>
                                <p class="text-gray-400 text-sm">å‡çµé‡‘é¡</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-blue-400">{{ userDetail.wallet?.totalConsumedDisplay || '$0.00' }}</p>
                                <p class="text-gray-400 text-sm">ç´¯è¨ˆæ¶ˆè²»</p>
                            </div>
                        </div>
                        <div v-else class="text-center text-gray-500 py-4">
                            è©²ç”¨æˆ¶å°šæœªé–‹é€šéŒ¢åŒ…
                        </div>
                        <!-- éŒ¢åŒ…ç‹€æ…‹èˆ‡æ“ä½œ -->
                        <div v-if="userDetail.wallet" class="mt-4 flex justify-between items-center border-t border-gray-600 pt-3">
                            <div class="flex items-center gap-2">
                                <span class="text-gray-400 text-sm">éŒ¢åŒ…ç‹€æ…‹:</span>
                                <span v-if="userDetail.wallet?.status === 'active'" class="text-green-400">âœ… æ­£å¸¸</span>
                                <span v-else-if="userDetail.wallet?.status === 'frozen'" class="text-red-400">ğŸ”’ å·²å‡çµ</span>
                                <span v-else class="text-gray-400">{{ userDetail.wallet?.status }}</span>
                            </div>
                            <div class="flex gap-2">
                                <button @click="adjustUserBalance(userDetail)" 
                                        class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm">
                                    ğŸ’µ èª¿è³¬
                                </button>
                                <button v-if="userDetail.wallet?.status === 'active'" 
                                        @click="freezeUserWallet(userDetail)"
                                        class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm">
                                    ğŸ”’ å‡çµ
                                </button>
                                <button v-else @click="unfreezeUserWallet(userDetail)"
                                        class="bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-sm">
                                    ğŸ”“ è§£å‡
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æœ€è¿‘äº¤æ˜“è¨˜éŒ„ -->
                    <div v-if="userDetail.recentTransactions?.length" class="bg-gray-700/50 rounded-lg p-4">
                        <h4 class="text-sm text-gray-400 mb-3">ğŸ“‹ æœ€è¿‘äº¤æ˜“</h4>
                        <div class="space-y-2 max-h-40 overflow-y-auto">
                            <div v-for="(tx, idx) in userDetail.recentTransactions" :key="idx"
                                 class="flex justify-between items-center bg-gray-800 rounded p-2 text-sm">
                                <span :class="tx.amount >= 0 ? 'text-green-400' : 'text-red-400'">
                                    {{ tx.amount >= 0 ? '+' : '-' }}{{ tx.amountDisplay }}
                                </span>
                                <span class="text-gray-400 flex-1 mx-4 truncate">{{ tx.description }}</span>
                                <span class="text-gray-500 text-xs">{{ formatDate(tx.createdAt) }}</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å…¶ä»–çµ±è¨ˆ -->
                    <div class="bg-gray-700/50 rounded-lg p-4">
                        <h4 class="text-sm text-gray-400 mb-3">ğŸ“Š å…¶ä»–çµ±è¨ˆ</h4>
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div>
                                <p class="text-2xl font-bold text-blue-400">{{ userDetail.licenses?.length || 0 }}</p>
                                <p class="text-gray-400 text-sm">ä½¿ç”¨å¡å¯†æ•¸</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-purple-400">{{ userDetail.referrals?.length || 0 }}</p>
                                <p class="text-gray-400 text-sm">é‚€è«‹è¨˜éŒ„</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold" :class="userDetail.isBanned ? 'text-red-400' : 'text-green-400'">
                                    {{ userDetail.isBanned ? 'å·²å°ç¦' : 'æ­£å¸¸' }}
                                </p>
                                <p class="text-gray-400 text-sm">å¸³è™Ÿç‹€æ…‹</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- é…é¡ä¿¡æ¯ -->
                    <div class="bg-gray-700/50 rounded-lg p-4" v-if="userDetail.user?.quotas">
                        <h4 class="text-sm text-gray-400 mb-3">ç•¶å‰ç­‰ç´šé…é¡</h4>
                        <div class="grid grid-cols-4 gap-4 text-center text-sm">
                            <div v-for="(value, key) in userDetail.user.quotas" :key="key" class="bg-gray-800 rounded p-2">
                                <p class="text-lg font-bold">{{ formatQuota(value) }}</p>
                                <p class="text-gray-400">{{ getQuotaLabel(key) }}</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä½¿ç”¨çš„å¡å¯† -->
                    <div class="bg-gray-700/50 rounded-lg p-4">
                        <h4 class="text-sm text-gray-400 mb-3">ä½¿ç”¨çš„å¡å¯†</h4>
                        <div v-if="userDetail.licenses?.length" class="space-y-2 max-h-40 overflow-y-auto">
                            <div v-for="lic in userDetail.licenses" :key="lic.license_key" 
                                 class="flex justify-between items-center bg-gray-800 rounded p-2 text-sm">
                                <code class="text-blue-400">{{ lic.license_key }}</code>
                                <span class="text-gray-400">{{ lic.level }} | {{ lic.duration_days }}å¤©</span>
                                <span class="text-gray-500">{{ formatDate(lic.used_at) }}</span>
                            </div>
                        </div>
                        <p v-else class="text-gray-500 text-center py-4">æš«ç„¡å¡å¯†è¨˜éŒ„</p>
                    </div>
                </div>
                
                <!-- æ“ä½œæŒ‰éˆ• -->
                <div class="sticky bottom-0 bg-gray-800 border-t border-gray-700 p-4 flex justify-end gap-3">
                    <button @click="extendUser(userDetail.user)" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">
                        â° çºŒè²»
                    </button>
                    <button v-if="!userDetail.user?.is_banned" @click="banUser(userDetail.user); showUserModal = false"
                            class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg">
                        ğŸš« å°ç¦
                    </button>
                    <button v-else @click="unbanUser(userDetail.user); showUserModal = false"
                            class="bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded-lg">
                        âœ… è§£å°
                    </button>
                    <button @click="showUserModal = false" class="bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded-lg">
                        é—œé–‰
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ==================== èª¿è³¬ç¢ºèªå½ˆçª— ==================== -->
        <div v-if="showAdjustModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-xl p-6 w-[500px] border border-gray-700">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="text-2xl mr-2">ğŸ’µ</span>
                    é¤˜é¡èª¿è³¬
                </h3>
                
                <div class="space-y-4">
                    <!-- ç”¨æˆ¶ä¿¡æ¯ -->
                    <div class="bg-gray-700/50 rounded-lg p-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">ç›®æ¨™ç”¨æˆ¶</span>
                            <span class="font-medium">{{ adjustForm.userDisplay }}</span>
                        </div>
                        <div class="flex justify-between items-center mt-2">
                            <span class="text-gray-400">ç•¶å‰é¤˜é¡</span>
                            <span class="font-bold text-green-400">{{ adjustForm.currentBalance }}</span>
                        </div>
                        <div v-if="adjustForm.walletStatus === 'frozen'" class="mt-2 text-yellow-400 text-sm">
                            âš ï¸ è©²éŒ¢åŒ…å·²å‡çµï¼Œèª¿è³¬ä»å¯é€²è¡Œ
                        </div>
                    </div>
                    
                    <!-- èª¿è³¬é‡‘é¡ -->
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">èª¿è³¬é‡‘é¡ï¼ˆç¾å…ƒï¼‰</label>
                        <div class="flex gap-2">
                            <button @click="adjustForm.amount = 10" class="px-3 py-2 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30">+$10</button>
                            <button @click="adjustForm.amount = 50" class="px-3 py-2 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30">+$50</button>
                            <button @click="adjustForm.amount = 100" class="px-3 py-2 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30">+$100</button>
                            <button @click="adjustForm.amount = -10" class="px-3 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30">-$10</button>
                            <button @click="adjustForm.amount = -50" class="px-3 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30">-$50</button>
                        </div>
                        <input type="number" v-model.number="adjustForm.amount" 
                               class="w-full mt-2 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                               placeholder="è¼¸å…¥é‡‘é¡ï¼ˆæ­£æ•¸åŠ æ¬¾ï¼Œè² æ•¸æ‰£æ¬¾ï¼‰">
                        <p v-if="adjustForm.amount" class="mt-1 text-sm" 
                           :class="adjustForm.amount > 0 ? 'text-green-400' : 'text-red-400'">
                            {{ adjustForm.amount > 0 ? 'åŠ æ¬¾' : 'æ‰£æ¬¾' }}: ${{ Math.abs(adjustForm.amount).toFixed(2) }}
                        </p>
                    </div>
                    
                    <!-- èª¿è³¬åŸå›  -->
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">èª¿è³¬åŸå› ï¼ˆå¿…å¡«ï¼‰</label>
                        <div class="flex gap-2 mb-2 flex-wrap">
                            <button @click="adjustForm.reason = 'ç³»çµ±è£œå„Ÿ'" class="px-3 py-1 bg-gray-700 rounded-lg text-sm hover:bg-gray-600">ç³»çµ±è£œå„Ÿ</button>
                            <button @click="adjustForm.reason = 'æ´»å‹•çå‹µ'" class="px-3 py-1 bg-gray-700 rounded-lg text-sm hover:bg-gray-600">æ´»å‹•çå‹µ</button>
                            <button @click="adjustForm.reason = 'å®¢æœè™•ç†'" class="px-3 py-1 bg-gray-700 rounded-lg text-sm hover:bg-gray-600">å®¢æœè™•ç†</button>
                            <button @click="adjustForm.reason = 'éŒ¯èª¤ä¿®æ­£'" class="px-3 py-1 bg-gray-700 rounded-lg text-sm hover:bg-gray-600">éŒ¯èª¤ä¿®æ­£</button>
                            <button @click="adjustForm.reason = 'é€€æ¬¾è£œå„Ÿ'" class="px-3 py-1 bg-gray-700 rounded-lg text-sm hover:bg-gray-600">é€€æ¬¾è£œå„Ÿ</button>
                        </div>
                        <input type="text" v-model="adjustForm.reason" 
                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                               placeholder="è«‹è¼¸å…¥èª¿è³¬åŸå› ">
                    </div>
                    
                    <!-- é è¦½çµæœ -->
                    <div v-if="adjustForm.amount && adjustForm.amount !== 0" class="bg-blue-900/30 border border-blue-600/30 rounded-lg p-4">
                        <div class="text-sm text-gray-400 mb-2">èª¿è³¬å¾Œé¤˜é¡é è¦½</div>
                        <div class="flex items-center gap-2">
                            <span class="text-lg">{{ adjustForm.currentBalance }}</span>
                            <span class="text-gray-400">â†’</span>
                            <span class="text-xl font-bold" :class="getNewBalanceClass()">
                                ${{ calculateNewBalance().toFixed(2) }}
                            </span>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-end gap-3 mt-6">
                    <button @click="showAdjustModal = false" 
                            class="px-6 py-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors">
                        å–æ¶ˆ
                    </button>
                    <button @click="submitAdjustBalance" 
                            :disabled="!adjustForm.amount || !adjustForm.reason || adjustForm.amount === 0"
                            :class="['px-6 py-2 rounded-lg font-medium transition-colors',
                                     adjustForm.amount && adjustForm.reason && adjustForm.amount !== 0
                                     ? 'bg-blue-600 hover:bg-blue-700' 
                                     : 'bg-gray-600 cursor-not-allowed']">
                        ç¢ºèªèª¿è³¬
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ==================== ç™¼å¸ƒå…¬å‘Šå½ˆçª— ==================== -->
        <div v-if="showAnnouncementModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-xl p-6 w-[600px] border border-gray-700">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="text-2xl mr-2">ğŸ“¢</span>
                    {{ announcementForm.id ? 'ç·¨è¼¯å…¬å‘Š' : 'ç™¼å¸ƒå…¬å‘Š' }}
                </h3>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">æ¨™é¡Œ</label>
                        <input type="text" v-model="announcementForm.title" 
                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                               placeholder="å…¬å‘Šæ¨™é¡Œ">
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">å…§å®¹</label>
                        <textarea v-model="announcementForm.content" rows="5"
                                  class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                                  placeholder="å…¬å‘Šå…§å®¹"></textarea>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">é¡å‹</label>
                            <select v-model="announcementForm.type" 
                                    class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                                <option value="info">ğŸ“‹ é€šçŸ¥</option>
                                <option value="update">ğŸ†• æ›´æ–°</option>
                                <option value="warning">âš ï¸ è­¦å‘Š</option>
                                <option value="urgent">ğŸš¨ ç·Šæ€¥</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">ç‹€æ…‹</label>
                            <select v-model="announcementForm.status" 
                                    class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                                <option value="draft">è‰ç¨¿</option>
                                <option value="published">ç™¼å¸ƒ</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex gap-4">
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox" v-model="announcementForm.is_pinned" class="mr-2">
                            <span class="text-gray-400">ğŸ“Œ ç½®é ‚</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox" v-model="announcementForm.is_popup" class="mr-2">
                            <span class="text-gray-400">ğŸ’¬ å½ˆçª—é¡¯ç¤º</span>
                        </label>
                    </div>
                </div>
                
                <div class="flex justify-end gap-4 mt-6">
                    <button @click="showAnnouncementModal = false" 
                            class="px-6 py-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors">
                        å–æ¶ˆ
                    </button>
                    <button @click="saveAnnouncement" 
                            class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity">
                        {{ announcementForm.id ? 'ä¿å­˜ä¿®æ”¹' : 'ç™¼å¸ƒå…¬å‘Š' }}
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ==================== å„ªæƒ åˆ¸ç®¡ç†å½ˆçª— ==================== -->
        <div id="coupon-modal" v-show="showCouponModal" 
             class="fixed inset-0 flex items-center justify-center"
             style="display:none; z-index:9999; background:rgba(0,0,0,0.6);"
             onclick="if(event.target===this){this.style.display='none'}">
            <div class="bg-gray-800 rounded-xl p-6 w-[500px] border border-gray-700 relative shadow-2xl" onclick="event.stopPropagation()">
                <button type="button" 
                        @click="closeCouponModal()" 
                        onclick="document.getElementById('coupon-modal').style.display='none'"
                        class="absolute top-4 right-4 w-10 h-10 flex items-center justify-center text-gray-400 hover:text-white hover:bg-gray-600 rounded text-2xl cursor-pointer z-10" title="é—œé–‰">Ã—</button>
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="text-2xl mr-2">ğŸ«</span>
                    å‰µå»ºå„ªæƒ åˆ¸
                </h3>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">å„ªæƒ åˆ¸ç¢¼</label>
                        <input type="text" v-model="couponForm.code" 
                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                               placeholder="ç•™ç©ºè‡ªå‹•ç”Ÿæˆ">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">æŠ˜æ‰£é¡å‹</label>
                            <select v-model="couponForm.discount_type" 
                                    class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                                <option value="percent">ç™¾åˆ†æ¯”æŠ˜æ‰£</option>
                                <option value="fixed">å›ºå®šé‡‘é¡</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">æŠ˜æ‰£å€¼</label>
                            <input type="number" v-model="couponForm.discount_value" 
                                   class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                                   :placeholder="couponForm.discount_type === 'percent' ? 'å¦‚: 10 (è¡¨ç¤º10%)' : 'å¦‚: 20 (æ¸›20å…ƒ)'">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">æœ€ä½æ¶ˆè²»</label>
                            <input type="number" v-model="couponForm.min_amount" 
                                   class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                                   placeholder="0">
                        </div>
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">æœ€å¤§ä½¿ç”¨æ¬¡æ•¸</label>
                            <input type="number" v-model="couponForm.max_uses" 
                                   class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                                   placeholder="100">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">éæœŸæ™‚é–“ï¼ˆé¸å¡«ï¼Œæ ¼å¼ï¼š2025-12-31 23:59ï¼‰</label>
                        <input type="text" v-model="couponForm.expires_at" 
                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                               placeholder="ç•™ç©ºè¡¨ç¤ºé•·æœŸæœ‰æ•ˆï¼Œæˆ–è¼¸å…¥å¦‚ 2025-12-31 23:59">
                    </div>
                </div>
                
                <div class="flex justify-end gap-4 mt-6">
                    <button type="button" 
                            @click="closeCouponModal()" 
                            onclick="document.getElementById('coupon-modal').style.display='none'"
                            class="px-6 py-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors cursor-pointer">
                        å–æ¶ˆ
                    </button>
                    <button type="button" 
                            @click="createCoupon" 
                            class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity cursor-pointer">
                        å‰µå»ºå„ªæƒ åˆ¸
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ==================== ç¢ºèªå°è©±æ¡† ==================== -->
        <div v-if="confirmDialog.show" 
             class="fixed inset-0 bg-black/60 flex items-center justify-center z-[80]" 
             @click.self="closeConfirmDialog()">
            <div class="bg-gray-800 rounded-xl p-6 w-[400px] border border-gray-700" @click.stop>
                <h3 class="text-lg font-bold mb-4 flex items-center">
                    <span class="text-2xl mr-2" v-text="confirmDialog.icon || 'âš ï¸'"></span>
                    <span v-text="confirmDialog.title || 'ç¢ºèª'"></span>
                </h3>
                <p class="text-gray-400 mb-6" v-text="confirmDialog.message || 'æ‚¨ç¢ºå®šè¦ç¹¼çºŒå—ï¼Ÿ'"></p>
                <div class="flex justify-end gap-4">
                    <button type="button" @click="closeConfirmDialog()" 
                            class="px-4 py-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors">
                        å–æ¶ˆ
                    </button>
                    <button type="button" @click="handleConfirmOk()" 
                            :class="confirmDialog.type === 'danger' ? 'bg-red-600 hover:bg-red-700' : 'gradient-bg hover:opacity-90'"
                            class="px-4 py-2 rounded-lg font-medium transition-colors">
                        ç¢ºèª
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Toast é€šçŸ¥ -->
        <div v-if="toast.show" 
             :class="['fixed bottom-8 right-8 px-6 py-3 rounded-lg shadow-lg transition-all transform',
                     toast.type === 'success' ? 'bg-green-600' : toast.type === 'error' ? 'bg-red-600' : 'bg-blue-600']">
            {{ toast.message }}
        </div>
    </div>
    
    <script src="app.js?v=20260207-coupon-fix4"></script>
</body>
</html>
