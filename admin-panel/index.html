<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TG-AIæ™ºæ§ç‹ ç®¡ç†å¾Œå°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .gradient-text { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .card { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); }
        .glass { background: rgba(31, 41, 55, 0.8); backdrop-filter: blur(10px); }
        
        /* ç‹è€…æ¦®è€€é¢¨æ ¼ç­‰ç´šé¡è‰² */
        .rank-bronze { color: #CD7F32; }
        .rank-silver { color: #C0C0C0; }
        .rank-gold { color: #FFD700; }
        .rank-diamond { color: #B9F2FF; }
        .rank-star { color: #9B59B6; }
        .rank-king { color: #FF6B6B; }
        
        .bg-bronze { background: linear-gradient(135deg, #CD7F32 0%, #8B4513 100%); }
        .bg-silver { background: linear-gradient(135deg, #C0C0C0 0%, #808080 100%); }
        .bg-gold { background: linear-gradient(135deg, #FFD700 0%, #DAA520 100%); }
        .bg-diamond { background: linear-gradient(135deg, #B9F2FF 0%, #00CED1 100%); }
        .bg-star { background: linear-gradient(135deg, #9B59B6 0%, #8E44AD 100%); }
        .bg-king { background: linear-gradient(135deg, #FF6B6B 0%, #EE5A5A 100%); }
        
        /* Logo å‹•ç•« */
        .logo-glow {
            text-shadow: 0 0 10px rgba(102, 126, 234, 0.5), 0 0 20px rgba(118, 75, 162, 0.3);
        }
        
        /* æ»¾å‹•æ¢ */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }
        
        /* è¡¨æ ¼ hover */
        .table-row-hover:hover { background: rgba(139, 92, 246, 0.1); }
    </style>
    <script>
        // æª¢æŸ¥ç™»éŒ„ç‹€æ…‹
        (function() {
            const token = localStorage.getItem('admin_token') || sessionStorage.getItem('admin_token');
            if (!token) {
                window.location.href = '/login.html';
            }
        })();
    </script>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <div id="app">
        <!-- å´é‚Šæ¬„ -->
        <div class="fixed left-0 top-0 h-full w-64 bg-gray-800 border-r border-gray-700 z-50 flex flex-col">
            <!-- Logo -->
            <div class="p-6 border-b border-gray-700">
                <div class="flex items-center">
                    <span class="text-3xl mr-2">ğŸ¤–</span>
                    <div>
                        <h1 class="text-xl font-bold gradient-text logo-glow">TG-AIæ™ºæ§ç‹</h1>
                        <p class="text-gray-400 text-xs">ç®¡ç†å¾Œå° v2.0</p>
                    </div>
                </div>
            </div>
            
            <!-- å°èˆªèœå–® -->
            <nav class="flex-1 overflow-y-auto py-4">
                <a v-for="item in menuItems" :key="item.id" 
                   @click="currentPage = item.id"
                   :class="['flex items-center px-6 py-3 cursor-pointer transition-all',
                           currentPage === item.id ? 'bg-purple-600/30 border-r-2 border-purple-500 text-white' : 'text-gray-400 hover:bg-gray-700/50 hover:text-white']">
                    <span class="text-xl mr-3">{{ item.icon }}</span>
                    <span>{{ item.name }}</span>
                    <span v-if="item.badge" class="ml-auto bg-red-500 text-white text-xs px-2 py-0.5 rounded-full">
                        {{ item.badge }}
                    </span>
                </a>
            </nav>
            
            <!-- ç”¨æˆ¶ä¿¡æ¯ -->
            <div class="p-4 border-t border-gray-700">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="w-10 h-10 rounded-full gradient-bg flex items-center justify-center">
                            <span class="text-lg">ğŸ‘¤</span>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium">{{ adminUser?.name || 'ç®¡ç†å“¡' }}</p>
                            <p class="text-xs text-gray-400">{{ adminUser?.role === 'super_admin' ? 'è¶…ç´šç®¡ç†å“¡' : 'ç®¡ç†å“¡' }}</p>
                        </div>
                    </div>
                    <div class="flex gap-1">
                        <button @click="openPasswordModal" class="text-gray-400 hover:text-blue-400 transition-colors p-2" title="ä¿®æ”¹å¯†ç¢¼">
                            ğŸ”‘
                        </button>
                        <button @click="handleLogout" class="text-gray-400 hover:text-red-400 transition-colors p-2" title="ç™»å‡º">
                            ğŸšª
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ä¸»å…§å®¹å€ -->
        <div class="ml-64 min-h-screen">
            <!-- é ‚éƒ¨å°èˆª -->
            <div class="sticky top-0 z-40 bg-gray-900/80 backdrop-blur-sm border-b border-gray-700 px-8 py-4">
                <div class="flex items-center justify-between">
                    <h2 class="text-xl font-semibold">
                        {{ menuItems.find(m => m.id === currentPage)?.icon }}
                        {{ menuItems.find(m => m.id === currentPage)?.name }}
                    </h2>
                    <div class="flex items-center gap-4">
                        <span class="text-sm text-gray-400">
                            æœ€å¾Œæ›´æ–°: {{ lastUpdate || 'åŠ è¼‰ä¸­...' }}
                        </span>
                        <button @click="refreshData" 
                                :disabled="isLoading"
                                class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg text-sm transition-colors flex items-center">
                            <span :class="{'animate-spin': isLoading}">ğŸ”„</span>
                            <span class="ml-2">åˆ·æ–°</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="p-8">
                <!-- ==================== å„€è¡¨ç›¤ ==================== -->
                <div v-if="currentPage === 'dashboard'">
                    <!-- çµ±è¨ˆå¡ç‰‡ -->
                    <div class="grid grid-cols-4 gap-6 mb-8">
                        <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-blue-100">ç¸½ç”¨æˆ¶æ•¸</p>
                                    <p class="text-3xl font-bold mt-2">{{ (stats.totalUsers || 0).toLocaleString() }}</p>
                                    <p class="text-blue-200 text-sm mt-1">+{{ stats.newUsersToday || 0 }} ä»Šæ—¥æ–°å¢</p>
                                </div>
                                <span class="text-5xl opacity-50">ğŸ‘¥</span>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-green-100">ä»˜è²»ç”¨æˆ¶</p>
                                    <p class="text-3xl font-bold mt-2">{{ (stats.paidUsers || 0).toLocaleString() }}</p>
                                    <p class="text-green-200 text-sm mt-1">è½‰åŒ–ç‡ {{ stats.conversionRate || 0 }}%</p>
                                </div>
                                <span class="text-5xl opacity-50">ğŸ’</span>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-purple-100">ç¸½æ”¶å…¥</p>
                                    <p class="text-3xl font-bold mt-2">{{ (stats.totalRevenue || 0).toLocaleString() }} USDT</p>
                                    <p class="text-purple-200 text-sm mt-1">+{{ stats.revenueToday || 0 }} USDT ä»Šæ—¥</p>
                                </div>
                                <span class="text-5xl opacity-50">ğŸ’°</span>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-6 shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-orange-100">å¯ç”¨å¡å¯†</p>
                                    <p class="text-3xl font-bold mt-2">{{ (stats.unusedLicenses || 0).toLocaleString() }}</p>
                                    <p class="text-orange-200 text-sm mt-1">å…± {{ stats.totalLicenses || 0 }} å¼µ</p>
                                </div>
                                <span class="text-5xl opacity-50">ğŸŸï¸</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åœ–è¡¨ -->
                    <div class="grid grid-cols-2 gap-6 mb-8">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“ˆ æ”¶å…¥è¶¨å‹¢ï¼ˆè¿‘7å¤©ï¼‰</h3>
                            <canvas id="revenueChart" height="200"></canvas>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ‘‘ æœƒå“¡ç­‰ç´šåˆ†å¸ƒ</h3>
                            <canvas id="levelChart" height="200"></canvas>
                        </div>
                    </div>
                    
                    <!-- å¡å¯†åˆ†é¡çµ±è¨ˆ -->
                    <div class="bg-gray-800 rounded-xl p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ« å¡å¯†åº«å­˜</h3>
                        <div class="grid grid-cols-5 gap-4">
                            <div v-for="(info, level) in licenseStats" :key="level" 
                                 :class="['rounded-xl p-4 text-center', 'bg-' + level]">
                                <p class="text-3xl">{{ info.icon }}</p>
                                <p class="font-medium mt-1 text-white">{{ info.name }}</p>
                                <p class="text-3xl font-bold mt-2 text-white">{{ info.unused }}</p>
                                <p class="text-sm text-white/70">å¯ç”¨ / {{ info.total }}</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== ç”¨æˆ¶ç®¡ç† ==================== -->
                <div v-if="currentPage === 'users'">
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4">
                            <input type="text" v-model="userSearch" placeholder="æœç´¢ç”¨æˆ¶..." 
                                   class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500 w-64">
                            <select v-model="userFilter" class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option value="all">å…¨éƒ¨ç­‰ç´š</option>
                                <option value="bronze">âš”ï¸ é’éŠ…æˆ°å£«</option>
                                <option value="silver">ğŸ¥ˆ ç™½éŠ€ç²¾è‹±</option>
                                <option value="gold">ğŸ¥‡ é»ƒé‡‘å¤§å¸«</option>
                                <option value="diamond">ğŸ’ é‘½çŸ³ç‹ç‰Œ</option>
                                <option value="star">ğŸŒŸ æ˜Ÿè€€å‚³èªª</option>
                                <option value="king">ğŸ‘‘ æ¦®è€€ç‹è€…</option>
                            </select>
                        </div>
                        <div class="text-sm text-gray-400">
                            å…± {{ userPagination.total || filteredUsers.length }} å€‹ç”¨æˆ¶
                            <span v-if="userPagination.total_pages > 1" class="ml-2">
                                (ç¬¬ {{ userPagination.page }}/{{ userPagination.total_pages }} é )
                            </span>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">ç”¨æˆ¶</th>
                                    <th class="text-left px-6 py-4 font-medium">ç­‰ç´š</th>
                                    <th class="text-left px-6 py-4 font-medium">åˆ°æœŸæ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium">é‚€è«‹æ•¸</th>
                                    <th class="text-left px-6 py-4 font-medium">é¤˜é¡/æ¶ˆè²»</th>
                                    <th class="text-left px-6 py-4 font-medium">è¨»å†Šæ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="user in filteredUsers" :key="user.id" 
                                    class="border-t border-gray-700 table-row-hover transition-colors">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center mr-3 text-lg font-bold">
                                                {{ user.avatarLetter || '?' }}
                                            </div>
                                            <div>
                                                <p class="font-medium">{{ user.displayName }}</p>
                                                <p class="text-sm text-gray-400">
                                                    <span v-if="user.telegramUsername">@{{ user.telegramUsername }}</span>
                                                    <span v-else-if="user.email">{{ user.email }}</span>
                                                    <span v-else>{{ user.userId?.slice(0,12) }}...</span>
                                                </p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="'rank-' + user.level" class="font-medium">
                                            {{ user.levelIcon }} {{ user.levelName }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span v-if="user.isLifetime" class="text-purple-400">â™¾ï¸ çµ‚èº«</span>
                                        <span v-else :class="isExpired(user.expiresAt) ? 'text-red-400' : 'text-green-400'">
                                            {{ formatDate(user.expiresAt) || 'æœªæ¿€æ´»' }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span v-if="user.totalInvites > 0" class="text-blue-400">
                                            {{ user.totalInvites }} äºº
                                        </span>
                                        <span v-else class="text-gray-500">-</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="space-y-1">
                                            <div v-if="user.walletBalance > 0 || user.walletBonus > 0" class="text-green-400 font-medium">
                                                ğŸ’° {{ user.walletBalanceDisplay }}
                                                <span v-if="user.walletBonus > 0" class="text-yellow-400 text-xs">(+{{ user.walletBonusDisplay }})</span>
                                            </div>
                                            <div v-if="user.totalConsumed > 0" class="text-gray-400 text-xs">
                                                æ¶ˆè²»: {{ user.totalConsumedDisplay }}
                                            </div>
                                            <div v-if="user.walletStatus === 'frozen'" class="text-red-400 text-xs">
                                                ğŸ”’ å·²å‡çµ
                                            </div>
                                            <span v-if="user.walletBalance === 0 && user.walletBonus === 0 && user.totalConsumed === 0" class="text-gray-500">-</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ formatDate(user.createdAt) }}</td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button @click="viewUser(user)" 
                                                    class="text-blue-400 hover:text-blue-300 text-sm">è©³æƒ…</button>
                                            <button @click="extendUser(user)" 
                                                    class="text-green-400 hover:text-green-300 text-sm">çºŒè²»</button>
                                            <button v-if="!user.isBanned" @click="banUser(user)" 
                                                    class="text-red-400 hover:text-red-300 text-sm">å°ç¦</button>
                                            <button v-else @click="unbanUser(user)" 
                                                    class="text-yellow-400 hover:text-yellow-300 text-sm">è§£å°</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr v-if="filteredUsers.length === 0">
                                    <td colspan="7" class="px-6 py-12 text-center text-gray-500">
                                        æš«ç„¡ç”¨æˆ¶æ•¸æ“š
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== å³å°‡åˆ°æœŸç”¨æˆ¶ ==================== -->
                <div v-if="currentPage === 'expiring'">
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4 items-center">
                            <span class="text-gray-400">å³å°‡åœ¨</span>
                            <select v-model="expiringDays" @change="loadExpiringUsers" 
                                    class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option :value="3">3 å¤©</option>
                                <option :value="7">7 å¤©</option>
                                <option :value="14">14 å¤©</option>
                                <option :value="30">30 å¤©</option>
                            </select>
                            <span class="text-gray-400">å…§åˆ°æœŸ</span>
                        </div>
                        <button @click="batchSendExpiryReminders" 
                                :disabled="expiringUsers.length === 0"
                                class="bg-orange-600 hover:bg-orange-700 disabled:bg-gray-600 px-6 py-2 rounded-lg font-medium transition-colors">
                            ğŸ“¨ æ‰¹é‡ç™¼é€æé†’ ({{ expiringUsers.length }})
                        </button>
                    </div>
                    
                    <div v-if="expiringUsers.length === 0" class="bg-gray-800 rounded-xl p-12 text-center">
                        <div class="text-6xl mb-4">ğŸ‰</div>
                        <p class="text-xl text-gray-400">å¤ªæ£’äº†ï¼æ²’æœ‰å³å°‡åˆ°æœŸçš„ç”¨æˆ¶</p>
                    </div>
                    
                    <div v-else class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">ç”¨æˆ¶</th>
                                    <th class="text-left px-6 py-4 font-medium">ç­‰ç´š</th>
                                    <th class="text-left px-6 py-4 font-medium">åˆ°æœŸæ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium">å‰©é¤˜å¤©æ•¸</th>
                                    <th class="text-left px-6 py-4 font-medium">æ¶ˆè²»é‡‘é¡</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="user in expiringUsers" :key="user.user_id" 
                                    class="border-t border-gray-700 table-row-hover">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 rounded-full bg-gradient-to-r from-orange-500 to-red-500 flex items-center justify-center mr-3 font-bold">
                                                {{ (user.nickname || user.email || '?')[0].toUpperCase() }}
                                            </div>
                                            <div>
                                                <p class="font-medium">{{ user.nickname || user.email || user.telegram_username || 'æœªè¨­ç½®' }}</p>
                                                <p class="text-sm text-gray-400">{{ user.user_id?.slice(0,12) }}...</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="'rank-' + user.level" class="font-medium">
                                            {{ user.level_icon || 'âš”ï¸' }} {{ user.level_name || getLevelName(user.level) }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-orange-400">
                                        {{ formatDate(user.expires_at) }}
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="px-3 py-1 rounded-full text-sm"
                                              :class="user.days_remaining <= 3 ? 'bg-red-500/20 text-red-400' : 'bg-orange-500/20 text-orange-400'">
                                            {{ user.days_remaining }} å¤©
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-green-400">
                                        {{ user.total_spent || 0 }} USDT
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button @click="sendExpiryReminder(user.user_id)" 
                                                    class="text-orange-400 hover:text-orange-300 text-sm">ç™¼é€æé†’</button>
                                            <button @click="extendUser(user)" 
                                                    class="text-green-400 hover:text-green-300 text-sm">çºŒè²»</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== å¡å¯†ç®¡ç† ==================== -->
                <div v-if="currentPage === 'licenses'">
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4">
                            <select v-model="licenseFilter" class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option value="all">å…¨éƒ¨ç‹€æ…‹</option>
                                <option value="unused">æœªä½¿ç”¨</option>
                                <option value="used">å·²ä½¿ç”¨</option>
                                <option value="disabled">å·²ç¦ç”¨</option>
                            </select>
                            <select v-model="licenseLevelFilter" class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option value="all">å…¨éƒ¨ç­‰ç´š</option>
                                <option value="silver">ğŸ¥ˆ ç™½éŠ€ç²¾è‹±</option>
                                <option value="gold">ğŸ¥‡ é»ƒé‡‘å¤§å¸«</option>
                                <option value="diamond">ğŸ’ é‘½çŸ³ç‹ç‰Œ</option>
                                <option value="star">ğŸŒŸ æ˜Ÿè€€å‚³èªª</option>
                                <option value="king">ğŸ‘‘ æ¦®è€€ç‹è€…</option>
                            </select>
                        </div>
                        <div class="flex gap-3">
                            <button @click="exportLicenses" 
                                    class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm transition-colors">
                                ğŸ“¥ å°å‡º CSV
                            </button>
                            <button @click="showGenerateModal = true" 
                                    class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity">
                                â• ç”Ÿæˆå¡å¯†
                            </button>
                        </div>
                    </div>
                    
                    <!-- å¡å¯†åº«å­˜æ¦‚è¦½ -->
                    <div class="grid grid-cols-5 gap-4 mb-6">
                        <div v-for="(info, level) in licenseStats" :key="level" 
                             class="bg-gray-800 rounded-xl p-4 text-center border border-gray-700">
                            <p class="text-2xl">{{ info.icon }}</p>
                            <p class="font-medium mt-1">{{ info.name }}</p>
                            <p class="text-2xl font-bold mt-2 text-green-400">{{ info.unused }}</p>
                            <p class="text-sm text-gray-400">å¯ç”¨ / {{ info.total }}</p>
                        </div>
                    </div>
                    
                    <!-- å¡å¯†åˆ—è¡¨ -->
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">å¡å¯†</th>
                                    <th class="text-left px-6 py-4 font-medium">é¡å‹</th>
                                    <th class="text-left px-6 py-4 font-medium">åƒ¹æ ¼</th>
                                    <th class="text-left px-6 py-4 font-medium">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium">å‰µå»ºæ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium">ä½¿ç”¨æ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="license in filteredLicenses" :key="license.key" 
                                    class="border-t border-gray-700 table-row-hover transition-colors">
                                    <td class="px-6 py-4">
                                        <code class="text-sm bg-gray-700 px-2 py-1 rounded">{{ license.key }}</code>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="'rank-' + license.level">{{ license.typeName }}</span>
                                    </td>
                                    <td class="px-6 py-4">{{ license.price }} USDT</td>
                                    <td class="px-6 py-4">
                                        <span :class="getStatusClass(license.status)" 
                                              class="px-2 py-1 rounded text-sm">
                                            {{ getStatusText(license.status) }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ license.createdAt }}</td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ license.usedAt || '-' }}</td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button v-if="license.status === 'unused'" 
                                                    @click="copyLicense(license.key)"
                                                    class="text-blue-400 hover:text-blue-300 text-sm">è¤‡è£½</button>
                                            <button v-if="license.status === 'unused'"
                                                    @click="disableLicense(license.key)"
                                                    class="text-red-400 hover:text-red-300 text-sm">ç¦ç”¨</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr v-if="filteredLicenses.length === 0">
                                    <td colspan="7" class="px-6 py-12 text-center text-gray-500">
                                        æš«ç„¡å¡å¯†æ•¸æ“š
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== è¨‚å–®ç®¡ç† ==================== -->
                <div v-if="currentPage === 'orders'">
                    <!-- æœç´¢å’Œç¯©é¸ -->
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4">
                            <input type="text" v-model="orderSearch" placeholder="æœç´¢è¨‚å–®è™Ÿ..."
                                   class="bg-gray-700 rounded-lg px-4 py-2 w-64 focus:ring-2 focus:ring-blue-500">
                            <select v-model="orderStatusFilter" @change="loadOrders"
                                    class="bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500">
                                <option value="">å…¨éƒ¨ç‹€æ…‹</option>
                                <option value="pending">å¾…æ”¯ä»˜</option>
                                <option value="paid">å·²æ”¯ä»˜</option>
                                <option value="cancelled">å·²å–æ¶ˆ</option>
                            </select>
                        </div>
                        <div class="text-gray-400">
                            å…± {{ filteredOrders.length }} å€‹è¨‚å–®
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">è¨‚å–®è™Ÿ</th>
                                    <th class="text-left px-6 py-4 font-medium">ç”¨æˆ¶</th>
                                    <th class="text-left px-6 py-4 font-medium">ç”¢å“</th>
                                    <th class="text-left px-6 py-4 font-medium">é‡‘é¡</th>
                                    <th class="text-left px-6 py-4 font-medium">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium">æ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="order in filteredOrders" :key="order.id" 
                                    class="border-t border-gray-700 table-row-hover transition-colors">
                                    <td class="px-6 py-4">
                                        <code class="text-sm text-blue-400">{{ order.orderId || order.order_id }}</code>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-400">{{ order.user_id || '-' }}</td>
                                    <td class="px-6 py-4">{{ order.productName || order.product_name || '-' }}</td>
                                    <td class="px-6 py-4">
                                        <span class="font-medium text-green-400">{{ order.final_price || 0 }} USDT</span>
                                        <span v-if="order.discount_amount" class="text-xs text-gray-500 ml-1">
                                            (-{{ order.discount_amount }} USDT)
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="{
                                            'bg-green-600/30 text-green-400': order.status === 'paid',
                                            'bg-yellow-600/30 text-yellow-400': order.status === 'pending',
                                            'bg-gray-600/30 text-gray-400': order.status === 'cancelled'
                                        }" class="px-2 py-1 rounded text-sm">
                                            {{ order.status === 'paid' ? 'å·²æ”¯ä»˜' : order.status === 'pending' ? 'å¾…æ”¯ä»˜' : 'å·²å–æ¶ˆ' }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ formatDate(order.created_at) }}</td>
                                    <td class="px-6 py-4">
                                        <button v-if="order.status === 'pending'" 
                                                @click="confirmPayment(order.order_id)"
                                                class="px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-sm transition-colors">
                                            ç¢ºèªæ”¯ä»˜
                                        </button>
                                        <span v-else class="text-gray-500 text-sm">-</span>
                                    </td>
                                </tr>
                                <tr v-if="filteredOrders.length === 0">
                                    <td colspan="6" class="px-6 py-12 text-center text-gray-500">
                                        æš«ç„¡è¨‚å–®æ•¸æ“š
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== é‚€è«‹ç®¡ç† ==================== -->
                <div v-if="currentPage === 'referrals'">
                    <!-- é‚€è«‹çµ±è¨ˆ -->
                    <div class="grid grid-cols-3 gap-6 mb-6">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-400">ç¸½é‚€è«‹æ•¸</p>
                                    <p class="text-3xl font-bold mt-2">{{ referralStats.totalReferrals || 0 }}</p>
                                </div>
                                <span class="text-4xl">ğŸ‘¥</span>
                            </div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-400">ç¸½çå‹µç™¼æ”¾</p>
                                    <p class="text-3xl font-bold mt-2 text-green-400">{{ referralStats.totalEarnings || 0 }} USDT</p>
                                </div>
                                <span class="text-4xl">ğŸ’°</span>
                            </div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-400">é‚€è«‹é”äºº</p>
                                    <p class="text-3xl font-bold mt-2">{{ referralStats.leaderboard?.length || 0 }}</p>
                                </div>
                                <span class="text-4xl">ğŸ†</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- é‚€è«‹æ’è¡Œæ¦œ -->
                    <div class="grid grid-cols-2 gap-6">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ† é‚€è«‹æ’è¡Œæ¦œ</h3>
                            <div class="space-y-3">
                                <div v-for="(user, index) in referralStats.leaderboard" :key="user.user_id"
                                     class="flex items-center justify-between p-3 bg-gray-700/50 rounded-lg">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3">{{ index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : 'ğŸ…' }}</span>
                                        <div>
                                            <p class="font-medium">{{ user.nickname || user.email || 'æœªçŸ¥ç”¨æˆ¶' }}</p>
                                            <p class="text-sm text-gray-400">é‚€è«‹ç¢¼: {{ user.invite_code }}</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-blue-400">{{ user.total_invites }} äºº</p>
                                        <p class="text-sm text-green-400">{{ user.invite_earnings || 0 }} USDT</p>
                                    </div>
                                </div>
                                <div v-if="!referralStats.leaderboard?.length" class="text-center text-gray-500 py-8">
                                    æš«ç„¡é‚€è«‹æ•¸æ“š
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“‹ çå‹µè¦å‰‡</h3>
                            <div class="space-y-4">
                                <div class="p-4 bg-gray-700/50 rounded-lg">
                                    <p class="font-medium text-blue-400">ğŸ‘‹ é‚€è«‹è¨»å†Šçå‹µ</p>
                                    <p class="text-sm text-gray-400 mt-1">é‚€è«‹è€…ç²å¾— 3 å¤©æœƒå“¡ï¼Œè¢«é‚€è«‹è€…ç²å¾— 1 å¤©æœƒå“¡</p>
                                </div>
                                <div class="p-4 bg-gray-700/50 rounded-lg">
                                    <p class="font-medium text-green-400">ğŸ’ é¦–æ¬¡ä»˜è²»çå‹µ</p>
                                    <div class="text-sm text-gray-400 mt-1 space-y-1">
                                        <p>ç™½éŠ€: 7å¤© + 1 USDT</p>
                                        <p>é»ƒé‡‘: 15å¤© + 3 USDT</p>
                                        <p>é‘½çŸ³: 30å¤© + 10 USDT</p>
                                        <p>æ˜Ÿè€€: 45å¤© + 30 USDT</p>
                                        <p>ç‹è€…: 60å¤© + 100 USDT</p>
                                    </div>
                                </div>
                                <div class="p-4 bg-gray-700/50 rounded-lg">
                                    <p class="font-medium text-purple-400">ğŸ”„ é‡è¤‡ä»˜è²»è¿”å‚­</p>
                                    <p class="text-sm text-gray-400 mt-1">è¢«é‚€è«‹è€…æ¯æ¬¡ä»˜è²»ï¼Œé‚€è«‹è€…ç²å¾— 10% è¿”å‚­</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== å¯©è¨ˆæ—¥èªŒ ==================== -->
                <div v-if="currentPage === 'logs'">
                    <!-- çµ±è¨ˆå¡ç‰‡ -->
                    <div class="grid grid-cols-4 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4">
                            <p class="text-blue-200 text-sm">èªè­‰æ“ä½œ</p>
                            <p class="text-2xl font-bold mt-1">{{ logsStats.by_category?.auth || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-4">
                            <p class="text-green-200 text-sm">ç”¨æˆ¶ç®¡ç†</p>
                            <p class="text-2xl font-bold mt-1">{{ logsStats.by_category?.user || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl p-4">
                            <p class="text-purple-200 text-sm">å¡å¯†æ“ä½œ</p>
                            <p class="text-2xl font-bold mt-1">{{ logsStats.by_category?.license || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-orange-600 to-orange-700 rounded-xl p-4">
                            <p class="text-orange-200 text-sm">è¨‚å–®æ“ä½œ</p>
                            <p class="text-2xl font-bold mt-1">{{ logsStats.by_category?.order || 0 }}</p>
                        </div>
                    </div>
                    
                    <!-- ç¯©é¸å·¥å…·æ¬„ -->
                    <div class="flex gap-4 mb-4">
                        <select v-model="logsFilter.category" @change="filterLogs"
                                class="bg-gray-700 rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">å…¨éƒ¨é¡å‹</option>
                            <option value="auth">ğŸ” èªè­‰æ“ä½œ</option>
                            <option value="user">ğŸ‘¤ ç”¨æˆ¶ç®¡ç†</option>
                            <option value="license">ğŸŸï¸ å¡å¯†æ“ä½œ</option>
                            <option value="order">ğŸ’° è¨‚å–®æ“ä½œ</option>
                            <option value="system">âš™ï¸ ç³»çµ±è¨­ç½®</option>
                        </select>
                        <select v-model="logsFilter.status" @change="filterLogs"
                                class="bg-gray-700 rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">å…¨éƒ¨ç‹€æ…‹</option>
                            <option value="success">âœ… æˆåŠŸ</option>
                            <option value="failed">âŒ å¤±æ•—</option>
                        </select>
                        <div class="flex-grow"></div>
                        <div class="text-sm text-gray-400 flex items-center">
                            å…± {{ logsPagination.total }} æ¢è¨˜éŒ„
                        </div>
                    </div>
                    
                    <!-- æ—¥èªŒåˆ—è¡¨ -->
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium w-40">æ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium w-28">æ“ä½œå“¡</th>
                                    <th class="text-left px-6 py-4 font-medium w-32">é¡å‹</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œæè¿°</th>
                                    <th class="text-left px-6 py-4 font-medium w-24">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium w-32">IP åœ°å€</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="log in logs" :key="log.log_id" 
                                    class="border-t border-gray-700 table-row-hover transition-colors">
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ log.formattedTime }}</td>
                                    <td class="px-6 py-4 font-medium">{{ log.admin_username }}</td>
                                    <td class="px-6 py-4">
                                        <span class="px-2 py-1 rounded text-sm bg-gray-700">
                                            {{ log.actionIcon }} {{ log.action_description }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="text-sm">{{ log.description }}</div>
                                        <div v-if="log.resource_id" class="text-xs text-gray-500 mt-1">
                                            {{ log.resource_type }}: {{ log.resource_id.slice(0, 12) }}...
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="log.statusClass" class="text-sm font-medium">
                                            {{ log.status === 'success' ? 'âœ“ æˆåŠŸ' : 'âœ— å¤±æ•—' }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-gray-500 text-sm font-mono">{{ log.ip_address }}</td>
                                </tr>
                                <tr v-if="logs.length === 0">
                                    <td colspan="6" class="px-6 py-12 text-center text-gray-500">
                                        æš«ç„¡æ“ä½œæ—¥èªŒ
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- åˆ†é  -->
                    <div v-if="logsPagination.total_pages > 1" class="flex justify-center items-center gap-2 mt-6">
                        <button @click="goToLogsPage(1)" :disabled="logsPagination.page === 1"
                                class="px-3 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed">
                            &laquo;
                        </button>
                        <button @click="goToLogsPage(logsPagination.page - 1)" :disabled="logsPagination.page === 1"
                                class="px-3 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed">
                            &lsaquo;
                        </button>
                        <span class="px-4 py-2 text-gray-400">
                            ç¬¬ {{ logsPagination.page }} / {{ logsPagination.total_pages }} é 
                        </span>
                        <button @click="goToLogsPage(logsPagination.page + 1)" :disabled="logsPagination.page === logsPagination.total_pages"
                                class="px-3 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed">
                            &rsaquo;
                        </button>
                        <button @click="goToLogsPage(logsPagination.total_pages)" :disabled="logsPagination.page === logsPagination.total_pages"
                                class="px-3 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed">
                            &raquo;
                        </button>
                    </div>
                </div>
                
                <!-- ==================== ä»£ç†æ± ç®¡ç† ==================== -->
                <div v-if="currentPage === 'proxies'">
                    <!-- çµ±è¨ˆå¡ç‰‡ -->
                    <div class="grid grid-cols-4 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-4">
                            <p class="text-green-200 text-sm">å¯ç”¨ä»£ç†</p>
                            <p class="text-2xl font-bold mt-1">{{ proxyStats.available || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4">
                            <p class="text-blue-200 text-sm">å·²åˆ†é…</p>
                            <p class="text-2xl font-bold mt-1">{{ proxyStats.assigned || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-red-600 to-red-700 rounded-xl p-4">
                            <p class="text-red-200 text-sm">å¤±æ•—</p>
                            <p class="text-2xl font-bold mt-1">{{ proxyStats.failed || 0 }}</p>
                        </div>
                        <div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl p-4">
                            <p class="text-purple-200 text-sm">ç¸½è¨ˆ</p>
                            <p class="text-2xl font-bold mt-1">{{ proxyStats.total || 0 }}</p>
                        </div>
                    </div>
                    
                    <!-- æ“ä½œæ¬„ -->
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4">
                            <select v-model="proxyFilter" @change="loadProxies" 
                                    class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option value="">å…¨éƒ¨ç‹€æ…‹</option>
                                <option value="available">å¯ç”¨</option>
                                <option value="assigned">å·²åˆ†é…</option>
                                <option value="failed">å¤±æ•—</option>
                                <option value="disabled">å·²ç¦ç”¨</option>
                            </select>
                        </div>
                        <button @click="openProxyModal" 
                                class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity">
                            â• æ‰¹é‡æ·»åŠ ä»£ç†
                        </button>
                    </div>
                    
                    <!-- ä»£ç†åˆ—è¡¨ -->
                    <div class="glass-card rounded-2xl p-6">
                        <table class="w-full">
                            <thead>
                                <tr class="text-gray-400 text-sm">
                                    <th class="text-left px-6 py-4 font-medium">ä»£ç†åœ°å€</th>
                                    <th class="text-left px-6 py-4 font-medium">é¡å‹</th>
                                    <th class="text-left px-6 py-4 font-medium">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium">ç¶å®šå¸³è™Ÿ</th>
                                    <th class="text-left px-6 py-4 font-medium">å»¶é²</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="proxy in proxies" :key="proxy.id" 
                                    class="border-t border-gray-700 table-row-hover">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <span class="text-lg mr-2">ğŸŒ</span>
                                            <div>
                                                <p class="font-medium">{{ proxy.host }}:{{ proxy.port }}</p>
                                                <p class="text-sm text-gray-400" v-if="proxy.country || proxy.provider">
                                                    {{ proxy.country || '' }} {{ proxy.provider || '' }}
                                                </p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="px-2 py-1 rounded bg-gray-700 text-sm">{{ proxy.proxy_type?.toUpperCase() }}</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="getProxyStatusClass(proxy.status)" class="font-medium">
                                            {{ getProxyStatusText(proxy.status) }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span v-if="proxy.assigned_phone" class="text-blue-400">
                                            ğŸ“± {{ proxy.assigned_phone }}
                                        </span>
                                        <span v-else class="text-gray-500">-</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span v-if="proxy.last_check_latency" class="text-green-400">
                                            {{ proxy.last_check_latency }}ms
                                        </span>
                                        <span v-else class="text-gray-500">-</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button @click="testProxy(proxy.id)" 
                                                    class="text-blue-400 hover:text-blue-300 text-sm">æ¸¬è©¦</button>
                                            <button v-if="proxy.status === 'assigned'" @click="releaseProxy(proxy)" 
                                                    class="text-yellow-400 hover:text-yellow-300 text-sm">é‡‹æ”¾</button>
                                            <button @click="deleteProxy(proxy.id)" 
                                                    class="text-red-400 hover:text-red-300 text-sm">åˆªé™¤</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr v-if="proxies.length === 0">
                                    <td colspan="6" class="px-6 py-12 text-center text-gray-500">
                                        æš«ç„¡ä»£ç†ï¼Œé»æ“Šä¸Šæ–¹æŒ‰éˆ•æ·»åŠ 
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- ä½¿ç”¨èªªæ˜ -->
                    <div class="mt-6 glass-card rounded-xl p-4">
                        <h4 class="font-medium mb-2">ğŸ“– ä½¿ç”¨èªªæ˜</h4>
                        <ul class="text-sm text-gray-400 space-y-1">
                            <li>â€¢ æ·»åŠ éœæ…‹ä»£ç†å¾Œï¼Œæ–°ç™»éŒ„çš„ Telegram å¸³è™Ÿå°‡è‡ªå‹•åˆ†é…å¯ç”¨ä»£ç†</li>
                            <li>â€¢ æ¯å€‹å¸³è™Ÿç¶å®šå›ºå®šä»£ç†ï¼Œé¿å… IP è®ŠåŒ–è§¸ç™¼é¢¨æ§</li>
                            <li>â€¢ å»ºè­°ä½¿ç”¨ <span class="text-blue-400">éœæ…‹ISPä»£ç†</span> ä»¥ç²å¾—æœ€é«˜ä¿¡ä»»åº¦</li>
                            <li>â€¢ æ”¯æŒæ ¼å¼ï¼š<code class="bg-gray-700 px-1 rounded">socks5://user:pass@host:port</code> æˆ– <code class="bg-gray-700 px-1 rounded">host:port</code></li>
                        </ul>
                    </div>
                </div>
                
                <!-- æ·»åŠ ä»£ç†å½ˆçª— -->
                <div v-if="showProxyModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-2xl p-6 w-full max-w-lg">
                        <h3 class="text-xl font-bold mb-4">ğŸŒ æ‰¹é‡æ·»åŠ ä»£ç†</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm text-gray-400 mb-1">ä»£ç†åˆ—è¡¨ï¼ˆæ¯è¡Œä¸€å€‹ï¼‰</label>
                                <textarea v-model="proxyForm.text" 
                                          class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 h-40"
                                          placeholder="æ”¯æŒæ ¼å¼ï¼š
socks5://user:pass@host:port
socks5://host:port
host:port:user:pass
host:port"></textarea>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">æœå‹™å•†ï¼ˆå¯é¸ï¼‰</label>
                                    <input v-model="proxyForm.provider" type="text" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                           placeholder="å¦‚ï¼šBlurpath">
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">åœ‹å®¶/åœ°å€ï¼ˆå¯é¸ï¼‰</label>
                                    <input v-model="proxyForm.country" type="text" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"
                                           placeholder="å¦‚ï¼šUS, HK">
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-end gap-3 mt-6">
                            <button @click="showProxyModal = false" 
                                    class="px-6 py-2 rounded-lg bg-gray-700 hover:bg-gray-600">å–æ¶ˆ</button>
                            <button @click="addProxies" 
                                    class="px-6 py-2 rounded-lg gradient-bg hover:opacity-90">æ·»åŠ ä»£ç†</button>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== ç®¡ç†å“¡ç®¡ç† ==================== -->
                <div v-if="currentPage === 'admins'">
                    <div class="flex justify-end mb-6">
                        <button @click="openNewAdminModal" 
                                class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity">
                            â• æ·»åŠ ç®¡ç†å“¡
                        </button>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">ç”¨æˆ¶å</th>
                                    <th class="text-left px-6 py-4 font-medium">å§“å</th>
                                    <th class="text-left px-6 py-4 font-medium">éƒµç®±</th>
                                    <th class="text-left px-6 py-4 font-medium">è§’è‰²</th>
                                    <th class="text-left px-6 py-4 font-medium">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium">æœ€å¾Œç™»éŒ„</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="admin in admins" :key="admin.id"
                                    class="border-t border-gray-700 table-row-hover transition-colors">
                                    <td class="px-6 py-4 font-medium">
                                        <span v-if="admin.username === 'admin'" class="text-yellow-400">ğŸ‘‘ {{ admin.username }}</span>
                                        <span v-else>{{ admin.username }}</span>
                                    </td>
                                    <td class="px-6 py-4">{{ admin.name || '-' }}</td>
                                    <td class="px-6 py-4 text-gray-400">{{ admin.email || '-' }}</td>
                                    <td class="px-6 py-4">
                                        <span :class="{
                                            'bg-yellow-600/30 text-yellow-400': admin.role === 'super_admin',
                                            'bg-blue-600/30 text-blue-400': admin.role === 'admin',
                                            'bg-gray-600/30 text-gray-400': admin.role === 'viewer'
                                        }" class="px-2 py-1 rounded text-sm">
                                            {{ admin.role === 'super_admin' ? 'è¶…ç´šç®¡ç†å“¡' : admin.role === 'admin' ? 'ç®¡ç†å“¡' : 'æŸ¥çœ‹è€…' }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="admin.is_active ? 'text-green-400' : 'text-red-400'">
                                            {{ admin.is_active ? 'âœ“ æ­£å¸¸' : 'âœ— ç¦ç”¨' }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ formatDate(admin.last_login_at) || 'å¾æœª' }}</td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2" v-if="admin.username !== 'admin'">
                                            <button @click="editAdmin(admin)"
                                                    class="px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm transition-colors">
                                                ç·¨è¼¯
                                            </button>
                                            <button @click="toggleAdminStatus(admin)"
                                                    :class="admin.is_active ? 'bg-yellow-600 hover:bg-yellow-700' : 'bg-green-600 hover:bg-green-700'"
                                                    class="px-3 py-1 rounded text-sm transition-colors">
                                                {{ admin.is_active ? 'ç¦ç”¨' : 'å•Ÿç”¨' }}
                                            </button>
                                            <button @click="deleteAdmin(admin)"
                                                    class="px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm transition-colors">
                                                åˆªé™¤
                                            </button>
                                        </div>
                                        <span v-else class="text-gray-500 text-sm">è¶…ç´šç®¡ç†å“¡</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- è§’è‰²æ¬Šé™èªªæ˜ -->
                    <div class="mt-6 bg-gray-800 rounded-xl p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“‹ è§’è‰²æ¬Šé™èªªæ˜</h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="bg-gray-700 rounded-lg p-4">
                                <h4 class="font-medium text-yellow-400 mb-2">ğŸ‘‘ è¶…ç´šç®¡ç†å“¡</h4>
                                <ul class="text-sm text-gray-400 space-y-1">
                                    <li>â€¢ æ‰€æœ‰æ¬Šé™</li>
                                    <li>â€¢ ç®¡ç†å…¶ä»–ç®¡ç†å“¡</li>
                                    <li>â€¢ ç³»çµ±è¨­ç½®</li>
                                </ul>
                            </div>
                            <div class="bg-gray-700 rounded-lg p-4">
                                <h4 class="font-medium text-blue-400 mb-2">ğŸ‘¤ ç®¡ç†å“¡</h4>
                                <ul class="text-sm text-gray-400 space-y-1">
                                    <li>â€¢ ç”¨æˆ¶ç®¡ç†</li>
                                    <li>â€¢ å¡å¯†ç®¡ç†</li>
                                    <li>â€¢ è¨‚å–®ç®¡ç†</li>
                                    <li>â€¢ å…¬å‘Šç®¡ç†</li>
                                </ul>
                            </div>
                            <div class="bg-gray-700 rounded-lg p-4">
                                <h4 class="font-medium text-gray-400 mb-2">ğŸ‘ï¸ æŸ¥çœ‹è€…</h4>
                                <ul class="text-sm text-gray-400 space-y-1">
                                    <li>â€¢ æŸ¥çœ‹æ•¸æ“š</li>
                                    <li>â€¢ ç„¡ä¿®æ”¹æ¬Šé™</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ç®¡ç†å“¡ç·¨è¼¯å½ˆçª— -->
                <div v-if="showAdminModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-xl p-6 w-full max-w-md">
                        <h3 class="text-xl font-bold mb-4">{{ editingAdmin ? 'ç·¨è¼¯ç®¡ç†å“¡' : 'æ·»åŠ ç®¡ç†å“¡' }}</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-gray-400 text-sm mb-1">ç”¨æˆ¶å *</label>
                                <input type="text" v-model="adminForm.username" 
                                       :disabled="editingAdmin"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 disabled:opacity-50"
                                       placeholder="ç™»éŒ„ç”¨æˆ¶å">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm mb-1">å¯†ç¢¼ {{ editingAdmin ? '(ç•™ç©ºä¸ä¿®æ”¹)' : '*' }}</label>
                                <input type="password" v-model="adminForm.password"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="è‡³å°‘6ä½">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm mb-1">å§“å</label>
                                <input type="text" v-model="adminForm.name"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="é¡¯ç¤ºåç¨±">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm mb-1">éƒµç®±</label>
                                <input type="email" v-model="adminForm.email"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="email@example.com">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm mb-1">è§’è‰²</label>
                                <select v-model="adminForm.role"
                                        class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500">
                                    <option value="admin">ç®¡ç†å“¡</option>
                                    <option value="viewer">æŸ¥çœ‹è€…</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="flex justify-end gap-3 mt-6">
                            <button @click="showAdminModal = false"
                                    class="px-6 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg transition-colors">
                                å–æ¶ˆ
                            </button>
                            <button @click="saveAdmin"
                                    class="px-6 py-2 gradient-bg hover:opacity-90 rounded-lg transition-opacity">
                                ä¿å­˜
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== å…¬å‘Šç®¡ç† ==================== -->
                <div v-if="currentPage === 'announcements'">
                    <div class="flex justify-end mb-6">
                        <button @click="openNewAnnouncement" 
                                class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity">
                            â• ç™¼å¸ƒå…¬å‘Š
                        </button>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">æ¨™é¡Œ</th>
                                    <th class="text-left px-6 py-4 font-medium">é¡å‹</th>
                                    <th class="text-left px-6 py-4 font-medium">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium">ç½®é ‚</th>
                                    <th class="text-left px-6 py-4 font-medium">å‰µå»ºæ™‚é–“</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="ann in announcements" :key="ann.id" 
                                    class="border-t border-gray-700 table-row-hover transition-colors">
                                    <td class="px-6 py-4 font-medium">{{ ann.title }}</td>
                                    <td class="px-6 py-4">
                                        <span :class="{
                                            'bg-blue-600/30 text-blue-400': ann.announcement_type === 'info',
                                            'bg-yellow-600/30 text-yellow-400': ann.announcement_type === 'warning',
                                            'bg-red-600/30 text-red-400': ann.announcement_type === 'urgent',
                                            'bg-green-600/30 text-green-400': ann.announcement_type === 'update'
                                        }" class="px-2 py-1 rounded text-sm">
                                            {{ ann.announcement_type }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="ann.status === 'published' ? 'text-green-400' : 'text-gray-400'">
                                            {{ ann.status === 'published' ? 'å·²ç™¼å¸ƒ' : 'è‰ç¨¿' }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span v-if="ann.is_pinned" class="text-yellow-400">ğŸ“Œ</span>
                                        <span v-else class="text-gray-500">-</span>
                                    </td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ formatDate(ann.created_at) }}</td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button @click="editAnnouncement(ann)" 
                                                    class="text-blue-400 hover:text-blue-300 text-sm">ç·¨è¼¯</button>
                                            <button @click="deleteAnnouncement(ann.id)" 
                                                    class="text-red-400 hover:text-red-300 text-sm">åˆªé™¤</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr v-if="announcements.length === 0">
                                    <td colspan="6" class="px-6 py-12 text-center text-gray-500">
                                        æš«ç„¡å…¬å‘Š
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== æ”¶å…¥å ±è¡¨ ==================== -->
                <div v-if="currentPage === 'revenue'">
                    <!-- æ™‚é–“ç¯„åœé¸æ“‡ -->
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-2">
                            <button v-for="d in [7, 30, 90]" :key="d"
                                    @click="revenueReportDays = d; loadRevenueReport()"
                                    :class="['px-4 py-2 rounded-lg transition-colors',
                                            revenueReportDays === d ? 'gradient-bg' : 'bg-gray-700 hover:bg-gray-600']">
                                {{ d }}å¤©
                            </button>
                        </div>
                        <div class="text-gray-400">
                            {{ revenueReport.period || 'åŠ è¼‰ä¸­...' }}
                        </div>
                    </div>
                    
                    <!-- æ”¶å…¥æ¦‚è¦½ -->
                    <div class="grid grid-cols-4 gap-6 mb-6">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <p class="text-gray-400 text-sm">ç¸½æ”¶å…¥</p>
                            <p class="text-3xl font-bold mt-2 text-green-400">{{ (revenueReport.summary?.total_revenue || 0).toLocaleString() }} USDT</p>
                            <p class="text-sm mt-1" :class="(revenueReport.summary?.growth_rate || 0) >= 0 ? 'text-green-400' : 'text-red-400'">
                                {{ (revenueReport.summary?.growth_rate || 0) >= 0 ? 'â†‘' : 'â†“' }} 
                                {{ Math.abs(revenueReport.summary?.growth_rate || 0) }}% è¼ƒä¸ŠæœŸ
                            </p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <p class="text-gray-400 text-sm">è¨‚å–®æ•¸</p>
                            <p class="text-3xl font-bold mt-2 text-blue-400">{{ (revenueReport.summary?.total_orders || 0).toLocaleString() }}</p>
                            <p class="text-sm text-gray-500 mt-1">ä»˜è²»è¨‚å–®</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <p class="text-gray-400 text-sm">ä»˜è²»ç”¨æˆ¶</p>
                            <p class="text-3xl font-bold mt-2 text-purple-400">{{ (revenueReport.summary?.unique_buyers || 0).toLocaleString() }}</p>
                            <p class="text-sm text-gray-500 mt-1">ç¨ç«‹è²·å®¶</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <p class="text-gray-400 text-sm">å®¢å–®åƒ¹</p>
                            <p class="text-3xl font-bold mt-2 text-orange-400">{{ (revenueReport.summary?.avg_order_value || 0).toFixed(2) }} USDT</p>
                            <p class="text-sm text-gray-500 mt-1">å¹³å‡è¨‚å–®é‡‘é¡</p>
                        </div>
                    </div>
                    
                    <!-- åœ–è¡¨ -->
                    <div class="grid grid-cols-2 gap-6 mb-6">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“ˆ æ”¶å…¥è¶¨å‹¢</h3>
                            <canvas id="revenueTrendChart" height="250"></canvas>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ’ ç­‰ç´šæ”¶å…¥åˆ†å¸ƒ</h3>
                            <canvas id="revenueByLevelChart" height="250"></canvas>
                        </div>
                    </div>
                    
                    <!-- è©³ç´°æ•¸æ“šè¡¨ -->
                    <div class="grid grid-cols-2 gap-6">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">æŒ‰ç­‰ç´šçµ±è¨ˆ</h3>
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="text-gray-400 border-b border-gray-700">
                                        <th class="text-left py-2">ç­‰ç´š</th>
                                        <th class="text-right py-2">è¨‚å–®æ•¸</th>
                                        <th class="text-right py-2">æ”¶å…¥</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="item in revenueReport.byLevel" :key="item.product_level" 
                                        class="border-b border-gray-700/50">
                                        <td class="py-2">{{ getLevelName(item.product_level) }}</td>
                                        <td class="text-right py-2">{{ item.order_count }}</td>
                                        <td class="text-right py-2 text-green-400">{{ item.revenue?.toLocaleString() }} USDT</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">æŒ‰æ™‚é•·çµ±è¨ˆ</h3>
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="text-gray-400 border-b border-gray-700">
                                        <th class="text-left py-2">æ™‚é•·</th>
                                        <th class="text-right py-2">è¨‚å–®æ•¸</th>
                                        <th class="text-right py-2">æ”¶å…¥</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="item in revenueReport.byDuration" :key="item.duration_type"
                                        class="border-b border-gray-700/50">
                                        <td class="py-2">{{ getDurationName(item.duration_type) }}</td>
                                        <td class="text-right py-2">{{ item.order_count }}</td>
                                        <td class="text-right py-2 text-green-400">{{ item.revenue?.toLocaleString() }} USDT</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== ç”¨æˆ¶åˆ†æ ==================== -->
                <div v-if="currentPage === 'analytics'">
                    <!-- é—œéµæŒ‡æ¨™ -->
                    <div class="grid grid-cols-5 gap-4 mb-6">
                        <div class="bg-gray-800 rounded-xl p-4 text-center">
                            <p class="text-gray-400 text-sm">ç¸½ç”¨æˆ¶</p>
                            <p class="text-2xl font-bold mt-1">{{ userAnalytics.conversion?.totalUsers || 0 }}</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4 text-center">
                            <p class="text-gray-400 text-sm">ä»˜è²»ç”¨æˆ¶</p>
                            <p class="text-2xl font-bold mt-1 text-green-400">{{ userAnalytics.conversion?.paidUsers || 0 }}</p>
                            <p class="text-xs text-gray-500">{{ userAnalytics.conversion?.paidRate || 0 }}%</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4 text-center">
                            <p class="text-gray-400 text-sm">ARPU</p>
                            <p class="text-2xl font-bold mt-1 text-blue-400">{{ userAnalytics.arpu || 0 }} USDT</p>
                            <p class="text-xs text-gray-500">ç”¨æˆ¶å¹³å‡æ”¶å…¥</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4 text-center">
                            <p class="text-gray-400 text-sm">ARPPU</p>
                            <p class="text-2xl font-bold mt-1 text-purple-400">{{ userAnalytics.arppu || 0 }} USDT</p>
                            <p class="text-xs text-gray-500">ä»˜è²»ç”¨æˆ¶å¹³å‡</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4 text-center">
                            <p class="text-gray-400 text-sm">é‚€è«‹è½‰åŒ–</p>
                            <p class="text-2xl font-bold mt-1 text-orange-400">{{ userAnalytics.referralStats?.converted_referrals || 0 }}</p>
                            <p class="text-xs text-gray-500">å…± {{ userAnalytics.referralStats?.total_referrals || 0 }} äºº</p>
                        </div>
                    </div>
                    
                    <!-- ç•™å­˜ç‡ -->
                    <div class="bg-gray-800 rounded-xl p-6 mb-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“Š ç”¨æˆ¶ç•™å­˜ç‡ (è¿‘30å¤©è¨»å†Šç”¨æˆ¶)</h3>
                        <div class="grid grid-cols-3 gap-6">
                            <div class="text-center">
                                <div class="w-24 h-24 mx-auto rounded-full border-4 border-green-500 flex items-center justify-center">
                                    <span class="text-2xl font-bold">{{ userAnalytics.retention?.day1 || 0 }}%</span>
                                </div>
                                <p class="mt-2 text-gray-400">æ¬¡æ—¥ç•™å­˜</p>
                            </div>
                            <div class="text-center">
                                <div class="w-24 h-24 mx-auto rounded-full border-4 border-blue-500 flex items-center justify-center">
                                    <span class="text-2xl font-bold">{{ userAnalytics.retention?.day7 || 0 }}%</span>
                                </div>
                                <p class="mt-2 text-gray-400">7æ—¥ç•™å­˜</p>
                            </div>
                            <div class="text-center">
                                <div class="w-24 h-24 mx-auto rounded-full border-4 border-purple-500 flex items-center justify-center">
                                    <span class="text-2xl font-bold">{{ userAnalytics.retention?.day30 || 0 }}%</span>
                                </div>
                                <p class="mt-2 text-gray-400">30æ—¥ç•™å­˜</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åœ–è¡¨ -->
                    <div class="grid grid-cols-2 gap-6 mb-6">
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“ˆ ç”¨æˆ¶å¢é•·è¶¨å‹¢</h3>
                            <canvas id="userGrowthChart" height="250"></canvas>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ‘¥ ç­‰ç´šåˆ†å¸ƒ</h3>
                            <canvas id="userLevelChart" height="250"></canvas>
                        </div>
                    </div>
                    
                    <!-- é‚€è«‹æ•ˆæœ -->
                    <div class="bg-gray-800 rounded-xl p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ é‚€è«‹æ•ˆæœè¿½è¹¤</h3>
                        <div class="grid grid-cols-3 gap-6 text-center">
                            <div>
                                <p class="text-4xl font-bold text-blue-400">{{ userAnalytics.referralStats?.total_referrals || 0 }}</p>
                                <p class="text-gray-400 mt-1">ç¸½é‚€è«‹æ•¸</p>
                            </div>
                            <div>
                                <p class="text-4xl font-bold text-green-400">{{ userAnalytics.referralStats?.converted_referrals || 0 }}</p>
                                <p class="text-gray-400 mt-1">è½‰åŒ–ä»˜è²»</p>
                            </div>
                            <div>
                                <p class="text-4xl font-bold text-purple-400">{{ (userAnalytics.referralStats?.total_rewards || 0).toLocaleString() }} USDT</p>
                                <p class="text-gray-400 mt-1">ç¸½çå‹µç™¼æ”¾</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== é…é¡ç›£æ§ ==================== -->
                <div v-if="currentPage === 'quotas'">
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4">
                            <select v-model="quotaFilter" class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option value="all">å…¨éƒ¨ç”¨æˆ¶</option>
                                <option value="exceeded">é…é¡ç·Šå¼µ (â‰¥90%)</option>
                                <option value="bronze">âš”ï¸ é’éŠ…æˆ°å£«</option>
                                <option value="silver">ğŸ¥ˆ ç™½éŠ€ç²¾è‹±</option>
                                <option value="gold">ğŸ¥‡ é»ƒé‡‘å¤§å¸«</option>
                                <option value="diamond">ğŸ’ é‘½çŸ³ç‹ç‰Œ</option>
                                <option value="star">ğŸŒŸ æ˜Ÿè€€å‚³èªª</option>
                                <option value="king">ğŸ‘‘ æ¦®è€€ç‹è€…</option>
                            </select>
                        </div>
                        <button @click="loadQuotaStats" 
                                class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition-colors">
                            ğŸ”„ åˆ·æ–°
                        </button>
                    </div>
                    
                    <!-- é…é¡çµ±è¨ˆæ¦‚è¦½ -->
                    <div class="grid grid-cols-4 gap-4 mb-6">
                        <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-5 border border-gray-700">
                            <p class="text-gray-400 text-sm">ä»Šæ—¥ç¸½æ¶ˆæ¯</p>
                            <p class="text-3xl font-bold mt-2 text-cyan-400">{{ quotaStats.reduce((sum, u) => sum + (u.messagesUsed || 0), 0).toLocaleString() }}</p>
                        </div>
                        <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-5 border border-gray-700">
                            <p class="text-gray-400 text-sm">ä»Šæ—¥ AI èª¿ç”¨</p>
                            <p class="text-3xl font-bold mt-2 text-purple-400">{{ quotaStats.reduce((sum, u) => sum + (u.aiUsed || 0), 0).toLocaleString() }}</p>
                        </div>
                        <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-5 border border-gray-700">
                            <p class="text-gray-400 text-sm">é…é¡ç·Šå¼µç”¨æˆ¶</p>
                            <p class="text-3xl font-bold mt-2 text-orange-400">{{ quotaStats.filter(u => u.messagesPercent >= 90 || u.aiPercent >= 90).length }}</p>
                        </div>
                        <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-5 border border-gray-700">
                            <p class="text-gray-400 text-sm">æ´»èºç”¨æˆ¶</p>
                            <p class="text-3xl font-bold mt-2 text-green-400">{{ quotaStats.filter(u => u.messagesUsed > 0 || u.aiUsed > 0).length }}</p>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">ç”¨æˆ¶</th>
                                    <th class="text-left px-6 py-4 font-medium">ç­‰ç´š</th>
                                    <th class="text-left px-6 py-4 font-medium">æ¶ˆæ¯ç”¨é‡</th>
                                    <th class="text-left px-6 py-4 font-medium">AI ç”¨é‡</th>
                                    <th class="text-left px-6 py-4 font-medium">æœ€å¾Œæ´»å‹•</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="user in filteredQuotaStats" :key="user.user_id" 
                                    class="border-t border-gray-700 table-row-hover">
                                    <td class="px-6 py-4">
                                        <p class="font-medium">{{ user.email || user.user_id }}</p>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="'rank-' + user.level">{{ user.level_icon }} {{ user.level_name }}</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="flex items-center gap-3">
                                            <div class="w-24 h-2 bg-gray-700 rounded-full overflow-hidden">
                                                <div class="h-full rounded-full transition-all"
                                                     :class="user.messagesPercent >= 90 ? 'bg-red-500' : user.messagesPercent >= 70 ? 'bg-orange-500' : 'bg-green-500'"
                                                     :style="{width: Math.min(user.messagesPercent || 0, 100) + '%'}"></div>
                                            </div>
                                            <span class="text-sm">{{ user.messagesUsed || 0 }}/{{ user.messagesMax === -1 ? 'âˆ' : user.messagesMax }}</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="flex items-center gap-3">
                                            <div class="w-24 h-2 bg-gray-700 rounded-full overflow-hidden">
                                                <div class="h-full rounded-full transition-all"
                                                     :class="user.aiPercent >= 90 ? 'bg-red-500' : user.aiPercent >= 70 ? 'bg-orange-500' : 'bg-purple-500'"
                                                     :style="{width: Math.min(user.aiPercent || 0, 100) + '%'}"></div>
                                            </div>
                                            <span class="text-sm">{{ user.aiUsed || 0 }}/{{ user.aiMax === -1 ? 'âˆ' : user.aiMax }}</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ formatDate(user.last_active) }}</td>
                                </tr>
                                <tr v-if="filteredQuotaStats.length === 0">
                                    <td colspan="5" class="px-6 py-12 text-center text-gray-500">æš«ç„¡æ•¸æ“š</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== æ‰¹é‡é€šçŸ¥ ==================== -->
                <div v-if="currentPage === 'notifications'">
                    <div class="grid grid-cols-2 gap-6">
                        <!-- ç™¼é€é€šçŸ¥ -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“¨ ç™¼é€æ‰¹é‡é€šçŸ¥</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">ç›®æ¨™ç”¨æˆ¶</label>
                                    <select v-model="notificationForm.targetLevel" 
                                            class="w-full bg-gray-700 rounded-lg px-4 py-2">
                                        <option value="all">æ‰€æœ‰ç”¨æˆ¶</option>
                                        <option value="bronze">âš”ï¸ é’éŠ…æˆ°å£«</option>
                                        <option value="silver">ğŸ¥ˆ ç™½éŠ€ç²¾è‹±</option>
                                        <option value="gold">ğŸ¥‡ é»ƒé‡‘å¤§å¸«</option>
                                        <option value="diamond">ğŸ’ é‘½çŸ³ç‹ç‰Œ</option>
                                        <option value="star">ğŸŒŸ æ˜Ÿè€€å‚³èªª</option>
                                        <option value="king">ğŸ‘‘ æ¦®è€€ç‹è€…</option>
                                        <option value="paid">æ‰€æœ‰ä»˜è²»ç”¨æˆ¶</option>
                                        <option value="free">å…è²»ç”¨æˆ¶</option>
                                    </select>
                                </div>
                                
                                <div class="flex items-center gap-4">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" v-model="notificationForm.targetExpiring" 
                                               class="rounded bg-gray-700 border-gray-600">
                                        <span class="text-gray-300">åƒ…é™å³å°‡åˆ°æœŸç”¨æˆ¶</span>
                                    </label>
                                    <select v-if="notificationForm.targetExpiring" 
                                            v-model="notificationForm.expiringDays"
                                            class="bg-gray-700 rounded-lg px-3 py-1 text-sm">
                                        <option :value="3">3 å¤©å…§</option>
                                        <option :value="7">7 å¤©å…§</option>
                                        <option :value="14">14 å¤©å…§</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">é€šçŸ¥é¡å‹</label>
                                    <select v-model="notificationForm.type" 
                                            class="w-full bg-gray-700 rounded-lg px-4 py-2">
                                        <option value="info">â„¹ï¸ ä¿¡æ¯</option>
                                        <option value="success">âœ… æˆåŠŸ</option>
                                        <option value="warning">âš ï¸ è­¦å‘Š</option>
                                        <option value="promo">ğŸ ä¿ƒéŠ·</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">æ¨™é¡Œ</label>
                                    <input type="text" v-model="notificationForm.title" 
                                           class="w-full bg-gray-700 rounded-lg px-4 py-2"
                                           placeholder="é€šçŸ¥æ¨™é¡Œ">
                                </div>
                                
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">å…§å®¹</label>
                                    <textarea v-model="notificationForm.content" rows="4"
                                              class="w-full bg-gray-700 rounded-lg px-4 py-2"
                                              placeholder="é€šçŸ¥å…§å®¹..."></textarea>
                                </div>
                                
                                <button @click="sendBatchNotification"
                                        class="w-full gradient-bg hover:opacity-90 py-3 rounded-lg font-medium transition-opacity">
                                    ğŸ“¤ ç™¼é€é€šçŸ¥
                                </button>
                            </div>
                        </div>
                        
                        <!-- é€šçŸ¥æ­·å² -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“‹ ç™¼é€æ­·å²</h3>
                            
                            <div v-if="notificationHistory.length === 0" class="text-center text-gray-500 py-8">
                                æš«ç„¡ç™¼é€è¨˜éŒ„
                            </div>
                            
                            <div v-else class="space-y-3 max-h-96 overflow-y-auto">
                                <div v-for="notif in notificationHistory" :key="notif.id" 
                                     class="bg-gray-700/50 rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-2">
                                        <span class="font-medium">{{ notif.title }}</span>
                                        <span class="text-xs text-gray-400">{{ formatDate(notif.created_at) }}</span>
                                    </div>
                                    <p class="text-sm text-gray-400 mb-2">{{ notif.content }}</p>
                                    <div class="flex gap-3 text-xs">
                                        <span class="text-blue-400">ğŸ“¨ {{ notif.sent_count }} å·²ç™¼é€</span>
                                        <span class="text-gray-500">ç›®æ¨™: {{ notif.target_level }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ==================== è¨­å‚™ç®¡ç† ==================== -->
                <div v-if="currentPage === 'devices'">
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex gap-4">
                            <select v-model="deviceFilter" class="bg-gray-800 border border-gray-600 rounded-lg px-4 py-2">
                                <option value="all">å…¨éƒ¨è¨­å‚™</option>
                                <option value="online">ğŸŸ¢ åœ¨ç·š</option>
                                <option value="offline">âš« é›¢ç·š</option>
                            </select>
                        </div>
                        <div class="text-sm text-gray-400">
                            å…± {{ filteredDevices.length }} å€‹è¨­å‚™
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="text-left px-6 py-4 font-medium">è¨­å‚™</th>
                                    <th class="text-left px-6 py-4 font-medium">ç”¨æˆ¶</th>
                                    <th class="text-left px-6 py-4 font-medium">ç‹€æ…‹</th>
                                    <th class="text-left px-6 py-4 font-medium">æœ€å¾Œæ´»å‹•</th>
                                    <th class="text-left px-6 py-4 font-medium">IP åœ°å€</th>
                                    <th class="text-left px-6 py-4 font-medium">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="device in filteredDevices" :key="device.id" 
                                    class="border-t border-gray-700 table-row-hover">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <span class="text-2xl mr-3">ğŸ’»</span>
                                            <div>
                                                <p class="font-medium">{{ device.device_name || 'æœªçŸ¥è¨­å‚™' }}</p>
                                                <p class="text-xs text-gray-500 font-mono">{{ device.machine_id?.slice(0, 16) }}...</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <p class="font-medium">{{ device.email || 'æœªè¨­ç½®' }}</p>
                                        <span :class="'rank-' + device.level" class="text-sm">{{ device.level_icon }} {{ device.level_name }}</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span v-if="device.isOnline" class="px-3 py-1 rounded-full text-sm bg-green-500/20 text-green-400">
                                            ğŸŸ¢ åœ¨ç·š
                                        </span>
                                        <span v-else class="px-3 py-1 rounded-full text-sm bg-gray-500/20 text-gray-400">
                                            âš« é›¢ç·š
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-gray-400 text-sm">{{ formatDate(device.last_active) }}</td>
                                    <td class="px-6 py-4 text-gray-400 text-sm font-mono">{{ device.ip_address || '-' }}</td>
                                    <td class="px-6 py-4">
                                        <button @click="revokeDevice(device.id)" 
                                                class="text-red-400 hover:text-red-300 text-sm">è§£ç¶</button>
                                    </td>
                                </tr>
                                <tr v-if="filteredDevices.length === 0">
                                    <td colspan="6" class="px-6 py-12 text-center text-gray-500">æš«ç„¡è¨­å‚™æ•¸æ“š</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ==================== ç³»çµ±è¨­ç½® ==================== -->
                <div v-if="currentPage === 'settings'">
                    
                    <!-- ä¿®æ”¹å¯†ç¢¼å€å¡Š -->
                    <div class="bg-gray-800 rounded-xl p-6 mb-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ” ä¿®æ”¹ç®¡ç†å“¡å¯†ç¢¼</h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div>
                                <label class="block text-gray-400 text-sm mb-2">èˆŠå¯†ç¢¼</label>
                                <input type="password" v-model="passwordForm.old_password"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="è¼¸å…¥ç•¶å‰å¯†ç¢¼">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm mb-2">æ–°å¯†ç¢¼</label>
                                <input type="password" v-model="passwordForm.new_password"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="è¼¸å…¥æ–°å¯†ç¢¼ (è‡³å°‘6ä½)">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm mb-2">ç¢ºèªæ–°å¯†ç¢¼</label>
                                <input type="password" v-model="passwordForm.confirm_password"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="å†æ¬¡è¼¸å…¥æ–°å¯†ç¢¼">
                            </div>
                        </div>
                        <button @click="changePassword" 
                                class="mt-4 bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg transition-colors">
                            ä¿®æ”¹å¯†ç¢¼
                        </button>
                    </div>
                    
                    <!-- Telegram é€šçŸ¥è¨­ç½® -->
                    <div class="bg-gray-800 rounded-xl p-6 mb-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“± Telegram é€šçŸ¥è¨­ç½®</h3>
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-gray-400 text-sm mb-2">Bot Token</label>
                                <input type="text" v-model="telegramConfig.bot_token"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="ä¾‹: 123456789:ABCdefGHIjklMNOpqrsTUVwxyz">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-sm mb-2">Chat ID</label>
                                <input type="text" v-model="telegramConfig.chat_id"
                                       class="w-full bg-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                                       placeholder="ä¾‹: -1001234567890">
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <button @click="saveTelegramConfig" 
                                    class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg transition-colors">
                                ä¿å­˜é…ç½®
                            </button>
                            <button @click="testTelegram" 
                                    class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded-lg transition-colors">
                                ç™¼é€æ¸¬è©¦
                            </button>
                        </div>
                        <p class="text-gray-500 text-sm mt-3">
                            ğŸ’¡ å‰µå»º Bot: åœ¨ Telegram æœç´¢ @BotFatherï¼Œç™¼é€ /newbot<br>
                            ğŸ’¡ ç²å– Chat ID: å°‡ Bot åŠ å…¥ç¾¤çµ„ï¼Œè¨ªå• https://api.telegram.org/bot&lt;TOKEN&gt;/getUpdates
                        </p>
                    </div>
                    
                    <!-- æ•¸æ“šå°å‡ºå€å¡Š -->
                    <div class="bg-gray-800 rounded-xl p-6 mb-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“¥ æ•¸æ“šå°å‡º</h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="bg-gray-700 rounded-lg p-4">
                                <h4 class="font-medium mb-2">ğŸ‘¥ ç”¨æˆ¶æ•¸æ“š</h4>
                                <p class="text-gray-400 text-sm mb-3">å°å‡ºæ‰€æœ‰ç”¨æˆ¶ä¿¡æ¯</p>
                                <button @click="exportData('users')" 
                                        class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors">
                                    å°å‡º CSV
                                </button>
                            </div>
                            <div class="bg-gray-700 rounded-lg p-4">
                                <h4 class="font-medium mb-2">ğŸ’° è¨‚å–®æ•¸æ“š</h4>
                                <p class="text-gray-400 text-sm mb-3">å°å‡ºè¿‘30å¤©è¨‚å–®</p>
                                <button @click="exportData('orders')" 
                                        class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors">
                                    å°å‡º CSV
                                </button>
                            </div>
                            <div class="bg-gray-700 rounded-lg p-4">
                                <h4 class="font-medium mb-2">ğŸŸï¸ å¡å¯†æ•¸æ“š</h4>
                                <p class="text-gray-400 text-sm mb-3">å°å‡ºæœªä½¿ç”¨å¡å¯†</p>
                                <button @click="exportData('licenses', 'unused')" 
                                        class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors">
                                    å°å‡º CSV
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-6">
                        <!-- æ”¯ä»˜è¨­ç½® -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ’³ æ”¯ä»˜è¨­ç½®</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">USDT TRC20 åœ°å€</label>
                                    <input type="text" v-model="settings.usdt_trc20_address" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded px-4 py-2 focus:outline-none focus:border-purple-500"
                                           placeholder="TRC20 éŒ¢åŒ…åœ°å€">
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">USDT åŒ¯ç‡ (1 USDT = ? CNY)</label>
                                    <input type="number" v-model="settings.usdt_rate" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded px-4 py-2 focus:outline-none focus:border-purple-500"
                                           placeholder="7.2">
                                </div>
                                <div class="flex items-center gap-4">
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="settings.alipay_enabled" class="mr-2">
                                        <span class="text-gray-400">æ”¯ä»˜å¯¶</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="settings.wechat_enabled" class="mr-2">
                                        <span class="text-gray-400">å¾®ä¿¡æ”¯ä»˜</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ç³»çµ±è¨­ç½® -->
                        <div class="bg-gray-800 rounded-xl p-6">
                            <h3 class="text-lg font-semibold mb-4">âš™ï¸ ç³»çµ±è¨­ç½®</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm text-gray-400 mb-1">è©¦ç”¨å¤©æ•¸</label>
                                    <input type="number" v-model="settings.trial_days" 
                                           class="w-full bg-gray-700 border border-gray-600 rounded px-4 py-2 focus:outline-none focus:border-purple-500"
                                           placeholder="3">
                                </div>
                                <div class="flex items-center gap-4">
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="settings.registration_enabled" class="mr-2">
                                        <span class="text-gray-400">é–‹æ”¾è¨»å†Š</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="settings.referral_enabled" class="mr-2">
                                        <span class="text-gray-400">é‚€è«‹çå‹µ</span>
                                    </label>
                                </div>
                                <div class="flex items-center gap-4">
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="settings.maintenance_mode" class="mr-2">
                                        <span class="text-yellow-400">ç¶­è­·æ¨¡å¼</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-end">
                        <button @click="saveSettings" 
                                class="gradient-bg hover:opacity-90 px-8 py-3 rounded-lg font-medium transition-opacity">
                            ğŸ’¾ ä¿å­˜è¨­ç½®
                        </button>
                    </div>
                    
                    <!-- åƒ¹æ ¼é…ç½® -->
                    <div class="bg-gray-800 rounded-xl p-6 mt-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold">ğŸ’° æœƒå“¡åƒ¹æ ¼é…ç½® (USDT)</h3>
                            <button @click="savePrices" 
                                    class="px-4 py-2 rounded-lg text-sm transition-colors"
                                    :class="editingPrices ? 'bg-green-600 hover:bg-green-700' : 'bg-purple-600 hover:bg-purple-700'">
                                {{ editingPrices ? 'ğŸ’¾ ä¿å­˜åƒ¹æ ¼' : 'âœï¸ ç·¨è¼¯åƒ¹æ ¼' }}
                            </button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="text-gray-400">
                                        <th class="text-left py-3">ç­‰ç´š</th>
                                        <th class="text-center py-3">å‘¨å¡</th>
                                        <th class="text-center py-3">æœˆå¡</th>
                                        <th class="text-center py-3">å­£å¡</th>
                                        <th class="text-center py-3">å¹´å¡</th>
                                        <th class="text-center py-3">çµ‚èº«</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="(config, level) in quotaConfig" :key="level" class="border-t border-gray-700">
                                        <td class="py-3">
                                            <span :class="'rank-' + level">{{ config.icon }} {{ config.name }}</span>
                                        </td>
                                        <template v-if="editingPrices && level !== 'bronze' && config.prices">
                                            <td class="text-center py-3">
                                                <input type="number" step="0.1" v-model.number="config.prices.week" 
                                                       class="w-20 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-center text-sm">
                                            </td>
                                            <td class="text-center py-3">
                                                <input type="number" step="0.1" v-model.number="config.prices.month" 
                                                       class="w-20 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-center text-sm">
                                            </td>
                                            <td class="text-center py-3">
                                                <input type="number" step="0.1" v-model.number="config.prices.quarter" 
                                                       class="w-20 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-center text-sm">
                                            </td>
                                            <td class="text-center py-3">
                                                <input type="number" step="0.1" v-model.number="config.prices.year" 
                                                       class="w-20 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-center text-sm">
                                            </td>
                                            <td class="text-center py-3">
                                                <input type="number" step="0.1" v-model.number="config.prices.lifetime" 
                                                       class="w-20 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-center text-sm">
                                            </td>
                                        </template>
                                        <template v-else>
                                            <td class="text-center py-3 text-green-400">{{ config.prices?.week || 0 }}</td>
                                            <td class="text-center py-3 text-green-400">{{ config.prices?.month || 0 }}</td>
                                            <td class="text-center py-3 text-green-400">{{ config.prices?.quarter || 0 }}</td>
                                            <td class="text-center py-3 text-green-400">{{ config.prices?.year || 0 }}</td>
                                            <td class="text-center py-3 text-green-400">{{ config.prices?.lifetime || 0 }}</td>
                                        </template>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="text-xs text-gray-500 mt-3">ğŸ’¡ ä¿®æ”¹åƒ¹æ ¼å¾Œï¼Œæ–°è¨‚å–®å°‡ä½¿ç”¨æ–°åƒ¹æ ¼ã€‚å·²ç”Ÿæˆçš„å¡å¯†åƒ¹æ ¼ä¸è®Šã€‚</p>
                    </div>
                    
                    <!-- é…é¡é…ç½® -->
                    <div class="bg-gray-800 rounded-xl p-6 mt-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“Š æœƒå“¡é…é¡é…ç½®</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="text-gray-400">
                                        <th class="text-left py-3">ç­‰ç´š</th>
                                        <th class="text-center py-3">TGå¸³è™Ÿ</th>
                                        <th class="text-center py-3">æ—¥æ¶ˆæ¯</th>
                                        <th class="text-center py-3">AIèª¿ç”¨</th>
                                        <th class="text-center py-3">è¨­å‚™æ•¸</th>
                                        <th class="text-center py-3">ç¾¤çµ„æ•¸</th>
                                        <th class="text-center py-3">è‡ªå‹•å›è¦†</th>
                                        <th class="text-center py-3">å®šæ™‚ä»»å‹™</th>
                                        <th class="text-center py-3">å¹³å°API</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="(config, level) in quotaConfig" :key="level" class="border-t border-gray-700">
                                        <td class="py-3">
                                            <span :class="'rank-' + level">{{ config.icon }} {{ config.name }}</span>
                                        </td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.tg_accounts) }}</td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.daily_messages) }}</td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.ai_calls) }}</td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.devices) }}</td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.groups) }}</td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.auto_reply_rules) }}</td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.scheduled_tasks) }}</td>
                                        <td class="text-center py-3">{{ formatQuota(config.quotas?.platform_api_quota) }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ==================== ç”Ÿæˆå¡å¯†å½ˆçª— ==================== -->
        <div v-if="showGenerateModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-xl p-6 w-[500px] border border-gray-700">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="text-2xl mr-2">ğŸŸï¸</span>
                    æ‰¹é‡ç”Ÿæˆå¡å¯†
                </h3>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">æœƒå“¡ç­‰ç´š</label>
                        <select v-model="generateForm.level" 
                                class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                            <option value="B">ğŸ¥ˆ ç™½éŠ€ç²¾è‹±</option>
                            <option value="G">ğŸ¥‡ é»ƒé‡‘å¤§å¸«</option>
                            <option value="D">ğŸ’ é‘½çŸ³ç‹ç‰Œ</option>
                            <option value="S">ğŸŒŸ æ˜Ÿè€€å‚³èªª</option>
                            <option value="K">ğŸ‘‘ æ¦®è€€ç‹è€…</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">æ™‚é•·é¡å‹</label>
                        <select v-model="generateForm.duration" 
                                class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                            <option value="1">å‘¨å¡ (7å¤©)</option>
                            <option value="2">æœˆå¡ (30å¤©)</option>
                            <option value="3">å­£å¡ (90å¤©)</option>
                            <option value="Y">å¹´å¡ (365å¤©)</option>
                            <option value="L">çµ‚èº«</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">ç”Ÿæˆæ•¸é‡ (æœ€å¤š100å€‹)</label>
                        <input type="number" v-model="generateForm.count" min="1" max="100"
                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">æ‰¹æ¬¡å‚™è¨» (å¯é¸)</label>
                        <input type="text" v-model="generateForm.notes" placeholder="ä¾‹å¦‚ï¼šæ´»å‹•è´ˆé€"
                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                    </div>
                </div>
                
                <div class="flex justify-end gap-4 mt-6">
                    <button @click="showGenerateModal = false" 
                            class="px-6 py-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors">
                        å–æ¶ˆ
                    </button>
                    <button @click="generateLicenses" 
                            :disabled="isGenerating"
                            class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity disabled:opacity-50">
                        {{ isGenerating ? 'ç”Ÿæˆä¸­...' : 'ç”Ÿæˆå¡å¯†' }}
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ==================== ä¿®æ”¹å¯†ç¢¼å½ˆçª— ==================== -->
        <div v-if="showPasswordModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-xl p-6 w-[450px] border border-gray-700">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="text-2xl mr-2">ğŸ”‘</span>
                    ä¿®æ”¹å¯†ç¢¼
                </h3>
                
                <!-- éŒ¯èª¤æç¤º -->
                <div v-if="passwordErrors.length > 0" class="bg-red-500/20 border border-red-500/50 rounded-lg p-3 mb-4">
                    <ul class="text-red-400 text-sm list-disc list-inside">
                        <li v-for="err in passwordErrors" :key="err">{{ err }}</li>
                    </ul>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">èˆŠå¯†ç¢¼</label>
                        <input type="password" v-model="passwordForm.oldPassword"
                               class="w-full bg-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
                               placeholder="è«‹è¼¸å…¥ç•¶å‰å¯†ç¢¼">
                    </div>
                    
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">æ–°å¯†ç¢¼</label>
                        <input type="password" v-model="passwordForm.newPassword"
                               @input="checkPasswordStrength"
                               class="w-full bg-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
                               placeholder="è«‹è¼¸å…¥æ–°å¯†ç¢¼">
                        <!-- å¯†ç¢¼å¼·åº¦æŒ‡ç¤ºå™¨ -->
                        <div class="mt-2">
                            <div class="flex gap-1 mb-1">
                                <div class="h-1 flex-1 rounded" 
                                     :class="passwordStrength.score >= 1 ? (passwordStrength.label === 'weak' ? 'bg-red-500' : passwordStrength.label === 'medium' ? 'bg-yellow-500' : 'bg-green-500') : 'bg-gray-600'"></div>
                                <div class="h-1 flex-1 rounded" 
                                     :class="passwordStrength.score >= 3 ? (passwordStrength.label === 'medium' ? 'bg-yellow-500' : 'bg-green-500') : 'bg-gray-600'"></div>
                                <div class="h-1 flex-1 rounded" 
                                     :class="passwordStrength.score >= 5 ? 'bg-green-500' : 'bg-gray-600'"></div>
                            </div>
                            <p class="text-xs" :class="{
                                'text-red-400': passwordStrength.label === 'weak',
                                'text-yellow-400': passwordStrength.label === 'medium',
                                'text-green-400': passwordStrength.label === 'strong'
                            }">
                                {{ passwordStrength.label === 'weak' ? 'å¼±' : passwordStrength.label === 'medium' ? 'ä¸­ç­‰' : passwordStrength.label === 'strong' ? 'å¼·' : '' }}
                                <span v-if="passwordStrength.suggestions.length" class="text-gray-500 ml-2">
                                    {{ passwordStrength.suggestions[0] }}
                                </span>
                            </p>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">ç¢ºèªæ–°å¯†ç¢¼</label>
                        <input type="password" v-model="passwordForm.confirmPassword"
                               class="w-full bg-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
                               placeholder="è«‹å†æ¬¡è¼¸å…¥æ–°å¯†ç¢¼">
                        <p v-if="passwordForm.confirmPassword && passwordForm.newPassword !== passwordForm.confirmPassword" 
                           class="text-red-400 text-xs mt-1">å…©æ¬¡è¼¸å…¥çš„å¯†ç¢¼ä¸ä¸€è‡´</p>
                    </div>
                </div>
                
                <!-- å¯†ç¢¼è¦å‰‡èªªæ˜ -->
                <div class="bg-gray-700/50 rounded-lg p-3 mt-4 text-xs text-gray-400">
                    <p class="font-medium mb-1">å¯†ç¢¼è¦æ±‚ï¼š</p>
                    <ul class="list-disc list-inside space-y-0.5">
                        <li>è‡³å°‘ 8 å€‹å­—ç¬¦</li>
                        <li>åŒ…å«å¤§å¯«å’Œå°å¯«å­—æ¯</li>
                        <li>åŒ…å«è‡³å°‘ä¸€å€‹æ•¸å­—</li>
                    </ul>
                </div>
                
                <div class="flex justify-end gap-4 mt-6">
                    <button @click="showPasswordModal = false" 
                            class="px-6 py-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors">
                        å–æ¶ˆ
                    </button>
                    <button @click="changePassword"
                            :disabled="!passwordForm.oldPassword || !passwordForm.newPassword || passwordForm.newPassword !== passwordForm.confirmPassword"
                            class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity disabled:opacity-50 disabled:cursor-not-allowed">
                        ç¢ºèªä¿®æ”¹
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ==================== çºŒè²»å½ˆçª— ==================== -->
        <div v-if="showExtendModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-xl p-6 w-[450px] border border-gray-700">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="text-2xl mr-2">â°</span>
                    æ‰‹å‹•çºŒè²»
                </h3>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">ç”¨æˆ¶</label>
                        <input type="text" :value="extendForm.userDisplay" disabled
                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-gray-400">
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">å»¶é•·å¤©æ•¸</label>
                        <select v-model="extendForm.days" 
                                class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                            <option :value="7">7 å¤©ï¼ˆå‘¨å¡ï¼‰</option>
                            <option :value="30">30 å¤©ï¼ˆæœˆå¡ï¼‰</option>
                            <option :value="90">90 å¤©ï¼ˆå­£å¡ï¼‰</option>
                            <option :value="365">365 å¤©ï¼ˆå¹´å¡ï¼‰</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">å‡ç´šç­‰ç´šï¼ˆå¯é¸ï¼‰</label>
                        <select v-model="extendForm.level" 
                                class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                            <option value="">ä¿æŒåŸç­‰ç´š</option>
                            <option value="silver">ğŸ¥ˆ ç™½éŠ€ç²¾è‹±</option>
                            <option value="gold">ğŸ¥‡ é»ƒé‡‘å¤§å¸«</option>
                            <option value="diamond">ğŸ’ é‘½çŸ³ç‹ç‰Œ</option>
                            <option value="star">ğŸŒŸ æ˜Ÿè€€å‚³èªª</option>
                            <option value="king">ğŸ‘‘ æ¦®è€€ç‹è€…</option>
                        </select>
                    </div>
                </div>
                
                <div class="flex justify-end gap-4 mt-6">
                    <button @click="showExtendModal = false" 
                            class="px-6 py-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors">
                        å–æ¶ˆ
                    </button>
                    <button @click="submitExtend" 
                            class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded-lg font-medium transition-colors">
                        ç¢ºèªçºŒè²»
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ==================== ç”¨æˆ¶è©³æƒ…å½ˆçª— ==================== -->
        <div v-if="showUserModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50 overflow-y-auto py-8">
            <div class="bg-gray-800 rounded-xl w-[800px] border border-gray-700 max-h-[90vh] overflow-y-auto">
                <!-- æ¨™é¡Œ -->
                <div class="sticky top-0 bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center">
                    <h3 class="text-xl font-bold flex items-center">
                        <span class="text-2xl mr-2">ğŸ‘¤</span>
                        ç”¨æˆ¶è©³æƒ…
                    </h3>
                    <button @click="showUserModal = false" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                </div>
                
                <div class="p-6 space-y-6" v-if="userDetail">
                    <!-- åŸºæœ¬ä¿¡æ¯ -->
                    <div class="grid grid-cols-2 gap-6">
                        <div class="bg-gray-700/50 rounded-lg p-4">
                            <h4 class="text-sm text-gray-400 mb-3">åŸºæœ¬ä¿¡æ¯</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span class="text-gray-400">ç”¨æˆ¶ID</span>
                                    <span class="font-mono">{{ userDetail.user?.user_id }}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">éƒµç®±</span>
                                    <span>{{ userDetail.user?.email || 'æœªè¨­ç½®' }}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">æš±ç¨±</span>
                                    <span>{{ userDetail.user?.nickname || 'æœªè¨­ç½®' }}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">æ©Ÿå™¨ç¢¼</span>
                                    <span class="font-mono text-xs">{{ (userDetail.user?.machine_id || '').slice(0, 20) }}...</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">è¨»å†Šæ™‚é–“</span>
                                    <span>{{ formatDate(userDetail.user?.created_at) }}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">æœ€å¾Œæ´»å‹•</span>
                                    <span>{{ formatDate(userDetail.user?.last_active_at) || '-' }}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700/50 rounded-lg p-4">
                            <h4 class="text-sm text-gray-400 mb-3">æœƒå“¡ä¿¡æ¯</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-400">æœƒå“¡ç­‰ç´š</span>
                                    <span :class="'rank-' + (userDetail.user?.membership_level || 'bronze')" class="font-medium">
                                        {{ userDetail.user?.levelIcon }} {{ userDetail.user?.levelName }}
                                    </span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">åˆ°æœŸæ™‚é–“</span>
                                    <span :class="userDetail.user?.is_lifetime ? 'text-purple-400' : ''">
                                        {{ userDetail.user?.is_lifetime ? 'â™¾ï¸ çµ‚èº«' : formatDate(userDetail.user?.expires_at) }}
                                    </span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">é‚€è«‹ç¢¼</span>
                                    <span class="font-mono text-blue-400">{{ userDetail.user?.invite_code }}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">é‚€è«‹äººæ•¸</span>
                                    <span>{{ userDetail.user?.total_invites || 0 }} äºº</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">é‚€è«‹æ”¶ç›Š</span>
                                    <span class="text-green-400">{{ userDetail.user?.invite_earnings || 0 }} USDT</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">é¤˜é¡</span>
                                    <span class="text-yellow-400">{{ userDetail.user?.balance || 0 }} USDT</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- éŒ¢åŒ…ä¿¡æ¯ -->
                    <div class="bg-gray-700/50 rounded-lg p-4">
                        <h4 class="text-sm text-gray-400 mb-3">ğŸ’° éŒ¢åŒ…ä¿¡æ¯</h4>
                        <div v-if="userDetail.wallet" class="grid grid-cols-4 gap-4 text-center">
                            <div>
                                <p class="text-2xl font-bold text-green-400">{{ userDetail.wallet?.balanceDisplay || '$0.00' }}</p>
                                <p class="text-gray-400 text-sm">ä¸»é¤˜é¡</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-yellow-400">{{ userDetail.wallet?.bonusDisplay || '$0.00' }}</p>
                                <p class="text-gray-400 text-sm">è´ˆé€é¤˜é¡</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-red-400">{{ userDetail.wallet?.frozenDisplay || '$0.00' }}</p>
                                <p class="text-gray-400 text-sm">å‡çµé‡‘é¡</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-blue-400">{{ userDetail.wallet?.totalConsumedDisplay || '$0.00' }}</p>
                                <p class="text-gray-400 text-sm">ç´¯è¨ˆæ¶ˆè²»</p>
                            </div>
                        </div>
                        <div v-else class="text-center text-gray-500 py-4">
                            è©²ç”¨æˆ¶å°šæœªé–‹é€šéŒ¢åŒ…
                        </div>
                        <!-- éŒ¢åŒ…ç‹€æ…‹èˆ‡æ“ä½œ -->
                        <div v-if="userDetail.wallet" class="mt-4 flex justify-between items-center border-t border-gray-600 pt-3">
                            <div class="flex items-center gap-2">
                                <span class="text-gray-400 text-sm">éŒ¢åŒ…ç‹€æ…‹:</span>
                                <span v-if="userDetail.wallet?.status === 'active'" class="text-green-400">âœ… æ­£å¸¸</span>
                                <span v-else-if="userDetail.wallet?.status === 'frozen'" class="text-red-400">ğŸ”’ å·²å‡çµ</span>
                                <span v-else class="text-gray-400">{{ userDetail.wallet?.status }}</span>
                            </div>
                            <div class="flex gap-2">
                                <button @click="adjustUserBalance(userDetail)" 
                                        class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm">
                                    ğŸ’µ èª¿è³¬
                                </button>
                                <button v-if="userDetail.wallet?.status === 'active'" 
                                        @click="freezeUserWallet(userDetail)"
                                        class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm">
                                    ğŸ”’ å‡çµ
                                </button>
                                <button v-else @click="unfreezeUserWallet(userDetail)"
                                        class="bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-sm">
                                    ğŸ”“ è§£å‡
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æœ€è¿‘äº¤æ˜“è¨˜éŒ„ -->
                    <div v-if="userDetail.recentTransactions?.length" class="bg-gray-700/50 rounded-lg p-4">
                        <h4 class="text-sm text-gray-400 mb-3">ğŸ“‹ æœ€è¿‘äº¤æ˜“</h4>
                        <div class="space-y-2 max-h-40 overflow-y-auto">
                            <div v-for="(tx, idx) in userDetail.recentTransactions" :key="idx"
                                 class="flex justify-between items-center bg-gray-800 rounded p-2 text-sm">
                                <span :class="tx.amount >= 0 ? 'text-green-400' : 'text-red-400'">
                                    {{ tx.amount >= 0 ? '+' : '-' }}{{ tx.amountDisplay }}
                                </span>
                                <span class="text-gray-400 flex-1 mx-4 truncate">{{ tx.description }}</span>
                                <span class="text-gray-500 text-xs">{{ formatDate(tx.createdAt) }}</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å…¶ä»–çµ±è¨ˆ -->
                    <div class="bg-gray-700/50 rounded-lg p-4">
                        <h4 class="text-sm text-gray-400 mb-3">ğŸ“Š å…¶ä»–çµ±è¨ˆ</h4>
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div>
                                <p class="text-2xl font-bold text-blue-400">{{ userDetail.licenses?.length || 0 }}</p>
                                <p class="text-gray-400 text-sm">ä½¿ç”¨å¡å¯†æ•¸</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-purple-400">{{ userDetail.referrals?.length || 0 }}</p>
                                <p class="text-gray-400 text-sm">é‚€è«‹è¨˜éŒ„</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold" :class="userDetail.isBanned ? 'text-red-400' : 'text-green-400'">
                                    {{ userDetail.isBanned ? 'å·²å°ç¦' : 'æ­£å¸¸' }}
                                </p>
                                <p class="text-gray-400 text-sm">å¸³è™Ÿç‹€æ…‹</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- é…é¡ä¿¡æ¯ -->
                    <div class="bg-gray-700/50 rounded-lg p-4" v-if="userDetail.user?.quotas">
                        <h4 class="text-sm text-gray-400 mb-3">ç•¶å‰ç­‰ç´šé…é¡</h4>
                        <div class="grid grid-cols-4 gap-4 text-center text-sm">
                            <div v-for="(value, key) in userDetail.user.quotas" :key="key" class="bg-gray-800 rounded p-2">
                                <p class="text-lg font-bold">{{ formatQuota(value) }}</p>
                                <p class="text-gray-400">{{ getQuotaLabel(key) }}</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä½¿ç”¨çš„å¡å¯† -->
                    <div class="bg-gray-700/50 rounded-lg p-4">
                        <h4 class="text-sm text-gray-400 mb-3">ä½¿ç”¨çš„å¡å¯†</h4>
                        <div v-if="userDetail.licenses?.length" class="space-y-2 max-h-40 overflow-y-auto">
                            <div v-for="lic in userDetail.licenses" :key="lic.license_key" 
                                 class="flex justify-between items-center bg-gray-800 rounded p-2 text-sm">
                                <code class="text-blue-400">{{ lic.license_key }}</code>
                                <span class="text-gray-400">{{ lic.level }} | {{ lic.duration_days }}å¤©</span>
                                <span class="text-gray-500">{{ formatDate(lic.used_at) }}</span>
                            </div>
                        </div>
                        <p v-else class="text-gray-500 text-center py-4">æš«ç„¡å¡å¯†è¨˜éŒ„</p>
                    </div>
                </div>
                
                <!-- æ“ä½œæŒ‰éˆ• -->
                <div class="sticky bottom-0 bg-gray-800 border-t border-gray-700 p-4 flex justify-end gap-3">
                    <button @click="extendUser(userDetail.user)" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">
                        â° çºŒè²»
                    </button>
                    <button v-if="!userDetail.user?.is_banned" @click="banUser(userDetail.user); showUserModal = false"
                            class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg">
                        ğŸš« å°ç¦
                    </button>
                    <button v-else @click="unbanUser(userDetail.user); showUserModal = false"
                            class="bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded-lg">
                        âœ… è§£å°
                    </button>
                    <button @click="showUserModal = false" class="bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded-lg">
                        é—œé–‰
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ==================== ç™¼å¸ƒå…¬å‘Šå½ˆçª— ==================== -->
        <div v-if="showAnnouncementModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-xl p-6 w-[600px] border border-gray-700">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="text-2xl mr-2">ğŸ“¢</span>
                    {{ announcementForm.id ? 'ç·¨è¼¯å…¬å‘Š' : 'ç™¼å¸ƒå…¬å‘Š' }}
                </h3>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">æ¨™é¡Œ</label>
                        <input type="text" v-model="announcementForm.title" 
                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                               placeholder="å…¬å‘Šæ¨™é¡Œ">
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">å…§å®¹</label>
                        <textarea v-model="announcementForm.content" rows="5"
                                  class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                                  placeholder="å…¬å‘Šå…§å®¹"></textarea>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">é¡å‹</label>
                            <select v-model="announcementForm.type" 
                                    class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                                <option value="info">ğŸ“‹ é€šçŸ¥</option>
                                <option value="update">ğŸ†• æ›´æ–°</option>
                                <option value="warning">âš ï¸ è­¦å‘Š</option>
                                <option value="urgent">ğŸš¨ ç·Šæ€¥</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">ç‹€æ…‹</label>
                            <select v-model="announcementForm.status" 
                                    class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                                <option value="draft">è‰ç¨¿</option>
                                <option value="published">ç™¼å¸ƒ</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex gap-4">
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox" v-model="announcementForm.is_pinned" class="mr-2">
                            <span class="text-gray-400">ğŸ“Œ ç½®é ‚</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox" v-model="announcementForm.is_popup" class="mr-2">
                            <span class="text-gray-400">ğŸ’¬ å½ˆçª—é¡¯ç¤º</span>
                        </label>
                    </div>
                </div>
                
                <div class="flex justify-end gap-4 mt-6">
                    <button @click="showAnnouncementModal = false" 
                            class="px-6 py-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors">
                        å–æ¶ˆ
                    </button>
                    <button @click="saveAnnouncement" 
                            class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity">
                        {{ announcementForm.id ? 'ä¿å­˜ä¿®æ”¹' : 'ç™¼å¸ƒå…¬å‘Š' }}
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ==================== å„ªæƒ åˆ¸ç®¡ç†å½ˆçª— ==================== -->
        <div v-if="showCouponModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-xl p-6 w-[500px] border border-gray-700">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="text-2xl mr-2">ğŸ«</span>
                    å‰µå»ºå„ªæƒ åˆ¸
                </h3>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">å„ªæƒ åˆ¸ç¢¼</label>
                        <input type="text" v-model="couponForm.code" 
                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                               placeholder="ç•™ç©ºè‡ªå‹•ç”Ÿæˆ">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">æŠ˜æ‰£é¡å‹</label>
                            <select v-model="couponForm.discount_type" 
                                    class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                                <option value="percent">ç™¾åˆ†æ¯”æŠ˜æ‰£</option>
                                <option value="fixed">å›ºå®šé‡‘é¡</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">æŠ˜æ‰£å€¼</label>
                            <input type="number" v-model="couponForm.discount_value" 
                                   class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                                   :placeholder="couponForm.discount_type === 'percent' ? 'å¦‚: 10 (è¡¨ç¤º10%)' : 'å¦‚: 20 (æ¸›20å…ƒ)'">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">æœ€ä½æ¶ˆè²»</label>
                            <input type="number" v-model="couponForm.min_amount" 
                                   class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                                   placeholder="0">
                        </div>
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">æœ€å¤§ä½¿ç”¨æ¬¡æ•¸</label>
                            <input type="number" v-model="couponForm.max_uses" 
                                   class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
                                   placeholder="100">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">éæœŸæ™‚é–“</label>
                        <input type="datetime-local" v-model="couponForm.expires_at" 
                               class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500">
                    </div>
                </div>
                
                <div class="flex justify-end gap-4 mt-6">
                    <button @click="showCouponModal = false" 
                            class="px-6 py-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors">
                        å–æ¶ˆ
                    </button>
                    <button @click="createCoupon" 
                            class="gradient-bg hover:opacity-90 px-6 py-2 rounded-lg font-medium transition-opacity">
                        å‰µå»ºå„ªæƒ åˆ¸
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ==================== ç¢ºèªå°è©±æ¡† ==================== -->
        <div v-if="confirmDialog.show" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-xl p-6 w-[400px] border border-gray-700">
                <h3 class="text-lg font-bold mb-4 flex items-center">
                    <span class="text-2xl mr-2">{{ confirmDialog.icon }}</span>
                    {{ confirmDialog.title }}
                </h3>
                <p class="text-gray-400 mb-6">{{ confirmDialog.message }}</p>
                <div class="flex justify-end gap-4">
                    <button @click="confirmDialog.show = false" 
                            class="px-4 py-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors">
                        å–æ¶ˆ
                    </button>
                    <button @click="confirmDialog.onConfirm(); confirmDialog.show = false" 
                            :class="confirmDialog.type === 'danger' ? 'bg-red-600 hover:bg-red-700' : 'gradient-bg hover:opacity-90'"
                            class="px-4 py-2 rounded-lg font-medium transition-colors">
                        ç¢ºèª
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Toast é€šçŸ¥ -->
        <div v-if="toast.show" 
             :class="['fixed bottom-8 right-8 px-6 py-3 rounded-lg shadow-lg transition-all transform',
                     toast.type === 'success' ? 'bg-green-600' : toast.type === 'error' ? 'bg-red-600' : 'bg-blue-600']">
            {{ toast.message }}
        </div>
    </div>
    
    <script src="app.js?v=20260203-5"></script>
</body>
</html>
