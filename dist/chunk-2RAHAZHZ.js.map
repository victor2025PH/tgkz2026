{
  "version": 3,
  "sources": ["src/services/wallet.service.ts"],
  "sourcesContent": ["/**\r\n * Èå¢ÂåÖÊúçÂãô\r\n * Wallet Service\r\n * \r\n * ËôïÁêÜÁî®Êà∂Èå¢ÂåÖÈ§òÈ°ç„ÄÅ‰∫§ÊòìË®òÈåÑ„ÄÅÊ∂àË≤ªÂàÜÊûêÁ≠âÂäüËÉΩ\r\n */\r\n\r\nimport { Injectable, signal, computed } from '@angular/core';\r\nimport { ApiService } from '../core/api.service';\r\n\r\nexport interface Wallet {\r\n  id: string;\r\n  user_id: string;\r\n  balance: number;\r\n  balance_display: string;\r\n  frozen_balance: number;\r\n  bonus_balance: number;\r\n  bonus_display: string;\r\n  available_balance: number;\r\n  total_display: string;\r\n  total_recharged: number;\r\n  total_consumed: number;\r\n  total_withdrawn: number;\r\n  currency: string;\r\n  status: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface Transaction {\r\n  id: string;\r\n  order_id: string;\r\n  type: 'recharge' | 'consume' | 'refund' | 'withdraw' | 'bonus' | 'adjust';\r\n  amount: number;\r\n  amount_display: string;\r\n  bonus_amount: number;\r\n  balance_before: number;\r\n  balance_after: number;\r\n  category: string;\r\n  description: string;\r\n  status: 'pending' | 'success' | 'failed' | 'cancelled' | 'refunded';\r\n  payment_method: string;\r\n  created_at: string;\r\n  completed_at: string;\r\n}\r\n\r\nexport interface TransactionResult {\r\n  transactions: Transaction[];\r\n  pagination: {\r\n    page: number;\r\n    page_size: number;\r\n    total: number;\r\n    total_pages: number;\r\n    has_next: boolean;\r\n    has_prev: boolean;\r\n  };\r\n  summary: {\r\n    total_in: number;\r\n    total_out: number;\r\n    total_in_display: string;\r\n    total_out_display: string;\r\n  };\r\n}\r\n\r\nexport interface ConsumeAnalysis {\r\n  period: {\r\n    start: string;\r\n    end: string;\r\n  };\r\n  total_consumed: number;\r\n  total_display: string;\r\n  by_category: Array<{\r\n    category: string;\r\n    category_name: string;\r\n    count: number;\r\n    amount: number;\r\n    amount_display: string;\r\n    percent: number;\r\n  }>;\r\n  by_date: Array<{\r\n    date: string;\r\n    amount: number;\r\n    amount_display: string;\r\n  }>;\r\n}\r\n\r\nexport interface MonthlySummary {\r\n  month: string;\r\n  income: number;\r\n  income_display: string;\r\n  expense: number;\r\n  expense_display: string;\r\n  net: number;\r\n  transaction_count: number;\r\n}\r\n\r\nexport interface RechargePackage {\r\n  id: number;\r\n  amount: number;\r\n  amount_display: string;\r\n  bonus_amount: number;\r\n  bonus_display: string;\r\n  bonus_percent: number;\r\n  total_display: string;\r\n  is_recommended: boolean;\r\n  display_order: number;\r\n}\r\n\r\nexport interface WalletStatistics {\r\n  balance: number;\r\n  balance_display: string;\r\n  total_recharged: number;\r\n  total_consumed: number;\r\n  this_month_consumed: number;\r\n  transaction_count: number;\r\n}\r\n\r\nexport interface RechargeOrder {\r\n  id: string;\r\n  order_no: string;\r\n  user_id: string;\r\n  wallet_id: string;\r\n  amount: number;\r\n  bonus_amount: number;\r\n  fee: number;\r\n  actual_amount: number;\r\n  payment_method: string;\r\n  payment_channel: string;\r\n  status: 'pending' | 'paid' | 'confirmed' | 'failed' | 'expired' | 'refunded';\r\n  usdt_network?: string;\r\n  usdt_address?: string;\r\n  usdt_amount?: number;\r\n  usdt_rate?: number;\r\n  usdt_tx_hash?: string;\r\n  paid_at?: string;\r\n  confirmed_at?: string;\r\n  expired_at?: string;\r\n  created_at: string;\r\n}\r\n\r\nexport interface PaymentInfo {\r\n  order_no: string;\r\n  amount: number;\r\n  amount_display: string;\r\n  bonus_amount: number;\r\n  bonus_display: string;\r\n  fee: number;\r\n  actual_amount: number;\r\n  actual_display: string;\r\n  payment_method: string;\r\n  expired_at: string;\r\n  usdt_network?: string;\r\n  usdt_address?: string;\r\n  usdt_amount?: number;\r\n  usdt_rate?: number;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WalletService {\r\n  // ÁãÄÊÖã\r\n  private _wallet = signal<Wallet | null>(null);\r\n  readonly wallet = this._wallet.asReadonly();\r\n  \r\n  private _transactions = signal<Transaction[]>([]);\r\n  readonly transactions = this._transactions.asReadonly();\r\n  \r\n  private _rechargePackages = signal<RechargePackage[]>([]);\r\n  readonly rechargePackages = this._rechargePackages.asReadonly();\r\n  \r\n  private _statistics = signal<WalletStatistics | null>(null);\r\n  readonly statistics = this._statistics.asReadonly();\r\n  \r\n  private _loading = signal(false);\r\n  readonly loading = this._loading.asReadonly();\r\n  \r\n  // Ë®àÁÆóÂ±¨ÊÄß\r\n  readonly balance = computed(() => this._wallet()?.available_balance ?? 0);\r\n  readonly balanceDisplay = computed(() => this._wallet()?.total_display ?? '$0.00');\r\n  readonly hasBalance = computed(() => this.balance() > 0);\r\n  \r\n  constructor(private api: ApiService) {}\r\n\r\n  /**\r\n   * Áç≤ÂèñÈå¢ÂåÖ‰ø°ÊÅØ\r\n   */\r\n  async loadWallet(): Promise<Wallet | null> {\r\n    this._loading.set(true);\r\n    \r\n    try {\r\n      const response = await this.api.get<any>('/api/wallet');\r\n      \r\n      if (response?.success && response?.data) {\r\n        this._wallet.set(response.data);\r\n        return response.data;\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error('Load wallet error:', error);\r\n      return null;\r\n    } finally {\r\n      this._loading.set(false);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÈ§òÈ°ç\r\n   */\r\n  async getBalance(): Promise<{ balance: number; display: string } | null> {\r\n    try {\r\n      const response = await this.api.get<any>('/api/wallet/balance');\r\n      \r\n      if (response?.success && response?.data) {\r\n        return {\r\n          balance: response.data.available_balance,\r\n          display: response.data.total_display\r\n        };\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error('Get balance error:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÁµ±Ë®à‰ø°ÊÅØ\r\n   */\r\n  async loadStatistics(): Promise<WalletStatistics | null> {\r\n    try {\r\n      const response = await this.api.get<any>('/api/wallet/statistics');\r\n      \r\n      if (response?.success && response?.data) {\r\n        this._statistics.set(response.data);\r\n        return response.data;\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error('Load statistics error:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Áç≤Âèñ‰∫§ÊòìË®òÈåÑ\r\n   */\r\n  async loadTransactions(options?: {\r\n    page?: number;\r\n    pageSize?: number;\r\n    type?: string;\r\n    category?: string;\r\n    status?: string;\r\n    startDate?: string;\r\n    endDate?: string;\r\n  }): Promise<TransactionResult | null> {\r\n    this._loading.set(true);\r\n    \r\n    try {\r\n      const params = new URLSearchParams();\r\n      if (options?.page) params.set('page', String(options.page));\r\n      if (options?.pageSize) params.set('page_size', String(options.pageSize));\r\n      if (options?.type) params.set('type', options.type);\r\n      if (options?.category) params.set('category', options.category);\r\n      if (options?.status) params.set('status', options.status);\r\n      if (options?.startDate) params.set('start_date', options.startDate);\r\n      if (options?.endDate) params.set('end_date', options.endDate);\r\n      \r\n      const url = `/api/wallet/transactions${params.toString() ? '?' + params.toString() : ''}`;\r\n      const response = await this.api.get<any>(url);\r\n      \r\n      if (response?.success && response?.data) {\r\n        this._transactions.set(response.data.transactions);\r\n        return response.data;\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error('Load transactions error:', error);\r\n      return null;\r\n    } finally {\r\n      this._loading.set(false);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÊúÄËøë‰∫§Êòì\r\n   */\r\n  async getRecentTransactions(limit: number = 5): Promise<Transaction[]> {\r\n    try {\r\n      const response = await this.api.get<any>(`/api/wallet/transactions/recent?limit=${limit}`);\r\n      \r\n      if (response?.success && response?.data) {\r\n        return response.data;\r\n      }\r\n      \r\n      return [];\r\n    } catch (error) {\r\n      console.error('Get recent transactions error:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÊ∂àË≤ªÂàÜÊûê\r\n   */\r\n  async getConsumeAnalysis(startDate?: string, endDate?: string): Promise<ConsumeAnalysis | null> {\r\n    try {\r\n      const params = new URLSearchParams();\r\n      if (startDate) params.set('start_date', startDate);\r\n      if (endDate) params.set('end_date', endDate);\r\n      \r\n      const url = `/api/wallet/analysis/consume${params.toString() ? '?' + params.toString() : ''}`;\r\n      const response = await this.api.get<any>(url);\r\n      \r\n      if (response?.success && response?.data) {\r\n        return response.data;\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error('Get consume analysis error:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÊúàÂ∫¶ÊëòË¶Å\r\n   */\r\n  async getMonthlySummary(months: number = 6): Promise<MonthlySummary[]> {\r\n    try {\r\n      const response = await this.api.get<any>(`/api/wallet/analysis/monthly?months=${months}`);\r\n      \r\n      if (response?.success && response?.data) {\r\n        return response.data;\r\n      }\r\n      \r\n      return [];\r\n    } catch (error) {\r\n      console.error('Get monthly summary error:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÂÖÖÂÄºÂ•óÈ§ê\r\n   */\r\n  async loadRechargePackages(): Promise<RechargePackage[]> {\r\n    try {\r\n      const response = await this.api.get<any>('/api/wallet/packages');\r\n      \r\n      if (response?.success && response?.data) {\r\n        this._rechargePackages.set(response.data);\r\n        return response.data;\r\n      }\r\n      \r\n      return [];\r\n    } catch (error) {\r\n      console.error('Load recharge packages error:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ê∂àË≤ªÈ§òÈ°ç\r\n   */\r\n  async consume(options: {\r\n    amount: number;\r\n    category: string;\r\n    description: string;\r\n    orderId?: string;\r\n    referenceId?: string;\r\n    referenceType?: string;\r\n  }): Promise<{ success: boolean; transaction?: Transaction; newBalance?: any; error?: string }> {\r\n    try {\r\n      const response = await this.api.post<any>('/api/wallet/consume', {\r\n        amount: options.amount,\r\n        category: options.category,\r\n        description: options.description,\r\n        order_id: options.orderId,\r\n        reference_id: options.referenceId,\r\n        reference_type: options.referenceType\r\n      });\r\n      \r\n      if (response?.success) {\r\n        // Âà∑Êñ∞Èå¢ÂåÖ\r\n        await this.loadWallet();\r\n        \r\n        return {\r\n          success: true,\r\n          transaction: response.data?.transaction,\r\n          newBalance: response.data?.new_balance\r\n        };\r\n      }\r\n      \r\n      return { success: false, error: response?.error || 'Ê∂àË≤ªÂ§±Êïó' };\r\n    } catch (error) {\r\n      console.error('Consume error:', error);\r\n      return { success: false, error: String(error) };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ê™¢Êü•È§òÈ°çÊòØÂê¶Ë∂≥Â§†\r\n   */\r\n  async checkBalance(amount: number): Promise<{\r\n    sufficient: boolean;\r\n    required: number;\r\n    available: number;\r\n    shortfall: number;\r\n  }> {\r\n    try {\r\n      const response = await this.api.post<any>('/api/wallet/check-balance', { amount });\r\n      \r\n      if (response?.success && response?.data) {\r\n        return response.data;\r\n      }\r\n      \r\n      return {\r\n        sufficient: false,\r\n        required: amount,\r\n        available: 0,\r\n        shortfall: amount\r\n      };\r\n    } catch (error) {\r\n      console.error('Check balance error:', error);\r\n      return {\r\n        sufficient: false,\r\n        required: amount,\r\n        available: 0,\r\n        shortfall: amount\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Â∞éÂá∫‰∫§ÊòìË®òÈåÑ\r\n   */\r\n  async exportTransactions(startDate?: string, endDate?: string): Promise<void> {\r\n    try {\r\n      const params = new URLSearchParams();\r\n      if (startDate) params.set('start_date', startDate);\r\n      if (endDate) params.set('end_date', endDate);\r\n      \r\n      const url = `/api/wallet/transactions/export${params.toString() ? '?' + params.toString() : ''}`;\r\n      \r\n      // ‰∏ãËºâÊñá‰ª∂\r\n      window.open(url, '_blank');\r\n    } catch (error) {\r\n      console.error('Export transactions error:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ê†ºÂºèÂåñÈáëÈ°ç\r\n   */\r\n  formatAmount(cents: number, currency: string = 'USD'): string {\r\n    const amount = cents / 100;\r\n    const symbols: Record<string, string> = {\r\n      USD: '$',\r\n      CNY: '¬•',\r\n      EUR: '‚Ç¨'\r\n    };\r\n    const symbol = symbols[currency] || '$';\r\n    return `${symbol}${amount.toFixed(2)}`;\r\n  }\r\n\r\n  /**\r\n   * Áç≤Âèñ‰∫§ÊòìÈ°ûÂûãÂêçÁ®±\r\n   */\r\n  getTypeName(type: string): string {\r\n    const names: Record<string, string> = {\r\n      recharge: 'ÂÖÖÂÄº',\r\n      consume: 'Ê∂àË≤ª',\r\n      refund: 'ÈÄÄÊ¨æ',\r\n      withdraw: 'ÊèêÁèæ',\r\n      bonus: 'Ë¥àÈÄÅ',\r\n      adjust: 'Ë™øË≥¨'\r\n    };\r\n    return names[type] || type;\r\n  }\r\n\r\n  /**\r\n   * Áç≤Âèñ‰∫§ÊòìÈ°ûÂûãÂúñÊ®ô\r\n   */\r\n  getTypeIcon(type: string): string {\r\n    const icons: Record<string, string> = {\r\n      recharge: 'üí∞',\r\n      consume: 'üõí',\r\n      refund: '‚Ü©Ô∏è',\r\n      withdraw: 'üí∏',\r\n      bonus: 'üéÅ',\r\n      adjust: '‚öôÔ∏è'\r\n    };\r\n    return icons[type] || 'üìã';\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÁãÄÊÖãÊ®ôÁ±§\r\n   */\r\n  getStatusLabel(status: string): { text: string; color: string } {\r\n    const labels: Record<string, { text: string; color: string }> = {\r\n      pending: { text: 'ËôïÁêÜ‰∏≠', color: '#f59e0b' },\r\n      success: { text: 'ÊàêÂäü', color: '#22c55e' },\r\n      failed: { text: 'Â§±Êïó', color: '#ef4444' },\r\n      cancelled: { text: 'Â∑≤ÂèñÊ∂à', color: '#6b7280' },\r\n      refunded: { text: 'Â∑≤ÈÄÄÊ¨æ', color: '#8b5cf6' }\r\n    };\r\n    return labels[status] || { text: status, color: '#666' };\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÈ°ûÁõÆÂêçÁ®±\r\n   */\r\n  getCategoryName(category: string): string {\r\n    const names: Record<string, string> = {\r\n      membership: 'ÊúÉÂì°ÊúçÂãô',\r\n      ip_proxy: 'ÈùúÊÖã IP',\r\n      quota_pack: 'ÈÖçÈ°çÂåÖ',\r\n      other: 'ÂÖ∂‰ªñ'\r\n    };\r\n    return names[category] || category || 'ÂÖ∂‰ªñ';\r\n  }\r\n\r\n  /**\r\n   * Âà∑Êñ∞ÊâÄÊúâÊï∏Êìö\r\n   */\r\n  async refresh(): Promise<void> {\r\n    await Promise.all([\r\n      this.loadWallet(),\r\n      this.loadStatistics(),\r\n      this.loadRechargePackages()\r\n    ]);\r\n  }\r\n\r\n  // ==================== Phase 1: ÂÖÖÂÄºË®ÇÂñÆ ====================\r\n\r\n  /**\r\n   * ÂâµÂª∫ÂÖÖÂÄºË®ÇÂñÆ\r\n   */\r\n  async createRechargeOrder(options: {\r\n    amount: number;\r\n    paymentMethod: string;\r\n    paymentChannel?: string;\r\n  }): Promise<{ success: boolean; order?: RechargeOrder; paymentInfo?: PaymentInfo; error?: string }> {\r\n    try {\r\n      const response = await this.api.post<any>('/api/wallet/recharge/create', {\r\n        amount: options.amount,\r\n        payment_method: options.paymentMethod,\r\n        payment_channel: options.paymentChannel || 'direct'\r\n      });\r\n      \r\n      if (response?.success && response?.data) {\r\n        return {\r\n          success: true,\r\n          order: response.data.order,\r\n          paymentInfo: response.data.payment_info\r\n        };\r\n      }\r\n      \r\n      return { success: false, error: response?.error || 'ÂâµÂª∫Ë®ÇÂñÆÂ§±Êïó' };\r\n    } catch (error) {\r\n      console.error('Create recharge order error:', error);\r\n      return { success: false, error: String(error) };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÂÖÖÂÄºË®ÇÂñÆË©≥ÊÉÖ\r\n   */\r\n  async getRechargeOrder(orderNo: string): Promise<{ order?: RechargeOrder; paymentInfo?: PaymentInfo } | null> {\r\n    try {\r\n      const response = await this.api.get<any>(`/api/wallet/recharge/${orderNo}`);\r\n      \r\n      if (response?.success && response?.data) {\r\n        return {\r\n          order: response.data.order,\r\n          paymentInfo: response.data.payment_info\r\n        };\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error('Get recharge order error:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÂÖÖÂÄºË®ÇÂñÆÂàóË°®\r\n   */\r\n  async getRechargeOrders(options?: {\r\n    page?: number;\r\n    pageSize?: number;\r\n    status?: string;\r\n  }): Promise<{ orders: RechargeOrder[]; pagination: any } | null> {\r\n    try {\r\n      const params = new URLSearchParams();\r\n      if (options?.page) params.set('page', String(options.page));\r\n      if (options?.pageSize) params.set('page_size', String(options.pageSize));\r\n      if (options?.status) params.set('status', options.status);\r\n      \r\n      const url = `/api/wallet/recharge/orders${params.toString() ? '?' + params.toString() : ''}`;\r\n      const response = await this.api.get<any>(url);\r\n      \r\n      if (response?.success && response?.data) {\r\n        return {\r\n          orders: response.data.orders,\r\n          pagination: response.data.pagination\r\n        };\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error('Get recharge orders error:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ê®ôË®òË®ÇÂñÆÂ∑≤ÊîØ‰ªò\r\n   */\r\n  async markRechargeOrderPaid(orderNo: string, txHash?: string): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      const response = await this.api.post<any>(`/api/wallet/recharge/${orderNo}/paid`, {\r\n        tx_hash: txHash\r\n      });\r\n      \r\n      if (response?.success) {\r\n        return { success: true };\r\n      }\r\n      \r\n      return { success: false, error: response?.error || 'Ê®ôË®òÂ§±Êïó' };\r\n    } catch (error) {\r\n      console.error('Mark recharge order paid error:', error);\r\n      return { success: false, error: String(error) };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÂèñÊ∂àÂÖÖÂÄºË®ÇÂñÆ\r\n   */\r\n  async cancelRechargeOrder(orderNo: string): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      const response = await this.api.post<any>(`/api/wallet/recharge/${orderNo}/cancel`, {});\r\n      \r\n      if (response?.success) {\r\n        return { success: true };\r\n      }\r\n      \r\n      return { success: false, error: response?.error || 'ÂèñÊ∂àÂ§±Êïó' };\r\n    } catch (error) {\r\n      console.error('Cancel recharge order error:', error);\r\n      return { success: false, error: String(error) };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ê™¢Êü•ÂÖÖÂÄºË®ÇÂñÆÁãÄÊÖã\r\n   */\r\n  async checkRechargeOrderStatus(orderNo: string): Promise<{\r\n    status: string;\r\n    isConfirmed: boolean;\r\n    isPending: boolean;\r\n    isExpired: boolean;\r\n    confirmedAt?: string;\r\n  } | null> {\r\n    try {\r\n      const response = await this.api.get<any>(`/api/wallet/recharge/${orderNo}/status`);\r\n      \r\n      if (response?.success && response?.data) {\r\n        return {\r\n          status: response.data.status,\r\n          isConfirmed: response.data.is_confirmed,\r\n          isPending: response.data.is_pending,\r\n          isExpired: response.data.is_expired,\r\n          confirmedAt: response.data.confirmed_at\r\n        };\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error('Check recharge order status error:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ëº™Ë©¢ÂÖÖÂÄºË®ÇÂñÆÁãÄÊÖã\r\n   */\r\n  async pollRechargeOrderStatus(\r\n    orderNo: string,\r\n    intervalMs: number = 5000,\r\n    maxAttempts: number = 60\r\n  ): Promise<{ success: boolean; confirmed: boolean }> {\r\n    let attempts = 0;\r\n    \r\n    while (attempts < maxAttempts) {\r\n      const result = await this.checkRechargeOrderStatus(orderNo);\r\n      \r\n      if (!result) {\r\n        return { success: false, confirmed: false };\r\n      }\r\n      \r\n      if (result.isConfirmed) {\r\n        // Âà∑Êñ∞Èå¢ÂåÖÈ§òÈ°ç\r\n        await this.loadWallet();\r\n        return { success: true, confirmed: true };\r\n      }\r\n      \r\n      if (result.isExpired) {\r\n        return { success: false, confirmed: false };\r\n      }\r\n      \r\n      attempts++;\r\n      await new Promise(resolve => setTimeout(resolve, intervalMs));\r\n    }\r\n    \r\n    return { success: false, confirmed: false };\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÂÖÖÂÄºË®ÇÂñÆÁãÄÊÖãÊ®ôÁ±§\r\n   */\r\n  getRechargeStatusLabel(status: string): { text: string; color: string } {\r\n    const labels: Record<string, { text: string; color: string }> = {\r\n      pending: { text: 'ÂæÖÊîØ‰ªò', color: '#f59e0b' },\r\n      paid: { text: 'Â∑≤ÊîØ‰ªò', color: '#3b82f6' },\r\n      confirmed: { text: 'Â∑≤Âà∞Ë≥¨', color: '#22c55e' },\r\n      failed: { text: 'Â§±Êïó', color: '#ef4444' },\r\n      expired: { text: 'Â∑≤ÈÅéÊúü', color: '#9ca3af' },\r\n      refunded: { text: 'Â∑≤ÈÄÄÊ¨æ', color: '#8b5cf6' }\r\n    };\r\n    return labels[status] || { text: status, color: '#666' };\r\n  }\r\n\r\n  // ==================== Phase 2: Ê∂àË≤ªÊé•ÂÖ• ====================\r\n\r\n  /**\r\n   * Áµ±‰∏ÄÊ∂àË≤ªÊé•Âè£\r\n   */\r\n  async consumeUnified(options: {\r\n    amount: number;\r\n    category: string;\r\n    description: string;\r\n    referenceId?: string;\r\n    referenceType?: string;\r\n    orderId?: string;\r\n  }): Promise<{ \r\n    success: boolean; \r\n    transactionId?: string;\r\n    balanceBefore?: number;\r\n    balanceAfter?: number;\r\n    error?: string;\r\n  }> {\r\n    try {\r\n      const response = await this.api.post<any>('/api/wallet/consume/unified', {\r\n        amount: options.amount,\r\n        category: options.category,\r\n        description: options.description,\r\n        reference_id: options.referenceId,\r\n        reference_type: options.referenceType,\r\n        order_id: options.orderId\r\n      });\r\n      \r\n      if (response?.success) {\r\n        // Âà∑Êñ∞Èå¢ÂåÖ\r\n        await this.loadWallet();\r\n        \r\n        return {\r\n          success: true,\r\n          transactionId: response.data?.transaction_id,\r\n          balanceBefore: response.data?.balance_before,\r\n          balanceAfter: response.data?.balance_after\r\n        };\r\n      }\r\n      \r\n      return { success: false, error: response?.error || 'Ê∂àË≤ªÂ§±Êïó' };\r\n    } catch (error) {\r\n      console.error('Consume unified error:', error);\r\n      return { success: false, error: String(error) };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ê™¢Êü•Ê∂àË≤ªÈôêÈ°ç\r\n   */\r\n  async checkConsumeLimit(amount: number, category: string): Promise<{\r\n    canConsume: boolean;\r\n    limitPassed: boolean;\r\n    limitError?: string;\r\n    requiresPassword: boolean;\r\n    balanceSufficient: boolean;\r\n    balanceInfo: any;\r\n  }> {\r\n    try {\r\n      const response = await this.api.get<any>(\r\n        `/api/wallet/consume/limit?amount=${amount}&category=${category}`\r\n      );\r\n      \r\n      if (response?.success && response?.data) {\r\n        return {\r\n          canConsume: response.data.can_consume,\r\n          limitPassed: response.data.limit_passed,\r\n          limitError: response.data.limit_error,\r\n          requiresPassword: response.data.requires_password,\r\n          balanceSufficient: response.data.balance_sufficient,\r\n          balanceInfo: response.data.balance_info\r\n        };\r\n      }\r\n      \r\n      return {\r\n        canConsume: false,\r\n        limitPassed: false,\r\n        requiresPassword: false,\r\n        balanceSufficient: false,\r\n        balanceInfo: null\r\n      };\r\n    } catch (error) {\r\n      console.error('Check consume limit error:', error);\r\n      return {\r\n        canConsume: false,\r\n        limitPassed: false,\r\n        requiresPassword: false,\r\n        balanceSufficient: false,\r\n        balanceInfo: null\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÊ∂àË≤ªÊëòË¶Å\r\n   */\r\n  async getConsumeSummary(days: number = 30): Promise<any> {\r\n    try {\r\n      const response = await this.api.get<any>(`/api/wallet/consume/summary?days=${days}`);\r\n      \r\n      if (response?.success && response?.data) {\r\n        return response.data;\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error('Get consume summary error:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÈÄÄÊ¨æ\r\n   */\r\n  async refund(originalOrderId: string, amount?: number, reason?: string): Promise<{\r\n    success: boolean;\r\n    transactionId?: string;\r\n    refundAmount?: number;\r\n    error?: string;\r\n  }> {\r\n    try {\r\n      const response = await this.api.post<any>('/api/wallet/refund', {\r\n        original_order_id: originalOrderId,\r\n        amount,\r\n        reason\r\n      });\r\n      \r\n      if (response?.success) {\r\n        // Âà∑Êñ∞Èå¢ÂåÖ\r\n        await this.loadWallet();\r\n        \r\n        return {\r\n          success: true,\r\n          transactionId: response.data?.transaction_id,\r\n          refundAmount: response.data?.refund_amount\r\n        };\r\n      }\r\n      \r\n      return { success: false, error: response?.error || 'ÈÄÄÊ¨æÂ§±Êïó' };\r\n    } catch (error) {\r\n      console.error('Refund error:', error);\r\n      return { success: false, error: String(error) };\r\n    }\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
