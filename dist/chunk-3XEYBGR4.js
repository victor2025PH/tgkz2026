import{d as be,e as _e}from"./chunk-ZTUGMCWW.js";import{a as M,b as $,c as j,d as q}from"./chunk-E5JAB72H.js";import"./chunk-M2VKGXCG.js";import{b as O}from"./chunk-5UHDXNYI.js";import{a as xe,b as L}from"./chunk-7LTHB4NI.js";import{a as ve}from"./chunk-5HHK7KPZ.js";import{a as de,b as ue,c as R,f as P,k as ce,l as me,m as pe,t as z}from"./chunk-FZJM4IRN.js";import{b as ge}from"./chunk-CIOQN4KY.js";import"./chunk-B2KG2WNU.js";import"./chunk-TMNXXRHZ.js";import{f as se}from"./chunk-K5SU4RX2.js";import{$b as U,Aa as l,Bb as a,Cb as u,Db as S,Eb as ae,Ib as V,Jb as N,Kb as G,Na as A,R as h,Sb as oe,Tb as re,W as m,X as p,Y as ie,Zb as g,a as W,ac as F,b as te,cb as _,db as C,fb as K,ga as k,gb as T,hb as w,ia as ne,ib as y,jb as t,kb as i,lb as D,mb as f,nb as v,ob as H,pb as E,rb as x,sc as le,tb as d,uc as I,yb as B,zb as b}from"./chunk-PDD6YQ47.js";var Ce=(o,n)=>n.id,he=(o,n)=>n.type;function ke(o,n){o&1&&a(0," \u2713 ")}function Te(o,n){if(o&1&&a(0),o&2){let e=d().$index;S(" ",e+1," ")}}function we(o,n){if(o&1&&D(0,"div",22),o&2){let e=d().$implicit,r=d();b("bg-purple-500",r.isStepCompleted(e.id))("bg-slate-700",!r.isStepCompleted(e.id))}}function ye(o,n){if(o&1&&(t(0,"div",8)(1,"div",18)(2,"span",19),_(3,ke,1,0)(4,Te,1,1),i(),t(5,"span",20),a(6),i()(),_(7,we,1,4,"div",21),i()),o&2){let e=n.$implicit,r=n.$index,s=d();l(),b("bg-purple-500",s.currentStep()===e.id)("text-white",s.currentStep()===e.id)("bg-slate-700",s.currentStep()!==e.id&&s.isStepCompleted(e.id))("text-slate-300",s.currentStep()!==e.id&&s.isStepCompleted(e.id))("bg-slate-800",s.currentStep()!==e.id&&!s.isStepCompleted(e.id))("text-slate-500",s.currentStep()!==e.id&&!s.isStepCompleted(e.id)),l(),b("bg-white",s.currentStep()===e.id)("text-purple-500",s.currentStep()===e.id)("bg-emerald-500",s.currentStep()!==e.id&&s.isStepCompleted(e.id))("text-white",s.currentStep()!==e.id&&s.isStepCompleted(e.id))("bg-slate-600",s.currentStep()!==e.id&&!s.isStepCompleted(e.id)),l(),C(s.isStepCompleted(e.id)&&s.currentStep()!==e.id?3:4),l(3),u(e.label),l(),C(r<s.steps.length-1?7:-1)}}function De(o,n){if(o&1&&(t(0,"span",35),a(1),i()),o&2){let e=n.$implicit,r=d(3);l(),S(" ",r.getRoleLabel(e)," ")}}function Fe(o,n){if(o&1){let e=E();t(0,"button",28),x("click",function(){let s=m(e).$implicit,c=d(2);return p(c.selectGoal(s.type))}),t(1,"div",29)(2,"div",30),a(3),i(),t(4,"div",31)(5,"div",32),a(6),i(),t(7,"div",33),a(8),i(),t(9,"div",34),T(10,De,2,1,"span",35,K),i()()()()}if(o&2){let e=n.$implicit,r=d(2);b("border-purple-500",r.selectedGoal()===e.type)("bg-purple-500/20",r.selectedGoal()===e.type)("ring-2",r.selectedGoal()===e.type)("ring-purple-500/50",r.selectedGoal()===e.type)("border-slate-600",r.selectedGoal()!==e.type)("bg-slate-800/50",r.selectedGoal()!==e.type),l(3),u(e.icon),l(3),u(e.label),l(2),u(e.description),l(2),w(e.suggestedRoles)}}function Me(o,n){if(o&1&&(t(0,"div",10)(1,"div",23)(2,"h3",24),a(3,"\u60A8\u60F3\u9054\u6210\u4EC0\u9EBC\u76EE\u6A19\uFF1F"),i(),t(4,"p",25),a(5,"\u9078\u64C7\u76EE\u6A19\u5F8C\uFF0CAI \u5C07\u81EA\u52D5\u63A8\u85A6\u6700\u4F73\u914D\u7F6E"),i()(),t(6,"div",26),T(7,Fe,12,15,"button",27,he),i()()),o&2){let e=d();l(7),w(e.goalTypes)}}function Ae(o,n){if(o&1){let e=E();t(0,"div",10)(1,"div",23)(2,"h3",24),a(3,"\u9078\u64C7\u76EE\u6A19\u5BA2\u7FA4"),i(),t(4,"p",25),a(5,"\u6307\u5B9A\u9019\u6B21\u4EFB\u52D9\u8981\u89F8\u9054\u7684\u5BA2\u6236\u7FA4\u9AD4"),i()(),t(6,"div",26)(7,"button",36),x("click",function(){m(e);let s=d();return p(s.setAudienceSource("recent"))}),t(8,"div",37),a(9,"\u{1F550}"),i(),t(10,"div",38),a(11,"\u6700\u8FD1\u4E92\u52D5"),i(),t(12,"div",39),a(13,"7\u5929\u5167\u6709\u4E92\u52D5\u7684\u5BA2\u6236"),i()(),t(14,"button",36),x("click",function(){m(e);let s=d();return p(s.setAudienceSource("tags"))}),t(15,"div",37),a(16,"\u{1F3F7}\uFE0F"),i(),t(17,"div",38),a(18,"\u6309\u6A19\u7C64\u7BE9\u9078"),i(),t(19,"div",39),a(20,"\u9078\u64C7\u7279\u5B9A\u6A19\u7C64\u7684\u5BA2\u6236"),i()(),t(21,"button",36),x("click",function(){m(e);let s=d();return p(s.setAudienceSource("group"))}),t(22,"div",37),a(23,"\u{1F465}"),i(),t(24,"div",38),a(25,"\u5F9E\u7FA4\u7D44\u9078\u64C7"),i(),t(26,"div",39),a(27,"\u9078\u64C7\u7279\u5B9A\u7FA4\u7D44\u7684\u6210\u54E1"),i()(),t(28,"button",36),x("click",function(){m(e);let s=d();return p(s.setAudienceSource("import"))}),t(29,"div",37),a(30,"\u{1F4E5}"),i(),t(31,"div",38),a(32,"\u5C0E\u5165\u5BA2\u6236"),i(),t(33,"div",39),a(34,"\u4E0A\u50B3\u5BA2\u6236\u5217\u8868\u6216\u624B\u52D5\u6DFB\u52A0"),i()()(),t(35,"div",40)(36,"div",41)(37,"span",42),a(38,"\u610F\u5411\u5206\u6578\u9580\u6ABB"),i(),t(39,"span",43),a(40),i()(),t(41,"input",44),x("input",function(s){m(e);let c=d();return p(c.setIntentScoreMin(s.target.valueAsNumber))}),i(),t(42,"div",45)(43,"span"),a(44,"\u4F4E\u610F\u5411"),i(),t(45,"span"),a(46,"\u9AD8\u610F\u5411"),i()()(),t(47,"div",46)(48,"div",47)(49,"span",5),a(50,"\u{1F465}"),i(),t(51,"div")(52,"div",38),a(53,"\u9810\u4F30\u89F8\u9054\u4EBA\u6578"),i(),t(54,"div",48),a(55,"\u7B26\u5408\u689D\u4EF6\u7684\u6F5B\u5728\u5BA2\u6236"),i()()(),t(56,"div",49),a(57),i()()()}if(o&2){let e=d();l(7),b("border-cyan-500",e.audienceSource()==="recent")("bg-cyan-500/20",e.audienceSource()==="recent")("border-slate-600",e.audienceSource()!=="recent")("bg-slate-800/50",e.audienceSource()!=="recent"),l(7),b("border-cyan-500",e.audienceSource()==="tags")("bg-cyan-500/20",e.audienceSource()==="tags")("border-slate-600",e.audienceSource()!=="tags")("bg-slate-800/50",e.audienceSource()!=="tags"),l(7),b("border-cyan-500",e.audienceSource()==="group")("bg-cyan-500/20",e.audienceSource()==="group")("border-slate-600",e.audienceSource()!=="group")("bg-slate-800/50",e.audienceSource()!=="group"),l(7),b("border-cyan-500",e.audienceSource()==="import")("bg-cyan-500/20",e.audienceSource()==="import")("border-slate-600",e.audienceSource()!=="import")("bg-slate-800/50",e.audienceSource()!=="import"),l(12),S("\u2265 ",e.intentScoreMin(),"\u5206"),l(),y("value",e.intentScoreMin()),l(16),u(e.estimatedAudience())}}function Ie(o,n){if(o&1){let e=E();t(0,"button",62),x("click",function(){let s=m(e).$implicit,c=d(2);return p(c.setExecutionMode(s.id))}),t(1,"div",63),a(2),i(),t(3,"div",64),a(4),i(),t(5,"div",39),a(6),i()()}if(o&2){let e=n.$implicit,r=d(2);b("border-purple-500",r.selectedMode()===e.id)("bg-purple-500/20",r.selectedMode()===e.id)("border-slate-600",r.selectedMode()!==e.id)("bg-slate-700/50",r.selectedMode()!==e.id),l(2),u(e.icon),l(2),u(e.label),l(2),u(e.description)}}function Be(o,n){if(o&1&&(t(0,"div",54)(1,"span",65),a(2),i(),t(3,"span",66),a(4),i()()),o&2){let e=n.$implicit,r=d(2);l(2),u(r.getRoleIcon(e)),l(2),u(r.getRoleLabel(e))}}function Ve(o,n){o&1&&(t(0,"span",5),a(1,"\u2705"),i(),t(2,"div")(3,"div",67),a(4,"AI \u6A21\u578B\u5DF2\u5C31\u7DD2"),i(),t(5,"div",48),a(6,"\u4F7F\u7528\u667A\u80FD\u5F15\u64CE\u4E2D\u914D\u7F6E\u7684\u9ED8\u8A8D\u6A21\u578B"),i()())}function Ne(o,n){o&1&&(t(0,"span",5),a(1,"\u26A0\uFE0F"),i(),t(2,"div")(3,"div",68),a(4,"\u672A\u914D\u7F6E AI \u6A21\u578B"),i(),t(5,"div",48),a(6,"\u8ACB\u5148\u5728\u667A\u80FD\u5F15\u64CE\u4E2D\u914D\u7F6E AI \u6A21\u578B"),i()())}function Ge(o,n){if(o&1){let e=E();t(0,"div",10)(1,"div",23)(2,"h3",24),a(3,"\u78BA\u8A8D AI \u914D\u7F6E"),i(),t(4,"p",25),a(5,"\u6839\u64DA\u76EE\u6A19\u81EA\u52D5\u63A8\u85A6\uFF0C\u60A8\u53EF\u4EE5\u8ABF\u6574"),i()(),t(6,"div",40)(7,"div",33),a(8,"\u57F7\u884C\u6A21\u5F0F"),i(),t(9,"div",50),T(10,Ie,7,11,"button",51,Ce),i()(),t(12,"div",40)(13,"div",41)(14,"span",48),a(15,"AI \u63A8\u85A6\u89D2\u8272\u7D44\u5408"),i(),t(16,"span",52),a(17),i()(),t(18,"div",53),T(19,Be,5,2,"div",54,K),i()(),t(21,"div",55)(22,"div",47),_(23,Ve,7,0)(24,Ne,7,0),i()(),t(25,"details",56)(26,"summary",57),a(27," \u2699\uFE0F \u9AD8\u7D1A\u9078\u9805 "),i(),t(28,"div",58)(29,"div",12)(30,"span",48),a(31,"\u555F\u7528 AI \u6258\u7BA1"),i(),t(32,"button",59),x("click",function(){m(e);let s=d();return p(s.toggleAiHosting())}),D(33,"span",60),i()(),t(34,"div",12)(35,"span",48),a(36,"\u81EA\u52D5\u554F\u5019\u65B0\u5BA2\u6236"),i(),t(37,"input",61),G("ngModelChange",function(s){m(e);let c=d();return N(c.autoGreeting,s)||(c.autoGreeting=s),p(s)}),i()(),t(38,"div",12)(39,"span",48),a(40,"\u81EA\u52D5\u56DE\u8986\u79C1\u4FE1"),i(),t(41,"input",61),G("ngModelChange",function(s){m(e);let c=d();return N(c.autoReply,s)||(c.autoReply=s),p(s)}),i()()()()()}if(o&2){let e=d();l(10),w(e.executionModes),l(7),S("\u57FA\u65BC\u300C",e.getGoalLabel(e.selectedGoal()),"\u300D\u76EE\u6A19"),l(2),w(e.suggestedRoles()),l(2),b("bg-emerald-500/10",e.aiConnected())("border-emerald-500/30",e.aiConnected())("bg-amber-500/10",!e.aiConnected())("border-amber-500/30",!e.aiConnected())("border",!0),l(2),C(e.aiConnected()?23:24),l(9),b("bg-cyan-500",e.aiHostingEnabled())("bg-slate-600",!e.aiHostingEnabled()),l(),b("translate-x-6",e.aiHostingEnabled()),l(4),V("ngModel",e.autoGreeting),l(4),V("ngModel",e.autoReply)}}function ze(o,n){if(o&1){let e=E();t(0,"div",10)(1,"div",23)(2,"h3",24),a(3,"\u78BA\u8A8D\u4EFB\u52D9\u914D\u7F6E"),i(),t(4,"p",25),a(5,"\u6AA2\u67E5\u914D\u7F6E\u5F8C\u9EDE\u64CA\u555F\u52D5"),i()(),t(6,"div",69)(7,"div",70)(8,"div")(9,"div",71),a(10,"\u71DF\u92B7\u76EE\u6A19"),i(),t(11,"div",7)(12,"span",5),a(13),i(),t(14,"span",72),a(15),i()()(),t(16,"div")(17,"div",71),a(18,"\u76EE\u6A19\u4EBA\u6578"),i(),t(19,"div",73),a(20),i()(),t(21,"div")(22,"div",71),a(23,"\u57F7\u884C\u6A21\u5F0F"),i(),t(24,"div",74),a(25),i()(),t(26,"div")(27,"div",71),a(28,"\u89D2\u8272\u6578\u91CF"),i(),t(29,"div",74),a(30),i()()()(),t(31,"div",40)(32,"label",75),a(33,"\u4EFB\u52D9\u540D\u7A31"),i(),t(34,"input",76),G("ngModelChange",function(s){m(e);let c=d();return N(c.taskName,s)||(c.taskName=s),p(s)}),i()(),t(35,"div",77)(36,"div",78)(37,"div",79),a(38),i(),t(39,"div",39),a(40,"\u9810\u4F30\u63A5\u89F8"),i()(),t(41,"div",78)(42,"div",73),a(43),i(),t(44,"div",39),a(45,"\u9810\u4F30\u56DE\u8986"),i()(),t(46,"div",78)(47,"div",80),a(48),i(),t(49,"div",39),a(50,"\u9810\u4F30\u8F49\u5316"),i()()(),t(51,"div",81)(52,"input",82),G("ngModelChange",function(s){m(e);let c=d();return N(c.saveAsTemplate,s)||(c.saveAsTemplate=s),p(s)}),i(),t(53,"label",83),a(54,"\u4FDD\u5B58\u6B64\u914D\u7F6E\u70BA\u6A21\u677F\uFF0C\u65B9\u4FBF\u4E0B\u6B21\u5FEB\u901F\u4F7F\u7528"),i()()()}if(o&2){let e=d();l(13),u(e.getGoalIcon(e.selectedGoal())),l(2),u(e.getGoalLabel(e.selectedGoal())),l(5),S("",e.estimatedAudience()," \u4EBA"),l(5),u(e.getModeLabel(e.selectedMode())),l(5),S("",e.suggestedRoles().length," \u500B\u89D2\u8272"),l(4),V("ngModel",e.taskName),y("placeholder",e.defaultTaskName()),l(4),u(e.estimatedContacts()),l(5),u(e.estimatedReplies()),l(5),u(e.estimatedConversions()),l(4),V("ngModel",e.saveAsTemplate)}}function We(o,n){if(o&1){let e=E();t(0,"button",84),x("click",function(){m(e);let s=d();return p(s.nextStep())}),a(1," \u4E0B\u4E00\u6B65 \u2192 "),i()}if(o&2){let e=d();y("disabled",!e.canProceed())}}function He(o,n){o&1&&(t(0,"span",86),a(1,"\u27F3"),i(),a(2," \u555F\u52D5\u4E2D... "))}function Re(o,n){o&1&&(t(0,"span"),a(1,"\u{1F680}"),i(),a(2," \u7ACB\u5373\u555F\u52D5 "))}function Pe(o,n){if(o&1){let e=E();t(0,"button",85),x("click",function(){m(e);let s=d();return p(s.launchTask())}),_(1,He,3,0)(2,Re,3,0),i()}if(o&2){let e=d();y("disabled",e.isLaunching()),l(),C(e.isLaunching()?1:2)}}var J=class o{constructor(){this.taskService=h($);this.stateService=h(q);this.aiService=h(j);this.toast=h(L);this.initialGoal=F(null);this.close=U();this.taskCreated=U();this.currentStep=k("goal");this.selectedGoal=k(null);this.audienceSource=k("recent");this.intentScoreMin=k(50);this.selectedMode=k("hybrid");this.isLaunching=k(!1);this.taskName="";this.autoGreeting=!0;this.autoReply=!0;this.saveAsTemplate=!1;this.steps=[{id:"goal",label:"\u9078\u64C7\u76EE\u6A19"},{id:"audience",label:"\u9078\u64C7\u5BA2\u7FA4"},{id:"config",label:"AI \u914D\u7F6E"},{id:"preview",label:"\u78BA\u8A8D\u555F\u52D5"}];this.goalTypes=Object.entries(M).map(([n,e])=>W({type:n},e));this.executionModes=[{id:"scripted",icon:"\u{1F4DC}",label:"\u5287\u672C\u6A21\u5F0F",description:"\u6309\u9810\u8A2D\u6D41\u7A0B"},{id:"hybrid",icon:"\u{1F504}",label:"\u6DF7\u5408\u6A21\u5F0F",description:"\u63A8\u85A6"},{id:"scriptless",icon:"\u{1F916}",label:"\u7121\u5287\u672C",description:"AI \u5373\u8208"}];this.aiConnected=g(()=>this.aiService.isConnected());this.aiHostingEnabled=g(()=>this.stateService.aiHostingEnabled());this.suggestedRoles=g(()=>{let n=this.selectedGoal();return n?M[n].suggestedRoles:[]});this.estimatedAudience=g(()=>{let n=this.audienceSource()==="recent"?150:this.audienceSource()==="tags"?80:this.audienceSource()==="group"?200:50,e=(100-this.intentScoreMin())/100;return Math.floor(n*e)+10});this.estimatedContacts=g(()=>Math.floor(this.estimatedAudience()*.8));this.estimatedReplies=g(()=>Math.floor(this.estimatedContacts()*.35));this.estimatedConversions=g(()=>Math.floor(this.estimatedReplies()*.25));this.defaultTaskName=g(()=>{let n=this.selectedGoal();if(!n)return"\u65B0\u71DF\u92B7\u4EFB\u52D9";let e=new Date().toLocaleDateString("zh-TW",{month:"short",day:"numeric"});return`${M[n].label} - ${e}`});let n=this.initialGoal();n&&this.selectedGoal.set(n)}isStepCompleted(n){let e=["goal","audience","config","preview"],r=e.indexOf(this.currentStep());return e.indexOf(n)<r}canProceed(){switch(this.currentStep()){case"goal":return this.selectedGoal()!==null;case"audience":return this.audienceSource()!==null;case"config":return!0;case"preview":return!0;default:return!1}}nextStep(){let n=["goal","audience","config","preview"],e=n.indexOf(this.currentStep());e<n.length-1&&this.currentStep.set(n[e+1])}previousStep(){let n=["goal","audience","config","preview"],e=n.indexOf(this.currentStep());e>0&&this.currentStep.set(n[e-1])}selectGoal(n){this.selectedGoal.set(n),this.selectedMode.set(M[n].suggestedMode)}setAudienceSource(n){this.audienceSource.set(n)}setIntentScoreMin(n){this.intentScoreMin.set(n)}setExecutionMode(n){this.selectedMode.set(n)}toggleAiHosting(){let n=!this.stateService.aiHostingEnabled();this.stateService.setAiHostingEnabled(n)}getRoleLabel(n){return{expert:"\u7522\u54C1\u5C08\u5BB6",satisfied_customer:"\u6EFF\u610F\u8001\u5BA2\u6236",support:"\u5BA2\u670D\u52A9\u7406",manager:"\u7D93\u7406",newbie:"\u597D\u5947\u65B0\u4EBA",hesitant:"\u7336\u8C6B\u8005",sales:"\u92B7\u552E",callback:"\u56DE\u8A2A\u5C08\u54E1"}[n]||n}getRoleIcon(n){return{expert:"\u{1F468}\u200D\u{1F4BC}",satisfied_customer:"\u{1F60A}",support:"\u{1F469}\u200D\u{1F4BB}",manager:"\u{1F454}",newbie:"\u{1F64B}",hesitant:"\u{1F914}",sales:"\u{1F4BC}",callback:"\u{1F4DE}"}[n]||"\u{1F3AD}"}getGoalLabel(n){return M[n]?.label||n}getGoalIcon(n){return M[n]?.icon||"\u{1F3AF}"}getModeLabel(n){return{scripted:"\u5287\u672C\u6A21\u5F0F",hybrid:"\u6DF7\u5408\u6A21\u5F0F",scriptless:"\u7121\u5287\u672C\u6A21\u5F0F"}[n]}async launchTask(){this.isLaunching.set(!0);try{let n=this.selectedGoal();if(!n)return;let e=this.taskName||this.defaultTaskName(),r=await this.taskService.createTask({name:e,goalType:n,executionMode:this.selectedMode(),targetCriteria:{intentScoreMin:this.intentScoreMin(),sources:[this.audienceSource()]}});r?(this.taskService.startTask(r),this.saveAsTemplate&&this.saveTaskTemplate(e,n),this.toast.success(`\u{1F680} \u4EFB\u52D9\u300C${e}\u300D\u5DF2\u555F\u52D5\uFF01`),this.taskCreated.emit(r),this.close.emit()):this.toast.error("\u5275\u5EFA\u4EFB\u52D9\u5931\u6557")}catch{this.toast.error("\u555F\u52D5\u5931\u6557\uFF0C\u8ACB\u91CD\u8A66")}finally{this.isLaunching.set(!1)}}saveTaskTemplate(n,e){let r=JSON.parse(localStorage.getItem("task_templates")||"[]");r.push({id:Date.now().toString(),name:`${n} \u6A21\u677F`,goalType:e,executionMode:this.selectedMode(),audienceSource:this.audienceSource(),intentScoreMin:this.intentScoreMin(),createdAt:new Date().toISOString()}),localStorage.setItem("task_templates",JSON.stringify(r))}onBackdropClick(n){n.target===n.currentTarget&&this.close.emit()}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=A({type:o,selectors:[["app-task-wizard"]],inputs:{initialGoal:[1,"initialGoal"]},outputs:{close:"close",taskCreated:"taskCreated"},decls:27,vars:3,consts:[[1,"task-wizard","fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm",3,"click"],[1,"wizard-content","w-full","max-w-3xl","bg-slate-900","rounded-2xl","border","border-slate-700/50","shadow-2xl","overflow-hidden",3,"click"],[1,"wizard-header","p-6","border-b","border-slate-700/50","bg-gradient-to-r","from-purple-500/10","to-pink-500/10"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-xl","font-bold","text-white","flex","items-center","gap-3"],[1,"text-2xl"],[1,"text-slate-400","hover:text-white","transition-colors",3,"click"],[1,"flex","items-center","gap-2"],[1,"flex","items-center"],[1,"wizard-body","p-6","max-h-[60vh]","overflow-y-auto"],[1,"space-y-6"],[1,"wizard-footer","p-6","border-t","border-slate-700/50","bg-slate-800/50"],[1,"flex","items-center","justify-between"],[1,"px-6","py-3","text-slate-400","hover:text-white","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex","gap-3"],[1,"px-6","py-3","bg-slate-700","text-slate-300","rounded-xl","hover:bg-slate-600","transition-colors",3,"click"],[1,"px-8","py-3","bg-gradient-to-r","from-purple-500","to-pink-500","text-white","font-medium","rounded-xl","hover:opacity-90","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"px-8","py-3","bg-gradient-to-r","from-emerald-500","to-cyan-500","text-white","font-medium","rounded-xl","hover:opacity-90","transition-all","disabled:opacity-50","flex","items-center","gap-2",3,"disabled"],[1,"flex","items-center","gap-2","px-3","py-1.5","rounded-full","transition-all"],[1,"w-6","h-6","rounded-full","flex","items-center","justify-center","text-sm","font-medium"],[1,"text-sm","font-medium"],[1,"w-8","h-0.5","mx-2",3,"bg-purple-500","bg-slate-700"],[1,"w-8","h-0.5","mx-2"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-white","mb-2"],[1,"text-slate-400","text-sm"],[1,"grid","grid-cols-2","gap-4"],[1,"p-6","rounded-xl","border-2","transition-all","text-left","hover:scale-[1.02]",3,"border-purple-500","bg-purple-500/20","ring-2","ring-purple-500/50","border-slate-600","bg-slate-800/50"],[1,"p-6","rounded-xl","border-2","transition-all","text-left","hover:scale-[1.02]",3,"click"],[1,"flex","items-start","gap-4"],[1,"text-4xl"],[1,"flex-1"],[1,"font-semibold","text-white","text-lg","mb-1"],[1,"text-sm","text-slate-400","mb-3"],[1,"flex","flex-wrap","gap-1"],[1,"px-2","py-0.5","text-xs","bg-slate-700","text-slate-300","rounded"],[1,"p-4","rounded-xl","border","transition-all","text-left",3,"click"],[1,"text-2xl","mb-2"],[1,"font-medium","text-white"],[1,"text-xs","text-slate-400"],[1,"bg-slate-800/50","rounded-xl","p-4","border","border-slate-700/50"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","text-white","font-medium"],[1,"text-cyan-400","font-bold"],["type","range","min","0","max","100","step","10",1,"w-full",3,"input","value"],[1,"flex","justify-between","text-xs","text-slate-500","mt-1"],[1,"flex","items-center","justify-between","p-4","bg-emerald-500/10","border","border-emerald-500/30","rounded-xl"],[1,"flex","items-center","gap-3"],[1,"text-sm","text-slate-400"],[1,"text-3xl","font-bold","text-emerald-400"],[1,"grid","grid-cols-3","gap-3"],[1,"p-3","rounded-lg","border","transition-all","text-center",3,"border-purple-500","bg-purple-500/20","border-slate-600","bg-slate-700/50"],[1,"text-xs","text-purple-400"],[1,"flex","flex-wrap","gap-2"],[1,"flex","items-center","gap-2","px-3","py-2","bg-purple-500/20","border","border-purple-500/30","rounded-lg"],[1,"p-4","rounded-xl"],[1,"bg-slate-800/30","rounded-xl","border","border-slate-700/50"],[1,"p-4","cursor-pointer","text-slate-400","hover:text-white","transition-colors"],[1,"p-4","pt-0","space-y-4"],[1,"relative","w-12","h-6","rounded-full","transition-all",3,"click"],[1,"absolute","top-0.5","left-0.5","w-5","h-5","bg-white","rounded-full","shadow","transition-transform"],["type","checkbox",1,"w-5","h-5","rounded",3,"ngModelChange","ngModel"],[1,"p-3","rounded-lg","border","transition-all","text-center",3,"click"],[1,"text-xl","mb-1"],[1,"text-sm","font-medium","text-white"],[1,"text-lg"],[1,"text-sm","text-white"],[1,"font-medium","text-emerald-400"],[1,"font-medium","text-amber-400"],[1,"bg-gradient-to-r","from-purple-500/20","to-pink-500/20","rounded-xl","p-6","border","border-purple-500/30"],[1,"grid","grid-cols-2","gap-6"],[1,"text-sm","text-slate-400","mb-1"],[1,"text-lg","font-semibold","text-white"],[1,"text-2xl","font-bold","text-cyan-400"],[1,"text-white"],[1,"text-sm","text-slate-400","block","mb-2"],["type","text",1,"w-full","px-4","py-3","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-400",3,"ngModelChange","ngModel","placeholder"],[1,"grid","grid-cols-3","gap-4"],[1,"bg-slate-800/50","rounded-xl","p-4","border","border-slate-700/50","text-center"],[1,"text-2xl","font-bold","text-emerald-400"],[1,"text-2xl","font-bold","text-purple-400"],[1,"flex","items-center","gap-3","p-4","bg-slate-800/30","rounded-xl","border","border-slate-700/50"],["type","checkbox","id","saveTemplate",1,"w-5","h-5","rounded",3,"ngModelChange","ngModel"],["for","saveTemplate",1,"text-sm","text-slate-300"],[1,"px-8","py-3","bg-gradient-to-r","from-purple-500","to-pink-500","text-white","font-medium","rounded-xl","hover:opacity-90","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"px-8","py-3","bg-gradient-to-r","from-emerald-500","to-cyan-500","text-white","font-medium","rounded-xl","hover:opacity-90","transition-all","disabled:opacity-50","flex","items-center","gap-2",3,"click","disabled"],[1,"animate-spin"]],template:function(e,r){if(e&1&&(t(0,"div",0),x("click",function(c){return r.onBackdropClick(c)}),t(1,"div",1),x("click",function(c){return c.stopPropagation()}),t(2,"div",2)(3,"div",3)(4,"h2",4)(5,"span",5),a(6,"\u2728"),i(),a(7," \u5275\u5EFA\u71DF\u92B7\u4EFB\u52D9 "),i(),t(8,"button",6),x("click",function(){return r.close.emit()}),a(9," \u2715 "),i()(),t(10,"div",7),T(11,ye,8,25,"div",8,Ce),i()(),t(13,"div",9),_(14,Me,9,0,"div",10)(15,Ae,58,35,"div",10)(16,Ge,42,20,"div",10)(17,ze,55,11,"div",10),i(),t(18,"div",11)(19,"div",12)(20,"button",13),x("click",function(){return r.previousStep()}),a(21," \u2190 \u4E0A\u4E00\u6B65 "),i(),t(22,"div",14)(23,"button",15),x("click",function(){return r.close.emit()}),a(24," \u53D6\u6D88 "),i(),_(25,We,2,1,"button",16)(26,Pe,3,2,"button",17),i()()()()()),e&2){let s;l(11),w(r.steps),l(3),C((s=r.currentStep())==="goal"?14:s==="audience"?15:s==="config"?16:s==="preview"?17:-1),l(6),y("disabled",r.currentStep()==="goal"),l(5),C(r.currentStep()!=="preview"?25:26)}},dependencies:[I,z,ue,de,R,P],encapsulation:2})}};var Le=(o,n)=>n.label,Oe=(o,n)=>n.stage;function $e(o,n){if(o&1&&(f(0,"span",13),a(1),v()),o&2){let e=d(2);l(),u(e.period())}}function je(o,n){if(o&1&&(f(0,"div",1)(1,"h3",12)(2,"span"),a(3,"\u{1F4CA}"),v(),a(4," \u8F49\u5316\u6F0F\u6597 "),v(),_(5,$e,2,1,"span",13),v()),o&2){let e=d();l(5),C(e.period()?5:-1)}}function qe(o,n){if(o&1&&(f(0,"div",22)(1,"div",25),a(2),v(),f(3,"div",26),a(4,"\u8F49\u5316\u7387"),v()()),o&2){let e=d().$index,r=d();l(),B("color",r.getConversionRateColor(r.getStageConversionRate(e))),l(),S(" ",r.getStageConversionRate(e),"% ")}}function Je(o,n){o&1&&H(0,"div",23)}function Qe(o,n){o&1&&(f(0,"div",24),ie(),f(1,"svg",27),H(2,"path",28),v()())}function Ye(o,n){if(o&1&&(f(0,"div",3)(1,"div",14)(2,"div",15),H(3,"div",16),f(4,"div",17)(5,"div",18)(6,"span",19),a(7),v(),f(8,"span",20),a(9),v()(),f(10,"span",21),a(11),oe(12,"number"),v()()(),_(13,qe,5,3,"div",22)(14,Je,1,0,"div",23),v(),_(15,Qe,3,0,"div",24),v()),o&2){let e=n.$implicit,r=n.$index,s=d();l(2),B("background","linear-gradient(to right, "+e.color+"20, "+e.color+"40)"),l(),B("width",s.getBarWidth(e.value),"%")("background","linear-gradient(to right, "+e.color+", "+e.color+"cc)"),l(4),u(e.icon),l(2),u(e.label),l(2),u(re(12,11,e.value)),l(2),C(r>0?13:14),l(2),C(r<s.funnelStages().length-1?15:-1)}}function Ke(o,n){if(o&1&&(f(0,"div",31)(1,"span",32),a(2),v(),f(3,"div")(4,"div",33),a(5),v(),f(6,"div",8),a(7),v()()()),o&2){let e=n.$implicit;b("bg-emerald-500/10",e.type==="positive")("border-emerald-500/30",e.type==="positive")("bg-amber-500/10",e.type==="warning")("border-amber-500/30",e.type==="warning")("bg-red-500/10",e.type==="negative")("border-red-500/30",e.type==="negative")("border",!0),l(2),u(e.icon),l(3),u(e.title),l(2),u(e.description)}}function Ue(o,n){if(o&1&&(f(0,"div",11)(1,"h4",29),a(2,"\u968E\u6BB5\u5206\u6790"),v(),T(3,Ke,8,17,"div",30,Oe),v()),o&2){let e=d();l(3),w(e.stageInsights())}}var Q=class o{constructor(){this.targets=F(0);this.contacted=F(0);this.replied=F(0);this.converted=F(0);this.showTitle=F(!0);this.showAnalysis=F(!0);this.period=F("");this.previousConversionRate=F(0);this.avgConvertTime=F("2.3 \u5929");this.funnelStages=g(()=>[{label:"\u76EE\u6A19\u5BA2\u6236",value:this.targets(),color:"#8b5cf6",icon:"\u{1F3AF}"},{label:"\u5DF2\u63A5\u89F8",value:this.contacted(),color:"#06b6d4",icon:"\u{1F44B}"},{label:"\u5DF2\u56DE\u8986",value:this.replied(),color:"#10b981",icon:"\u{1F4AC}"},{label:"\u5DF2\u8F49\u5316",value:this.converted(),color:"#f59e0b",icon:"\u2728"}]);this.maxValue=g(()=>Math.max(this.targets(),1));this.overallConversionRate=g(()=>this.contacted()===0?0:Math.round(this.converted()/this.contacted()*100));this.avgTimeToConvert=g(()=>this.avgConvertTime());this.conversionTrend=g(()=>{let n=this.overallConversionRate(),e=this.previousConversionRate();return e===0?0:Math.round((n-e)/e*100)});this.stageInsights=g(()=>{let n=[],e=this.targets()>0?this.contacted()/this.targets()*100:0;e>=80?n.push({stage:"contact",type:"positive",icon:"\u2705",title:"\u63A5\u89F8\u7387\u512A\u79C0",description:`${e.toFixed(0)}% \u7684\u76EE\u6A19\u5BA2\u6236\u5DF2\u88AB\u63A5\u89F8`}):e<50&&n.push({stage:"contact",type:"warning",icon:"\u26A0\uFE0F",title:"\u63A5\u89F8\u7387\u504F\u4F4E",description:"\u5EFA\u8B70\u589E\u52A0\u767C\u9001\u5E33\u865F\u6216\u5EF6\u9577\u57F7\u884C\u6642\u9593"});let r=this.contacted()>0?this.replied()/this.contacted()*100:0;r>=30?n.push({stage:"reply",type:"positive",icon:"\u{1F4AC}",title:"\u56DE\u8986\u7387\u826F\u597D",description:"\u5BA2\u6236\u4E92\u52D5\u7A4D\u6975\uFF0C\u7E7C\u7E8C\u4FDD\u6301"}):r<15&&n.push({stage:"reply",type:"negative",icon:"\u{1F4C9}",title:"\u56DE\u8986\u7387\u9700\u63D0\u5347",description:"\u5EFA\u8B70\u512A\u5316\u958B\u5834\u767D\u6216\u8ABF\u6574 AI \u4EBA\u683C"});let s=this.replied()>0?this.converted()/this.replied()*100:0;return s>=25?n.push({stage:"conversion",type:"positive",icon:"\u{1F389}",title:"\u8F49\u5316\u7387\u51FA\u8272",description:"\u7576\u524D\u7B56\u7565\u975E\u5E38\u6709\u6548"}):s<10&&n.push({stage:"conversion",type:"warning",icon:"\u{1F527}",title:"\u8F49\u5316\u7387\u6709\u63D0\u5347\u7A7A\u9593",description:"\u8003\u616E\u5F15\u5165\u66F4\u591A\u89D2\u8272\u6216\u8ABF\u6574\u5287\u672C"}),n})}getBarWidth(n){return Math.max(10,n/this.maxValue()*100)}getStageConversionRate(n){let e=this.funnelStages();return n===0||e[n-1].value===0?0:Math.round(e[n].value/e[n-1].value*100)}getConversionRateColor(n){return n>=50?"#10b981":n>=30?"#06b6d4":n>=15?"#f59e0b":"#ef4444"}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=A({type:o,selectors:[["app-conversion-funnel"]],inputs:{targets:[1,"targets"],contacted:[1,"contacted"],replied:[1,"replied"],converted:[1,"converted"],showTitle:[1,"showTitle"],showAnalysis:[1,"showAnalysis"],period:[1,"period"],previousConversionRate:[1,"previousConversionRate"],avgConvertTime:[1,"avgConvertTime"]},decls:23,vars:12,consts:[[1,"conversion-funnel"],[1,"flex","items-center","justify-between","mb-6"],[1,"funnel-chart","relative"],[1,"funnel-stage","mb-3"],[1,"mt-6","pt-6","border-t","border-slate-700/50"],[1,"grid","grid-cols-3","gap-4"],[1,"text-center"],[1,"text-2xl","font-bold","text-purple-400"],[1,"text-xs","text-slate-400"],[1,"text-2xl","font-bold","text-cyan-400"],[1,"text-2xl","font-bold"],[1,"mt-6","space-y-3"],[1,"text-lg","font-semibold","text-white","flex","items-center","gap-2"],[1,"text-sm","text-slate-400"],[1,"flex","items-center","gap-4"],[1,"funnel-bar","flex-1","relative","h-14","rounded-lg","overflow-hidden"],[1,"absolute","inset-y-0","left-0","rounded-lg","transition-all","duration-500"],[1,"absolute","inset-0","flex","items-center","justify-between","px-4"],[1,"flex","items-center","gap-3","z-10"],[1,"text-xl"],[1,"font-medium","text-white"],[1,"text-lg","font-bold","text-white","z-10"],[1,"w-20","text-right"],[1,"w-20"],[1,"flex","items-center","justify-center","h-6","text-slate-600"],[1,"text-lg","font-bold"],[1,"text-xs","text-slate-500"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M12 4L12 20M12 20L6 14M12 20L18 14","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"text-sm","font-medium","text-slate-400"],[1,"flex","items-start","gap-3","p-3","rounded-lg",3,"bg-emerald-500/10","border-emerald-500/30","bg-amber-500/10","border-amber-500/30","bg-red-500/10","border-red-500/30","border"],[1,"flex","items-start","gap-3","p-3","rounded-lg"],[1,"text-lg"],[1,"font-medium","text-white","text-sm"]],template:function(e,r){e&1&&(f(0,"div",0),_(1,je,6,1,"div",1),f(2,"div",2),T(3,Ye,16,13,"div",3,Le),v(),f(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7),a(9),v(),f(10,"div",8),a(11,"\u7E3D\u9AD4\u8F49\u5316\u7387"),v()(),f(12,"div",6)(13,"div",9),a(14),v(),f(15,"div",8),a(16,"\u5E73\u5747\u8F49\u5316\u6642\u9593"),v()(),f(17,"div",6)(18,"div",10),a(19),v(),f(20,"div",8),a(21,"\u8F03\u4E0A\u671F"),v()()()(),_(22,Ue,5,0,"div",11),v()),e&2&&(l(),C(r.showTitle()?1:-1),l(2),w(r.funnelStages()),l(6),S("",r.overallConversionRate(),"%"),l(5),u(r.avgTimeToConvert()),l(4),b("text-emerald-400",r.conversionTrend()>0)("text-red-400",r.conversionTrend()<0)("text-slate-400",r.conversionTrend()===0),l(),ae(" ",r.conversionTrend()>0?"+":"","",r.conversionTrend(),"% "),l(3),C(r.showAnalysis()?22:-1))},dependencies:[I,le],styles:[".funnel-bar[_ngcontent-%COMP%]{box-shadow:inset 0 2px 4px #0000001a}.funnel-stage[_ngcontent-%COMP%]:first-child   .funnel-bar[_ngcontent-%COMP%]{clip-path:polygon(0 0,100% 0,98% 100%,2% 100%)}.funnel-stage[_ngcontent-%COMP%]:last-child   .funnel-bar[_ngcontent-%COMP%]{clip-path:polygon(5% 0,95% 0,100% 100%,0 100%)}.funnel-stage[_ngcontent-%COMP%]:not(:first-child):not(:last-child)   .funnel-bar[_ngcontent-%COMP%]{clip-path:polygon(2% 0,98% 0,96% 100%,4% 100%)}"]})}};var ee=(o,n)=>n.id,fe=(o,n)=>n.type,Xe=(o,n)=>n.label;function Ze(o,n){o&1&&(t(0,"span",7),D(1,"span",25),a(2," AI \u5C31\u7DD2 "),i())}function et(o,n){o&1&&(t(0,"span",8),a(1," \u672A\u914D\u7F6E AI "),i())}function tt(o,n){if(o&1&&(t(0,"span",9),D(1,"span",26),a(2),i()),o&2){let e=d();l(2),S(" ",e.activeTasks().length," \u4EFB\u52D9\u57F7\u884C\u4E2D ")}}function it(o,n){if(o&1){let e=E();t(0,"button",27),x("click",function(){let s=m(e).$implicit,c=d();return p(c.activeTab.set(s.id))}),t(1,"span",28),a(2),i(),t(3,"span"),a(4),i()()}if(o&2){let e=n.$implicit,r=d();b("bg-gradient-to-r",r.activeTab()===e.id)("from-purple-500",r.activeTab()===e.id)("to-pink-500",r.activeTab()===e.id)("text-white",r.activeTab()===e.id)("shadow-lg",r.activeTab()===e.id)("text-slate-400",r.activeTab()!==e.id)("hover:text-white",r.activeTab()!==e.id)("hover:bg-slate-700/50",r.activeTab()!==e.id),l(2),u(e.icon),l(2),u(e.label)}}function nt(o,n){if(o&1){let e=E();t(0,"button",48),x("click",function(){let s=m(e).$implicit,c=d(2);return p(c.quickStartTask(s.type))}),t(1,"div",49),a(2),i(),t(3,"div",50),a(4),i(),t(5,"div",51),a(6),i()()}if(o&2){let e=n.$implicit,r=d(2);b("border-purple-500",r.selectedGoal()===e.type)("bg-purple-500/20",r.selectedGoal()===e.type)("border-slate-600",r.selectedGoal()!==e.type)("bg-slate-800/50",r.selectedGoal()!==e.type)("hover:border-purple-400",r.selectedGoal()!==e.type),l(2),u(e.icon),l(2),u(e.label),l(2),u(e.description)}}function at(o,n){o&1&&(t(0,"span",53),a(1,"\u27F3"),i(),a(2," AI \u6B63\u5728\u914D\u7F6E... "))}function ot(o,n){o&1&&(t(0,"span"),a(1,"\u{1F680}"),i(),a(2," \u4E00\u9375\u555F\u52D5 "))}function rt(o,n){if(o&1){let e=E();t(0,"div",35)(1,"button",52),x("click",function(){m(e);let s=d(2);return p(s.launchQuickTask())}),_(2,at,3,0)(3,ot,3,0),i()()}if(o&2){let e=d(2);l(),y("disabled",e.isLaunching()),l(),C(e.isLaunching()?2:3)}}function lt(o,n){o&1&&(t(0,"div",43)(1,"div",54)(2,"div",55)(3,"div",56),a(4,"\u{1F3AF}"),i(),t(5,"div",57),a(6,"\u610F\u5411\u8A55\u4F30"),i(),t(7,"div",51),a(8,"\u5BE6\u6642\u5206\u6790"),i()(),t(9,"div",55)(10,"div",56),a(11,"\u{1F3AD}"),i(),t(12,"div",57),a(13,"\u52D5\u614B\u4EBA\u683C"),i(),t(14,"div",51),a(15,"\u81EA\u52D5\u5339\u914D"),i()(),t(16,"div",55)(17,"div",56),a(18,"\u{1F465}"),i(),t(19,"div",57),a(20,"\u667A\u80FD\u5354\u4F5C"),i(),t(21,"div",51),a(22,"\u81EA\u52D5\u5F15\u5165"),i()()()())}function st(o,n){if(o&1){let e=E();t(0,"button",58),x("click",function(){let s=m(e).$implicit,c=d(2);return p(c.setPreferredMode(s.id))}),t(1,"div",59),a(2),i(),t(3,"div",60),a(4),i(),t(5,"div",61),a(6),i()()}if(o&2){let e=n.$implicit,r=d(2);b("border-purple-500",r.preferredMode()===e.id)("bg-purple-500/20",r.preferredMode()===e.id)("border-slate-600",r.preferredMode()!==e.id)("bg-slate-700/50",r.preferredMode()!==e.id),l(2),u(e.icon),l(2),u(e.label),l(2),u(e.description)}}function dt(o,n){if(o&1){let e=E();t(0,"div",20)(1,"div",29)(2,"div",30)(3,"h2",31),a(4,"\u{1F3AF} \u9078\u64C7\u60A8\u7684\u71DF\u92B7\u76EE\u6A19"),i(),t(5,"p",32),a(6,"AI \u5C07\u81EA\u52D5\u914D\u7F6E\u89D2\u8272\u3001\u9078\u64C7\u7B56\u7565\u4E26\u958B\u59CB\u57F7\u884C"),i()(),t(7,"div",33),T(8,nt,7,13,"button",34,fe),i(),_(10,rt,4,2,"div",35),i(),t(11,"div",36)(12,"div",2)(13,"div",3)(14,"div",37),a(15," \u{1F9E0} "),i(),t(16,"div")(17,"h3",38),a(18," AI \u667A\u80FD\u6258\u7BA1 "),t(19,"span",39),a(20,"\u6574\u5408"),i()(),t(21,"p",40),a(22,"AI \u81EA\u52D5\u8655\u7406\u65B0 Lead\u3001\u56DE\u8986\u79C1\u4FE1\u3001\u8ABF\u6574\u7B56\u7565"),i()()(),t(23,"button",41),x("click",function(){m(e);let s=d();return p(s.toggleAIHosting())}),D(24,"span",42),i()(),_(25,lt,23,0,"div",43),i(),t(26,"div",44)(27,"h3",45)(28,"span"),a(29,"\u2699\uFE0F"),i(),a(30," \u57F7\u884C\u6A21\u5F0F\u504F\u597D "),i(),t(31,"div",46),T(32,st,7,11,"button",47,ee),i()()()}if(o&2){let e=d();l(8),w(e.goalTypes),l(2),C(e.selectedGoal()?10:-1),l(13),b("bg-cyan-500",e.aiHostingEnabled())("bg-slate-600",!e.aiHostingEnabled()),l(),b("translate-x-8",e.aiHostingEnabled()),l(),C(e.aiHostingEnabled()?25:-1),l(7),w(e.executionModes)}}function ut(o,n){if(o&1){let e=E();t(0,"div",71)(1,"div",73),a(2,"\u{1F4CB}"),i(),t(3,"p",74),a(4,"\u66AB\u7121\u71DF\u92B7\u4EFB\u52D9"),i(),t(5,"p",75),a(6,"\u4F7F\u7528\u4E0A\u65B9\u300C\u5FEB\u901F\u555F\u52D5\u300D\u5275\u5EFA\u60A8\u7684\u7B2C\u4E00\u500B\u4EFB\u52D9"),i(),t(7,"button",76),x("click",function(){m(e);let s=d(2);return p(s.activeTab.set("quick-start"))}),a(8," \u{1F680} \u958B\u59CB\u5275\u5EFA "),i()()}}function ct(o,n){if(o&1){let e=E();t(0,"button",87),x("click",function(){m(e);let s=d().$implicit,c=d(3);return p(c.pauseTask(s.id))}),a(1," \u66AB\u505C "),i()}}function mt(o,n){if(o&1){let e=E();t(0,"button",88),x("click",function(){m(e);let s=d().$implicit,c=d(3);return p(c.startTask(s.id))}),a(1," \u555F\u52D5 "),i()}}function pt(o,n){if(o&1){let e=E();t(0,"div",77)(1,"div",3)(2,"div",78),a(3),i(),t(4,"div")(5,"div",79),a(6),i(),t(7,"div",80)(8,"span"),a(9),i(),t(10,"span",81),a(11,"\xB7"),i(),t(12,"span"),a(13),i(),t(14,"span",81),a(15,"\xB7"),i(),t(16,"span",82),a(17),i()()()(),t(18,"div",3)(19,"span",83),a(20),i(),t(21,"div",64),_(22,ct,2,0,"button",84)(23,mt,2,0,"button",85),t(24,"button",86),x("click",function(){let s=m(e).$implicit,c=d(3);return p(c.viewTaskDetails(s))}),a(25," \u8A73\u60C5 "),i()()()()}if(o&2){let e=n.$implicit,r=d(3);l(2),b("bg-emerald-500/20",e.status==="running")("bg-purple-500/20",e.status==="completed")("bg-slate-700",e.status==="draft"||e.status==="paused"),l(),S(" ",r.getGoalIcon(e.goalType)," "),l(3),u(e.name),l(3),u(r.getGoalLabel(e.goalType)),l(4),S("",e.stats.totalContacts," \u76EE\u6A19"),l(4),S("",e.stats.converted," \u8F49\u5316"),l(2),b("bg-emerald-500/20",e.status==="running")("text-emerald-400",e.status==="running")("bg-purple-500/20",e.status==="completed")("text-purple-400",e.status==="completed")("bg-yellow-500/20",e.status==="paused")("text-yellow-400",e.status==="paused")("bg-slate-600",e.status==="draft")("text-slate-300",e.status==="draft"),l(),S(" ",r.getStatusLabel(e.status)," "),l(2),C(e.status==="running"?22:e.status==="paused"||e.status==="draft"?23:-1)}}function xt(o,n){if(o&1&&(t(0,"div",72),T(1,pt,26,29,"div",77,ee),i()),o&2){let e=d(2);l(),w(e.filteredTasks())}}function gt(o,n){if(o&1){let e=E();t(0,"div",21)(1,"div",62)(2,"h2",63),a(3,"\u71DF\u92B7\u4EFB\u52D9"),i(),t(4,"div",64)(5,"select",65),G("ngModelChange",function(s){m(e);let c=d();return N(c.taskFilter,s)||(c.taskFilter=s),p(s)}),t(6,"option",66),a(7,"\u5168\u90E8\u4EFB\u52D9"),i(),t(8,"option",67),a(9,"\u57F7\u884C\u4E2D"),i(),t(10,"option",68),a(11,"\u5DF2\u5B8C\u6210"),i(),t(12,"option",69),a(13,"\u8349\u7A3F"),i()(),t(14,"button",70),x("click",function(){m(e);let s=d();return p(s.createNewTask())}),a(15," + \u65B0\u5EFA\u4EFB\u52D9 "),i()()(),_(16,ut,9,0,"div",71)(17,xt,3,0,"div",72),i()}if(o&2){let e=d();l(5),V("ngModel",e.taskFilter),l(11),C(e.filteredTasks().length===0?16:17)}}function vt(o,n){if(o&1&&(t(0,"div",100),D(1,"div",109),t(2,"span",51),a(3),i()()),o&2){let e=n.$implicit;l(),B("height",e.converted*15+20,"px"),b("bg-purple-500",!0),l(2),u(e.label)}}function bt(o,n){if(o&1&&(t(0,"div",101)(1,"span",110),a(2),i(),t(3,"div",111)(4,"div",112)(5,"span",113),a(6),i(),t(7,"span",32),a(8),i()(),t(9,"div",114),D(10,"div",115),i()()()),o&2){let e=n.$implicit;l(2),u(e.icon),l(4),u(e.label),l(2),S("",e.count," \u4EFB\u52D9"),l(2),B("width",e.percentage,"%")}}function _t(o,n){if(o&1&&(t(0,"div",22)(1,"div",89)(2,"div",90)(3,"div",91),a(4),i(),t(5,"div",92),a(6,"\u7E3D\u4EFB\u52D9\u6578"),i()(),t(7,"div",90)(8,"div",93),a(9),i(),t(10,"div",92),a(11,"\u6D3B\u8E8D\u4EFB\u52D9"),i()(),t(12,"div",90)(13,"div",94),a(14),i(),t(15,"div",92),a(16,"\u7E3D\u8F49\u5316"),i()(),t(17,"div",90)(18,"div",95),a(19),i(),t(20,"div",92),a(21,"\u8F49\u5316\u7387"),i()(),t(22,"div",90)(23,"div",96),a(24),i(),t(25,"div",92),a(26,"\u6D88\u606F\u767C\u9001"),i()()(),t(27,"div",44),D(28,"app-conversion-funnel",97),i(),t(29,"div",98)(30,"div",44)(31,"h3",45)(32,"span"),a(33,"\u{1F4C8}"),i(),a(34," \u8F49\u5316\u8DA8\u52E2 "),i(),t(35,"div",99),T(36,vt,4,5,"div",100,Xe),i()(),t(38,"div",44)(39,"h3",45)(40,"span"),a(41,"\u{1F3AF}"),i(),a(42," \u76EE\u6A19\u985E\u578B\u5206\u5E03 "),i(),t(43,"div",72),T(44,bt,11,5,"div",101,fe),i()()(),t(46,"div",102)(47,"h3",45)(48,"span"),a(49,"\u{1F9E0}"),i(),a(50," AI \u7CFB\u7D71\u72C0\u614B "),i(),t(51,"div",103)(52,"div",104)(53,"div",105),a(54),i(),t(55,"div",51),a(56,"\u4ECA\u65E5\u5C0D\u8A71"),i()(),t(57,"div",104)(58,"div",106),a(59),i(),t(60,"div",51),a(61,"\u610F\u5716\u8B58\u5225"),i()(),t(62,"div",104)(63,"div",107),a(64),i(),t(65,"div",51),a(66,"\u5E73\u5747\u97FF\u61C9"),i()(),t(67,"div",104)(68,"div",108),a(69),i(),t(70,"div",51),a(71,"\u4ECA\u65E5\u6210\u672C"),i()()()()()),o&2){let e=d();l(4),u(e.overallStats().totalTasks),l(5),u(e.overallStats().activeTasks),l(5),u(e.overallStats().totalConverted),l(5),S("",e.overallConversionRate(),"%"),l(5),u(e.overallStats().totalMessagesSent),l(4),y("targets",e.funnelTargets())("contacted",e.overallStats().totalContacted)("replied",e.funnelReplied())("converted",e.overallStats().totalConverted)("period","\u672C\u9031\u6578\u64DA")("showAnalysis",!0),l(8),w(e.last7DaysData()),l(8),w(e.goalDistribution()),l(10),u(e.aiStats().conversations),l(5),u(e.aiStats().intentsRecognized),l(5),S("",e.aiStats().avgResponseTime,"ms"),l(5),S("\xA5",e.aiStats().cost.toFixed(2))}}function Ct(o,n){if(o&1){let e=E();t(0,"div",23)(1,"div",44)(2,"h3",45)(3,"span"),a(4,"\u{1F916}"),i(),a(5," AI \u5F15\u64CE\u914D\u7F6E "),i(),t(6,"button",116),x("click",function(){m(e);let s=d();return p(s.goToAICenter())}),t(7,"div")(8,"div",79),a(9,"\u6A21\u578B\u914D\u7F6E"),i(),t(10,"div",92),a(11,"\u914D\u7F6E AI \u6A21\u578B\u3001API Key \u7B49"),i()(),t(12,"span",32),a(13,"\u2192"),i()()(),t(14,"div",44)(15,"h3",45)(16,"span"),a(17,"\u{1F3AD}"),i(),a(18," \u89D2\u8272\u7BA1\u7406 "),i(),t(19,"button",116),x("click",function(){m(e);let s=d();return p(s.goToRoleLibrary())}),t(20,"div")(21,"div",79),a(22,"\u89D2\u8272\u5EAB\u8207\u5287\u672C"),i(),t(23,"div",92),a(24,"\u7BA1\u7406\u89D2\u8272\u5B9A\u7FA9\u3001\u5287\u672C\u6A21\u677F"),i()(),t(25,"span",32),a(26,"\u2192"),i()()(),t(27,"div",44)(28,"h3",117)(29,"span"),a(30,"\u2699\uFE0F"),i(),a(31," \u9ED8\u8A8D\u8A2D\u7F6E "),i(),t(32,"div",118)(33,"div",119)(34,"div")(35,"label",120),a(36,"\u610F\u5411\u95BE\u503C"),i(),t(37,"div",6)(38,"input",121),x("input",function(s){m(e);let c=d();return p(c.updateIntentThreshold(s.target.valueAsNumber))}),i(),t(39,"span",122),a(40),i()()(),t(41,"div")(42,"label",120),a(43,"\u6700\u5927\u540C\u6642\u4EFB\u52D9"),i(),t(44,"input",123),x("input",function(s){m(e);let c=d();return p(c.updateMaxConcurrentTasks(s.target.valueAsNumber))}),i()()(),t(45,"button",124),x("click",function(){m(e);let s=d();return p(s.saveSettings())}),a(46," \u{1F4BE} \u4FDD\u5B58\u8A2D\u7F6E "),i()()()()}if(o&2){let e=d();l(38),y("value",e.intentThreshold()),l(2),S("",e.intentThreshold(),"%"),l(4),y("value",e.maxConcurrentTasks())}}function ft(o,n){if(o&1){let e=E();t(0,"app-task-wizard",125),x("close",function(){m(e);let s=d();return p(s.closeWizard())})("taskCreated",function(s){m(e);let c=d();return p(c.onTaskCreated(s))}),i()}if(o&2){let e=d();y("initialGoal",e.wizardInitialGoal())}}var Y=class o{constructor(){this.taskService=h($);this.stateService=h(q);this.aiService=h(j);this.multiRoleService=h(be);this.dynamicEngine=h(_e);this.toast=h(L);this.ipc=h(ve);this.navBridge=h(O);this.initialTab=F(void 0);this.activeTab=k("quick-start");this.selectedGoal=k(null);this.isLaunching=k(!1);this.preferredMode=k("hybrid");this.showWizard=k(!1);this.wizardInitialGoal=k(null);this.aiHostingEnabled=g(()=>this.stateService.aiHostingEnabled());this.intentThreshold=g(()=>this.stateService.intentThreshold());this.maxConcurrentTasks=g(()=>this.stateService.maxConcurrentTasks());this.taskFilter="all";this.tabs=[{id:"quick-start",icon:"\u{1F680}",label:"\u5FEB\u901F\u555F\u52D5"},{id:"tasks",icon:"\u{1F4CB}",label:"\u4EFB\u52D9\u5217\u8868"},{id:"monitor",icon:"\u{1F4CA}",label:"\u6548\u679C\u76E3\u63A7"},{id:"settings",icon:"\u2699\uFE0F",label:"\u8A2D\u7F6E"}];this.goalTypes=[{type:"conversion",icon:"\u{1F4B0}",label:"\u4FC3\u9032\u9996\u55AE",description:"\u8F49\u5316\u6F5B\u5728\u5BA2\u6236"},{type:"retention",icon:"\u{1F49D}",label:"\u633D\u56DE\u6D41\u5931",description:"\u53EC\u56DE\u8001\u5BA2\u6236"},{type:"engagement",icon:"\u{1F389}",label:"\u793E\u7FA4\u6D3B\u8E8D",description:"\u63D0\u5347\u4E92\u52D5"},{type:"support",icon:"\u{1F527}",label:"\u552E\u5F8C\u670D\u52D9",description:"\u89E3\u6C7A\u554F\u984C"}];this.executionModes=[{id:"scripted",icon:"\u{1F4DC}",label:"\u5287\u672C\u6A21\u5F0F",description:"\u6309\u9810\u8A2D\u6D41\u7A0B"},{id:"hybrid",icon:"\u{1F504}",label:"\u6DF7\u5408\u6A21\u5F0F",description:"\u63A8\u85A6"},{id:"scriptless",icon:"\u{1F916}",label:"\u7121\u5287\u672C",description:"AI \u5373\u8208"}];this.aiConnected=g(()=>this.aiService.isConnected());this.activeTasks=g(()=>this.taskService.activeTasks());this.todayStats=g(()=>this.taskService.todayStats());this.overallStats=g(()=>this.taskService.getOverallStats());this.overallConversionRate=g(()=>this.taskService.overallConversionRate());this.filteredTasks=g(()=>{let n=this.taskService.tasks();return this.taskFilter==="all"?n:n.filter(e=>e.status===this.taskFilter)});this.aiStats=g(()=>this.aiService.stats().today);this.funnelTargets=g(()=>this.overallStats().totalContacted+50);this.funnelReplied=g(()=>Math.floor(this.overallStats().totalContacted*.35));this.last7DaysData=g(()=>["\u9031\u4E00","\u9031\u4E8C","\u9031\u4E09","\u9031\u56DB","\u9031\u4E94","\u9031\u516D","\u9031\u65E5"].map((e,r)=>({label:e,converted:Math.floor(Math.random()*10)+1})));this.goalDistribution=g(()=>{let n=this.taskService.tasksByGoal(),e=this.taskService.tasks().length||1;return this.goalTypes.map(r=>te(W({},r),{count:n[r.type]?.length||0,percentage:(n[r.type]?.length||0)/e*100}))});ne(()=>{let n=this.initialTab();n&&this.activeTab.set(n)})}static{this.VIEW_TAB_MAP={"ai-assistant":"quick-start","marketing-hub":"quick-start","ai-team":"tasks","marketing-tasks":"tasks","marketing-monitor":"monitor","marketing-report":"settings"}}ngOnInit(){this.loadSettings();let n=this.initialTab();if(n){this.activeTab.set(n);return}let e=this.navBridge.currentView(),r=o.VIEW_TAB_MAP[e];r&&this.activeTab.set(r)}quickStartTask(n){this.wizardInitialGoal.set(n),this.showWizard.set(!0)}openWizard(){this.wizardInitialGoal.set(null),this.showWizard.set(!0)}closeWizard(){this.showWizard.set(!1),this.wizardInitialGoal.set(null)}onTaskCreated(n){this.activeTab.set("tasks"),this.taskService.loadTasks()}async launchQuickTask(){let n=this.selectedGoal();if(n){this.isLaunching.set(!0);try{let e=await this.taskService.quickCreate(n);e?(this.taskService.startTask(e),this.toast.success(`\u{1F680} ${M[n].label} \u4EFB\u52D9\u5DF2\u555F\u52D5\uFF01`),this.selectedGoal.set(null),this.activeTab.set("tasks")):this.toast.error("\u4EFB\u52D9\u5275\u5EFA\u5931\u6557")}catch{this.toast.error("\u555F\u52D5\u5931\u6557\uFF0C\u8ACB\u91CD\u8A66")}finally{this.isLaunching.set(!1)}}}toggleAIHosting(){let n=!this.stateService.aiHostingEnabled();this.stateService.setAiHostingEnabled(n),this.toast.success(n?"\u{1F9E0} AI \u667A\u80FD\u6258\u7BA1\u5DF2\u555F\u7528":"AI \u667A\u80FD\u6258\u7BA1\u5DF2\u95DC\u9589")}setPreferredMode(n){this.preferredMode.set(n),localStorage.setItem("preferred_execution_mode",n)}createNewTask(){this.openWizard()}startTask(n){this.taskService.startTask(n),this.toast.success("\u4EFB\u52D9\u5DF2\u555F\u52D5")}pauseTask(n){this.taskService.pauseTask(n),this.toast.info("\u4EFB\u52D9\u5DF2\u66AB\u505C")}viewTaskDetails(n){this.taskService.setCurrentTask(n),this.toast.info(`\u67E5\u770B\u4EFB\u52D9: ${n.name}`)}goToAICenter(){this.ipc.send("navigate-to",{path:"/ai-engine"})}goToRoleLibrary(){this.ipc.send("navigate-to",{path:"/multi-role"})}loadSettings(){let n=localStorage.getItem("preferred_execution_mode");n&&this.preferredMode.set(n)}saveSettings(){this.stateService.saveSettingsToBackend(),this.toast.success("\u8A2D\u7F6E\u5DF2\u4FDD\u5B58")}updateIntentThreshold(n){this.stateService.setIntentThreshold(n)}updateMaxConcurrentTasks(n){this.stateService.setMaxConcurrentTasks(n)}getGoalIcon(n){return M[n]?.icon||"\u{1F3AF}"}getGoalLabel(n){return M[n]?.label||n}getStatusLabel(n){return{draft:"\u8349\u7A3F",scheduled:"\u5DF2\u8A08\u5283",running:"\u57F7\u884C\u4E2D",paused:"\u5DF2\u66AB\u505C",completed:"\u5DF2\u5B8C\u6210",failed:"\u5931\u6557"}[n]||n}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=A({type:o,selectors:[["app-smart-marketing-hub"]],inputs:{initialTab:[1,"initialTab"]},decls:39,vars:7,consts:[[1,"smart-marketing-hub","h-full","flex","flex-col","bg-slate-900"],[1,"p-4","border-b","border-slate-700/50","bg-slate-900/80","backdrop-blur-sm"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"text-2xl","font-bold","text-white","flex","items-center","gap-3"],[1,"text-2xl"],[1,"flex","items-center","gap-2"],[1,"flex","items-center","gap-2","px-3","py-1","bg-emerald-500/20","text-emerald-400","rounded-full","text-sm"],[1,"px-3","py-1","bg-yellow-500/20","text-yellow-400","rounded-full","text-sm"],[1,"flex","items-center","gap-2","px-3","py-1","bg-purple-500/20","text-purple-400","rounded-full","text-sm"],[1,"flex","items-center","gap-4","px-4","py-2","bg-slate-800/80","rounded-xl","border","border-slate-700/50"],[1,"text-center"],[1,"text-lg","font-bold","text-cyan-400"],[1,"text-xs","text-slate-500"],[1,"w-px","h-8","bg-slate-700"],[1,"text-lg","font-bold","text-emerald-400"],[1,"text-lg","font-bold","text-purple-400"],[1,"flex","gap-1","mt-4","bg-slate-800/50","p-1","rounded-xl","w-fit"],[1,"px-5","py-2.5","rounded-lg","transition-all","flex","items-center","gap-2","text-sm","font-medium",3,"bg-gradient-to-r","from-purple-500","to-pink-500","text-white","shadow-lg","text-slate-400","hover:text-white","hover:bg-slate-700/50"],[1,"flex-1","overflow-y-auto","p-4"],[1,"max-w-4xl","mx-auto","space-y-6"],[1,"max-w-5xl","mx-auto","space-y-4"],[1,"max-w-6xl","mx-auto","space-y-6"],[1,"max-w-3xl","mx-auto","space-y-6"],[3,"initialGoal"],[1,"w-2","h-2","bg-emerald-500","rounded-full"],[1,"w-2","h-2","bg-purple-500","rounded-full","animate-pulse"],[1,"px-5","py-2.5","rounded-lg","transition-all","flex","items-center","gap-2","text-sm","font-medium",3,"click"],[1,"text-lg"],[1,"bg-gradient-to-r","from-purple-500/20","via-pink-500/20","to-cyan-500/20","rounded-2xl","border","border-purple-500/30","p-6"],[1,"text-center","mb-6"],[1,"text-2xl","font-bold","text-white","mb-2"],[1,"text-slate-400"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"p-6","rounded-xl","transition-all","text-center","border-2","hover:scale-105",3,"border-purple-500","bg-purple-500/20","border-slate-600","bg-slate-800/50","hover:border-purple-400"],[1,"mt-6","flex","justify-center"],[1,"bg-gradient-to-br","from-cyan-500/20","to-blue-500/20","rounded-2xl","border","border-cyan-500/30","p-6"],[1,"w-14","h-14","rounded-xl","bg-cyan-500/30","flex","items-center","justify-center","text-3xl"],[1,"text-xl","font-bold","text-white","flex","items-center","gap-2"],[1,"px-2","py-0.5","text-xs","bg-cyan-500/30","text-cyan-400","rounded-full"],[1,"text-slate-400","text-sm"],[1,"relative","w-16","h-8","rounded-full","transition-all",3,"click"],[1,"absolute","top-1","left-1","w-6","h-6","bg-white","rounded-full","shadow","transition-transform"],[1,"mt-6","pt-6","border-t","border-cyan-500/30"],[1,"bg-slate-800/50","rounded-xl","border","border-slate-700/50","p-6"],[1,"font-semibold","text-white","mb-4","flex","items-center","gap-2"],[1,"grid","grid-cols-3","gap-4"],[1,"p-4","rounded-xl","border-2","transition-all","text-center",3,"border-purple-500","bg-purple-500/20","border-slate-600","bg-slate-700/50"],[1,"p-6","rounded-xl","transition-all","text-center","border-2","hover:scale-105",3,"click"],[1,"text-4xl","mb-3"],[1,"font-semibold","text-white","mb-1"],[1,"text-xs","text-slate-400"],[1,"px-8","py-4","bg-gradient-to-r","from-purple-500","to-pink-500","text-white","font-bold","text-lg","rounded-xl","hover:opacity-90","transition-all","shadow-lg","disabled:opacity-50","flex","items-center","gap-3",3,"click","disabled"],[1,"animate-spin"],[1,"grid","grid-cols-3","gap-4","text-center"],[1,"p-3","bg-slate-800/50","rounded-xl"],[1,"text-2xl","mb-1"],[1,"text-sm","font-medium","text-white"],[1,"p-4","rounded-xl","border-2","transition-all","text-center",3,"click"],[1,"text-2xl","mb-2"],[1,"font-medium","text-white","text-sm"],[1,"text-xs","text-slate-400","mt-1"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-xl","font-bold","text-white"],[1,"flex","gap-2"],[1,"px-3","py-2","bg-slate-700","border","border-slate-600","rounded-lg","text-white","text-sm",3,"ngModelChange","ngModel"],["value","all"],["value","running"],["value","completed"],["value","draft"],[1,"px-4","py-2","bg-purple-500/20","text-purple-400","rounded-lg","hover:bg-purple-500/30",3,"click"],[1,"text-center","py-16","text-slate-400"],[1,"space-y-3"],[1,"text-6xl","mb-4"],[1,"text-lg","mb-2"],[1,"text-sm","mb-4"],[1,"px-6","py-3","bg-purple-500","text-white","rounded-lg","hover:bg-purple-400",3,"click"],[1,"flex","items-center","justify-between","p-4","bg-slate-800/50","rounded-xl","border","border-slate-700/50","hover:border-slate-600","transition-colors"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center","text-2xl"],[1,"font-medium","text-white"],[1,"text-sm","text-slate-400","flex","items-center","gap-2"],[1,"text-slate-600"],[1,"text-emerald-400"],[1,"px-3","py-1","rounded-full","text-xs","font-medium"],[1,"px-3","py-1.5","bg-yellow-500/20","text-yellow-400","rounded-lg","text-sm"],[1,"px-3","py-1.5","bg-emerald-500/20","text-emerald-400","rounded-lg","text-sm"],[1,"px-3","py-1.5","bg-slate-700","text-slate-300","rounded-lg","text-sm",3,"click"],[1,"px-3","py-1.5","bg-yellow-500/20","text-yellow-400","rounded-lg","text-sm",3,"click"],[1,"px-3","py-1.5","bg-emerald-500/20","text-emerald-400","rounded-lg","text-sm",3,"click"],[1,"grid","grid-cols-5","gap-4"],[1,"bg-slate-800/50","rounded-xl","border","border-slate-700/50","p-4"],[1,"text-3xl","font-bold","text-purple-400"],[1,"text-sm","text-slate-400"],[1,"text-3xl","font-bold","text-cyan-400"],[1,"text-3xl","font-bold","text-emerald-400"],[1,"text-3xl","font-bold","text-amber-400"],[1,"text-3xl","font-bold","text-pink-400"],[3,"targets","contacted","replied","converted","period","showAnalysis"],[1,"grid","grid-cols-2","gap-6"],[1,"h-48","flex","items-end","justify-around","gap-2"],[1,"flex","flex-col","items-center","gap-2"],[1,"flex","items-center","gap-3"],[1,"bg-gradient-to-br","from-cyan-500/10","to-purple-500/10","rounded-xl","border","border-cyan-500/30","p-6"],[1,"grid","grid-cols-4","gap-4"],[1,"bg-slate-800/50","rounded-lg","p-4","text-center"],[1,"text-2xl","font-bold","text-cyan-400"],[1,"text-2xl","font-bold","text-purple-400"],[1,"text-2xl","font-bold","text-emerald-400"],[1,"text-2xl","font-bold","text-amber-400"],[1,"w-12","rounded-t","transition-all"],[1,"text-xl"],[1,"flex-1"],[1,"flex","justify-between","text-sm","mb-1"],[1,"text-white"],[1,"h-2","bg-slate-700","rounded-full","overflow-hidden"],[1,"h-full","bg-purple-500","rounded-full","transition-all"],[1,"w-full","p-4","bg-slate-700/50","rounded-xl","text-left","hover:bg-slate-700","transition-colors","flex","items-center","justify-between",3,"click"],[1,"font-semibold","text-white","mb-6","flex","items-center","gap-2"],[1,"space-y-4"],[1,"grid","grid-cols-2","gap-4"],[1,"text-sm","text-slate-400","block","mb-2"],["type","range","min","50","max","100","step","5",1,"flex-1",3,"input","value"],[1,"text-white","w-12","text-right"],["type","number","min","1","max","10",1,"w-full","px-3","py-2","bg-slate-700","border","border-slate-600","rounded-lg","text-white",3,"input","value"],[1,"w-full","py-3","bg-gradient-to-r","from-purple-500","to-pink-500","text-white","font-medium","rounded-xl","hover:opacity-90","transition-opacity",3,"click"],[3,"close","taskCreated","initialGoal"]],template:function(e,r){if(e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4)(5,"span",5),a(6,"\u{1F680}"),i(),a(7," \u667A\u80FD\u71DF\u92B7\u4E2D\u5FC3 "),i(),t(8,"div",6),_(9,Ze,3,0,"span",7)(10,et,2,0,"span",8),_(11,tt,3,1,"span",9),i()(),t(12,"div",10)(13,"div",11)(14,"div",12),a(15),i(),t(16,"div",13),a(17,"\u4ECA\u65E5\u63A5\u89F8"),i()(),D(18,"div",14),t(19,"div",11)(20,"div",15),a(21),i(),t(22,"div",13),a(23,"\u4ECA\u65E5\u8F49\u5316"),i()(),D(24,"div",14),t(25,"div",11)(26,"div",16),a(27),i(),t(28,"div",13),a(29,"\u8F49\u5316\u7387"),i()()()(),t(30,"div",17),T(31,it,5,18,"button",18,ee),i()(),t(33,"div",19),_(34,dt,34,8,"div",20)(35,gt,18,2,"div",21)(36,_t,72,15,"div",22)(37,Ct,47,3,"div",23),i(),_(38,ft,1,1,"app-task-wizard",24),i()),e&2){let s;l(9),C(r.aiConnected()?9:10),l(2),C(r.activeTasks().length>0?11:-1),l(4),u(r.todayStats().contacted),l(6),u(r.todayStats().converted),l(6),S("",r.overallConversionRate(),"%"),l(4),w(r.tabs),l(3),C((s=r.activeTab())==="quick-start"?34:s==="tasks"?35:s==="monitor"?36:s==="settings"?37:-1),l(4),C(r.showWizard()?38:-1)}},dependencies:[I,z,me,pe,ce,R,P,J,Q],encapsulation:2})}};var Se=class o{constructor(){this.i18n=h(ge);this.nav=h(O);this.route=h(se);this.membershipService=h(xe);this.routeDataSub=null;this.initialTab=k("quick-start")}setTabFromRoute(){let n=this.route.snapshot.data.hubMode;this.initialTab.set(n==="execution"?"tasks":"quick-start")}ngOnInit(){this.setTabFromRoute(),this.routeDataSub=this.route.data.subscribe(()=>this.setTabFromRoute())}ngOnDestroy(){this.routeDataSub?.unsubscribe()}t(n,e){return this.i18n.t(n,e)}navigateTo(n){this.nav.navigateTo(n)}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=A({type:o,selectors:[["app-smart-marketing-view"]],decls:1,vars:1,consts:[[3,"initialTab"]],template:function(e,r){e&1&&D(0,"app-smart-marketing-hub",0),e&2&&y("initialTab",r.initialTab())},dependencies:[I,z,Y],encapsulation:2,changeDetection:0})}};export{Se as SmartMarketingViewComponent};
