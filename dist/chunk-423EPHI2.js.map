{
  "version": 3,
  "sources": ["src/services/security.service.ts", "src/auth/login.component.ts"],
  "sourcesContent": ["/**\r\n * ÂâçÁ´ØÂÆâÂÖ®ÊúçÂãô\r\n * \r\n * P1.5: ÂÆâÂÖ®Â¢ûÂº∑\r\n * 1. CSRF Token ÁÆ°ÁêÜ\r\n * 2. ÁôªÂÖ•ÂòóË©¶ÈôêÂà∂\r\n * 3. ÂÆâÂÖ®È†≠ËôïÁêÜ\r\n * 4. XSS Èò≤Ë≠∑\r\n */\r\n\r\nimport { Injectable, signal, computed } from '@angular/core';\r\n\r\n// CSRF ÈÖçÁΩÆ\r\nconst CSRF_CONFIG = {\r\n  COOKIE_NAME: 'csrf_token',\r\n  HEADER_NAME: 'X-CSRF-Token',\r\n  STORAGE_KEY: 'tgm_csrf_token'\r\n};\r\n\r\n// ÁôªÂÖ•ÈôêÂà∂ÈÖçÁΩÆ\r\nconst LOGIN_LIMIT_CONFIG = {\r\n  MAX_ATTEMPTS: 5,           // ÊúÄÂ§ßÂòóË©¶Ê¨°Êï∏\r\n  LOCKOUT_DURATION: 300,     // ÈéñÂÆöÊôÇÈï∑ÔºàÁßíÔºâ\r\n  ATTEMPT_WINDOW: 900,       // ÂòóË©¶Á™óÂè£ÔºàÁßíÔºâ\r\n  STORAGE_KEY: 'tgm_login_attempts'\r\n};\r\n\r\ninterface LoginAttempt {\r\n  timestamp: number;\r\n  success: boolean;\r\n  email?: string;\r\n}\r\n\r\ninterface LoginLockout {\r\n  lockedUntil: number;\r\n  attempts: LoginAttempt[];\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FrontendSecurityService {\r\n  \r\n  // ==================== CSRF Token ÁÆ°ÁêÜ ====================\r\n  \r\n  private _csrfToken = signal<string>('');\r\n  readonly csrfToken = computed(() => this._csrfToken());\r\n  \r\n  constructor() {\r\n    // ÂàùÂßãÂåñÊôÇÂòóË©¶Âæû Cookie Áç≤Âèñ CSRF Token\r\n    this.refreshCsrfToken();\r\n  }\r\n  \r\n  /**\r\n   * Âæû Cookie Âà∑Êñ∞ CSRF Token\r\n   */\r\n  refreshCsrfToken(): void {\r\n    const token = this.getCookie(CSRF_CONFIG.COOKIE_NAME);\r\n    if (token) {\r\n      this._csrfToken.set(token);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Áç≤Âèñ CSRF TokenÔºàÁî®ÊñºË´ãÊ±ÇÈ†≠Ôºâ\r\n   */\r\n  getCsrfToken(): string {\r\n    return this._csrfToken();\r\n  }\r\n  \r\n  /**\r\n   * Áç≤ÂèñÂåÖÂê´ CSRF Token ÁöÑË´ãÊ±ÇÈ†≠\r\n   */\r\n  getCsrfHeaders(): Record<string, string> {\r\n    const token = this.getCsrfToken();\r\n    if (token) {\r\n      return { [CSRF_CONFIG.HEADER_NAME]: token };\r\n    }\r\n    return {};\r\n  }\r\n  \r\n  /**\r\n   * Â¢ûÂº∑ÁöÑ fetchÔºåËá™ÂãïÊ∑ªÂä† CSRF Token\r\n   */\r\n  async secureFetch(url: string, options: RequestInit = {}): Promise<Response> {\r\n    const headers = new Headers(options.headers);\r\n    \r\n    // Ê∑ªÂä† CSRF Token\r\n    const csrfToken = this.getCsrfToken();\r\n    if (csrfToken) {\r\n      headers.set(CSRF_CONFIG.HEADER_NAME, csrfToken);\r\n    }\r\n    \r\n    // Ê∑ªÂä†ÂÆâÂÖ®È†≠\r\n    if (!headers.has('Content-Type')) {\r\n      headers.set('Content-Type', 'application/json');\r\n    }\r\n    \r\n    const response = await fetch(url, {\r\n      ...options,\r\n      headers,\r\n      credentials: 'include'  // ÂåÖÂê´ Cookie\r\n    });\r\n    \r\n    // ÂæûÈüøÊáâÊõ¥Êñ∞ CSRF Token\r\n    this.refreshCsrfToken();\r\n    \r\n    return response;\r\n  }\r\n  \r\n  // ==================== ÁôªÂÖ•ÂòóË©¶ÈôêÂà∂ ====================\r\n  \r\n  private _isLocked = signal<boolean>(false);\r\n  private _lockoutRemaining = signal<number>(0);\r\n  private _attemptCount = signal<number>(0);\r\n  \r\n  readonly isLocked = computed(() => this._isLocked());\r\n  readonly lockoutRemaining = computed(() => this._lockoutRemaining());\r\n  readonly attemptCount = computed(() => this._attemptCount());\r\n  readonly attemptsLeft = computed(() => Math.max(0, LOGIN_LIMIT_CONFIG.MAX_ATTEMPTS - this._attemptCount()));\r\n  \r\n  /**\r\n   * Ê™¢Êü•ÊòØÂê¶ÂèØ‰ª•ÂòóË©¶ÁôªÂÖ•\r\n   */\r\n  canAttemptLogin(): { allowed: boolean; message?: string; waitSeconds?: number } {\r\n    const lockout = this.getLockoutData();\r\n    const now = Date.now();\r\n    \r\n    // Ê™¢Êü•ÊòØÂê¶Ë¢´ÈéñÂÆö\r\n    if (lockout.lockedUntil > now) {\r\n      const waitSeconds = Math.ceil((lockout.lockedUntil - now) / 1000);\r\n      this._isLocked.set(true);\r\n      this._lockoutRemaining.set(waitSeconds);\r\n      return {\r\n        allowed: false,\r\n        message: `ÁôªÂÖ•ÂòóË©¶Ê¨°Êï∏ÈÅéÂ§öÔºåË´ã ${this.formatDuration(waitSeconds)} ÂæåÂÜçË©¶`,\r\n        waitSeconds\r\n      };\r\n    }\r\n    \r\n    this._isLocked.set(false);\r\n    this._lockoutRemaining.set(0);\r\n    \r\n    // Ë®àÁÆóÊúÄËøëÁöÑÂòóË©¶Ê¨°Êï∏\r\n    const recentAttempts = this.getRecentAttempts(lockout.attempts);\r\n    this._attemptCount.set(recentAttempts.length);\r\n    \r\n    if (recentAttempts.length >= LOGIN_LIMIT_CONFIG.MAX_ATTEMPTS) {\r\n      // Ë®≠ÁΩÆÈéñÂÆö\r\n      const lockedUntil = now + LOGIN_LIMIT_CONFIG.LOCKOUT_DURATION * 1000;\r\n      this.setLockout(lockedUntil, lockout.attempts);\r\n      \r\n      const waitSeconds = LOGIN_LIMIT_CONFIG.LOCKOUT_DURATION;\r\n      this._isLocked.set(true);\r\n      this._lockoutRemaining.set(waitSeconds);\r\n      \r\n      return {\r\n        allowed: false,\r\n        message: `ÁôªÂÖ•ÂòóË©¶Ê¨°Êï∏ÈÅéÂ§öÔºåË´ã ${this.formatDuration(waitSeconds)} ÂæåÂÜçË©¶`,\r\n        waitSeconds\r\n      };\r\n    }\r\n    \r\n    return { allowed: true };\r\n  }\r\n  \r\n  /**\r\n   * Ë®òÈåÑÁôªÂÖ•ÂòóË©¶\r\n   */\r\n  recordLoginAttempt(success: boolean, email?: string): void {\r\n    const lockout = this.getLockoutData();\r\n    \r\n    // Ê∑ªÂä†Êñ∞ÂòóË©¶\r\n    lockout.attempts.push({\r\n      timestamp: Date.now(),\r\n      success,\r\n      email\r\n    });\r\n    \r\n    // Âè™‰øùÁïôÊúÄËøëÁöÑÂòóË©¶\r\n    lockout.attempts = this.getRecentAttempts(lockout.attempts);\r\n    \r\n    // Â¶ÇÊûúÊàêÂäüÔºåÊ∏ÖÈô§ÈéñÂÆöÂíåÂòóË©¶Ë®òÈåÑ\r\n    if (success) {\r\n      lockout.lockedUntil = 0;\r\n      lockout.attempts = [];\r\n    }\r\n    \r\n    this.saveLockoutData(lockout);\r\n    this._attemptCount.set(lockout.attempts.filter(a => !a.success).length);\r\n  }\r\n  \r\n  /**\r\n   * Ê∏ÖÈô§ÁôªÂÖ•ÈôêÂà∂\r\n   */\r\n  clearLoginLimit(): void {\r\n    localStorage.removeItem(LOGIN_LIMIT_CONFIG.STORAGE_KEY);\r\n    this._isLocked.set(false);\r\n    this._lockoutRemaining.set(0);\r\n    this._attemptCount.set(0);\r\n  }\r\n  \r\n  /**\r\n   * Áç≤ÂèñÊúÄËøëÁöÑÂ§±ÊïóÂòóË©¶\r\n   */\r\n  private getRecentAttempts(attempts: LoginAttempt[]): LoginAttempt[] {\r\n    const windowStart = Date.now() - LOGIN_LIMIT_CONFIG.ATTEMPT_WINDOW * 1000;\r\n    return attempts.filter(a => a.timestamp > windowStart && !a.success);\r\n  }\r\n  \r\n  /**\r\n   * Áç≤ÂèñÈéñÂÆöÊï∏Êìö\r\n   */\r\n  private getLockoutData(): LoginLockout {\r\n    try {\r\n      const data = localStorage.getItem(LOGIN_LIMIT_CONFIG.STORAGE_KEY);\r\n      if (data) {\r\n        return JSON.parse(data);\r\n      }\r\n    } catch (e) {\r\n      console.error('Failed to parse lockout data:', e);\r\n    }\r\n    return { lockedUntil: 0, attempts: [] };\r\n  }\r\n  \r\n  /**\r\n   * ‰øùÂ≠òÈéñÂÆöÊï∏Êìö\r\n   */\r\n  private saveLockoutData(data: LoginLockout): void {\r\n    localStorage.setItem(LOGIN_LIMIT_CONFIG.STORAGE_KEY, JSON.stringify(data));\r\n  }\r\n  \r\n  /**\r\n   * Ë®≠ÁΩÆÈéñÂÆö\r\n   */\r\n  private setLockout(lockedUntil: number, attempts: LoginAttempt[]): void {\r\n    this.saveLockoutData({ lockedUntil, attempts });\r\n  }\r\n  \r\n  // ==================== XSS Èò≤Ë≠∑ ====================\r\n  \r\n  /**\r\n   * Ê∏ÖÁêÜ HTMLÔºàÈò≤Ê≠¢ XSSÔºâ\r\n   */\r\n  sanitizeHtml(html: string): string {\r\n    // ÂâµÂª∫Ëá®ÊôÇÂÖÉÁ¥†\r\n    const temp = document.createElement('div');\r\n    temp.textContent = html;\r\n    return temp.innerHTML;\r\n  }\r\n  \r\n  /**\r\n   * È©óË≠â URL ÂÆâÂÖ®ÊÄß\r\n   */\r\n  isUrlSafe(url: string): boolean {\r\n    if (!url) return false;\r\n    \r\n    // Á¶ÅÊ≠¢ javascript: ÂçîË≠∞\r\n    if (url.toLowerCase().startsWith('javascript:')) return false;\r\n    \r\n    // Á¶ÅÊ≠¢ data: ÂçîË≠∞ÔºàÈô§‰∫ÜÂúñÁâáÔºâ\r\n    if (url.toLowerCase().startsWith('data:') && !url.toLowerCase().startsWith('data:image/')) {\r\n      return false;\r\n    }\r\n    \r\n    // Âè™ÂÖÅË®± http/https ÂíåÁõ∏Â∞çË∑ØÂæë\r\n    if (url.startsWith('/') || url.startsWith('http://') || url.startsWith('https://')) {\r\n      return true;\r\n    }\r\n    \r\n    return false;\r\n  }\r\n  \r\n  /**\r\n   * ËΩâÁæ© HTML ÁâπÊÆäÂ≠óÁ¨¶\r\n   */\r\n  escapeHtml(text: string): string {\r\n    const map: Record<string, string> = {\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      \"'\": '&#039;'\r\n    };\r\n    return text.replace(/[&<>\"']/g, m => map[m]);\r\n  }\r\n  \r\n  // ==================== ËºîÂä©ÊñπÊ≥ï ====================\r\n  \r\n  /**\r\n   * Áç≤Âèñ Cookie ÂÄº\r\n   */\r\n  private getCookie(name: string): string | null {\r\n    const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));\r\n    return match ? decodeURIComponent(match[2]) : null;\r\n  }\r\n  \r\n  /**\r\n   * Ê†ºÂºèÂåñÊåÅÁ∫åÊôÇÈñì\r\n   */\r\n  private formatDuration(seconds: number): string {\r\n    if (seconds < 60) {\r\n      return `${seconds} Áßí`;\r\n    }\r\n    const minutes = Math.ceil(seconds / 60);\r\n    return `${minutes} ÂàÜÈêò`;\r\n  }\r\n  \r\n  /**\r\n   * ÂïüÂãïÈéñÂÆöÂÄíË®àÊôÇ\r\n   */\r\n  startLockoutCountdown(callback?: (remaining: number) => void): () => void {\r\n    const interval = setInterval(() => {\r\n      const remaining = this._lockoutRemaining();\r\n      if (remaining <= 0) {\r\n        clearInterval(interval);\r\n        this._isLocked.set(false);\r\n        callback?.(0);\r\n        return;\r\n      }\r\n      \r\n      this._lockoutRemaining.update(r => r - 1);\r\n      callback?.(remaining - 1);\r\n    }, 1000);\r\n    \r\n    return () => clearInterval(interval);\r\n  }\r\n}\r\n", "/**\r\n * ÁôªÂÖ•È†ÅÈù¢ÁµÑ‰ª∂\r\n * \r\n * ÂÑ™ÂåñË®≠Ë®àÔºö\r\n * 1. Ë°®ÂñÆÈ©óË≠âÂíåÈåØË™§ÊèêÁ§∫\r\n * 2. ÂØÜÁ¢ºÂèØË¶ãÂàáÊèõ\r\n * 3. Ë®ò‰ΩèÊàëÂäüËÉΩ\r\n * 4. Á¨¨‰∏âÊñπÁôªÂÖ•ÂÖ•Âè£\r\n * 5. Âä†ËºâÁãÄÊÖã\r\n */\r\n\r\nimport { Component, inject, signal, computed, ChangeDetectionStrategy, OnInit, OnDestroy } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Router, RouterModule, ActivatedRoute } from '@angular/router';\r\nimport { AuthService } from '../core/auth.service';\r\nimport { I18nService } from '../i18n.service';\r\nimport { FrontendSecurityService } from '../services/security.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule, RouterModule],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <div class=\"login-page\">\r\n      <h2 class=\"page-title\">{{ t('auth.welcomeBack') }}</h2>\r\n      <p class=\"page-subtitle\">{{ t('auth.loginSubtitle') }}</p>\r\n      \r\n      <!-- ÈéñÂÆöÊèêÁ§∫ -->\r\n      @if (isLocked()) {\r\n        <div class=\"lockout-alert\">\r\n          <span class=\"lockout-icon\">üîí</span>\r\n          <div class=\"lockout-content\">\r\n            <span class=\"lockout-title\">Â∏≥ËôüÊö´ÊôÇÈéñÂÆö</span>\r\n            <span class=\"lockout-time\">Ë´ãÁ≠âÂæÖ {{ lockoutRemaining() }} ÁßíÂæåÈáçË©¶</span>\r\n          </div>\r\n        </div>\r\n      }\r\n      \r\n      <!-- ÈåØË™§ÊèêÁ§∫ -->\r\n      @if (error() && !isLocked()) {\r\n        <div class=\"error-alert\">\r\n          <span class=\"error-icon\">‚ö†Ô∏è</span>\r\n          <span>{{ error() }}</span>\r\n        </div>\r\n      }\r\n      \r\n      <form class=\"login-form\" (ngSubmit)=\"onSubmit()\">\r\n        <!-- ÈÉµÁÆ± -->\r\n        <div class=\"form-group\">\r\n          <label for=\"email\">{{ t('auth.email') }}</label>\r\n          <div class=\"input-wrapper\">\r\n            <span class=\"input-icon\">üìß</span>\r\n            <input\r\n              type=\"email\"\r\n              id=\"email\"\r\n              [(ngModel)]=\"email\"\r\n              name=\"email\"\r\n              [placeholder]=\"t('auth.emailPlaceholder')\"\r\n              required\r\n              autocomplete=\"email\"\r\n              [disabled]=\"isLoading()\"\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- ÂØÜÁ¢º -->\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">{{ t('auth.password') }}</label>\r\n          <div class=\"input-wrapper\">\r\n            <span class=\"input-icon\">üîí</span>\r\n            <input\r\n              [type]=\"showPassword() ? 'text' : 'password'\"\r\n              id=\"password\"\r\n              [(ngModel)]=\"password\"\r\n              name=\"password\"\r\n              [placeholder]=\"t('auth.passwordPlaceholder')\"\r\n              required\r\n              autocomplete=\"current-password\"\r\n              [disabled]=\"isLoading()\"\r\n            />\r\n            <button \r\n              type=\"button\" \r\n              class=\"toggle-password\"\r\n              (click)=\"showPassword.set(!showPassword())\"\r\n            >\r\n              {{ showPassword() ? 'üôà' : 'üëÅÔ∏è' }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Ë®ò‰ΩèÊàë & ÂøòË®òÂØÜÁ¢º -->\r\n        <div class=\"form-options\">\r\n          <label class=\"checkbox-label\">\r\n            <input \r\n              type=\"checkbox\" \r\n              [(ngModel)]=\"rememberMe\" \r\n              name=\"rememberMe\"\r\n            />\r\n            <span>{{ t('auth.rememberMe') }}</span>\r\n          </label>\r\n          <a routerLink=\"/auth/forgot-password\" class=\"forgot-link\">\r\n            {{ t('auth.forgotPassword') }}\r\n          </a>\r\n        </div>\r\n        \r\n        <!-- ÁôªÂÖ•ÊåâÈàï -->\r\n        <button \r\n          type=\"submit\" \r\n          class=\"submit-btn\"\r\n          [disabled]=\"isLoading() || !email || !password || isLocked()\"\r\n        >\r\n          @if (isLoading()) {\r\n            <span class=\"loading-spinner\"></span>\r\n            <span>{{ t('auth.loggingIn') }}</span>\r\n          } @else {\r\n            <span>{{ t('auth.login') }}</span>\r\n          }\r\n        </button>\r\n      </form>\r\n      \r\n      <!-- ÂàÜÈöîÁ∑ö -->\r\n      <div class=\"divider\">\r\n        <span>{{ t('auth.or') }}</span>\r\n      </div>\r\n      \r\n      <!-- Á¨¨‰∏âÊñπÁôªÂÖ• - Telegram OAuth -->\r\n      <div class=\"social-login\">\r\n        <button \r\n          class=\"social-btn telegram full-width\" \r\n          (click)=\"initTelegramWidget()\"\r\n          [disabled]=\"telegramLoading()\"\r\n        >\r\n          @if (telegramLoading()) {\r\n            <span class=\"loading-spinner small\"></span>\r\n            <span>{{ t('auth.loadingTelegram') }}</span>\r\n          } @else {\r\n            <span class=\"social-icon\">‚úàÔ∏è</span>\r\n            <span>{{ t('auth.loginWithTelegram') }}</span>\r\n          }\r\n        </button>\r\n      </div>\r\n      \r\n      <!-- Ë®ªÂÜäÂÖ•Âè£ -->\r\n      <p class=\"register-link\">\r\n        {{ t('auth.noAccount') }}\r\n        <a routerLink=\"/auth/register\">{{ t('auth.registerNow') }}</a>\r\n      </p>\r\n    </div>\r\n  `,\r\n  styles: [`\r\n    .login-page {\r\n      color: var(--text-primary, #fff);\r\n    }\r\n    \r\n    .page-title {\r\n      font-size: 1.75rem;\r\n      font-weight: 700;\r\n      margin-bottom: 0.5rem;\r\n    }\r\n    \r\n    .page-subtitle {\r\n      color: var(--text-secondary, #888);\r\n      margin-bottom: 2rem;\r\n    }\r\n    \r\n    .error-alert {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 0.5rem;\r\n      padding: 0.875rem 1rem;\r\n      background: rgba(239, 68, 68, 0.1);\r\n      border: 1px solid rgba(239, 68, 68, 0.3);\r\n      border-radius: 8px;\r\n      color: #f87171;\r\n      margin-bottom: 1.5rem;\r\n      font-size: 0.875rem;\r\n    }\r\n    \r\n    .lockout-alert {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 0.75rem;\r\n      padding: 1rem 1.25rem;\r\n      background: rgba(251, 146, 60, 0.1);\r\n      border: 1px solid rgba(251, 146, 60, 0.3);\r\n      border-radius: 8px;\r\n      color: #fb923c;\r\n      margin-bottom: 1.5rem;\r\n    }\r\n    \r\n    .lockout-icon {\r\n      font-size: 1.5rem;\r\n    }\r\n    \r\n    .lockout-content {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 0.25rem;\r\n    }\r\n    \r\n    .lockout-title {\r\n      font-weight: 600;\r\n      font-size: 0.9rem;\r\n    }\r\n    \r\n    .lockout-time {\r\n      font-size: 0.8rem;\r\n      opacity: 0.8;\r\n    }\r\n    \r\n    .login-form {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 1.25rem;\r\n    }\r\n    \r\n    .form-group {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 0.5rem;\r\n    }\r\n    \r\n    .form-group label {\r\n      font-size: 0.875rem;\r\n      font-weight: 500;\r\n      color: var(--text-secondary, #aaa);\r\n    }\r\n    \r\n    .input-wrapper {\r\n      position: relative;\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n    \r\n    .input-icon {\r\n      position: absolute;\r\n      left: 1rem;\r\n      font-size: 1rem;\r\n      opacity: 0.5;\r\n    }\r\n    \r\n    .input-wrapper input {\r\n      width: 100%;\r\n      padding: 0.875rem 1rem 0.875rem 2.75rem;\r\n      background: var(--bg-secondary, #1a1a1a);\r\n      border: 1px solid var(--border-color, #333);\r\n      border-radius: 8px;\r\n      color: var(--text-primary, #fff);\r\n      font-size: 1rem;\r\n      transition: all 0.2s ease;\r\n    }\r\n    \r\n    .input-wrapper input:focus {\r\n      outline: none;\r\n      border-color: var(--primary, #3b82f6);\r\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\r\n    }\r\n    \r\n    .input-wrapper input::placeholder {\r\n      color: var(--text-muted, #666);\r\n    }\r\n    \r\n    .toggle-password {\r\n      position: absolute;\r\n      right: 1rem;\r\n      background: none;\r\n      border: none;\r\n      cursor: pointer;\r\n      font-size: 1rem;\r\n      opacity: 0.5;\r\n      transition: opacity 0.2s;\r\n    }\r\n    \r\n    .toggle-password:hover {\r\n      opacity: 1;\r\n    }\r\n    \r\n    .form-options {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      font-size: 0.875rem;\r\n    }\r\n    \r\n    .checkbox-label {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 0.5rem;\r\n      cursor: pointer;\r\n      color: var(--text-secondary, #aaa);\r\n    }\r\n    \r\n    .checkbox-label input[type=\"checkbox\"] {\r\n      width: 16px;\r\n      height: 16px;\r\n      accent-color: var(--primary, #3b82f6);\r\n    }\r\n    \r\n    .forgot-link {\r\n      color: var(--primary, #3b82f6);\r\n      text-decoration: none;\r\n      transition: color 0.2s;\r\n    }\r\n    \r\n    .forgot-link:hover {\r\n      color: var(--primary-hover, #60a5fa);\r\n      text-decoration: underline;\r\n    }\r\n    \r\n    .submit-btn {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      gap: 0.5rem;\r\n      padding: 0.875rem 1.5rem;\r\n      background: linear-gradient(135deg, #3b82f6, #8b5cf6);\r\n      border: none;\r\n      border-radius: 8px;\r\n      color: white;\r\n      font-size: 1rem;\r\n      font-weight: 600;\r\n      cursor: pointer;\r\n      transition: all 0.2s ease;\r\n      margin-top: 0.5rem;\r\n    }\r\n    \r\n    .submit-btn:hover:not(:disabled) {\r\n      transform: translateY(-1px);\r\n      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\r\n    }\r\n    \r\n    .submit-btn:disabled {\r\n      opacity: 0.6;\r\n      cursor: not-allowed;\r\n    }\r\n    \r\n    .loading-spinner {\r\n      width: 18px;\r\n      height: 18px;\r\n      border: 2px solid rgba(255, 255, 255, 0.3);\r\n      border-top-color: white;\r\n      border-radius: 50%;\r\n      animation: spin 0.8s linear infinite;\r\n    }\r\n    \r\n    @keyframes spin {\r\n      to { transform: rotate(360deg); }\r\n    }\r\n    \r\n    .divider {\r\n      display: flex;\r\n      align-items: center;\r\n      margin: 1.5rem 0;\r\n      color: var(--text-muted, #666);\r\n      font-size: 0.875rem;\r\n    }\r\n    \r\n    .divider::before,\r\n    .divider::after {\r\n      content: '';\r\n      flex: 1;\r\n      height: 1px;\r\n      background: var(--border-color, #333);\r\n    }\r\n    \r\n    .divider span {\r\n      padding: 0 1rem;\r\n    }\r\n    \r\n    .social-login {\r\n      display: flex;\r\n      gap: 1rem;\r\n    }\r\n    \r\n    .social-btn {\r\n      flex: 1;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      gap: 0.5rem;\r\n      padding: 0.75rem 1rem;\r\n      background: var(--bg-secondary, #1a1a1a);\r\n      border: 1px solid var(--border-color, #333);\r\n      border-radius: 8px;\r\n      color: var(--text-primary, #fff);\r\n      font-size: 0.875rem;\r\n      cursor: pointer;\r\n      transition: all 0.2s ease;\r\n    }\r\n    \r\n    .social-btn:hover {\r\n      background: var(--bg-tertiary, #252525);\r\n      border-color: var(--border-hover, #444);\r\n    }\r\n    \r\n    .social-btn.google .social-icon {\r\n      color: #ea4335;\r\n      font-weight: bold;\r\n    }\r\n    \r\n    .social-btn.telegram .social-icon {\r\n      color: #0088cc;\r\n    }\r\n    \r\n    .social-btn.full-width {\r\n      width: 100%;\r\n      flex: none;\r\n    }\r\n    \r\n    .social-btn.telegram {\r\n      background: linear-gradient(135deg, #0088cc, #0077b5);\r\n      border-color: #0088cc;\r\n    }\r\n    \r\n    .social-btn.telegram:hover {\r\n      background: linear-gradient(135deg, #0099dd, #0088cc);\r\n    }\r\n    \r\n    /* üÜï Telegram Widget ÂÆπÂô®Ê®£Âºè */\r\n    .telegram-widget-container {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      min-height: 48px;\r\n      width: 100%;\r\n    }\r\n    \r\n    .telegram-widget-container iframe {\r\n      border-radius: 8px !important;\r\n    }\r\n    \r\n    #telegram-login-widget {\r\n      display: flex;\r\n      justify-content: center;\r\n    }\r\n    \r\n    .loading-spinner.small {\r\n      width: 14px;\r\n      height: 14px;\r\n      border-width: 2px;\r\n    }\r\n    \r\n    .register-link {\r\n      text-align: center;\r\n      margin-top: 1.5rem;\r\n      color: var(--text-secondary, #888);\r\n      font-size: 0.875rem;\r\n    }\r\n    \r\n    .register-link a {\r\n      color: var(--primary, #3b82f6);\r\n      text-decoration: none;\r\n      font-weight: 500;\r\n    }\r\n    \r\n    .register-link a:hover {\r\n      text-decoration: underline;\r\n    }\r\n  `]\r\n})\r\nexport class LoginComponent implements OnInit, OnDestroy {\r\n  private authService = inject(AuthService);\r\n  private router = inject(Router);\r\n  private route = inject(ActivatedRoute);\r\n  private i18n = inject(I18nService);\r\n  private security = inject(FrontendSecurityService);\r\n  \r\n  // Ë°®ÂñÆÊï∏Êìö\r\n  email = '';\r\n  password = '';\r\n  rememberMe = false;\r\n  \r\n  // ÁãÄÊÖã\r\n  showPassword = signal(false);\r\n  isLoading = signal(false);\r\n  telegramLoading = signal(false);\r\n  telegramWidgetReady = signal(false);  // üÜï Widget ÊòØÂê¶Â∑≤ËºâÂÖ•\r\n  error = signal<string | null>(null);\r\n  \r\n  // P1.5: ÂÆâÂÖ®Â¢ûÂº∑ - ÁôªÂÖ•ÈôêÂà∂\r\n  isLocked = computed(() => this.security.isLocked());\r\n  lockoutRemaining = computed(() => this.security.lockoutRemaining());\r\n  attemptsLeft = computed(() => this.security.attemptsLeft());\r\n  \r\n  // Telegram ÈÖçÁΩÆ\r\n  private telegramBotUsername = '';\r\n  private telegramBotId = '';  // üÜï Êï∏Â≠óÊ†ºÂºèÁöÑ Bot ID\r\n  private lockoutCleanup: (() => void) | null = null;\r\n  \r\n  ngOnInit() {\r\n    // Ê™¢Êü•ÁôªÂÖ•ÈôêÂà∂ÁãÄÊÖã\r\n    this.checkLoginLimit();\r\n  }\r\n  \r\n  ngOnDestroy() {\r\n    // Ê∏ÖÁêÜÂÄíË®àÊôÇ\r\n    this.lockoutCleanup?.();\r\n  }\r\n  \r\n  private checkLoginLimit() {\r\n    const result = this.security.canAttemptLogin();\r\n    if (!result.allowed) {\r\n      this.error.set(result.message || '');\r\n      // ÂïüÂãïÂÄíË®àÊôÇ\r\n      this.lockoutCleanup = this.security.startLockoutCountdown((remaining) => {\r\n        if (remaining <= 0) {\r\n          this.error.set(null);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n  t(key: string): string {\r\n    return this.i18n.t(key);\r\n  }\r\n  \r\n  async onSubmit() {\r\n    if (!this.email || !this.password) return;\r\n    \r\n    // P1.5: ÂÆâÂÖ®Ê™¢Êü• - ÁôªÂÖ•ÈôêÂà∂\r\n    const canLogin = this.security.canAttemptLogin();\r\n    if (!canLogin.allowed) {\r\n      this.error.set(canLogin.message || '');\r\n      return;\r\n    }\r\n    \r\n    this.isLoading.set(true);\r\n    this.error.set(null);\r\n    \r\n    try {\r\n      const result = await this.authService.login({\r\n        email: this.email,\r\n        password: this.password,\r\n        remember: this.rememberMe\r\n      });\r\n      \r\n      if (result.success) {\r\n        // Ë®òÈåÑÊàêÂäüÂòóË©¶ÔºàÊ∏ÖÈô§ÈôêÂà∂Ôºâ\r\n        this.security.recordLoginAttempt(true, this.email);\r\n        \r\n        // Áç≤ÂèñÈáçÂÆöÂêë URL\r\n        const returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\r\n        this.router.navigateByUrl(returnUrl);\r\n      } else {\r\n        // Ë®òÈåÑÂ§±ÊïóÂòóË©¶\r\n        this.security.recordLoginAttempt(false, this.email);\r\n        \r\n        // È°ØÁ§∫ÈåØË™§ÂíåÂâ©È§òÂòóË©¶Ê¨°Êï∏\r\n        const attemptsLeft = this.security.attemptsLeft();\r\n        let errorMsg = result.error || this.t('auth.loginFailed');\r\n        if (attemptsLeft > 0 && attemptsLeft <= 3) {\r\n          errorMsg += ` (Ââ©È§ò ${attemptsLeft} Ê¨°ÂòóË©¶Ê©üÊúÉ)`;\r\n        }\r\n        this.error.set(errorMsg);\r\n        \r\n        // Ê™¢Êü•ÊòØÂê¶ÈúÄË¶ÅÈéñÂÆö\r\n        this.checkLoginLimit();\r\n      }\r\n    } catch (e: any) {\r\n      // Ë®òÈåÑÂ§±ÊïóÂòóË©¶\r\n      this.security.recordLoginAttempt(false, this.email);\r\n      this.error.set(e.message || this.t('auth.loginFailed'));\r\n      this.checkLoginLimit();\r\n    } finally {\r\n      this.isLoading.set(false);\r\n    }\r\n  }\r\n  \r\n  async socialLogin(provider: string) {\r\n    if (provider === 'telegram') {\r\n      await this.initTelegramWidget();  // üîß ‰ΩøÁî®ÂµåÂÖ•Âºè Widget\r\n    } else if (provider === 'google') {\r\n      await this.googleLogin();\r\n    }\r\n  }\r\n  \r\n  private async googleLogin() {\r\n    this.isLoading.set(true);\r\n    this.error.set(null);\r\n    \r\n    try {\r\n      // 1. Áç≤Âèñ Google ÈÖçÁΩÆ\r\n      const response = await fetch('/api/v1/oauth/google/config');\r\n      const config = await response.json();\r\n      \r\n      if (!config.success || !config.data?.enabled) {\r\n        this.error.set(this.t('auth.googleNotAvailable'));\r\n        return;\r\n      }\r\n      \r\n      // 2. ÊâìÈñã Google OAuth ÂΩàÁ™ó\r\n      this.openGoogleLoginPopup();\r\n      \r\n    } catch (e: any) {\r\n      console.error('Google login error:', e);\r\n      this.error.set(this.t('auth.googleNotAvailable'));\r\n    } finally {\r\n      this.isLoading.set(false);\r\n    }\r\n  }\r\n  \r\n  private openGoogleLoginPopup() {\r\n    // ÊßãÂª∫ÂõûË™ø URL\r\n    const origin = window.location.origin;\r\n    const callbackUrl = `${origin}/api/v1/oauth/google/callback`;\r\n    \r\n    // Google OAuth ÊéàÊ¨ä URL\r\n    const authUrl = `/api/v1/oauth/google/authorize?callback=${encodeURIComponent(callbackUrl)}`;\r\n    \r\n    // ÊâìÈñãÂΩàÁ™ó\r\n    const width = 550;\r\n    const height = 600;\r\n    const left = window.screenX + (window.outerWidth - width) / 2;\r\n    const top = window.screenY + (window.outerHeight - height) / 2;\r\n    \r\n    const popup = window.open(\r\n      authUrl,\r\n      'GoogleAuth',\r\n      `width=${width},height=${height},left=${left},top=${top},toolbar=no,menubar=no,scrollbars=yes`\r\n    );\r\n    \r\n    // Áõ£ËÅΩÂΩàÁ™óÊ∂àÊÅØ\r\n    const handleMessage = async (event: MessageEvent) => {\r\n      // Êé•Âèó‰æÜËá™‰ªª‰Ωï‰æÜÊ∫êÁöÑÊ∂àÊÅØÔºàÂõ†ÁÇ∫ Google ÂõûË™øÊúÉÁôºÈÄÅÊ∂àÊÅØÔºâ\r\n      if (event.data && event.data.type === 'google_auth') {\r\n        window.removeEventListener('message', handleMessage);\r\n        popup?.close();\r\n        \r\n        // ËôïÁêÜ Google Ë™çË≠âÊï∏Êìö\r\n        await this.handleGoogleAuth(event.data.auth);\r\n      } else if (event.data && event.data.type === 'google_auth_error') {\r\n        window.removeEventListener('message', handleMessage);\r\n        popup?.close();\r\n        \r\n        this.error.set(event.data.error || 'Google ÁôªÂÖ•Â§±Êïó');\r\n        this.isLoading.set(false);\r\n      }\r\n    };\r\n    \r\n    window.addEventListener('message', handleMessage);\r\n    \r\n    // Áõ£Ê∏¨ÂΩàÁ™óÈóúÈñâ\r\n    const checkClosed = setInterval(() => {\r\n      if (popup?.closed) {\r\n        clearInterval(checkClosed);\r\n        window.removeEventListener('message', handleMessage);\r\n        this.isLoading.set(false);\r\n      }\r\n    }, 500);\r\n  }\r\n  \r\n  private async handleGoogleAuth(authData: any) {\r\n    this.isLoading.set(true);\r\n    \r\n    try {\r\n      if (authData.access_token && authData.user) {\r\n        // Ë®≠ÁΩÆË™çË≠âÁãÄÊÖãÔºàÁõ¥Êé•‰ΩøÁî®ËøîÂõûÁöÑ tokenÔºâ\r\n        localStorage.setItem('tgm_access_token', authData.access_token);\r\n        if (authData.refresh_token) {\r\n          localStorage.setItem('tgm_refresh_token', authData.refresh_token);\r\n        }\r\n        localStorage.setItem('tgm_user', JSON.stringify(authData.user));\r\n        \r\n        // ÁôªÂÖ•ÊàêÂäüÔºåÈáçÂÆöÂêë\r\n        const returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\r\n        window.location.href = returnUrl;\r\n      } else {\r\n        this.error.set('Google ÁôªÂÖ•Â§±ÊïóÔºöÁÑ°ÊïàÁöÑË™çË≠âÊï∏Êìö');\r\n      }\r\n    } catch (e: any) {\r\n      this.error.set(e.message || 'Google ÁôªÂÖ•Â§±Êïó');\r\n    } finally {\r\n      this.isLoading.set(false);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * üÜï ÂàùÂßãÂåñÂµåÂÖ•Âºè Telegram Login Widget\r\n   * ÂÑ™ÈªûÔºöËá™ÂãïÊ™¢Ê∏¨Â∑≤ÁôªÂÖ•ÁöÑ Telegram Â∏≥ËôüÔºå‰∏ÄÈçµÁ¢∫Ë™çÁôªÂÖ•\r\n   */\r\n  async initTelegramWidget() {\r\n    this.telegramLoading.set(true);\r\n    this.error.set(null);\r\n    \r\n    try {\r\n      // 1. Áç≤Âèñ Telegram ÈÖçÁΩÆ\r\n      const config = await this.authService.getTelegramConfig();\r\n      \r\n      if (!config.enabled || !config.bot_id) {\r\n        this.error.set(this.t('auth.telegramNotConfigured'));\r\n        return;\r\n      }\r\n      \r\n      this.telegramBotUsername = config.bot_username || '';\r\n      this.telegramBotId = config.bot_id;\r\n      \r\n      // 2. ÂÆöÁæ©ÂÖ®Â±ÄÂõûË™øÂáΩÊï∏\r\n      (window as any).onTelegramAuth = (user: any) => {\r\n        console.log('Telegram auth callback:', user);\r\n        this.handleTelegramAuth(user);\r\n      };\r\n      \r\n      // üÜï ÂÑ™ÂÖàÂòóË©¶ WidgetÔºàÊîØÊåÅ‰∏ÄÈçµÁôªÂÖ•ÔºâÔºåÂ§±ÊïóÂâáÂõûÈÄÄÂà∞ OAuth\r\n      try {\r\n        await this.loadTelegramWidget();\r\n      } catch (widgetError) {\r\n        console.warn('Widget failed, falling back to OAuth:', widgetError);\r\n        this.openTelegramOAuth();\r\n      }\r\n      \r\n    } catch (e: any) {\r\n      console.error('Telegram login error:', e);\r\n      this.error.set(e.message || 'Telegram ÁôªÂÖ•Â§±Êïó');\r\n    } finally {\r\n      this.telegramLoading.set(false);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * üÜï ËºâÂÖ• Telegram Login WidgetÔºàÊîØÊåÅ‰∏ÄÈçµÁôªÂÖ•Ôºâ\r\n   */\r\n  private loadTelegramWidget(): Promise<void> {\r\n    return new Promise((resolve, reject) => {\r\n      // ÂâµÂª∫ÂΩàÁ™óÂÆπÂô®\r\n      const popup = window.open('', 'telegram-widget', 'width=550,height=470,scrollbars=yes');\r\n      if (!popup) {\r\n        reject(new Error('Popup blocked'));\r\n        return;\r\n      }\r\n      \r\n      // ÂØ´ÂÖ• Widget HTML\r\n      popup.document.write(`\r\n        <!DOCTYPE html>\r\n        <html>\r\n        <head>\r\n          <title>Telegram ÁôªÂÖ•</title>\r\n          <style>\r\n            body { \r\n              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n              display: flex; \r\n              flex-direction: column;\r\n              justify-content: center; \r\n              align-items: center; \r\n              height: 100vh; \r\n              margin: 0;\r\n              background: linear-gradient(135deg, #0f172a, #1e293b);\r\n              color: white;\r\n            }\r\n            h2 { margin-bottom: 30px; }\r\n            #telegram-login { min-height: 50px; }\r\n            .hint { color: #94a3b8; font-size: 14px; margin-top: 20px; text-align: center; }\r\n          </style>\r\n        </head>\r\n        <body>\r\n          <h2>‰ΩøÁî® Telegram ÁôªÂÖ•</h2>\r\n          <div id=\"telegram-login\"></div>\r\n          <p class=\"hint\">Â¶ÇÊûúÊÇ®Â∑≤Âú®ÁÄèË¶ΩÂô®ÁôªÂÖ• TelegramÔºåÂ∞áÈ°ØÁ§∫‰∏ÄÈçµÁôªÂÖ•ÊåâÈàï</p>\r\n          <script>\r\n            window.onTelegramAuth = function(user) {\r\n              window.opener.onTelegramAuth(user);\r\n              window.close();\r\n            };\r\n          </script>\r\n          <script async src=\"https://telegram.org/js/telegram-widget.js?22\"\r\n            data-telegram-login=\"${this.telegramBotUsername}\"\r\n            data-size=\"large\"\r\n            data-radius=\"8\"\r\n            data-onauth=\"onTelegramAuth(user)\"\r\n            data-request-access=\"write\">\r\n          </script>\r\n        </body>\r\n        </html>\r\n      `);\r\n      popup.document.close();\r\n      \r\n      // Áõ£ËÅΩÂΩàÁ™óÈóúÈñâ\r\n      const checkClosed = setInterval(() => {\r\n        if (popup.closed) {\r\n          clearInterval(checkClosed);\r\n          resolve();\r\n        }\r\n      }, 500);\r\n      \r\n      // 5ÁßíË∂ÖÊôÇ\r\n      setTimeout(() => {\r\n        clearInterval(checkClosed);\r\n        resolve();\r\n      }, 30000);\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * üîß ÊîπÁî® OAuth URL ÈáçÂÆöÂêëÊñπÂºèÔºàÊõ¥ÂèØÈù†Ôºâ\r\n   * ‰∏ç‰æùË≥¥Â§ñÈÉ®ËÖ≥Êú¨Âä†ËºâÔºåÁõ¥Êé•Ë∑≥ËΩâÂà∞ Telegram ÊéàÊ¨äÈ†ÅÈù¢\r\n   */\r\n  private openTelegramOAuth(): void {\r\n    // ÊßãÂª∫ÂõûË™ø URL\r\n    const callbackUrl = `${window.location.origin}/auth/telegram-callback`;\r\n    \r\n    // ÊßãÂª∫ Telegram OAuth URL\r\n    const authUrl = `https://oauth.telegram.org/auth?bot_id=${this.telegramBotId}&origin=${encodeURIComponent(window.location.origin)}&request_access=write&return_to=${encodeURIComponent(callbackUrl)}`;\r\n    \r\n    console.log('Opening Telegram OAuth:', authUrl);\r\n    \r\n    // Âú®Êñ∞Á™óÂè£ÊâìÈñãÔºàÈÅøÂÖçÈõ¢ÈñãÁï∂ÂâçÈ†ÅÈù¢Ôºâ\r\n    const width = 550;\r\n    const height = 470;\r\n    const left = (window.innerWidth - width) / 2;\r\n    const top = (window.innerHeight - height) / 2;\r\n    \r\n    const popup = window.open(\r\n      authUrl,\r\n      'telegram-oauth',\r\n      `width=${width},height=${height},left=${left},top=${top},scrollbars=yes`\r\n    );\r\n    \r\n    // Áõ£ËÅΩÊéàÊ¨äÁµêÊûú\r\n    if (popup) {\r\n      const checkPopup = setInterval(() => {\r\n        try {\r\n          if (popup.closed) {\r\n            clearInterval(checkPopup);\r\n            // Áî®Êà∂ÈóúÈñâ‰∫ÜÂΩàÁ™ó\r\n            this.telegramLoading.set(false);\r\n          }\r\n        } catch (e) {\r\n          // Ë∑®ÂüüÈåØË™§ÔºåÂøΩÁï•\r\n        }\r\n      }, 500);\r\n    }\r\n  }\r\n  \r\n  private async handleTelegramAuth(authData: any) {\r\n    this.telegramLoading.set(true);\r\n    this.error.set(null);\r\n    \r\n    console.log('[TelegramAuth] Processing auth data:', authData);\r\n    \r\n    try {\r\n      // üÜï P1.4: ÈåØË™§ÈáçË©¶Ê©üÂà∂ÔºàÊúÄÂ§öÈáçË©¶ 3 Ê¨°Ôºâ\r\n      let result: { success: boolean; error?: string } = { success: false };\r\n      let retries = 0;\r\n      const maxRetries = 3;\r\n      \r\n      while (retries < maxRetries) {\r\n        try {\r\n          result = await this.authService.telegramLogin(authData);\r\n          break;  // ÊàêÂäüÂâáË∑≥Âá∫Âæ™Áí∞\r\n        } catch (e: any) {\r\n          retries++;\r\n          console.warn(`[TelegramAuth] Retry ${retries}/${maxRetries}:`, e.message);\r\n          if (retries >= maxRetries) throw e;\r\n          await new Promise(r => setTimeout(r, 1000 * retries));  // ÈÅûÂ¢ûÂª∂ÈÅ≤\r\n        }\r\n      }\r\n      \r\n      if (result.success) {\r\n        console.log('[TelegramAuth] Login successful, redirecting...');\r\n        // üÜï ÁôªÂÖ•ÊàêÂäüÔºå‰ΩøÁî® window.location Âº∑Âà∂Âà∑Êñ∞‰ª•Á¢∫‰øùÁãÄÊÖãÊõ¥Êñ∞\r\n        const returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/dashboard';\r\n        window.location.href = returnUrl;\r\n      } else {\r\n        console.error('[TelegramAuth] Login failed:', result.error);\r\n        this.error.set(result.error || this.t('auth.telegramLoginFailed'));\r\n      }\r\n    } catch (e: any) {\r\n      console.error('[TelegramAuth] Exception:', e);\r\n      this.error.set(e.message || this.t('auth.telegramLoginFailed'));\r\n    } finally {\r\n      this.telegramLoading.set(false);\r\n    }\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
