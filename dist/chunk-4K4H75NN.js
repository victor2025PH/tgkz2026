import{h as X,s as te}from"./chunk-YFYBFZCX.js";import{c as ie}from"./chunk-HZ3TQLAC.js";import{b as ee}from"./chunk-P7RLCKVL.js";import{a as H}from"./chunk-KD3U4L4Z.js";import{a as W,b as U,c as G,f as O,k as Q,l as q,m as z,t as P}from"./chunk-BCTLVZY2.js";import{b as Z}from"./chunk-6FHZTSI7.js";import{o as V}from"./chunk-35776WZA.js";import{a as J,b as Y}from"./chunk-6MHYDRXN.js";import{$a as j,Ab as R,Eb as F,Fb as T,Gb as M,La as B,Mb as $,O as D,T as c,U as m,Wb as k,Ya as C,Za as v,ab as A,bb as y,cb as f,da as _,db as i,eb as t,fb as w,jb as h,nb as p,pb as u,ta as K,vb as E,wb as L,xa as s,xb as n,yb as x,zb as b}from"./chunk-MB4RORS3.js";var le=()=>["short","medium","long"],I=(l,a)=>a.id,se=(l,a)=>a.phone,de=(l,a)=>a.name;function ue(l,a){l&1&&(i(0,"span",7),w(1,"span",20),n(2," AI \u5DF2\u9023\u63A5 "),t())}function ce(l,a){l&1&&(i(0,"span",8),n(1," \u672A\u914D\u7F6E AI "),t())}function me(l,a){if(l&1){let e=h();i(0,"button",21),p("click",function(){let o=c(e).$implicit,d=u();return m(d.activeTab.set(o.id))}),i(1,"span",22),n(2),t(),i(3,"span"),n(4),t()()}if(l&2){let e=a.$implicit,r=u();E("bg-gradient-to-r",r.activeTab()===e.id)("from-purple-500",r.activeTab()===e.id)("to-pink-500",r.activeTab()===e.id)("text-white",r.activeTab()===e.id)("shadow-lg",r.activeTab()===e.id)("text-slate-400",r.activeTab()!==e.id)("hover:text-white",r.activeTab()!==e.id)("hover:bg-slate-700/50",r.activeTab()!==e.id),s(2),x(e.icon),s(2),x(e.label)}}function pe(l,a){if(l&1){let e=h();i(0,"div",29)(1,"div")(2,"label",55),n(3,"\u804A\u5929\u6A21\u5F0F"),t(),i(4,"div",56)(5,"button",57),p("click",function(){c(e);let o=u(2);return m(o.setAutoChatMode("full"))}),i(6,"div",58),n(7,"\u{1F680}"),t(),i(8,"div",59),n(9,"\u5168\u81EA\u52D5"),t(),i(10,"div",60),n(11,"AI \u81EA\u52D5\u767C\u9001\u56DE\u8986"),t()(),i(12,"button",57),p("click",function(){c(e);let o=u(2);return m(o.setAutoChatMode("semi"))}),i(13,"div",58),n(14,"\u{1F465}"),t(),i(15,"div",59),n(16,"\u534A\u81EA\u52D5"),t(),i(17,"div",60),n(18,"\u751F\u6210\u5EFA\u8B70\u5F8C\u78BA\u8A8D\u767C\u9001"),t()(),i(19,"button",57),p("click",function(){c(e);let o=u(2);return m(o.setAutoChatMode("assist"))}),i(20,"div",58),n(21,"\u{1F4A1}"),t(),i(22,"div",59),n(23,"\u8F14\u52A9\u6A21\u5F0F"),t(),i(24,"div",60),n(25,"\u50C5\u63D0\u4F9B\u5EFA\u8B70\u4E0D\u767C\u9001"),t()()()(),i(26,"div",61)(27,"div",62)(28,"div",49)(29,"span",63),n(30,"\u{1F44B}"),t(),i(31,"div")(32,"div",59),n(33,"\u81EA\u52D5\u554F\u5019"),t(),i(34,"div",60),n(35,"\u65B0 Lead \u81EA\u52D5\u767C\u9001\u554F\u5019"),t()()(),i(36,"input",64),p("change",function(){c(e);let o=u(2);return m(o.toggleAutoGreeting())}),t()(),i(37,"div",62)(38,"div",49)(39,"span",63),n(40,"\u{1F4AC}"),t(),i(41,"div")(42,"div",59),n(43,"\u81EA\u52D5\u56DE\u8986"),t(),i(44,"div",60),n(45,"\u7528\u6236\u79C1\u4FE1\u81EA\u52D5\u56DE\u8986"),t()()(),i(46,"input",64),p("change",function(){c(e);let o=u(2);return m(o.toggleAutoReply())}),t()()()()}if(l&2){let e=u(2);s(5),E("bg-emerald-500/20",e.autoChatMode()==="full")("border-emerald-500",e.autoChatMode()==="full")("bg-slate-700/50",e.autoChatMode()!=="full")("border-slate-600",e.autoChatMode()!=="full"),s(7),E("bg-cyan-500/20",e.autoChatMode()==="semi")("border-cyan-500",e.autoChatMode()==="semi")("bg-slate-700/50",e.autoChatMode()!=="semi")("border-slate-600",e.autoChatMode()!=="semi"),s(7),E("bg-amber-500/20",e.autoChatMode()==="assist")("border-amber-500",e.autoChatMode()==="assist")("bg-slate-700/50",e.autoChatMode()!=="assist")("border-slate-600",e.autoChatMode()!=="assist"),s(17),f("checked",e.autoGreetingEnabled()),s(10),f("checked",e.autoReplyEnabled())}}function xe(l,a){if(l&1&&w(0,"img",66),l&2){let e=u().$implicit;f("src",e.avatar,K)}}function ge(l,a){if(l&1&&(i(0,"span",67),n(1),t()),l&2){let e=u().$implicit;s(),x((e.username==null?null:e.username.charAt(0))||"?")}}function _e(l,a){if(l&1&&(i(0,"div",46)(1,"div",49)(2,"div",65),C(3,xe,1,1,"img",66)(4,ge,2,1,"span",67),t(),i(5,"div")(6,"div",59),n(7),t(),i(8,"div",60),n(9),t()()(),i(10,"span",68),w(11,"span",20),n(12," \u5728\u7DDA "),t()()),l&2){let e=a.$implicit;s(3),v(e.avatar?3:4),s(4),x(e.username||e.phone),s(2),R("\u4ECA\u65E5: ",e.sentToday||0,"/",e.dailyLimit||50," \u689D")}}function Ce(l,a){l&1&&(i(0,"div",47)(1,"div",69),n(2,"\u{1F4E4}"),t(),i(3,"p"),n(4,"\u6C92\u6709\u53EF\u7528\u7684\u767C\u9001\u5E33\u865F"),t(),i(5,"p",70),n(6,"\u8ACB\u5728\u5E33\u865F\u7BA1\u7406\u4E2D\u6DFB\u52A0\u4E26\u8A2D\u7F6E\u70BA\u300C\u767C\u9001\u300D\u89D2\u8272"),t()())}function ve(l,a){if(l&1&&(i(0,"div",51)(1,"div",71),n(2),t(),i(3,"div",72)(4,"div",59),n(5),t(),i(6,"div",44),n(7),t()(),i(8,"span",73),w(9,"span",20),n(10," \u5DF2\u9023\u63A5 "),t()()),l&2){let e=u(2);s(2),b(" ",e.getProviderIcon(e.aiService.defaultModel().provider)," "),s(3),x(e.aiService.defaultModel().modelName),s(2),x(e.getProviderName(e.aiService.defaultModel().provider))}}function he(l,a){l&1&&(i(0,"div",52)(1,"div",49)(2,"span",5),n(3,"\u26A0\uFE0F"),t(),i(4,"div")(5,"div",74),n(6,"\u672A\u914D\u7F6E AI \u6A21\u578B"),t(),i(7,"div",44),n(8,"\u8ACB\u5148\u6DFB\u52A0 AI \u6A21\u578B\u624D\u80FD\u4F7F\u7528\u81EA\u52D5\u804A\u5929\u529F\u80FD"),t()()()())}function fe(l,a){if(l&1){let e=h();i(0,"div",18)(1,"div",23)(2,"div",2)(3,"div",3)(4,"div",24),n(5," \u{1F916} "),t(),i(6,"div")(7,"h3",25),n(8,"AI \u81EA\u52D5\u804A\u5929"),t(),i(9,"p",26),n(10,"\u958B\u555F\u5F8C\uFF0CAI \u5C07\u81EA\u52D5\u554F\u5019\u65B0 Lead \u4E26\u56DE\u8986\u79C1\u4FE1"),t()()(),i(11,"button",27),p("click",function(){c(e);let o=u();return m(o.toggleAutoChat())}),w(12,"span",28),t()(),C(13,pe,47,26,"div",29),t(),i(14,"div",30)(15,"div",2)(16,"div",3)(17,"div",31),n(18," \u{1F680} "),t(),i(19,"div")(20,"h3",32),n(21," \u667A\u80FD\u71DF\u92B7\u4E2D\u5FC3 "),i(22,"span",33),n(23,"\u6574\u5408"),t()(),i(24,"p",26),n(25,"\u4E00\u9375\u555F\u52D5\u71DF\u92B7\u4EFB\u52D9 - AI \u81EA\u52D5\u914D\u7F6E\u89D2\u8272\u548C\u7B56\u7565"),t()()(),i(26,"button",34),p("click",function(){c(e);let o=u();return m(o.goToSmartMarketing())}),i(27,"span"),n(28,"\u{1F680}"),t(),n(29," \u524D\u5F80\u4F7F\u7528 "),t()(),i(30,"div",35)(31,"div",36)(32,"div",37)(33,"div",38),n(34,"\u{1F4B0}"),t(),i(35,"div",39),n(36,"\u4FC3\u9032\u9996\u55AE"),t()(),i(37,"div",37)(38,"div",38),n(39,"\u{1F49D}"),t(),i(40,"div",39),n(41,"\u633D\u56DE\u6D41\u5931"),t()(),i(42,"div",37)(43,"div",38),n(44,"\u{1F389}"),t(),i(45,"div",39),n(46,"\u793E\u7FA4\u6D3B\u8E8D"),t()(),i(47,"div",37)(48,"div",38),n(49,"\u{1F527}"),t(),i(50,"div",39),n(51,"\u552E\u5F8C\u670D\u52D9"),t()()(),i(52,"p",40),n(53," \u{1F4A1} \u9078\u64C7\u76EE\u6A19 \u2192 AI \u81EA\u52D5\u914D\u7F6E \u2192 \u4E00\u9375\u555F\u52D5\uFF0C\u5DF2\u6574\u5408\u591A\u89D2\u8272\u5354\u4F5C\u548C AI \u81EA\u4E3B\u529F\u80FD "),t()()(),i(54,"div",41)(55,"div",42)(56,"span",5),n(57,"\u{1F4E4}"),t(),i(58,"div")(59,"h3",43),n(60,"\u767C\u9001\u5E33\u865F"),t(),i(61,"p",44),n(62,"\u9078\u64C7\u7528\u65BC\u767C\u9001\u6D88\u606F\u7684\u5E33\u865F"),t()()(),i(63,"div",45),A(64,_e,13,4,"div",46,se,!1,Ce,7,0,"div",47),t()(),i(67,"div",41)(68,"div",48)(69,"div",49)(70,"span",5),n(71,"\u{1F9E0}"),t(),i(72,"div")(73,"h3",43),n(74,"AI \u6A21\u578B"),t(),i(75,"p",44),n(76,"\u7576\u524D\u4F7F\u7528\u7684 AI \u6A21\u578B"),t()()(),i(77,"button",50),p("click",function(){c(e);let o=u();return m(o.activeTab.set("models"))}),n(78," \u914D\u7F6E\u6A21\u578B \u2192 "),t()(),C(79,ve,11,3,"div",51)(80,he,9,0,"div",52),t(),i(81,"div",53)(82,"button",54),p("click",function(){c(e);let o=u();return m(o.saveQuickSettings())}),n(83," \u{1F4BE} \u4FDD\u5B58\u8A2D\u7F6E "),t()()()}if(l&2){let e=u();s(11),E("bg-emerald-500",e.autoChatEnabled())("bg-slate-600",!e.autoChatEnabled()),s(),E("translate-x-8",e.autoChatEnabled()),s(),v(e.autoChatEnabled()?13:-1),s(51),y(e.senderAccounts()),s(15),v(e.aiService.defaultModel()?79:80)}}function be(l,a){l&1&&(i(0,"span",68),w(1,"span",20),n(2," \u5DF2\u9023\u63A5 "),t())}function Se(l,a){l&1&&(i(0,"span",96),n(1,"\u672A\u6E2C\u8A66"),t())}function Ee(l,a){l&1&&(w(0,"span",100),n(1," \u6E2C\u8A66\u4E2D... "))}function Ae(l,a){l&1&&n(0," \u6E2C\u8A66 ")}function ye(l,a){if(l&1){let e=h();i(0,"div",80)(1,"div",3)(2,"div",94)(3,"span",5),n(4,"\u{1F999}"),t()(),i(5,"div")(6,"div",59),n(7),t(),i(8,"div",95),n(9),t()()(),i(10,"div",49),C(11,be,3,0,"span",68)(12,Se,2,0,"span",96),i(13,"button",97),p("click",function(){let o=c(e).$implicit,d=u(2);return m(d.testModel(o))}),C(14,Ee,2,0)(15,Ae,1,0),t(),i(16,"button",98),p("click",function(){let o=c(e).$implicit,d=u(2);return m(d.setAsDefault(o))}),n(17),t(),i(18,"button",99),p("click",function(){let o=c(e).$implicit,d=u(2);return m(d.deleteModel(o))}),n(19," \u2715 "),t()()()}if(l&2){let e,r,o=a.$implicit,d=u(2);s(7),x(o.displayName||o.modelName),s(2),x(o.apiEndpoint),s(2),v(o.isConnected?11:12),s(2),f("disabled",d.aiService.testingModelIds().has(o.id)),s(),v(d.aiService.testingModelIds().has(o.id)?14:15),s(2),L(((e=d.aiService.defaultModel())==null?null:e.id)===o.id?"bg-emerald-500 text-white":"bg-slate-600 text-slate-300 hover:bg-slate-500"),s(),b(" ",((r=d.aiService.defaultModel())==null?null:r.id)===o.id?"\u9ED8\u8A8D":"\u8A2D\u70BA\u9ED8\u8A8D"," ")}}function we(l,a){if(l&1){let e=h();i(0,"div",81)(1,"p",101),n(2,"\u4F7F\u7528\u672C\u5730 Ollama \u53EF\u514D\u8CBB\u7121\u9650\u8ABF\u7528 AI"),t(),i(3,"button",102),p("click",function(){c(e);let o=u(2);return m(o.showAddLocalModel.set(!0))}),n(4," \u{1F999} \u5FEB\u901F\u914D\u7F6E\u672C\u5730 AI "),t()()}}function De(l,a){l&1&&(i(0,"span",68),w(1,"span",20),n(2," \u5DF2\u9023\u63A5 "),t())}function Ie(l,a){l&1&&(i(0,"span",104),n(1,"\u672A\u9023\u63A5"),t())}function Fe(l,a){l&1&&(w(0,"span",100),n(1," \u6E2C\u8A66\u4E2D... "))}function Te(l,a){l&1&&n(0," \u6E2C\u8A66 ")}function Me(l,a){if(l&1){let e=h();i(0,"div",83)(1,"div",3)(2,"div",103)(3,"span",5),n(4),t()(),i(5,"div")(6,"div",59),n(7),t(),i(8,"div",44),n(9),t()()(),i(10,"div",49),C(11,De,3,0,"span",68)(12,Ie,2,0,"span",104),i(13,"button",97),p("click",function(){let o=c(e).$implicit,d=u(2);return m(d.testModel(o))}),C(14,Fe,2,0)(15,Te,1,0),t(),i(16,"button",98),p("click",function(){let o=c(e).$implicit,d=u(2);return m(d.setAsDefault(o))}),n(17),t(),i(18,"button",99),p("click",function(){let o=c(e).$implicit,d=u(2);return m(d.deleteModel(o))}),n(19," \u2715 "),t()()()}if(l&2){let e,r,o=a.$implicit,d=u(2);s(2),E("bg-emerald-500/20",o.provider==="openai")("bg-purple-500/20",o.provider==="claude")("bg-blue-500/20",o.provider==="gemini"),s(2),x(d.getProviderIcon(o.provider)),s(3),x(o.displayName||o.modelName),s(2),x(d.getProviderName(o.provider)),s(2),v(o.isConnected?11:12),s(2),f("disabled",d.aiService.testingModelIds().has(o.id)),s(),v(d.aiService.testingModelIds().has(o.id)?14:15),s(2),L(((e=d.aiService.defaultModel())==null?null:e.id)===o.id?"bg-purple-500 text-white":"bg-slate-600 text-slate-300 hover:bg-slate-500"),s(),b(" ",((r=d.aiService.defaultModel())==null?null:r.id)===o.id?"\u9ED8\u8A8D":"\u8A2D\u70BA\u9ED8\u8A8D"," ")}}function ke(l,a){if(l&1){let e=h();i(0,"div",81)(1,"p",101),n(2,"\u6DFB\u52A0 OpenAI\u3001Claude \u6216 Gemini \u7B49\u96F2\u7AEF\u6A21\u578B"),t(),i(3,"button",105),p("click",function(){c(e);let o=u(2);return m(o.showAddModel.set(!0))}),n(4," + \u6DFB\u52A0\u96F2\u7AEF\u6A21\u578B "),t()()}}function Be(l,a){l&1&&(i(0,"span",107)(1,"span",114),n(2,"\u27F3"),t(),n(3," \u4FDD\u5B58\u4E2D... "),t())}function Ve(l,a){l&1&&(i(0,"span",107),n(1," \u2713 \u5DF2\u4FDD\u5B58 "),t())}function Pe(l,a){if(l&1&&(i(0,"option",112),n(1),t()),l&2){let e=a.$implicit,r=u(3);f("value",e.id)("selected",e.id===r.aiService.modelUsage().intentRecognition),s(),b(" ",e.displayName||e.modelName," ")}}function Ne(l,a){if(l&1&&(i(0,"option",112),n(1),t()),l&2){let e=a.$implicit,r=u(3);f("value",e.id)("selected",e.id===r.aiService.modelUsage().dailyChat),s(),b(" ",e.displayName||e.modelName," ")}}function Le(l,a){if(l&1&&(i(0,"option",112),n(1),t()),l&2){let e=a.$implicit,r=u(3);f("value",e.id)("selected",e.id===r.aiService.modelUsage().multiRoleScript),s(),b(" ",e.displayName||e.modelName," ")}}function Ke(l,a){if(l&1){let e=h();i(0,"div",84)(1,"div",48)(2,"h4",106),n(3,"\u6A21\u578B\u7528\u9014\u5206\u914D"),t(),C(4,Be,4,0,"span",107)(5,Ve,2,0,"span",107),t(),i(6,"div",108)(7,"div")(8,"label",109),n(9,"\u610F\u5716\u8B58\u5225"),t(),i(10,"select",110),p("change",function(o){c(e);let d=u(2);return m(d.onModelUsageChange("intentRecognition",o))}),i(11,"option",111),n(12,"\u9078\u64C7\u6A21\u578B"),t(),A(13,Pe,2,3,"option",112,I),t()(),i(15,"div")(16,"label",109),n(17,"\u65E5\u5E38\u5C0D\u8A71"),t(),i(18,"select",110),p("change",function(o){c(e);let d=u(2);return m(d.onModelUsageChange("dailyChat",o))}),i(19,"option",111),n(20,"\u9078\u64C7\u6A21\u578B"),t(),A(21,Ne,2,3,"option",112,I),t()(),i(23,"div")(24,"label",109),n(25,"\u591A\u89D2\u8272\u5287\u672C"),t(),i(26,"select",110),p("change",function(o){c(e);let d=u(2);return m(d.onModelUsageChange("multiRoleScript",o))}),i(27,"option",111),n(28,"\u9078\u64C7\u6A21\u578B"),t(),A(29,Le,2,3,"option",112,I),t()()(),i(31,"p",113),n(32,"\u{1F4A1} \u9078\u64C7\u5F8C\u81EA\u52D5\u4FDD\u5B58\uFF0C\u4E0D\u540C\u7528\u9014\u53EF\u4EE5\u4F7F\u7528\u4E0D\u540C\u7684 AI \u6A21\u578B"),t()()}if(l&2){let e=u(2);s(4),v(e.isSavingUsage()?4:e.usageSaved()?5:-1),s(6),f("value",e.aiService.modelUsage().intentRecognition),s(3),y(e.aiService.models()),s(5),f("value",e.aiService.modelUsage().dailyChat),s(3),y(e.aiService.models()),s(5),f("value",e.aiService.modelUsage().multiRoleScript),s(3),y(e.aiService.models())}}function je(l,a){l&1&&(w(0,"span",121),n(1," \u6E2C\u8A66\u4E2D... "))}function Re(l,a){l&1&&n(0," \u{1F517} \u6E2C\u8A66\u9023\u63A5 ")}function $e(l,a){if(l&1){let e=h();i(0,"button",122),p("click",function(){c(e);let o=u(3);return m(o.testTtsVoice())}),n(1," \u{1F50A} \u8A66\u807D\u8A9E\u97F3 "),t()}}function We(l,a){if(l&1&&(i(0,"span",123),n(1),t()),l&2){let e=u(4);s(),b("\xB7 \u5EF6\u9072: ",e.ttsLatency(),"ms")}}function Ue(l,a){if(l&1&&(i(0,"div",120),w(1,"span",20),n(2," TTS \u670D\u52D9\u5DF2\u9023\u63A5 "),C(3,We,2,1,"span",123),t()),l&2){let e=u(3);s(3),v(e.ttsLatency()>0?3:-1)}}function Ge(l,a){if(l&1){let e=h();i(0,"div",92)(1,"div")(2,"label",55),n(3,"TTS \u670D\u52D9\u7AEF\u9EDE"),t(),i(4,"input",115),M("ngModelChange",function(o){c(e);let d=u(2);return T(d.ttsEndpoint,o)||(d.ttsEndpoint=o),m(o)}),t(),i(5,"p",116),n(6,"\u652F\u6301 GPT-SoVITS\u3001VITS \u7B49\u672C\u5730\u8A9E\u97F3\u670D\u52D9"),t()(),i(7,"div",117)(8,"button",118),p("click",function(){c(e);let o=u(2);return m(o.testTtsConnection())}),C(9,je,2,0)(10,Re,1,0),t(),C(11,$e,2,0,"button",119),t(),C(12,Ue,4,1,"div",120),t()}if(l&2){let e=u(2);s(4),F("ngModel",e.ttsEndpoint),s(4),f("disabled",e.isTestingTts()),s(),v(e.isTestingTts()?9:10),s(2),v(e.ttsConnected()?11:-1),s(),v(e.ttsConnected()?12:-1)}}function Oe(l,a){l&1&&(i(0,"div",93)(1,"p",124),n(2,"\u958B\u555F\u5F8C\u53EF\u914D\u7F6E GPT-SoVITS \u7B49\u8A9E\u97F3\u670D\u52D9\uFF0C\u8B93 AI \u64C1\u6709\u8A9E\u97F3\u80FD\u529B"),t()())}function Qe(l,a){if(l&1){let e=h();i(0,"div",18)(1,"div",75)(2,"div",48)(3,"h3",76)(4,"span"),n(5,"\u{1F999}"),t(),n(6," \u672C\u5730 AI "),i(7,"span",77),n(8,"\u63A8\u85A6 - \u514D\u8CBB\u7121\u9650"),t()(),i(9,"button",78),p("click",function(){c(e);let o=u();return m(o.showAddLocalModel.set(!0))}),n(10," + \u6DFB\u52A0\u672C\u5730 AI "),t()(),i(11,"div",79),A(12,ye,20,8,"div",80,I,!1,we,5,0,"div",81),t()(),i(15,"div",41)(16,"div",48)(17,"h3",76)(18,"span"),n(19,"\u2601\uFE0F"),t(),n(20," \u96F2\u7AEF AI "),t(),i(21,"button",82),p("click",function(){c(e);let o=u();return m(o.showAddModel.set(!0))}),n(22," + \u6DFB\u52A0\u96F2\u7AEF\u6A21\u578B "),t()(),i(23,"div",79),A(24,Me,20,15,"div",83,I,!1,ke,5,0,"div",81),t(),C(27,Ke,33,4,"div",84),t(),i(28,"div",85)(29,"div",48)(30,"h3",76)(31,"span"),n(32,"\u{1F50A}"),t(),n(33," \u8A9E\u97F3\u8F38\u51FA (TTS) "),i(34,"span",86),n(35,"\u53EF\u9078"),t()(),i(36,"label",87)(37,"input",88),M("ngModelChange",function(o){c(e);let d=u();return T(d.ttsEnabled,o)||(d.ttsEnabled=o),m(o)}),p("change",function(){c(e);let o=u();return m(o.saveTtsSettings())}),t(),w(38,"div",89),i(39,"span",90),n(40),t()()(),i(41,"p",91),n(42,"\u555F\u7528\u5F8C\uFF0CAI \u56DE\u8986\u5C07\u81EA\u52D5\u8F49\u63DB\u70BA\u8A9E\u97F3\u64AD\u653E"),t(),C(43,Ge,13,5,"div",92)(44,Oe,3,0,"div",93),t()()}if(l&2){let e=u();s(12),y(e.localModels()),s(12),y(e.cloudModels()),s(3),v(e.aiService.models().length>0?27:-1),s(10),F("ngModel",e.ttsEnabled),s(3),x(e.ttsEnabled?"\u5DF2\u555F\u7528":"\u5DF2\u95DC\u9589"),s(3),v(e.ttsEnabled?43:44)}}function qe(l,a){if(l&1){let e=h();i(0,"button",155),p("click",function(){let o=c(e).$implicit,d=u(2);return m(d.selectPersonaTemplate(o.id))}),i(1,"div",69),n(2),t(),i(3,"div",156),n(4),t(),i(5,"div",157),n(6),t()()}if(l&2){let e=a.$implicit,r=u(2);E("border-purple-500",r.selectedPersonaTemplate()===e.id)("bg-purple-500/10",r.selectedPersonaTemplate()===e.id)("border-transparent",r.selectedPersonaTemplate()!==e.id)("bg-slate-700/50",r.selectedPersonaTemplate()!==e.id)("hover:bg-slate-700",r.selectedPersonaTemplate()!==e.id),s(2),x(e.icon),s(),E("text-purple-400",r.selectedPersonaTemplate()===e.id)("text-white",r.selectedPersonaTemplate()!==e.id),s(),b(" ",e.name," "),s(2),x(e.description)}}function ze(l,a){if(l&1){let e=h();i(0,"button",158),p("click",function(){let o=c(e).$implicit,d=u(2);return d.setStyle(o.id),m(d.markStrategyDirty())}),i(1,"div",58),n(2),t(),i(3,"div",159),n(4),t()()}if(l&2){let e=a.$implicit,r=u(2);E("border-purple-500",r.currentStyle()===e.id)("bg-purple-500/10",r.currentStyle()===e.id)("border-transparent",r.currentStyle()!==e.id)("bg-slate-700/50",r.currentStyle()!==e.id),s(2),x(e.icon),s(),E("text-purple-400",r.currentStyle()===e.id)("text-white",r.currentStyle()!==e.id),s(),b(" ",e.label," ")}}function He(l,a){if(l&1){let e=h();i(0,"button",160),p("click",function(){let o=c(e).$implicit,d=u(2);return d.setResponseLength(o),m(d.markStrategyDirty())}),n(1),t()}if(l&2){let e=a.$implicit,r=u(2);E("bg-purple-500",r.responseLength()===e)("text-white",r.responseLength()===e)("bg-slate-700",r.responseLength()!==e)("text-slate-300",r.responseLength()!==e),s(),b(" ",e==="short"?"\u7C21\u77ED":e==="medium"?"\u9069\u4E2D":"\u8A73\u7D30"," ")}}function Je(l,a){if(l&1){let e=h();i(0,"label",141)(1,"div",49)(2,"span",63),n(3),t(),i(4,"div")(5,"div",150),n(6),t(),i(7,"div",60),n(8),t()()(),i(9,"input",161),p("change",function(){let o=c(e).$implicit,d=u(2);return m(d.toggleRule(o.id))}),t()()}if(l&2){let e=a.$implicit;s(3),x(e.icon),s(3),x(e.name),s(2),x(e.description),s(),f("checked",e.isActive)}}function Xe(l,a){l&1&&n(0," \u{1F4A1} \u4FEE\u6539\u5F8C\u8ACB\u8A18\u5F97\u4FDD\u5B58 ")}function Ye(l,a){l&1&&n(0," \u2713 \u6240\u6709\u66F4\u6539\u5DF2\u4FDD\u5B58 ")}function Ze(l,a){l&1&&(i(0,"span",114),n(1,"\u27F3"),t(),n(2," \u4FDD\u5B58\u4E2D... "))}function et(l,a){l&1&&n(0," \u{1F4BE} \u4FDD\u5B58\u4EBA\u683C\u8A2D\u5B9A ")}function tt(l,a){if(l&1){let e=h();i(0,"div",18)(1,"div",41)(2,"div",125)(3,"h3",76)(4,"span"),n(5,"\u{1F3AD}"),t(),n(6," \u9078\u64C7 AI \u4EBA\u683C "),t(),i(7,"button",126),n(8," + \u81EA\u5B9A\u7FA9\u4EBA\u683C "),t()(),i(9,"div",127),A(10,qe,7,17,"button",128,I),t()(),i(12,"div",41)(13,"h3",129)(14,"span"),n(15,"\u{1F4AC}"),t(),n(16," \u5C0D\u8A71\u98A8\u683C "),t(),i(17,"div",130)(18,"div",92)(19,"div",131),A(20,ze,5,14,"button",132,I),t(),i(22,"div")(23,"label",55),n(24,"\u56DE\u8986\u9577\u5EA6"),t(),i(25,"div",133),A(26,He,2,9,"button",134,j),t()(),i(28,"label",135),p("click",function(){c(e);let o=u();return o.toggleEmoji(),m(o.markStrategyDirty())}),i(29,"div")(30,"div",136),n(31,"\u4F7F\u7528 Emoji \u8868\u60C5"),t(),i(32,"div",60),n(33,"\u5728\u56DE\u8986\u4E2D\u6DFB\u52A0\u8868\u60C5"),t()(),w(34,"input",137),t()(),i(35,"div")(36,"label",55),n(37,"\u81EA\u5B9A\u7FA9\u4EBA\u8A2D\u63D0\u793A\u8A5E"),t(),i(38,"textarea",138),p("input",function(o){c(e);let d=u();return m(d.onPersonaInput(o))}),n(39,"                    "),t(),i(40,"p",139),n(41,"\u{1F4A1} \u63D0\u793A\uFF1A\u9078\u64C7\u4EBA\u683C\u6A21\u677F\u6703\u81EA\u52D5\u586B\u5145\u6B64\u9805"),t()()()(),i(42,"div",41)(43,"div",125)(44,"h3",76)(45,"span"),n(46,"\u26A1"),t(),n(47," \u667A\u80FD\u884C\u70BA "),i(48,"span",140),n(49,"\u6839\u64DA\u60C5\u6CC1\u81EA\u52D5\u89F8\u767C\u76F8\u61C9\u52D5\u4F5C"),t()()(),i(50,"div",79),A(51,Je,10,4,"label",141,I),t(),i(53,"button",142),n(54," + \u6DFB\u52A0\u81EA\u5B9A\u7FA9\u884C\u70BA\u898F\u5247 "),t()(),i(55,"div",143)(56,"h3",144)(57,"span"),n(58,"\u{1F4AC}"),t(),n(59," AI \u56DE\u8986\u9810\u89BD "),t(),i(60,"div",145)(61,"div",146)(62,"span",12),n(63,"\u7528\u6236:"),t(),i(64,"p",147),n(65,"\u4F60\u5011\u7684\u670D\u52D9\u591A\u5C11\u9322\uFF1F"),t()(),i(66,"div",148)(67,"span",149),n(68),t(),i(69,"p",150),n(70),t()()(),i(71,"button",151),p("click",function(){c(e);let o=u();return m(o.regeneratePreview())}),n(72," \u{1F504} \u91CD\u65B0\u751F\u6210\u9810\u89BD "),t()(),i(73,"div",152)(74,"div",44),C(75,Xe,1,0)(76,Ye,1,0),t(),i(77,"div",117)(78,"button",153),p("click",function(){c(e);let o=u();return m(o.resetStrategy())}),n(79," \u91CD\u7F6E "),t(),i(80,"button",154),p("click",function(){c(e);let o=u();return m(o.savePersonaSettings())}),C(81,Ze,3,0)(82,et,1,0),t()()()()}if(l&2){let e=u();s(10),y(e.personaTemplates),s(10),y(e.conversationStyles),s(6),y($(7,le)),s(8),f("checked",e.useEmoji()),s(4),f("value",e.customPersona()),s(13),y(e.defaultRules),s(17),b("AI (",e.getPersonaName(),"):"),s(2),x(e.getPreviewResponse()),s(5),v(e.strategyDirty()?75:76),s(5),f("disabled",!e.strategyDirty()||e.isSavingStrategy()),s(),v(e.isSavingStrategy()?81:82)}}function it(l,a){l&1&&(i(0,"span",172),n(1,"\u904B\u884C\u4E2D"),t())}function nt(l,a){l&1&&(i(0,"span",173),n(1,"\u5DF2\u95DC\u9589"),t())}function at(l,a){if(l&1){let e=h();i(0,"div",18)(1,"div",127)(2,"div",162)(3,"div",163),n(4),t(),i(5,"div",44),n(6,"\u4ECA\u65E5\u5C0D\u8A71"),t()(),i(7,"div",162)(8,"div",164),n(9),t(),i(10,"div",44),n(11,"\u610F\u5716\u8B58\u5225"),t()(),i(12,"div",162)(13,"div",165),n(14),t(),i(15,"div",44),n(16,"\u8F49\u5316"),t()(),i(17,"div",162)(18,"div",166),n(19),t(),i(20,"div",44),n(21,"\u6210\u672C"),t()()(),i(22,"div",41)(23,"h3",167),n(24,"\u672C\u9031\u6982\u89BD"),t(),i(25,"div",130)(26,"div")(27,"div",168),n(28),t(),i(29,"div",169),n(30,"\u7E3D\u5C0D\u8A71"),t()(),i(31,"div")(32,"div",170),n(33),t(),i(34,"div",169),n(35,"\u8F49\u5316\u7387"),t()()()(),i(36,"div",171)(37,"div",48)(38,"div",49)(39,"span",5),n(40,"\u{1F9E0}"),t(),i(41,"h3",43),n(42,"AI \u667A\u80FD\u7CFB\u7D71\u72C0\u614B"),t(),C(43,it,2,0,"span",172)(44,nt,2,0,"span",173),t(),i(45,"button",174),p("click",function(){c(e);let o=u();return m(o.goToSmartMarketing())}),i(46,"span"),n(47,"\u{1F4CA}"),t(),n(48," \u67E5\u770B\u8A73\u7D30\u7D71\u8A08 "),t()(),i(49,"div",108)(50,"div",175)(51,"div",176)(52,"span",22),n(53,"\u{1F4AD}"),t(),i(54,"span",106),n(55,"\u5C0D\u8A71\u8A18\u61B6"),t()(),i(56,"div",177),n(57),t(),i(58,"div",60),n(59,"\u689D\u8A18\u61B6"),t()(),i(60,"div",175)(61,"div",176)(62,"span",22),n(63,"\u{1F3F7}\uFE0F"),t(),i(64,"span",106),n(65,"\u5BA2\u6236\u6A19\u7C64"),t()(),i(66,"div",178),n(67),t(),i(68,"div",60),n(69,"\u500B\u6A19\u7C64"),t()(),i(70,"div",175)(71,"div",176)(72,"span",22),n(73,"\u{1F60A}"),t(),i(74,"span",106),n(75,"\u60C5\u7DD2\u5206\u6790"),t()(),i(76,"div",179),n(77),t(),i(78,"div",60),n(79,"\u6B21\u5206\u6790"),t()(),i(80,"div",175)(81,"div",176)(82,"span",22),n(83,"\u{1F504}"),t(),i(84,"span",106),n(85,"\u81EA\u52D5\u5316\u6D41\u7A0B"),t()(),i(86,"div",180),n(87),t(),i(88,"div",60),n(89,"\u6B21\u57F7\u884C"),t()(),i(90,"div",175)(91,"div",176)(92,"span",22),n(93,"\u23F0"),t(),i(94,"span",106),n(95,"\u5F85\u8DDF\u9032"),t()(),i(96,"div",181),n(97),t(),i(98,"div",60),n(99,"\u500B\u4EFB\u52D9"),t()(),i(100,"div",175)(101,"div",176)(102,"span",22),n(103,"\u{1F4DA}"),t(),i(104,"span",106),n(105,"\u77E5\u8B58\u5EAB"),t()(),i(106,"div",182),n(107),t(),i(108,"div",60),n(109,"\u689D\u5B78\u7FD2"),t()()(),i(110,"div",183)(111,"button",184),p("click",function(){c(e);let o=u();return m(o.refreshSmartSystemStats())}),n(112," \u{1F504} \u5237\u65B0\u7D71\u8A08 "),t()()()()}if(l&2){let e=u();s(4),x(e.aiService.stats().today.conversations),s(5),x(e.aiService.stats().today.intentsRecognized),s(5),x(e.aiService.stats().today.conversions),s(5),b("\xA5",e.aiService.stats().today.cost.toFixed(2)),s(9),b(" ",e.aiService.stats().weekly.conversations," "),s(5),b(" ",(e.aiService.stats().weekly.conversionRate*100).toFixed(1),"% "),s(10),v(e.autonomousModeEnabled()?43:44),s(14),x(e.smartSystemStats().memories),s(10),x(e.smartSystemStats().tags),s(10),x(e.smartSystemStats().emotions),s(10),x(e.smartSystemStats().workflows),s(10),x(e.smartSystemStats().followups),s(10),x(e.smartSystemStats().knowledge)}}function ot(l,a){if(l&1){let e=h();i(0,"button",196),p("click",function(){let o=c(e).$implicit,d=u(2);return m(d.newModelProvider.set(o.id))}),i(1,"div",58),n(2),t(),i(3,"div",197),n(4),t()()}if(l&2){let e=a.$implicit,r=u(2);E("border-purple-500",r.newModelProvider()===e.id)("bg-purple-500/10",r.newModelProvider()===e.id)("border-transparent",r.newModelProvider()!==e.id)("bg-slate-700",r.newModelProvider()!==e.id),s(2),x(e.icon),s(),E("text-purple-400",r.newModelProvider()===e.id)("text-slate-300",r.newModelProvider()!==e.id),s(),b(" ",e.name," ")}}function rt(l,a){if(l&1&&(i(0,"option",190),n(1),t()),l&2){let e=a.$implicit;f("value",e.name),s(),x(e.displayName)}}function lt(l,a){if(l&1){let e=h();i(0,"div",19)(1,"div",185)(2,"h3",186),n(3,"\u6DFB\u52A0\u96F2\u7AEF AI \u6A21\u578B"),t(),i(4,"div",92)(5,"div")(6,"label",55),n(7,"\u9078\u64C7\u4F9B\u61C9\u5546"),t(),i(8,"div",187),A(9,ot,5,14,"button",188,I),t()(),i(11,"div")(12,"label",55),n(13,"\u9078\u64C7\u6A21\u578B *"),t(),i(14,"select",189),M("ngModelChange",function(o){c(e);let d=u();return T(d.newModelName,o)||(d.newModelName=o),m(o)}),i(15,"option",111),n(16,"\u8ACB\u9078\u64C7\u6A21\u578B"),t(),A(17,rt,2,2,"option",190,de),t(),i(19,"p",116),n(20,"\u{1F4A1} \u6A21\u578B\u540D\u7A31\u5C07\u81EA\u52D5\u683C\u5F0F\u5316\uFF0C\u7121\u9700\u64D4\u5FC3\u5927\u5C0F\u5BEB"),t()(),i(21,"div")(22,"label",55),n(23,"API Key *"),t(),i(24,"input",191),M("ngModelChange",function(o){c(e);let d=u();return T(d.newModelApiKey,o)||(d.newModelApiKey=o),m(o)}),t()(),i(25,"div")(26,"label",55),n(27,"\u986F\u793A\u540D\u7A31 (\u53EF\u9078)"),t(),i(28,"input",192),M("ngModelChange",function(o){c(e);let d=u();return T(d.newModelDisplayName,o)||(d.newModelDisplayName=o),m(o)}),t()()(),i(29,"div",193)(30,"button",194),p("click",function(){c(e);let o=u();return m(o.showAddModel.set(!1))}),n(31," \u53D6\u6D88 "),t(),i(32,"button",195),p("click",function(){c(e);let o=u();return m(o.saveNewModel())}),n(33," \u6DFB\u52A0 "),t()()()()}if(l&2){let e=u();s(9),y(e.providers),s(5),F("ngModel",e.newModelName),s(3),y(e.currentPresetModels()),s(7),F("ngModel",e.newModelApiKey),s(4),F("ngModel",e.newModelDisplayName)}}function st(l,a){l&1&&(i(0,"span",114),n(1,"\u27F3"),t(),n(2," \u6B63\u5728\u6E2C\u8A66\u9023\u63A5... "))}function dt(l,a){l&1&&n(0," \u{1F517} \u6E2C\u8A66\u9023\u63A5 ")}function ut(l,a){if(l&1){let e=h();i(0,"div",19)(1,"div",198)(2,"h3",199),n(3," \u{1F999} \u6DFB\u52A0\u672C\u5730 AI "),t(),i(4,"p",200),n(5,"\u914D\u7F6E Ollama \u6216\u5176\u4ED6\u672C\u5730 AI \u670D\u52D9"),t(),i(6,"div",92)(7,"div")(8,"label",55),n(9,"API \u7AEF\u9EDE *"),t(),i(10,"input",201),M("ngModelChange",function(o){c(e);let d=u();return T(d.localModelEndpoint,o)||(d.localModelEndpoint=o),m(o)}),t(),i(11,"p",116),n(12," \u{1F4A1} \u4F7F\u7528 Tailscale Funnel \u53EF\u5BE6\u73FE\u9060\u7A0B\u8A2A\u554F\u672C\u5730 Ollama "),t()(),i(13,"div")(14,"label",55),n(15,"\u6A21\u578B\u540D\u7A31 *"),t(),i(16,"input",202),M("ngModelChange",function(o){c(e);let d=u();return T(d.localModelName,o)||(d.localModelName=o),m(o)}),t(),i(17,"p",116),n(18," \u5728 Ollama \u4E2D\u904B\u884C "),i(19,"code",203),n(20,"ollama list"),t(),n(21," \u67E5\u770B\u53EF\u7528\u6A21\u578B "),t()(),i(22,"div")(23,"label",55),n(24,"\u986F\u793A\u540D\u7A31 (\u53EF\u9078)"),t(),i(25,"input",204),M("ngModelChange",function(o){c(e);let d=u();return T(d.localModelDisplayName,o)||(d.localModelDisplayName=o),m(o)}),t()(),i(26,"button",205),p("click",function(){c(e);let o=u();return m(o.testLocalConnection())}),C(27,st,3,0)(28,dt,1,0),t()(),i(29,"div",193)(30,"button",194),p("click",function(){c(e);let o=u();return m(o.showAddLocalModel.set(!1))}),n(31," \u53D6\u6D88 "),t(),i(32,"button",206),p("click",function(){c(e);let o=u();return m(o.saveLocalModel())}),n(33," \u4FDD\u5B58 "),t()()()()}if(l&2){let e=u();s(10),F("ngModel",e.localModelEndpoint),s(6),F("ngModel",e.localModelName),s(9),F("ngModel",e.localModelDisplayName),s(),f("disabled",e.isTestingLocal()),s(),v(e.isTestingLocal()?27:28)}}var N=class l{constructor(){this.aiService=D(ie);this.dialogService=D(X);this.toastService=D(J);this.ipcService=D(H);this.activeTab=_("models");this.showAddModel=_(!1);this.autoChatEnabled=_(!1);this.autoChatMode=_("full");this.autoGreetingEnabled=_(!0);this.autoReplyEnabled=_(!0);this.senderAccounts=_([]);this.autonomousModeEnabled=_(!1);this.smartSystemStats=_({memories:0,tags:0,emotions:0,workflows:0,followups:0,knowledge:0});this.newModelProvider=_("openai");this.newModelName="";this.newModelApiKey="";this.newModelEndpoint="";this.newModelDisplayName="";this.showAddLocalModel=_(!1);this.localModelEndpoint="https://ms-defysomwqybz.tail05a567.ts.net/api/chat";this.localModelName="huihui_ai/qwen2.5-abliterate";this.localModelDisplayName="\u6211\u7684\u672C\u5730 AI";this.isTestingLocal=_(!1);this.ttsEnabled=!1;this.ttsEndpoint="http://localhost:9881";this.ttsConnected=_(!1);this.isTestingTts=_(!1);this.ttsLatency=_(0);this.isSavingUsage=_(!1);this.usageSaved=_(!1);this.usageSaveTimeout=null;this.strategyDirty=_(!1);this.strategySaved=_(!1);this.isSavingStrategy=_(!1);this.customPersona=_("");this.originalStrategy=null;this.tabs=[{id:"quick",icon:"\u{1F680}",label:"\u5F15\u64CE\u6982\u89BD"},{id:"models",icon:"\u{1F916}",label:"\u6A21\u578B\u914D\u7F6E"},{id:"persona",icon:"\u{1F3AD}",label:"\u4EBA\u683C\u98A8\u683C"},{id:"stats",icon:"\u{1F4CA}",label:"\u4F7F\u7528\u7D71\u8A08"}];this.providers=[{id:"openai",name:"OpenAI",icon:"\u{1F7E2}"},{id:"claude",name:"Claude",icon:"\u{1F7E3}"},{id:"gemini",name:"Gemini",icon:"\u{1F535}"}];this.presetModels={openai:[{name:"gpt-4o",displayName:"GPT-4o (\u63A8\u85A6)"},{name:"gpt-4o-mini",displayName:"GPT-4o Mini (\u7D93\u6FDF)"},{name:"gpt-4-turbo",displayName:"GPT-4 Turbo"},{name:"gpt-3.5-turbo",displayName:"GPT-3.5 Turbo (\u5FEB\u901F)"}],claude:[{name:"claude-3-5-sonnet-latest",displayName:"Claude 3.5 Sonnet (\u63A8\u85A6)"},{name:"claude-3-opus-latest",displayName:"Claude 3 Opus (\u5F37\u5927)"},{name:"claude-3-haiku-20240307",displayName:"Claude 3 Haiku (\u5FEB\u901F)"}],gemini:[{name:"gemini-1.5-flash-latest",displayName:"Gemini 1.5 Flash (\u63A8\u85A6)"},{name:"gemini-1.5-pro-latest",displayName:"Gemini 1.5 Pro (\u5F37\u5927)"},{name:"gemini-2.0-flash-exp",displayName:"Gemini 2.0 Flash (\u5BE6\u9A57)"}]};this.currentPresetModels=k(()=>this.presetModels[this.newModelProvider()]||[]);this.localModels=this.aiService.localModels;this.cloudModels=this.aiService.cloudModels;this.conversationStyles=[{id:"professional",icon:"\u{1F454}",label:"\u5C08\u696D\u6B63\u5F0F"},{id:"friendly",icon:"\u{1F60A}",label:"\u53CB\u597D\u89AA\u5207"},{id:"casual",icon:"\u{1F60E}",label:"\u8F15\u9B06\u5E7D\u9ED8"},{id:"direct",icon:"\u{1F3AF}",label:"\u76F4\u63A5\u7C21\u6F54"}];this.industryTemplates=[{id:"payment",name:"\u{1F4B3} \u8DE8\u5883\u652F\u4ED8",description:"U\u514C\u63DB\u3001\u4EE3\u6536\u4EE3\u4ED8\u3001\u532F\u6B3E\u670D\u52D9"},{id:"ecommerce",name:"\u{1F6D2} \u96FB\u5546\u96F6\u552E",description:"\u5546\u54C1\u92B7\u552E\u3001\u8A02\u55AE\u67E5\u8A62\u3001\u552E\u5F8C\u670D\u52D9"},{id:"education",name:"\u{1F4D6} \u5728\u7DDA\u6559\u80B2",description:"\u8AB2\u7A0B\u8AEE\u8A62\u3001\u5B78\u7FD2\u8F14\u5C0E\u3001\u5831\u540D\u6D41\u7A0B"},{id:"realestate",name:"\u{1F3E0} \u623F\u7522\u4E2D\u4ECB",description:"\u623F\u6E90\u63A8\u85A6\u3001\u770B\u623F\u9810\u7D04\u3001\u4EA4\u6613\u6D41\u7A0B"},{id:"finance",name:"\u{1F4B0} \u91D1\u878D\u7406\u8CA1",description:"\u6295\u8CC7\u8AEE\u8A62\u3001\u98A8\u96AA\u8A55\u4F30\u3001\u7522\u54C1\u4ECB\u7D39"},{id:"healthcare",name:"\u{1F3E5} \u91AB\u7642\u5065\u5EB7",description:"\u9810\u7D04\u639B\u865F\u3001\u5065\u5EB7\u8AEE\u8A62\u3001\u7528\u85E5\u6307\u5C0E"},{id:"travel",name:"\u2708\uFE0F \u65C5\u904A\u670D\u52D9",description:"\u884C\u7A0B\u898F\u5283\u3001\u8A02\u7968\u9152\u5E97\u3001\u5C0E\u904A\u670D\u52D9"},{id:"legal",name:"\u2696\uFE0F \u6CD5\u5F8B\u8AEE\u8A62",description:"\u6CD5\u5F8B\u554F\u7B54\u3001\u6848\u4EF6\u8AEE\u8A62\u3001\u6587\u66F8\u670D\u52D9"}];this.knowledgeStats=k(()=>{let a=this.knowledgeBases(),e=a.reduce((S,g)=>S+g.items.length,0),r={};a.forEach(S=>{S.items.forEach(g=>{r[g.category]=(r[g.category]||0)+1})});let o=Object.entries(r).sort(([,S],[,g])=>g-S)[0]?.[0]||"-",d={product:"\u7522\u54C1",faq:"\u554F\u7B54",sales:"\u8A71\u8853",objection:"\u7570\u8B70",custom:"\u5176\u4ED6"};return{totalItems:e,usedCount:Math.floor(e*.7),hitRate:e>0?68:0,topCategory:d[o]||o}});this.defaultRules=[{id:"purchase",icon:"\u{1F6D2}",name:"\u8CFC\u8CB7\u610F\u5411\u660E\u78BA \u2192 \u901A\u77E5\u4EBA\u5DE5",description:"\u7576\u8B58\u5225\u5230\u8CFC\u8CB7\u610F\u5411\u6642\u7ACB\u5373\u901A\u77E5",isActive:!0},{id:"no-response",icon:"\u23F0",name:"\u9023\u7E8C3\u6B21\u4E0D\u56DE\u8986 \u2192 \u66AB\u505C",description:"\u66AB\u505C\u5C0D\u8A71\uFF0C3\u5929\u5F8C\u518D\u8DDF\u9032",isActive:!0},{id:"negative",icon:"\u{1F614}",name:"\u8CA0\u9762\u60C5\u7DD2 \u2192 \u8F49\u4EBA\u5DE5",description:"\u6AA2\u6E2C\u5230\u8CA0\u9762\u60C5\u7DD2\u6642\u8F49\u4EBA\u5DE5\u8655\u7406",isActive:!0},{id:"price",icon:"\u{1F4B0}",name:"\u50F9\u683C\u654F\u611F \u2192 \u63A8\u9001\u512A\u60E0",description:"\u8A62\u554F\u50F9\u683C\u6642\u63A8\u9001\u512A\u60E0\u65B9\u6848",isActive:!1}];this.personaTemplates=[{id:"friendly",icon:"\u{1F60A}",name:"\u53CB\u597D\u52A9\u624B",description:"\u89AA\u5207\u3001\u8010\u5FC3\u3001\u6A02\u65BC\u52A9\u4EBA",prompt:"\u4F60\u662F\u4E00\u4F4D\u53CB\u597D\u7684\u5BA2\u670D\u52A9\u624B\uFF0C\u8AAA\u8A71\u89AA\u5207\u6EAB\u6696\uFF0C\u6A02\u65BC\u5E6B\u52A9\u5BA2\u6236\u89E3\u6C7A\u554F\u984C\u3002"},{id:"professional",icon:"\u{1F454}",name:"\u5C08\u696D\u9867\u554F",description:"\u5C08\u696D\u3001\u56B4\u8B39\u3001\u503C\u5F97\u4FE1\u8CF4",prompt:"\u4F60\u662F\u4E00\u4F4D\u5C08\u696D\u7684\u92B7\u552E\u9867\u554F\uFF0C\u5177\u6709\u8C50\u5BCC\u7684\u884C\u696D\u7D93\u9A57\uFF0C\u56DE\u7B54\u554F\u984C\u5C08\u696D\u56B4\u8B39\u3002"},{id:"enthusiastic",icon:"\u{1F389}",name:"\u71B1\u60C5\u92B7\u552E",description:"\u7A4D\u6975\u3001\u71B1\u60C5\u3001\u5584\u65BC\u63A8\u85A6",prompt:"\u4F60\u662F\u4E00\u4F4D\u5145\u6EFF\u71B1\u60C5\u7684\u92B7\u552E\u4EE3\u8868\uFF0C\u5584\u65BC\u767C\u73FE\u5BA2\u6236\u9700\u6C42\u4E26\u7A4D\u6975\u63A8\u85A6\u5408\u9069\u7684\u7522\u54C1\u3002"},{id:"efficient",icon:"\u26A1",name:"\u9AD8\u6548\u7C21\u6F54",description:"\u76F4\u63A5\u3001\u7C21\u6F54\u3001\u6548\u7387\u512A\u5148",prompt:"\u4F60\u662F\u4E00\u4F4D\u9AD8\u6548\u7684\u5BA2\u670D\uFF0C\u56DE\u7B54\u554F\u984C\u76F4\u63A5\u660E\u4E86\uFF0C\u4E0D\u7E5E\u5F4E\u5B50\uFF0C\u7BC0\u7701\u5BA2\u6236\u6642\u9593\u3002"}];this.selectedPersonaTemplate=_("friendly");this.previewResponse=_("\u60A8\u597D\u5440\uFF01\u611F\u8B1D\u60A8\u7684\u8AEE\u8A62 \u{1F60A} \u6211\u5011\u7684\u670D\u52D9\u50F9\u683C\u6839\u64DA\u60A8\u7684\u5177\u9AD4\u9700\u6C42\u800C\u5B9A\uFF0C\u8ACB\u554F\u60A8\u4E3B\u8981\u60F3\u4E86\u89E3\u54EA\u65B9\u9762\u7684\u670D\u52D9\u5462\uFF1F");this.knowledgeBases=k(()=>this.aiService.knowledgeBases());this.activeKbId=k(()=>this.aiService.activeKnowledgeBaseId());this.currentStyle=k(()=>this.aiService.strategy().style);this.responseLength=k(()=>this.aiService.strategy().responseLength);this.useEmoji=k(()=>this.aiService.strategy().useEmoji)}getProviderIcon(a){return this.providers.find(e=>e.id===a)?.icon||"\u{1F916}"}getProviderName(a){return this.providers.find(e=>e.id===a)?.name||a}testModel(a){this.aiService.testModelConnection(a.id)}editModel(a){}saveNewModel(){!this.newModelName||!this.newModelApiKey||(this.aiService.addModel({provider:this.newModelProvider(),modelName:this.newModelName,apiKey:this.newModelApiKey,apiEndpoint:this.newModelEndpoint||void 0,displayName:this.newModelDisplayName||this.newModelName}),this.showAddModel.set(!1),this.newModelName="",this.newModelApiKey="",this.newModelEndpoint="",this.newModelDisplayName="")}saveLocalModel(){if(!this.localModelEndpoint||!this.localModelName){alert("\u8ACB\u586B\u5BEB API \u7AEF\u9EDE\u548C\u6A21\u578B\u540D\u7A31");return}this.aiService.addLocalModel({modelName:this.localModelName,displayName:this.localModelDisplayName||this.localModelName,apiEndpoint:this.localModelEndpoint,isDefault:this.aiService.models().length===0}),this.showAddLocalModel.set(!1),this.localModelDisplayName="\u6211\u7684\u672C\u5730 AI"}async testLocalConnection(){if(!this.localModelEndpoint||!this.localModelName){alert("\u8ACB\u5148\u586B\u5BEB API \u7AEF\u9EDE\u548C\u6A21\u578B\u540D\u7A31");return}this.isTestingLocal.set(!0),await this.aiService.testLocalAIConnection(this.localModelEndpoint,this.localModelName),setTimeout(()=>this.isTestingLocal.set(!1),3e3)}saveTtsSettings(){this.ipcService.send("save-ai-settings",{ttsEndpoint:this.ttsEndpoint,ttsEnabled:this.ttsEnabled}),this.toastService.success("TTS \u8A2D\u7F6E\u5DF2\u4FDD\u5B58")}async testTtsConnection(){if(!this.ttsEndpoint){this.toastService.error("\u8ACB\u5148\u586B\u5BEB TTS \u670D\u52D9\u7AEF\u9EDE");return}this.isTestingTts.set(!0);let a=Date.now(),e=r=>{this.isTestingTts.set(!1),r.success?(this.ttsConnected.set(!0),this.ttsLatency.set(Date.now()-a),this.toastService.success("\u2713 TTS \u670D\u52D9\u9023\u63A5\u6210\u529F\uFF01")):(this.ttsConnected.set(!1),this.toastService.error(`TTS \u9023\u63A5\u5931\u6557: ${r.error||"\u672A\u77E5\u932F\u8AA4"}`))};this.ipcService.once("tts-test-result",e),this.ipcService.send("test-tts-service",{endpoint:this.ttsEndpoint}),setTimeout(()=>{this.isTestingTts()&&(this.isTestingTts.set(!1),this.toastService.error("TTS \u6E2C\u8A66\u8D85\u6642"))},15e3)}testTtsVoice(){let a=e=>{e.success&&e.audio?new Audio(`data:audio/wav;base64,${e.audio}`).play().catch(o=>{this.toastService.error(`\u64AD\u653E\u5931\u6557: ${o.message}`)}):this.toastService.error(`\u8A9E\u97F3\u751F\u6210\u5931\u6557: ${e.error||"\u672A\u77E5\u932F\u8AA4"}`)};this.ipcService.once("tts-result",a),this.ipcService.send("text-to-speech",{endpoint:this.ttsEndpoint,text:"\u4F60\u597D\uFF0C\u9019\u662F\u4E00\u6BB5\u8A9E\u97F3\u6E2C\u8A66\u3002",voice:""}),this.toastService.info("\u6B63\u5728\u751F\u6210\u8A66\u807D\u8A9E\u97F3...")}onModelUsageChange(a,e){let o=e.target.value;this.aiService.updateModelUsage({[a]:o}),this.isSavingUsage.set(!0),this.usageSaved.set(!1),this.usageSaveTimeout&&clearTimeout(this.usageSaveTimeout),this.usageSaveTimeout=setTimeout(async()=>{await this.aiService.saveModelUsageToBackend(),this.isSavingUsage.set(!1),this.usageSaved.set(!0),setTimeout(()=>this.usageSaved.set(!1),3e3)},300)}deleteModel(a){confirm(`\u78BA\u5B9A\u8981\u522A\u9664\u6A21\u578B\u300C${a.displayName||a.modelName}\u300D\u55CE\uFF1F`)&&this.aiService.removeModel(a.id)}setAsDefault(a){this.aiService.setDefaultModel(a.id)}addKnowledgeBase(){this.dialogService.prompt({title:"\u65B0\u5EFA\u77E5\u8B58\u5EAB",message:"\u8ACB\u8F38\u5165\u77E5\u8B58\u5EAB\u540D\u7A31\uFF0C\u7528\u65BC\u7D44\u7E54\u548C\u7BA1\u7406 AI \u56DE\u8986\u7684\u696D\u52D9\u77E5\u8B58\u3002",placeholder:"\u4F8B\u5982\uFF1A\u7522\u54C1\u77E5\u8B58\u5EAB\u3001\u5E38\u898B\u554F\u7B54",confirmText:"\u5275\u5EFA",cancelText:"\u53D6\u6D88",validator:a=>a.trim()?a.length>50?"\u540D\u7A31\u4E0D\u80FD\u8D85\u904E 50 \u500B\u5B57\u7B26":null:"\u8ACB\u8F38\u5165\u540D\u7A31",onConfirm:a=>{this.aiService.addKnowledgeBase(a)}})}setActiveKb(a){this.aiService.setActiveKnowledgeBase(a)}editKb(a){this.dialogService.prompt({title:"\u7DE8\u8F2F\u77E5\u8B58\u5EAB",message:"\u4FEE\u6539\u77E5\u8B58\u5EAB\u540D\u7A31",placeholder:"\u8ACB\u8F38\u5165\u65B0\u540D\u7A31",defaultValue:a.name,confirmText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",validator:e=>e.trim()?e.length>50?"\u540D\u7A31\u4E0D\u80FD\u8D85\u904E 50 \u500B\u5B57\u7B26":null:"\u540D\u7A31\u4E0D\u80FD\u70BA\u7A7A",onConfirm:e=>{this.aiService.updateKnowledgeBase(a.id,{name:e}),this.toastService.success(`\u77E5\u8B58\u5EAB\u5DF2\u66F4\u65B0\u70BA\u300C${e}\u300D`)}})}deleteKb(a){this.dialogService.confirm({title:"\u78BA\u8A8D\u522A\u9664",message:`\u78BA\u5B9A\u8981\u522A\u9664\u77E5\u8B58\u5EAB\u300C${a.name}\u300D\u55CE\uFF1F\u6B64\u64CD\u4F5C\u7121\u6CD5\u64A4\u92B7\u3002`,confirmText:"\u522A\u9664",cancelText:"\u53D6\u6D88",type:"danger",onConfirm:()=>{this.aiService.deleteKnowledgeBase(a.id),this.toastService.success(`\u77E5\u8B58\u5EAB\u300C${a.name}\u300D\u5DF2\u522A\u9664`)}})}deleteKnowledgeItem(a,e){this.dialogService.confirm({title:"\u78BA\u8A8D\u522A\u9664",message:"\u78BA\u5B9A\u8981\u522A\u9664\u6B64\u77E5\u8B58\u689D\u76EE\u55CE\uFF1F",confirmText:"\u522A\u9664",cancelText:"\u53D6\u6D88",type:"danger",onConfirm:()=>{this.aiService.deleteKnowledgeItem(a,e),this.toastService.success("\u77E5\u8B58\u689D\u76EE\u5DF2\u522A\u9664")}})}addQuickContent(a){let r={product:{title:"\u6DFB\u52A0\u7522\u54C1\u77E5\u8B58",placeholder:"\u4F8B\u5982\uFF1A\u6211\u5011\u7684\u7522\u54C1\u652F\u6301 24 \u5C0F\u6642\u5BA2\u670D...",icon:"\u{1F4E6}"},faq:{title:"\u6DFB\u52A0\u5E38\u898B\u554F\u7B54",placeholder:"\u4F8B\u5982\uFF1AQ: \u5982\u4F55\u4ED8\u6B3E\uFF1FA: \u652F\u6301\u5FAE\u4FE1\u3001\u652F\u4ED8\u5BF6...",icon:"\u2753"},sales:{title:"\u6DFB\u52A0\u92B7\u552E\u8A71\u8853",placeholder:"\u4F8B\u5982\uFF1A\u7576\u5BA2\u6236\u8AAA\u592A\u8CB4\u6642\uFF0C\u53EF\u4EE5\u56DE\u8986...",icon:"\u{1F3AF}"},objection:{title:"\u6DFB\u52A0\u7570\u8B70\u8655\u7406",placeholder:"\u4F8B\u5982\uFF1A\u5BA2\u6236\u64D4\u5FC3\u8CEA\u91CF\u6642\uFF0C\u5F37\u8ABF\u552E\u5F8C\u4FDD\u969C...",icon:"\u{1F4AC}"}}[a],o=this.activeKbId();if(!o){this.toastService.warning("\u8ACB\u5148\u9078\u64C7\u6216\u5275\u5EFA\u4E00\u500B\u77E5\u8B58\u5EAB");return}this.dialogService.prompt({title:`${r.icon} ${r.title}`,message:"\u8F38\u5165\u77E5\u8B58\u5167\u5BB9\uFF0CAI \u5C07\u5728\u56DE\u8986\u6642\u53C3\u8003\u9019\u4E9B\u4FE1\u606F\u3002",placeholder:r.placeholder,inputType:"textarea",confirmText:"\u6DFB\u52A0",cancelText:"\u53D6\u6D88",validator:d=>d.trim()?d.length>2e3?"\u5167\u5BB9\u4E0D\u80FD\u8D85\u904E 2000 \u500B\u5B57\u7B26":null:"\u8ACB\u8F38\u5165\u5167\u5BB9",onConfirm:d=>{this.aiService.addKnowledgeItem(o,{title:`${r.icon} ${a.toUpperCase()}`,content:d,category:a}),this.toastService.success("\u77E5\u8B58\u5167\u5BB9\u5DF2\u6DFB\u52A0")}})}openAIGenerateDialog(){let a=this.activeKbId();if(!a){this.toastService.warning("\u8ACB\u5148\u9078\u64C7\u6216\u5275\u5EFA\u4E00\u500B\u77E5\u8B58\u5EAB");return}this.dialogService.prompt({title:"\u{1F916} AI \u81EA\u52D5\u751F\u6210\u77E5\u8B58\u5EAB",message:"\u8ACB\u7C21\u55AE\u63CF\u8FF0\u60A8\u7684\u696D\u52D9\uFF081-3 \u53E5\u8A71\uFF09\uFF0CAI \u5C07\u81EA\u52D5\u751F\u6210\u7522\u54C1\u77E5\u8B58\u3001\u5E38\u898B\u554F\u7B54\u3001\u92B7\u552E\u8A71\u8853\u7B49\u5167\u5BB9\u3002",placeholder:"\u4F8B\u5982\uFF1A\u6211\u5011\u662F\u505A\u8DE8\u5883\u652F\u4ED8\u7684\uFF0C\u4E3B\u8981\u670D\u52D9\u662F U \u514C\u63DB\u548C\u4EE3\u6536\u4EE3\u4ED8\uFF0C\u652F\u6301\u5FAE\u4FE1\u3001\u652F\u4ED8\u5BF6\u6536\u6B3E",inputType:"textarea",confirmText:"\u958B\u59CB\u751F\u6210",cancelText:"\u53D6\u6D88",validator:e=>e.trim()?e.length<10?"\u63CF\u8FF0\u592A\u77ED\uFF0C\u8ACB\u63D0\u4F9B\u66F4\u591A\u4FE1\u606F":e.length>500?"\u63CF\u8FF0\u4E0D\u80FD\u8D85\u904E 500 \u500B\u5B57\u7B26":null:"\u8ACB\u8F38\u5165\u696D\u52D9\u63CF\u8FF0",onConfirm:e=>{this.generateKnowledgeWithAI(a,e)}})}async generateKnowledgeWithAI(a,e){this.toastService.info("\u{1F916} AI \u6B63\u5728\u751F\u6210\u77E5\u8B58\u5EAB\uFF0C\u8ACB\u7A0D\u5019..."),this.aiService.generateKnowledgeBase(a,e)}openBatchImportDialog(){let a=this.activeKbId();if(!a){this.toastService.warning("\u8ACB\u5148\u9078\u64C7\u6216\u5275\u5EFA\u4E00\u500B\u77E5\u8B58\u5EAB");return}this.dialogService.prompt({title:"\u{1F4CB} \u6279\u91CF\u5C0E\u5165\u77E5\u8B58",message:`\u8ACB\u8CBC\u4E0A\u60A8\u7684\u77E5\u8B58\u5167\u5BB9\uFF0C\u652F\u6301\u4EE5\u4E0B\u683C\u5F0F\uFF1A
\u2022 \u6BCF\u884C\u4E00\u689D\u77E5\u8B58
\u2022 Q: \u554F\u984C / A: \u7B54\u6848 \u683C\u5F0F
\u2022 \u3010\u7522\u54C1\u77E5\u8B58\u3011\u3010\u5E38\u898B\u554F\u7B54\u3011\u7B49\u5206\u985E\u6A19\u7C64`,placeholder:`\u793A\u4F8B\uFF1A
\u3010\u7522\u54C1\u77E5\u8B58\u3011
\u6211\u5011\u7684\u670D\u52D9\u652F\u6301 24 \u5C0F\u6642\u5728\u7DDA\u5BA2\u670D
\u6700\u4F4E\u514C\u63DB\u91D1\u984D 100U\uFF0C\u6700\u9AD8\u7121\u9650\u5236

\u3010\u5E38\u898B\u554F\u7B54\u3011
Q: \u591A\u4E45\u5230\u8CEC\uFF1F
A: \u901A\u5E38 5-30 \u5206\u9418\u5230\u8CEC

Q: \u652F\u6301\u54EA\u4E9B\u4ED8\u6B3E\u65B9\u5F0F\uFF1F
A: \u652F\u6301\u5FAE\u4FE1\u3001\u652F\u4ED8\u5BF6\u3001\u9280\u884C\u5361`,inputType:"textarea",confirmText:"\u5C0E\u5165",cancelText:"\u53D6\u6D88",validator:e=>e.trim()?e.length<10?"\u5167\u5BB9\u592A\u77ED":null:"\u8ACB\u8F38\u5165\u8981\u5C0E\u5165\u7684\u5167\u5BB9",onConfirm:e=>{this.importBatchKnowledge(a,e)}})}importBatchKnowledge(a,e){let r=this.parseBatchContent(e);if(r.length===0){this.toastService.error("\u7121\u6CD5\u8B58\u5225\u77E5\u8B58\u5167\u5BB9\uFF0C\u8ACB\u6AA2\u67E5\u683C\u5F0F");return}r.forEach(o=>{this.aiService.addKnowledgeItem(a,o)}),this.toastService.success(`\u6210\u529F\u5C0E\u5165 ${r.length} \u689D\u77E5\u8B58`)}parseBatchContent(a){let e=[],r=a.split(`
`).map(S=>S.trim()).filter(S=>S),o="custom",d="";for(let S=0;S<r.length;S++){let g=r[S];if(g.match(/【產品知識】|【产品知识】/)){o="product";continue}else if(g.match(/【常見問答】|【常见问答】|【FAQ】/i)){o="faq";continue}else if(g.match(/【銷售話術】|【销售话术】/)){o="sales";continue}else if(g.match(/【異議處理】|【异议处理】/)){o="objection";continue}if(g.match(/^Q[:：]/i)){d=g.replace(/^Q[:：]\s*/i,"");continue}else if(g.match(/^A[:：]/i)&&d){let ae=g.replace(/^A[:：]\s*/i,"");e.push({title:`Q: ${d}`,content:`A: ${ae}`,category:"faq"}),d="";continue}g.length>5&&!g.startsWith("#")&&!g.startsWith("//")&&e.push({title:g.substring(0,30)+(g.length>30?"...":""),content:g,category:o})}return e}openTemplateSelector(){let a=this.activeKbId();if(!a){this.toastService.warning("\u8ACB\u5148\u9078\u64C7\u6216\u5275\u5EFA\u4E00\u500B\u77E5\u8B58\u5EAB");return}let e=this.industryTemplates.map(r=>`${r.name}
  ${r.description}`).join(`

`);this.dialogService.prompt({title:"\u{1F4DA} \u9078\u64C7\u884C\u696D\u6A21\u677F",message:`\u9078\u64C7\u4E00\u500B\u884C\u696D\u6A21\u677F\uFF0C\u7CFB\u7D71\u5C07\u81EA\u52D5\u751F\u6210\u5C0D\u61C9\u7684\u77E5\u8B58\u5EAB\u5167\u5BB9\uFF1A

\u53EF\u9078\u6A21\u677F\uFF1A
${this.industryTemplates.map(r=>r.name).join("\u3001")}`,placeholder:"\u8F38\u5165\u6A21\u677F\u540D\u7A31\uFF0C\u5982\uFF1A\u8DE8\u5883\u652F\u4ED8\u3001\u96FB\u5546\u96F6\u552E",confirmText:"\u4F7F\u7528\u6A21\u677F",cancelText:"\u53D6\u6D88",validator:r=>this.industryTemplates.find(d=>d.name.includes(r)||d.id===r.toLowerCase())?null:"\u8ACB\u8F38\u5165\u6709\u6548\u7684\u6A21\u677F\u540D\u7A31",onConfirm:r=>{let o=this.industryTemplates.find(d=>d.name.includes(r)||d.id===r.toLowerCase());o&&this.applyIndustryTemplate(a,o.id)}})}applyIndustryTemplate(a,e){this.toastService.info("\u6B63\u5728\u61C9\u7528\u884C\u696D\u6A21\u677F..."),this.aiService.applyIndustryTemplate(a,e)}learnFromChatHistory(){let a=this.activeKbId();if(!a){this.toastService.warning("\u8ACB\u5148\u9078\u64C7\u6216\u5275\u5EFA\u4E00\u500B\u77E5\u8B58\u5EAB");return}this.dialogService.confirm({title:"\u{1F4AC} \u5F9E\u804A\u5929\u8A18\u9304\u5B78\u7FD2",message:`\u7CFB\u7D71\u5C07\u5206\u6790\u8FD1 7 \u5929\u7684\u804A\u5929\u8A18\u9304\uFF0C\u81EA\u52D5\u63D0\u53D6\u512A\u8CEA\u56DE\u8986\u6DFB\u52A0\u5230\u77E5\u8B58\u5EAB\u3002

\u6B64\u904E\u7A0B\u53EF\u80FD\u9700\u8981\u5E7E\u5206\u9418\uFF0C\u662F\u5426\u7E7C\u7E8C\uFF1F`,confirmText:"\u958B\u59CB\u5B78\u7FD2",cancelText:"\u53D6\u6D88",onConfirm:()=>{this.toastService.info("\u6B63\u5728\u5206\u6790\u804A\u5929\u8A18\u9304..."),this.aiService.learnFromChatHistory(a)}})}exportKnowledgeBase(){let a=this.knowledgeBases().find(r=>r.id===this.activeKbId());if(!a){this.toastService.warning("\u8ACB\u5148\u9078\u64C7\u4E00\u500B\u77E5\u8B58\u5EAB");return}if(a.items.length===0){this.toastService.warning("\u77E5\u8B58\u5EAB\u70BA\u7A7A\uFF0C\u7121\u6CD5\u5C0E\u51FA");return}let e=this.generateExportContent(a);navigator.clipboard.writeText(e).then(()=>{this.toastService.success(`\u5DF2\u8907\u88FD ${a.items.length} \u689D\u77E5\u8B58\u5230\u526A\u8CBC\u677F`)}).catch(()=>{this.dialogService.prompt({title:"\u{1F4E4} \u5C0E\u51FA\u77E5\u8B58\u5EAB",message:"\u8ACB\u8907\u88FD\u4EE5\u4E0B\u5167\u5BB9\uFF1A",defaultValue:e,inputType:"textarea",confirmText:"\u95DC\u9589",cancelText:""})})}generateExportContent(a){let e=[`# \u77E5\u8B58\u5EAB: ${a.name}`,`# \u5C0E\u51FA\u6642\u9593: ${new Date().toLocaleString()}`,`# \u689D\u76EE\u6578\u91CF: ${a.items.length}`,""],r=["product","faq","sales","objection","custom"],o={product:"\u3010\u7522\u54C1\u77E5\u8B58\u3011",faq:"\u3010\u5E38\u898B\u554F\u7B54\u3011",sales:"\u3010\u92B7\u552E\u8A71\u8853\u3011",objection:"\u3010\u7570\u8B70\u8655\u7406\u3011",custom:"\u3010\u5176\u4ED6\u3011"};return r.forEach(d=>{let S=a.items.filter(g=>g.category===d);S.length>0&&(e.push(o[d]||`\u3010${d}\u3011`),S.forEach(g=>{d==="faq"&&e.push(g.title),e.push(g.content),e.push("")}))}),e.join(`
`)}setStyle(a){this.aiService.updateConversationStrategy({style:a})}setResponseLength(a){this.aiService.updateConversationStrategy({responseLength:a})}toggleEmoji(){this.aiService.updateConversationStrategy({useEmoji:!this.useEmoji()})}onPersonaInput(a){let e=a.target;this.customPersona.set(e.value),this.markStrategyDirty()}markStrategyDirty(){this.strategyDirty.set(!0),this.strategySaved.set(!1),this.saveStrategyToLocalStorage()}saveStrategyToLocalStorage(){let a={style:this.currentStyle(),responseLength:this.responseLength(),useEmoji:this.useEmoji(),customPersona:this.customPersona()};localStorage.setItem("ai_strategy_draft",JSON.stringify(a))}loadStrategyFromLocalStorage(){let a=localStorage.getItem("ai_strategy_draft");if(a)try{let r=JSON.parse(a);r.customPersona&&this.customPersona.set(r.customPersona),this.strategyDirty.set(!0)}catch(r){console.error("\u8F09\u5165\u7B56\u7565\u8349\u7A3F\u5931\u6557:",r)}let e=localStorage.getItem("ai_strategy_saved");if(e)try{let r=JSON.parse(e);this.originalStrategy=r,r.customPersona&&!a&&this.customPersona.set(r.customPersona),this.aiService.updateConversationStrategy(r)}catch(r){console.error("\u8F09\u5165\u7B56\u7565\u8A2D\u5B9A\u5931\u6557:",r)}}async saveStrategySettings(){this.isSavingStrategy.set(!0);let a={style:this.currentStyle(),responseLength:this.responseLength(),useEmoji:this.useEmoji(),customPersona:this.customPersona()};try{await this.aiService.saveConversationStrategyToBackend(a),localStorage.setItem("ai_strategy_saved",JSON.stringify(a)),localStorage.removeItem("ai_strategy_draft"),this.strategyDirty.set(!1),this.strategySaved.set(!0),this.originalStrategy=a,setTimeout(()=>this.strategySaved.set(!1),3e3)}catch(e){console.error("\u4FDD\u5B58\u7B56\u7565\u5931\u6557:",e),alert("\u4FDD\u5B58\u5931\u6557\uFF0C\u8ACB\u91CD\u8A66")}finally{this.isSavingStrategy.set(!1)}}resetStrategy(){this.originalStrategy?(this.aiService.updateConversationStrategy(this.originalStrategy),this.customPersona.set(this.originalStrategy.customPersona||"")):(this.aiService.updateConversationStrategy({style:"friendly",responseLength:"medium",useEmoji:!0}),this.customPersona.set("")),localStorage.removeItem("ai_strategy_draft"),this.strategyDirty.set(!1)}toggleAutoChat(){this.autoChatEnabled.update(a=>!a),this.saveQuickSettings(!1)}toggleAutonomousMode(){let a=!this.autonomousModeEnabled();this.autonomousModeEnabled.set(a),localStorage.setItem("ai_autonomous_mode",String(a)),window.electronAPI?.send&&window.electronAPI.send("set-autonomous-mode",{enabled:a}),this.toastService.success(a?"\u{1F9E0} AI \u81EA\u4E3B\u6A21\u5F0F\u5DF2\u555F\u7528":"AI \u81EA\u4E3B\u6A21\u5F0F\u5DF2\u95DC\u9589"),a&&this.refreshSmartSystemStats()}goToSmartMarketing(){window.electronAPI?.send&&window.electronAPI.send("navigate-to",{path:"/smart-marketing"}),window.location.hash="#/smart-marketing"}refreshSmartSystemStats(){window.electronAPI?.send&&window.electronAPI.send("get-smart-system-stats",{});let a=e=>{let r=e.detail||{};this.smartSystemStats.set({memories:r.memories||0,tags:r.tags||0,emotions:r.emotions||0,workflows:r.workflows||0,followups:r.followups||0,knowledge:r.knowledge||0})};window.addEventListener("smart-system-stats",a,{once:!0}),this.toastService.success("\u6B63\u5728\u5237\u65B0\u7D71\u8A08...")}setAutoChatMode(a){this.autoChatMode.set(a),this.saveQuickSettings(!1)}toggleAutoGreeting(){this.autoGreetingEnabled.update(a=>!a),this.saveQuickSettings(!1)}toggleAutoReply(){this.autoReplyEnabled.update(a=>!a),this.saveQuickSettings(!1)}saveQuickSettings(a=!0){let e={auto_chat_enabled:this.autoChatEnabled()?1:0,auto_chat_mode:this.autoChatMode(),auto_greeting:this.autoGreetingEnabled()?1:0,auto_reply:this.autoReplyEnabled()?1:0};localStorage.setItem("ai_auto_chat_enabled",String(this.autoChatEnabled())),localStorage.setItem("ai_auto_chat_mode",this.autoChatMode()),localStorage.setItem("ai_auto_greeting",String(this.autoGreetingEnabled())),localStorage.setItem("ai_auto_reply",String(this.autoReplyEnabled())),window.dispatchEvent(new CustomEvent("save-ai-settings",{detail:e})),a&&alert("\u8A2D\u7F6E\u5DF2\u4FDD\u5B58\uFF01")}loadQuickSettings(){let a=localStorage.getItem("ai_auto_chat_enabled"),e=localStorage.getItem("ai_auto_chat_mode"),r=localStorage.getItem("ai_auto_greeting"),o=localStorage.getItem("ai_auto_reply"),d=localStorage.getItem("ai_autonomous_mode");a!==null&&this.autoChatEnabled.set(a==="true"),e&&this.autoChatMode.set(e),r!==null&&this.autoGreetingEnabled.set(r==="true"),o!==null&&this.autoReplyEnabled.set(o==="true"),d!==null&&this.autonomousModeEnabled.set(d==="true")}ngOnInit(){this.loadQuickSettings(),this.loadSenderAccounts(),this.loadStrategyFromLocalStorage()}loadSenderAccounts(){window.dispatchEvent(new CustomEvent("get-sender-accounts")),window.addEventListener("sender-accounts-loaded",(a=>{let e=a.detail||[];this.senderAccounts.set(e)}),{once:!0})}selectPersonaTemplate(a){this.selectedPersonaTemplate.set(a);let e=this.personaTemplates.find(r=>r.id===a);e&&(this.customPersona.set(e.prompt),this.markStrategyDirty(),this.updatePreviewForPersona(a))}updatePreviewForPersona(a){let e={friendly:"\u60A8\u597D\u5440\uFF01\u611F\u8B1D\u60A8\u7684\u8AEE\u8A62 \u{1F60A} \u6211\u5011\u7684\u670D\u52D9\u50F9\u683C\u6839\u64DA\u60A8\u7684\u5177\u9AD4\u9700\u6C42\u800C\u5B9A\uFF0C\u8ACB\u554F\u60A8\u4E3B\u8981\u60F3\u4E86\u89E3\u54EA\u65B9\u9762\u7684\u670D\u52D9\u5462\uFF1F",professional:"\u611F\u8B1D\u60A8\u7684\u5782\u8A62\u3002\u6211\u5011\u63D0\u4F9B\u591A\u7A2E\u670D\u52D9\u65B9\u6848\uFF0C\u50F9\u683C\u5340\u9593\u5F9E\u57FA\u790E\u7248\u5230\u4F01\u696D\u7248\u4E0D\u7B49\u3002\u8ACB\u554F\u60A8\u7684\u5177\u9AD4\u9700\u6C42\u662F\u4EC0\u9EBC\uFF1F\u6211\u53EF\u4EE5\u70BA\u60A8\u63A8\u85A6\u6700\u5408\u9069\u7684\u65B9\u6848\u3002",enthusiastic:"\u592A\u597D\u4E86\uFF01\u611F\u8B1D\u60A8\u5C0D\u6211\u5011\u670D\u52D9\u7684\u95DC\u6CE8\uFF01\u{1F389} \u6211\u5011\u6709\u8D85\u503C\u7684\u512A\u60E0\u5957\u9910\u7B49\u8457\u60A8\uFF01\u6839\u64DA\u60A8\u7684\u9700\u6C42\uFF0C\u6211\u53EF\u4EE5\u70BA\u60A8\u91CF\u8EAB\u5B9A\u5236\u6700\u5212\u7B97\u7684\u65B9\u6848\uFF01",efficient:"\u60A8\u597D\u3002\u50F9\u683C\u8996\u9700\u6C42\u800C\u5B9A\u3002\u8ACB\u8AAA\u660E\u5177\u9AD4\u9700\u6C42\uFF0C\u6211\u70BA\u60A8\u5831\u50F9\u3002"};this.previewResponse.set(e[a]||e.friendly)}toggleRule(a){let e=this.defaultRules.find(r=>r.id===a);e&&(e.isActive=!e.isActive,this.markStrategyDirty())}getPersonaName(){return this.personaTemplates.find(e=>e.id===this.selectedPersonaTemplate())?.name||"\u53CB\u597D\u52A9\u624B"}getPreviewResponse(){return this.previewResponse()}regeneratePreview(){this.toastService.info("\u6B63\u5728\u751F\u6210\u9810\u89BD...");let a=["\u60A8\u597D\uFF01\u611F\u8B1D\u8AEE\u8A62\uFF0C\u6211\u5011\u7684\u50F9\u683C\u975E\u5E38\u6709\u7AF6\u722D\u529B\uFF0C\u5177\u9AD4\u8981\u770B\u60A8\u7684\u9700\u6C42\u54E6\uFF5E","\u89AA\uFF0C\u6211\u5011\u7684\u670D\u52D9\u6027\u50F9\u6BD4\u8D85\u9AD8\uFF01\u60A8\u60F3\u4E86\u89E3\u54EA\u500B\u5957\u9910\u5462\uFF1F","\u611F\u8B1D\u60A8\u7684\u95DC\u6CE8\uFF01\u6211\u5011\u6709\u591A\u7A2E\u50F9\u4F4D\u53EF\u9078\uFF0C\u6211\u5E6B\u60A8\u8A73\u7D30\u4ECB\u7D39\u4E00\u4E0B\uFF1F"],e=a[Math.floor(Math.random()*a.length)];this.previewResponse.set(e)}async savePersonaSettings(){await this.saveStrategySettings();let a=this.defaultRules.map(e=>({id:e.id,isActive:e.isActive}));localStorage.setItem("ai_rules_state",JSON.stringify(a)),this.toastService.success("AI \u4EBA\u683C\u8A2D\u5B9A\u5DF2\u4FDD\u5B58")}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=B({type:l,selectors:[["app-ai-center"]],decls:38,vars:7,consts:[[1,"ai-center","h-full","flex","flex-col","bg-slate-900"],[1,"p-4","border-b","border-slate-700/50","bg-slate-900/80","backdrop-blur-sm"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"text-2xl","font-bold","text-white","flex","items-center","gap-3"],[1,"text-2xl"],[1,"flex","items-center","gap-2"],[1,"flex","items-center","gap-2","px-3","py-1","bg-emerald-500/20","text-emerald-400","rounded-full","text-sm"],[1,"px-3","py-1","bg-yellow-500/20","text-yellow-400","rounded-full","text-sm"],[1,"flex","items-center","gap-6","px-4","py-2","bg-slate-800/80","rounded-xl","border","border-slate-700/50"],[1,"text-center"],[1,"text-lg","font-bold","text-cyan-400"],[1,"text-xs","text-slate-500"],[1,"text-lg","font-bold","text-emerald-400"],[1,"text-lg","font-bold","text-purple-400"],[1,"flex","gap-1","mt-4","bg-slate-800/50","p-1","rounded-xl","w-fit"],[1,"px-5","py-2.5","rounded-lg","transition-all","flex","items-center","gap-2","text-sm","font-medium",3,"bg-gradient-to-r","from-purple-500","to-pink-500","text-white","shadow-lg","text-slate-400","hover:text-white","hover:bg-slate-700/50"],[1,"flex-1","overflow-y-auto","p-4"],[1,"max-w-4xl","mx-auto","space-y-6"],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","flex","items-center","justify-center","z-50"],[1,"w-2","h-2","bg-emerald-500","rounded-full"],[1,"px-5","py-2.5","rounded-lg","transition-all","flex","items-center","gap-2","text-sm","font-medium",3,"click"],[1,"text-lg"],[1,"bg-gradient-to-br","from-purple-500/20","to-pink-500/20","rounded-2xl","border","border-purple-500/30","p-6"],[1,"w-14","h-14","rounded-xl","bg-purple-500/30","flex","items-center","justify-center","text-3xl"],[1,"text-xl","font-bold","text-white"],[1,"text-slate-400","text-sm"],[1,"relative","w-16","h-8","rounded-full","transition-all",3,"click"],[1,"absolute","top-1","left-1","w-6","h-6","bg-white","rounded-full","shadow","transition-transform"],[1,"mt-6","pt-6","border-t","border-purple-500/30","space-y-4"],[1,"bg-gradient-to-br","from-cyan-500/20","to-purple-500/20","rounded-2xl","border","border-cyan-500/30","p-6"],[1,"w-14","h-14","rounded-xl","bg-gradient-to-br","from-cyan-500/30","to-purple-500/30","flex","items-center","justify-center","text-3xl"],[1,"text-xl","font-bold","text-white","flex","items-center","gap-2"],[1,"px-2","py-0.5","text-xs","bg-purple-500/30","text-purple-400","rounded-full"],[1,"px-6","py-3","bg-gradient-to-r","from-purple-500","to-pink-500","text-white","font-medium","rounded-xl","hover:opacity-90","transition-all","shadow-lg","flex","items-center","gap-2",3,"click"],[1,"mt-6","pt-6","border-t","border-cyan-500/30"],[1,"grid","grid-cols-4","gap-3","text-center"],[1,"p-3","bg-slate-800/50","rounded-xl"],[1,"text-xl","mb-1"],[1,"text-xs","font-medium","text-white"],[1,"text-xs","text-cyan-400","mt-4","text-center"],[1,"bg-slate-800/50","rounded-xl","border","border-slate-700/50","p-6"],[1,"flex","items-center","gap-3","mb-4"],[1,"font-semibold","text-white"],[1,"text-sm","text-slate-400"],[1,"space-y-2"],[1,"flex","items-center","justify-between","p-3","bg-slate-700/50","rounded-lg"],[1,"text-center","py-8","text-slate-400"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center","gap-3"],[1,"px-4","py-2","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600","text-sm",3,"click"],[1,"flex","items-center","gap-4","p-4","bg-emerald-500/10","border","border-emerald-500/30","rounded-xl"],[1,"p-4","bg-amber-500/10","border","border-amber-500/30","rounded-xl"],[1,"flex","justify-end"],[1,"px-6","py-3","bg-gradient-to-r","from-purple-500","to-pink-500","text-white","font-medium","rounded-xl","hover:from-purple-400","hover:to-pink-400","transition-all","shadow-lg",3,"click"],[1,"text-sm","text-slate-400","block","mb-2"],[1,"grid","grid-cols-3","gap-3"],[1,"p-4","rounded-xl","border","transition-all","text-center",3,"click"],[1,"text-2xl","mb-1"],[1,"font-medium","text-white"],[1,"text-xs","text-slate-400"],[1,"grid","grid-cols-2","gap-4"],[1,"flex","items-center","justify-between","p-4","bg-slate-700/50","rounded-xl"],[1,"text-xl"],["type","checkbox",1,"w-5","h-5","rounded","bg-slate-600","border-slate-500",3,"change","checked"],[1,"w-10","h-10","rounded-full","bg-cyan-500/20","flex","items-center","justify-center","overflow-hidden"],["alt","Avatar",1,"w-full","h-full","object-cover",3,"src"],[1,"text-cyan-400"],[1,"flex","items-center","gap-1","text-emerald-400","text-sm"],[1,"text-3xl","mb-2"],[1,"text-sm","text-slate-500"],[1,"w-12","h-12","rounded-xl","bg-emerald-500/20","flex","items-center","justify-center","text-2xl"],[1,"flex-1"],[1,"flex","items-center","gap-1","text-emerald-400"],[1,"font-medium","text-amber-400"],[1,"bg-gradient-to-br","from-emerald-500/10","to-cyan-500/10","rounded-xl","border","border-emerald-500/30","p-6"],[1,"font-semibold","text-white","flex","items-center","gap-2"],[1,"px-2","py-0.5","bg-emerald-500/20","text-emerald-400","text-xs","rounded-full"],[1,"px-4","py-2","bg-emerald-500/20","text-emerald-400","rounded-lg","hover:bg-emerald-500/30","transition-colors",3,"click"],[1,"space-y-3"],[1,"flex","items-center","justify-between","p-4","bg-slate-800/50","rounded-xl"],[1,"text-center","py-6","text-slate-400"],[1,"px-4","py-2","bg-purple-500/20","text-purple-400","rounded-lg","hover:bg-purple-500/30","transition-colors",3,"click"],[1,"flex","items-center","justify-between","p-4","bg-slate-700/50","rounded-xl","hover:bg-slate-700","transition-colors"],[1,"mt-6","pt-6","border-t","border-slate-700/50"],[1,"bg-gradient-to-br","from-purple-500/10","to-pink-500/10","rounded-xl","border","border-purple-500/30","p-6"],[1,"px-2","py-0.5","bg-purple-500/20","text-purple-400","text-xs","rounded-full"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"ngModelChange","change","ngModel"],[1,"w-11","h-6","bg-slate-600","peer-focus:outline-none","rounded-full","peer","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-purple-500"],[1,"ms-3","text-sm","font-medium","text-slate-300"],[1,"text-sm","text-slate-400","mb-4"],[1,"space-y-4"],[1,"text-center","py-4","text-slate-400"],[1,"w-12","h-12","rounded-xl","bg-emerald-500/20","flex","items-center","justify-center"],[1,"text-xs","text-slate-400","truncate","max-w-xs"],[1,"text-amber-400","text-sm"],[1,"px-3","py-1","bg-slate-600","text-slate-300","rounded-lg","text-sm","hover:bg-slate-500","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","gap-1",3,"click","disabled"],[1,"px-3","py-1","text-sm","rounded-lg","transition-colors",3,"click"],[1,"text-red-400","hover:text-red-300","p-1",3,"click"],[1,"inline-block","w-3","h-3","border-2","border-slate-400","border-t-transparent","rounded-full","animate-spin"],[1,"text-sm","mb-3"],[1,"px-4","py-2","bg-emerald-500/20","text-emerald-400","rounded-lg","hover:bg-emerald-500/30",3,"click"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center"],[1,"text-slate-500","text-sm"],[1,"px-4","py-2","bg-purple-500/20","text-purple-400","rounded-lg","hover:bg-purple-500/30",3,"click"],[1,"text-sm","font-medium","text-white"],[1,"text-xs","text-emerald-400","flex","items-center","gap-1"],[1,"grid","grid-cols-3","gap-4"],[1,"text-xs","text-slate-400","block","mb-2"],[1,"w-full","px-3","py-2","bg-slate-700","border","border-slate-600","rounded-lg","text-white",3,"change","value"],["value",""],[3,"value","selected"],[1,"text-xs","text-slate-500","mt-3"],[1,"animate-spin"],["type","text","placeholder","http://localhost:9881",1,"w-full","px-4","py-2.5","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500",3,"ngModelChange","ngModel"],[1,"text-xs","text-slate-500","mt-1"],[1,"flex","gap-3"],[1,"px-4","py-2","bg-purple-500/20","text-purple-400","rounded-lg","hover:bg-purple-500/30","transition-colors","disabled:opacity-50","flex","items-center","gap-2",3,"click","disabled"],[1,"px-4","py-2","bg-emerald-500/20","text-emerald-400","rounded-lg","hover:bg-emerald-500/30","transition-colors","flex","items-center","gap-2"],[1,"flex","items-center","gap-2","text-emerald-400","text-sm"],[1,"inline-block","w-4","h-4","border-2","border-purple-400","border-t-transparent","rounded-full","animate-spin"],[1,"px-4","py-2","bg-emerald-500/20","text-emerald-400","rounded-lg","hover:bg-emerald-500/30","transition-colors","flex","items-center","gap-2",3,"click"],[1,"text-slate-500"],[1,"text-sm"],[1,"flex","items-center","justify-between","mb-6"],[1,"px-4","py-2","bg-purple-500/20","text-purple-400","rounded-lg","hover:bg-purple-500/30","transition-colors"],[1,"grid","grid-cols-4","gap-4"],[1,"p-5","rounded-xl","text-center","transition-all","border-2",3,"border-purple-500","bg-purple-500/10","border-transparent","bg-slate-700/50","hover:bg-slate-700"],[1,"font-semibold","text-white","mb-6","flex","items-center","gap-2"],[1,"grid","grid-cols-2","gap-6"],[1,"grid","grid-cols-2","gap-3"],[1,"p-4","rounded-xl","text-center","transition-all","border-2",3,"border-purple-500","bg-purple-500/10","border-transparent","bg-slate-700/50"],[1,"flex","gap-2"],[1,"flex-1","py-2","px-4","rounded-lg","text-sm","transition-colors",3,"bg-purple-500","text-white","bg-slate-700","text-slate-300"],[1,"flex","items-center","justify-between","p-3","bg-slate-700/50","rounded-lg","cursor-pointer",3,"click"],[1,"text-white","text-sm"],["type","checkbox",1,"w-5","h-5","rounded","text-purple-500","bg-slate-700","border-slate-600","pointer-events-none",3,"checked"],["rows","6","placeholder","\u4F8B\u5982\uFF1A\u4F60\u662F\u4E00\u4F4D\u5C08\u696D\u7684\u92B7\u552E\u9867\u554F\uFF0C\u5177\u67095\u5E74\u884C\u696D\u7D93\u9A57\uFF0C\u64C5\u9577\u89E3\u7B54\u5BA2\u6236\u7591\u554F...",1,"w-full","px-4","py-3","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500","resize-none",3,"input","value"],[1,"text-xs","text-slate-500","mt-2"],[1,"text-xs","text-slate-500","font-normal"],[1,"flex","items-center","justify-between","p-4","bg-slate-700/50","rounded-xl","cursor-pointer","hover:bg-slate-700","transition-colors"],[1,"mt-4","w-full","py-3","border","border-dashed","border-slate-600","rounded-xl","text-slate-400","hover:text-white","hover:border-purple-500","transition-colors"],[1,"bg-gradient-to-r","from-purple-900/30","to-blue-900/30","rounded-xl","border","border-purple-500/30","p-6"],[1,"font-semibold","text-white","mb-4","flex","items-center","gap-2"],[1,"bg-slate-900/50","rounded-xl","p-4"],[1,"mb-3"],[1,"text-slate-300"],[1,"border-t","border-slate-700","pt-3"],[1,"text-xs","text-purple-400"],[1,"text-white"],[1,"mt-3","px-4","py-2","bg-purple-500/20","text-purple-400","rounded-lg","hover:bg-purple-500/30","transition-colors",3,"click"],[1,"flex","justify-between","items-center","bg-slate-800/80","rounded-xl","p-4","border","border-slate-700/50","sticky","bottom-4"],[1,"px-4","py-2","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600","transition-colors",3,"click"],[1,"px-6","py-2","bg-gradient-to-r","from-purple-500","to-pink-500","text-white","font-medium","rounded-lg","transition-all","shadow-lg","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","gap-2",3,"click","disabled"],[1,"p-5","rounded-xl","text-center","transition-all","border-2",3,"click"],[1,"font-medium"],[1,"text-xs","text-slate-400","mt-1"],[1,"p-4","rounded-xl","text-center","transition-all","border-2",3,"click"],[1,"text-sm","font-medium"],[1,"flex-1","py-2","px-4","rounded-lg","text-sm","transition-colors",3,"click"],["type","checkbox",1,"w-5","h-5","rounded","text-purple-500","bg-slate-700","border-slate-600","cursor-pointer",3,"change","checked"],[1,"bg-slate-800/50","rounded-xl","border","border-slate-700/50","p-4"],[1,"text-3xl","font-bold","text-cyan-400"],[1,"text-3xl","font-bold","text-emerald-400"],[1,"text-3xl","font-bold","text-purple-400"],[1,"text-3xl","font-bold","text-orange-400"],[1,"font-semibold","text-white","mb-4"],[1,"text-4xl","font-bold","text-white","mb-1"],[1,"text-slate-400"],[1,"text-4xl","font-bold","text-emerald-400","mb-1"],[1,"bg-gradient-to-br","from-cyan-500/10","to-purple-500/10","rounded-xl","border","border-cyan-500/30","p-6"],[1,"px-2","py-0.5","text-xs","bg-emerald-500/30","text-emerald-400","rounded-full"],[1,"px-2","py-0.5","text-xs","bg-slate-500/30","text-slate-400","rounded-full"],[1,"px-4","py-2","bg-purple-500/20","text-purple-400","rounded-lg","hover:bg-purple-500/30","text-sm","flex","items-center","gap-2",3,"click"],[1,"bg-slate-800/50","rounded-lg","p-4"],[1,"flex","items-center","gap-2","mb-2"],[1,"text-2xl","font-bold","text-cyan-400"],[1,"text-2xl","font-bold","text-purple-400"],[1,"text-2xl","font-bold","text-orange-400"],[1,"text-2xl","font-bold","text-emerald-400"],[1,"text-2xl","font-bold","text-amber-400"],[1,"text-2xl","font-bold","text-blue-400"],[1,"mt-4","pt-4","border-t","border-slate-700/50"],[1,"px-4","py-2","bg-cyan-500/20","hover:bg-cyan-500/30","text-cyan-400","rounded-lg","text-sm","transition-colors",3,"click"],[1,"bg-slate-800","rounded-2xl","w-full","max-w-md","p-6","shadow-xl","border","border-slate-700"],[1,"text-xl","font-bold","text-white","mb-6"],[1,"grid","grid-cols-3","gap-2"],[1,"p-3","rounded-lg","text-center","transition-all","border-2",3,"border-purple-500","bg-purple-500/10","border-transparent","bg-slate-700"],[1,"w-full","px-4","py-2.5","bg-slate-700","border","border-slate-600","rounded-lg","text-white",3,"ngModelChange","ngModel"],[3,"value"],["type","password","placeholder","sk-...",1,"w-full","px-4","py-2.5","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500",3,"ngModelChange","ngModel"],["type","text","placeholder","\u5982 \u6211\u7684 GPT-4",1,"w-full","px-4","py-2.5","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500",3,"ngModelChange","ngModel"],[1,"flex","gap-3","mt-6"],[1,"flex-1","py-2.5","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600","transition-colors",3,"click"],[1,"flex-1","py-2.5","bg-purple-500","text-white","rounded-lg","hover:bg-purple-400","transition-colors",3,"click"],[1,"p-3","rounded-lg","text-center","transition-all","border-2",3,"click"],[1,"text-xs"],[1,"bg-slate-800","rounded-2xl","w-full","max-w-lg","p-6","shadow-xl","border","border-emerald-500/30"],[1,"text-xl","font-bold","text-white","mb-2","flex","items-center","gap-2"],[1,"text-slate-400","text-sm","mb-6"],["type","text","placeholder","https://your-ollama.ts.net/api/chat",1,"w-full","px-4","py-2.5","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500",3,"ngModelChange","ngModel"],["type","text","placeholder","qwen2.5, llama3.2, mistral",1,"w-full","px-4","py-2.5","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500",3,"ngModelChange","ngModel"],[1,"text-emerald-400"],["type","text","placeholder","\u6211\u7684\u672C\u5730 AI",1,"w-full","px-4","py-2.5","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500",3,"ngModelChange","ngModel"],[1,"w-full","py-2.5","bg-cyan-500/20","text-cyan-400","rounded-lg","hover:bg-cyan-500/30","transition-colors","flex","items-center","justify-center","gap-2",3,"click","disabled"],[1,"flex-1","py-2.5","bg-emerald-500","text-white","rounded-lg","hover:bg-emerald-400","transition-colors",3,"click"]],template:function(e,r){if(e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4)(5,"span",5),n(6,"\u2699\uFE0F"),t(),n(7," \u667A\u80FD\u5F15\u64CE\u8A2D\u7F6E "),t(),i(8,"div",6),C(9,ue,3,0,"span",7)(10,ce,2,0,"span",8),t()(),i(11,"div",3)(12,"div",9)(13,"div",10)(14,"div",11),n(15),t(),i(16,"div",12),n(17,"\u4ECA\u65E5\u5C0D\u8A71"),t()(),i(18,"div",10)(19,"div",13),n(20),t(),i(21,"div",12),n(22,"\u8F49\u5316\u7387"),t()(),i(23,"div",10)(24,"div",14),n(25),t(),i(26,"div",12),n(27,"\u4ECA\u65E5\u6210\u672C"),t()()()()(),i(28,"div",15),A(29,me,5,18,"button",16,I),t()(),i(31,"div",17),C(32,fe,84,9,"div",18)(33,Qe,45,6,"div",18)(34,tt,83,8,"div",18)(35,at,113,13,"div",18),t(),C(36,lt,34,3,"div",19),C(37,ut,34,5,"div",19),t()),e&2){let o;s(9),v(r.aiService.isConnected()?9:10),s(6),x(r.aiService.stats().today.conversations),s(5),b("",(r.aiService.stats().weekly.conversionRate*100).toFixed(1),"%"),s(5),b("\xA5",r.aiService.stats().today.cost.toFixed(2)),s(4),y(r.tabs),s(3),v((o=r.activeTab())==="quick"?32:o==="models"?33:o==="persona"?34:o==="stats"?35:-1),s(4),v(r.showAddModel()?36:-1),s(),v(r.showAddLocalModel()?37:-1)}},dependencies:[V,P,q,z,U,W,Q,G,O],encapsulation:2})}};var ne=class l{constructor(){this.i18n=D(Z);this.nav=D(ee);this.membershipService=D(Y);this.aiService=D(te);this.activeTab=_("config")}ngOnInit(){let e=new URLSearchParams(window.location.search).get("tab");e&&this.activeTab.set(e),this.aiService.loadSettings()}t(a,e){return this.i18n.t(a,e)}navigateTo(a){this.nav.navigateTo(a)}setActiveTab(a){this.activeTab.set(a)}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=B({type:l,selectors:[["app-ai-center-view"]],decls:1,vars:0,consts:[[3,"tabChange","navigate"]],template:function(e,r){e&1&&(i(0,"app-ai-center",0),p("tabChange",function(d){return r.setActiveTab(d)})("navigate",function(d){return r.navigateTo(d)}),t())},dependencies:[V,P,N],encapsulation:2,changeDetection:0})}};export{ne as a};
