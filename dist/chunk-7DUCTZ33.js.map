{
  "version": 3,
  "sources": ["src/core/api.service.ts", "src/core/auth.service.ts"],
  "sourcesContent": ["/**\r\n * TG-Matrix Áµ±‰∏Ä API ÊúçÂãô\r\n * \r\n * ÂÑ™ÂåñË®≠Ë®àÔºö\r\n * 1. Ëá™ÂãïÊ™¢Ê∏¨Áí∞Â¢ÉÔºàElectron vs WebÔºâ\r\n * 2. Áµ±‰∏ÄÁöÑË´ãÊ±Ç/ÈüøÊáâÊé•Âè£\r\n * 3. Ëá™ÂãïÈáçË©¶ÂíåÈåØË™§ËôïÁêÜ\r\n * 4. Ë´ãÊ±ÇÁ∑©Â≠òÂíåÂéªÈáç\r\n * 5. WebSocket ÂØ¶ÊôÇÈÄöË®äÊîØÊåÅ\r\n */\r\n\r\nimport { Injectable, inject, signal, computed } from '@angular/core';\r\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\r\nimport { Observable, Subject, BehaviorSubject, from, of, throwError } from 'rxjs';\r\nimport { map, catchError, retry, shareReplay, tap, timeout } from 'rxjs/operators';\r\n\r\n// Áí∞Â¢ÉÈÖçÁΩÆ\r\nexport interface ApiConfig {\r\n  mode: 'ipc' | 'http';\r\n  baseUrl?: string;\r\n  wsUrl?: string;\r\n  timeout?: number;\r\n  retries?: number;\r\n}\r\n\r\n// API ÈüøÊáâÊ†ºÂºè\r\nexport interface ApiResponse<T = any> {\r\n  success: boolean;\r\n  data?: T;\r\n  error?: string;\r\n  message?: string;\r\n  request_id?: string;\r\n}\r\n\r\n// WebSocket Ê∂àÊÅØÊ†ºÂºè\r\nexport interface WsMessage {\r\n  type: 'event' | 'response' | 'error';\r\n  event?: string;\r\n  data?: any;\r\n  request_id?: string;\r\n  timestamp?: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ApiService {\r\n  private http = inject(HttpClient);\r\n  \r\n  // Áí∞Â¢ÉÊ™¢Ê∏¨\r\n  private _isElectron = signal<boolean>(this.detectElectron());\r\n  private _isConnected = signal<boolean>(false);\r\n  private _config = signal<ApiConfig>(this.getDefaultConfig());\r\n  \r\n  // WebSocket\r\n  private ws: WebSocket | null = null;\r\n  private wsReconnectTimer: any = null;\r\n  private wsMessageSubject = new Subject<WsMessage>();\r\n  private pendingRequests = new Map<string, { resolve: Function; reject: Function }>();\r\n  \r\n  // Ë´ãÊ±ÇÁ∑©Â≠ò\r\n  private cache = new Map<string, { data: any; timestamp: number }>();\r\n  private cacheTimeout = 30000; // 30 ÁßíÁ∑©Â≠ò\r\n  \r\n  // Ë´ãÊ±ÇÂéªÈáç\r\n  private inflightRequests = new Map<string, Promise<any>>();\r\n  \r\n  // ÂÖ¨ÈñãÁãÄÊÖã\r\n  readonly isElectron = computed(() => this._isElectron());\r\n  readonly isConnected = computed(() => this._isConnected());\r\n  readonly mode = computed(() => this._config().mode);\r\n  \r\n  // ‰∫ã‰ª∂ÊµÅ\r\n  readonly events$ = this.wsMessageSubject.asObservable();\r\n  \r\n  constructor() {\r\n    this.init();\r\n  }\r\n  \r\n  // ==================== ÂàùÂßãÂåñ ====================\r\n  \r\n  private init(): void {\r\n    console.log(`[ApiService] Initializing in ${this._config().mode} mode`);\r\n    \r\n    if (this._config().mode === 'http') {\r\n      this.connectWebSocket();\r\n    }\r\n    \r\n    // Ê∏¨Ë©¶ÈÄ£Êé•\r\n    this.healthCheck().then(ok => {\r\n      this._isConnected.set(ok);\r\n      console.log(`[ApiService] Connection status: ${ok ? 'connected' : 'disconnected'}`);\r\n    });\r\n  }\r\n  \r\n  private detectElectron(): boolean {\r\n    return !!(window as any).electron || !!(window as any).require;\r\n  }\r\n  \r\n  private getDefaultConfig(): ApiConfig {\r\n    // ÂÑ™ÂÖàÂæûÁí∞Â¢ÉËÆäÈáèÁç≤Âèñ\r\n    const envMode = (window as any).__API_MODE__ || 'auto';\r\n    const envBaseUrl = (window as any).__API_BASE_URL__;\r\n    \r\n    if (envMode === 'http' || envBaseUrl) {\r\n      return {\r\n        mode: 'http',\r\n        baseUrl: envBaseUrl || this.detectApiUrl(),\r\n        wsUrl: this.detectWsUrl(),\r\n        timeout: 30000,\r\n        retries: 2\r\n      };\r\n    }\r\n    \r\n    if (this.detectElectron()) {\r\n      return {\r\n        mode: 'ipc',\r\n        timeout: 30000,\r\n        retries: 2\r\n      };\r\n    }\r\n    \r\n    // Web Áí∞Â¢ÉÈªòË™ç‰ΩøÁî® HTTP\r\n    return {\r\n      mode: 'http',\r\n      baseUrl: this.detectApiUrl(),\r\n      wsUrl: this.detectWsUrl(),\r\n      timeout: 30000,\r\n      retries: 2\r\n    };\r\n  }\r\n  \r\n  private detectApiUrl(): string {\r\n    // ÈñãÁôºÁí∞Â¢É\r\n    if (window.location.hostname === 'localhost' && window.location.port === '4200') {\r\n      return 'http://localhost:8000';\r\n    }\r\n    // ÁîüÁî¢Áí∞Â¢É - ÂêåÊ∫ê\r\n    return `${window.location.protocol}//${window.location.host}`;\r\n  }\r\n  \r\n  private detectWsUrl(): string {\r\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\r\n    if (window.location.hostname === 'localhost' && window.location.port === '4200') {\r\n      return 'ws://localhost:8000/ws';\r\n    }\r\n    return `${protocol}//${window.location.host}/ws`;\r\n  }\r\n  \r\n  // ==================== Ê†∏ÂøÉË´ãÊ±ÇÊñπÊ≥ï ====================\r\n  \r\n  /**\r\n   * Âü∑Ë°åÂëΩ‰ª§ - Ê†∏ÂøÉÊñπÊ≥ï\r\n   * Ëá™ÂãïÈÅ∏Êìá IPC Êàñ HTTP\r\n   */\r\n  async command<T = any>(cmd: string, payload: any = {}): Promise<ApiResponse<T>> {\r\n    const requestKey = `${cmd}:${JSON.stringify(payload)}`;\r\n    \r\n    // Ë´ãÊ±ÇÂéªÈáç\r\n    if (this.inflightRequests.has(requestKey)) {\r\n      return this.inflightRequests.get(requestKey)!;\r\n    }\r\n    \r\n    const promise = this._executeCommand<T>(cmd, payload);\r\n    this.inflightRequests.set(requestKey, promise);\r\n    \r\n    try {\r\n      const result = await promise;\r\n      return result;\r\n    } finally {\r\n      this.inflightRequests.delete(requestKey);\r\n    }\r\n  }\r\n  \r\n  private async _executeCommand<T>(cmd: string, payload: any): Promise<ApiResponse<T>> {\r\n    if (this._config().mode === 'ipc') {\r\n      return this.ipcCommand(cmd, payload);\r\n    } else {\r\n      return this.httpCommand(cmd, payload);\r\n    }\r\n  }\r\n  \r\n  // ==================== IPC Ê®°Âºè ====================\r\n  \r\n  private async ipcCommand<T>(cmd: string, payload: any): Promise<ApiResponse<T>> {\r\n    const electron = (window as any).electron;\r\n    if (!electron?.ipcRenderer) {\r\n      throw new Error('Electron IPC not available');\r\n    }\r\n    \r\n    try {\r\n      const result = await electron.ipcRenderer.invoke(cmd, payload);\r\n      return this.normalizeResponse(result);\r\n    } catch (error: any) {\r\n      return { success: false, error: error.message || 'IPC error' };\r\n    }\r\n  }\r\n  \r\n  // ==================== HTTP Ê®°Âºè ====================\r\n  \r\n  private async httpCommand<T>(cmd: string, payload: any): Promise<ApiResponse<T>> {\r\n    const config = this._config();\r\n    const url = `${config.baseUrl}/api/command`;\r\n    \r\n    try {\r\n      const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          // TODO: Ê∑ªÂä†Ë™çË≠â token\r\n        },\r\n        body: JSON.stringify({ command: cmd, payload })\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      \r\n      const result = await response.json();\r\n      return this.normalizeResponse(result);\r\n    } catch (error: any) {\r\n      // Ëá™ÂãïÈáçË©¶\r\n      if (config.retries && config.retries > 0) {\r\n        console.warn(`[ApiService] Retrying command: ${cmd}`);\r\n        const newConfig = { ...config, retries: config.retries - 1 };\r\n        this._config.set(newConfig);\r\n        return this.httpCommand(cmd, payload);\r\n      }\r\n      \r\n      return { success: false, error: error.message || 'HTTP error' };\r\n    }\r\n  }\r\n  \r\n  private normalizeResponse<T>(result: any): ApiResponse<T> {\r\n    if (typeof result === 'object' && result !== null) {\r\n      if ('success' in result) {\r\n        return result;\r\n      }\r\n      return { success: true, data: result };\r\n    }\r\n    return { success: true, data: result as T };\r\n  }\r\n  \r\n  // ==================== WebSocket ====================\r\n  \r\n  private connectWebSocket(): void {\r\n    const wsUrl = this._config().wsUrl;\r\n    if (!wsUrl) return;\r\n    \r\n    try {\r\n      this.ws = new WebSocket(wsUrl);\r\n      \r\n      this.ws.onopen = () => {\r\n        console.log('[ApiService] WebSocket connected');\r\n        this._isConnected.set(true);\r\n        if (this.wsReconnectTimer) {\r\n          clearTimeout(this.wsReconnectTimer);\r\n          this.wsReconnectTimer = null;\r\n        }\r\n      };\r\n      \r\n      this.ws.onmessage = (event) => {\r\n        try {\r\n          const message = JSON.parse(event.data) as WsMessage;\r\n          \r\n          // ËôïÁêÜË´ãÊ±ÇÈüøÊáâ\r\n          if (message.request_id && this.pendingRequests.has(message.request_id)) {\r\n            const { resolve } = this.pendingRequests.get(message.request_id)!;\r\n            this.pendingRequests.delete(message.request_id);\r\n            resolve(message);\r\n          }\r\n          \r\n          // Âª£Êí≠‰∫ã‰ª∂\r\n          this.wsMessageSubject.next(message);\r\n        } catch (e) {\r\n          console.error('[ApiService] WebSocket message parse error', e);\r\n        }\r\n      };\r\n      \r\n      this.ws.onclose = () => {\r\n        console.log('[ApiService] WebSocket disconnected');\r\n        this._isConnected.set(false);\r\n        this.scheduleReconnect();\r\n      };\r\n      \r\n      this.ws.onerror = (error) => {\r\n        console.error('[ApiService] WebSocket error', error);\r\n      };\r\n    } catch (e) {\r\n      console.error('[ApiService] WebSocket connection failed', e);\r\n      this.scheduleReconnect();\r\n    }\r\n  }\r\n  \r\n  private scheduleReconnect(): void {\r\n    if (this.wsReconnectTimer) return;\r\n    \r\n    this.wsReconnectTimer = setTimeout(() => {\r\n      console.log('[ApiService] Attempting WebSocket reconnection...');\r\n      this.wsReconnectTimer = null;\r\n      this.connectWebSocket();\r\n    }, 5000);\r\n  }\r\n  \r\n  /**\r\n   * ÈÄöÈÅé WebSocket ÁôºÈÄÅÂëΩ‰ª§\r\n   */\r\n  async wsCommand<T>(cmd: string, payload: any = {}): Promise<ApiResponse<T>> {\r\n    if (!this.ws || this.ws.readyState !== WebSocket.OPEN) {\r\n      // ÈôçÁ¥öÂà∞ HTTP\r\n      return this.httpCommand(cmd, payload);\r\n    }\r\n    \r\n    const requestId = crypto.randomUUID();\r\n    \r\n    return new Promise((resolve, reject) => {\r\n      this.pendingRequests.set(requestId, { resolve, reject });\r\n      \r\n      // Ë∂ÖÊôÇËôïÁêÜ\r\n      setTimeout(() => {\r\n        if (this.pendingRequests.has(requestId)) {\r\n          this.pendingRequests.delete(requestId);\r\n          reject(new Error('WebSocket request timeout'));\r\n        }\r\n      }, this._config().timeout || 30000);\r\n      \r\n      this.ws!.send(JSON.stringify({\r\n        command: cmd,\r\n        payload,\r\n        request_id: requestId\r\n      }));\r\n    });\r\n  }\r\n  \r\n  // ==================== ‰æøÊç∑ÊñπÊ≥ï ====================\r\n  \r\n  /**\r\n   * ÂÅ•Â∫∑Ê™¢Êü•\r\n   */\r\n  async healthCheck(): Promise<boolean> {\r\n    try {\r\n      const result = await this.command('get-initial-state');\r\n      return result.success;\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Â∏∂Á∑©Â≠òÁöÑË´ãÊ±Ç\r\n   */\r\n  async cachedCommand<T>(cmd: string, payload: any = {}, ttl: number = this.cacheTimeout): Promise<ApiResponse<T>> {\r\n    const cacheKey = `${cmd}:${JSON.stringify(payload)}`;\r\n    const cached = this.cache.get(cacheKey);\r\n    \r\n    if (cached && Date.now() - cached.timestamp < ttl) {\r\n      return { success: true, data: cached.data };\r\n    }\r\n    \r\n    const result = await this.command<T>(cmd, payload);\r\n    \r\n    if (result.success && result.data) {\r\n      this.cache.set(cacheKey, { data: result.data, timestamp: Date.now() });\r\n    }\r\n    \r\n    return result;\r\n  }\r\n  \r\n  /**\r\n   * Ê∏ÖÈô§Á∑©Â≠ò\r\n   */\r\n  clearCache(pattern?: string): void {\r\n    if (pattern) {\r\n      for (const key of this.cache.keys()) {\r\n        if (key.includes(pattern)) {\r\n          this.cache.delete(key);\r\n        }\r\n      }\r\n    } else {\r\n      this.cache.clear();\r\n    }\r\n  }\r\n  \r\n  // ==================== Â∏∏Áî® API Âø´Êç∑ÊñπÊ≥ï ====================\r\n  \r\n  // Â∏≥Ëôü\r\n  getAccounts() { return this.cachedCommand('get-accounts'); }\r\n  addAccount(data: any) { return this.command('add-account', data); }\r\n  loginAccount(id: string | number) { return this.command('login-account', { id }); }\r\n  logoutAccount(id: string | number) { return this.command('logout-account', { id }); }\r\n  \r\n  // Ë™çË≠â\r\n  sendCode(phone: string, apiId?: string, apiHash?: string) {\r\n    return this.command('send-code', { phone, apiId, apiHash });\r\n  }\r\n  verifyCode(phone: string, code: string, phoneCodeHash: string) {\r\n    return this.command('verify-code', { phone, code, phoneCodeHash });\r\n  }\r\n  \r\n  // API ÊÜëË≠â\r\n  getCredentials() { return this.cachedCommand('get-api-credentials'); }\r\n  addCredential(data: any) { return this.command('add-api-credential', data); }\r\n  getRecommendedCredential() { return this.cachedCommand('get-api-recommendation'); }\r\n  \r\n  // Áõ£Êéß\r\n  getMonitoringStatus() { return this.command('get-monitoring-status'); }\r\n  startMonitoring(config?: any) { return this.command('start-monitoring', config); }\r\n  stopMonitoring() { return this.command('stop-monitoring'); }\r\n  \r\n  // ÂàùÂßãÁãÄÊÖã\r\n  getInitialState() { return this.cachedCommand('get-initial-state', {}, 5000); }\r\n  \r\n  // Ë®≠ÁΩÆ\r\n  getSettings() { return this.cachedCommand('get-settings'); }\r\n  saveSettings(settings: any) {\r\n    this.clearCache('get-settings');\r\n    return this.command('save-settings', settings);\r\n  }\r\n}\r\n", "/**\r\n * TG-Matrix Ë™çË≠âÊúçÂãô\r\n * \r\n * ÂÑ™ÂåñË®≠Ë®àÔºö\r\n * 1. Áµ±‰∏ÄÁöÑË™çË≠âÁãÄÊÖãÁÆ°ÁêÜ\r\n * 2. Token Ëá™ÂãïÂà∑Êñ∞\r\n * 3. Ë®≠ÂÇôÁÆ°ÁêÜ\r\n * 4. Èõ¢Á∑öÊîØÊåÅ\r\n */\r\n\r\nimport { Injectable, inject, signal, computed, effect } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { ApiService } from './api.service';\r\n\r\n// Áî®Êà∂Ê®°Âûã\r\nexport interface User {\r\n  id: string;\r\n  email: string;\r\n  username: string;\r\n  display_name: string;\r\n  avatar_url: string;\r\n  role: string;\r\n  subscription_tier: string;\r\n  max_accounts: number;\r\n  is_active: boolean;\r\n  is_verified: boolean;\r\n  two_factor_enabled: boolean;\r\n  created_at: string;\r\n  last_login_at: string;\r\n}\r\n\r\n// Ë™çË≠âÁãÄÊÖã\r\nexport interface AuthState {\r\n  user: User | null;\r\n  isAuthenticated: boolean;\r\n  isLoading: boolean;\r\n  accessToken: string | null;\r\n  refreshToken: string | null;\r\n}\r\n\r\n// ÁôªÂÖ•Ë´ãÊ±Ç\r\nexport interface LoginRequest {\r\n  email: string;\r\n  password: string;\r\n  remember?: boolean;\r\n  device_name?: string;\r\n}\r\n\r\n// Ë®ªÂÜäË´ãÊ±Ç\r\nexport interface RegisterRequest {\r\n  email: string;\r\n  password: string;\r\n  username?: string;\r\n  display_name?: string;\r\n}\r\n\r\n// Token Â≠òÂÑ≤Èçµ\r\nconst TOKEN_KEYS = {\r\n  ACCESS: 'tgm_access_token',\r\n  REFRESH: 'tgm_refresh_token',\r\n  USER: 'tgm_user'\r\n};\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n  private api = inject(ApiService);\r\n  private router = inject(Router);\r\n  \r\n  // ÁãÄÊÖã‰ø°Ëôü\r\n  private _user = signal<User | null>(null);\r\n  private _isLoading = signal<boolean>(false);\r\n  private _accessToken = signal<string | null>(null);\r\n  private _refreshToken = signal<string | null>(null);\r\n  \r\n  // Token Âà∑Êñ∞ÂÆöÊôÇÂô®\r\n  private refreshTimer: any = null;\r\n  \r\n  // ÂÖ¨ÈñãÁöÑË®àÁÆóÂ±¨ÊÄß\r\n  readonly user = computed(() => this._user());\r\n  readonly isAuthenticated = computed(() => !!this._user() && !!this._accessToken());\r\n  readonly isLoading = computed(() => this._isLoading());\r\n  readonly accessToken = computed(() => this._accessToken());\r\n  \r\n  // Ë®ÇÈñ±‰ø°ÊÅØ\r\n  readonly subscriptionTier = computed(() => this._user()?.subscription_tier || 'free');\r\n  readonly maxAccounts = computed(() => this._user()?.max_accounts || 3);\r\n  readonly isPro = computed(() => ['pro', 'enterprise'].includes(this.subscriptionTier()));\r\n  \r\n  // ÊúÉÂì°Á≠âÁ¥öÔºàÂÖºÂÆπËàäÊé•Âè£Ôºâ\r\n  readonly membershipLevel = computed(() => {\r\n    const tier = this.subscriptionTier();\r\n    const tierMap: Record<string, string> = {\r\n      'free': 'bronze',\r\n      'basic': 'silver',\r\n      'pro': 'gold',\r\n      'enterprise': 'diamond'\r\n    };\r\n    return tierMap[tier] || 'bronze';\r\n  });\r\n  \r\n  \r\n  constructor() {\r\n    // ÂàùÂßãÂåñÊôÇÊÅ¢Âæ©ÁãÄÊÖã\r\n    this.restoreSession();\r\n    \r\n    // Token ËÆäÂåñÊôÇËá™Âãï‰øùÂ≠ò\r\n    effect(() => {\r\n      const token = this._accessToken();\r\n      if (token) {\r\n        localStorage.setItem(TOKEN_KEYS.ACCESS, token);\r\n      } else {\r\n        localStorage.removeItem(TOKEN_KEYS.ACCESS);\r\n      }\r\n    });\r\n    \r\n    effect(() => {\r\n      const token = this._refreshToken();\r\n      if (token) {\r\n        localStorage.setItem(TOKEN_KEYS.REFRESH, token);\r\n      } else {\r\n        localStorage.removeItem(TOKEN_KEYS.REFRESH);\r\n      }\r\n    });\r\n    \r\n    effect(() => {\r\n      const user = this._user();\r\n      if (user) {\r\n        localStorage.setItem(TOKEN_KEYS.USER, JSON.stringify(user));\r\n      } else {\r\n        localStorage.removeItem(TOKEN_KEYS.USER);\r\n      }\r\n    });\r\n  }\r\n  \r\n  // ==================== ÂÖ¨ÈñãÊñπÊ≥ï ====================\r\n  \r\n  /**\r\n   * Áî®Êà∂Ë®ªÂÜä\r\n   */\r\n  async register(request: RegisterRequest): Promise<{ success: boolean; error?: string }> {\r\n    this._isLoading.set(true);\r\n    \r\n    try {\r\n      const result = await this.api.command<any>('user-register', request);\r\n      \r\n      if (result.success && result.data) {\r\n        this.setAuthState(result.data);\r\n        return { success: true };\r\n      }\r\n      \r\n      return { success: false, error: result.error || 'Ë®ªÂÜäÂ§±Êïó' };\r\n    } catch (e: any) {\r\n      return { success: false, error: e.message || 'Ë®ªÂÜäÂ§±Êïó' };\r\n    } finally {\r\n      this._isLoading.set(false);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Áî®Êà∂ÁôªÂÖ•\r\n   */\r\n  async login(request: LoginRequest): Promise<{ success: boolean; error?: string }> {\r\n    this._isLoading.set(true);\r\n    \r\n    try {\r\n      // Ë™øÁî® HTTP API\r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/auth/login`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          email: request.email,\r\n          password: request.password,\r\n          device_name: request.device_name || this.getDeviceName()\r\n        })\r\n      });\r\n      \r\n      const result = await response.json();\r\n      \r\n      if (result.success && result.data) {\r\n        this.setAuthState(result.data);\r\n        this.scheduleTokenRefresh();\r\n        return { success: true };\r\n      }\r\n      \r\n      return { success: false, error: result.error || 'ÁôªÂÖ•Â§±Êïó' };\r\n    } catch (e: any) {\r\n      return { success: false, error: e.message || 'ÁôªÂÖ•Â§±Êïó' };\r\n    } finally {\r\n      this._isLoading.set(false);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Áç≤Âèñ Telegram OAuth ÈÖçÁΩÆ\r\n   */\r\n  async getTelegramConfig(): Promise<{ enabled: boolean; bot_username?: string; bot_id?: string }> {\r\n    try {\r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/oauth/telegram/config`);\r\n      const result = await response.json();\r\n      \r\n      if (result.success && result.data) {\r\n        return result.data;\r\n      }\r\n      \r\n      return { enabled: false };\r\n    } catch (e) {\r\n      console.error('Failed to get Telegram config:', e);\r\n      return { enabled: false };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Telegram OAuth ÁôªÂÖ•\r\n   */\r\n  async telegramLogin(authData: any): Promise<{ success: boolean; error?: string }> {\r\n    this._isLoading.set(true);\r\n    \r\n    try {\r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/oauth/telegram`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(authData)\r\n      });\r\n      \r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        // Ë®≠ÁΩÆË™çË≠âÁãÄÊÖã\r\n        this.setAuthState({\r\n          user: result.user,\r\n          access_token: result.access_token,\r\n          refresh_token: result.refresh_token\r\n        });\r\n        this.scheduleTokenRefresh();\r\n        return { success: true };\r\n      }\r\n      \r\n      return { success: false, error: result.error || 'Telegram ÁôªÂÖ•Â§±Êïó' };\r\n    } catch (e: any) {\r\n      return { success: false, error: e.message || 'Telegram ÁôªÂÖ•Â§±Êïó' };\r\n    } finally {\r\n      this._isLoading.set(false);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ÁôªÂá∫\r\n   */\r\n  async logout(): Promise<void> {\r\n    try {\r\n      const token = this._accessToken();\r\n      if (token) {\r\n        await fetch(`${this.getApiBaseUrl()}/api/v1/auth/logout`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n      }\r\n    } catch (e) {\r\n      console.error('Logout error:', e);\r\n    } finally {\r\n      this.clearAuthState();\r\n      this.router.navigate(['/login']);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Ë´ãÊ±ÇÂØÜÁ¢ºÈáçÁΩÆ\r\n   */\r\n  async forgotPassword(email: string): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/auth/forgot-password`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email })\r\n      });\r\n      \r\n      const result = await response.json();\r\n      return { success: result.success, error: result.error };\r\n    } catch (e: any) {\r\n      return { success: false, error: e.message };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ÈáçÁΩÆÂØÜÁ¢º\r\n   */\r\n  async resetPassword(token: string, password: string): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/auth/reset-password`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ token, password })\r\n      });\r\n      \r\n      const result = await response.json();\r\n      return { success: result.success, error: result.error };\r\n    } catch (e: any) {\r\n      return { success: false, error: e.message };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * È©óË≠âÈÉµÁÆ±ÔºàÈÄöÈÅé TokenÔºâ\r\n   */\r\n  async verifyEmail(token: string): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/auth/verify-email`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ token })\r\n      });\r\n      \r\n      const result = await response.json();\r\n      return { success: result.success, error: result.error };\r\n    } catch (e: any) {\r\n      return { success: false, error: e.message };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * È©óË≠âÈÉµÁÆ±ÔºàÈÄöÈÅéÈ©óË≠âÁ¢ºÔºâ\r\n   */\r\n  async verifyEmailByCode(email: string, code: string): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/auth/verify-email-code`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, code })\r\n      });\r\n      \r\n      const result = await response.json();\r\n      return { success: result.success, error: result.error };\r\n    } catch (e: any) {\r\n      return { success: false, error: e.message };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ÈáçÊñ∞ÁôºÈÄÅÈ©óË≠âÈÉµ‰ª∂\r\n   */\r\n  async resendVerificationEmail(): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      const token = this._accessToken();\r\n      if (!token) {\r\n        return { success: false, error: 'Êú™ÁôªÂÖ•' };\r\n      }\r\n      \r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/auth/send-verification`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      const result = await response.json();\r\n      return { success: result.success, error: result.error };\r\n    } catch (e: any) {\r\n      return { success: false, error: e.message };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Âà∑Êñ∞ Token\r\n   */\r\n  async refreshAccessToken(): Promise<boolean> {\r\n    const refreshToken = this._refreshToken();\r\n    if (!refreshToken) {\r\n      return false;\r\n    }\r\n    \r\n    try {\r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/auth/refresh`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ refresh_token: refreshToken })\r\n      });\r\n      \r\n      const result = await response.json();\r\n      \r\n      if (result.success && result.data) {\r\n        this._accessToken.set(result.data.access_token);\r\n        this._refreshToken.set(result.data.refresh_token);\r\n        this.scheduleTokenRefresh();\r\n        return true;\r\n      }\r\n      \r\n      return false;\r\n    } catch (e) {\r\n      console.error('Token refresh error:', e);\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Áç≤ÂèñÁï∂ÂâçÁî®Êà∂‰ø°ÊÅØ\r\n   */\r\n  async fetchCurrentUser(): Promise<User | null> {\r\n    const token = this._accessToken();\r\n    if (!token) {\r\n      return null;\r\n    }\r\n    \r\n    try {\r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/auth/me`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      \r\n      const result = await response.json();\r\n      \r\n      if (result.success && result.data) {\r\n        this._user.set(result.data);\r\n        return result.data;\r\n      }\r\n      \r\n      return null;\r\n    } catch (e) {\r\n      console.error('Fetch user error:', e);\r\n      return null;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Êõ¥Êñ∞Áî®Êà∂‰ø°ÊÅØ\r\n   */\r\n  async updateProfile(updates: Partial<User>): Promise<{ success: boolean; error?: string }> {\r\n    const token = this._accessToken();\r\n    if (!token) {\r\n      return { success: false, error: 'Êú™ÁôªÂÖ•' };\r\n    }\r\n    \r\n    try {\r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/auth/me`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(updates)\r\n      });\r\n      \r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        // Êõ¥Êñ∞Êú¨Âú∞Áî®Êà∂‰ø°ÊÅØ\r\n        const currentUser = this._user();\r\n        if (currentUser) {\r\n          this._user.set({ ...currentUser, ...updates });\r\n        }\r\n        return { success: true };\r\n      }\r\n      \r\n      return { success: false, error: result.error };\r\n    } catch (e: any) {\r\n      return { success: false, error: e.message };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ‰øÆÊîπÂØÜÁ¢º\r\n   */\r\n  async changePassword(oldPassword: string, newPassword: string): Promise<{ success: boolean; error?: string }> {\r\n    const token = this._accessToken();\r\n    if (!token) {\r\n      return { success: false, error: 'Êú™ÁôªÂÖ•' };\r\n    }\r\n    \r\n    try {\r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/auth/change-password`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ old_password: oldPassword, new_password: newPassword })\r\n      });\r\n      \r\n      const result = await response.json();\r\n      return { success: result.success, error: result.error };\r\n    } catch (e: any) {\r\n      return { success: false, error: e.message };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Áç≤ÂèñÊúÉË©±ÂàóË°®\r\n   */\r\n  /**\r\n   * üÜï Phase 4: Áç≤ÂèñÁî®Êà∂ÊâÄÊúâË®≠ÂÇô\r\n   */\r\n  async getSessions(): Promise<any[]> {\r\n    const token = this._accessToken();\r\n    if (!token) return [];\r\n    \r\n    try {\r\n      // ‰ΩøÁî®Êñ∞ÁöÑË®≠ÂÇôÁÆ°ÁêÜ API\r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/auth/devices`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      \r\n      const result = await response.json();\r\n      return result.success ? (result.data?.devices || []) : [];\r\n    } catch (e) {\r\n      return [];\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Êí§Èä∑ÊúÉË©±\r\n   */\r\n  /**\r\n   * üÜï Phase 4: Êí§Èä∑ÊåáÂÆöË®≠ÂÇôÊúÉË©±\r\n   */\r\n  async revokeSession(sessionId: string): Promise<boolean> {\r\n    const token = this._accessToken();\r\n    if (!token) return false;\r\n    \r\n    try {\r\n      // ‰ΩøÁî®Êñ∞ÁöÑË®≠ÂÇôÁÆ°ÁêÜ API\r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/auth/devices/${sessionId}`, {\r\n        method: 'DELETE',\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      \r\n      const result = await response.json();\r\n      return result.success;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * üÜï Phase 4: ÁôªÂá∫Èô§Áï∂ÂâçË®≠ÂÇôÂ§ñÁöÑÊâÄÊúâË®≠ÂÇô\r\n   */\r\n  async revokeAllOtherSessions(): Promise<number> {\r\n    const token = this._accessToken();\r\n    if (!token) return 0;\r\n    \r\n    try {\r\n      // Áç≤ÂèñÁï∂ÂâçÊúÉË©± IDÔºàÂ¶ÇÊûúÊúâ‰øùÂ≠òÁöÑË©±Ôºâ\r\n      const currentSessionId = localStorage.getItem('tgm_session_id') || '';\r\n      \r\n      const response = await fetch(`${this.getApiBaseUrl()}/api/v1/auth/devices/revoke-all`, {\r\n        method: 'POST',\r\n        headers: { \r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ current_session_id: currentSessionId })\r\n      });\r\n      \r\n      const result = await response.json();\r\n      return result.success ? (result.revoked_count || 0) : 0;\r\n    } catch (e) {\r\n      return 0;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Ê™¢Êü•ÂäüËÉΩÊ¨äÈôê\r\n   */\r\n  hasFeature(feature: string): boolean {\r\n    const tier = this.subscriptionTier();\r\n    const featureMap: Record<string, string[]> = {\r\n      'free': ['basic_monitoring', 'basic_ai'],\r\n      'basic': ['basic_monitoring', 'basic_ai', 'templates'],\r\n      'pro': ['basic_monitoring', 'basic_ai', 'templates', 'full_monitoring', 'advanced_ai', 'team', 'api_access'],\r\n      'enterprise': ['all']\r\n    };\r\n    \r\n    const allowedFeatures = featureMap[tier] || [];\r\n    return allowedFeatures.includes('all') || allowedFeatures.includes(feature);\r\n  }\r\n  \r\n  /**\r\n   * Áç≤ÂèñË™çË≠â Header\r\n   */\r\n  getAuthHeaders(): Record<string, string> {\r\n    const token = this._accessToken();\r\n    if (token) {\r\n      return { 'Authorization': `Bearer ${token}` };\r\n    }\r\n    return {};\r\n  }\r\n  \r\n  // ==================== ÁßÅÊúâÊñπÊ≥ï ====================\r\n  \r\n  private setAuthState(data: any): void {\r\n    if (data.user) {\r\n      this._user.set(data.user);\r\n      // üîß ÂêåÊ≠•‰øùÂ≠òÂà∞ localStorageÔºàÈÅøÂÖç effect Áï∞Ê≠•Â∞éËá¥È†ÅÈù¢Âà∑Êñ∞ÂâçÊú™‰øùÂ≠òÔºâ\r\n      localStorage.setItem(TOKEN_KEYS.USER, JSON.stringify(data.user));\r\n    }\r\n    if (data.access_token) {\r\n      this._accessToken.set(data.access_token);\r\n      // üîß ÂêåÊ≠•‰øùÂ≠òÂà∞ localStorage\r\n      localStorage.setItem(TOKEN_KEYS.ACCESS, data.access_token);\r\n    }\r\n    if (data.refresh_token) {\r\n      this._refreshToken.set(data.refresh_token);\r\n      // üîß ÂêåÊ≠•‰øùÂ≠òÂà∞ localStorage\r\n      localStorage.setItem(TOKEN_KEYS.REFRESH, data.refresh_token);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Ê∏ÖÈô§ÊúÉË©±ÔºàÂÖ¨ÈñãÊñπÊ≥ïÔºâ\r\n   * Áî®ÊñºË™çË≠âÂÆàË°õÁôºÁèæÁÑ°ÊïàÁãÄÊÖãÊôÇÊ∏ÖÁêÜ\r\n   */\r\n  clearSession(): void {\r\n    this.clearAuthState();\r\n  }\r\n  \r\n  private clearAuthState(): void {\r\n    this._user.set(null);\r\n    this._accessToken.set(null);\r\n    this._refreshToken.set(null);\r\n    \r\n    if (this.refreshTimer) {\r\n      clearTimeout(this.refreshTimer);\r\n      this.refreshTimer = null;\r\n    }\r\n    \r\n    localStorage.removeItem(TOKEN_KEYS.ACCESS);\r\n    localStorage.removeItem(TOKEN_KEYS.REFRESH);\r\n    localStorage.removeItem(TOKEN_KEYS.USER);\r\n  }\r\n  \r\n  private restoreSession(): void {\r\n    try {\r\n      const accessToken = localStorage.getItem(TOKEN_KEYS.ACCESS);\r\n      const refreshToken = localStorage.getItem(TOKEN_KEYS.REFRESH);\r\n      const userJson = localStorage.getItem(TOKEN_KEYS.USER);\r\n      \r\n      // üÜï P0: È©óË≠â Token Ê†ºÂºèÊúâÊïàÊÄß\r\n      if (accessToken && !this.isValidTokenFormat(accessToken)) {\r\n        console.warn('[Auth] Invalid token format, clearing session');\r\n        this.clearAuthState();\r\n        return;\r\n      }\r\n      \r\n      if (accessToken) {\r\n        this._accessToken.set(accessToken);\r\n      }\r\n      if (refreshToken) {\r\n        this._refreshToken.set(refreshToken);\r\n      }\r\n      if (userJson) {\r\n        try {\r\n          this._user.set(JSON.parse(userJson));\r\n        } catch {\r\n          console.warn('[Auth] Invalid user JSON, clearing');\r\n          this.clearAuthState();\r\n          return;\r\n        }\r\n      }\r\n      \r\n      // È©óË≠â token ÊúâÊïàÊÄßÔºàÁï∞Ê≠•Ôºâ\r\n      if (accessToken) {\r\n        this.fetchCurrentUser().then(user => {\r\n          if (!user) {\r\n            if (refreshToken) {\r\n              // ÂòóË©¶Âà∑Êñ∞ Token\r\n              this.refreshAccessToken().catch(() => {\r\n                console.warn('[Auth] Token refresh failed, clearing session');\r\n                this.clearAuthState();\r\n                // üÜï ÈáçÂÆöÂêëÂà∞ÁôªÂÖ•È†Å\r\n                if (window.location.pathname !== '/auth/login') {\r\n                  this.router.navigate(['/auth/login']);\r\n                }\r\n              });\r\n            } else {\r\n              // ÁÑ° Refresh TokenÔºåÊ∏ÖÈô§‰∏¶ÈáçÂÆöÂêë\r\n              console.warn('[Auth] No valid token, clearing session');\r\n              this.clearAuthState();\r\n              if (window.location.pathname !== '/auth/login') {\r\n                this.router.navigate(['/auth/login']);\r\n              }\r\n            }\r\n          }\r\n        }).catch(() => {\r\n          console.warn('[Auth] Token validation failed');\r\n          this.clearAuthState();\r\n        });\r\n      }\r\n    } catch (e) {\r\n      console.error('Restore session error:', e);\r\n      this.clearAuthState();\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * È©óË≠â Token Ê†ºÂºèÊòØÂê¶ÊúâÊïàÔºàJWT Ê†ºÂºèÊ™¢Êü•Ôºâ\r\n   */\r\n  private isValidTokenFormat(token: string): boolean {\r\n    if (!token || token.length < 20) return false;\r\n    \r\n    // JWT ÊáâË©≤Êúâ 3 ÂÄãÈÉ®ÂàÜÁî® . ÂàÜÈöî\r\n    const parts = token.split('.');\r\n    if (parts.length !== 3) return false;\r\n    \r\n    try {\r\n      // ÂòóË©¶Ëß£Êûê payload\r\n      const payload = JSON.parse(atob(parts[1]));\r\n      \r\n      // Ê™¢Êü•ÊòØÂê¶ÈÅéÊúü\r\n      if (payload.exp && Date.now() >= payload.exp * 1000) {\r\n        console.warn('[Auth] Token expired');\r\n        return false;\r\n      }\r\n      \r\n      return true;\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  private scheduleTokenRefresh(): void {\r\n    if (this.refreshTimer) {\r\n      clearTimeout(this.refreshTimer);\r\n    }\r\n    \r\n    // Âú® token ÈÅéÊúüÂâç 5 ÂàÜÈêòÂà∑Êñ∞\r\n    const refreshIn = 55 * 60 * 1000; // 55 ÂàÜÈêò\r\n    this.refreshTimer = setTimeout(() => {\r\n      this.refreshAccessToken();\r\n    }, refreshIn);\r\n  }\r\n  \r\n  private getApiBaseUrl(): string {\r\n    // ÈñãÁôºÁí∞Â¢É\r\n    if (window.location.hostname === 'localhost' && window.location.port === '4200') {\r\n      return 'http://localhost:8000';\r\n    }\r\n    // ÁîüÁî¢Áí∞Â¢É\r\n    return '';\r\n  }\r\n  \r\n  private getDeviceName(): string {\r\n    const ua = navigator.userAgent;\r\n    if (ua.includes('Windows')) return 'Windows Browser';\r\n    if (ua.includes('Mac')) return 'Mac Browser';\r\n    if (ua.includes('Linux')) return 'Linux Browser';\r\n    if (ua.includes('iPhone') || ua.includes('iPad')) return 'iOS Browser';\r\n    if (ua.includes('Android')) return 'Android Browser';\r\n    return 'Web Browser';\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
