import{h as z,u as H}from"./chunk-FGECJ42T.js";import{c as G}from"./chunk-X3FI6EPB.js";import{b as q}from"./chunk-QCWWCRCA.js";import{a as O}from"./chunk-MKTJUSEE.js";import{b as A,c as M,f as $,k as N,l as B,m as P,t as U}from"./chunk-3FNGYHNZ.js";import{b as J}from"./chunk-ET36GW2V.js";import{o as L}from"./chunk-HDSZBSQ2.js";import{a as j,b as R}from"./chunk-CCGO3GAA.js";import{La as T,O as h,T as p,U as _,Vb as w,Ya as v,Za as f,ab as V,bb as F,cb as x,da as C,db as o,eb as n,fb as E,jb as S,nb as u,pb as c,ub as k,vb as D,wb as I,xa as a,xb as r,yb as b,zb as g}from"./chunk-XBIFDY2N.js";var Q=(s,i)=>i.id;function W(s,i){s&1&&r(0," \u5DF2\u5168\u9078 ")}function X(s,i){s&1&&r(0," \u90E8\u5206\u9078\u4E2D ")}function Y(s,i){s&1&&r(0," \u5168\u9078 ")}function Z(s,i){if(s&1&&(o(0,"span",35),r(1),n()),s&2){let e=c();a(),g(" \u5DF2\u9078 ",e.selectedCount()," \u500B ")}}function ee(s,i){if(s&1&&(o(0,"span",10),r(1),n()),s&2){let e=c();a(),g(" \u5171 ",e.filteredContacts().length," \u500B\u5BA2\u6236 ")}}function te(s,i){if(s&1){let e=S();o(0,"div",30)(1,"button",42),u("click",function(){p(e);let l=c();return _(l.batchSend())}),r(2," \u{1F4E8} \u7FA4\u767C "),n(),o(3,"button",43),u("click",function(){p(e);let l=c();return _(l.batchInvite())}),r(4," \u{1F465} \u62C9\u7FA4 "),n(),o(5,"button",44),u("click",function(){p(e);let l=c();return _(l.batchDelete())}),r(6," \u{1F5D1}\uFE0F \u522A\u9664 "),n()()}if(s&2){let e=c();a(5),x("disabled",e.isDeleting())}}function ie(s,i){if(s&1){let e=S();o(0,"div",37)(1,"span",45),r(2),n(),E(3,"div",36),o(4,"button",46),u("click",function(){p(e);let l=c();return _(l.batchSend())}),o(5,"span"),r(6,"\u{1F4E8}"),n(),r(7," \u7FA4\u767C\u6D88\u606F "),n(),o(8,"button",47),u("click",function(){p(e);let l=c();return _(l.batchInvite())}),o(9,"span"),r(10,"\u{1F465}"),n(),r(11," \u6279\u91CF\u62C9\u7FA4 "),n(),o(12,"button",48),u("click",function(){p(e);let l=c();return _(l.startMultiRoleCollaboration())}),o(13,"span"),r(14,"\u{1F916}"),n(),r(15," AI \u591A\u89D2\u8272\u71DF\u92B7 "),n(),o(16,"button",49),u("click",function(){p(e);let l=c();return _(l.batchDelete())}),o(17,"span"),r(18),n(),r(19),n(),o(20,"button",50),u("click",function(){p(e);let l=c();return _(l.clearSelection())}),r(21," \u2716 \u53D6\u6D88\u9078\u64C7 "),n()()}if(s&2){let e=c();a(2),g(" \u{1F446} \u5DF2\u9078\u64C7 ",e.selectedCount()," \u500B\u5BA2\u6236 - \u8ACB\u9078\u64C7\u6279\u91CF\u64CD\u4F5C "),a(14),x("disabled",e.isDeleting()),a(2),b(e.isDeleting()?"\u23F3":"\u{1F5D1}\uFE0F"),a(),g(" ",e.isDeleting()?"\u522A\u9664\u4E2D...":"\u522A\u9664"," ")}}function ne(s,i){if(s&1){let e=S();o(0,"div",39)(1,"span",51),r(2,"\u{1F4ED}"),n(),o(3,"p",52),r(4,"\u66AB\u7121\u5BA2\u6236\u6578\u64DA"),n(),o(5,"p",53),r(6,"\u8ACB\u5148\u5230\u300C\u8CC7\u6E90\u4E2D\u5FC3\u300D\u6DFB\u52A0\u5BA2\u6236\uFF0C\u6216\u5F9E\u76E3\u63A7\u7FA4\u7D44\u81EA\u52D5\u6536\u96C6"),n(),o(7,"button",54),u("click",function(){p(e);let l=c();return _(l.goToResourceCenter())}),r(8," \u524D\u5F80\u8CC7\u6E90\u4E2D\u5FC3 \u2192 "),n()()}}function oe(s,i){if(s&1&&(o(0,"p",63),r(1),n()),s&2){let e=c().$implicit;a(),g("@",e.username)}}function re(s,i){s&1&&(o(0,"div",68),r(1," \u2B06\uFE0F \u8ACB\u4F7F\u7528\u4E0A\u65B9\u6279\u91CF\u64CD\u4F5C\u6B04 "),n())}function le(s,i){if(s&1){let e=S();o(0,"button",69),u("click",function(l){p(e);let d=c().$implicit;return c(2).sendMessage(d),_(l.stopPropagation())}),r(1," \u{1F4AC} \u767C\u9001 "),n(),o(2,"button",70),u("click",function(l){p(e);let d=c().$implicit;return c(2).inviteToGroup(d),_(l.stopPropagation())}),r(3," \u{1F465} \u62C9\u7FA4 "),n(),o(4,"button",71),u("click",function(l){p(e);let d=c().$implicit;return c(2).deleteContact(d),_(l.stopPropagation())}),r(5," \u{1F5D1}\uFE0F "),n()}}function se(s,i){if(s&1){let e=S();o(0,"div",56),u("click",function(){let l=p(e).$implicit,d=c(2);return _(d.toggleSelect(l.id))}),o(1,"div",57)(2,"input",58),u("change",function(){let l=p(e).$implicit,d=c(2);return _(d.toggleSelect(l.id))})("click",function(l){return p(e),_(l.stopPropagation())}),n()(),o(3,"div",59)(4,"div",60),r(5),n(),o(6,"div",61)(7,"p",62),r(8),n(),v(9,oe,2,1,"p",63),n()(),o(10,"div",64)(11,"span",65),r(12),n(),o(13,"span",66),r(14),n()(),o(15,"div",67),v(16,re,2,0,"div",68)(17,le,6,0),n()()}if(s&2){let e=i.$implicit,t=c(2);D("ring-2",t.isSelected(e.id))("ring-cyan-500",t.isSelected(e.id)),a(2),x("checked",t.isSelected(e.id)),a(3),g(" ",t.getInitial(e)," "),a(3),b(e.display_name||e.username||e.telegram_id),a(),f(e.username?9:-1),a(3),g(" ",e.source_name||e.source_type||"\u672A\u77E5\u4F86\u6E90"," "),a(),I(t.getStatusClass(e.status)),a(),g(" ",t.getStatusLabel(e.status)," "),a(2),f(t.selectedIds().size>1?16:17)}}function ae(s,i){if(s&1&&(o(0,"div",40),V(1,se,18,13,"div",55,Q),n()),s&2){let e=c();a(),F(e.filteredContacts())}}function ce(s,i){if(s&1&&(o(0,"p",80),r(1),n()),s&2){let e=c().$implicit;a(),g("@",e.username)}}function de(s,i){s&1&&(o(0,"div",83),r(1," \u2B06\uFE0F \u4F7F\u7528\u6279\u91CF\u64CD\u4F5C "),n())}function ue(s,i){if(s&1){let e=S();o(0,"div",30)(1,"button",84),u("click",function(){p(e);let l=c().$implicit,d=c(2);return _(d.sendMessage(l))}),r(2," \u{1F4AC} "),n(),o(3,"button",85),u("click",function(){p(e);let l=c().$implicit,d=c(2);return _(d.inviteToGroup(l))}),r(4," \u{1F465} "),n(),o(5,"button",86),u("click",function(){p(e);let l=c().$implicit,d=c(2);return _(d.viewContact(l))}),r(6," \u{1F441}\uFE0F "),n(),o(7,"button",87),u("click",function(){p(e);let l=c().$implicit,d=c(2);return _(d.deleteContact(l))}),r(8," \u{1F5D1}\uFE0F "),n()()}}function me(s,i){if(s&1){let e=S();o(0,"tr",76)(1,"td",77)(2,"input",74),u("change",function(){let l=p(e).$implicit,d=c(2);return _(d.toggleSelect(l.id))}),n()(),o(3,"td",77)(4,"div",2)(5,"div",78),r(6),n(),o(7,"div")(8,"p",79),r(9),n(),v(10,ce,2,1,"p",80),n()()(),o(11,"td",81)(12,"span",82),r(13),n()(),o(14,"td",77)(15,"span",66),r(16),n()(),o(17,"td",77),v(18,de,2,0,"div",83)(19,ue,9,0,"div",30),n()()}if(s&2){let e=i.$implicit,t=c(2);a(2),x("checked",t.isSelected(e.id)),a(4),g(" ",t.getInitial(e)," "),a(3),b(e.display_name||e.username||e.telegram_id),a(),f(e.username?10:-1),a(3),b(e.source_name||e.source_type||"-"),a(2),I(t.getStatusClass(e.status)),a(),g(" ",t.getStatusLabel(e.status)," "),a(2),f(t.selectedIds().size>1?18:19)}}function pe(s,i){if(s&1){let e=S();o(0,"table",41)(1,"thead")(2,"tr",72)(3,"th",73)(4,"input",74),u("change",function(){p(e);let l=c();return _(l.toggleSelectAll())}),n()(),o(5,"th",75),r(6,"\u5BA2\u6236"),n(),o(7,"th",75),r(8,"\u4F86\u6E90"),n(),o(9,"th",75),r(10,"\u72C0\u614B"),n(),o(11,"th",75),r(12,"\u64CD\u4F5C"),n()()(),o(13,"tbody"),V(14,me,20,9,"tr",76,Q),n()()}if(s&2){let e=c();a(4),x("checked",e.isAllSelected()),a(10),F(e.filteredContacts())}}var K=class s{constructor(){this.i18n=h(J);this.nav=h(q);this.ipc=h(O);this.toast=h(j);this.dialog=h(z);this.exportService=h(H);this.membershipService=h(R);this.contactsService=h(G);this.searchTerm=C("");this.statusFilter=C("");this.selectedIds=C(new Set);this.viewMode=C("card");this.isDeleting=C(!1);this.isSending=C(!1);this.isInviting=C(!1);this.sendProgress=C({sent:0,total:0,success:0,failed:0});this.inviteProgress=C({invited:0,total:0,success:0,failed:0,skipped:0});this.contacts=w(()=>this.contactsService.contacts());this.filteredContacts=w(()=>{let i=this.contacts(),e=this.searchTerm().toLowerCase(),t=this.statusFilter();return i=i.filter(l=>l.contact_type==="user"),e&&(i=i.filter(l=>l.display_name?.toLowerCase().includes(e)||l.username?.toLowerCase().includes(e)||l.telegram_id?.toString().includes(e)||l.source_name?.toLowerCase().includes(e))),t&&(i=i.filter(l=>l.status===t)),i});this.pendingCount=w(()=>this.contacts().filter(i=>i.contact_type==="user"&&i.status==="new").length);this.sentCount=w(()=>this.contacts().filter(i=>i.contact_type==="user"&&i.status==="contacted").length);this.repliedCount=w(()=>this.contacts().filter(i=>i.contact_type==="user"&&i.status==="replied").length);this.failedCount=w(()=>this.contacts().filter(i=>i.contact_type==="user"&&i.status==="failed").length);this.selectedCount=w(()=>this.selectedIds().size);this.ipcCleanup=[]}ngOnInit(){this.contactsService.loadContacts(),this.setupIpcListeners()}ngOnDestroy(){this.ipcCleanup.forEach(i=>i())}setupIpcListeners(){let i=this.ipc.on("message-sent",m=>{m.success?(this.toast.success("\u6D88\u606F\u767C\u9001\u6210\u529F"),m.telegramId&&this.contactsService.updateContactStatus(m.telegramId,"contacted")):m.telegramId&&this.contactsService.updateContactStatus(m.telegramId,"failed")}),e=this.ipc.on("private-message-received",m=>{m.telegramId&&(this.contactsService.updateContactStatus(m.telegramId,"replied"),this.toast.info("\u6536\u5230\u5BA2\u6236\u56DE\u8986"))}),t=this.ipc.on("batch-send:progress",m=>{this.sendProgress.set(m),console.log(`\u767C\u9001\u9032\u5EA6: ${m.sent}/${m.total}, \u6210\u529F: ${m.success}, \u5931\u6557: ${m.failed}`)}),l=this.ipc.on("batch-send:complete",m=>{this.isSending.set(!1),this.sendProgress.set({sent:0,total:0,success:0,failed:0}),m.failed>0?this.toast.warning(`\u6279\u91CF\u767C\u9001\u5B8C\u6210: \u6210\u529F ${m.success}\uFF0C\u5931\u6557 ${m.failed}${m.failureSummary?` (${m.failureSummary})`:""}`):this.toast.success(`\u6279\u91CF\u767C\u9001\u5B8C\u6210: \u6210\u529F ${m.success} \u689D`),this.contactsService.loadContacts()}),d=this.ipc.on("batch-invite:progress",m=>{this.inviteProgress.set(m),console.log(`\u62C9\u7FA4\u9032\u5EA6: ${m.invited}/${m.total}`)}),y=this.ipc.on("batch-invite:complete",m=>{this.isInviting.set(!1),this.inviteProgress.set({invited:0,total:0,success:0,failed:0,skipped:0}),this.toast.success(`\u6279\u91CF\u62C9\u7FA4\u5B8C\u6210: \u6210\u529F ${m.success}\uFF0C\u8DF3\u904E ${m.skipped}\uFF0C\u5931\u6557 ${m.failed}`),this.contactsService.loadContacts()});this.ipcCleanup.push(i,e,t,l,d,y)}refresh(){this.contactsService.loadContacts(),this.toast.info("\u6B63\u5728\u5237\u65B0...")}goToResourceCenter(){this.nav.navigateTo("resource-center")}isSelected(i){return this.selectedIds().has(i)}toggleSelect(i){this.selectedIds.update(e=>{let t=new Set(e);return t.has(i)?t.delete(i):t.add(i),t})}isAllSelected(){let i=this.filteredContacts();return i.length>0&&i.every(e=>this.selectedIds().has(e.id))}isPartialSelected(){let i=this.filteredContacts(),e=this.selectedIds().size;return e>0&&e<i.length&&!this.isAllSelected()}toggleSelectAll(){let i=this.filteredContacts();this.isAllSelected()?this.selectedIds.set(new Set):this.selectedIds.set(new Set(i.map(e=>e.id)))}selectAll(){let i=this.filteredContacts();this.selectedIds.set(new Set(i.map(e=>e.id))),this.toast.info(`\u5DF2\u5168\u9078 ${i.length} \u500B\u5BA2\u6236`)}invertSelection(){let i=this.filteredContacts(),e=this.selectedIds(),t=new Set;i.forEach(l=>{e.has(l.id)||t.add(l.id)}),this.selectedIds.set(t),this.toast.info(`\u5DF2\u9078\u64C7 ${t.size} \u500B\u5BA2\u6236`)}batchSend(){let i=this.contacts().filter(t=>this.selectedIds().has(t.id));if(i.length===0){this.toast.warning("\u8ACB\u5148\u9078\u64C7\u5BA2\u6236");return}let e=this.convertToSendTargets(i);if(e.length===0){this.toast.error("\u9078\u4E2D\u7684\u5BA2\u6236\u6C92\u6709\u6709\u6548\u7684 Telegram ID");return}this.dialog.openBatchSend(e)}sendMessage(i){let e=this.convertToSendTargets([i]);if(e.length===0){this.toast.error("\u6B64\u5BA2\u6236\u6C92\u6709\u6709\u6548\u7684 Telegram ID");return}this.dialog.openBatchSend(e)}convertToSendTargets(i){return i.filter(e=>e.telegram_id).map(e=>({telegramId:e.telegram_id,username:e.username||"",firstName:e.first_name||e.display_name?.split(" ")[0]||"",lastName:e.last_name||e.display_name?.split(" ")[1]||"",displayName:e.display_name||e.username||e.telegram_id,groupName:e.source_name||"",source:e.source_type||""}))}batchInvite(){let i=this.contacts().filter(t=>this.selectedIds().has(t.id));if(i.length===0){this.toast.warning("\u8ACB\u5148\u9078\u64C7\u5BA2\u6236");return}let e=i.map(t=>({telegramId:t.telegram_id||String(t.id),username:t.username||"",firstName:t.first_name||t.display_name?.split(" ")[0]||"",lastName:t.last_name||t.display_name?.split(" ")[1]||""}));this.dialog.openBatchInvite(e)}inviteToGroup(i){let e={telegramId:i.telegram_id||String(i.id),username:i.username||"",firstName:i.first_name||i.display_name?.split(" ")[0]||"",lastName:i.last_name||i.display_name?.split(" ")[1]||""};this.dialog.openBatchInvite([e])}batchDelete(){let i=this.selectedIds().size;if(i===0){this.toast.warning("\u8ACB\u5148\u9078\u64C7\u5BA2\u6236");return}if(this.isDeleting()){this.toast.warning("\u6B63\u5728\u522A\u9664\u4E2D\uFF0C\u8ACB\u7A0D\u5019...");return}if(!confirm(`\u78BA\u5B9A\u8981\u522A\u9664\u9078\u4E2D\u7684 ${i} \u500B\u5BA2\u6236\u55CE\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u5FA9\u3002`))return;let t=this.contacts().filter(d=>this.selectedIds().has(d.id)).map(d=>d.telegram_id).filter(Boolean);if(t.length===0){this.toast.error("\u9078\u4E2D\u7684\u5BA2\u6236\u6C92\u6709\u6709\u6548\u7684 Telegram ID");return}this.isDeleting.set(!0),this.contactsService.deleteContacts(t),this.toast.info(`\u6B63\u5728\u522A\u9664 ${t.length} \u500B\u5BA2\u6236...`);let l=this.ipc.once("unified-contacts:delete-result",d=>{this.isDeleting.set(!1),d.success?(this.toast.success(`\u5DF2\u522A\u9664 ${d.deleted||d.leadsDeleted||t.length} \u500B\u5BA2\u6236`),this.clearSelection()):this.toast.error(`\u522A\u9664\u5931\u6557: ${d.error||"\u672A\u77E5\u932F\u8AA4"}`)});setTimeout(()=>{this.isDeleting()&&(this.isDeleting.set(!1),this.toast.warning("\u522A\u9664\u64CD\u4F5C\u8D85\u6642\uFF0C\u8ACB\u5237\u65B0\u9801\u9762\u67E5\u770B\u7D50\u679C"))},3e4)}deleteContact(i){if(!confirm(`\u78BA\u5B9A\u8981\u522A\u9664\u5BA2\u6236\u300C${i.display_name||i.username||i.telegram_id}\u300D\u55CE\uFF1F`))return;if(!i.telegram_id){this.toast.error("\u6B64\u5BA2\u6236\u6C92\u6709\u6709\u6548\u7684 Telegram ID");return}this.isDeleting.set(!0),this.contactsService.deleteContacts([i.telegram_id]),this.toast.info("\u6B63\u5728\u522A\u9664\u5BA2\u6236...");let e=this.ipc.once("unified-contacts:delete-result",t=>{this.isDeleting.set(!1),t.success?this.toast.success("\u5BA2\u6236\u5DF2\u522A\u9664"):this.toast.error(`\u522A\u9664\u5931\u6557: ${t.error||"\u672A\u77E5\u932F\u8AA4"}`)})}clearSelection(){this.selectedIds.set(new Set)}viewContact(i){console.log("View contact:",i)}getInitial(i){return(i.display_name||i.username||i.telegram_id||"?").charAt(0).toUpperCase()}getStatusClass(i){return{new:"bg-blue-500/20 text-blue-400",contacted:"bg-emerald-500/20 text-emerald-400",replied:"bg-green-500/20 text-green-400",failed:"bg-red-500/20 text-red-400",blacklisted:"bg-slate-500/20 text-slate-400"}[i]||"bg-slate-500/20 text-slate-400"}getStatusLabel(i){return{new:"\u5F85\u767C\u9001",contacted:"\u5DF2\u767C\u9001",replied:"\u5DF2\u56DE\u8986",failed:"\u767C\u9001\u5931\u6557",blacklisted:"\u5DF2\u62C9\u9ED1"}[i]||i||"\u672A\u77E5"}startMultiRoleCollaboration(){let i=this.contacts().filter(t=>this.selectedIds().has(t.id));if(i.length===0){this.toast.warning("\u8ACB\u5148\u9078\u64C7\u5BA2\u6236");return}let e=i.map(t=>({id:t.id?.toString()||t.telegram_id,telegramId:t.telegram_id||t.id?.toString()||"",username:t.username,firstName:t.first_name||t.display_name?.split(" ")[0],lastName:t.last_name||t.display_name?.split(" ")[1],intentScore:this.calculateContactIntent(t),source:t.source_type||"leads"}));sessionStorage.setItem("multiRoleTargetUsers",JSON.stringify(e)),this.toast.success(`\u{1F916} \u5DF2\u9078\u64C7 ${e.length} \u500B\u76EE\u6A19\uFF0C\u6B63\u5728\u8DF3\u8F49\u5230\u591A\u89D2\u8272\u5354\u4F5C\u4E2D\u5FC3...`),this.ipc.send("navigate-to-multi-role",{targetUsers:e}),setTimeout(()=>{this.ipc.send("multi-role:open-ai-planner",{targetUsers:e})},500)}calculateContactIntent(i){let e=30;return i.status==="replied"?e+=30:i.status==="contacted"?e+=15:i.status==="new"&&(e+=10),i.source_type==="lead"?e+=20:i.source_type==="member"&&(e+=10),i.tags?.includes("\u9AD8\u610F\u5411")?e+=25:i.tags?.includes("\u6709\u8208\u8DA3")&&(e+=15),i.last_message_at&&(e+=10),Math.min(100,e)}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275cmp=T({type:s,selectors:[["app-leads-view"]],decls:98,vars:37,consts:[[1,"page-content"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","gap-3"],[1,"text-3xl"],[1,"text-2xl","font-bold",2,"color","var(--text-primary)"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","transition-colors",2,"background-color","var(--bg-tertiary)","color","var(--text-primary)",3,"click"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","bg-gradient-to-r","from-cyan-500","to-blue-500","text-white","disabled:opacity-50",3,"click","disabled"],[1,"grid","grid-cols-2","md:grid-cols-5","gap-4","mb-6"],[1,"rounded-xl","p-4","text-center",2,"background-color","var(--bg-card)","border","1px solid var(--border-color)"],[1,"text-2xl","mb-1"],[1,"text-sm",2,"color","var(--text-muted)"],[1,"text-xl","font-bold","text-cyan-400"],[1,"text-xl","font-bold","text-blue-400"],[1,"text-xl","font-bold","text-emerald-400"],[1,"text-xl","font-bold","text-green-400"],[1,"text-xl","font-bold","text-red-400"],[1,"flex","items-center","gap-4","mb-6"],[1,"flex-1","relative"],["type","text","placeholder","\u641C\u7D22\u5BA2\u6236\u540D\u7A31\u3001\u7528\u6236\u540D\u6216\u4F86\u6E90...",1,"w-full","py-3","px-4","pl-10","rounded-xl",2,"background-color","var(--bg-tertiary)","color","var(--text-primary)","border","1px solid var(--border-color)",3,"ngModelChange","ngModel"],[1,"absolute","left-3","top-1/2","-translate-y-1/2","text-slate-400"],[1,"py-3","px-4","rounded-xl",2,"background-color","var(--bg-tertiary)","color","var(--text-primary)","border","1px solid var(--border-color)",3,"ngModelChange","ngModel"],["value",""],["value","new"],["value","contacted"],["value","replied"],["value","failed"],[1,"flex","rounded-lg","overflow-hidden",2,"border","1px solid var(--border-color)"],[1,"p-2","px-3","transition-colors",3,"click"],[1,"flex","items-center","gap-4","mb-4","p-3","rounded-xl",2,"background-color","var(--bg-card)","border","1px solid var(--border-color)"],["type","checkbox",1,"w-5","h-5","rounded","accent-cyan-500","cursor-pointer",3,"change","checked","indeterminate"],[1,"flex","items-center","gap-2"],[1,"px-3","py-1.5","rounded-lg","text-xs","transition-colors",3,"click"],[1,"px-3","py-1.5","rounded-lg","text-xs","transition-colors",2,"background-color","var(--bg-tertiary)","color","var(--text-muted)",3,"click"],[1,"px-3","py-1.5","rounded-lg","text-xs","transition-colors","disabled:opacity-50",2,"background-color","var(--bg-tertiary)","color","var(--text-muted)",3,"click","disabled"],[1,"w-px","h-6","bg-slate-700"],[1,"px-3","py-1","rounded-full","text-sm","font-medium","bg-cyan-500/20","text-cyan-400"],[1,"flex-1"],[1,"sticky","top-0","z-50","flex","items-center","gap-4","mb-4","p-4","rounded-xl","border","transition-all","duration-300","shadow-lg","backdrop-blur-sm","bg-gradient-to-r","from-amber-500/30","to-orange-500/30","border-amber-500/50",2,"background-color","rgba(15, 23, 42, 0.95)"],[1,"rounded-xl","overflow-hidden",2,"background-color","var(--bg-card)","border","1px solid var(--border-color)"],[1,"p-12","text-center",2,"color","var(--text-muted)"],[1,"p-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4"],[1,"w-full"],[1,"flex","items-center","gap-1.5","px-3","py-1.5","rounded-lg","text-xs","bg-cyan-500","hover:bg-cyan-600","text-white","transition-colors",3,"click"],[1,"flex","items-center","gap-1.5","px-3","py-1.5","rounded-lg","text-xs","bg-purple-500","hover:bg-purple-600","text-white","transition-colors",3,"click"],[1,"flex","items-center","gap-1.5","px-3","py-1.5","rounded-lg","text-xs","bg-red-500/20","hover:bg-red-500/30","text-red-400","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"text-amber-400","font-bold","text-lg"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","bg-cyan-500","hover:bg-cyan-600","text-white","transition-colors",3,"click"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","bg-purple-500","hover:bg-purple-600","text-white","transition-colors",3,"click"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","bg-gradient-to-r","from-pink-500","to-purple-500","hover:opacity-90","text-white","transition-colors",3,"click"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","bg-red-500/20","hover:bg-red-500/30","text-red-400","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"flex","items-center","gap-2","px-3","py-2","rounded-lg","hover:bg-slate-700/50","transition-colors","text-slate-400",3,"click"],[1,"text-5xl","mb-4","block"],[1,"text-lg","mb-2"],[1,"text-sm","mb-4"],[1,"px-4","py-2","bg-cyan-500","hover:bg-cyan-600","text-white","rounded-lg","transition-colors",3,"click"],[1,"rounded-xl","p-4","transition-all","hover:scale-[1.02]","cursor-pointer","relative","group",2,"background-color","var(--bg-tertiary)","border","1px solid var(--border-color)",3,"ring-2","ring-cyan-500"],[1,"rounded-xl","p-4","transition-all","hover:scale-[1.02]","cursor-pointer","relative","group",2,"background-color","var(--bg-tertiary)","border","1px solid var(--border-color)",3,"click"],[1,"absolute","top-3","right-3"],["type","checkbox",1,"rounded","w-5","h-5","accent-cyan-500","cursor-pointer",3,"change","click","checked"],[1,"flex","items-center","gap-3","mb-3"],[1,"w-12","h-12","rounded-full","bg-gradient-to-r","from-cyan-500","to-blue-500","flex","items-center","justify-center","text-white","font-bold","text-lg","shadow-lg"],[1,"flex-1","min-w-0"],[1,"font-medium","truncate",2,"color","var(--text-primary)"],[1,"text-xs","truncate",2,"color","var(--text-muted)"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-xs","px-2","py-1","rounded","bg-slate-700/50",2,"color","var(--text-muted)"],[1,"px-2","py-1","rounded-full","text-xs","font-medium"],[1,"flex","items-center","gap-2","pt-2","border-t",2,"border-color","var(--border-color)"],[1,"flex-1","text-center","py-2","text-xs","text-amber-400"],[1,"flex-1","flex","items-center","justify-center","gap-1","py-2","rounded-lg","text-xs","font-medium","transition-colors","bg-cyan-500/20","hover:bg-cyan-500/30","text-cyan-400",3,"click"],[1,"flex-1","flex","items-center","justify-center","gap-1","py-2","rounded-lg","text-xs","font-medium","transition-colors","bg-purple-500/20","hover:bg-purple-500/30","text-purple-400",3,"click"],["title","\u522A\u9664",1,"p-2","rounded-lg","text-xs","transition-colors","hover:bg-red-500/20","text-red-400",3,"click"],[2,"background-color","var(--bg-tertiary)"],[1,"py-3","px-4","text-left","text-sm","font-medium","w-10",2,"color","var(--text-muted)"],["type","checkbox",1,"rounded",3,"change","checked"],[1,"py-3","px-4","text-left","text-sm","font-medium",2,"color","var(--text-muted)"],[1,"border-t","transition-colors","hover:bg-slate-800/30",2,"border-color","var(--border-color)"],[1,"py-3","px-4"],[1,"w-10","h-10","rounded-full","bg-gradient-to-r","from-cyan-500","to-blue-500","flex","items-center","justify-center","text-white","font-bold"],[1,"font-medium",2,"color","var(--text-primary)"],[1,"text-xs",2,"color","var(--text-muted)"],[1,"py-3","px-4",2,"color","var(--text-muted)"],[1,"text-xs","px-2","py-1","rounded","bg-slate-700/50"],[1,"text-xs","text-amber-400"],["title","\u767C\u9001\u6D88\u606F",1,"p-2","rounded-lg","hover:bg-cyan-500/20","transition-colors","text-cyan-400",3,"click"],["title","\u62C9\u7FA4",1,"p-2","rounded-lg","hover:bg-purple-500/20","transition-colors","text-purple-400",3,"click"],["title","\u67E5\u770B\u8A73\u60C5",1,"p-2","rounded-lg","hover:bg-slate-700/50","transition-colors","text-slate-400",3,"click"],["title","\u522A\u9664",1,"p-2","rounded-lg","hover:bg-red-500/20","transition-colors","text-red-400",3,"click"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),r(4,"\u{1F4E4}"),n(),o(5,"h2",4),r(6,"\u767C\u9001\u63A7\u5236\u53F0"),n()(),o(7,"div",2)(8,"button",5),u("click",function(){return t.refresh()}),o(9,"span"),r(10,"\u{1F504}"),n(),r(11," \u5237\u65B0 "),n(),o(12,"button",6),u("click",function(){return t.batchSend()}),o(13,"span"),r(14,"\u{1F4E8}"),n(),r(15," \u6279\u91CF\u767C\u9001 "),n()()(),o(16,"div",7)(17,"div",8)(18,"div",9),r(19,"\u{1F465}"),n(),o(20,"div",10),r(21,"\u7E3D\u5BA2\u6236"),n(),o(22,"div",11),r(23),n()(),o(24,"div",8)(25,"div",9),r(26,"\u23F3"),n(),o(27,"div",10),r(28,"\u5F85\u767C\u9001"),n(),o(29,"div",12),r(30),n()(),o(31,"div",8)(32,"div",9),r(33,"\u2705"),n(),o(34,"div",10),r(35,"\u5DF2\u767C\u9001"),n(),o(36,"div",13),r(37),n()(),o(38,"div",8)(39,"div",9),r(40,"\u{1F4AC}"),n(),o(41,"div",10),r(42,"\u5DF2\u56DE\u8986"),n(),o(43,"div",14),r(44),n()(),o(45,"div",8)(46,"div",9),r(47,"\u274C"),n(),o(48,"div",10),r(49,"\u767C\u9001\u5931\u6557"),n(),o(50,"div",15),r(51),n()()(),o(52,"div",16)(53,"div",17)(54,"input",18),u("ngModelChange",function(d){return t.searchTerm.set(d)}),n(),o(55,"span",19),r(56,"\u{1F50D}"),n()(),o(57,"select",20),u("ngModelChange",function(d){return t.statusFilter.set(d)}),o(58,"option",21),r(59,"\u5168\u90E8\u72C0\u614B"),n(),o(60,"option",22),r(61,"\u5F85\u767C\u9001"),n(),o(62,"option",23),r(63,"\u5DF2\u767C\u9001"),n(),o(64,"option",24),r(65,"\u5DF2\u56DE\u8986"),n(),o(66,"option",25),r(67,"\u767C\u9001\u5931\u6557"),n()(),o(68,"div",26)(69,"button",27),u("click",function(){return t.viewMode.set("list")}),r(70," \u{1F4CB} "),n(),o(71,"button",27),u("click",function(){return t.viewMode.set("card")}),r(72," \u{1F0CF} "),n()()(),o(73,"div",28)(74,"div",2)(75,"input",29),u("change",function(){return t.toggleSelectAll()}),n(),o(76,"span",10),v(77,W,1,0)(78,X,1,0)(79,Y,1,0),n()(),o(80,"div",30)(81,"button",31),u("click",function(){return t.selectAll()}),r(82),n(),o(83,"button",32),u("click",function(){return t.invertSelection()}),r(84," \u{1F504} \u53CD\u9078 "),n(),o(85,"button",33),u("click",function(){return t.clearSelection()}),r(86," \u2716 \u6E05\u9664 "),n()(),E(87,"div",34),o(88,"div",30),v(89,Z,2,1,"span",35)(90,ee,2,1,"span",10),n(),E(91,"div",36),v(92,te,7,1,"div",30),n(),v(93,ie,22,4,"div",37),o(94,"div",38),v(95,ne,9,0,"div",39)(96,ae,3,0,"div",40)(97,pe,16,1,"table",41),n()()),e&2&&(a(12),x("disabled",t.selectedCount()===0),a(11),b(t.contacts().length),a(7),b(t.pendingCount()),a(7),b(t.sentCount()),a(7),b(t.repliedCount()),a(7),b(t.failedCount()),a(3),x("ngModel",t.searchTerm()),a(3),x("ngModel",t.statusFilter()),a(12),k("background-color",t.viewMode()!=="list"?"var(--bg-tertiary)":""),D("bg-cyan-500",t.viewMode()==="list")("text-white",t.viewMode()==="list"),a(2),k("background-color",t.viewMode()!=="card"?"var(--bg-tertiary)":""),D("bg-cyan-500",t.viewMode()==="card")("text-white",t.viewMode()==="card"),a(4),x("checked",t.isAllSelected())("indeterminate",t.isPartialSelected()),a(2),f(t.isAllSelected()?77:t.isPartialSelected()?78:79),a(4),k("background-color",t.isAllSelected()?"":"var(--bg-tertiary)")("color",t.isAllSelected()?"":"var(--text-muted)"),D("bg-cyan-500",t.isAllSelected())("text-white",t.isAllSelected()),a(),g(" \u2611\uFE0F \u5168\u9078 (",t.filteredContacts().length,") "),a(3),x("disabled",t.selectedCount()===0),a(4),f(t.selectedCount()>0?89:90),a(3),f(t.selectedCount()>0?92:-1),a(),f(t.selectedCount()>1?93:-1),a(2),f(t.filteredContacts().length===0?95:t.viewMode()==="card"?96:97))},dependencies:[L,U,B,P,A,N,M,$],encapsulation:2,changeDetection:0})}};export{K as a};
