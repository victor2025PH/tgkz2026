import{M as d,Vb as g,ga as c,ia as u}from"./chunk-YLSLTE5F.js";var s=[{code:"en",name:"English",nativeName:"English",flag:"\u{1F1FA}\u{1F1F8}"},{code:"zh-CN",name:"Simplified Chinese",nativeName:"\u7B80\u4F53\u4E2D\u6587",flag:"\u{1F1E8}\u{1F1F3}"},{code:"zh-TW",name:"Traditional Chinese",nativeName:"\u7E41\u9AD4\u4E2D\u6587",flag:"\u{1F1F9}\u{1F1FC}"}],m=class l{constructor(){this._locale=c("zh-TW");this.locale=this._locale.asReadonly();this.translations=c({en:{},"zh-CN":{},"zh-TW":{}});this._loading=c(!1);this.loading=this._loading.asReadonly();this.currentLocaleInfo=g(()=>s.find(e=>e.code===this._locale())||s[2]);this.supportedLocales=s;this.initLocale(),this.loadTranslations(),u(()=>{let e=this._locale();localStorage.setItem("tg-matrix-locale",e),document.documentElement.lang=e})}initLocale(){let e=localStorage.getItem("tg-matrix-locale");if(e&&s.some(n=>n.code===e)){this._locale.set(e);return}let t=navigator.language;t.startsWith("en")?this._locale.set("en"):t==="zh-CN"||t==="zh-Hans"?this._locale.set("zh-CN"):this._locale.set("zh-TW")}async loadTranslations(){this._loading.set(!0);try{let e=["en","zh-CN","zh-TW"],t={en:{},"zh-CN":{},"zh-TW":{}};await Promise.all(e.map(async n=>{try{let a=await fetch(`/assets/i18n/${n}.json`);a.ok?t[n]=await a.json():(console.warn(`Failed to load ${n}.json: ${a.status}`),t[n]=this.getFallbackTranslations(n))}catch(a){console.warn(`Error loading ${n}.json:`,a),t[n]=this.getFallbackTranslations(n)}})),this.translations.set(t)}catch(e){console.error("Failed to load translations:",e)}finally{this._loading.set(!1)}}setLocale(e){s.some(t=>t.code===e)&&this._locale.set(e)}t(e,t){let n=this._locale(),a=this.translations(),r=a[n]||{},o;if(o=this.getNestedValue(r,e),typeof o=="string")return this.interpolate(o,t);let i=this.getFlatKeyMapping(e);if(i&&(o=this.getNestedValue(r,i),typeof o=="string"))return this.interpolate(o,t);if(n!=="zh-TW"){if(o=this.getNestedValue(a["zh-TW"],e),typeof o=="string")return this.interpolate(o,t);if(i&&(o=this.getNestedValue(a["zh-TW"],i),typeof o=="string"))return this.interpolate(o,t)}return e}interpolate(e,t){if(!t)return e;let n=e;return Object.entries(t).forEach(([a,r])=>{n=n.replace(new RegExp(`{{${a}}}`,"g"),String(r))}),n}getFlatKeyMapping(e){return{dashboard:"menu.dashboard",accounts:"menu.accounts",automation:"menu.automation",leads:"menu.leads",analytics:"menu.analytics",logs:"menu.logs",performance:"menu.performance",alerts:"menu.alerts",settings:"menu.settings",aiCenter:"menu.aiCenter",resourceDiscoveryMenu:"menu.resourceDiscovery",monitoringCenter:"menu.monitoringCenter",resourceManagement:"menu.resourceManagement",marketingAutomation:"menu.marketingAutomation",aiIntelligence:"menu.aiIntelligence",systemMonitor:"menu.systemMonitor",save:"common.save",cancel:"common.cancel",delete:"common.delete",edit:"common.edit",add:"common.add",close:"common.close",confirm:"common.confirm",search:"common.search",loading:"common.loading",success:"common.success",error:"common.error",warning:"common.warning",refresh:"common.refresh",start:"common.start",stop:"common.stop",active:"common.active",inactive:"common.inactive",totalAccounts:"dashboard.totalAccounts",onlineAccounts:"dashboard.onlineAccounts",leadsToday:"dashboard.leadsToday",messagesSentToday:"dashboard.messagesSentToday",systemControl:"dashboard.systemControl",monitoringStatus:"dashboard.monitoringStatus",recentLogs:"dashboard.recentLogs",recentLeads:"dashboard.recentLeads",addNewAccount:"accounts.addNewAccount",phoneNumber:"accounts.phoneNumber",apiId:"accounts.apiId",apiHash:"accounts.apiHash",proxy:"accounts.proxy",login:"accounts.login",importSession:"accounts.importSession",exportSession:"accounts.exportSession",health:"accounts.health",group:"accounts.group",role:"accounts.role",appearance:"settings.appearance",language:"settings.language",light:"settings.light",dark:"settings.dark",Online:"status.Online",Offline:"status.Offline",Recently:"status.Recently",Unknown:"status.Unknown",Listener:"status.Listener",Sender:"status.Sender",Banned:"status.Banned",Unassigned:"status.Unassigned"}[e]}getNestedValue(e,t){if(!(!t||typeof t!="string"))return t.split(".").reduce((n,a)=>n?.[a],e)}getFallbackTranslations(e){return{en:{app:{title:"TG-AI\u667A\u63A7\u738B",subtitle:"AI Smart Marketing System"},common:{loading:"Loading...",error:"Error",success:"Success"},menu:{dashboard:"Dashboard",accounts:"Accounts",settings:"Settings"}},"zh-CN":{app:{title:"TG-AI\u667A\u63A7\u738B",subtitle:"AI \u667A\u80FD\u8425\u9500\u7CFB\u7EDF"},common:{loading:"\u52A0\u8F7D\u4E2D...",error:"\u9519\u8BEF",success:"\u6210\u529F"},menu:{dashboard:"\u4EEA\u8868\u76D8",accounts:"\u8D26\u53F7\u7BA1\u7406",settings:"\u8BBE\u7F6E"}},"zh-TW":{app:{title:"TG-AI\u667A\u63A7\u738B",subtitle:"AI \u667A\u80FD\u884C\u92B7\u7CFB\u7D71"},common:{loading:"\u8F09\u5165\u4E2D...",error:"\u932F\u8AA4",success:"\u6210\u529F"},menu:{dashboard:"\u5100\u8868\u677F",accounts:"\u5E33\u865F\u7BA1\u7406",settings:"\u8A2D\u5B9A"}}}[e]}static{this.\u0275fac=function(t){return new(t||l)}}static{this.\u0275prov=d({token:l,factory:l.\u0275fac,providedIn:"root"})}};export{s as a,m as b};
