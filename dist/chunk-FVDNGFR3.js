import{a as q}from"./chunk-QQWXSIIS.js";import{a as B}from"./chunk-WTAJGCAW.js";import{c as A,e as D}from"./chunk-PHWS6WVI.js";import"./chunk-GQQBGSXN.js";import"./chunk-V2IXOMTS.js";import"./chunk-3V3KVMT4.js";import{b as k}from"./chunk-CXXWQ5XE.js";import"./chunk-BBG7G54H.js";import{$a as s,Aa as d,Na as M,R as _,Vb as E,W as P,X as y,_a as m,bb as F,cb as f,db as b,ga as g,ib as r,jb as o,kb as O,lb as w,mb as S,ob as h,pb as l,qc as T,vb as C,xb as a,yb as u,zb as p}from"./chunk-YLSLTE5F.js";var v=(i,n)=>n.id,U=(i,n)=>n.key;function V(i,n){if(i&1&&(r(0,"div",5)(1,"span",14),a(2,"\u2139\uFE0F"),o(),r(3,"span"),a(4,"\u6B64\u529F\u80FD\u9700\u8981 "),r(5,"strong"),a(6),o(),a(7," \u6216\u66F4\u9AD8\u65B9\u6848"),o()()),i&2){let t=l();d(6),u(t.t("subscription."+t.requiredTier()))}}function z(i,n){if(i&1&&(r(0,"div",16),a(1),o()),i&2){let t=l().$implicit;d(),u(t.badge)}}function $(i,n){if(i&1&&(r(0,"div",17),a(1),o()),i&2){let t=l(2);d(),u(t.t("subscription.currentPlan"))}}function L(i,n){i&1&&(r(0,"span",20),a(1,"\u5B9A\u5236\u50F9\u683C"),o())}function N(i,n){i&1&&(r(0,"span",21),a(1,"\u514D\u8CBB"),o())}function j(i,n){if(i&1&&(r(0,"span",26),a(1,"$"),o(),r(2,"span",21),a(3),o(),r(4,"span",27),a(5,"/\u6708"),o()),i&2){let t=l().$implicit,e=l();d(3),p(" ",e.billingCycle()==="yearly"?t.yearlyPrice:t.price," ")}}function R(i,n){if(i&1&&(r(0,"li")(1,"span",28),a(2,"\u2713"),o(),a(3),o()),i&2){let t=n.$implicit;d(3),p(" ",t," ")}}function Y(i,n){i&1&&O(0,"span",25)}function Q(i,n){i&1&&a(0," \u7576\u524D\u65B9\u6848 ")}function G(i,n){if(i&1&&a(0),i&2){let t=l(2);p(" ",t.t("subscription.contactSales")," ")}}function H(i,n){i&1&&a(0," \u958B\u59CB\u4F7F\u7528 ")}function J(i,n){if(i&1&&a(0),i&2){let t=l(2);p(" ",t.t("subscription.upgradeNow")," ")}}function K(i,n){if(i&1){let t=w();r(0,"div",15),m(1,z,2,1,"div",16),m(2,$,2,1,"div",17),r(3,"h2",18),a(4),o(),r(5,"div",19),m(6,L,2,0,"span",20)(7,N,2,0,"span",21)(8,j,6,1),o(),r(9,"p",22),a(10," \u6700\u591A "),r(11,"strong"),a(12),o(),a(13," \u500B\u5E33\u865F "),o(),r(14,"ul",23),f(15,R,4,1,"li",null,F),o(),r(17,"button",24),h("click",function(){let c=P(t).$implicit,x=l();return y(x.selectPlan(c))}),m(18,Y,1,0,"span",25),m(19,Q,1,0)(20,G,1,1)(21,H,1,0)(22,J,1,1),o()()}if(i&2){let t=n.$implicit,e=l();C("highlighted",t.highlighted)("current",e.currentTier()===t.id),d(),s(t.badge?1:-1),d(),s(e.currentTier()===t.id?2:-1),d(2),u(t.name),d(2),s(t.price===-1?6:t.price===0?7:8),d(6),u(t.maxAccounts===999?"\u7121\u9650":t.maxAccounts),d(3),b(t.features),d(2),C("btn-primary",t.highlighted)("btn-secondary",!t.highlighted),S("disabled",e.currentTier()===t.id||t.price>0&&e.isUpgrading()),d(),s(e.isUpgrading()&&e.selectedPlan()===t.id?18:-1),d(),s(e.currentTier()===t.id?19:t.price===-1?20:t.price===0?21:22)}}function W(i,n){if(i&1&&(r(0,"th"),a(1),o()),i&2){let t=n.$implicit;C("highlighted",t.highlighted),d(),u(t.name)}}function X(i,n){i&1&&(r(0,"span",29),a(1,"\u2713"),o())}function Z(i,n){i&1&&(r(0,"span",30),a(1,"\u2014"),o())}function ee(i,n){if(i&1&&a(0),i&2){let t=l().$implicit,e=l().$implicit;p(" ",e.values[t.id]," ")}}function te(i,n){if(i&1&&(r(0,"td"),m(1,X,2,0,"span",29)(2,Z,2,0,"span",30)(3,ee,1,1),o()),i&2){let t=n.$implicit,e=l().$implicit;d(),s(e.values[t.id]===!0?1:e.values[t.id]===!1?2:3)}}function ne(i,n){if(i&1&&(r(0,"tr")(1,"td"),a(2),o(),f(3,te,4,1,"td",null,v),o()),i&2){let t=n.$implicit,e=l();d(2),u(t.name),d(),b(e.plans())}}var I=class i{constructor(){this.authService=_(B);this.router=_(D);this.route=_(A);this.i18n=_(k);this.quotaService=_(q);this.billingCycle=g("monthly");this.isUpgrading=g(!1);this.selectedPlan=g(null);this.isLoading=g(!0);this.requiredTier=g(null);this.currentTier=this.authService.subscriptionTier;this._plans=g([]);this.plans=E(()=>{let n=this._plans();return n.length>0?n:this.defaultPlans});this.defaultPlans=[{id:"bronze",name:"\u9752\u9285\u6230\u58EB",price:0,yearlyPrice:0,maxAccounts:3,icon:"\u{1F949}",features:["3 \u500B Telegram \u5E33\u865F","\u6BCF\u65E5 50 \u689D\u6D88\u606F","\u6BCF\u65E5 10 \u6B21 AI \u8ABF\u7528","\u57FA\u790E\u529F\u80FD"],highlighted:!1},{id:"silver",name:"\u767D\u9280\u885B\u58EB",price:99,yearlyPrice:79,maxAccounts:10,icon:"\u{1F948}",features:["10 \u500B Telegram \u5E33\u865F","\u6BCF\u65E5 200 \u689D\u6D88\u606F","\u6BCF\u65E5 50 \u6B21 AI \u8ABF\u7528","\u6A21\u677F\u5EAB\u8A2A\u554F"],highlighted:!1},{id:"gold",name:"\u9EC3\u91D1\u7375\u624B",price:299,yearlyPrice:239,maxAccounts:30,icon:"\u{1F947}",features:["30 \u500B Telegram \u5E33\u865F","\u6BCF\u65E5 500 \u689D\u6D88\u606F","\u6BCF\u65E5 100 \u6B21 AI \u8ABF\u7528","\u591A\u89D2\u8272\u5354\u4F5C"],highlighted:!0,badge:"\u6700\u53D7\u6B61\u8FCE"},{id:"diamond",name:"\u947D\u77F3\u738B\u8005",price:599,yearlyPrice:479,maxAccounts:100,icon:"\u{1F48E}",features:["100 \u500B Telegram \u5E33\u865F","\u6BCF\u65E5 2000 \u689D\u6D88\u606F","\u6BCF\u65E5 500 \u6B21 AI \u8ABF\u7528","API \u8A2A\u554F"],highlighted:!1},{id:"star",name:"\u661F\u8000\u50B3\u5947",price:999,yearlyPrice:799,maxAccounts:500,icon:"\u2B50",features:["500 \u500B Telegram \u5E33\u865F","\u6BCF\u65E5 10000 \u689D\u6D88\u606F","\u6BCF\u65E5 2000 \u6B21 AI \u8ABF\u7528","\u512A\u5148\u652F\u6301"],highlighted:!1},{id:"king",name:"\u738B\u8005\u81F3\u5C0A",price:-1,yearlyPrice:-1,maxAccounts:999,icon:"\u{1F451}",features:["\u7121\u9650 Telegram \u5E33\u865F","\u7121\u9650\u6D88\u606F","\u7121\u9650 AI \u8ABF\u7528","\u5C08\u5C6C\u670D\u52D9"],highlighted:!1}];this.featuresList=E(()=>{let n=this.plans(),t=n.map(e=>e.id);return[{key:"accounts",name:"\u5E33\u865F\u6578\u91CF",values:Object.fromEntries(n.map(e=>[e.id,e.maxAccounts===999?"\u7121\u9650":e.maxAccounts.toString()]))},{key:"messages",name:"\u6BCF\u65E5\u6D88\u606F",values:Object.fromEntries(n.map(e=>{let c=e.quotas?.daily_messages;return[e.id,c===-1?"\u7121\u9650":c?.toString()||"-"]}))},{key:"ai",name:"AI \u8ABF\u7528",values:Object.fromEntries(n.map(e=>{let c=e.quotas?.ai_calls;return[e.id,c===-1?"\u7121\u9650":c?.toString()||"-"]}))},{key:"groups",name:"\u7FA4\u7D44\u6578\u91CF",values:Object.fromEntries(n.map(e=>{let c=e.quotas?.groups;return[e.id,c===-1?"\u7121\u9650":c?.toString()||"-"]}))},{key:"support",name:"\u6280\u8853\u652F\u6301",values:Object.fromEntries(n.map((e,c)=>{let x=["\u793E\u5340","\u90F5\u4EF6","\u512A\u5148","\u5C08\u5C6C","VIP","\u81F3\u5C0A"];return[e.id,x[Math.min(c,x.length-1)]]}))}]})}async ngOnInit(){let n=this.route.snapshot.queryParams.required;n&&this.requiredTier.set(n),await this.loadMembershipLevels()}async loadMembershipLevels(){this.isLoading.set(!0);try{await this.quotaService.loadMembershipLevels();let n=this.quotaService.levels();if(n.length>0){let t=n.map((e,c)=>({id:e.level,name:e.name,price:e.prices?.month||0,yearlyPrice:Math.floor((e.prices?.month||0)*.8),maxAccounts:e.quotas?.tg_accounts||0,icon:e.icon,features:this.generateFeatures(e),highlighted:e.level==="gold",badge:e.level==="gold"?"\u6700\u53D7\u6B61\u8FCE":void 0,quotas:e.quotas}));this._plans.set(t)}}catch(n){console.error("Failed to load membership levels:",n)}finally{this.isLoading.set(!1)}}generateFeatures(n){let t=[],e=n.quotas||{};return e.tg_accounts&&t.push(e.tg_accounts===-1?"\u7121\u9650 Telegram \u5E33\u865F":`${e.tg_accounts} \u500B Telegram \u5E33\u865F`),e.daily_messages&&t.push(e.daily_messages===-1?"\u7121\u9650\u6D88\u606F":`\u6BCF\u65E5 ${e.daily_messages} \u689D\u6D88\u606F`),e.ai_calls&&t.push(e.ai_calls===-1?"\u7121\u9650 AI \u8ABF\u7528":`\u6BCF\u65E5 ${e.ai_calls} \u6B21 AI \u8ABF\u7528`),n.features?.length&&t.push(...n.features.slice(0,3)),t}t(n){return this.i18n.t(n)}selectPlan(n){if(n.price===-1){window.open("mailto:sales@tg-matrix.com?subject=Enterprise Plan Inquiry","_blank");return}if(n.price===0){this.router.navigate(["/dashboard"]);return}this.selectedPlan.set(n.id),this.isUpgrading.set(!0),setTimeout(()=>{this.isUpgrading.set(!1),alert("\u652F\u4ED8\u529F\u80FD\u5373\u5C07\u63A8\u51FA\uFF01")},1500)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=M({type:i,selectors:[["app-upgrade-view"]],decls:49,vars:7,consts:[[1,"upgrade-page"],[1,"page-header"],[1,"billing-toggle"],[3,"click"],[1,"discount-badge"],[1,"upgrade-notice"],[1,"plans-grid"],[1,"plan-card",3,"highlighted","current"],[1,"features-comparison"],[1,"comparison-table"],[3,"highlighted"],[1,"faq-section"],[1,"faq-list"],[1,"faq-item"],[1,"notice-icon"],[1,"plan-card"],[1,"plan-badge"],[1,"current-badge"],[1,"plan-name"],[1,"plan-price"],[1,"price-custom"],[1,"price-amount"],[1,"plan-accounts"],[1,"plan-features"],[1,"plan-btn",3,"click","disabled"],[1,"loading-spinner"],[1,"price-currency"],[1,"price-period"],[1,"feature-check"],[1,"check"],[1,"cross"]],template:function(t,e){t&1&&(r(0,"div",0)(1,"header",1)(2,"h1"),a(3,"\u9078\u64C7\u9069\u5408\u60A8\u7684\u65B9\u6848"),o(),r(4,"p"),a(5,"\u9748\u6D3B\u7684\u5B9A\u50F9\uFF0C\u6EFF\u8DB3\u5404\u7A2E\u898F\u6A21\u7684\u9700\u6C42"),o(),r(6,"div",2)(7,"button",3),h("click",function(){return e.billingCycle.set("monthly")}),a(8),o(),r(9,"button",3),h("click",function(){return e.billingCycle.set("yearly")}),a(10),r(11,"span",4),a(12,"\u7701 20%"),o()()()(),m(13,V,8,1,"div",5),r(14,"div",6),f(15,K,23,16,"div",7,v),o(),r(17,"section",8)(18,"h2"),a(19,"\u529F\u80FD\u5C0D\u6BD4"),o(),r(20,"table",9)(21,"thead")(22,"tr")(23,"th"),a(24,"\u529F\u80FD"),o(),f(25,W,2,3,"th",10,v),o()(),r(27,"tbody"),f(28,ne,5,1,"tr",null,U),o()()(),r(30,"section",11)(31,"h2"),a(32,"\u5E38\u898B\u554F\u984C"),o(),r(33,"div",12)(34,"div",13)(35,"h3"),a(36,"\u53EF\u4EE5\u96A8\u6642\u66F4\u63DB\u65B9\u6848\u55CE\uFF1F"),o(),r(37,"p"),a(38,"\u662F\u7684\uFF0C\u60A8\u53EF\u4EE5\u96A8\u6642\u5347\u7D1A\u6216\u964D\u7D1A\u65B9\u6848\u3002\u5347\u7D1A\u7ACB\u5373\u751F\u6548\uFF0C\u964D\u7D1A\u5C07\u5728\u7576\u524D\u8A08\u8CBB\u9031\u671F\u7D50\u675F\u5F8C\u751F\u6548\u3002"),o()(),r(39,"div",13)(40,"h3"),a(41,"\u652F\u6301\u54EA\u4E9B\u4ED8\u6B3E\u65B9\u5F0F\uFF1F"),o(),r(42,"p"),a(43,"\u6211\u5011\u652F\u6301\u4FE1\u7528\u5361\u3001PayPal\u3001\u9280\u884C\u8F49\u5E33\u548C\u52A0\u5BC6\u8CA8\u5E63\uFF08USDT/BTC\uFF09\u4ED8\u6B3E\u3002"),o()(),r(44,"div",13)(45,"h3"),a(46,"\u6709\u9000\u6B3E\u653F\u7B56\u55CE\uFF1F"),o(),r(47,"p"),a(48,"\u6211\u5011\u63D0\u4F9B 7 \u5929\u7121\u689D\u4EF6\u9000\u6B3E\u4FDD\u8B49\u3002\u5982\u679C\u4E0D\u6EFF\u610F\uFF0C\u53EF\u4EE5\u7533\u8ACB\u5168\u984D\u9000\u6B3E\u3002"),o()()()()()),t&2&&(d(7),C("active",e.billingCycle()==="monthly"),d(),p(" ",e.t("subscription.monthly")," "),d(),C("active",e.billingCycle()==="yearly"),d(),p(" ",e.t("subscription.yearly")," "),d(3),s(e.requiredTier()?13:-1),d(2),b(e.plans()),d(10),b(e.plans()),d(3),b(e.featuresList()))},dependencies:[T],styles:[".upgrade-page[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary, #888);margin-bottom:1.5rem}.billing-toggle[_ngcontent-%COMP%]{display:inline-flex;background:var(--bg-secondary, #1a1a1a);border-radius:8px;padding:4px}.billing-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1.25rem;background:transparent;border:none;border-radius:6px;color:var(--text-secondary, #888);font-size:.875rem;cursor:pointer;transition:all .2s ease}.billing-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--primary, #3b82f6);color:#fff}.discount-badge[_ngcontent-%COMP%]{padding:.125rem .375rem;background:#22c55e;border-radius:4px;font-size:.625rem;font-weight:600}.upgrade-notice[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:1rem;background:#3b82f61a;border:1px solid rgba(59,130,246,.3);border-radius:8px;margin-bottom:2rem;color:var(--primary, #3b82f6)}.plans-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1.5rem;margin-bottom:3rem}.plan-card[_ngcontent-%COMP%]{position:relative;padding:2rem;background:var(--bg-secondary, #1a1a1a);border:1px solid var(--border-color, #333);border-radius:16px;transition:all .3s ease}.plan-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 24px #0003}.plan-card.highlighted[_ngcontent-%COMP%]{border-color:var(--primary, #3b82f6);background:linear-gradient(135deg,#3b82f60d,#8b5cf60d)}.plan-card.current[_ngcontent-%COMP%]{border-color:#22c55e}.plan-badge[_ngcontent-%COMP%]{position:absolute;top:-12px;left:50%;transform:translate(-50%);padding:.25rem 1rem;background:linear-gradient(135deg,#3b82f6,#8b5cf6);border-radius:20px;font-size:.75rem;font-weight:600;color:#fff}.current-badge[_ngcontent-%COMP%]{position:absolute;top:-12px;right:1rem;padding:.25rem .75rem;background:#22c55e;border-radius:20px;font-size:.625rem;font-weight:600;color:#fff}.plan-name[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:1rem}.plan-price[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.25rem;margin-bottom:.5rem}.price-currency[_ngcontent-%COMP%]{font-size:1.25rem;color:var(--text-secondary, #888)}.price-amount[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700}.price-period[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #888)}.price-custom[_ngcontent-%COMP%]{font-size:1.25rem;color:var(--primary, #3b82f6)}.plan-accounts[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #888);margin-bottom:1.5rem}.plan-features[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0 0 1.5rem}.plan-features[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 0;font-size:.875rem;color:var(--text-secondary, #aaa)}.feature-check[_ngcontent-%COMP%]{color:#22c55e;font-weight:700}.plan-btn[_ngcontent-%COMP%]{width:100%;padding:.875rem;border-radius:8px;font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.plan-btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#8b5cf6);border:none;color:#fff}.plan-btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}.plan-btn.btn-secondary[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border-color, #333);color:var(--text-primary, #fff)}.plan-btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff0d;border-color:var(--border-hover, #444)}.plan-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.features-comparison[_ngcontent-%COMP%]{margin-bottom:3rem}.features-comparison[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:1.5rem;text-align:center}.comparison-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:var(--bg-secondary, #1a1a1a);border-radius:12px;overflow:hidden}.comparison-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .comparison-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:center;border-bottom:1px solid var(--border-color, #333)}.comparison-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-tertiary, #151515);font-weight:600;font-size:.875rem}.comparison-table[_ngcontent-%COMP%]   th.highlighted[_ngcontent-%COMP%]{background:#3b82f61a;color:var(--primary, #3b82f6)}.comparison-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:left;font-size:.875rem;color:var(--text-secondary, #aaa)}.comparison-table[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{color:#22c55e;font-weight:700}.comparison-table[_ngcontent-%COMP%]   .cross[_ngcontent-%COMP%]{color:var(--text-muted, #666)}.faq-section[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.faq-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:1.5rem;text-align:center}.faq-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.faq-item[_ngcontent-%COMP%]{padding:1.5rem;background:var(--bg-secondary, #1a1a1a);border-radius:12px}.faq-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:.5rem}.faq-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #888);line-height:1.6}.loading-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media(max-width:768px){.plans-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.comparison-table[_ngcontent-%COMP%]{font-size:.75rem}.comparison-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .comparison-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem}}"],changeDetection:0})}};export{I as UpgradeViewComponent};
