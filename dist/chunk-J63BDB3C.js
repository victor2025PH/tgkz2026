import{a as re,c as Ft,d as At,e as de,f as We}from"./chunk-MMFOEXUO.js";import{a as Me,b as Dt}from"./chunk-5TLJ2TGS.js";import{a as rt,b as Et,c as wt}from"./chunk-A4DTJ5UD.js";import{c as bt}from"./chunk-X3FI6EPB.js";import{a as Ue}from"./chunk-O6TR47GC.js";import{b as St}from"./chunk-QCWWCRCA.js";import{a as ie}from"./chunk-MKTJUSEE.js";import{a as $e,b as le,c as se,f as ue,h as Fe,j as Le,k as Ae,l as ye,m as Se,n as je,o as ke,t as ne}from"./chunk-3FNGYHNZ.js";import{b as yt}from"./chunk-LSISMS55.js";import{l as Ct,m as vt,n as ft,o as K}from"./chunk-HDSZBSQ2.js";import{a as xe,b as ht}from"./chunk-CCGO3GAA.js";import{$a as Y,Ab as J,Cb as gt,Db as xt,Eb as N,Fb as G,Gb as $,J as De,Kb as _t,La as Q,Mb as ve,Nb as ge,O as I,Pb as be,Qb as ot,T as c,U as m,V as j,Vb as P,W as z,Wa as mt,Xb as me,Ya as h,Yb as Pe,Za as b,_a as he,a as T,ab as F,b as B,bb as A,cb as L,da as D,db as i,eb as o,fb as R,gb as v,hb as C,ib as oe,jb as y,kb as pt,nb as g,ob as ae,pb as d,qb as Ge,rb as Re,sb as Ie,ub as H,vb as E,wa as ct,wb as Ce,xa as s,xb as a,yb as _,zb as x}from"./chunk-XBIFDY2N.js";var Ee=class l{constructor(){this.ipc=I(ie);this.multiRoleService=I(de);this.activeGroups=D([]);this.pendingRequests=D([]);this.messageHistory=D(new Map);this.stats=D({totalGroups:0,activeGroups:0,successfulConversions:0,pendingRequests:0});this.groups=this.activeGroups.asReadonly();this.pending=this.pendingRequests.asReadonly();this.statistics=this.stats.asReadonly();this.initializeListeners(),this.loadActiveGroups()}initializeListeners(){this.ipc.on("multi-role-group-created",t=>{this.handleGroupCreated(t)}),this.ipc.on("multi-role-group-message",t=>{this.handleGroupMessage(t)}),this.ipc.on("multi-role-member-joined",t=>{this.handleMemberJoined(t)}),this.ipc.on("multi-role-member-left",t=>{this.handleMemberLeft(t)})}async loadActiveGroups(){try{let t=localStorage.getItem("tg-matrix-multi-role-groups");if(t){let e=JSON.parse(t);this.activeGroups.set(e),this.updateStats()}}catch(t){console.error("Failed to load active groups:",t)}}saveGroups(){try{localStorage.setItem("tg-matrix-multi-role-groups",JSON.stringify(this.activeGroups()))}catch(t){console.error("Failed to save groups:",t)}}async createGroup(t){try{return!t.roleAccounts||t.roleAccounts.length===0?{success:!1,error:"\u672A\u914D\u7F6E\u89D2\u8272\u5E33\u865F"}:(this.pendingRequests.update(e=>[...e,t]),this.updateStats(),this.ipc.send("create-multi-role-group",{groupName:t.groupName,targetUserId:t.targetCustomer.id,targetUsername:t.targetCustomer.username,roleAccounts:t.roleAccounts,inviteMessage:t.inviteMessage||`\u60A8\u597D ${t.targetCustomer.firstName||""}\uFF0C\u6211\u5011\u70BA\u60A8\u5275\u5EFA\u4E86\u5C08\u5C6C\u670D\u52D9\u7FA4\u7D44\uFF01`}),{success:!0,groupId:`pending_${Date.now()}`})}catch(e){return console.error("Failed to create group:",e),{success:!1,error:e instanceof Error?e.message:"\u5EFA\u7FA4\u5931\u6557"}}}handleGroupCreated(t){if(this.pendingRequests.update(e=>e.filter(n=>n.targetCustomer.id!==t.request.targetCustomer.id)),t.success&&t.groupId){let e={id:t.groupId,targetCustomer:{id:t.request.targetCustomer.id,username:t.request.targetCustomer.username,firstName:t.request.targetCustomer.firstName,intentScore:t.request.intentScore||0,source:t.request.sourceGroupId||"unknown"},groupTitle:t.request.groupName,telegramGroupId:t.telegramGroupId,participants:t.request.roleAccounts.map(n=>({roleId:n.roleId,roleName:"",accountId:n.accountId,accountPhone:""})),scriptId:t.request.scriptId||"",scriptName:"",status:"running",currentStageId:void 0,currentStageOrder:0,messagesSent:0,customerMessages:0,outcome:"pending",createdAt:new Date().toISOString()};this.activeGroups.update(n=>[...n,e]),this.saveGroups(),t.request.scriptId&&this.ipc.send("multi-role-start-script",{groupId:e.id,scriptId:t.request.scriptId})}this.updateStats()}handleGroupMessage(t){let e={id:`msg_${Date.now()}`,senderId:t.senderId,senderName:t.senderName,content:t.content,timestamp:new Date,isFromTarget:t.isFromTarget};this.messageHistory.update(n=>{let r=new Map(n),u=r.get(t.groupId)||[];return r.set(t.groupId,[...u,e]),r}),t.isFromTarget&&this.activeGroups.update(n=>n.map(r=>r.id===t.groupId?B(T({},r),{customerMessages:r.customerMessages+1,updatedAt:new Date}):r)),t.isFromTarget&&this.handleCustomerMessage(t.groupId,e)}async handleCustomerMessage(t,e){let n=this.activeGroups().find(r=>r.id===t);if(!(!n||n.status!=="running"))if(n.scriptId){let r=this.multiRoleService.scripts().find(p=>p.id===n.scriptId),u=n.currentStageOrder||0;r&&r.stages[u]&&r.stages[u].trigger?.type==="message"&&this.ipc.send("multi-role-advance-stage",{groupId:t,nextStageOrder:u+1})}else this.ipc.send("multi-role-ai-reply",{groupId:t,message:e.content,customerId:n.targetCustomer.id})}handleMemberJoined(t){t.isTarget&&this.activeGroups.update(e=>e.map(n=>n.id===t.groupId?B(T({},n),{status:"running",updatedAt:new Date}):n))}handleMemberLeft(t){t.isTarget&&(this.activeGroups.update(e=>e.map(n=>n.id===t.groupId?B(T({},n),{status:"failed",updatedAt:new Date}):n)),this.saveGroups())}async sendMessage(t,e,n){let r=this.activeGroups().find(p=>p.id===t);if(!r)return!1;let u=r.participants?.find(p=>p.roleId===e);return u?(this.ipc.send("multi-role-send-message",{groupId:t,telegramGroupId:r.telegramGroupId,accountId:u.accountId,content:n}),this.activeGroups.update(p=>p.map(f=>f.id===t?B(T({},f),{messagesSent:f.messagesSent+1,updatedAt:new Date}):f)),!0):!1}markAsConverted(t){this.activeGroups.update(e=>e.map(n=>n.id===t?B(T({},n),{status:"completed",updatedAt:new Date}):n)),this.saveGroups(),this.stats.update(e=>B(T({},e),{successfulConversions:e.successfulConversions+1}))}pauseGroup(t){this.activeGroups.update(e=>e.map(n=>n.id===t?B(T({},n),{status:"paused",updatedAt:new Date}):n)),this.saveGroups()}resumeGroup(t){this.activeGroups.update(e=>e.map(n=>n.id===t?B(T({},n),{status:"running",updatedAt:new Date}):n)),this.saveGroups()}closeGroup(t){this.activeGroups.update(e=>e.map(n=>n.id===t?B(T({},n),{status:"completed",updatedAt:new Date}):n)),this.saveGroups(),this.updateStats()}getMessages(t){return this.messageHistory().get(t)||[]}getGroup(t){return this.activeGroups().find(e=>e.id===t)}updateStats(){let t=this.activeGroups();this.stats.set({totalGroups:t.length,activeGroups:t.filter(e=>e.status==="running").length,successfulConversions:t.filter(e=>e.status==="completed").length,pendingRequests:this.pendingRequests().length})}shouldCreateGroup(t,e){let n=e?.minScore||50;return t>=n}generateGroupName(t,e="{\u5BA2\u6236\u540D}\u5C08\u5C6C\u670D\u52D9\u7FA4"){return e.replace("{\u5BA2\u6236\u540D}",t||"VIP\u5BA2\u6236")}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275prov=De({token:l,factory:l.\u0275fac,providedIn:"root"})}};var Te=class l{constructor(){this.multiRoleService=I(de);this.autoGroupService=I(Ee);this.conversationEngine=I(At);this.intentService=I(Ft);this.ipc=I(ie);this.executionStates=D(new Map);this.taskQueue=D([]);this.stats=D({totalExecutions:0,successfulExecutions:0,failedExecutions:0,avgResponseTime:0});this.executionInterval=null;this.states=this.executionStates.asReadonly();this.queue=this.taskQueue.asReadonly();this.statistics=this.stats.asReadonly();this.startExecutionLoop(),this.initializeListeners()}initializeListeners(){this.ipc.on("multi-role-customer-message",t=>{this.handleCustomerMessage(t.groupId,t.message)}),this.ipc.on("multi-role-message-sent",t=>{this.handleMessageSent(t.taskId,t.success,t.error)})}startExecutionLoop(){this.executionInterval=setInterval(()=>{this.processTaskQueue()},1e3)}async processTaskQueue(){let t=new Date,n=this.taskQueue().filter(r=>r.status==="pending"&&r.scheduledTime<=t);for(let r of n)await this.executeTask(r);this.taskQueue.update(r=>r.filter(u=>u.status!=="completed"&&u.status!=="failed"))}async executeTask(t){this.updateTaskStatus(t.id,"executing");try{let e=Date.now();if(await this.autoGroupService.sendMessage(t.groupId,t.roleId,t.content)){this.updateTaskStatus(t.id,"completed");let r=Date.now()-e;this.stats.update(u=>({totalExecutions:u.totalExecutions+1,successfulExecutions:u.successfulExecutions+1,failedExecutions:u.failedExecutions,avgResponseTime:(u.avgResponseTime*u.totalExecutions+r)/(u.totalExecutions+1)})),this.checkNextMessage(t.groupId)}else throw new Error("\u6D88\u606F\u767C\u9001\u5931\u6557")}catch(e){this.updateTaskStatus(t.id,"failed",e instanceof Error?e.message:"\u672A\u77E5\u932F\u8AA4"),this.stats.update(n=>B(T({},n),{totalExecutions:n.totalExecutions+1,failedExecutions:n.failedExecutions+1}))}}async startScriptExecution(t,e){let n=this.autoGroupService.getGroup(t),r=this.multiRoleService.scripts().find(p=>p.id===e);if(!n||!r){console.error("Group or script not found");return}let u={groupId:t,isRunning:!0,currentStage:0,currentMessageIndex:0,lastMessageTime:null,pendingTasks:[],completedTasks:[]};this.executionStates.update(p=>{let f=new Map(p);return f.set(t,u),f}),await this.executeStage(t,r.stages[0])}async executeStage(t,e){let n=this.executionStates().get(t);!n||!n.isRunning||(e.trigger?.type==="time"&&e.trigger.delaySeconds?setTimeout(()=>this.executeStageMessages(t,e),e.trigger.delaySeconds*1e3):e.trigger?.type==="message"||await this.executeStageMessages(t,e))}async executeStageMessages(t,e){let n=this.executionStates().get(t);if(!n||!n.isRunning)return;let r=0;for(let u=0;u<e.messages.length;u++){let p=e.messages[u];if(r+=p.timing.delayAfterPrevious||0,p.timing.randomDelay){let{min:M,max:k}=p.timing.randomDelay;r+=Math.floor(Math.random()*(k-M+1))+M}let f;if(p.content.type==="ai_generate"){let M=this.autoGroupService.getGroup(t),k=this.multiRoleService.roles().find(U=>U.id===p.roleId);M&&k?f=(await this.conversationEngine.generateMultiRoleReply(p.content.aiPrompt||"",{roleId:k.id,roleName:k.name,rolePrompt:k.aiConfig.customPrompt,personality:k.personality.description},{userId:M.targetCustomer.id,userName:M.targetCustomer.firstName||M.targetCustomer.username})).content:f=p.content.text||""}else if(p.content.type==="template"){let M=this.autoGroupService.getGroup(t);f=this.processTemplate(p.content.text||"",M?.targetCustomer)}else f=p.content.text||"";let S={id:`task_${Date.now()}_${u}`,groupId:t,type:"script_message",roleId:p.roleId,content:f,delay:r,status:"pending",scheduledTime:new Date(Date.now()+r*1e3)};this.taskQueue.update(M=>[...M,S])}this.executionStates.update(u=>{let p=new Map(u),f=p.get(t);return f&&p.set(t,B(T({},f),{currentStage:f.currentStage+1})),p})}async handleCustomerMessage(t,e){let n=this.autoGroupService.getGroup(t);if(!n||n.status!=="running")return;let r=this.executionStates().get(t),u=await this.intentService.recognizeIntent(e,n.targetCustomer.id,!0);if(n.scriptId&&r?.isRunning){let p=this.multiRoleService.scripts().find(f=>f.id===n.scriptId);if(p&&r.currentStage<p.stages.length){let f=p.stages[r.currentStage];f.trigger?.type==="message"?await this.executeStage(t,f):f.trigger?.type==="keyword"&&f.trigger.keywords?.some(M=>u.keywords?.includes(M))&&await this.executeStage(t,f)}}else await this.generateFreeReply(t,n,e,u)}async generateFreeReply(t,e,n,r){let u=this.multiRoleService.roles(),p=e.participants?.[0];if(!p)return;let f=u.find(k=>k.id===p.roleId);if(!f)return;let S=await this.conversationEngine.generateMultiRoleReply(n,{roleId:f.id,roleName:f.name,rolePrompt:f.aiConfig.customPrompt,personality:f.personality.description},{userId:e.targetCustomer.id,userName:e.targetCustomer.firstName||e.targetCustomer.username,sourceGroup:t}),M={id:`task_${Date.now()}`,groupId:t,type:"ai_reply",roleId:f.id,content:S.content,delay:S.delay,status:"pending",scheduledTime:new Date(Date.now()+S.delay*1e3)};this.taskQueue.update(k=>[...k,M]),S.shouldHandoff&&this.notifyHandoff(t,S.handoffReason||"\u9700\u8981\u4EBA\u5DE5\u4ECB\u5165")}processTemplate(t,e){return t.replace(/{客戶名}/g,e?.firstName||e?.username||"VIP\u5BA2\u6236").replace(/{用戶名}/g,e?.username||"\u7528\u6236").replace(/{客戶ID}/g,e?.id||"")}updateTaskStatus(t,e,n){this.taskQueue.update(r=>r.map(u=>u.id===t?B(T({},u),{status:e,error:n}):u))}checkNextMessage(t){this.executionStates().get(t)&&this.executionStates.update(n=>{let r=new Map(n),u=r.get(t);return u&&r.set(t,B(T({},u),{lastMessageTime:new Date})),r})}handleMessageSent(t,e,n){e?this.updateTaskStatus(t,"completed"):this.updateTaskStatus(t,"failed",n)}notifyHandoff(t,e){this.ipc.send("multi-role-handoff",{groupId:t,reason:e,timestamp:new Date().toISOString()}),this.pauseExecution(t)}pauseExecution(t){this.executionStates.update(e=>{let n=new Map(e),r=n.get(t);return r&&n.set(t,B(T({},r),{isRunning:!1})),n})}resumeExecution(t){this.executionStates.update(e=>{let n=new Map(e),r=n.get(t);return r&&n.set(t,B(T({},r),{isRunning:!0})),n})}stopExecution(t){this.taskQueue.update(e=>e.filter(n=>n.groupId!==t)),this.executionStates.update(e=>{let n=new Map(e);return n.delete(t),n})}async sendManualMessage(t,e,n,r=0){let u={id:`task_${Date.now()}`,groupId:t,type:"scheduled",roleId:e,content:n,delay:r,status:"pending",scheduledTime:new Date(Date.now()+r*1e3)};this.taskQueue.update(p=>[...p,u])}ngOnDestroy(){this.executionInterval&&clearInterval(this.executionInterval)}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275prov=De({token:l,factory:l.\u0275fac,providedIn:"root"})}};var qe=class l{constructor(){this.ipc=I(ie);this.toast=I(xe);this.analytics=I(Dt);this._sessions=D(new Map);this.sessions=P(()=>Array.from(this._sessions().values()));this.stageConfigs=new Map([["opening",{stage:"opening",primaryRole:"consultant",supportRoles:[],objectives:["\u5F15\u8D77\u6CE8\u610F","\u5EFA\u7ACB\u521D\u6B65\u806F\u7E6B"],transitionSignals:["\u7528\u6236\u56DE\u8986","\u7528\u6236\u8868\u9054\u8208\u8DA3"],suggestedMessages:[]}],["building_trust",{stage:"building_trust",primaryRole:"consultant",supportRoles:["oldcustomer"],objectives:["\u5EFA\u7ACB\u4FE1\u4EFB","\u5206\u4EAB\u6210\u529F\u6848\u4F8B"],transitionSignals:["\u7528\u6236\u8A62\u554F\u7D30\u7BC0","\u7528\u6236\u8868\u9054\u9867\u616E"],suggestedMessages:[]}],["discovering_needs",{stage:"discovering_needs",primaryRole:"consultant",supportRoles:["expert"],objectives:["\u4E86\u89E3\u7528\u6236\u9700\u6C42","\u6316\u6398\u75DB\u9EDE"],transitionSignals:["\u7528\u6236\u8AAA\u660E\u9700\u6C42","\u7528\u6236\u63D0\u51FA\u554F\u984C"],suggestedMessages:[]}],["presenting_value",{stage:"presenting_value",primaryRole:"expert",supportRoles:["consultant","oldcustomer"],objectives:["\u5C55\u793A\u7522\u54C1\u50F9\u503C","\u5339\u914D\u7528\u6236\u9700\u6C42"],transitionSignals:["\u7528\u6236\u8A8D\u53EF\u50F9\u503C","\u7528\u6236\u8A62\u554F\u50F9\u683C"],suggestedMessages:[]}],["handling_objections",{stage:"handling_objections",primaryRole:"consultant",supportRoles:["manager","oldcustomer"],objectives:["\u8655\u7406\u7528\u6236\u7591\u616E","\u89E3\u6C7A\u9867\u616E"],transitionSignals:["\u7528\u6236\u7591\u616E\u6D88\u9664","\u7528\u6236\u9858\u610F\u5617\u8A66"],suggestedMessages:[]}],["closing",{stage:"closing",primaryRole:"consultant",supportRoles:["manager"],objectives:["\u4FC3\u6210\u6210\u4EA4","\u5F15\u5C0E\u4E0B\u55AE"],transitionSignals:["\u7528\u6236\u540C\u610F\u8CFC\u8CB7","\u7528\u6236\u63D0\u4F9B\u4FE1\u606F"],suggestedMessages:[]}],["follow_up",{stage:"follow_up",primaryRole:"support",supportRoles:["consultant"],objectives:["\u552E\u5F8C\u670D\u52D9","\u5EFA\u7ACB\u9577\u671F\u95DC\u4FC2"],transitionSignals:[],suggestedMessages:[]}]]);this.roleInteractions=[{type:"agree",triggerCondition:"after_main_role_speaks",probability:.6,templates:["\u5C0D\uFF0C{\u4E3B\u89D2\u8272}\u8AAA\u5F97\u5C0D","\u6C92\u932F\uFF0C\u6211\u4E5F\u9019\u9EBC\u89BA\u5F97","\u662F\u7684\uFF0C\u9019\u9EDE\u5F88\u91CD\u8981"]},{type:"share_experience",triggerCondition:"user_shows_doubt",probability:.8,templates:["\u6211\u4E4B\u524D\u4E5F\u6709\u9019\u500B\u9867\u616E\uFF0C\u5F8C\u4F86\u7528\u4E86\u4E4B\u5F8C\u767C\u73FE\u5B8C\u5168\u6C92\u554F\u984C","\u8AAA\u5BE6\u8A71\u4E00\u958B\u59CB\u6211\u4E5F\u7336\u8C6B\uFF0C\u4F46\u7528\u4E86\u5E7E\u500B\u6708\u771F\u7684\u5F88\u7A69","\u6211\u670B\u53CB\u4ECB\u7D39\u6211\u7684\u6642\u5019\u6211\u4E5F\u4E0D\u592A\u4FE1\uFF0C\u73FE\u5728\u81EA\u5DF1\u4E5F\u5728\u63A8\u85A6\u5225\u4EBA"]},{type:"hype",triggerCondition:"user_silent_too_long",probability:.5,templates:["\u6700\u8FD1\u6D3B\u52D5\u529B\u5EA6\u633A\u5927\u7684","\u807D\u8AAA\u4E0B\u9031\u5C31\u6062\u5FA9\u539F\u50F9\u4E86","\u4ECA\u5929\u8AEE\u8A62\u7684\u4EBA\u633A\u591A\u7684"]},{type:"complement",triggerCondition:"user_asks_technical",probability:.9,templates:["\u9019\u500B\u6211\u4F86\u88DC\u5145\u4E00\u4E0B...","\u6280\u8853\u65B9\u9762\u6211\u6BD4\u8F03\u4E86\u89E3\uFF0C{\u554F\u984C}\u662F\u9019\u6A23\u7684...","\u95DC\u65BC\u9019\u500B\u554F\u984C\uFF0C\u6211\u53EF\u4EE5\u89E3\u91CB\u4E00\u4E0B..."]}];this.defaultRhythm={minIntervalSeconds:15,maxIntervalSeconds:45,waitForUserReply:!0,userSilenceTimeoutSeconds:180,roleRotationStrategy:"contextual"};this.initializeListeners()}initializeListeners(){this.ipc.on("collaboration:user-message",t=>{this.handleUserMessage(t.sessionId,t.message)}),this.ipc.on("collaboration:message-sent",t=>{t.success&&this.updateLastMessageTime(t.sessionId)})}createSession(t){let e=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n=[...t.roles].sort((u,p)=>u.entryOrder-p.entryOrder),r={id:e,groupId:t.groupId,targetUserId:t.targetUserId,targetUserName:t.targetUserName,status:"initializing",roles:n,rhythm:T(T({},this.defaultRhythm),t.rhythm),currentStage:"opening",currentSpeaker:null,lastMessageTime:null,messageCount:0,userResponseCount:0,conversationHistory:[],stageHistory:[{stage:"opening",enteredAt:new Date}],interestScore:50,createdAt:new Date,updatedAt:new Date};return this._sessions.update(u=>{let p=new Map(u);return p.set(e,r),p}),console.log(`[Orchestrator] \u5275\u5EFA\u5354\u4F5C\u6703\u8A71: ${e}, \u89D2\u8272\u6578: ${n.length}`),r}async startCollaboration(t){let e=this._sessions().get(t);return e?(this.updateSession(t,{status:"active"}),await this.executeRoleEntry(e),!0):(this.toast.error("\u6703\u8A71\u4E0D\u5B58\u5728"),!1)}async executeRoleEntry(t){console.log(`[Orchestrator] \u958B\u59CB\u89D2\u8272\u5165\u5834: ${t.roles.length} \u500B\u89D2\u8272`);for(let e of t.roles){e.entryDelaySeconds>0&&(console.log(`[Orchestrator] ${e.roleName} \u7B49\u5F85 ${e.entryDelaySeconds} \u79D2\u5F8C\u5165\u5834`),await this.delay(e.entryDelaySeconds*1e3));let n=this._sessions().get(t.id);if(!n||n.status!=="active"){console.log("[Orchestrator] \u6703\u8A71\u5DF2\u505C\u6B62\uFF0C\u4E2D\u65B7\u5165\u5834");break}if(e.openingMessage)await this.sendRoleMessage(t.id,e.roleId,e.openingMessage);else{let r=this.generateOpeningMessage(e,t);await this.sendRoleMessage(t.id,e.roleId,r)}this.updateSession(t.id,{currentSpeaker:e.roleId}),console.log(`[Orchestrator] ${e.roleName} \u5DF2\u5165\u5834`)}this.startRhythmControl(t.id)}generateOpeningMessage(t,e){let n={opener:[`\u60A8\u597D ${e.targetUserName}\uFF01\u6211\u662F{\u89D2\u8272\u540D}\uFF0C\u5F88\u9AD8\u8208\u8A8D\u8B58\u60A8`,`Hi ${e.targetUserName}\uFF0C\u6211\u662F\u8CA0\u8CAC{\u89D2\u8272\u8077\u8CAC}\u7684{\u89D2\u8272\u540D}`,`${e.targetUserName} \u60A8\u597D\uFF01\u6B61\u8FCE\u52A0\u5165\uFF0C\u6211\u662F{\u89D2\u8272\u540D}`],supporter:["\u5927\u5BB6\u597D\uFF0C\u6211\u662F{\u89D2\u8272\u540D}","{\u89D2\u8272\u540D}\u4F86\u4E86\uFF0C\u6709\u554F\u984C\u53EF\u4EE5\u554F\u6211","\u6211\u662F{\u89D2\u8272\u540D}\uFF0C\u5F88\u9AD8\u8208\u80FD\u5E6B\u5230\u5927\u5BB6"],atmosphere:["\u54C8\u56C9~","\u4F86\u4E86\u4F86\u4E86","\u7D42\u65BC\u627E\u5230\u7D44\u7E54\u4E86"],closer:["\u60A8\u597D\uFF0C\u6211\u662F{\u89D2\u8272\u540D}\uFF0C\u8CA0\u8CAC\u70BA\u60A8\u8655\u7406\u5F8C\u7E8C\u4E8B\u5B9C","\u9700\u8981\u4EFB\u4F55\u5E6B\u52A9\u96A8\u6642\u627E\u6211"]},r=n[t.entryType]||n.supporter;return r[Math.floor(Math.random()*r.length)].replace("{\u89D2\u8272\u540D}",t.roleName).replace("{\u89D2\u8272\u8077\u8CAC}",this.getRolePurpose(t.roleId))}getRolePurpose(t){return{consultant:"\u696D\u52D9\u8AEE\u8A62",expert:"\u6280\u8853\u652F\u6301",oldcustomer:"\u5BA2\u6236\u670D\u52D9",support:"\u552E\u5F8C\u670D\u52D9",manager:"\u5BA2\u6236\u95DC\u4FC2",atmosphere:"\u793E\u7FA4\u4E92\u52D5"}[t]||"\u5BA2\u6236\u670D\u52D9"}async sendRoleMessage(t,e,n){let r=this._sessions().get(t);if(!r)return;let u=r.roles.find(p=>p.roleId===e);u&&(this.ipc.send("collaboration:send-message",{sessionId:t,groupId:r.groupId,targetUserId:r.targetUserId,accountPhone:u.accountPhone,content:n,roleId:e,roleName:u.roleName}),this.updateSession(t,{messageCount:r.messageCount+1,lastMessageTime:new Date,conversationHistory:[...r.conversationHistory,{role:u.roleName,content:n,timestamp:new Date,isUser:!1}]}),console.log(`[Orchestrator] [${u.roleName}]: ${n.substring(0,50)}...`))}startRhythmControl(t){let e=setInterval(()=>{let n=this._sessions().get(t);if(!n||n.status!=="active"){clearInterval(e);return}this.checkAndTriggerRoleInteraction(n)},1e4);console.log(`[Orchestrator] \u5DF2\u555F\u52D5\u7BC0\u594F\u63A7\u5236: ${t}`)}async checkAndTriggerRoleInteraction(t){if(!t.lastMessageTime)return;let e=(Date.now()-t.lastMessageTime.getTime())/1e3;if(e>t.rhythm.userSilenceTimeoutSeconds){console.log(`[Orchestrator] \u7528\u6236\u6C89\u9ED8 ${e.toFixed(0)} \u79D2\uFF0C\u89F8\u767C\u89D2\u8272\u4E92\u52D5`);let n=this.selectSupportRole(t);if(n){let r=this.selectInteraction("user_silent_too_long");if(r){let u=this.generateInteractionMessage(r,t);await this.sendRoleMessage(t.id,n.roleId,u)}}}}handleUserMessage(t,e){let n=this._sessions().get(t);if(!n)return;console.log(`[Orchestrator] \u6536\u5230\u7528\u6236\u6D88\u606F: ${e.substring(0,50)}...`),this.updateSession(t,{userResponseCount:n.userResponseCount+1,conversationHistory:[...n.conversationHistory,{role:"user",content:e,timestamp:new Date,isUser:!0}]});let r=this.analyzeUserIntent(e),u=this.calculateInterestScore(n,e);this.updateSession(t,{interestScore:u}),this.checkStageTransition(t,e,r);let p=this.selectResponder(n,r);this.triggerAIResponse(t,p,e,r)}analyzeUserIntent(t){let e=t.toLowerCase();return e.includes("\u50F9\u683C")||e.includes("\u591A\u5C11\u9322")||e.includes("\u8CBB\u7528")?"asking_price":e.includes("\u600E\u9EBC\u7528")||e.includes("\u5982\u4F55")||e.includes("\u6559\u7A0B")?"asking_usage":e.includes("\u5B89\u5168")||e.includes("\u53EF\u9760")||e.includes("\u64D4\u5FC3")?"expressing_concern":e.includes("\u597D\u7684")||e.includes("\u53EF\u4EE5")||e.includes("\u884C")?"positive_response":e.includes("\u4E0D")||e.includes("\u7B97\u4E86")||e.includes("\u518D\u8AAA")?"negative_response":"general_inquiry"}calculateInterestScore(t,e){let n=t.interestScore,r=e.toLowerCase();return r.includes("\u6709\u8208\u8DA3")||r.includes("\u60F3\u4E86\u89E3")||r.includes("\u600E\u9EBC\u8CB7")?n+=15:r.includes("\u50F9\u683C")||r.includes("\u591A\u5C11\u9322")?n+=10:r.includes("\u597D\u7684")||r.includes("\u53EF\u4EE5")?n+=5:r.includes("\u4E0D\u9700\u8981")||r.includes("\u7B97\u4E86")?n-=20:r.includes("\u518D\u8003\u616E")||r.includes("\u518D\u8AAA")?n-=10:n+=2,Math.max(0,Math.min(100,n))}checkStageTransition(t,e,n){let r=this._sessions().get(t);if(!r)return;let u=r.currentStage,p=null;switch(u){case"opening":n!=="negative_response"&&(p="building_trust");break;case"building_trust":(n==="asking_usage"||n==="asking_price")&&(p="discovering_needs");break;case"discovering_needs":r.messageCount>=6&&(p="presenting_value");break;case"presenting_value":n==="expressing_concern"?p="handling_objections":(n==="positive_response"||n==="asking_price")&&(p="closing");break;case"handling_objections":n==="positive_response"&&(p="closing");break;case"closing":n==="positive_response"&&(p="follow_up");break}p&&p!==u&&this.transitionToStage(t,p)}transitionToStage(t,e){let n=this._sessions().get(t);if(!n)return;console.log(`[Orchestrator] \u968E\u6BB5\u8F49\u63DB: ${n.currentStage} \u2192 ${e}`);let r=new Date,u=n.stageHistory[n.stageHistory.length-1];u&&(u.duration=r.getTime()-new Date(u.enteredAt).getTime()),this.updateSession(t,{currentStage:e,stageHistory:[...n.stageHistory,{stage:e,enteredAt:r}]}),this.toast.info(`\u{1F3AF} \u9032\u5165${this.getStageName(e)}\u968E\u6BB5`)}getStageName(t){return{opening:"\u958B\u5834",building_trust:"\u5EFA\u7ACB\u4FE1\u4EFB",discovering_needs:"\u767C\u73FE\u9700\u6C42",presenting_value:"\u5C55\u793A\u50F9\u503C",handling_objections:"\u8655\u7406\u7570\u8B70",closing:"\u4FC3\u6210\u6210\u4EA4",follow_up:"\u8DDF\u9032\u670D\u52D9"}[t]}selectResponder(t,e){let n=this.stageConfigs.get(t.currentStage);if(e==="asking_usage"||e.includes("technical")){let r=t.roles.find(u=>u.roleId==="expert");if(r)return r}if(e==="expressing_concern"){let r=t.roles.find(u=>u.roleId==="oldcustomer");if(r)return r}if(n){let r=t.roles.find(u=>u.roleId===n.primaryRole);if(r)return r}return t.roles[0]}selectSupportRole(t){let e=this.stageConfigs.get(t.currentStage);if(!e||e.supportRoles.length===0)return null;let n=e.supportRoles.find(r=>r!==t.currentSpeaker)||e.supportRoles[0];return t.roles.find(r=>r.roleId===n)||null}selectInteraction(t){let e=this.roleInteractions.filter(n=>n.triggerCondition===t);if(e.length===0)return null;for(let n of e)if(Math.random()<n.probability)return n;return null}generateInteractionMessage(t,e){return t.templates[Math.floor(Math.random()*t.templates.length)].replace("{\u4E3B\u89D2\u8272}",e.roles[0]?.roleName||"\u9867\u554F").replace("{\u76EE\u6A19\u7528\u6236}",e.targetUserName)}triggerAIResponse(t,e,n,r){let u=this._sessions().get(t);if(!u)return;let p=this.calculateResponseDelay(u);console.log(`[Orchestrator] \u5C07\u7531 ${e.roleName} \u5728 ${p}ms \u5F8C\u56DE\u8986`),setTimeout(()=>{this.ipc.send("collaboration:generate-response",{sessionId:t,roleId:e.roleId,roleName:e.roleName,accountPhone:e.accountPhone,userMessage:n,intent:r,stage:u.currentStage,conversationHistory:u.conversationHistory.slice(-10)})},p)}calculateResponseDelay(t){let e=t.rhythm.minIntervalSeconds*1e3,n=t.rhythm.maxIntervalSeconds*1e3;return e+Math.random()*(n-e)}updateSession(t,e){this._sessions.update(n=>{let r=n.get(t);if(!r)return n;let u=new Map(n);return u.set(t,B(T(T({},r),e),{updatedAt:new Date})),u})}updateLastMessageTime(t){this.updateSession(t,{lastMessageTime:new Date})}delay(t){return new Promise(e=>setTimeout(e,t))}stopSession(t){this.updateSession(t,{status:"paused"}),console.log(`[Orchestrator] \u6703\u8A71\u5DF2\u66AB\u505C: ${t}`)}completeSession(t,e="neutral",n){let r=this._sessions().get(t);r&&(this.updateSession(t,{status:"completed"}),this.analytics.recordSession({sessionId:r.id,targetUserId:r.targetUserId,targetUserName:r.targetUserName,roles:r.roles.map(u=>({roleId:u.roleId,roleName:u.roleName,roleType:u.entryType,accountPhone:u.accountPhone})),messages:r.conversationHistory.map(u=>({role:u.role,content:u.content,timestamp:u.timestamp,isUser:u.isUser})),outcome:e,conversionValue:n,interestScore:r.interestScore,stagesReached:r.stageHistory.map(u=>u.stage),finalStage:r.currentStage}),console.log(`[Orchestrator] \u6703\u8A71\u5DF2\u5B8C\u6210: ${t}, \u7D50\u679C: ${e}`),this.toast.success("\u{1F389} \u5354\u4F5C\u6703\u8A71\u5DF2\u5B8C\u6210"))}getSessionStats(t){let e=this._sessions().get(t);return e?{duration:Date.now()-e.createdAt.getTime(),messageCount:e.messageCount,userResponseCount:e.userResponseCount,interestScore:e.interestScore,currentStage:e.currentStage,stageHistory:e.stageHistory}:null}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275prov=De({token:l,factory:l.\u0275fac,providedIn:"root"})}};var at=(l,t)=>t.id;function Nt(l,t){if(l&1){let e=y();i(0,"button",43),g("click",function(){let r=c(e).$implicit,u=d();return u.editData.type=r.id,m(u.onTypeChange())}),i(1,"div",44),a(2),o(),i(3,"div",45),a(4),o()()}if(l&2){let e=t.$implicit,n=d();E("border-purple-500",n.editData.type===e.id)("bg-purple-500/10",n.editData.type===e.id)("border-transparent",n.editData.type!==e.id)("bg-slate-700",n.editData.type!==e.id),s(2),_(e.icon),s(),E("text-purple-400",n.editData.type===e.id)("text-slate-400",n.editData.type!==e.id),s(),x(" ",e.label," ")}}function Gt(l,t){if(l&1){let e=y();i(0,"button",46),g("click",function(){let r=c(e).$implicit,u=d();return m(u.editData.personality.speakingStyle=r.id)}),a(1),o()}if(l&2){let e=t.$implicit,n=d();E("bg-purple-500",n.editData.personality.speakingStyle===e.id)("text-white",n.editData.personality.speakingStyle===e.id)("bg-slate-700",n.editData.personality.speakingStyle!==e.id)("text-slate-300",n.editData.personality.speakingStyle!==e.id),s(),J(" ",e.icon," ",e.label," ")}}function $t(l,t){if(l&1){let e=y();i(0,"button",47),g("click",function(){let r=c(e).$implicit,u=d();return m(u.toggleTrait(r))}),a(1),o()}if(l&2){let e=t.$implicit,n=d();E("bg-purple-500/20",n.editData.personality.traits.includes(e))("text-purple-400",n.editData.personality.traits.includes(e))("bg-slate-700",!n.editData.personality.traits.includes(e))("text-slate-400",!n.editData.personality.traits.includes(e)),s(),x(" ",e," ")}}function Lt(l,t){if(l&1&&(i(0,"option",36),a(1),o()),l&2){let e=t.$implicit;L("value",e.id),s(),J(" ",e.phone," ",e.username?"(@"+e.username+")":""," ")}}function jt(l,t){l&1&&(i(0,"span",39),a(1,"\u26A0 \u8ACB\u586B\u5BEB\u5FC5\u8981\u4FE1\u606F"),o())}var Oe=class l{constructor(){this.multiRoleService=I(de);this.role=Pe(null);this.availableAccounts=Pe([]);this.saved=me();this.cancelled=me();this.editData=this.getDefaultData();this.isNew=P(()=>!this.role());this.roleTypes=Object.entries(re).filter(([t])=>t!=="custom").map(([t,e])=>({id:t,icon:e.icon,label:e.label}));this.speakingStyles=[{id:"professional",icon:"\u{1F454}",label:"\u5C08\u696D\u6B63\u5F0F"},{id:"friendly",icon:"\u{1F60A}",label:"\u53CB\u597D\u89AA\u5207"},{id:"casual",icon:"\u{1F60E}",label:"\u8F15\u9B06\u96A8\u610F"},{id:"enthusiastic",icon:"\u{1F525}",label:"\u71B1\u60C5"},{id:"careful",icon:"\u{1F914}",label:"\u8B39\u614E"},{id:"curious",icon:"\u2753",label:"\u597D\u5947"}];this.availableTraits=["\u5C08\u696D","\u8010\u5FC3","\u71B1\u60C5","\u7D30\u5FC3","\u5E7D\u9ED8","\u771F\u8AA0","\u5584\u65BC\u50BE\u807D","\u5584\u65BC\u8AAA\u670D","\u908F\u8F2F\u6E05\u6670","\u7D93\u9A57\u8C50\u5BCC"];let t=this.role;t()&&this.loadRole(t())}ngOnInit(){let t=this.role();t&&this.loadRole(t)}getDefaultData(){return{name:"",type:"expert",personality:{description:"",speakingStyle:"friendly",traits:[]},aiConfig:{useGlobalAI:!0,customPrompt:re.expert.defaultPrompt,responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:[],isActive:!0}}loadRole(t){this.editData=B(T({},t),{personality:T({},t.personality),aiConfig:T({},t.aiConfig)})}getRoleIcon(t){return re[t]?.icon||"\u{1F3AD}"}onTypeChange(){let t=this.editData.type,e=re[t];(!this.editData.name||this.roleTypes.some(n=>n.label===this.editData.name))&&(this.editData.name=e.label),this.editData.personality.description||(this.editData.personality.description=e.description),(!this.editData.aiConfig.customPrompt||Object.values(re).some(n=>n.defaultPrompt===this.editData.aiConfig.customPrompt))&&(this.editData.aiConfig.customPrompt=e.defaultPrompt),this.editData.personality.speakingStyle=e.defaultStyle}toggleTrait(t){let e=this.editData.personality.traits,n=e.indexOf(t);n>=0?e.splice(n,1):e.push(t)}onAccountSelect(t){let e=this.availableAccounts().find(n=>n.id===t);e?(this.editData.boundAccountId=e.id,this.editData.boundAccountPhone=e.phone):(this.editData.boundAccountId=void 0,this.editData.boundAccountPhone=void 0)}isFormValid(){return!!(this.editData.name?.trim()&&this.editData.type&&this.editData.aiConfig?.customPrompt?.trim())}save(){if(!this.isFormValid())return;let t=B(T({},this.editData),{updatedAt:new Date().toISOString()});if(this.isNew()){let e=this.multiRoleService.addRole(t),n=this.multiRoleService.roles().find(r=>r.id===e);n&&this.saved.emit(n)}else this.multiRoleService.updateRole(this.role().id,t),this.saved.emit(T(T({},this.role()),t))}cancel(){this.cancelled.emit()}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=Q({type:l,selectors:[["app-role-editor"]],inputs:{role:[1,"role"],availableAccounts:[1,"availableAccounts"]},outputs:{saved:"saved",cancelled:"cancelled"},decls:119,vars:13,consts:[[1,"role-editor","fixed","inset-0","bg-black/60","backdrop-blur-sm","flex","items-center","justify-center","z-50"],[1,"bg-slate-800","rounded-2xl","w-full","max-w-2xl","max-h-[90vh]","overflow-hidden","shadow-xl","border","border-slate-700"],[1,"p-6","border-b","border-slate-700","flex","items-center","justify-between"],[1,"text-xl","font-bold","text-white","flex","items-center","gap-3"],[1,"text-2xl"],[1,"text-slate-400","hover:text-white",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6","overflow-y-auto","max-h-[calc(90vh-180px)]"],[1,"mb-8"],[1,"text-sm","font-semibold","text-purple-400","mb-4","flex","items-center","gap-2"],[1,"w-6","h-6","rounded-full","bg-purple-500/20","flex","items-center","justify-center","text-xs"],[1,"grid","grid-cols-2","gap-4","mb-4"],[1,"text-sm","text-slate-400","block","mb-2"],[1,"grid","grid-cols-3","gap-2"],[1,"p-2","rounded-lg","text-center","transition-all","border-2",3,"border-purple-500","bg-purple-500/10","border-transparent","bg-slate-700"],["type","text","placeholder","\u5982\uFF1A\u7522\u54C1\u5C08\u5BB6 Mira",1,"w-full","px-4","py-2.5","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500",3,"ngModelChange","ngModel"],["rows","2","placeholder","\u63CF\u8FF0\u9019\u500B\u89D2\u8272\u7684\u80CC\u666F\u548C\u7279\u9EDE...",1,"w-full","px-4","py-3","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500","resize-none",3,"ngModelChange","ngModel"],[1,"mb-4"],[1,"flex","flex-wrap","gap-2"],[1,"px-4","py-2","rounded-lg","transition-all",3,"bg-purple-500","text-white","bg-slate-700","text-slate-300"],[1,"px-3","py-1.5","rounded-lg","text-sm","transition-all",3,"bg-purple-500/20","text-purple-400","bg-slate-700","text-slate-400"],["rows","4","placeholder","\u4F60\u662F\u4E00\u4F4D...",1,"w-full","px-4","py-3","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500","resize-none","font-mono","text-sm",3,"ngModelChange","ngModel"],[1,"text-xs","text-slate-500","mt-1"],[1,"grid","grid-cols-3","gap-4"],[1,"w-full","px-3","py-2","bg-slate-700","border","border-slate-600","rounded-lg","text-white",3,"ngModelChange","ngModel"],["value","short"],["value","medium"],["value","long"],["value","none"],["value","low"],["value","high"],["value","fast"],["value","slow"],["value","random"],[1,"w-full","px-4","py-2.5","bg-slate-700","border","border-slate-600","rounded-lg","text-white",3,"ngModelChange","ngModel"],[3,"value"],[1,"p-6","border-t","border-slate-700","flex","items-center","justify-between"],[1,"text-sm","text-slate-400"],[1,"text-yellow-400"],[1,"flex","gap-3"],[1,"px-6","py-2.5","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600","transition-colors",3,"click"],[1,"px-6","py-2.5","bg-gradient-to-r","from-purple-500","to-pink-500","text-white","rounded-lg","hover:opacity-90","transition-opacity","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"p-2","rounded-lg","text-center","transition-all","border-2",3,"click"],[1,"text-xl","mb-0.5"],[1,"text-xs"],[1,"px-4","py-2","rounded-lg","transition-all",3,"click"],[1,"px-3","py-1.5","rounded-lg","text-sm","transition-all",3,"click"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3)(4,"span",4),a(5),o(),a(6),o(),i(7,"button",5),g("click",function(){return n.cancel()}),j(),i(8,"svg",6),R(9,"path",7),o()()(),z(),i(10,"div",8)(11,"div",9)(12,"h3",10)(13,"span",11),a(14,"1"),o(),a(15," \u57FA\u790E\u4FE1\u606F "),o(),i(16,"div",12)(17,"div")(18,"label",13),a(19,"\u89D2\u8272\u985E\u578B *"),o(),i(20,"div",14),F(21,Nt,5,14,"button",15,at),o()(),i(23,"div")(24,"label",13),a(25,"\u89D2\u8272\u540D\u7A31 *"),o(),i(26,"input",16),$("ngModelChange",function(u){return G(n.editData.name,u)||(n.editData.name=u),u}),o()()(),i(27,"div")(28,"label",13),a(29,"\u4EBA\u8A2D\u63CF\u8FF0"),o(),i(30,"textarea",17),$("ngModelChange",function(u){return G(n.editData.personality.description,u)||(n.editData.personality.description=u),u}),a(31,"              "),o()()(),i(32,"div",9)(33,"h3",10)(34,"span",11),a(35,"2"),o(),a(36," \u6027\u683C\u7279\u5FB5 "),o(),i(37,"div",18)(38,"label",13),a(39,"\u8AAA\u8A71\u98A8\u683C"),o(),i(40,"div",19),F(41,Gt,2,10,"button",20,at),o()(),i(43,"div")(44,"label",13),a(45,"\u6027\u683C\u6A19\u7C64"),o(),i(46,"div",19),F(47,$t,2,9,"button",21,Y),o()()(),i(49,"div",9)(50,"h3",10)(51,"span",11),a(52,"3"),o(),a(53," AI \u914D\u7F6E "),o(),i(54,"div",18)(55,"label",13),a(56,"AI \u4EBA\u8A2D Prompt *"),o(),i(57,"textarea",22),$("ngModelChange",function(u){return G(n.editData.aiConfig.customPrompt,u)||(n.editData.aiConfig.customPrompt=u),u}),a(58,"              "),o(),i(59,"p",23),a(60,"\u5B9A\u7FA9\u9019\u500B\u89D2\u8272\u8AAA\u8A71\u7684\u65B9\u5F0F\u548C\u884C\u70BA\u7279\u9EDE"),o()(),i(61,"div",24)(62,"div")(63,"label",13),a(64,"\u56DE\u8986\u9577\u5EA6"),o(),i(65,"select",25),$("ngModelChange",function(u){return G(n.editData.aiConfig.responseLength,u)||(n.editData.aiConfig.responseLength=u),u}),i(66,"option",26),a(67,"\u7C21\u77ED"),o(),i(68,"option",27),a(69,"\u9069\u4E2D"),o(),i(70,"option",28),a(71,"\u8A73\u7D30"),o()()(),i(72,"div")(73,"label",13),a(74,"Emoji \u983B\u7387"),o(),i(75,"select",25),$("ngModelChange",function(u){return G(n.editData.aiConfig.emojiFrequency,u)||(n.editData.aiConfig.emojiFrequency=u),u}),i(76,"option",29),a(77,"\u4E0D\u4F7F\u7528"),o(),i(78,"option",30),a(79,"\u5076\u723E"),o(),i(80,"option",27),a(81,"\u9069\u4E2D"),o(),i(82,"option",31),a(83,"\u983B\u7E41"),o()()(),i(84,"div")(85,"label",13),a(86,"\u6253\u5B57\u901F\u5EA6"),o(),i(87,"select",25),$("ngModelChange",function(u){return G(n.editData.aiConfig.typingSpeed,u)||(n.editData.aiConfig.typingSpeed=u),u}),i(88,"option",32),a(89,"\u5FEB\u901F"),o(),i(90,"option",27),a(91,"\u4E2D\u7B49"),o(),i(92,"option",33),a(93,"\u6162\u901F"),o(),i(94,"option",34),a(95,"\u96A8\u6A5F"),o()()()()(),i(96,"div",18)(97,"h3",10)(98,"span",11),a(99,"4"),o(),a(100," \u5E33\u865F\u7D81\u5B9A "),o(),i(101,"div")(102,"label",13),a(103,"\u7D81\u5B9A Telegram \u5E33\u865F"),o(),i(104,"select",35),$("ngModelChange",function(u){return G(n.editData.boundAccountId,u)||(n.editData.boundAccountId=u),u}),g("ngModelChange",function(u){return n.onAccountSelect(u)}),i(105,"option",36),a(106,"\u66AB\u4E0D\u7D81\u5B9A"),o(),F(107,Lt,2,3,"option",36,at),o(),i(109,"p",23),a(110,"\u7D81\u5B9A\u5E33\u865F\u5F8C\uFF0C\u8A72\u89D2\u8272\u5C07\u4F7F\u7528\u6B64\u5E33\u865F\u767C\u9001\u6D88\u606F"),o()()()(),i(111,"div",37)(112,"div",38),h(113,jt,2,0,"span",39),o(),i(114,"div",40)(115,"button",41),g("click",function(){return n.cancel()}),a(116," \u53D6\u6D88 "),o(),i(117,"button",42),g("click",function(){return n.save()}),a(118),o()()()()()),e&2&&(s(5),_(n.isNew()?"\u{1F3AD}":n.getRoleIcon(n.editData.type)),s(),x(" ",n.isNew()?"\u5275\u5EFA\u65B0\u89D2\u8272":"\u7DE8\u8F2F\u89D2\u8272"," "),s(15),A(n.roleTypes),s(5),N("ngModel",n.editData.name),s(4),N("ngModel",n.editData.personality.description),s(11),A(n.speakingStyles),s(6),A(n.availableTraits),s(10),N("ngModel",n.editData.aiConfig.customPrompt),s(8),N("ngModel",n.editData.aiConfig.responseLength),s(10),N("ngModel",n.editData.aiConfig.emojiFrequency),s(12),N("ngModel",n.editData.aiConfig.typingSpeed),s(17),N("ngModel",n.editData.boundAccountId),s(),L("value",void 0),s(2),A(n.availableAccounts()),s(6),b(n.isFormValid()?-1:113),s(4),L("disabled",!n.isFormValid()),s(),x(" ",n.isNew()?"\u5275\u5EFA\u89D2\u8272":"\u4FDD\u5B58\u66F4\u6539"," "))},dependencies:[K,ne,ye,Se,le,Ae,se,ue],encapsulation:2})}};var Ve=(l,t)=>t.id;function Ut(l,t){if(l&1){let e=y();i(0,"div",37),g("click",function(){let r=c(e).$index,u=d();return m(u.selectStage(r))}),i(1,"div",38)(2,"span",39),a(3),o(),i(4,"button",40),g("click",function(r){let u=c(e).$index;return d().removeStage(u),m(r.stopPropagation())}),j(),i(5,"svg",41),R(6,"path",9),o()()(),z(),i(7,"div",42),a(8),o()()}if(l&2){let e=t.$implicit,n=t.$index,r=d();E("bg-purple-500/20",r.selectedStageIndex()===n)("border-purple-500",r.selectedStageIndex()===n)("border",r.selectedStageIndex()===n)("bg-slate-700/50",r.selectedStageIndex()!==n),s(2),E("text-purple-400",r.selectedStageIndex()===n)("text-white",r.selectedStageIndex()!==n),s(),J(" ",n+1,". ",e.name," "),s(5),x(" ",e.messages.length," \u689D\u6D88\u606F ")}}function Wt(l,t){l&1&&(i(0,"div",28),a(1," \u9EDE\u64CA\u4E0A\u65B9\u6DFB\u52A0\u7B2C\u4E00\u500B\u968E\u6BB5 "),o())}function qt(l,t){if(l&1){let e=y();i(0,"div",50)(1,"span"),a(2,"\u5EF6\u9072"),o(),i(3,"input",56),$("ngModelChange",function(r){c(e);let u=d();return G(u.trigger.delaySeconds,r)||(u.trigger.delaySeconds=r),m(r)}),o(),i(4,"span"),a(5,"\u79D2\u5F8C\u57F7\u884C"),o()()}if(l&2){let e=d();s(3),N("ngModel",e.trigger.delaySeconds)}}function Ot(l,t){if(l&1){let e=y();i(0,"div",50)(1,"span"),a(2,"\u95DC\u9375\u8A5E\uFF08\u9017\u865F\u5206\u9694\uFF09"),o(),i(3,"input",57),g("ngModelChange",function(r){c(e);let u=d(),p=d();return m(p.setKeywords(u,r))}),o()()}if(l&2){let e=d(),n=d();s(3),L("ngModel",n.getKeywordsString(e))}}function Ht(l,t){if(l&1&&(i(0,"option",61),a(1),o()),l&2){let e=t.$implicit,n=d(3);L("value",e.id),s(),J(" ",n.getRoleIcon(e.type)," ",e.name," ")}}function zt(l,t){l&1&&(i(0,"div",74),a(1),o()),l&2&&(s(),xt(" \u53EF\u7528\u8B8A\u91CF: ","{","\u5BA2\u6236\u540D","}",", ","{","\u7522\u54C1\u540D","}",", ","{","\u50F9\u683C","}"," "))}function Qt(l,t){if(l&1){let e=y();i(0,"textarea",73),$("ngModelChange",function(r){c(e);let u=d().$implicit;return G(u.content.text,r)||(u.content.text=r),m(r)}),a(1,"                          "),o(),h(2,zt,2,6,"div",74)}if(l&2){let e=d().$implicit;N("ngModel",e.content.text),s(2),b(e.content.type==="template"?2:-1)}}function Kt(l,t){if(l&1){let e=y();i(0,"textarea",75),$("ngModelChange",function(r){c(e);let u=d().$implicit;return G(u.content.aiPrompt,r)||(u.content.aiPrompt=r),m(r)}),a(1,"                          "),o()}if(l&2){let e=d().$implicit;N("ngModel",e.content.aiPrompt)}}function Yt(l,t){if(l&1){let e=y();i(0,"div",52)(1,"div",58)(2,"div",59)(3,"select",60),$("ngModelChange",function(r){let u=c(e).$implicit;return G(u.roleId,r)||(u.roleId=r),m(r)}),F(4,Ht,2,3,"option",61,Ve),o()(),i(6,"div",62)(7,"div",63)(8,"select",64),$("ngModelChange",function(r){let u=c(e).$implicit;return G(u.content.type,r)||(u.content.type=r),m(r)}),i(9,"option",65),a(10,"\u56FA\u5B9A\u6587\u672C"),o(),i(11,"option",66),a(12,"AI \u751F\u6210"),o(),i(13,"option",67),a(14,"\u6A21\u677F\u8B8A\u91CF"),o()(),i(15,"div",68)(16,"span"),a(17,"\u5EF6\u9072"),o(),i(18,"input",69),$("ngModelChange",function(r){let u=c(e).$implicit;return G(u.timing.delayAfterPrevious,r)||(u.timing.delayAfterPrevious=r),m(r)}),o(),i(19,"span"),a(20,"\u79D2"),o()()(),h(21,Qt,3,2),h(22,Kt,2,1,"textarea",70),o(),i(23,"button",71),g("click",function(){let r=c(e).$index,u=d(),p=d();return m(p.removeMessage(u,r))}),j(),i(24,"svg",54),R(25,"path",72),o()()()()}if(l&2){let e=t.$implicit,n=d(2);s(3),N("ngModel",e.roleId),s(),A(n.availableRoles()),s(4),N("ngModel",e.content.type),s(10),N("ngModel",e.timing.delayAfterPrevious),s(3),b(e.content.type==="text"||e.content.type==="template"?21:-1),s(),b(e.content.type==="ai_generate"?22:-1)}}function Jt(l,t){if(l&1){let e=y();i(0,"div",12)(1,"div",43)(2,"input",44),$("ngModelChange",function(r){let u=c(e);return G(u.name,r)||(u.name=r),m(r)}),o(),i(3,"select",45),$("ngModelChange",function(r){let u=c(e);return G(u.trigger.type,r)||(u.trigger.type=r),m(r)}),i(4,"option",46),a(5,"\u6642\u9593\u89F8\u767C"),o(),i(6,"option",47),a(7,"\u6D88\u606F\u89F8\u767C"),o(),i(8,"option",48),a(9,"\u95DC\u9375\u8A5E\u89F8\u767C"),o(),i(10,"option",49),a(11,"\u624B\u52D5\u89F8\u767C"),o()()(),h(12,qt,6,1,"div",50),h(13,Ot,4,1,"div",50),o(),i(14,"div",51),F(15,Yt,26,5,"div",52,Ve),i(17,"button",53),g("click",function(){let r=c(e),u=d();return m(u.addMessage(r))}),j(),i(18,"svg",54),R(19,"path",55),o(),a(20," \u6DFB\u52A0\u6D88\u606F "),o()()}if(l&2){let e=t;s(2),N("ngModel",e.name),s(),N("ngModel",e.trigger.type),s(9),b(e.trigger.type==="time"?12:-1),s(),b(e.trigger.type==="keyword"?13:-1),s(2),A(e.messages)}}function Xt(l,t){l&1&&(i(0,"div",30)(1,"div",76),a(2,"\u{1F4DD}"),o(),i(3,"div",77),a(4,"\u9078\u64C7\u6216\u5275\u5EFA\u4E00\u500B\u968E\u6BB5"),o(),i(5,"div",78),a(6,"\u5728\u5DE6\u5074\u9078\u64C7\u968E\u6BB5\u958B\u59CB\u7DE8\u8F2F"),o()())}function Zt(l,t){l&1&&(i(0,"span",87),a(1,"[AI \u751F\u6210]"),o())}function en(l,t){if(l&1&&a(0),l&2){let e=d().$implicit;x(" ",e.content.text||"..."," ")}}function tn(l,t){if(l&1&&(i(0,"div",83)(1,"div",84),a(2),o(),i(3,"div",62)(4,"div",85),a(5),o(),i(6,"div",86),h(7,Zt,2,0,"span",87)(8,en,1,1),o()()()),l&2){let e,n,r=t.$implicit,u=d(3);s(2),x(" ",u.getRoleIcon(((e=u.getRoleById(r.roleId))==null?null:e.type)||"custom")," "),s(3),x(" ",((n=u.getRoleById(r.roleId))==null?null:n.name)||"\u672A\u77E5\u89D2\u8272"," "),s(2),b(r.content.type==="ai_generate"?7:8)}}function nn(l,t){if(l&1&&(i(0,"div",81)(1,"div",82),a(2),o(),F(3,tn,9,3,"div",83,Ve),o()),l&2){let e=t.$implicit;s(2),_(e.name),s(),A(e.messages)}}function on(l,t){if(l&1&&(i(0,"div",31)(1,"h4",79),a(2,"\u5C0D\u8A71\u9810\u89BD"),o(),i(3,"div",80),F(4,nn,5,1,"div",81,Ve),o()()),l&2){let e=d();s(4),A(e.editData.stages)}}var He=class l{constructor(){this.multiRoleService=I(de);this.script=Pe(null);this.saved=me();this.cancelled=me();this.showPreview=D(!1);this.selectedStageIndex=D(-1);this.editData=this.getDefaultData();this.isNew=P(()=>!this.script());this.availableRoles=P(()=>this.multiRoleService.roles());this.currentStage=P(()=>{let t=this.selectedStageIndex();return t>=0&&t<this.editData.stages.length?this.editData.stages[t]:null})}ngOnInit(){let t=this.script();t&&this.loadScript(t)}getDefaultData(){return{name:"",description:"",scenario:"custom",stages:[],requiredRoles:[],minRoleCount:1,stats:{useCount:0,successCount:0,avgDuration:0,conversionRate:0},isActive:!0}}loadScript(t){this.editData=B(T({},t),{stages:t.stages.map(e=>B(T({},e),{messages:e.messages.map(n=>B(T({},n),{content:T({},n.content),timing:T({},n.timing)}))}))}),this.editData.stages.length>0&&this.selectedStageIndex.set(0)}getRoleIcon(t){return re[t]?.icon||"\u{1F3AD}"}getRoleById(t){return this.availableRoles().find(e=>e.id===t)}selectStage(t){this.selectedStageIndex.set(t)}addStage(){let t={id:`stage_${Date.now()}`,name:`\u968E\u6BB5 ${this.editData.stages.length+1}`,order:this.editData.stages.length,trigger:{type:"time",delaySeconds:0},messages:[]};this.editData.stages.push(t),this.selectedStageIndex.set(this.editData.stages.length-1)}removeStage(t){this.editData.stages.splice(t,1),this.selectedStageIndex()>=this.editData.stages.length&&this.selectedStageIndex.set(Math.max(0,this.editData.stages.length-1))}addMessage(t){let e=this.availableRoles(),n=e.length>0?e[0].id:"",r={id:`msg_${Date.now()}`,roleId:n,content:{type:"text",text:""},timing:{delayAfterPrevious:5}};t.messages.push(r)}removeMessage(t,e){t.messages.splice(e,1)}togglePreview(){this.showPreview.update(t=>!t)}getTotalMessages(){return this.editData.stages.reduce((t,e)=>t+e.messages.length,0)}isFormValid(){return!!(this.editData.name?.trim()&&this.editData.stages.length>0&&this.editData.stages.some(t=>t.messages.length>0))}save(){if(!this.isFormValid())return;let t=new Set,e=this.availableRoles();this.editData.stages.forEach(u=>{u.messages.forEach(p=>{if(p.roleId){let f=e.find(S=>S.id===p.roleId);f&&t.add(f.type)}})}),this.editData.requiredRoles=Array.from(t);let n=this.editData.stages.reduce((u,p)=>{let f=p.trigger?.delaySeconds||0,S=p.messages.reduce((M,k)=>M+(k.timing.delayAfterPrevious||0),0);return u+f+S},0);this.editData.stats&&(this.editData.stats.avgDuration=Math.ceil(n/60));let r=B(T({},this.editData),{updatedAt:new Date().toISOString()});if(this.isNew()){let u=this.multiRoleService.addScript(r),p=this.multiRoleService.scripts().find(f=>f.id===u);p&&this.saved.emit(p)}else this.multiRoleService.updateScript(this.script().id,r),this.saved.emit(T(T({},this.script()),r))}cancel(){this.cancelled.emit()}getKeywordsString(t){return t.trigger?.keywords?.join(", ")||""}setKeywords(t,e){t.trigger.keywords=e.split(",").map(n=>n.trim()).filter(n=>n)}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=Q({type:l,selectors:[["app-script-editor"]],inputs:{script:[1,"script"]},outputs:{saved:"saved",cancelled:"cancelled"},decls:66,vars:12,consts:[[1,"script-editor","fixed","inset-0","bg-black/60","backdrop-blur-sm","flex","items-center","justify-center","z-50"],[1,"bg-slate-800","rounded-2xl","w-full","max-w-4xl","max-h-[90vh]","overflow-hidden","shadow-xl","border","border-slate-700"],[1,"p-6","border-b","border-slate-700","flex","items-center","justify-between"],[1,"text-xl","font-bold","text-white","flex","items-center","gap-3"],[1,"text-2xl"],[1,"flex","items-center","gap-4"],[1,"px-4","py-2","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600","transition-colors","flex","items-center","gap-2",3,"click"],[1,"text-slate-400","hover:text-white",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","h-[calc(90vh-180px)]"],[1,"w-72","border-r","border-slate-700","p-4","overflow-y-auto"],[1,"mb-6"],[1,"text-sm","font-semibold","text-slate-400","mb-3"],[1,"mb-3"],[1,"text-xs","text-slate-500","block","mb-1"],["type","text","placeholder","\u5982\uFF1AVIP\u5BA2\u6236\u8F49\u5316\u5287\u672C",1,"w-full","px-3","py-2","bg-slate-700","border","border-slate-600","rounded-lg","text-white","text-sm",3,"ngModelChange","ngModel"],["rows","2","placeholder","\u5287\u672C\u7528\u9014...",1,"w-full","px-3","py-2","bg-slate-700","border","border-slate-600","rounded-lg","text-white","text-sm","resize-none",3,"ngModelChange","ngModel"],[1,"w-full","px-3","py-2","bg-slate-700","border","border-slate-600","rounded-lg","text-white","text-sm",3,"ngModelChange","ngModel"],["value","high_intent_conversion"],["value","product_introduction"],["value","objection_handling"],["value","custom"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","font-semibold","text-slate-400"],[1,"px-2","py-1","bg-purple-500/20","text-purple-400","rounded","text-xs","hover:bg-purple-500/30",3,"click"],[1,"space-y-2"],[1,"p-3","rounded-lg","cursor-pointer","transition-all",3,"bg-purple-500/20","border-purple-500","border","bg-slate-700/50"],[1,"text-center","py-8","text-slate-500","text-sm"],[1,"flex-1","p-6","overflow-y-auto"],[1,"flex","flex-col","items-center","justify-center","h-full","text-slate-500"],[1,"w-80","border-l","border-slate-700","p-4","bg-slate-900/50","overflow-y-auto"],[1,"p-6","border-t","border-slate-700","flex","items-center","justify-between"],[1,"flex","items-center","gap-4","text-sm","text-slate-400"],[1,"flex","gap-3"],[1,"px-6","py-2.5","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600","transition-colors",3,"click"],[1,"px-6","py-2.5","bg-gradient-to-r","from-purple-500","to-pink-500","text-white","rounded-lg","hover:opacity-90","transition-opacity","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"p-3","rounded-lg","cursor-pointer","transition-all",3,"click"],[1,"flex","items-center","justify-between","mb-1"],[1,"text-sm","font-medium"],[1,"text-red-400","hover:text-red-300","opacity-0","group-hover:opacity-100",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],[1,"text-xs","text-slate-500"],[1,"flex","items-center","gap-4","mb-4"],["type","text","placeholder","\u968E\u6BB5\u540D\u7A31",1,"px-4","py-2","bg-slate-700","border","border-slate-600","rounded-lg","text-white","flex-1",3,"ngModelChange","ngModel"],[1,"px-3","py-2","bg-slate-700","border","border-slate-600","rounded-lg","text-white","text-sm",3,"ngModelChange","ngModel"],["value","time"],["value","message"],["value","keyword"],["value","manual"],[1,"flex","items-center","gap-2","text-sm","text-slate-400","mb-4"],[1,"space-y-4"],[1,"bg-slate-700/50","rounded-xl","p-4","border","border-slate-600/50"],[1,"w-full","py-3","border-2","border-dashed","border-slate-600","rounded-xl","text-slate-400","hover:border-purple-500","hover:text-purple-400","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["type","number","min","0",1,"w-20","px-2","py-1","bg-slate-700","border","border-slate-600","rounded","text-white","text-center",3,"ngModelChange","ngModel"],["type","text","placeholder","\u8CFC\u8CB7, \u50F9\u683C, \u512A\u60E0",1,"flex-1","px-2","py-1","bg-slate-700","border","border-slate-600","rounded","text-white",3,"ngModelChange","ngModel"],[1,"flex","items-start","gap-4"],[1,"w-28"],[1,"w-full","px-2","py-1.5","bg-slate-600","border","border-slate-500","rounded","text-white","text-sm",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex-1"],[1,"flex","items-center","gap-2","mb-2"],[1,"px-2","py-1","bg-slate-600","border","border-slate-500","rounded","text-white","text-xs",3,"ngModelChange","ngModel"],["value","text"],["value","ai_generate"],["value","template"],[1,"flex","items-center","gap-2","text-xs","text-slate-400"],["type","number","min","0",1,"w-12","px-1","py-0.5","bg-slate-600","border","border-slate-500","rounded","text-white","text-center",3,"ngModelChange","ngModel"],["rows","2","placeholder","AI \u751F\u6210\u6307\u4EE4\uFF0C\u5982\uFF1A\u6839\u64DA\u5C0D\u8A71\u4E0A\u4E0B\u6587\u56DE\u7B54\u5BA2\u6236\u554F\u984C...",1,"w-full","px-3","py-2","bg-slate-600","border","border-slate-500","rounded-lg","text-white","text-sm","resize-none",3,"ngModel"],[1,"text-red-400","hover:text-red-300","mt-1",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["rows","2","placeholder","\u8F38\u5165\u6D88\u606F\u5167\u5BB9...",1,"w-full","px-3","py-2","bg-slate-600","border","border-slate-500","rounded-lg","text-white","text-sm","resize-none",3,"ngModelChange","ngModel"],[1,"text-xs","text-slate-500","mt-1"],["rows","2","placeholder","AI \u751F\u6210\u6307\u4EE4\uFF0C\u5982\uFF1A\u6839\u64DA\u5C0D\u8A71\u4E0A\u4E0B\u6587\u56DE\u7B54\u5BA2\u6236\u554F\u984C...",1,"w-full","px-3","py-2","bg-slate-600","border","border-slate-500","rounded-lg","text-white","text-sm","resize-none",3,"ngModelChange","ngModel"],[1,"text-5xl","mb-4"],[1,"text-lg","mb-2"],[1,"text-sm"],[1,"text-sm","font-semibold","text-slate-400","mb-4"],[1,"space-y-3"],[1,"mb-4"],[1,"text-xs","text-purple-400","mb-2"],[1,"flex","gap-2","mb-2"],[1,"w-8","h-8","rounded-full","bg-gradient-to-br","from-purple-500","to-pink-500","flex","items-center","justify-center","text-white","text-xs","flex-shrink-0"],[1,"text-xs","text-slate-400","mb-0.5"],[1,"bg-slate-700","rounded-lg","px-3","py-2","text-sm","text-white"],[1,"text-purple-400"]],template:function(e,n){if(e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3)(4,"span",4),a(5,"\u{1F4DD}"),o(),a(6),o(),i(7,"div",5)(8,"button",6),g("click",function(){return n.togglePreview()}),i(9,"span"),a(10,"\u{1F441}"),o(),a(11),o(),i(12,"button",7),g("click",function(){return n.cancel()}),j(),i(13,"svg",8),R(14,"path",9),o()()()(),z(),i(15,"div",10)(16,"div",11)(17,"div",12)(18,"h4",13),a(19,"\u5287\u672C\u4FE1\u606F"),o(),i(20,"div",14)(21,"label",15),a(22,"\u5287\u672C\u540D\u7A31"),o(),i(23,"input",16),$("ngModelChange",function(u){return G(n.editData.name,u)||(n.editData.name=u),u}),o()(),i(24,"div",14)(25,"label",15),a(26,"\u63CF\u8FF0"),o(),i(27,"textarea",17),$("ngModelChange",function(u){return G(n.editData.description,u)||(n.editData.description=u),u}),a(28,"                "),o()(),i(29,"div")(30,"label",15),a(31,"\u9069\u7528\u5834\u666F"),o(),i(32,"select",18),$("ngModelChange",function(u){return G(n.editData.scenario,u)||(n.editData.scenario=u),u}),i(33,"option",19),a(34,"\u9AD8\u610F\u5411\u8F49\u5316"),o(),i(35,"option",20),a(36,"\u7522\u54C1\u4ECB\u7D39"),o(),i(37,"option",21),a(38,"\u7570\u8B70\u8655\u7406"),o(),i(39,"option",22),a(40,"\u81EA\u5B9A\u7FA9"),o()()()(),i(41,"div")(42,"div",23)(43,"h4",24),a(44,"\u968E\u6BB5\u5217\u8868"),o(),i(45,"button",25),g("click",function(){return n.addStage()}),a(46," + \u6DFB\u52A0 "),o()(),i(47,"div",26),F(48,Ut,9,15,"div",27,Ve),h(50,Wt,2,0,"div",28),o()()(),i(51,"div",29),h(52,Jt,21,4)(53,Xt,7,0,"div",30),o(),h(54,on,6,0,"div",31),o(),i(55,"div",32)(56,"div",33)(57,"span"),a(58),o(),i(59,"span"),a(60),o()(),i(61,"div",34)(62,"button",35),g("click",function(){return n.cancel()}),a(63," \u53D6\u6D88 "),o(),i(64,"button",36),g("click",function(){return n.save()}),a(65),o()()()()()),e&2){let r;s(6),x(" ",n.isNew()?"\u5275\u5EFA\u65B0\u5287\u672C":"\u7DE8\u8F2F\u5287\u672C"," "),s(5),x(" ",n.showPreview()?"\u95DC\u9589\u9810\u89BD":"\u9810\u89BD"," "),s(12),N("ngModel",n.editData.name),s(4),N("ngModel",n.editData.description),s(5),N("ngModel",n.editData.scenario),s(16),A(n.editData.stages),s(2),b(n.editData.stages.length===0?50:-1),s(2),b((r=n.currentStage())?52:53,r),s(2),b(n.showPreview()?54:-1),s(4),x("",n.editData.stages.length," \u500B\u968E\u6BB5"),s(2),x("",n.getTotalMessages()," \u689D\u6D88\u606F"),s(4),L("disabled",!n.isFormValid()),s(),x(" ",n.isNew()?"\u5275\u5EFA\u5287\u672C":"\u4FDD\u5B58\u5287\u672C"," ")}},dependencies:[K,ne,ye,Se,le,Fe,Ae,se,ke,ue],encapsulation:2})}};var rn=["conversationContainer"],Qe=()=>[],an=(l,t)=>t.date,te=(l,t)=>t.id,lt=(l,t)=>t.timestamp;function ln(l,t){if(l&1){let e=y();i(0,"div",2)(1,"div",50)(2,"div",51)(3,"div",52),a(4," \u{1F3AF} "),o(),i(5,"div",53)(6,"div",54),a(7,"\u9AD8\u8F49\u5316\u4FE1\u865F!"),o(),i(8,"div",55)(9,"span",56),a(10),o()(),i(11,"div",57),a(12),o(),i(13,"div",58)(14,"button",59),g("click",function(){c(e);let r=d();return m(r.focusOnUser(r.conversionAlertData().userId))}),a(15," \u67E5\u770B\u5C0D\u8A71 "),o(),i(16,"button",60),g("click",function(){c(e);let r=d();return m(r.dismissConversionAlert())}),a(17," \u95DC\u9589 "),o()()(),i(18,"button",61),g("click",function(){c(e);let r=d();return m(r.dismissConversionAlert())}),j(),i(19,"svg",62),R(20,"path",63),o()()()()()}if(l&2){let e,n,r=d();s(10),_((e=r.conversionAlertData())==null?null:e.userName),s(2),_((n=r.conversionAlertData())==null?null:n.signal)}}function sn(l,t){l&1&&(i(0,"span",15),R(1,"span",64),a(2," AI \u5DF2\u9023\u63A5 "),o())}function un(l,t){l&1&&(i(0,"span",16),a(1," \u672A\u914D\u7F6E AI "),o())}function dn(l,t){l&1&&R(0,"span",71)}function cn(l,t){if(l&1){let e=y();i(0,"button",109),g("click",function(){c(e);let r=d().$implicit,u=d(2);return m(u.pauseUnifiedTask(r.id))}),a(1," \u66AB\u505C "),o()}}function mn(l,t){if(l&1){let e=y();i(0,"button",110),g("click",function(){c(e);let r=d().$implicit,u=d(2);return m(u.startUnifiedTask(r.id))}),a(1," \u555F\u52D5 "),o()}}function pn(l,t){if(l&1&&(i(0,"div",49)(1,"div",96)(2,"div",97)(3,"div",98),a(4),o(),i(5,"div")(6,"div",99),a(7),o(),i(8,"div",100)(9,"span"),a(10),o(),i(11,"span",101),a(12,"\xB7"),o(),i(13,"span"),a(14),o(),i(15,"span",101),a(16,"\xB7"),o(),i(17,"span",102),a(18),o()()()(),i(19,"div",97)(20,"div",103)(21,"div",104),a(22),o(),i(23,"div",105),a(24,"\u8F49\u5316\u7387"),o()(),i(25,"span",106),a(26),o(),i(27,"div",25),h(28,cn,2,0,"button",107)(29,mn,2,0,"button",108),o()()()()),l&2){let e=t.$implicit,n=d(2);s(3),E("bg-emerald-500/20",e.status==="running")("bg-purple-500/20",e.status==="completed")("bg-slate-700",e.status==="draft"||e.status==="paused"),s(),x(" ",n.getGoalIcon(e.goalType)," "),s(3),_(e.name),s(3),_(n.getGoalLabel(e.goalType)),s(4),x("",e.stats.totalContacts," \u76EE\u6A19"),s(4),x("",e.stats.converted," \u8F49\u5316"),s(3),E("text-emerald-400",e.stats.conversionRate>=20)("text-amber-400",e.stats.conversionRate>=10&&e.stats.conversionRate<20)("text-slate-400",e.stats.conversionRate<10),s(),x(" ",e.stats.conversionRate||0,"% "),s(3),E("bg-emerald-500/20",e.status==="running")("text-emerald-400",e.status==="running")("bg-purple-500/20",e.status==="completed")("text-purple-400",e.status==="completed")("bg-yellow-500/20",e.status==="paused")("text-yellow-400",e.status==="paused")("bg-slate-600",e.status==="draft")("text-slate-300",e.status==="draft"),s(),x(" ",n.getTaskStatusLabel(e.status)," "),s(2),b(e.status==="running"?28:e.status==="paused"||e.status==="draft"?29:-1)}}function gn(l,t){if(l&1){let e=y();i(0,"div",46)(1,"div",111),a(2,"\u{1F4CB}"),o(),i(3,"div"),a(4,"\u66AB\u7121\u71DF\u92B7\u4EFB\u52D9"),o(),i(5,"button",112),g("click",function(){c(e);let r=d(2);return m(r.goToSmartMarketingHub())}),a(6," \u{1F680} \u5275\u5EFA\u7B2C\u4E00\u500B\u4EFB\u52D9 "),o()()}}function xn(l,t){if(l&1){let e=y();i(0,"div",65)(1,"div",66)(2,"div",67),a(3),o(),i(4,"div",68),a(5,"\u7E3D\u4EFB\u52D9\u6578"),o()(),i(6,"div",69)(7,"div",30)(8,"div",70),a(9),o(),h(10,dn,1,0,"span",71),o(),i(11,"div",68),a(12,"\u57F7\u884C\u4E2D"),o()(),i(13,"div",72)(14,"div",73),a(15),o(),i(16,"div",68),a(17,"\u7E3D\u63A5\u89F8"),o()(),i(18,"div",74)(19,"div",75),a(20),o(),i(21,"div",68),a(22,"\u7E3D\u8F49\u5316"),o()(),i(23,"div",76)(24,"div",77),a(25),o(),i(26,"div",68),a(27,"\u8F49\u5316\u7387"),o(),i(28,"div",78),R(29,"div",79),o()(),i(30,"div",80)(31,"div",81),a(32),o(),i(33,"div",68),a(34,"\u6D88\u606F\u767C\u9001"),o()()(),i(35,"div",82)(36,"div",23)(37,"h3",83)(38,"span"),a(39,"\u{1F9E0}"),o(),a(40," AI \u7CFB\u7D71\u72C0\u614B "),o(),i(41,"div",84),a(42," \u4ECA\u65E5\u7D71\u8A08 "),o()(),i(43,"div",85)(44,"div",86)(45,"div",87),a(46),o(),i(47,"div",88),a(48,"\u5C0D\u8A71\u6578"),o()(),i(49,"div",86)(50,"div",89),a(51),o(),i(52,"div",88),a(53,"\u610F\u5716\u8B58\u5225"),o()(),i(54,"div",86)(55,"div",90),a(56),o(),i(57,"div",88),a(58,"AI \u8F49\u5316"),o()(),i(59,"div",86)(60,"div",91),a(61),o(),i(62,"div",88),a(63,"\u97FF\u61C9\u6642\u9593"),o()(),i(64,"div",86)(65,"div",92),a(66),o(),i(67,"div",88),a(68,"AI \u6210\u672C"),o()()()(),i(69,"div",38)(70,"div",93)(71,"h3",83)(72,"span"),a(73,"\u{1F4CB}"),o(),a(74," \u71DF\u92B7\u4EFB\u52D9 "),o(),i(75,"div",30)(76,"span",43),a(77),o(),i(78,"button",94),g("click",function(){c(e);let r=d();return m(r.goToSmartMarketingHub())}),a(79," + \u65B0\u5EFA\u4EFB\u52D9 "),o()()(),i(80,"div",95),F(81,pn,30,36,"div",49,te),h(83,gn,7,0,"div",46),o()()}if(l&2){let e=d();s(3),_(e.unifiedStats().totalTasks),s(6),_(e.unifiedStats().activeTasks),s(),b(e.unifiedStats().activeTasks>0?10:-1),s(5),_(e.unifiedStats().totalContacted),s(5),_(e.unifiedStats().totalConverted),s(5),x("",e.unifiedConversionRate(),"%"),s(4),H("width",e.unifiedConversionRate(),"%"),s(3),_(e.unifiedStats().totalMessagesSent),s(14),_(e.aiStats().today.conversations),s(5),_(e.aiStats().today.intentsRecognized),s(5),_(e.aiStats().today.conversions),s(5),x("",e.aiStats().today.avgResponseTime,"ms"),s(5),x("\xA5",e.aiStats().today.cost.toFixed(2)),s(11),x("",e.unifiedTasks().length," \u500B\u4EFB\u52D9"),s(4),A(e.unifiedTasks().slice(0,10)),s(2),b(e.unifiedTasks().length===0?83:-1)}}function _n(l,t){l&1&&R(0,"span",71)}function Cn(l,t){if(l&1&&(i(0,"div",17)(1,"div",66)(2,"div",113),a(3),o(),i(4,"div",68),a(5,"\u7E3D\u7FA4\u7D44\u6578"),o(),i(6,"div",114),a(7),o()(),i(8,"div",69)(9,"div",30)(10,"div",115),a(11),o(),h(12,_n,1,0,"span",71),o(),i(13,"div",68),a(14,"\u6D3B\u8E8D\u5354\u4F5C"),o(),i(15,"div",116),a(16," \u904B\u884C\u4E2D "),o()(),i(17,"div",72)(18,"div",117),a(19),o(),i(20,"div",68),a(21,"\u5DF2\u5B8C\u6210"),o(),i(22,"div",118),a(23," \u6B77\u53F2\u7D2F\u8A08 "),o()(),i(24,"div",74)(25,"div",119),a(26),o(),i(27,"div",68),a(28,"\u6210\u529F\u8F49\u5316"),o(),i(29,"div",120),a(30),o()(),i(31,"div",76)(32,"div",121),a(33),ge(34,"number"),o(),i(35,"div",68),a(36,"\u8F49\u5316\u7387"),o(),i(37,"div",122),R(38,"div",123),o()()()),l&2){let e=d();s(3),_(e.stats().totalGroups),s(4),x(" \u4ECA\u65E5 +",e.stats().todayGroups," "),s(4),_(e.stats().activeGroups),s(),b(e.stats().activeGroups>0?12:-1),s(7),_(e.stats().completedGroups),s(7),_(e.stats().totalConversions),s(4),x(" \u4ECA\u65E5 +",e.stats().todayConversions," "),s(3),x("",be(34,10,e.stats().conversionRate,"1.1-1"),"%"),s(5),H("width",e.stats().conversionRate,"%")}}function vn(l,t){if(l&1){let e=y();i(0,"button",110),g("click",function(){c(e);let r=d(2);return m(r.resumeExecution())}),a(1," \u25B6\uFE0F \u6062\u5FA9 "),o()}}function fn(l,t){if(l&1){let e=y();i(0,"button",143),g("click",function(){c(e);let r=d(2);return m(r.pauseExecution())}),a(1," \u23F8\uFE0F \u66AB\u505C "),o()}}function hn(l,t){l&1&&R(0,"div",149)}function bn(l,t){if(l&1&&(i(0,"div",146),R(1,"div",147),i(2,"div",148),a(3),o()(),h(4,hn,1,0,"div",149)),l&2){let e=t.$implicit,n=t.$index,r=t.$count,u=d(3);s(),E("bg-emerald-500",u.isStageCompleted(e.id))("bg-purple-500",u.isCurrentStage(e.id))("bg-slate-700",!u.isStageCompleted(e.id)&&!u.isCurrentStage(e.id)),s(),E("text-emerald-400",u.isStageCompleted(e.id))("text-purple-400",u.isCurrentStage(e.id))("text-slate-500",!u.isStageCompleted(e.id)&&!u.isCurrentStage(e.id)),s(),x(" ",e.label," "),s(),b(n!==r-1?4:-1)}}function yn(l,t){if(l&1&&(i(0,"div",135)(1,"div",144),a(2,"\u8F49\u5316\u6F0F\u6597"),o(),i(3,"div",145),F(4,bn,5,14,null,null,te),o()()),l&2){let e=d(2);s(4),A(e.conversionStages)}}function Sn(l,t){if(l&1){let e=y();i(0,"div",154)(1,"div",30),R(2,"span",157),i(3,"span",158),a(4),o()(),i(5,"div",25)(6,"button",159),g("click",function(){c(e);let r=d(3);return m(r.skipCurrentUser())}),a(7," \u8DF3\u904E "),o(),i(8,"button",160),g("click",function(){c(e);let r=d(3);return m(r.markAsConverted())}),a(9," \u6A19\u8A18\u8F49\u5316 "),o()()()}if(l&2){let e,n=d(3);s(4),x("\u6B63\u5728\u8655\u7406\uFF1A",(e=n.queueProgress())==null||e.current==null?null:e.current.name)}}function En(l,t){if(l&1&&(i(0,"span",163),a(1),o()),l&2){let e=d(4);s(),x(" \u{1F3AF} \u8F49\u5316 ",e.getResultCount("converted")," ")}}function wn(l,t){if(l&1&&(i(0,"span",164),a(1),o()),l&2){let e=d(4);s(),x(" \u2B50 \u6709\u8208\u8DA3 ",e.getResultCount("interested")," ")}}function Dn(l,t){if(l&1&&(i(0,"span",165),a(1),o()),l&2){let e=d(4);s(),x(" \u{1F610} \u4E2D\u7ACB ",e.getResultCount("neutral")," ")}}function Fn(l,t){if(l&1&&(i(0,"span",166),a(1),o()),l&2){let e=d(4);s(),x(" \u274C \u62D2\u7D55 ",e.getResultCount("rejected")," ")}}function An(l,t){if(l&1&&(i(0,"span",167),a(1),o()),l&2){let e=d(4);s(),x(" \u{1F4A4} \u7121\u56DE\u61C9 ",e.getResultCount("no_response")," ")}}function kn(l,t){if(l&1){let e=y();i(0,"div",156)(1,"div",161),a(2,"\u8655\u7406\u7D50\u679C"),o(),i(3,"div",162),h(4,En,2,1,"span",163),h(5,wn,2,1,"span",164),h(6,Dn,2,1,"span",165),h(7,Fn,2,1,"span",166),h(8,An,2,1,"span",167),o(),i(9,"button",168),g("click",function(){c(e);let r=d(3);return m(r.showResultsPanel.set(!0))}),a(10," \u67E5\u770B\u8A73\u7D30\u7D50\u679C \u2192 "),o()()}if(l&2){let e=d(3);s(4),b(e.getResultCount("converted")>0?4:-1),s(),b(e.getResultCount("interested")>0?5:-1),s(),b(e.getResultCount("neutral")>0?6:-1),s(),b(e.getResultCount("rejected")>0?7:-1),s(),b(e.getResultCount("no_response")>0?8:-1)}}function Mn(l,t){if(l&1&&(i(0,"div",136)(1,"div",137)(2,"div",43),a(3,"\u968A\u5217\u9032\u5EA6"),o(),i(4,"div",150),a(5),i(6,"span",151),a(7),o()()(),i(8,"div",152),R(9,"div",153),o(),h(10,Sn,10,1,"div",154),i(11,"div",155),a(12),o(),h(13,kn,11,5,"div",156),o()),l&2){let e,n,r,u,p,f,S=d(2);s(5),J(" ",(e=S.queueProgress())==null?null:e.processed,"/",(e=S.queueProgress())==null?null:e.total," "),s(2),x("(",(n=S.queueProgress())==null?null:n.progress,"%)"),s(2),H("width",((r=S.queueProgress())==null?null:r.progress)||0,"%"),s(),b((u=S.queueProgress())!=null&&u.current?10:-1),s(2),x(" \u5F85\u8655\u7406\uFF1A",(p=S.queueProgress())==null?null:p.pending," \u4EBA "),s(),b((f=S.queueProgress())!=null&&f.completed&&S.queueProgress().completed.length>0?13:-1)}}function Tn(l,t){if(l&1&&(i(0,"span",169),R(1,"span",171),a(2),o()),l&2){let e=t.$implicit;s(),E("bg-green-500",e.intentScore>=60)("bg-amber-500",e.intentScore>=40&&e.intentScore<60)("bg-slate-500",e.intentScore<40),s(),x(" ",e.firstName||e.username||e.id," ")}}function Rn(l,t){if(l&1&&(i(0,"span",170),a(1),o()),l&2){let e=d(3);s(),x(" +",e.currentExecution().targetUsers.length-10," \u66F4\u591A ")}}function In(l,t){if(l&1&&(i(0,"div",130)(1,"div",144),a(2,"\u76EE\u6A19\u7528\u6236"),o(),i(3,"div",162),F(4,Tn,3,7,"span",169,te),h(6,Rn,2,1,"span",170),o()()),l&2){let e=d(2);s(4),A(e.currentExecution().targetUsers.slice(0,10)),s(2),b(e.currentExecution().targetUsers.length>10?6:-1)}}function Pn(l,t){if(l&1&&(i(0,"div",173)(1,"div",174),a(2),o(),i(3,"div",175)(4,"div",176),a(5),o(),i(6,"div",177),a(7),o()()()),l&2){let e=t.$implicit;E("bg-slate-700/50",!e.isFromCustomer)("bg-emerald-500/10",e.isFromCustomer),s(),E("bg-purple-500/30",!e.isFromCustomer)("text-purple-400",!e.isFromCustomer)("bg-emerald-500/30",e.isFromCustomer)("text-emerald-400",e.isFromCustomer),s(),x(" ",e.isFromCustomer?"\u{1F464}":"\u{1F916}"," "),s(3),x(" ",e.isFromCustomer?"\u5BA2\u6236":e.role," "),s(2),_(e.content)}}function Bn(l,t){if(l&1&&(i(0,"div",141),F(1,Pn,8,15,"div",172,lt),o()),l&2){let e=d(2);s(),A(e.currentExecution().messageHistory.slice(-5).reverse())}}function Vn(l,t){l&1&&(i(0,"div",142),a(1,"\u66AB\u7121\u5C0D\u8A71\u8A18\u9304"),o())}function Nn(l,t){if(l&1){let e=y();i(0,"div",18)(1,"div",124)(2,"div",7),R(3,"span",125),i(4,"h3",24),a(5,"\u{1F916} AI \u5718\u968A\u57F7\u884C\u4E2D"),o(),i(6,"span",126),a(7),o()(),i(8,"div",30),h(9,vn,2,0,"button",108)(10,fn,2,0,"button",127),i(11,"button",128),g("click",function(){c(e);let r=d();return m(r.stopExecution())}),a(12," \u23F9\uFE0F \u505C\u6B62 "),o()()(),i(13,"div",129)(14,"div",130)(15,"div",131),a(16,"\u71DF\u92B7\u76EE\u6A19"),o(),i(17,"div",132),a(18),o()(),i(19,"div",133)(20,"div",86)(21,"div",89),a(22),o(),i(23,"div",88),a(24,"\u5DF2\u767C\u9001"),o()(),i(25,"div",86)(26,"div",90),a(27),o(),i(28,"div",88),a(29,"\u5BA2\u6236\u56DE\u8986"),o()(),i(30,"div",86)(31,"div",87),a(32),ge(33,"number"),o(),i(34,"div",88),a(35,"\u56DE\u8986\u7387"),o()(),i(36,"div",86)(37,"div",134),a(38),o(),i(39,"div",88),a(40,"\u610F\u5411\u5206"),o()(),i(41,"div",86)(42,"div",87),a(43),o(),i(44,"div",88),a(45,"\u53C3\u8207\u89D2\u8272"),o()(),i(46,"div",86)(47,"div",92),a(48),o(),i(49,"div",88),a(50,"\u76EE\u6A19\u7528\u6236"),o()()(),h(51,yn,6,0,"div",135),h(52,Mn,14,8,"div",136),h(53,In,7,1,"div",130),i(54,"div")(55,"div",137)(56,"div",43),a(57,"\u6700\u8FD1\u5C0D\u8A71"),o(),i(58,"button",138),g("click",function(){c(e);let r=d();return m(r.toggleConversationPanel())}),a(59),j(),i(60,"svg",139),R(61,"path",140),o()()(),h(62,Bn,3,0,"div",141)(63,Vn,2,0,"div",142),o()()()}if(l&2){let e,n,r,u,p,f,S,M,k,U,w,O,X,_e,W=d();s(7),x(" ",((e=W.currentExecution())==null?null:e.mode)==="scriptless"?"\u7121\u5287\u672C":((e=W.currentExecution())==null?null:e.mode)==="hybrid"?"\u6DF7\u5408":"\u5287\u672C","\u6A21\u5F0F "),s(2),b(((n=W.currentExecution())==null?null:n.status)==="paused"?9:10),s(9),_((r=W.currentExecution())==null?null:r.goal),s(4),_(((u=W.currentExecution())==null||u.stats==null?null:u.stats.messagesSent)||0),s(5),_(((p=W.currentExecution())==null||p.stats==null?null:p.stats.responsesReceived)||0),s(5),x("",be(33,22,W.getReplyRate(),"1.0-0"),"%"),s(5),E("text-emerald-400",(((f=W.currentExecution())==null||f.stats==null?null:f.stats.interestScore)||0)>=60)("text-amber-400",(((S=W.currentExecution())==null||S.stats==null?null:S.stats.interestScore)||0)>=30&&(((S=W.currentExecution())==null||S.stats==null?null:S.stats.interestScore)||0)<60)("text-slate-400",(((M=W.currentExecution())==null||M.stats==null?null:M.stats.interestScore)||0)<30),s(),x(" ",((k=W.currentExecution())==null||k.stats==null?null:k.stats.interestScore)||0," "),s(5),_(((U=W.currentExecution())==null||U.roles==null?null:U.roles.length)||0),s(5),_(((w=W.currentExecution())==null||w.targetUsers==null?null:w.targetUsers.length)||0),s(3),b((O=W.currentExecution())!=null&&O.conversionFunnel?51:-1),s(),b(W.queueProgress()?52:-1),s(),b((X=W.currentExecution())!=null&&X.targetUsers&&W.currentExecution().targetUsers.length>0?53:-1),s(6),x(" ",W.showConversationPanel()?"\u6536\u8D77":"\u5C55\u958B\u5B8C\u6574\u5C0D\u8A71"," "),s(),E("rotate-180",W.showConversationPanel()),s(2),b((_e=W.currentExecution())!=null&&_e.messageHistory&&W.currentExecution().messageHistory.length>0?62:63)}}function Gn(l,t){if(l&1&&(i(0,"div",193)(1,"div",194),a(2),o(),i(3,"div",195)(4,"div",196),a(5),i(6,"span",197),a(7),o()(),i(8,"div",198),a(9),o()()()),l&2){let e=t.$implicit,n=d(2);E("flex-row-reverse",!e.isFromCustomer),s(),E("bg-purple-500/30",!e.isFromCustomer)("bg-emerald-500/30",e.isFromCustomer),s(),x(" ",e.isFromCustomer?"\u{1F464}":"\u{1F916}"," "),s(),E("bg-purple-500/20",!e.isFromCustomer)("bg-emerald-500/20",e.isFromCustomer),s(),E("text-purple-400",!e.isFromCustomer)("text-emerald-400",e.isFromCustomer),s(),x(" ",e.isFromCustomer?"\u5BA2\u6236":e.role," "),s(2),_(n.formatTime(e.timestamp)),s(2),_(e.content)}}function $n(l,t){l&1&&(i(0,"div",37)(1,"div",111),a(2,"\u{1F4AC}"),o(),i(3,"div"),a(4,"\u5C0D\u8A71\u5C1A\u672A\u958B\u59CB"),o()())}function Ln(l,t){if(l&1&&(i(0,"option",201),a(1),o()),l&2){let e=t.$implicit;L("value",e.id),s(),J("",e.name," (",e.type,")")}}function jn(l,t){if(l&1){let e=y();i(0,"div",189)(1,"label",199),a(2,"\u9078\u64C7\u89D2\u8272"),o(),i(3,"select",200),$("ngModelChange",function(r){c(e);let u=d(2);return G(u.manualSendRole,r)||(u.manualSendRole=r),m(r)}),F(4,Ln,2,3,"option",201,he),o()()}if(l&2){let e,n=d(2);s(3),N("ngModel",n.manualSendRole),s(),A(((e=n.currentExecution())==null?null:e.roles)||ve(1,Qe))}}function Un(l,t){if(l&1){let e=y();i(0,"div",192)(1,"div",202),a(2,"\u{1F4A1} AI \u5EFA\u8B70\uFF1A"),o(),i(3,"div",203),a(4),o(),i(5,"button",168),g("click",function(){c(e);let r=d(2);return m(r.useAiSuggestion())}),a(6," \u4F7F\u7528\u6B64\u5EFA\u8B70 "),o()()}if(l&2){let e=d(2);s(4),_(e.aiSuggestion())}}function Wn(l,t){if(l&1){let e=y();i(0,"div",19)(1,"div",178),g("click",function(){c(e);let r=d();return m(r.toggleConversationPanel())}),o(),i(2,"div",179)(3,"div",180)(4,"div",7)(5,"span",181),a(6,"\u{1F4AC}"),o(),i(7,"div")(8,"h3",24),a(9,"\u5B8C\u6574\u5C0D\u8A71\u8A18\u9304"),o(),i(10,"p",88),a(11),o()()(),i(12,"button",182),g("click",function(){c(e);let r=d();return m(r.toggleConversationPanel())}),j(),i(13,"svg",62),R(14,"path",63),o()()(),z(),i(15,"div",183,0),F(17,Gn,10,18,"div",184,lt),h(19,$n,5,0,"div",37),o(),i(20,"div",185)(21,"div",186)(22,"span",187),a(23),o(),i(24,"button",188),g("click",function(){c(e);let r=d();return m(r.toggleManualMode())}),a(25),o()(),h(26,jn,6,2,"div",189),i(27,"div",25)(28,"input",190),$("ngModelChange",function(r){c(e);let u=d();return G(u.manualMessage,r)||(u.manualMessage=r),m(r)}),g("keydown.enter",function(){c(e);let r=d();return m(r.sendManualMessage())}),o(),i(29,"button",191),g("click",function(){c(e);let r=d();return m(r.sendManualMessage())}),a(30," \u767C\u9001 "),o()(),h(31,Un,7,1,"div",192),o()()()}if(l&2){let e,n,r=d();s(11),_((e=r.currentExecution())==null?null:e.goal),s(6),A(r.currentExecution().messageHistory||ve(19,Qe)),s(2),b(!((n=r.currentExecution())==null||n.messageHistory==null)&&n.messageHistory.length?-1:19),s(3),E("bg-amber-500/20",r.isManualMode())("text-amber-400",r.isManualMode())("bg-emerald-500/20",!r.isManualMode())("text-emerald-400",!r.isManualMode()),s(),x(" ",r.isManualMode()?"\u{1F590}\uFE0F \u624B\u52D5\u6A21\u5F0F":"\u{1F916} AI \u81EA\u52D5\u6A21\u5F0F"," "),s(2),x(" ",r.isManualMode()?"\u5207\u63DB\u81EA\u52D5":"\u63A5\u7BA1\u5C0D\u8A71"," "),s(),b(r.isManualMode()?26:-1),s(2),L("placeholder",_t(r.isManualMode()?"\u8F38\u5165\u6D88\u606F\u4E26\u767C\u9001...":"\u555F\u7528\u624B\u52D5\u6A21\u5F0F\u5F8C\u53EF\u767C\u9001\u6D88\u606F")),N("ngModel",r.manualMessage),L("disabled",!r.isManualMode()),s(),L("disabled",!r.isManualMode()||!r.manualMessage.trim()),s(2),b(r.isManualMode()&&r.aiSuggestion()?31:-1)}}function qn(l,t){if(l&1&&(i(0,"tr",229)(1,"td",232),a(2),o(),i(3,"td",233)(4,"span",234),a(5),o()(),i(6,"td",235),a(7),o(),i(8,"td",236),a(9),o()()),l&2){let e=t.$implicit,n=d(2);s(2),_(e.name),s(2),E("bg-emerald-500/20",e.result==="converted")("text-emerald-400",e.result==="converted")("bg-amber-500/20",e.result==="interested")("text-amber-400",e.result==="interested")("bg-slate-500/20",e.result==="neutral")("text-slate-400",e.result==="neutral")("bg-red-500/20",e.result==="rejected")("text-red-400",e.result==="rejected")("bg-gray-500/20",e.result==="no_response")("text-gray-400",e.result==="no_response"),s(),x(" ",n.getResultLabel(e.result)," "),s(2),_(e.messagesExchanged),s(2),_(n.formatDuration(e.duration))}}function On(l,t){l&1&&(i(0,"div",37),a(1,"\u66AB\u7121\u5DF2\u5B8C\u6210\u7528\u6236"),o())}function Hn(l,t){if(l&1){let e=y();i(0,"div",20)(1,"div",178),g("click",function(){c(e);let r=d();return m(r.showResultsPanel.set(!1))}),o(),i(2,"div",204)(3,"div",180)(4,"div",7)(5,"span",181),a(6,"\u{1F4CA}"),o(),i(7,"h3",24),a(8,"\u968A\u5217\u57F7\u884C\u7D50\u679C"),o()(),i(9,"button",182),g("click",function(){c(e);let r=d();return m(r.showResultsPanel.set(!1))}),j(),i(10,"svg",62),R(11,"path",63),o()()(),z(),i(12,"div",205)(13,"div",206)(14,"div",207)(15,"div",90),a(16),o(),i(17,"div",208),a(18,"\u8F49\u5316\u6210\u529F"),o()(),i(19,"div",209)(20,"div",91),a(21),o(),i(22,"div",210),a(23,"\u6709\u8208\u8DA3"),o()(),i(24,"div",211)(25,"div",212),a(26),o(),i(27,"div",213),a(28,"\u4E2D\u7ACB"),o()(),i(29,"div",214)(30,"div",215),a(31),o(),i(32,"div",216),a(33,"\u62D2\u7D55"),o()(),i(34,"div",217)(35,"div",218),a(36),o(),i(37,"div",219),a(38,"\u7121\u56DE\u61C9"),o()()(),i(39,"div",220)(40,"div",53)(41,"div",131),a(42,"\u8F49\u5316\u7387"),o(),i(43,"div",221),R(44,"div",222),o()(),i(45,"div",90),a(46),ge(47,"number"),o()()(),i(48,"div",223)(49,"table",224)(50,"thead",225)(51,"tr")(52,"th",226),a(53,"\u7528\u6236"),o(),i(54,"th",226),a(55,"\u7D50\u679C"),o(),i(56,"th",227),a(57,"\u6D88\u606F\u6578"),o(),i(58,"th",227),a(59,"\u6642\u9577"),o()()(),i(60,"tbody",228),F(61,qn,10,24,"tr",229,te),o()(),h(63,On,2,0,"div",37),o(),i(64,"div",230)(65,"button",8),g("click",function(){c(e);let r=d();return m(r.exportResults())}),i(66,"span"),a(67,"\u{1F4E5}"),o(),a(68," \u5C0E\u51FA\u7D50\u679C "),o(),i(69,"button",231),g("click",function(){c(e);let r=d();return m(r.showResultsPanel.set(!1))}),a(70," \u95DC\u9589 "),o()()()()}if(l&2){let e,n,r=d();s(16),_(r.getResultCount("converted")),s(5),_(r.getResultCount("interested")),s(5),_(r.getResultCount("neutral")),s(5),_(r.getResultCount("rejected")),s(5),_(r.getResultCount("no_response")),s(8),H("width",r.getConversionRate(),"%"),s(2),x("",be(47,9,r.getConversionRate(),"1.1-1"),"%"),s(15),A(((e=r.queueProgress())==null?null:e.completed)||ve(12,Qe)),s(2),b(!((n=r.queueProgress())==null||n.completed==null)&&n.completed.length?-1:63)}}function zn(l,t){if(l&1&&(i(0,"div",28)(1,"div",237)(2,"div",238),a(3),o()(),i(4,"div",105),a(5),o()()),l&2){let e=t.$implicit,n=d();s(),H("height",n.Math.max(e.groups*10,4),"px"),E("bg-gradient-to-t",!0)("from-purple-600",!0)("to-purple-400",!0),s(2),x(" ",e.groups," "),s(2),_(e.label)}}function Qn(l,t){if(l&1&&(i(0,"div",7)(1,"div",239),a(2),o(),i(3,"div",175)(4,"div",240),a(5),o(),i(6,"div",105),a(7),o()(),i(8,"div",103)(9,"div",241),a(10),o(),i(11,"div",105),a(12,"\u6210\u529F\u7387"),o()()()),l&2){let e=t.$implicit,n=t.$index;s(),E("bg-amber-500",n===0)("text-amber-900",n===0)("bg-slate-600",n===1)("text-white",n===1)("bg-amber-700",n===2)("text-amber-200",n===2)("bg-slate-700",n>2)("text-slate-400",n>2),s(),x(" ",n+1," "),s(3),_(e.name),s(2),x("",e.usageCount," \u6B21\u4F7F\u7528"),s(3),x("",e.successRate,"%")}}function Kn(l,t){l&1&&(i(0,"div",37),a(1,"\u66AB\u7121\u6578\u64DA"),o())}function Yn(l,t){if(l&1){let e=y();i(0,"button",242),g("click",function(){c(e);let r=d();return m(r.openABTestPanel())}),i(1,"span"),a(2,"\u{1F4CA}"),o(),a(3),o()}if(l&2){let e=d();s(3),x(" \u5C0D\u6BD4 (",e.selectedForCompare().length,") ")}}function Jn(l,t){if(l&1){let e=y();i(0,"button",243),g("click",function(){c(e);let r=d();return m(r.clearCompareSelection())}),a(1," \u6E05\u9664\u9078\u64C7 "),o()}}function Xn(l,t){if(l&1){let e=y();i(0,"div",244),g("click",function(){let r=c(e).$implicit,u=d();return m(u.viewExecutionHistory(r))}),i(1,"div",96)(2,"div",7)(3,"input",245),g("click",function(r){return c(e),m(r.stopPropagation())})("change",function(){let r=c(e).$implicit,u=d();return m(u.toggleCompareSelection(r))}),o(),i(4,"div",246)(5,"span",247),a(6),o()(),i(7,"div")(8,"div",132),a(9),ge(10,"slice"),o(),i(11,"div",248)(12,"span"),a(13),ge(14,"date"),o(),i(15,"span"),a(16,"\u2022"),o(),i(17,"span"),a(18),o(),i(19,"span"),a(20,"\u2022"),o(),i(21,"span"),a(22),o()()()(),i(23,"div",97)(24,"div",103)(25,"div",249),a(26),o(),i(27,"div",105),a(28),o()(),i(29,"button",250),g("click",function(r){let u=c(e).$implicit;return d().viewExecutionHistory(u),m(r.stopPropagation())}),j(),i(30,"svg",9),R(31,"path",251)(32,"path",252),o()()()()()}if(l&2){let e=t.$implicit,n=d();s(3),L("checked",n.isSelectedForCompare(e)),s(),E("bg-emerald-500/20",e.status==="completed")("bg-red-500/20",e.status==="failed")("bg-slate-500/20",e.status==="idle"),s(2),x(" ",e.status==="completed"?"\u2705":e.status==="failed"?"\u274C":"\u23F8\uFE0F"," "),s(3),J("",ot(10,15,e.goal,0,40),"",e.goal.length>40?"...":""),s(4),_(be(14,19,e.stats.startTime,"MM/dd HH:mm")),s(5),_(e.mode==="scriptless"?"\u7121\u5287\u672C":e.mode==="hybrid"?"\u6DF7\u5408":"\u5287\u672C"),s(4),x("",(e.targetUsers==null?null:e.targetUsers.length)||0," \u76EE\u6A19"),s(4),x("",e.stats.messagesSent," \u6D88\u606F"),s(2),x("",e.stats.responsesReceived," \u56DE\u8986")}}function Zn(l,t){l&1&&(i(0,"div",46)(1,"div",111),a(2,"\u{1F4DD}"),o(),i(3,"div"),a(4,"\u66AB\u7121\u57F7\u884C\u6B77\u53F2"),o()())}function ei(l,t){if(l&1&&(i(0,"div",193)(1,"div",194),a(2),o(),i(3,"div",195)(4,"div",196),a(5),i(6,"span",197),a(7),o()(),i(8,"div",198),a(9),o()()()),l&2){let e=t.$implicit,n=d(2);E("flex-row-reverse",!e.isFromCustomer),s(),E("bg-purple-500/30",!e.isFromCustomer)("bg-emerald-500/30",e.isFromCustomer),s(),x(" ",e.isFromCustomer?"\u{1F464}":"\u{1F916}"," "),s(),E("bg-purple-500/20",!e.isFromCustomer)("bg-emerald-500/20",e.isFromCustomer),s(),E("text-purple-400",!e.isFromCustomer)("text-emerald-400",e.isFromCustomer),s(),x(" ",e.isFromCustomer?"\u5BA2\u6236":e.role," "),s(2),_(n.formatTime(e.timestamp)),s(2),_(e.content)}}function ti(l,t){l&1&&(i(0,"div",37)(1,"div",111),a(2,"\u{1F4AC}"),o(),i(3,"div"),a(4,"\u6B64\u6B21\u57F7\u884C\u7121\u5C0D\u8A71\u8A18\u9304"),o()())}function ni(l,t){if(l&1){let e=y();i(0,"div",20)(1,"div",178),g("click",function(){c(e);let r=d();return m(r.showHistoryPanel.set(!1))}),o(),i(2,"div",253)(3,"div",180)(4,"div",7)(5,"span",181),a(6,"\u{1F4DC}"),o(),i(7,"div")(8,"h3",24),a(9,"\u57F7\u884C\u6B77\u53F2\u56DE\u653E"),o(),i(10,"p",88),a(11),o()()(),i(12,"button",182),g("click",function(){c(e);let r=d();return m(r.showHistoryPanel.set(!1))}),j(),i(13,"svg",62),R(14,"path",63),o()()(),z(),i(15,"div",254)(16,"div",255)(17,"div",256),a(18),o(),i(19,"div",88),a(20,"\u5DF2\u767C\u9001"),o()(),i(21,"div",255)(22,"div",257),a(23),o(),i(24,"div",88),a(25,"\u5BA2\u6236\u56DE\u8986"),o()(),i(26,"div",255)(27,"div",258),a(28),o(),i(29,"div",88),a(30,"\u53C3\u8207\u89D2\u8272"),o()(),i(31,"div",255)(32,"div",259),a(33),o(),i(34,"div",88),a(35,"\u5206\u6790\u6B21\u6578"),o()(),i(36,"div",255)(37,"div",260),a(38),o(),i(39,"div",88),a(40,"\u76EE\u6A19\u7528\u6236"),o()()(),i(41,"div",261),F(42,ei,10,18,"div",184,lt),h(44,ti,5,0,"div",37),o(),i(45,"div",230)(46,"button",262),g("click",function(){c(e);let r=d();return m(r.rerunExecution(r.selectedHistory()))}),i(47,"span"),a(48,"\u{1F504}"),o(),a(49," \u4EE5\u6B64\u7B56\u7565\u91CD\u65B0\u57F7\u884C "),o(),i(50,"button",263),g("click",function(){c(e);let r=d();return m(r.showHistoryPanel.set(!1))}),a(51," \u95DC\u9589 "),o()()()()}if(l&2){let e,n,r,u,p,f,S,M,k=d();s(11),_((e=k.selectedHistory())==null?null:e.goal),s(7),_(((n=k.selectedHistory())==null||n.stats==null?null:n.stats.messagesSent)||0),s(5),_(((r=k.selectedHistory())==null||r.stats==null?null:r.stats.responsesReceived)||0),s(5),_(((u=k.selectedHistory())==null||u.roles==null?null:u.roles.length)||0),s(5),_(((p=k.selectedHistory())==null||p.stats==null?null:p.stats.analysisCount)||0),s(5),_(((f=k.selectedHistory())==null||f.targetUsers==null?null:f.targetUsers.length)||0),s(4),A(((S=k.selectedHistory())==null?null:S.messageHistory)||ve(7,Qe)),s(2),b(!((M=k.selectedHistory())==null||M.messageHistory==null)&&M.messageHistory.length?-1:44)}}function ii(l,t){if(l&1&&(i(0,"th",270)(1,"div",280)(2,"span",281),a(3),o(),i(4,"span",282),a(5),ge(6,"slice"),o()()()),l&2){let e=t.$implicit,n=t.$index;s(2),E("bg-purple-500/20",n===0)("text-purple-400",n===0)("bg-cyan-500/20",n===1)("text-cyan-400",n===1)("bg-amber-500/20",n===2)("text-amber-400",n===2),s(),x(" \u7B56\u7565 ",n+1," "),s(2),x("",ot(6,14,e.goal,0,20),"...")}}function oi(l,t){if(l&1&&(i(0,"td",273),a(1),o()),l&2){let e=t.$implicit;s(),x(" ",e.mode==="scriptless"?"\u7121\u5287\u672C":e.mode==="hybrid"?"\u6DF7\u5408":"\u5287\u672C"," ")}}function ri(l,t){if(l&1&&(i(0,"td",273),a(1),o()),l&2){let e=t.$implicit;s(),_((e.targetUsers==null?null:e.targetUsers.length)||0)}}function ai(l,t){if(l&1&&(i(0,"td",283),a(1),o()),l&2){let e=t.$implicit,n=t.$index,r=d(2);E("text-emerald-400",r.isHighestValue("messagesSent",n))("text-white",!r.isHighestValue("messagesSent",n)),s(),x(" ",e.stats.messagesSent," ")}}function li(l,t){if(l&1&&(i(0,"td",283),a(1),o()),l&2){let e=t.$implicit,n=t.$index,r=d(2);E("text-emerald-400",r.isHighestValue("responsesReceived",n))("text-white",!r.isHighestValue("responsesReceived",n)),s(),x(" ",e.stats.responsesReceived," ")}}function si(l,t){if(l&1&&(i(0,"td",283),a(1),ge(2,"number"),o()),l&2){let e=t.$implicit,n=t.$index,r=d(2);E("text-emerald-400",r.isHighestValue("responseRate",n))("text-white",!r.isHighestValue("responseRate",n)),s(),x(" ",be(2,5,r.getResponseRate(e),"1.1-1"),"% ")}}function ui(l,t){if(l&1&&(i(0,"td",273),a(1),o()),l&2){let e=t.$implicit;s(),_(e.stats.analysisCount||0)}}function di(l,t){if(l&1&&(i(0,"td",273),a(1),o()),l&2){let e=t.$implicit;s(),_((e.roles==null?null:e.roles.length)||0)}}function ci(l,t){if(l&1&&(i(0,"td",275),a(1),ge(2,"date"),o()),l&2){let e=t.$implicit;s(),x(" ",be(2,1,e.stats.startTime,"MM/dd HH:mm")," ")}}function mi(l,t){if(l&1){let e=y();i(0,"div",20)(1,"div",178),g("click",function(){c(e);let r=d();return m(r.showABTestPanel.set(!1))}),o(),i(2,"div",264)(3,"div",180)(4,"div",7)(5,"span",181),a(6,"\u{1F4CA}"),o(),i(7,"h3",24),a(8,"A/B \u6E2C\u8A66\u5C0D\u6BD4"),o(),i(9,"span",265),a(10),o()(),i(11,"button",182),g("click",function(){c(e);let r=d();return m(r.showABTestPanel.set(!1))}),j(),i(12,"svg",62),R(13,"path",63),o()()(),z(),i(14,"div",266)(15,"table",267)(16,"thead",268)(17,"tr")(18,"th",269),a(19,"\u6307\u6A19"),o(),F(20,ii,7,18,"th",270,te),o()(),i(22,"tbody",158)(23,"tr",271)(24,"td",272),a(25,"\u57F7\u884C\u6A21\u5F0F"),o(),F(26,oi,2,1,"td",273,te),o(),i(28,"tr",271)(29,"td",272),a(30,"\u76EE\u6A19\u7528\u6236"),o(),F(31,ri,2,1,"td",273,te),o(),i(33,"tr",271)(34,"td",272),a(35,"\u6D88\u606F\u767C\u9001"),o(),F(36,ai,2,5,"td",274,te),o(),i(38,"tr",271)(39,"td",272),a(40,"\u5BA2\u6236\u56DE\u8986"),o(),F(41,li,2,5,"td",274,te),o(),i(43,"tr",271)(44,"td",272),a(45,"\u56DE\u8986\u7387"),o(),F(46,si,3,8,"td",274,te),o(),i(48,"tr",271)(49,"td",272),a(50,"AI \u5206\u6790\u6B21\u6578"),o(),F(51,ui,2,1,"td",273,te),o(),i(53,"tr",271)(54,"td",272),a(55,"\u53C3\u8207\u89D2\u8272"),o(),F(56,di,2,1,"td",273,te),o(),i(58,"tr")(59,"td",272),a(60,"\u57F7\u884C\u6642\u9593"),o(),F(61,ci,3,4,"td",275,te),o()()()(),i(63,"div",276)(64,"div",277)(65,"span",247),a(66,"\u{1F3C6}"),o(),i(67,"span",132),a(68,"\u6700\u4F73\u7B56\u7565\uFF1A"),o(),i(69,"span",278),a(70),o()(),i(71,"p",43),a(72),o()(),i(73,"div",279)(74,"button",263),g("click",function(){c(e);let r=d();return m(r.showABTestPanel.set(!1))}),a(75," \u95DC\u9589 "),o()()()()}if(l&2){let e=d();s(10),x(" ",e.selectedForCompare().length," \u500B\u7B56\u7565 "),s(10),A(e.selectedForCompare()),s(6),A(e.selectedForCompare()),s(5),A(e.selectedForCompare()),s(5),A(e.selectedForCompare()),s(5),A(e.selectedForCompare()),s(5),A(e.selectedForCompare()),s(5),A(e.selectedForCompare()),s(5),A(e.selectedForCompare()),s(5),A(e.selectedForCompare()),s(9),x(" \u7B56\u7565 ",e.getBestStrategyIndex()+1," "),s(2),x(" \u57FA\u65BC\u56DE\u8986\u7387\u548C\u5BA2\u6236\u4E92\u52D5\u8868\u73FE\uFF0C\u7B56\u7565 ",e.getBestStrategyIndex()+1," \u8868\u73FE\u6700\u512A\u3002 \u5EFA\u8B70\u4F7F\u7528\u6B64\u7B56\u7565\u7684\u57F7\u884C\u6A21\u5F0F\u548C\u89D2\u8272\u914D\u7F6E\u3002 ")}}function pi(l,t){if(l&1){let e=y();i(0,"button",250),g("click",function(){c(e);let r=d().$implicit,u=d();return m(u.pauseGroup(r))}),j(),i(1,"svg",9),R(2,"path",291),o()()}}function gi(l,t){if(l&1){let e=y();i(0,"button",292),g("click",function(){c(e);let r=d().$implicit,u=d();return m(u.resumeGroup(r))}),j(),i(1,"svg",9),R(2,"path",293),o()()}}function xi(l,t){if(l&1){let e=y();i(0,"div",49)(1,"div",96)(2,"div",97)(3,"div",246),R(4,"span",284),o(),i(5,"div")(6,"div",99),a(7),o(),i(8,"div",43),a(9),o()()(),i(10,"div",285)(11,"div",286)(12,"div",287),a(13),o(),i(14,"div",105),a(15,"\u5DF2\u767C\u9001"),o()(),i(16,"div",286)(17,"div",288),a(18),o(),i(19,"div",105),a(20,"\u5BA2\u6236\u56DE\u8986"),o()(),i(21,"div",106),a(22),o(),i(23,"div",25),h(24,pi,3,0,"button",289),h(25,gi,3,0,"button",290),i(26,"button",250),g("click",function(){let r=c(e).$implicit,u=d();return m(u.viewGroupDetails(r))}),j(),i(27,"svg",9),R(28,"path",251)(29,"path",252),o()()()()()()}if(l&2){let e=t.$implicit,n=d();s(3),E("bg-emerald-500/20",e.status==="running")("bg-amber-500/20",e.status==="paused")("bg-cyan-500/20",e.status==="inviting"),s(),E("bg-emerald-500",e.status==="running")("animate-pulse",e.status==="running")("bg-amber-500",e.status==="paused")("bg-cyan-500",e.status==="inviting"),s(3),_(e.groupTitle),s(2),x(" \u5BA2\u6236: ",e.targetCustomer.firstName||e.targetCustomer.username||e.targetCustomer.id," "),s(4),_(e.messagesSent),s(5),_(e.customerMessages),s(3),E("bg-emerald-500/20",e.status==="running")("text-emerald-400",e.status==="running")("bg-amber-500/20",e.status==="paused")("text-amber-400",e.status==="paused")("bg-cyan-500/20",e.status==="inviting")("text-cyan-400",e.status==="inviting"),s(),x(" ",n.getStatusLabel(e.status)," "),s(2),b(e.status==="running"?24:-1),s(),b(e.status==="paused"?25:-1)}}function _i(l,t){l&1&&(i(0,"div",46)(1,"div",111),a(2,"\u{1F3AD}"),o(),i(3,"div"),a(4,"\u66AB\u7121\u6D3B\u8E8D\u7684\u5354\u4F5C\u7FA4\u7D44"),o()())}var ze=class l{constructor(){this.multiRoleService=I(de);this.autoGroupService=I(Ee);this.executorService=I(Te);this.dynamicEngine=I(We);this.ipc=I(ie);this.toast=I(xe);this.taskService=I(Et);this.aiService=I(wt);this.currentExecution=P(()=>{let t=this.dynamicEngine.currentExecution();return t?.status==="running"||t?.status==="paused"?t:null});this.queueProgress=P(()=>this.dynamicEngine.queueProgress());this.showConversationPanel=D(!1);this.isManualMode=D(!1);this.manualMessage="";this.manualSendRole="";this.aiSuggestion=D(null);this.showConversionAlert=D(!1);this.conversionAlertData=D(null);this.showResultsPanel=D(!1);this.showHistoryPanel=D(!1);this.selectedHistory=D(null);this.executionHistory=P(()=>this.dynamicEngine.executions());this.showABTestPanel=D(!1);this.selectedForCompare=D([]);this.conversionStages=[{id:"contact",label:"\u89F8\u9054"},{id:"response",label:"\u56DE\u8986"},{id:"interest",label:"\u8208\u8DA3"},{id:"intent",label:"\u610F\u5411"},{id:"conversion",label:"\u8F49\u5316"}];this.ipcCleanup=[];this.unifiedTasks=P(()=>this.taskService.tasks());this.activeUnifiedTasks=P(()=>this.taskService.activeTasks());this.unifiedStats=P(()=>this.taskService.getOverallStats());this.unifiedTodayStats=P(()=>this.taskService.todayStats());this.tasksByGoal=P(()=>this.taskService.tasksByGoal());this.unifiedConversionRate=P(()=>this.taskService.overallConversionRate());this.aiStats=P(()=>this.aiService.stats());this.aiConnected=P(()=>this.aiService.isConnected());this.viewMode=D("unified");this.isRefreshing=D(!1);this.lastUpdate=D(new Date);this.chartPeriod=D("week");this.stats=D({totalGroups:0,activeGroups:0,completedGroups:0,totalConversions:0,conversionRate:0,totalMessagesSent:0,avgMessagesPerGroup:0,todayGroups:0,todayConversions:0});this.chartData=D([]);this.topRoles=P(()=>this.multiRoleService.roles().map(e=>B(T({},e),{successRate:e.usageCount&&e.usageCount>0?Math.round((e.successCount||0)/e.usageCount*100):0})).sort((e,n)=>n.successRate-e.successRate).slice(0,5));this.activeGroups=P(()=>this.autoGroupService.groups().filter(t=>["creating","inviting","running","paused"].includes(t.status)));this.refreshInterval=null;this.Math=Math}ngOnInit(){this.refreshData(),setTimeout(()=>{this.dynamicEngine.restoreExecutions().catch(t=>{console.warn("[CollabDashboard] \u6062\u5FA9\u57F7\u884C\u72C0\u614B\u5931\u6557:",t)})},2e3),this.refreshInterval=setInterval(()=>{this.refreshData()},5e3),this.ipcCleanup.push(this.ipc.on("ai-team:conversion-signal",t=>{this.showConversionNotification(t)})),this.ipcCleanup.push(this.ipc.on("ai-team:suggestion-update",t=>{this.isManualMode()&&this.aiSuggestion.set(t.suggestion)})),this.ipcCleanup.push(this.ipc.on("ai-team:message-sent",t=>{console.log("[CollabDashboard] \u6536\u5230\u6D88\u606F\u767C\u9001\u4E8B\u4EF6:",t),this.refreshData()})),this.ipcCleanup.push(this.ipc.on("ai-team:private-message-sent",t=>{console.log("[CollabDashboard] \u6536\u5230\u79C1\u804A\u6D88\u606F\u4E8B\u4EF6:",t);let e=this.dynamicEngine.currentExecution();e&&t.executionId===e.id&&t.success&&(e.messageHistory?.find(r=>r.content===t.content&&!r.isFromCustomer)||(console.log("[CollabDashboard] \u{1F4E4} \u6DFB\u52A0 AI \u6D88\u606F\u5230\u6B77\u53F2:",t.content?.substring(0,30)),e.messageHistory||(e.messageHistory=[]),e.messageHistory.push({role:t.roleName||"AI",content:t.content,timestamp:new Date().toISOString(),isFromCustomer:!1}),this.dynamicEngine.forceUpdateExecution(e)),this.scrollToBottom()),this.refreshData()})),this.ipcCleanup.push(this.ipc.on("ai-team:customer-reply",t=>{console.log("[CollabDashboard] \u6536\u5230\u5BA2\u6236\u56DE\u8986:",t);let e=this.dynamicEngine.currentExecution();e&&t.executionId===e.id&&(e.messageHistory?.find(r=>r.content===t.text&&r.isFromCustomer)||(console.log("[CollabDashboard] \u{1F4DD} \u6DFB\u52A0\u5BA2\u6236\u6D88\u606F\u5230\u6B77\u53F2:",t.text?.substring(0,30)),e.messageHistory||(e.messageHistory=[]),e.messageHistory.push({role:"customer",content:t.text,timestamp:new Date().toISOString(),isFromCustomer:!0}),this.dynamicEngine.forceUpdateExecution(e)),this.scrollToBottom()),this.refreshData()}))}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval),this.ipcCleanup.forEach(t=>t())}async refreshData(){this.isRefreshing.set(!0);try{let t=this.autoGroupService.statistics();this.stats.set({totalGroups:t.totalGroups,activeGroups:t.activeGroups,completedGroups:t.totalGroups-t.activeGroups-t.pendingRequests,totalConversions:t.successfulConversions,conversionRate:t.totalGroups>0?t.successfulConversions/t.totalGroups*100:0,totalMessagesSent:this.executorService.statistics().totalExecutions,avgMessagesPerGroup:t.totalGroups>0?this.executorService.statistics().totalExecutions/t.totalGroups:0,todayGroups:0,todayConversions:0}),this.generateChartData(),this.lastUpdate.set(new Date)}catch(t){console.error("Failed to refresh dashboard data:",t)}finally{this.isRefreshing.set(!1)}}generateChartData(){let t=this.chartPeriod()==="week"?7:30,e=[];for(let n=t-1;n>=0;n--){let r=new Date;r.setDate(r.getDate()-n),e.push({date:r.toISOString().split("T")[0],label:n===0?"\u4ECA\u5929":t===7?["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"][r.getDay()]:`${r.getMonth()+1}/${r.getDate()}`,groups:Math.floor(Math.random()*10),conversions:Math.floor(Math.random()*5)})}this.chartData.set(e)}getStatusLabel(t){return{creating:"\u5275\u5EFA\u4E2D",inviting:"\u9080\u8ACB\u4E2D",running:"\u9032\u884C\u4E2D",paused:"\u5DF2\u66AB\u505C",completed:"\u5DF2\u5B8C\u6210",failed:"\u5931\u6557"}[t]||t}pauseGroup(t){this.autoGroupService.pauseGroup(t.id),this.executorService.pauseExecution(t.id)}resumeGroup(t){this.autoGroupService.resumeGroup(t.id),this.executorService.resumeExecution(t.id)}viewGroupDetails(t){console.log("View group details:",t)}pauseExecution(){let t=this.currentExecution();t&&(this.dynamicEngine.pauseExecution(t.id),this.toast.info("\u23F8\uFE0F \u5DF2\u66AB\u505C AI \u5718\u968A\u57F7\u884C"))}resumeExecution(){let t=this.currentExecution();t&&(this.dynamicEngine.resumeExecution(t.id),this.isManualMode.set(!1),this.toast.success("\u25B6\uFE0F \u5DF2\u6062\u5FA9 AI \u5718\u968A\u57F7\u884C"))}stopExecution(){let t=this.currentExecution();t&&confirm("\u78BA\u5B9A\u8981\u505C\u6B62\u57F7\u884C\u55CE\uFF1F\u9019\u5C07\u7D50\u675F\u7576\u524D\u7684 AI \u5718\u968A\u4EFB\u52D9\u3002")&&(this.dynamicEngine.stopExecution(t.id),this.showConversationPanel.set(!1),this.isManualMode.set(!1),this.toast.info("\u23F9\uFE0F \u5DF2\u505C\u6B62 AI \u5718\u968A\u57F7\u884C"))}toggleConversationPanel(){this.showConversationPanel.update(t=>!t),this.showConversationPanel()&&setTimeout(()=>{this.scrollToBottom()},100)}scrollToBottom(){if(this.conversationContainer?.nativeElement){let t=this.conversationContainer.nativeElement;t.scrollTop=t.scrollHeight}}formatTime(t){return new Date(t).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"})}toggleManualMode(){let t=!this.isManualMode();this.isManualMode.set(t);let e=this.currentExecution();e&&(t?(this.dynamicEngine.pauseExecution(e.id),this.toast.info("\u{1F590}\uFE0F \u5DF2\u5207\u63DB\u5230\u624B\u52D5\u6A21\u5F0F\uFF0CAI \u5DF2\u66AB\u505C"),e.roles?.length&&(this.manualSendRole=e.roles[0].id),this.requestAiSuggestion()):(this.dynamicEngine.resumeExecution(e.id),this.aiSuggestion.set(null),this.toast.success("\u{1F916} \u5DF2\u5207\u63DB\u56DE AI \u81EA\u52D5\u6A21\u5F0F")))}requestAiSuggestion(){let t=this.currentExecution();t&&this.ipc.send("ai-team:request-suggestion",{executionId:t.id,messageHistory:t.messageHistory?.slice(-10),currentStage:t.conversionFunnel?.currentStage})}useAiSuggestion(){let t=this.aiSuggestion();t&&(this.manualMessage=t)}sendManualMessage(){if(!this.manualMessage.trim()||!this.isManualMode())return;let t=this.currentExecution();if(!t)return;let e=this.manualSendRole,n=t.roles?.find(r=>r.id===e);if(!n){this.toast.error("\u8ACB\u9078\u64C7\u4E00\u500B\u89D2\u8272");return}this.ipc.send("ai-team:send-manual-message",{executionId:t.id,roleId:e,roleName:n.name,content:this.manualMessage.trim(),targetUserId:t.targetUsers?.[0]?.id}),this.toast.success(`\u{1F4E4} \u5DF2\u4EE5 ${n.name} \u8EAB\u4EFD\u767C\u9001\u6D88\u606F`),this.manualMessage="",setTimeout(()=>{this.requestAiSuggestion()},1e3)}showConversionNotification(t){this.conversionAlertData.set({userId:t.userId,userName:t.userName,signal:t.signal}),this.showConversionAlert.set(!0),this.toast.success(`\u{1F3AF} \u9AD8\u8F49\u5316\u4FE1\u865F\uFF01${t.userName}: ${t.signal}`),setTimeout(()=>{this.showConversionAlert.set(!1)},5e3)}dismissConversionAlert(){this.showConversionAlert.set(!1)}focusOnUser(t){this.showConversationPanel.set(!0),this.showConversionAlert.set(!1),this.toast.info("\u5DF2\u5207\u63DB\u5230\u8A72\u7528\u6236\u7684\u5C0D\u8A71")}skipCurrentUser(){this.dynamicEngine.skipCurrentUser()&&this.toast.info("\u5DF2\u8DF3\u904E\u7576\u524D\u7528\u6236\uFF0C\u8655\u7406\u4E0B\u4E00\u500B")}markAsConverted(){this.dynamicEngine.completeCurrentUser("converted")&&this.toast.success("\u{1F389} \u5DF2\u6A19\u8A18\u70BA\u8F49\u5316\u6210\u529F\uFF01")}markAsInterested(){this.dynamicEngine.completeCurrentUser("interested")&&this.toast.info("\u5DF2\u6A19\u8A18\u70BA\u6709\u8208\u8DA3\uFF0C\u8655\u7406\u4E0B\u4E00\u500B\u7528\u6236")}getReplyRate(){let t=this.currentExecution();return!t||!t.stats.messagesSent?0:t.stats.responsesReceived/t.stats.messagesSent*100}isStageCompleted(t){let e=this.currentExecution();if(!e?.conversionFunnel)return!1;let n=["contact","response","interest","intent","conversion"],r=n.indexOf(e.conversionFunnel.currentStage);return n.indexOf(t)<r}isCurrentStage(t){return this.currentExecution()?.conversionFunnel?.currentStage===t}getResultCount(t){return(this.queueProgress()?.completed||[]).filter(n=>n.result===t).length}getConversionRate(){let t=this.queueProgress()?.completed||[];return t.length===0?0:t.filter(n=>n.result==="converted").length/t.length*100}getResultLabel(t){return{converted:"\u8F49\u5316",interested:"\u6709\u8208\u8DA3",neutral:"\u4E2D\u7ACB",rejected:"\u62D2\u7D55",no_response:"\u7121\u56DE\u61C9"}[t]||t}formatDuration(t){if(t<60)return`${t}\u79D2`;if(t<3600)return`${Math.floor(t/60)}\u5206${t%60}\u79D2`;let e=Math.floor(t/3600),n=Math.floor(t%3600/60);return`${e}\u6642${n}\u5206`}exportResults(){let t=this.queueProgress()?.completed||[];if(t.length===0){this.toast.info("\u66AB\u7121\u53EF\u5C0E\u51FA\u7684\u7D50\u679C");return}let e=["\u7528\u6236","\u7D50\u679C","\u6D88\u606F\u6578","\u6642\u9577(\u79D2)"],n=t.map(S=>[S.name,this.getResultLabel(S.result),S.messagesExchanged,S.duration]),r=[e.join(","),...n.map(S=>S.join(","))].join(`
`),u=new Blob(["\uFEFF"+r],{type:"text/csv;charset=utf-8"}),p=URL.createObjectURL(u),f=document.createElement("a");f.href=p,f.download=`ai-team-results-${new Date().toISOString().slice(0,10)}.csv`,f.click(),URL.revokeObjectURL(p),this.toast.success("\u7D50\u679C\u5DF2\u5C0E\u51FA\u70BA CSV \u6587\u4EF6")}viewExecutionHistory(t){this.selectedHistory.set(t),this.showHistoryPanel.set(!0)}rerunExecution(t){this.showHistoryPanel.set(!1),this.dynamicEngine.startFromOnePhrase(t.goal,t.mode,t.targetUsers?.map(e=>({id:String(e.id),telegramId:String(e.id),username:e.username,firstName:e.firstName,lastName:e.lastName,intentScore:e.intentScore,source:e.source}))).then(e=>{e&&this.toast.success("\u{1F504} \u5DF2\u4F7F\u7528\u76F8\u540C\u7B56\u7565\u91CD\u65B0\u555F\u52D5\u57F7\u884C")})}isSelectedForCompare(t){return this.selectedForCompare().some(e=>e.id===t.id)}toggleCompareSelection(t){let e=this.selectedForCompare();if(e.find(r=>r.id===t.id))this.selectedForCompare.set(e.filter(r=>r.id!==t.id));else{if(e.length>=3){this.toast.info("\u6700\u591A\u53EA\u80FD\u9078\u64C7 3 \u500B\u7B56\u7565\u9032\u884C\u5C0D\u6BD4");return}this.selectedForCompare.set([...e,t])}}clearCompareSelection(){this.selectedForCompare.set([])}openABTestPanel(){if(this.selectedForCompare().length<2){this.toast.info("\u8ACB\u81F3\u5C11\u9078\u64C7 2 \u500B\u57F7\u884C\u8A18\u9304\u9032\u884C\u5C0D\u6BD4");return}this.showABTestPanel.set(!0)}getResponseRate(t){return t.stats.messagesSent?t.stats.responsesReceived/t.stats.messagesSent*100:0}isHighestValue(t,e){let n=this.selectedForCompare(),r;switch(t){case"messagesSent":r=n.map(p=>p.stats.messagesSent);break;case"responsesReceived":r=n.map(p=>p.stats.responsesReceived);break;case"responseRate":r=n.map(p=>this.getResponseRate(p));break;default:return!1}let u=Math.max(...r);return r[e]===u&&u>0}getBestStrategyIndex(){let t=this.selectedForCompare();if(t.length===0)return 0;let e=t.map(n=>{let r=this.getResponseRate(n),u=n.stats.messagesSent;return r*.6+(u>0?u*.4:0)});return e.indexOf(Math.max(...e))}getGoalIcon(t){return rt[t]?.icon||"\u{1F3AF}"}getGoalLabel(t){return rt[t]?.label||t}getTaskStatusLabel(t){return{draft:"\u8349\u7A3F",scheduled:"\u5DF2\u8A08\u5283",running:"\u57F7\u884C\u4E2D",paused:"\u5DF2\u66AB\u505C",completed:"\u5DF2\u5B8C\u6210",failed:"\u5931\u6557"}[t]||t}startUnifiedTask(t){this.taskService.startTask(t),this.toast.success("\u4EFB\u52D9\u5DF2\u555F\u52D5")}pauseUnifiedTask(t){this.taskService.pauseTask(t),this.toast.info("\u4EFB\u52D9\u5DF2\u66AB\u505C")}goToSmartMarketingHub(){this.ipc.send("navigate-to",{path:"/smart-marketing"})}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=Q({type:l,selectors:[["app-collaboration-dashboard"]],viewQuery:function(e,n){if(e&1&&Ge(rn,5),e&2){let r;Re(r=Ie())&&(n.conversationContainer=r.first)}},decls:87,vars:54,consts:[["conversationContainer",""],[1,"collaboration-dashboard","p-6","bg-slate-900","min-h-full"],[1,"fixed","top-4","right-4","z-50","animate-slide-in-right"],[1,"flex","items-center","justify-between","mb-8"],[1,"text-2xl","font-bold","text-white","flex","items-center","gap-3"],[1,"text-2xl"],[1,"text-slate-400","mt-1"],[1,"flex","items-center","gap-3"],[1,"px-4","py-2","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600","flex","items-center","gap-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-sm","text-slate-500"],[1,"flex","items-center","gap-2","mb-4"],[1,"px-4","py-2","rounded-lg","text-sm","font-medium","transition-all",3,"click"],[1,"ml-auto","flex","items-center","gap-2"],[1,"flex","items-center","gap-2","px-3","py-1","bg-emerald-500/20","text-emerald-400","rounded-full","text-sm"],[1,"px-3","py-1","bg-yellow-500/20","text-yellow-400","rounded-full","text-sm"],[1,"grid","grid-cols-5","gap-4","mb-8"],[1,"mb-8","bg-gradient-to-r","from-purple-500/10","to-pink-500/10","rounded-xl","border","border-purple-500/30","overflow-hidden"],[1,"fixed","inset-0","z-50","flex"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center"],[1,"grid","grid-cols-3","gap-6","mb-8"],[1,"col-span-2","bg-slate-800/50","rounded-xl","p-5","border","border-slate-700/50"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-white"],[1,"flex","gap-2"],[1,"px-3","py-1","text-sm","rounded-lg",3,"click"],[1,"h-48","flex","items-end","gap-2"],[1,"flex-1","flex","flex-col","items-center","gap-1"],[1,"flex","justify-center","gap-6","mt-4","text-sm"],[1,"flex","items-center","gap-2"],[1,"w-3","h-3","rounded","bg-purple-500"],[1,"text-slate-400"],[1,"w-3","h-3","rounded","bg-emerald-500"],[1,"bg-slate-800/50","rounded-xl","p-5","border","border-slate-700/50"],[1,"text-lg","font-semibold","text-white","mb-4"],[1,"space-y-3"],[1,"text-center","py-8","text-slate-500"],[1,"bg-slate-800/50","rounded-xl","border","border-slate-700/50","mb-8"],[1,"p-5","border-b","border-slate-700/50","flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-white","flex","items-center","gap-2"],[1,"px-3","py-1.5","bg-purple-500","text-white","text-sm","rounded-lg","hover:bg-purple-600","flex","items-center","gap-1"],[1,"text-xs","text-slate-400","hover:text-white"],[1,"text-sm","text-slate-400"],[1,"divide-y","divide-slate-700/50","max-h-[300px]","overflow-y-auto"],[1,"p-4","hover:bg-slate-700/30","transition-colors","cursor-pointer"],[1,"p-8","text-center","text-slate-500"],[1,"bg-slate-800/50","rounded-xl","border","border-slate-700/50"],[1,"divide-y","divide-slate-700/50"],[1,"p-4","hover:bg-slate-700/30","transition-colors"],[1,"bg-gradient-to-r","from-emerald-500","to-teal-500","rounded-xl","p-4","shadow-2xl","max-w-sm"],[1,"flex","items-start","gap-3"],[1,"w-10","h-10","bg-white/20","rounded-full","flex","items-center","justify-center","text-2xl"],[1,"flex-1"],[1,"font-bold","text-white","text-lg"],[1,"text-white/90","text-sm","mt-1"],[1,"font-medium"],[1,"text-white/80","text-xs","mt-1"],[1,"flex","gap-2","mt-3"],[1,"px-3","py-1.5","bg-white/20","hover:bg-white/30","text-white","text-xs","rounded-lg",3,"click"],[1,"px-3","py-1.5","bg-white/10","hover:bg-white/20","text-white/80","text-xs","rounded-lg",3,"click"],[1,"text-white/60","hover:text-white",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"w-2","h-2","bg-emerald-500","rounded-full"],[1,"grid","grid-cols-6","gap-4","mb-8"],[1,"bg-gradient-to-br","from-purple-500/20","to-purple-600/10","rounded-xl","p-4","border","border-purple-500/30"],[1,"text-3xl","font-bold","text-purple-400"],[1,"text-sm","text-slate-400","mt-1"],[1,"bg-gradient-to-br","from-emerald-500/20","to-emerald-600/10","rounded-xl","p-4","border","border-emerald-500/30"],[1,"text-3xl","font-bold","text-emerald-400"],[1,"w-2","h-2","bg-emerald-500","rounded-full","animate-pulse"],[1,"bg-gradient-to-br","from-cyan-500/20","to-cyan-600/10","rounded-xl","p-4","border","border-cyan-500/30"],[1,"text-3xl","font-bold","text-cyan-400"],[1,"bg-gradient-to-br","from-amber-500/20","to-amber-600/10","rounded-xl","p-4","border","border-amber-500/30"],[1,"text-3xl","font-bold","text-amber-400"],[1,"bg-gradient-to-br","from-pink-500/20","to-pink-600/10","rounded-xl","p-4","border","border-pink-500/30"],[1,"text-3xl","font-bold","text-pink-400"],[1,"h-1.5","bg-slate-700","rounded-full","mt-2","overflow-hidden"],[1,"h-full","bg-gradient-to-r","from-pink-500","to-rose-500","rounded-full","transition-all"],[1,"bg-gradient-to-br","from-blue-500/20","to-blue-600/10","rounded-xl","p-4","border","border-blue-500/30"],[1,"text-3xl","font-bold","text-blue-400"],[1,"bg-gradient-to-r","from-cyan-500/10","to-purple-500/10","rounded-xl","border","border-cyan-500/30","p-4","mb-8"],[1,"font-semibold","text-white","flex","items-center","gap-2"],[1,"flex","items-center","gap-2","text-sm","text-slate-400"],[1,"grid","grid-cols-5","gap-4"],[1,"bg-slate-800/50","rounded-lg","p-3","text-center"],[1,"text-2xl","font-bold","text-cyan-400"],[1,"text-xs","text-slate-400"],[1,"text-2xl","font-bold","text-purple-400"],[1,"text-2xl","font-bold","text-emerald-400"],[1,"text-2xl","font-bold","text-amber-400"],[1,"text-2xl","font-bold","text-pink-400"],[1,"p-4","border-b","border-slate-700/50","flex","items-center","justify-between"],[1,"px-3","py-1.5","bg-purple-500/20","text-purple-400","rounded-lg","text-sm","hover:bg-purple-500/30",3,"click"],[1,"divide-y","divide-slate-700/50","max-h-[400px]","overflow-y-auto"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center","text-2xl"],[1,"font-medium","text-white"],[1,"text-sm","text-slate-400","flex","items-center","gap-2"],[1,"text-slate-600"],[1,"text-emerald-400"],[1,"text-right"],[1,"text-lg","font-bold"],[1,"text-xs","text-slate-500"],[1,"px-3","py-1","rounded-full","text-xs","font-medium"],[1,"px-3","py-1.5","bg-yellow-500/20","text-yellow-400","rounded-lg","text-sm","hover:bg-yellow-500/30"],[1,"px-3","py-1.5","bg-emerald-500/20","text-emerald-400","rounded-lg","text-sm","hover:bg-emerald-500/30"],[1,"px-3","py-1.5","bg-yellow-500/20","text-yellow-400","rounded-lg","text-sm","hover:bg-yellow-500/30",3,"click"],[1,"px-3","py-1.5","bg-emerald-500/20","text-emerald-400","rounded-lg","text-sm","hover:bg-emerald-500/30",3,"click"],[1,"text-4xl","mb-2"],[1,"mt-4","px-4","py-2","bg-purple-500/20","text-purple-400","rounded-lg","hover:bg-purple-500/30",3,"click"],[1,"text-4xl","font-bold","text-purple-400"],[1,"text-xs","text-purple-400/70","mt-2"],[1,"text-4xl","font-bold","text-emerald-400"],[1,"text-xs","text-emerald-400/70","mt-2"],[1,"text-4xl","font-bold","text-cyan-400"],[1,"text-xs","text-cyan-400/70","mt-2"],[1,"text-4xl","font-bold","text-amber-400"],[1,"text-xs","text-amber-400/70","mt-2"],[1,"text-4xl","font-bold","text-pink-400"],[1,"h-1.5","bg-slate-700","rounded-full","mt-3","overflow-hidden"],[1,"h-full","bg-gradient-to-r","from-pink-500","to-rose-500","rounded-full","transition-all","duration-500"],[1,"p-4","border-b","border-purple-500/20","flex","items-center","justify-between"],[1,"w-3","h-3","bg-green-500","rounded-full","animate-pulse"],[1,"px-2","py-0.5","bg-purple-500/30","text-purple-300","text-xs","rounded-full"],[1,"px-3","py-1.5","bg-amber-500/20","text-amber-400","rounded-lg","text-sm","hover:bg-amber-500/30"],[1,"px-3","py-1.5","bg-red-500/20","text-red-400","rounded-lg","text-sm","hover:bg-red-500/30",3,"click"],[1,"p-4"],[1,"mb-4"],[1,"text-sm","text-slate-400","mb-1"],[1,"text-white","font-medium"],[1,"grid","grid-cols-6","gap-3","mb-4"],[1,"text-2xl","font-bold"],[1,"mb-4","p-3","bg-slate-800/30","rounded-lg"],[1,"mb-4","p-3","bg-slate-800/50","rounded-lg"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-xs","text-purple-400","hover:text-purple-300","flex","items-center","gap-1",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"space-y-2","max-h-48","overflow-y-auto"],[1,"text-center","py-4","text-slate-500","text-sm"],[1,"px-3","py-1.5","bg-amber-500/20","text-amber-400","rounded-lg","text-sm","hover:bg-amber-500/30",3,"click"],[1,"text-sm","text-slate-400","mb-2"],[1,"flex","items-center","gap-1"],[1,"flex-1","relative"],[1,"h-2","rounded-full","transition-all"],[1,"text-xs","text-center","mt-1"],[1,"w-4","h-px","bg-slate-600"],[1,"text-sm","text-white","font-medium"],[1,"text-slate-500","ml-1"],[1,"h-2","bg-slate-700","rounded-full","overflow-hidden","mb-3"],[1,"h-full","bg-gradient-to-r","from-purple-500","to-pink-500","transition-all","duration-300"],[1,"flex","items-center","justify-between","text-sm"],[1,"text-xs","text-slate-500","mt-2"],[1,"mt-3","pt-3","border-t","border-slate-700"],[1,"w-2","h-2","bg-green-500","rounded-full","animate-pulse"],[1,"text-white"],[1,"px-2","py-1","bg-slate-600","text-slate-300","text-xs","rounded","hover:bg-slate-500",3,"click"],[1,"px-2","py-1","bg-emerald-500/20","text-emerald-400","text-xs","rounded","hover:bg-emerald-500/30",3,"click"],[1,"text-xs","text-slate-400","mb-2"],[1,"flex","flex-wrap","gap-2"],[1,"px-2","py-1","bg-emerald-500/20","text-emerald-400","text-xs","rounded-full","flex","items-center","gap-1"],[1,"px-2","py-1","bg-amber-500/20","text-amber-400","text-xs","rounded-full","flex","items-center","gap-1"],[1,"px-2","py-1","bg-slate-500/20","text-slate-400","text-xs","rounded-full","flex","items-center","gap-1"],[1,"px-2","py-1","bg-red-500/20","text-red-400","text-xs","rounded-full","flex","items-center","gap-1"],[1,"px-2","py-1","bg-gray-500/20","text-gray-400","text-xs","rounded-full","flex","items-center","gap-1"],[1,"mt-2","text-xs","text-purple-400","hover:text-purple-300",3,"click"],[1,"px-2","py-1","bg-slate-700","rounded-full","text-xs","text-slate-300","flex","items-center","gap-1"],[1,"px-2","py-1","bg-slate-600","rounded-full","text-xs","text-slate-400"],[1,"w-2","h-2","rounded-full"],[1,"flex","gap-3","p-2","rounded-lg",3,"bg-slate-700/50","bg-emerald-500/10"],[1,"flex","gap-3","p-2","rounded-lg"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","text-sm"],[1,"flex-1","min-w-0"],[1,"text-xs","text-slate-400","mb-0.5"],[1,"text-sm","text-white","truncate"],[1,"absolute","inset-0","bg-black/50",3,"click"],[1,"absolute","right-0","top-0","bottom-0","w-[500px]","bg-slate-900","border-l","border-slate-700","flex","flex-col","shadow-2xl"],[1,"p-4","border-b","border-slate-700","flex","items-center","justify-between"],[1,"text-xl"],[1,"p-2","hover:bg-slate-700","rounded-lg","text-slate-400",3,"click"],[1,"flex-1","overflow-y-auto","p-4","space-y-3"],[1,"flex","gap-3",3,"flex-row-reverse"],[1,"border-t","border-slate-700","p-4"],[1,"flex","items-center","gap-2","mb-3"],[1,"text-xs","px-2","py-0.5","rounded-full"],[1,"text-xs","text-purple-400","hover:text-purple-300",3,"click"],[1,"mb-3"],[1,"flex-1","px-3","py-2","bg-slate-800","border","border-slate-600","rounded-lg","text-white","text-sm","placeholder:text-slate-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"ngModelChange","keydown.enter","ngModel","disabled","placeholder"],[1,"px-4","py-2","bg-purple-500","text-white","rounded-lg","text-sm","hover:bg-purple-600","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"mt-3","p-3","bg-purple-500/10","border","border-purple-500/30","rounded-lg"],[1,"flex","gap-3"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center","flex-shrink-0"],[1,"max-w-[70%]","rounded-xl","p-3"],[1,"text-xs","mb-1"],[1,"text-slate-500","ml-2"],[1,"text-sm","text-white","whitespace-pre-wrap"],[1,"text-xs","text-slate-400","mb-1","block"],[1,"w-full","px-3","py-2","bg-slate-800","border","border-slate-600","rounded-lg","text-white","text-sm",3,"ngModelChange","ngModel"],[3,"value"],[1,"text-xs","text-purple-400","mb-1"],[1,"text-sm","text-white"],[1,"relative","bg-slate-900","rounded-xl","border","border-slate-700","w-[700px]","max-h-[80vh]","overflow-hidden","shadow-2xl"],[1,"p-4","border-b","border-slate-700"],[1,"grid","grid-cols-5","gap-3"],[1,"bg-emerald-500/10","rounded-lg","p-3","text-center","border","border-emerald-500/30"],[1,"text-xs","text-emerald-400/70"],[1,"bg-amber-500/10","rounded-lg","p-3","text-center","border","border-amber-500/30"],[1,"text-xs","text-amber-400/70"],[1,"bg-slate-500/10","rounded-lg","p-3","text-center","border","border-slate-500/30"],[1,"text-2xl","font-bold","text-slate-400"],[1,"text-xs","text-slate-400/70"],[1,"bg-red-500/10","rounded-lg","p-3","text-center","border","border-red-500/30"],[1,"text-2xl","font-bold","text-red-400"],[1,"text-xs","text-red-400/70"],[1,"bg-gray-500/10","rounded-lg","p-3","text-center","border","border-gray-500/30"],[1,"text-2xl","font-bold","text-gray-400"],[1,"text-xs","text-gray-400/70"],[1,"mt-4","flex","items-center","gap-4"],[1,"h-3","bg-slate-700","rounded-full","overflow-hidden"],[1,"h-full","bg-gradient-to-r","from-emerald-500","to-teal-500","transition-all"],[1,"p-4","max-h-[400px]","overflow-y-auto"],[1,"w-full"],[1,"text-xs","text-slate-400","border-b","border-slate-700"],[1,"text-left","py-2","px-2"],[1,"text-right","py-2","px-2"],[1,"text-sm"],[1,"border-b","border-slate-800","hover:bg-slate-800/50"],[1,"p-4","border-t","border-slate-700","flex","justify-between"],[1,"px-4","py-2","bg-purple-500","text-white","rounded-lg","hover:bg-purple-600",3,"click"],[1,"py-2","px-2","text-white"],[1,"py-2","px-2"],[1,"px-2","py-0.5","rounded-full","text-xs"],[1,"py-2","px-2","text-right","text-slate-300"],[1,"py-2","px-2","text-right","text-slate-400"],[1,"w-full","bg-slate-700","rounded-t","relative","flex","flex-col","justify-end"],[1,"absolute","-top-5","left-1/2","-translate-x-1/2","text-xs","text-slate-400"],[1,"w-6","h-6","rounded-full","flex","items-center","justify-center","text-xs","font-bold"],[1,"text-sm","font-medium","text-white","truncate"],[1,"text-sm","font-bold","text-emerald-400"],[1,"px-3","py-1.5","bg-purple-500","text-white","text-sm","rounded-lg","hover:bg-purple-600","flex","items-center","gap-1",3,"click"],[1,"text-xs","text-slate-400","hover:text-white",3,"click"],[1,"p-4","hover:bg-slate-700/30","transition-colors","cursor-pointer",3,"click"],["type","checkbox",1,"w-4","h-4","rounded","border-slate-500","bg-slate-700","text-purple-500","focus:ring-purple-500",3,"click","change","checked"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center"],[1,"text-lg"],[1,"text-xs","text-slate-400","flex","items-center","gap-2"],[1,"text-sm","font-bold","text-purple-400"],[1,"p-2","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"relative","bg-slate-900","rounded-xl","border","border-slate-700","w-[800px]","max-h-[85vh]","overflow-hidden","shadow-2xl"],[1,"p-4","border-b","border-slate-700","grid","grid-cols-5","gap-3"],[1,"bg-slate-800","rounded-lg","p-3","text-center"],[1,"text-xl","font-bold","text-purple-400"],[1,"text-xl","font-bold","text-emerald-400"],[1,"text-xl","font-bold","text-cyan-400"],[1,"text-xl","font-bold","text-amber-400"],[1,"text-xl","font-bold","text-pink-400"],[1,"p-4","max-h-[400px]","overflow-y-auto","space-y-3"],[1,"px-4","py-2","bg-purple-500/20","text-purple-400","rounded-lg","hover:bg-purple-500/30","flex","items-center","gap-2",3,"click"],[1,"px-4","py-2","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600",3,"click"],[1,"relative","bg-slate-900","rounded-xl","border","border-slate-700","w-[900px]","max-h-[85vh]","overflow-hidden","shadow-2xl"],[1,"px-2","py-0.5","bg-purple-500/20","text-purple-400","text-xs","rounded-full"],[1,"p-4","overflow-x-auto"],[1,"w-full","text-sm"],[1,"text-slate-400","border-b","border-slate-700"],[1,"text-left","py-3","px-3","w-32"],[1,"text-center","py-3","px-3"],[1,"border-b","border-slate-800"],[1,"py-3","px-3","text-slate-400"],[1,"py-3","px-3","text-center"],[1,"py-3","px-3","text-center","font-bold",3,"text-emerald-400","text-white"],[1,"py-3","px-3","text-center","text-slate-300"],[1,"p-4","border-t","border-slate-700","bg-slate-800/50"],[1,"flex","items-center","gap-2","mb-2"],[1,"text-emerald-400","font-bold"],[1,"p-4","border-t","border-slate-700","flex","justify-end","gap-3"],[1,"flex","flex-col","items-center"],[1,"px-2","py-0.5","rounded-full","text-xs","mb-1"],[1,"text-white","text-xs"],[1,"py-3","px-3","text-center","font-bold"],[1,"w-3","h-3","rounded-full"],[1,"flex","items-center","gap-6"],[1,"text-center"],[1,"text-lg","font-bold","text-purple-400"],[1,"text-lg","font-bold","text-cyan-400"],[1,"p-2","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600"],[1,"p-2","bg-emerald-500/20","text-emerald-400","rounded-lg","hover:bg-emerald-500/30"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"p-2","bg-emerald-500/20","text-emerald-400","rounded-lg","hover:bg-emerald-500/30",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"]],template:function(e,n){e&1&&(i(0,"div",1),h(1,ln,21,2,"div",2),i(2,"div",3)(3,"div")(4,"h2",4)(5,"span",5),a(6,"\u{1F4CA}"),o(),a(7," \u5354\u4F5C\u76E3\u63A7\u4E2D\u5FC3 "),o(),i(8,"p",6),a(9,"\u5BE6\u6642\u76E3\u63A7\u591A\u89D2\u8272\u5354\u4F5C\u72C0\u614B"),o()(),i(10,"div",7)(11,"button",8),g("click",function(){return n.refreshData()}),j(),i(12,"svg",9),R(13,"path",10),o(),a(14," \u5237\u65B0 "),o(),z(),i(15,"div",11),a(16),ge(17,"date"),o()()(),i(18,"div",12)(19,"button",13),g("click",function(){return n.viewMode.set("unified")}),a(20," \u{1F4CA} \u7D71\u4E00\u4EFB\u52D9\u8996\u5716 "),o(),i(21,"button",13),g("click",function(){return n.viewMode.set("legacy")}),a(22," \u{1F3AD} \u5354\u4F5C\u7FA4\u7D44\u8996\u5716 "),o(),i(23,"div",14),h(24,sn,3,0,"span",15)(25,un,2,0,"span",16),o()(),h(26,xn,84,16),h(27,Cn,39,13,"div",17),h(28,Nn,64,25,"div",18),h(29,Wn,32,20,"div",19),h(30,Hn,71,13,"div",20),i(31,"div",21)(32,"div",22)(33,"div",23)(34,"h3",24),a(35,"\u5354\u4F5C\u8DA8\u52E2"),o(),i(36,"div",25)(37,"button",26),g("click",function(){return n.chartPeriod.set("week")}),a(38," 7\u5929 "),o(),i(39,"button",26),g("click",function(){return n.chartPeriod.set("month")}),a(40," 30\u5929 "),o()()(),i(41,"div",27),F(42,zn,6,10,"div",28,an),o(),i(44,"div",29)(45,"div",30),R(46,"div",31),i(47,"span",32),a(48,"\u65B0\u5EFA\u7FA4\u7D44"),o()(),i(49,"div",30),R(50,"div",33),i(51,"span",32),a(52,"\u6210\u529F\u8F49\u5316"),o()()()(),i(53,"div",34)(54,"h3",35),a(55,"\u89D2\u8272\u6548\u679C\u6392\u540D"),o(),i(56,"div",36),F(57,Qn,13,20,"div",7,he),h(59,Kn,2,0,"div",37),o()()(),i(60,"div",38)(61,"div",39)(62,"h3",40)(63,"span"),a(64,"\u{1F4DC}"),o(),a(65," \u57F7\u884C\u6B77\u53F2 "),o(),i(66,"div",7),h(67,Yn,4,1,"button",41),h(68,Jn,2,0,"button",42),i(69,"span",43),a(70),o()()(),i(71,"div",44),F(72,Xn,33,22,"div",45,te),h(74,Zn,5,0,"div",46),o()(),h(75,ni,52,8,"div",20),h(76,mi,76,3,"div",20),i(77,"div",47)(78,"div",39)(79,"h3",24),a(80,"\u6D3B\u8E8D\u5354\u4F5C\u7FA4\u7D44"),o(),i(81,"span",43),a(82),o()(),i(83,"div",48),F(84,xi,30,33,"div",49,te),h(86,_i,5,0,"div",46),o()()()),e&2&&(s(),b(n.showConversionAlert()&&n.conversionAlertData()?1:-1),s(11),E("animate-spin",n.isRefreshing()),s(4),x(" \u6700\u5F8C\u66F4\u65B0: ",be(17,51,n.lastUpdate(),"HH:mm:ss")," "),s(3),E("bg-purple-500",n.viewMode()==="unified")("text-white",n.viewMode()==="unified")("bg-slate-700",n.viewMode()!=="unified")("text-slate-400",n.viewMode()!=="unified"),s(2),E("bg-purple-500",n.viewMode()==="legacy")("text-white",n.viewMode()==="legacy")("bg-slate-700",n.viewMode()!=="legacy")("text-slate-400",n.viewMode()!=="legacy"),s(3),b(n.aiConnected()?24:25),s(2),b(n.viewMode()==="unified"?26:-1),s(),b(n.viewMode()==="legacy"?27:-1),s(),b(n.currentExecution()?28:-1),s(),b(n.showConversationPanel()&&n.currentExecution()?29:-1),s(),b(n.showResultsPanel()?30:-1),s(7),E("bg-purple-500",n.chartPeriod()==="week")("text-white",n.chartPeriod()==="week")("bg-slate-700",n.chartPeriod()!=="week")("text-slate-400",n.chartPeriod()!=="week"),s(2),E("bg-purple-500",n.chartPeriod()==="month")("text-white",n.chartPeriod()==="month")("bg-slate-700",n.chartPeriod()!=="month")("text-slate-400",n.chartPeriod()!=="month"),s(3),A(n.chartData()),s(15),A(n.topRoles()),s(2),b(n.topRoles().length===0?59:-1),s(8),b(n.selectedForCompare().length>=2?67:-1),s(),b(n.selectedForCompare().length>0?68:-1),s(2),x("\u5171 ",n.executionHistory().length," \u689D\u8A18\u9304"),s(2),A(n.executionHistory().slice(0,10)),s(2),b(n.executionHistory().length===0?74:-1),s(),b(n.showHistoryPanel()&&n.selectedHistory()?75:-1),s(),b(n.showABTestPanel()&&n.selectedForCompare().length>=2?76:-1),s(6),x("\u5171 ",n.activeGroups().length," \u500B"),s(2),A(n.activeGroups()),s(2),b(n.activeGroups().length===0?86:-1))},dependencies:[K,ne,ye,Se,le,Ae,se,ue,ft,vt,Ct],encapsulation:2})}};var st={sales:{icon:"\u{1F4BC}",label:"\u92B7\u552E\u985E",color:"bg-blue-500"},tech:{icon:"\u{1F4BB}",label:"\u6280\u8853\u985E",color:"bg-purple-500"},service:{icon:"\u{1F3A7}",label:"\u5BA2\u670D\u985E",color:"bg-green-500"},expert:{icon:"\u{1F393}",label:"\u884C\u696D\u5C08\u5BB6",color:"bg-amber-500"},social:{icon:"\u{1F465}",label:"\u793E\u4EA4\u985E",color:"bg-pink-500"},operation:{icon:"\u{1F4E2}",label:"\u904B\u71DF\u985E",color:"bg-orange-500"},management:{icon:"\u{1F454}",label:"\u7BA1\u7406\u985E",color:"bg-slate-500"},special:{icon:"\u2B50",label:"\u7279\u6B8A\u5834\u666F",color:"bg-cyan-500"}},Ke=[{id:"preset_sales_manager",name:"\u92B7\u552E\u7D93\u7406",type:"custom",category:"sales",roleType:"sales_manager",personality:{description:"\u5C08\u696D\u7684\u92B7\u552E\u7D93\u7406\uFF0C\u6709\u6C7A\u7B56\u6B0A\uFF0C\u80FD\u63D0\u4F9B\u7279\u5225\u512A\u60E0",speakingStyle:"professional",traits:["\u5C08\u696D","\u6C7A\u7B56\u8005","\u8AC7\u5224\u9AD8\u624B","\u76EE\u6A19\u5C0E\u5411"],background:"10\u5E74\u92B7\u552E\u7D93\u9A57\uFF0C\u8CA0\u8CAC\u5927\u5BA2\u6236\u95DC\u4FC2"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u4E00\u4F4D\u8CC7\u6DF1\u92B7\u552E\u7D93\u7406\uFF0C\u6709\u6B0A\u6279\u51C6\u7279\u5225\u6298\u6263\u548C\u512A\u60E0\u65B9\u6848\u3002\u4F60\u5584\u65BC\u50BE\u807D\u5BA2\u6236\u9700\u6C42\uFF0C\u63D0\u4F9B\u91CF\u8EAB\u5B9A\u5236\u7684\u89E3\u6C7A\u65B9\u6848\u3002\u8AAA\u8A71\u5C08\u696D\u4F46\u4E0D\u5931\u6EAB\u5EA6\uFF0C\u80FD\u5728\u95DC\u9375\u6642\u523B\u505A\u51FA\u8B93\u6B65\u4FC3\u6210\u4EA4\u6613\u3002",responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:["\u8AC7\u5224\u4FC3\u55AE","\u50F9\u683C\u5BE9\u6279","\u5927\u5BA2\u6236\u7DAD\u8B77","\u5718\u968A\u5354\u8ABF"],scenarios:["\u8AC7\u5224\u4FC3\u55AE","VIP\u5BA2\u6236","\u50F9\u683C\u8AC7\u5224"],keyPhrases:["\u9019\u500B\u50F9\u683C\u6211\u53EF\u4EE5\u7279\u6279","\u70BA\u60A8\u722D\u53D6\u6700\u5927\u512A\u60E0","\u9577\u671F\u5408\u4F5C\u5171\u8D0F"],isActive:!0},{id:"preset_product_consultant",name:"\u7522\u54C1\u9867\u554F",type:"custom",category:"sales",roleType:"product_consultant",personality:{description:"\u6EAB\u548C\u5C08\u696D\u7684\u7522\u54C1\u5C08\u5BB6\uFF0C\u6DF1\u5165\u4E86\u89E3\u7522\u54C1\u7D30\u7BC0",speakingStyle:"professional",traits:["\u5C08\u696D","\u8010\u5FC3","\u7D30\u7DFB","\u77E5\u8B58\u8C50\u5BCC"],background:"\u7522\u54C1\u7814\u767C\u80CC\u666F\uFF0C\u719F\u6089\u6BCF\u500B\u529F\u80FD\u7D30\u7BC0"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u7522\u54C1\u9867\u554F\uFF0C\u5C0D\u7522\u54C1\u529F\u80FD\u4E86\u5982\u6307\u638C\u3002\u4F60\u8010\u5FC3\u89E3\u7B54\u6BCF\u4E00\u500B\u554F\u984C\uFF0C\u5584\u7528\u6848\u4F8B\u548C\u6BD4\u55BB\u8B93\u8907\u96DC\u529F\u80FD\u8B8A\u5F97\u6613\u61C2\u3002\u4F60\u6703\u4E3B\u52D5\u8A62\u554F\u5BA2\u6236\u9700\u6C42\uFF0C\u63A8\u85A6\u6700\u9069\u5408\u7684\u65B9\u6848\u3002",responseLength:"long",emojiFrequency:"low",typingSpeed:"slow"},responsibilities:["\u7522\u54C1\u4ECB\u7D39","\u529F\u80FD\u6F14\u793A","\u9700\u6C42\u5206\u6790","\u65B9\u6848\u63A8\u85A6"],scenarios:["\u7522\u54C1\u4ECB\u7D39","\u529F\u80FD\u8AEE\u8A62","\u65B9\u6848\u5C0D\u6BD4"],keyPhrases:["\u9019\u500B\u529F\u80FD\u7684\u8A2D\u8A08\u7406\u5FF5\u662F","\u6839\u64DA\u60A8\u7684\u9700\u6C42\u63A8\u85A6","\u8B93\u6211\u8A73\u7D30\u89E3\u91CB\u4E00\u4E0B"],isActive:!0},{id:"preset_account_manager",name:"\u5BA2\u6236\u7D93\u7406",type:"custom",category:"sales",roleType:"account_manager",personality:{description:"\u8CBC\u5FC3\u5468\u5230\u7684\u5BA2\u6236\u7D93\u7406\uFF0C\u6CE8\u91CD\u9577\u671F\u95DC\u4FC2\u7DAD\u8B77",speakingStyle:"friendly",traits:["\u8CBC\u5FC3","\u7D30\u5FC3","\u8CA0\u8CAC","\u9577\u671F\u601D\u7DAD"],background:"\u5C08\u6CE8\u5BA2\u6236\u95DC\u4FC2\u7BA1\u7406\uFF0C\u8001\u5BA2\u6236\u8F49\u4ECB\u7D39\u5C08\u5BB6"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u5C08\u5C6C\u5BA2\u6236\u7D93\u7406\uFF0C\u8CA0\u8CAC\u7DAD\u8B77\u9577\u671F\u5BA2\u6236\u95DC\u4FC2\u3002\u4F60\u8A18\u5F97\u6BCF\u4F4D\u5BA2\u6236\u7684\u504F\u597D\uFF0C\u6703\u5728\u7BC0\u65E5\u9001\u4E0A\u554F\u5019\uFF0C\u5B9A\u671F\u56DE\u8A2A\u4E86\u89E3\u4F7F\u7528\u60C5\u6CC1\u3002\u4F60\u7684\u76EE\u6A19\u662F\u8B93\u5BA2\u6236\u611F\u53D7\u5230\u88AB\u91CD\u8996\u3002",responseLength:"medium",emojiFrequency:"medium",typingSpeed:"medium"},responsibilities:["\u8001\u5BA2\u6236\u7DAD\u8B77","\u7E8C\u8CBB\u8DDF\u9032","\u5347\u7D1A\u63A8\u85A6","\u8F49\u4ECB\u7D39"],scenarios:["\u8001\u5BA2\u6236\u7DAD\u8B77","\u7E8C\u8CBB\u63D0\u9192","\u5BA2\u6236\u95DC\u61F7"],keyPhrases:["\u611F\u8B1D\u60A8\u4E00\u76F4\u4EE5\u4F86\u7684\u652F\u6301","\u7279\u610F\u70BA\u8001\u5BA2\u6236\u6E96\u5099","\u6709\u4EFB\u4F55\u554F\u984C\u96A8\u6642\u627E\u6211"],isActive:!0},{id:"preset_sales_rep",name:"\u696D\u52D9\u4EE3\u8868",type:"custom",category:"sales",roleType:"sales_rep",personality:{description:"\u71B1\u60C5\u7A4D\u6975\u7684\u696D\u52D9\u4EE3\u8868\uFF0C\u5FEB\u901F\u97FF\u61C9\u5BA2\u6236\u9700\u6C42",speakingStyle:"enthusiastic",traits:["\u71B1\u60C5","\u7A4D\u6975","\u5FEB\u901F\u97FF\u61C9","\u884C\u52D5\u6D3E"],background:"\u4E00\u7DDA\u92B7\u552E\u7CBE\u82F1\uFF0C\u5BA2\u6236\u958B\u767C\u5C08\u5BB6"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u71B1\u60C5\u7684\u696D\u52D9\u4EE3\u8868\uFF0C\u5C0D\u6BCF\u4E00\u500B\u6F5B\u5728\u5BA2\u6236\u90FD\u5145\u6EFF\u71B1\u60C5\u3002\u4F60\u5FEB\u901F\u97FF\u61C9\u3001\u4E3B\u52D5\u8DDF\u9032\uFF0C\u5584\u65BC\u767C\u73FE\u5BA2\u6236\u9700\u6C42\u4E26\u5339\u914D\u7522\u54C1\u3002\u4F60\u7684\u76EE\u6A19\u662F\u5EFA\u7ACB\u521D\u6B21\u4FE1\u4EFB\u3002",responseLength:"short",emojiFrequency:"medium",typingSpeed:"fast"},responsibilities:["\u9996\u6B21\u63A5\u89F8","\u9700\u6C42\u6316\u6398","\u521D\u6B65\u5831\u50F9","\u8DDF\u9032\u8F49\u5316"],scenarios:["\u65B0\u5BA2\u6236\u958B\u767C","\u521D\u6B21\u63A5\u89F8","\u5FEB\u901F\u97FF\u61C9"],keyPhrases:["\u5F88\u9AD8\u8208\u8A8D\u8B58\u60A8","\u6211\u7ACB\u523B\u70BA\u60A8\u67E5\u8A62","\u6709\u4EFB\u4F55\u554F\u984C\u96A8\u6642\u554F"],isActive:!0},{id:"preset_solution_expert",name:"\u65B9\u6848\u5C08\u5BB6",type:"custom",category:"sales",roleType:"solution_expert",personality:{description:"\u5206\u6790\u578B\u5C08\u5BB6\uFF0C\u64C5\u9577\u5B9A\u5236\u89E3\u6C7A\u65B9\u6848",speakingStyle:"professional",traits:["\u5206\u6790\u578B","\u908F\u8F2F\u6E05\u6670","\u5B9A\u5236\u5316","\u5168\u5C40\u601D\u7DAD"],background:"\u8AEE\u8A62\u9867\u554F\u51FA\u8EAB\uFF0C\u670D\u52D9\u904E\u591A\u5BB6\u5927\u578B\u4F01\u696D"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u89E3\u6C7A\u65B9\u6848\u5C08\u5BB6\uFF0C\u64C5\u9577\u5206\u6790\u5BA2\u6236\u696D\u52D9\u5834\u666F\uFF0C\u8A2D\u8A08\u5B9A\u5236\u5316\u65B9\u6848\u3002\u4F60\u6703\u7528\u6578\u64DA\u548C\u6848\u4F8B\u8AAA\u8A71\uFF0C\u5584\u65BC\u756B\u6D41\u7A0B\u5716\u548C\u5C0D\u6BD4\u8868\u3002\u4F60\u7684\u65B9\u6848\u7E3D\u662F\u5207\u5408\u5BA2\u6236\u5BE6\u969B\u9700\u6C42\u3002",responseLength:"long",emojiFrequency:"none",typingSpeed:"slow"},responsibilities:["\u9700\u6C42\u8ABF\u7814","\u65B9\u6848\u8A2D\u8A08","ROI\u5206\u6790","\u5BE6\u65BD\u898F\u5283"],scenarios:["\u5927\u5BA2\u6236\u5B9A\u5236","\u4F01\u696D\u65B9\u6848","\u8907\u96DC\u9700\u6C42"],keyPhrases:["\u6839\u64DA\u8CB4\u516C\u53F8\u7684\u60C5\u6CC1","\u6211\u5011\u5EFA\u8B70\u7684\u65B9\u6848\u662F","\u9810\u671FROI\u70BA"],isActive:!0},{id:"preset_price_specialist",name:"\u50F9\u683C\u5C08\u54E1",type:"custom",category:"sales",roleType:"price_specialist",personality:{description:"\u9748\u6D3B\u7684\u50F9\u683C\u8AC7\u5224\u5C08\u5BB6\uFF0C\u6709\u6298\u6263\u6B0A\u9650",speakingStyle:"friendly",traits:["\u9748\u6D3B","\u8AC7\u5224\u9AD8\u624B","\u6578\u5B57\u654F\u611F","\u96D9\u8D0F\u601D\u7DAD"],background:"\u5B9A\u50F9\u7B56\u7565\u5C08\u5BB6\uFF0C\u7CBE\u901A\u5404\u7A2E\u512A\u60E0\u65B9\u6848\u7D44\u5408"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u50F9\u683C\u5C08\u54E1\uFF0C\u8CA0\u8CAC\u5831\u50F9\u548C\u512A\u60E0\u65B9\u6848\u3002\u4F60\u4E86\u89E3\u5404\u7A2E\u6298\u6263\u7B56\u7565\uFF0C\u80FD\u6839\u64DA\u5BA2\u6236\u60C5\u6CC1\u9748\u6D3B\u8ABF\u6574\u3002\u4F60\u5584\u65BC\u5275\u9020\u96D9\u8D0F\u5C40\u9762\uFF0C\u65E2\u4FDD\u8B77\u516C\u53F8\u5229\u76CA\u53C8\u6EFF\u8DB3\u5BA2\u6236\u671F\u671B\u3002",responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:["\u5831\u50F9\u55AE\u88FD\u4F5C","\u6298\u6263\u5BE9\u6279","\u4ED8\u6B3E\u65B9\u6848","\u5408\u540C\u8AC7\u5224"],scenarios:["\u50F9\u683C\u8AC7\u5224","\u5831\u50F9\u8AEE\u8A62","\u512A\u60E0\u7533\u8ACB"],keyPhrases:["\u70BA\u60A8\u7533\u8ACB\u4E86\u7279\u5225\u6298\u6263","\u9019\u662F\u6700\u512A\u60E0\u7684\u50F9\u683C\u4E86","\u4ED8\u6B3E\u65B9\u5F0F\u53EF\u4EE5\u9748\u6D3B"],isActive:!0},{id:"preset_regional_director",name:"\u5340\u57DF\u7E3D\u76E3",type:"custom",category:"sales",roleType:"regional_director",personality:{description:"\u9AD8\u5C64\u7BA1\u7406\u8005\uFF0C\u6709\u7279\u6279\u6B0A\u9650\uFF0C\u8655\u7406VIP\u5BA2\u6236",speakingStyle:"professional",traits:["\u6B0A\u5A01","\u5927\u5C40\u89C0","\u7279\u6279\u6B0A\u9650","\u6230\u7565\u601D\u7DAD"],background:"\u5340\u57DF\u8CA0\u8CAC\u4EBA\uFF0C\u76F4\u63A5\u5411\u516C\u53F8\u9AD8\u5C64\u532F\u5831"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u5340\u57DF\u7E3D\u76E3\uFF0C\u7BA1\u7406\u6574\u500B\u5340\u57DF\u7684\u696D\u52D9\u3002\u4F60\u5F88\u5C11\u76F4\u63A5\u5C0D\u63A5\u5BA2\u6236\uFF0C\u53EA\u6709\u91CD\u8981\u5BA2\u6236\u624D\u6703\u89AA\u81EA\u51FA\u9762\u3002\u4F60\u8AAA\u8A71\u6709\u5206\u91CF\uFF0C\u627F\u8AFE\u5FC5\u9054\uFF0C\u80FD\u505A\u51FA\u5176\u4ED6\u4EBA\u7121\u6CD5\u505A\u7684\u6C7A\u5B9A\u3002",responseLength:"short",emojiFrequency:"none",typingSpeed:"slow"},responsibilities:["VIP\u5BA2\u6236","\u7279\u6279\u512A\u60E0","\u6230\u7565\u5408\u4F5C","\u91CD\u5927\u6C7A\u7B56"],scenarios:["VIP\u5BA2\u6236","\u6230\u7565\u5408\u4F5C","\u6700\u5F8C\u4FC3\u55AE"],keyPhrases:["\u6211\u89AA\u81EA\u4F86\u8DDF\u9032\u9019\u500B\u9805\u76EE","\u6211\u53EF\u4EE5\u7279\u6279","\u9019\u662F\u7E3D\u76E3\u7D1A\u5225\u7684\u512A\u60E0"],isActive:!0},{id:"preset_business_manager",name:"\u62DB\u5546\u7D93\u7406",type:"custom",category:"sales",roleType:"business_manager",personality:{description:"\u5408\u4F5C\u5171\u8D0F\u601D\u7DAD\uFF0C\u5C08\u6CE8B2B\u6E20\u9053\u62D3\u5C55",speakingStyle:"professional",traits:["\u5546\u52D9","\u5408\u4F5C\u601D\u7DAD","\u6E20\u9053\u5C08\u5BB6","\u96D9\u8D0F"],background:"\u6E20\u9053\u958B\u767C\u5C08\u5BB6\uFF0C\u64C5\u9577\u5EFA\u7ACB\u5408\u4F5C\u751F\u614B"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u62DB\u5546\u7D93\u7406\uFF0C\u8CA0\u8CAC\u6E20\u9053\u5408\u4F5C\u548C\u4EE3\u7406\u62DB\u5546\u3002\u4F60\u5584\u65BC\u6316\u6398\u5408\u4F5C\u6A5F\u6703\uFF0C\u8A2D\u8A08\u4E92\u5229\u5171\u8D0F\u7684\u5408\u4F5C\u65B9\u6848\u3002\u4F60\u61C2\u5F97\u6E20\u9053\u653F\u7B56\u548C\u5229\u6F64\u5206\u914D\uFF0C\u80FD\u5FEB\u901F\u8A55\u4F30\u5408\u4F5C\u53EF\u884C\u6027\u3002",responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:["\u6E20\u9053\u958B\u767C","\u4EE3\u7406\u62DB\u5546","\u5408\u4F5C\u8AC7\u5224","\u653F\u7B56\u5236\u5B9A"],scenarios:["B2B\u62DB\u5546","\u6E20\u9053\u5408\u4F5C","\u4EE3\u7406\u52A0\u76DF"],keyPhrases:["\u5171\u540C\u958B\u62D3\u5E02\u5834","\u5408\u4F5C\u6A21\u5F0F\u53EF\u4EE5\u63A2\u8A0E","\u6E20\u9053\u653F\u7B56\u652F\u6301"],isActive:!0},{id:"preset_tech_support",name:"\u6280\u8853\u652F\u6301",type:"custom",category:"tech",roleType:"tech_support",personality:{description:"\u8010\u5FC3\u5C08\u696D\u7684\u6280\u8853\u652F\u6301\uFF0C\u64C5\u9577\u554F\u984C\u89E3\u6C7A",speakingStyle:"professional",traits:["\u8010\u5FC3","\u5C08\u696D","\u554F\u984C\u89E3\u6C7A","\u908F\u8F2F\u6E05\u6670"],background:"\u6280\u8853\u80CC\u666F\u51FA\u8EAB\uFF0C\u719F\u6089\u5404\u7A2E\u6280\u8853\u554F\u984C"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u6280\u8853\u652F\u6301\u5DE5\u7A0B\u5E2B\uFF0C\u5C08\u9580\u89E3\u6C7A\u7528\u6236\u9047\u5230\u7684\u6280\u8853\u554F\u984C\u3002\u4F60\u6703\u8010\u5FC3\u5F15\u5C0E\u7528\u6236\u63CF\u8FF0\u554F\u984C\uFF0C\u63D0\u4F9B\u6E05\u6670\u7684\u6B65\u9A5F\u6307\u5C0E\u3002\u9047\u5230\u8907\u96DC\u554F\u984C\u6703\u5347\u7D1A\u8655\u7406\uFF0C\u78BA\u4FDD\u554F\u984C\u6700\u7D42\u89E3\u6C7A\u3002",responseLength:"medium",emojiFrequency:"none",typingSpeed:"medium"},responsibilities:["\u554F\u984C\u8A3A\u65B7","\u6545\u969C\u6392\u9664","\u4F7F\u7528\u6307\u5C0E","\u554F\u984C\u5347\u7D1A"],scenarios:["\u552E\u5F8C\u670D\u52D9","\u6280\u8853\u554F\u984C","\u4F7F\u7528\u56F0\u96E3"],keyPhrases:["\u8ACB\u60A8\u5617\u8A66\u4EE5\u4E0B\u6B65\u9A5F","\u9019\u500B\u554F\u984C\u7684\u539F\u56E0\u662F","\u5DF2\u70BA\u60A8\u8A18\u9304\u5DE5\u55AE"],isActive:!0},{id:"preset_product_engineer",name:"\u7522\u54C1\u5DE5\u7A0B\u5E2B",type:"custom",category:"tech",roleType:"product_engineer",personality:{description:"\u6DF1\u5EA6\u6280\u8853\u5C08\u5BB6\uFF0C\u4E86\u89E3\u7522\u54C1\u67B6\u69CB\u548C\u539F\u7406",speakingStyle:"professional",traits:["\u6280\u8853\u6DF1\u5EA6","\u539F\u7406\u8B1B\u89E3","\u67B6\u69CB\u601D\u7DAD","\u5275\u65B0"],background:"\u7522\u54C1\u7814\u767C\u5718\u968A\u6210\u54E1\uFF0C\u53C3\u8207\u6838\u5FC3\u529F\u80FD\u958B\u767C"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u7522\u54C1\u5DE5\u7A0B\u5E2B\uFF0C\u53C3\u8207\u7522\u54C1\u7684\u7814\u767C\u3002\u4F60\u4E86\u89E3\u6BCF\u500B\u529F\u80FD\u80CC\u5F8C\u7684\u6280\u8853\u539F\u7406\uFF0C\u80FD\u7528\u901A\u4FD7\u7684\u8A9E\u8A00\u89E3\u91CB\u8907\u96DC\u6982\u5FF5\u3002\u4F60\u6703\u5206\u4EAB\u7522\u54C1\u7684\u6280\u8853\u512A\u52E2\u548C\u5275\u65B0\u9EDE\u3002",responseLength:"long",emojiFrequency:"none",typingSpeed:"slow"},responsibilities:["\u6280\u8853\u8AEE\u8A62","\u529F\u80FD\u8B1B\u89E3","API\u5C0D\u63A5","\u6280\u8853\u8A55\u4F30"],scenarios:["\u6280\u8853\u8AEE\u8A62","\u6DF1\u5EA6\u529F\u80FD","API\u96C6\u6210"],keyPhrases:["\u5F9E\u6280\u8853\u89D2\u5EA6\u4F86\u8AAA","\u5E95\u5C64\u539F\u7406\u662F","\u9019\u500B\u529F\u80FD\u7684\u5BE6\u73FE\u65B9\u5F0F"],isActive:!0},{id:"preset_solution_architect",name:"\u89E3\u6C7A\u65B9\u6848\u67B6\u69CB\u5E2B",type:"custom",category:"tech",roleType:"solution_architect",personality:{description:"\u7CFB\u7D71\u8A2D\u8A08\u5C08\u5BB6\uFF0C\u64C5\u9577\u4F01\u696D\u7D1A\u89E3\u6C7A\u65B9\u6848",speakingStyle:"professional",traits:["\u5168\u5C40\u8996\u89D2","\u7CFB\u7D71\u8A2D\u8A08","\u4F01\u696D\u7D1A","\u6700\u4F73\u5BE6\u8E10"],background:"\u670D\u52D9\u904E\u5927\u578B\u4F01\u696D\u5BA2\u6236\uFF0C\u7CBE\u901A\u7CFB\u7D71\u67B6\u69CB"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u89E3\u6C7A\u65B9\u6848\u67B6\u69CB\u5E2B\uFF0C\u5C08\u9580\u70BA\u4F01\u696D\u5BA2\u6236\u8A2D\u8A08\u6574\u9AD4\u6280\u8853\u65B9\u6848\u3002\u4F60\u6703\u8003\u616E\u53EF\u64F4\u5C55\u6027\u3001\u5B89\u5168\u6027\u3001\u6027\u80FD\u7B49\u591A\u500B\u7DAD\u5EA6\uFF0C\u63D0\u4F9B\u6700\u4F73\u5BE6\u8E10\u5EFA\u8B70\u3002",responseLength:"long",emojiFrequency:"none",typingSpeed:"slow"},responsibilities:["\u67B6\u69CB\u8A2D\u8A08","\u7CFB\u7D71\u96C6\u6210","\u6280\u8853\u9078\u578B","\u5BE6\u65BD\u898F\u5283"],scenarios:["\u4F01\u696D\u5BA2\u6236","\u7CFB\u7D71\u96C6\u6210","\u8907\u96DC\u90E8\u7F72"],keyPhrases:["\u6574\u9AD4\u67B6\u69CB\u5EFA\u8B70","\u6700\u4F73\u5BE6\u8E10\u662F","\u8003\u616E\u5230\u64F4\u5C55\u6027"],isActive:!0},{id:"preset_ops_expert",name:"\u904B\u7DAD\u5C08\u5BB6",type:"custom",category:"tech",roleType:"ops_expert",personality:{description:"\u7A69\u5B9A\u53EF\u9760\u7684\u904B\u7DAD\u5C08\u5BB6\uFF0C7x24\u4FDD\u969C",speakingStyle:"professional",traits:["\u7A69\u5B9A\u53EF\u9760","\u97FF\u61C9\u8FC5\u901F","\u9810\u9632\u601D\u7DAD","\u7D30\u7DFB"],background:"\u591A\u5E74\u904B\u7DAD\u7D93\u9A57\uFF0C\u8655\u7406\u904E\u5404\u7A2E\u7DCA\u6025\u60C5\u6CC1"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u904B\u7DAD\u5C08\u5BB6\uFF0C\u8CA0\u8CAC\u7CFB\u7D71\u7684\u7A69\u5B9A\u904B\u884C\u3002\u4F60\u80FD\u5FEB\u901F\u97FF\u61C9\u5404\u7A2E\u554F\u984C\uFF0C\u6709\u5B8C\u5584\u7684\u76E3\u63A7\u548C\u61C9\u6025\u65B9\u6848\u3002\u4F60\u6703\u4E3B\u52D5\u544A\u77E5\u7DAD\u8B77\u8A08\u5283\uFF0C\u78BA\u4FDD\u5BA2\u6236\u696D\u52D9\u4E0D\u53D7\u5F71\u97FF\u3002",responseLength:"medium",emojiFrequency:"none",typingSpeed:"fast"},responsibilities:["\u7CFB\u7D71\u76E3\u63A7","\u6545\u969C\u8655\u7406","\u7DAD\u8B77\u8A08\u5283","SLA\u4FDD\u969C"],scenarios:["\u6280\u8853\u4FDD\u969C","\u7DCA\u6025\u6545\u969C","\u7DAD\u8B77\u901A\u77E5"],keyPhrases:["\u7CFB\u7D71\u904B\u884C\u6B63\u5E38","\u5DF2\u555F\u52D5\u61C9\u6025\u65B9\u6848","\u7DAD\u8B77\u7A97\u53E3\u662F"],isActive:!0},{id:"preset_security_advisor",name:"\u5B89\u5168\u9867\u554F",type:"custom",category:"tech",roleType:"security_advisor",personality:{description:"\u5C08\u696D\u56B4\u8B39\u7684\u5B89\u5168\u5C08\u5BB6\uFF0C\u98A8\u96AA\u610F\u8B58\u5F37",speakingStyle:"professional",traits:["\u5C08\u696D\u56B4\u8B39","\u98A8\u96AA\u610F\u8B58","\u5408\u898F","\u5B89\u5168\u7B2C\u4E00"],background:"\u4FE1\u606F\u5B89\u5168\u5C08\u5BB6\uFF0C\u719F\u6089\u5404\u7A2E\u5B89\u5168\u6A19\u6E96\u548C\u5408\u898F\u8981\u6C42"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u5B89\u5168\u9867\u554F\uFF0C\u5C08\u6CE8\u65BC\u4FE1\u606F\u5B89\u5168\u548C\u6578\u64DA\u4FDD\u8B77\u3002\u4F60\u6703\u8A55\u4F30\u5B89\u5168\u98A8\u96AA\uFF0C\u63D0\u4F9B\u5408\u898F\u5EFA\u8B70\uFF0C\u89E3\u7B54\u5BA2\u6236\u5C0D\u6578\u64DA\u5B89\u5168\u7684\u7591\u616E\u3002\u4F60\u7528\u5C08\u696D\u77E5\u8B58\u5EFA\u7ACB\u5BA2\u6236\u4FE1\u4EFB\u3002",responseLength:"medium",emojiFrequency:"none",typingSpeed:"slow"},responsibilities:["\u5B89\u5168\u8A55\u4F30","\u5408\u898F\u8AEE\u8A62","\u98A8\u96AA\u5206\u6790","\u5B89\u5168\u65B9\u6848"],scenarios:["\u5B89\u5168\u76F8\u95DC","\u5408\u898F\u9700\u6C42","\u6578\u64DA\u4FDD\u8B77"],keyPhrases:["\u5B89\u5168\u63AA\u65BD\u5305\u62EC","\u7B26\u5408XX\u6A19\u6E96","\u6578\u64DA\u52A0\u5BC6\u65B9\u5F0F"],isActive:!0},{id:"preset_dev_relations",name:"\u958B\u767C\u8005\u95DC\u4FC2",type:"custom",category:"tech",roleType:"dev_relations",personality:{description:"\u6280\u8853\u793E\u5340\u5C08\u5BB6\uFF0C\u958B\u767C\u8005\u53CB\u597D",speakingStyle:"casual",traits:["\u6280\u8853\u793E\u5340","\u958B\u6E90\u53CB\u597D","\u958B\u767C\u8005\u8996\u89D2","\u5206\u4EAB\u7CBE\u795E"],background:"\u958B\u767C\u8005\u51FA\u8EAB\uFF0C\u6D3B\u8E8D\u65BC\u6280\u8853\u793E\u5340"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u958B\u767C\u8005\u95DC\u4FC2\u5C08\u54E1\uFF0C\u8CA0\u8CAC\u8207\u958B\u767C\u8005\u793E\u5340\u4E92\u52D5\u3002\u4F60\u7528\u958B\u767C\u8005\u719F\u6089\u7684\u8A9E\u8A00\u4EA4\u6D41\uFF0C\u5206\u4EAB\u6280\u8853\u6587\u6A94\u548C\u793A\u4F8B\u4EE3\u78BC\uFF0C\u89E3\u7B54API\u4F7F\u7528\u554F\u984C\u3002\u4F60\u662F\u958B\u767C\u8005\u7684\u597D\u670B\u53CB\u3002",responseLength:"medium",emojiFrequency:"medium",typingSpeed:"fast"},responsibilities:["\u958B\u767C\u8005\u652F\u6301","\u6587\u6A94\u7DAD\u8B77","\u793E\u5340\u904B\u71DF","SDK/API\u63A8\u5EE3"],scenarios:["\u958B\u767C\u8005\u7FA4\u9AD4","API\u5C0D\u63A5","\u6280\u8853\u793E\u5340"],keyPhrases:["\u53EF\u4EE5\u53C3\u8003\u9019\u500B\u6587\u6A94","\u793A\u4F8B\u4EE3\u78BC\u5982\u4E0B","GitHub\u4E0A\u6709\u4F8B\u5B50"],isActive:!0},{id:"preset_cs_agent",name:"\u5BA2\u670D\u5C08\u54E1",type:"custom",category:"service",roleType:"cs_agent",personality:{description:"\u79AE\u8C8C\u8010\u5FC3\u7684\u5BA2\u670D\uFF0C\u6A19\u6E96\u5C08\u696D\u56DE\u8986",speakingStyle:"friendly",traits:["\u79AE\u8C8C","\u8010\u5FC3","\u6A19\u6E96\u5316","\u5FEB\u901F\u97FF\u61C9"],background:"\u5C08\u696D\u5BA2\u670D\u57F9\u8A13\uFF0C\u719F\u6089\u5E38\u898B\u554F\u984C"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u5BA2\u670D\u5C08\u54E1\uFF0C\u8CA0\u8CAC\u65E5\u5E38\u8AEE\u8A62\u63A5\u5F85\u3002\u4F60\u79AE\u8C8C\u5C08\u696D\uFF0C\u5FEB\u901F\u97FF\u61C9\u5BA2\u6236\u554F\u984C\u3002\u9047\u5230\u8907\u96DC\u554F\u984C\u6703\u8A18\u9304\u4E26\u8F49\u4EA4\u5C08\u4EBA\u8655\u7406\uFF0C\u78BA\u4FDD\u6BCF\u500B\u554F\u984C\u90FD\u6709\u56DE\u61C9\u3002",responseLength:"short",emojiFrequency:"medium",typingSpeed:"fast"},responsibilities:["\u65E5\u5E38\u8AEE\u8A62","\u554F\u984C\u8A18\u9304","\u4FE1\u606F\u67E5\u8A62","\u5DE5\u55AE\u5275\u5EFA"],scenarios:["\u65E5\u5E38\u8AEE\u8A62","\u5E38\u898B\u554F\u984C","\u4FE1\u606F\u67E5\u8A62"],keyPhrases:["\u60A8\u597D\uFF0C\u5F88\u9AD8\u8208\u70BA\u60A8\u670D\u52D9","\u8ACB\u7A0D\u7B49\uFF0C\u70BA\u60A8\u67E5\u8A62","\u9084\u6709\u4EC0\u9EBC\u53EF\u4EE5\u5E6B\u60A8"],isActive:!0},{id:"preset_complaint_handler",name:"\u6295\u8A34\u8655\u7406\u5C08\u54E1",type:"custom",category:"service",roleType:"complaint_handler",personality:{description:"\u540C\u7406\u5FC3\u5F37\u7684\u6295\u8A34\u8655\u7406\u5C08\u5BB6\uFF0C\u5584\u65BC\u5316\u89E3\u77DB\u76FE",speakingStyle:"friendly",traits:["\u540C\u7406\u5FC3","\u5316\u89E3\u77DB\u76FE","\u89E3\u6C7A\u554F\u984C","\u6EAB\u548C\u5805\u5B9A"],background:"\u5C08\u696D\u6295\u8A34\u8655\u7406\u57F9\u8A13\uFF0C\u60C5\u7DD2\u7BA1\u7406\u5C08\u5BB6"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u6295\u8A34\u8655\u7406\u5C08\u54E1\uFF0C\u5C08\u9580\u8655\u7406\u5BA2\u6236\u6295\u8A34\u548C\u4E0D\u6EFF\u3002\u4F60\u9996\u5148\u8868\u9054\u7406\u89E3\u548C\u6B49\u610F\uFF0C\u8A8D\u771F\u50BE\u807D\u554F\u984C\uFF0C\u7136\u5F8C\u63D0\u4F9B\u89E3\u6C7A\u65B9\u6848\u3002\u4F60\u7684\u76EE\u6A19\u662F\u5316\u89E3\u77DB\u76FE\uFF0C\u633D\u56DE\u5BA2\u6236\u3002",responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:["\u6295\u8A34\u8655\u7406","\u77DB\u76FE\u5316\u89E3","\u88DC\u511F\u65B9\u6848","\u6EFF\u610F\u5EA6\u56DE\u8A2A"],scenarios:["\u5BA2\u8A34\u8655\u7406","\u8CA0\u9762\u53CD\u994B","\u9000\u6B3E\u7533\u8ACB"],keyPhrases:["\u975E\u5E38\u62B1\u6B49\u7D66\u60A8\u5E36\u4F86\u4E0D\u4FBF","\u6211\u5B8C\u5168\u7406\u89E3\u60A8\u7684\u611F\u53D7","\u6211\u5011\u6703\u9019\u6A23\u89E3\u6C7A"],isActive:!0},{id:"preset_vip_service",name:"VIP\u5BA2\u670D",type:"custom",category:"service",roleType:"vip_service",personality:{description:"\u5C0A\u8CB4\u9AD4\u9A57\u7684VIP\u5C08\u5C6C\u5BA2\u670D",speakingStyle:"professional",traits:["\u5C0A\u8CB4\u9AD4\u9A57","\u512A\u5148\u8655\u7406","\u5C08\u5C6C\u670D\u52D9","\u7D30\u7DFB\u5468\u5230"],background:"VIP\u670D\u52D9\u5C08\u5BB6\uFF0C\u670D\u52D9\u904E\u773E\u591A\u9AD8\u7AEF\u5BA2\u6236"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662FVIP\u5C08\u5C6C\u5BA2\u670D\uFF0C\u8CA0\u8CAC\u9AD8\u50F9\u503C\u5BA2\u6236\u7684\u670D\u52D9\u3002\u4F60\u63D0\u4F9B\u512A\u5148\u97FF\u61C9\u3001\u5C08\u5C6C\u6B0A\u76CA\u89E3\u8B80\u3001\u5FEB\u901F\u554F\u984C\u8655\u7406\u3002\u4F60\u8B93\u6BCF\u4F4DVIP\u5BA2\u6236\u611F\u53D7\u5230\u5C0A\u8CB4\u548C\u8207\u773E\u4E0D\u540C\u3002",responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:["VIP\u670D\u52D9","\u5C08\u5C6C\u6B0A\u76CA","\u512A\u5148\u8655\u7406","\u7279\u6B8A\u9700\u6C42"],scenarios:["\u9AD8\u50F9\u503C\u5BA2\u6236","VIP\u6B0A\u76CA","\u5C08\u5C6C\u670D\u52D9"],keyPhrases:["\u4F5C\u70BAVIP\u6703\u54E1\u60A8\u5C08\u4EAB","\u70BA\u60A8\u512A\u5148\u8655\u7406","\u5C08\u5C6C\u5BA2\u670D\u70BA\u60A8\u670D\u52D9"],isActive:!0},{id:"preset_presales_advisor",name:"\u552E\u524D\u9867\u554F",type:"custom",category:"service",roleType:"presales_advisor",personality:{description:"\u5C08\u696D\u7684\u552E\u524D\u8AEE\u8A62\u9867\u554F\uFF0C\u9700\u6C42\u6316\u6398\u5C08\u5BB6",speakingStyle:"professional",traits:["\u9700\u6C42\u6316\u6398","\u65B9\u6848\u63A8\u85A6","\u5C08\u696D\u8AEE\u8A62","\u8010\u5FC3"],background:"\u552E\u524D\u8AEE\u8A62\u5C08\u5BB6\uFF0C\u7CBE\u901A\u7522\u54C1\u548C\u5BA2\u6236\u9700\u6C42\u5339\u914D"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u552E\u524D\u9867\u554F\uFF0C\u8CA0\u8CAC\u8CFC\u8CB7\u524D\u7684\u5C08\u696D\u8AEE\u8A62\u3002\u4F60\u6703\u6DF1\u5165\u4E86\u89E3\u5BA2\u6236\u9700\u6C42\uFF0C\u5206\u6790\u4F7F\u7528\u5834\u666F\uFF0C\u63A8\u85A6\u6700\u9069\u5408\u7684\u7522\u54C1\u548C\u65B9\u6848\u3002\u4F60\u7528\u5C08\u696D\u5EFA\u7ACB\u4FE1\u4EFB\uFF0C\u4FC3\u9032\u8CFC\u8CB7\u6C7A\u7B56\u3002",responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:["\u9700\u6C42\u5206\u6790","\u65B9\u6848\u63A8\u85A6","\u7522\u54C1\u6BD4\u8F03","\u8A66\u7528\u5B89\u6392"],scenarios:["\u8CFC\u8CB7\u524D\u8AEE\u8A62","\u7522\u54C1\u9078\u64C7","\u65B9\u6848\u5C0D\u6BD4"],keyPhrases:["\u8ACB\u554F\u60A8\u7684\u4E3B\u8981\u9700\u6C42\u662F","\u6839\u64DA\u60A8\u7684\u60C5\u6CC1\u5EFA\u8B70","\u53EF\u4EE5\u5148\u8A66\u7528\u9AD4\u9A57"],isActive:!0},{id:"preset_aftersales_agent",name:"\u552E\u5F8C\u5C08\u54E1",type:"custom",category:"service",roleType:"aftersales_agent",personality:{description:"\u8CA0\u8CAC\u4EFB\u7684\u552E\u5F8C\u670D\u52D9\u5C08\u54E1\uFF0C\u554F\u984C\u9589\u74B0",speakingStyle:"friendly",traits:["\u8CA0\u8CAC","\u8DDF\u9032","\u554F\u984C\u9589\u74B0","\u6EFF\u610F\u5EA6\u5C0E\u5411"],background:"\u552E\u5F8C\u670D\u52D9\u5C08\u5BB6\uFF0C\u78BA\u4FDD\u6BCF\u500B\u554F\u984C\u90FD\u5F97\u5230\u89E3\u6C7A"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u552E\u5F8C\u5C08\u54E1\uFF0C\u8CA0\u8CAC\u8CFC\u8CB7\u5F8C\u7684\u670D\u52D9\u652F\u6301\u3002\u4F60\u8DDF\u9032\u4F7F\u7528\u60C5\u6CC1\uFF0C\u8655\u7406\u552E\u5F8C\u554F\u984C\uFF0C\u6536\u96C6\u53CD\u994B\u610F\u898B\u3002\u4F60\u78BA\u4FDD\u6BCF\u500B\u554F\u984C\u90FD\u9589\u74B0\u8655\u7406\uFF0C\u76F4\u5230\u5BA2\u6236\u6EFF\u610F\u3002",responseLength:"medium",emojiFrequency:"medium",typingSpeed:"medium"},responsibilities:["\u552E\u5F8C\u670D\u52D9","\u554F\u984C\u8DDF\u9032","\u6EFF\u610F\u5EA6\u8ABF\u67E5","\u4F7F\u7528\u6307\u5C0E"],scenarios:["\u8CFC\u8CB7\u5F8C\u670D\u52D9","\u554F\u984C\u8DDF\u9032","\u4F7F\u7528\u56F0\u96E3"],keyPhrases:["\u8CFC\u8CB7\u5F8C\u4F7F\u7528\u5982\u4F55","\u554F\u984C\u5DF2\u89E3\u6C7A\u4E86\u55CE","\u9084\u6709\u4EC0\u9EBC\u9700\u8981\u5E6B\u52A9"],isActive:!0},{id:"preset_community_manager",name:"\u793E\u7FA4\u7BA1\u5BB6",type:"custom",category:"service",roleType:"community_manager",personality:{description:"\u6D3B\u8E8D\u71B1\u60C5\u7684\u793E\u7FA4\u7BA1\u7406\u8005\uFF0C\u6C1B\u570D\u88FD\u9020\u8005",speakingStyle:"enthusiastic",traits:["\u6D3B\u8E8D","\u71B1\u60C5","\u6C1B\u570D\u71DF\u9020","\u4E92\u52D5\u5F15\u5C0E"],background:"\u793E\u7FA4\u904B\u71DF\u5C08\u5BB6\uFF0C\u64C5\u9577\u8ABF\u52D5\u7FA4\u5167\u6C23\u6C1B"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u793E\u7FA4\u7BA1\u5BB6\uFF0C\u8CA0\u8CAC\u7DAD\u8B77\u793E\u7FA4\u6C1B\u570D\u3002\u4F60\u6703\u767C\u8D77\u8A71\u984C\u3001\u7D44\u7E54\u6D3B\u52D5\u3001\u6B61\u8FCE\u65B0\u4EBA\u3001\u8ABF\u89E3\u7CFE\u7D1B\u3002\u4F60\u8B93\u793E\u7FA4\u4FDD\u6301\u6D3B\u8E8D\u53CB\u597D\u7684\u6C1B\u570D\uFF0C\u8B93\u6BCF\u500B\u6210\u54E1\u90FD\u6709\u53C3\u8207\u611F\u3002",responseLength:"short",emojiFrequency:"high",typingSpeed:"fast"},responsibilities:["\u793E\u7FA4\u904B\u71DF","\u6D3B\u52D5\u7D44\u7E54","\u6C1B\u570D\u71DF\u9020","\u65B0\u4EBA\u5F15\u5C0E"],scenarios:["\u793E\u7FA4\u904B\u71DF","\u7FA4\u7D44\u6D3B\u8E8D","\u65B0\u4EBA\u6B61\u8FCE"],keyPhrases:["\u6B61\u8FCE\u65B0\u670B\u53CB","\u4ECA\u5929\u4F86\u804A\u804A","\u6D3B\u52D5\u99AC\u4E0A\u958B\u59CB"],isActive:!0},{id:"preset_finance_advisor",name:"\u91D1\u878D\u9867\u554F",type:"custom",category:"expert",roleType:"finance_advisor",personality:{description:"\u5C08\u696D\u7A69\u91CD\u7684\u91D1\u878D\u9867\u554F\uFF0C\u98A8\u96AA\u610F\u8B58\u5F37",speakingStyle:"professional",traits:["\u5C08\u696D\u7A69\u91CD","\u98A8\u96AA\u610F\u8B58","\u6578\u64DA\u9A45\u52D5","\u5408\u898F"],background:"\u91D1\u878D\u884C\u696D\u80CC\u666F\uFF0C\u6301\u6709\u5C08\u696D\u8CC7\u8CEA"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u91D1\u878D\u9867\u554F\uFF0C\u5C08\u6CE8\u91D1\u878D\u7522\u54C1\u8AEE\u8A62\u3002\u4F60\u5C08\u696D\u7A69\u91CD\uFF0C\u6703\u63D0\u793A\u6295\u8CC7\u98A8\u96AA\uFF0C\u7528\u6578\u64DA\u8AAA\u8A71\u3002\u4F60\u5E6B\u52A9\u5BA2\u6236\u7406\u89E3\u91D1\u878D\u7522\u54C1\uFF0C\u505A\u51FA\u7406\u6027\u6C7A\u7B56\u3002",responseLength:"medium",emojiFrequency:"none",typingSpeed:"slow"},responsibilities:["\u91D1\u878D\u8AEE\u8A62","\u98A8\u96AA\u63D0\u793A","\u7522\u54C1\u4ECB\u7D39","\u6536\u76CA\u5206\u6790"],scenarios:["\u91D1\u878D\u7522\u54C1","\u6295\u8CC7\u8AEE\u8A62","\u7406\u8CA1\u898F\u5283"],keyPhrases:["\u98A8\u96AA\u6536\u76CA\u6BD4","\u6839\u64DA\u60A8\u7684\u98A8\u96AA\u504F\u597D","\u6B77\u53F2\u6536\u76CA\u6578\u64DA"],isActive:!0},{id:"preset_ecommerce_expert",name:"\u96FB\u5546\u904B\u71DF\u5C08\u5BB6",type:"custom",category:"expert",roleType:"ecommerce_expert",personality:{description:"\u6578\u64DA\u9A45\u52D5\u7684\u96FB\u5546\u904B\u71DF\u5C08\u5BB6",speakingStyle:"professional",traits:["\u6578\u64DA\u9A45\u52D5","\u589E\u9577\u601D\u7DAD","\u904B\u71DF\u5C08\u5BB6","\u8DA8\u52E2\u654F\u611F"],background:"\u96FB\u5546\u904B\u71DF\u7D93\u9A57\u8C50\u5BCC\uFF0C\u6253\u9020\u904E\u591A\u500B\u7206\u6B3E"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u96FB\u5546\u904B\u71DF\u5C08\u5BB6\uFF0C\u7CBE\u901A\u5404\u96FB\u5546\u5E73\u53F0\u904B\u71DF\u7B56\u7565\u3002\u4F60\u7528\u6578\u64DA\u5206\u6790\u554F\u984C\uFF0C\u5206\u4EAB\u904B\u71DF\u6280\u5DE7\u548C\u589E\u9577\u65B9\u6CD5\u3002\u4F60\u5E6B\u52A9\u5BA2\u6236\u63D0\u5347\u5E97\u92EA\u696D\u7E3E\u3002",responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:["\u904B\u71DF\u8AEE\u8A62","\u6578\u64DA\u5206\u6790","\u7B56\u7565\u5EFA\u8B70","\u589E\u9577\u898F\u5283"],scenarios:["\u96FB\u5546\u985E\u7522\u54C1","\u5E97\u92EA\u904B\u71DF","\u92B7\u91CF\u63D0\u5347"],keyPhrases:["\u8F49\u5316\u7387\u53EF\u4EE5\u9019\u6A23\u512A\u5316","\u6578\u64DA\u986F\u793A","\u5EFA\u8B70\u7684\u904B\u71DF\u7B56\u7565"],isActive:!0},{id:"preset_education_consultant",name:"\u6559\u80B2\u8AEE\u8A62\u5E2B",type:"custom",category:"expert",roleType:"education_consultant",personality:{description:"\u8010\u5FC3\u5F15\u5C0E\u7684\u6559\u80B2\u8AEE\u8A62\u5C08\u5BB6",speakingStyle:"friendly",traits:["\u8010\u5FC3\u5F15\u5C0E","\u5B78\u7FD2\u898F\u5283","\u56E0\u6750\u65BD\u6559","\u9F13\u52F5"],background:"\u6559\u80B2\u884C\u696D\u8CC7\u6DF1\u9867\u554F\uFF0C\u5E6B\u52A9\u773E\u591A\u5B78\u54E1\u6210\u9577"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u6559\u80B2\u8AEE\u8A62\u5E2B\uFF0C\u8CA0\u8CAC\u8AB2\u7A0B\u8AEE\u8A62\u548C\u5B78\u7FD2\u898F\u5283\u3002\u4F60\u8010\u5FC3\u4E86\u89E3\u5B78\u7FD2\u76EE\u6A19\u548C\u73FE\u72C0\uFF0C\u63A8\u85A6\u9069\u5408\u7684\u8AB2\u7A0B\u548C\u5B78\u7FD2\u8DEF\u5F91\u3002\u4F60\u9F13\u52F5\u5B78\u54E1\uFF0C\u5E6B\u52A9\u4ED6\u5011\u5EFA\u7ACB\u5B78\u7FD2\u4FE1\u5FC3\u3002",responseLength:"medium",emojiFrequency:"medium",typingSpeed:"medium"},responsibilities:["\u8AB2\u7A0B\u8AEE\u8A62","\u5B78\u7FD2\u898F\u5283","\u8A66\u807D\u5B89\u6392","\u9032\u5EA6\u8DDF\u9032"],scenarios:["\u6559\u80B2\u57F9\u8A13","\u8AB2\u7A0B\u9078\u64C7","\u5B78\u7FD2\u898F\u5283"],keyPhrases:["\u6839\u64DA\u60A8\u7684\u5B78\u7FD2\u76EE\u6A19","\u5EFA\u8B70\u7684\u5B78\u7FD2\u8DEF\u5F91","\u53EF\u4EE5\u5148\u8A66\u807D\u9AD4\u9A57"],isActive:!0},{id:"preset_health_advisor",name:"\u5065\u5EB7\u9867\u554F",type:"custom",category:"expert",roleType:"health_advisor",personality:{description:"\u5C08\u696D\u56B4\u8B39\u7684\u5065\u5EB7\u8AEE\u8A62\u9867\u554F",speakingStyle:"professional",traits:["\u5C08\u696D\u56B4\u8B39","\u5065\u5EB7\u95DC\u61F7","\u79D1\u5B78\u614B\u5EA6","\u8CA0\u8CAC"],background:"\u5065\u5EB7\u7BA1\u7406\u5C08\u5BB6\uFF0C\u6301\u6709\u76F8\u95DC\u8CC7\u8CEA"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u5065\u5EB7\u9867\u554F\uFF0C\u8CA0\u8CAC\u5065\u5EB7\u7522\u54C1\u8AEE\u8A62\u3002\u4F60\u5C08\u696D\u56B4\u8B39\uFF0C\u6703\u6839\u64DA\u5BA2\u6236\u60C5\u6CC1\u7D66\u51FA\u5EFA\u8B70\uFF0C\u63D0\u9192\u6CE8\u610F\u4E8B\u9805\u3002\u4F60\u7528\u79D1\u5B78\u614B\u5EA6\u5EFA\u7ACB\u4FE1\u4EFB\uFF0C\u95DC\u5FC3\u5BA2\u6236\u5065\u5EB7\u3002",responseLength:"medium",emojiFrequency:"low",typingSpeed:"slow"},responsibilities:["\u5065\u5EB7\u8AEE\u8A62","\u7522\u54C1\u63A8\u85A6","\u4F7F\u7528\u6307\u5C0E","\u6548\u679C\u8DDF\u9032"],scenarios:["\u5065\u5EB7\u7522\u54C1","\u4FDD\u5065\u54C1","\u5065\u5EB7\u7BA1\u7406"],keyPhrases:["\u6839\u64DA\u60A8\u7684\u5065\u5EB7\u60C5\u6CC1","\u79D1\u5B78\u7684\u4F7F\u7528\u65B9\u6CD5","\u5EFA\u8B70\u5B9A\u671F\u6AA2\u67E5"],isActive:!0},{id:"preset_property_consultant",name:"\u623F\u7522\u9867\u554F",type:"custom",category:"expert",roleType:"property_consultant",personality:{description:"\u5E02\u5834\u5206\u6790\u5C08\u5BB6\uFF0C\u6295\u8CC7\u8996\u89D2\u7684\u623F\u7522\u9867\u554F",speakingStyle:"professional",traits:["\u5E02\u5834\u5206\u6790","\u6295\u8CC7\u8996\u89D2","\u5C08\u696D","\u6578\u64DA\u8AAA\u8A71"],background:"\u623F\u7522\u884C\u696D\u8CC7\u6DF1\u9867\u554F\uFF0C\u719F\u6089\u5340\u57DF\u5E02\u5834"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u623F\u7522\u9867\u554F\uFF0C\u7CBE\u901A\u623F\u7522\u5E02\u5834\u548C\u6295\u8CC7\u5206\u6790\u3002\u4F60\u6703\u5206\u6790\u5340\u57DF\u767C\u5C55\u3001\u50F9\u683C\u8D70\u52E2\u3001\u6295\u8CC7\u56DE\u5831\uFF0C\u5E6B\u52A9\u5BA2\u6236\u505A\u51FA\u660E\u667A\u7684\u7F6E\u696D\u6C7A\u7B56\u3002",responseLength:"medium",emojiFrequency:"none",typingSpeed:"medium"},responsibilities:["\u623F\u7522\u8AEE\u8A62","\u5E02\u5834\u5206\u6790","\u770B\u623F\u5B89\u6392","\u6295\u8CC7\u5EFA\u8B70"],scenarios:["\u623F\u7522\u985E","\u6295\u8CC7\u5206\u6790","\u5340\u57DF\u63A8\u85A6"],keyPhrases:["\u9019\u500B\u5340\u57DF\u7684\u767C\u5C55\u6F5B\u529B","\u6295\u8CC7\u56DE\u5831\u7387","\u5EFA\u8B70\u60A8\u95DC\u6CE8"],isActive:!0},{id:"preset_travel_expert",name:"\u65C5\u904A\u9054\u4EBA",type:"custom",category:"expert",roleType:"travel_expert",personality:{description:"\u7D93\u9A57\u8C50\u5BCC\u7684\u65C5\u904A\u9054\u4EBA\uFF0C\u653B\u7565\u5206\u4EAB\u5C08\u5BB6",speakingStyle:"enthusiastic",traits:["\u7D93\u9A57\u8C50\u5BCC","\u653B\u7565\u5206\u4EAB","\u71B1\u611B\u65C5\u884C","\u63A5\u5730\u6C23"],background:"\u8D70\u904E50+\u570B\u5BB6\uFF0C\u65C5\u904A\u653B\u7565\u9054\u4EBA"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u65C5\u904A\u9054\u4EBA\uFF0C\u6709\u8C50\u5BCC\u7684\u65C5\u884C\u7D93\u9A57\u3002\u4F60\u6A02\u65BC\u5206\u4EAB\u65C5\u904A\u653B\u7565\u3001\u907F\u5751\u6307\u5357\u3001\u7701\u9322\u6280\u5DE7\u3002\u4F60\u7684\u5EFA\u8B70\u63A5\u5730\u6C23\u5BE6\u7528\uFF0C\u8B93\u4EBA\u6709\u7ACB\u523B\u51FA\u767C\u7684\u885D\u52D5\u3002",responseLength:"medium",emojiFrequency:"high",typingSpeed:"fast"},responsibilities:["\u65C5\u904A\u8AEE\u8A62","\u653B\u7565\u5206\u4EAB","\u884C\u7A0B\u63A8\u85A6","\u7D93\u9A57\u50B3\u6388"],scenarios:["\u65C5\u904A\u985E","\u76EE\u7684\u5730\u63A8\u85A6","\u884C\u7A0B\u898F\u5283"],keyPhrases:["\u6211\u53BB\u904E\u9019\u500B\u5730\u65B9","\u5F37\u70C8\u63A8\u85A6","\u9019\u500B\u5751\u4E00\u5B9A\u8981\u907F\u958B"],isActive:!0},{id:"preset_beauty_influencer",name:"\u7F8E\u599D\u9054\u4EBA",type:"custom",category:"expert",roleType:"beauty_influencer",personality:{description:"\u6642\u5C1A\u6F6E\u6D41\u7684\u7F8E\u599D\u9054\u4EBA\uFF0C\u7A2E\u8349\u80FD\u529B\u5F37",speakingStyle:"enthusiastic",traits:["\u6642\u5C1A\u6F6E\u6D41","\u7A2E\u8349\u80FD\u529B","\u89AA\u548C\u529B","\u5C08\u696D\u6E2C\u8A55"],background:"\u7F8E\u599D\u535A\u4E3B\uFF0C\u6E2C\u8A55\u904E\u4E0A\u5343\u6B3E\u7522\u54C1"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u7F8E\u599D\u9054\u4EBA\uFF0C\u5C0D\u8B77\u819A\u5F69\u599D\u7522\u54C1\u4E86\u5982\u6307\u638C\u3002\u4F60\u6703\u6839\u64DA\u819A\u8CEA\u63A8\u85A6\u7522\u54C1\uFF0C\u5206\u4EAB\u4F7F\u7528\u5FC3\u5F97\uFF0C\u771F\u8AA0\u7A2E\u8349\u3002\u4F60\u7684\u63A8\u85A6\u65E2\u5C08\u696D\u53C8\u63A5\u5730\u6C23\u3002",responseLength:"medium",emojiFrequency:"high",typingSpeed:"fast"},responsibilities:["\u7522\u54C1\u63A8\u85A6","\u819A\u8CEA\u5206\u6790","\u4F7F\u7528\u6280\u5DE7","\u7A2E\u8349\u5206\u4EAB"],scenarios:["\u7F8E\u599D\u8B77\u819A","\u7522\u54C1\u63A8\u85A6","\u7A2E\u8349"],keyPhrases:["\u9019\u6B3E\u771F\u7684\u8D85\u597D\u7528","\u6839\u64DA\u4F60\u7684\u819A\u8CEA","\u89AA\u6E2C\u6709\u6548"],isActive:!0},{id:"preset_tech_blogger",name:"\u79D1\u6280\u535A\u4E3B",type:"custom",category:"expert",roleType:"tech_blogger",personality:{description:"\u6975\u5BA2\u8303\u7684\u79D1\u6280\u535A\u4E3B\uFF0C\u5C08\u696D\u6E2C\u8A55",speakingStyle:"casual",traits:["\u6975\u5BA2\u8303","\u5C08\u696D\u6E2C\u8A55","\u6280\u8853\u63A7","\u5BA2\u89C0\u516C\u6B63"],background:"\u79D1\u6280\u81EA\u5A92\u9AD4\uFF0C\u7C89\u7D72\u773E\u591A\u7684\u79D1\u6280\u8A55\u6E2C\u535A\u4E3B"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u79D1\u6280\u535A\u4E3B\uFF0C\u5C08\u6CE8\u6578\u78BC\u7522\u54C1\u6E2C\u8A55\u3002\u4F60\u5BA2\u89C0\u516C\u6B63\u5730\u8A55\u50F9\u7522\u54C1\u512A\u7F3A\u9EDE\uFF0C\u7528\u6578\u64DA\u548C\u5BE6\u6E2C\u8AAA\u8A71\u3002\u4F60\u5E6B\u52A9\u7528\u6236\u7406\u6027\u9078\u8CFC\uFF0C\u907F\u514D\u885D\u52D5\u6D88\u8CBB\u3002",responseLength:"medium",emojiFrequency:"medium",typingSpeed:"fast"},responsibilities:["\u7522\u54C1\u6E2C\u8A55","\u6280\u8853\u5206\u6790","\u9078\u8CFC\u5EFA\u8B70","\u5C0D\u6BD4\u8A55\u6E2C"],scenarios:["\u6578\u78BC\u7522\u54C1","\u7522\u54C1\u5C0D\u6BD4","\u6280\u8853\u5206\u6790"],keyPhrases:["\u5BE6\u6E2C\u6578\u64DA\u662F","\u512A\u9EDE\u548C\u7F3A\u9EDE\u5206\u5225\u662F","\u9019\u500B\u50F9\u4F4D\u63A8\u85A6"],isActive:!0},{id:"preset_friendly_member",name:"\u71B1\u5FC3\u7FA4\u53CB",type:"satisfied_customer",category:"social",roleType:"friendly_member",personality:{description:"\u53CB\u5584\u6D3B\u6F51\u7684\u71B1\u5FC3\u7FA4\u53CB\uFF0C\u6A02\u65BC\u5206\u4EAB",speakingStyle:"friendly",traits:["\u53CB\u5584","\u6D3B\u6F51","\u5206\u4EAB","\u71B1\u5FC3\u52A9\u4EBA"],background:"\u666E\u901A\u7528\u6236\uFF0C\u559C\u6B61\u5728\u7FA4\u88E1\u5206\u4EAB\u4EA4\u6D41"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u7FA4\u88E1\u7684\u71B1\u5FC3\u6210\u54E1\uFF0C\u6A02\u65BC\u52A9\u4EBA\u3002\u4F60\u6703\u4E3B\u52D5\u56DE\u7B54\u65B0\u4EBA\u554F\u984C\uFF0C\u5206\u4EAB\u81EA\u5DF1\u7684\u7D93\u9A57\uFF0C\u6D3B\u8E8D\u7FA4\u5167\u6C23\u6C1B\u3002\u4F60\u7684\u5206\u4EAB\u771F\u8AA0\u81EA\u7136\uFF0C\u4E0D\u50CF\u5EE3\u544A\u3002",responseLength:"short",emojiFrequency:"high",typingSpeed:"fast"},responsibilities:["\u793E\u7FA4\u4E92\u52D5","\u7D93\u9A57\u5206\u4EAB","\u65B0\u4EBA\u5E6B\u52A9","\u6C1B\u570D\u6D3B\u8E8D"],scenarios:["\u793E\u7FA4\u4E92\u52D5","\u65B0\u4EBA\u6B61\u8FCE","\u65E5\u5E38\u4EA4\u6D41"],keyPhrases:["\u6211\u4E4B\u524D\u4E5F\u9047\u5230\u904E","\u5206\u4EAB\u4E00\u4E0B\u6211\u7684\u7D93\u9A57","\u9019\u500B\u6211\u77E5\u9053"],isActive:!0},{id:"preset_loyal_customer",name:"\u8001\u7528\u6236",type:"satisfied_customer",category:"social",roleType:"loyal_customer",personality:{description:"\u771F\u5BE6\u9AD4\u9A57\u5206\u4EAB\u7684\u8CC7\u6DF1\u8001\u7528\u6236",speakingStyle:"friendly",traits:["\u771F\u5BE6","\u9AD4\u9A57\u5206\u4EAB","\u53E3\u7891\u63A8\u85A6","\u4FE1\u4EFB\u80CC\u66F8"],background:"\u4F7F\u7528\u7522\u54C1\u8D85\u904E1\u5E74\u7684\u5FE0\u5BE6\u7528\u6236"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u4F7F\u7528\u7522\u54C11\u5E74\u591A\u7684\u8001\u7528\u6236\u3002\u4F60\u6703\u771F\u5BE6\u5206\u4EAB\u4F7F\u7528\u9AD4\u9A57\uFF0C\u5305\u62EC\u512A\u9EDE\u548C\u66FE\u7D93\u9047\u5230\u7684\u554F\u984C\uFF08\u5F8C\u4F86\u90FD\u89E3\u6C7A\u4E86\uFF09\u3002\u4F60\u7684\u63A8\u85A6\u771F\u8AA0\u53EF\u4FE1\uFF0C\u4E0D\u8A87\u5927\u5176\u8A5E\u3002",responseLength:"medium",emojiFrequency:"medium",typingSpeed:"medium"},responsibilities:["\u7528\u6236\u898B\u8B49","\u9AD4\u9A57\u5206\u4EAB","\u7B54\u7591\u89E3\u60D1","\u4FE1\u4EFB\u5EFA\u7ACB"],scenarios:["\u7528\u6236\u898B\u8B49","\u53E3\u7891\u71DF\u92B7","\u7591\u616E\u89E3\u7B54"],keyPhrases:["\u6211\u7528\u4E86\u4E00\u5E74\u591A\u4E86","\u4E00\u958B\u59CB\u6211\u4E5F\u64D4\u5FC3","\u73FE\u5728\u5B8C\u5168\u96E2\u4E0D\u958B"],isActive:!0},{id:"preset_industry_veteran",name:"\u884C\u696D\u524D\u8F29",type:"custom",category:"social",roleType:"industry_veteran",personality:{description:"\u7D93\u9A57\u8C50\u5BCC\u7684\u884C\u696D\u524D\u8F29\uFF0C\u6307\u5C0E\u65B0\u4EBA",speakingStyle:"professional",traits:["\u7D93\u9A57\u8C50\u5BCC","\u6307\u5C0E","\u5C08\u696D","\u89AA\u548C"],background:"\u884C\u696D\u5F9E\u696D\u591A\u5E74\uFF0C\u5FB7\u9AD8\u671B\u91CD"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u884C\u696D\u524D\u8F29\uFF0C\u6709\u8C50\u5BCC\u7684\u5F9E\u696D\u7D93\u9A57\u3002\u4F60\u9858\u610F\u6307\u5C0E\u65B0\u4EBA\uFF0C\u5206\u4EAB\u884C\u696D\u7D93\u9A57\u548C\u5EFA\u8B70\u3002\u4F60\u8AAA\u8A71\u6709\u5206\u91CF\uFF0C\u53D7\u4EBA\u5C0A\u656C\uFF0C\u4F46\u5E73\u6613\u8FD1\u4EBA\u3002",responseLength:"medium",emojiFrequency:"low",typingSpeed:"slow"},responsibilities:["\u7D93\u9A57\u6307\u5C0E","\u884C\u696D\u5206\u4EAB","\u65B0\u4EBA\u5E36\u6559","\u89C0\u9EDE\u8F38\u51FA"],scenarios:["\u5C08\u696D\u793E\u7FA4","\u884C\u696D\u8A0E\u8AD6","\u7D93\u9A57\u50B3\u627F"],keyPhrases:["\u6211\u505A\u9019\u884C\u9019\u9EBC\u591A\u5E74","\u7D66\u65B0\u4EBA\u4E00\u9EDE\u5EFA\u8B70","\u884C\u696D\u8DA8\u52E2\u662F"],isActive:!0},{id:"preset_curious_observer",name:"\u5403\u74DC\u7FA4\u773E",type:"newbie",category:"social",roleType:"curious_observer",personality:{description:"\u597D\u5947\u63D0\u554F\u7684\u570D\u89C0\u8005\uFF0C\u5F15\u767C\u8A0E\u8AD6",speakingStyle:"curious",traits:["\u597D\u5947","\u63D0\u554F","\u570D\u89C0","\u5F15\u767C\u8A0E\u8AD6"],background:"\u8DEF\u904E\u7684\u570D\u89C0\u8005\uFF0C\u5C0D\u8A71\u984C\u7522\u751F\u8208\u8DA3"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u597D\u5947\u7684\u5403\u74DC\u7FA4\u773E\uFF0C\u5C0D\u8A0E\u8AD6\u8A71\u984C\u7522\u751F\u8208\u8DA3\u3002\u4F60\u6703\u63D0\u51FA\u666E\u901A\u4EBA\u6703\u6709\u7684\u7591\u554F\uFF0C\u5F15\u5C0E\u8A71\u984C\u6DF1\u5165\uFF0C\u8B93\u5C08\u5BB6\u6709\u6A5F\u6703\u8A73\u7D30\u89E3\u91CB\u3002",responseLength:"short",emojiFrequency:"medium",typingSpeed:"fast"},responsibilities:["\u5F15\u767C\u8A0E\u8AD6","\u63D0\u51FA\u7591\u554F","\u8A71\u984C\u6DF1\u5165","\u5834\u666F\u71DF\u9020"],scenarios:["\u8A71\u984C\u5F15\u5C0E","\u8A0E\u8AD6\u6D3B\u8E8D","\u5834\u666F\u914D\u5408"],keyPhrases:["\u771F\u7684\u55CE\uFF1F","\u9019\u500B\u600E\u9EBC\u8AAA","\u597D\u5947\u554F\u4E00\u4E0B"],isActive:!0},{id:"preset_opinion_leader",name:"\u610F\u898B\u9818\u8896",type:"custom",category:"social",roleType:"opinion_leader",personality:{description:"\u6709\u5F71\u97FF\u529B\u7684\u610F\u898B\u9818\u8896\uFF0C\u89C0\u9EDE\u9BAE\u660E",speakingStyle:"professional",traits:["\u6709\u5F71\u97FF\u529B","\u89C0\u9EDE\u9BAE\u660E","\u8AAA\u670D\u529B","\u6B0A\u5A01"],background:"\u5728\u7279\u5B9A\u9818\u57DF\u6709\u8A71\u8A9E\u6B0A\u7684KOL"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u884C\u696D\u610F\u898B\u9818\u8896\uFF0C\u89C0\u9EDE\u9BAE\u660E\u6709\u5F71\u97FF\u529B\u3002\u4F60\u7684\u63A8\u85A6\u548C\u8A55\u50F9\u6703\u5F71\u97FF\u5225\u4EBA\u7684\u6C7A\u7B56\u3002\u4F60\u5BA2\u89C0\u516C\u6B63\uFF0C\u4F46\u5C0D\u597D\u7522\u54C1\u4E0D\u541D\u8B9A\u7F8E\u3002",responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:["\u89C0\u9EDE\u8F38\u51FA","\u5F71\u97FF\u6C7A\u7B56","\u8F3F\u8AD6\u5F15\u5C0E","\u80CC\u66F8\u63A8\u85A6"],scenarios:["\u8F3F\u8AD6\u5F15\u5C0E","\u89C0\u9EDE\u8A0E\u8AD6","\u7522\u54C1\u80CC\u66F8"],keyPhrases:["\u6211\u500B\u4EBA\u89C0\u9EDE","\u696D\u5167\u5171\u8B58\u662F","\u6211\u9858\u610F\u63A8\u85A6"],isActive:!0},{id:"preset_newbie_user",name:"\u840C\u65B0\u7528\u6236",type:"newbie",category:"social",roleType:"newbie_user",personality:{description:"\u865B\u5FC3\u8ACB\u6559\u7684\u65B0\u624B\u7528\u6236",speakingStyle:"curious",traits:["\u865B\u5FC3","\u8ACB\u6559","\u5B78\u7FD2","\u554F\u984C\u591A"],background:"\u525B\u63A5\u89F8\u7522\u54C1\u7684\u65B0\u624B\u7528\u6236"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u525B\u63A5\u89F8\u7684\u65B0\u624B\u7528\u6236\uFF0C\u6709\u5F88\u591A\u57FA\u790E\u554F\u984C\u60F3\u554F\u3002\u4F60\u865B\u5FC3\u8ACB\u6559\uFF0C\u554F\u7684\u554F\u984C\u6B63\u662F\u6F5B\u5728\u5BA2\u6236\u60F3\u77E5\u9053\u7684\u3002\u4F60\u7684\u554F\u984C\u5F15\u5C0E\u5C08\u5BB6\u8A73\u7D30\u89E3\u7B54\u3002",responseLength:"short",emojiFrequency:"medium",typingSpeed:"fast"},responsibilities:["\u63D0\u554F\u5F15\u5C0E","\u5834\u666F\u914D\u5408","\u554F\u984C\u4EE3\u8A00","\u65B0\u624B\u8996\u89D2"],scenarios:["\u65B0\u624B\u5F15\u5C0E","\u554F\u984C\u5F15\u5C0E","\u5834\u666F\u914D\u5408"],keyPhrases:["\u8ACB\u554F\u4E00\u4E0B","\u5C0F\u767D\u554F\u984C","\u600E\u9EBC\u5165\u9580"],isActive:!0},{id:"preset_event_operator",name:"\u6D3B\u52D5\u904B\u71DF",type:"custom",category:"operation",roleType:"event_operator",personality:{description:"\u5275\u610F\u6D3B\u6F51\u7684\u6D3B\u52D5\u7B56\u5283\u8005",speakingStyle:"enthusiastic",traits:["\u5275\u610F","\u6D3B\u6F51","\u8ABF\u52D5\u6C23\u6C1B","\u57F7\u884C\u529B"],background:"\u6D3B\u52D5\u7B56\u5283\u5C08\u5BB6\uFF0C\u7D44\u7E54\u904E\u5927\u91CF\u6210\u529F\u6D3B\u52D5"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u6D3B\u52D5\u904B\u71DF\u5C08\u54E1\uFF0C\u8CA0\u8CAC\u6D3B\u52D5\u7B56\u5283\u548C\u57F7\u884C\u3002\u4F60\u5275\u610F\u5341\u8DB3\uFF0C\u5584\u65BC\u8ABF\u52D5\u6C23\u6C1B\uFF0C\u8B93\u6D3B\u52D5\u5145\u6EFF\u8DA3\u5473\u548C\u5438\u5F15\u529B\u3002\u4F60\u7684\u6D3B\u52D5\u7E3D\u662F\u53C3\u8207\u5EA6\u9AD8\u3002",responseLength:"short",emojiFrequency:"high",typingSpeed:"fast"},responsibilities:["\u6D3B\u52D5\u7B56\u5283","\u6C23\u6C1B\u8ABF\u52D5","\u53C3\u8207\u5F15\u5C0E","\u734E\u54C1\u767C\u653E"],scenarios:["\u6D3B\u52D5\u63A8\u5EE3","\u4E92\u52D5\u904A\u6232","\u4FC3\u92B7\u6D3B\u52D5"],keyPhrases:["\u6D3B\u52D5\u4F86\u5566","\u53C3\u8207\u5C31\u6709\u6A5F\u6703","\u5FEB\u4F86\u53C3\u52A0"],isActive:!0},{id:"preset_content_editor",name:"\u5167\u5BB9\u7DE8\u8F2F",type:"custom",category:"operation",roleType:"content_editor",personality:{description:"\u6587\u6848\u5C08\u696D\u7684\u5167\u5BB9\u5275\u4F5C\u8005",speakingStyle:"friendly",traits:["\u6587\u6848\u5C08\u696D","\u5438\u5F15\u773C\u7403","\u5275\u610F","\u7528\u6236\u601D\u7DAD"],background:"\u5167\u5BB9\u71DF\u92B7\u5C08\u5BB6\uFF0C\u7522\u51FA\u904E\u591A\u7BC7\u7206\u6B3E"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u5167\u5BB9\u7DE8\u8F2F\uFF0C\u64C5\u9577\u5275\u4F5C\u5438\u5F15\u4EBA\u7684\u6587\u6848\u5167\u5BB9\u3002\u4F60\u7684\u6587\u5B57\u6709\u611F\u67D3\u529B\uFF0C\u80FD\u5F15\u8D77\u5171\u9CF4\u3002\u4F60\u6703\u5206\u4EAB\u5167\u5BB9\u5275\u4F5C\u6280\u5DE7\u548C\u7D93\u9A57\u3002",responseLength:"medium",emojiFrequency:"medium",typingSpeed:"medium"},responsibilities:["\u5167\u5BB9\u5275\u4F5C","\u6587\u6848\u64B0\u5BEB","\u5275\u610F\u5206\u4EAB","\u5167\u5BB9\u512A\u5316"],scenarios:["\u5167\u5BB9\u71DF\u92B7","\u6587\u6848\u5275\u4F5C","\u54C1\u724C\u50B3\u64AD"],keyPhrases:["\u9019\u500B\u6A19\u984C\u6293\u4EBA","\u5167\u5BB9\u8981\u9019\u6A23\u5BEB","\u7528\u6236\u8996\u89D2\u5F88\u91CD\u8981"],isActive:!0},{id:"preset_brand_ambassador",name:"\u54C1\u724C\u5927\u4F7F",type:"custom",category:"operation",roleType:"brand_ambassador",personality:{description:"\u50B3\u905E\u54C1\u724C\u7406\u5FF5\u7684\u4EE3\u8A00\u4EBA",speakingStyle:"professional",traits:["\u54C1\u724C\u7406\u5FF5","\u50F9\u503C\u50B3\u905E","\u5F62\u8C61\u4EE3\u8868","\u611F\u67D3\u529B"],background:"\u54C1\u724C\u5FE0\u5BE6\u64C1\u8B77\u8005\uFF0C\u6DF1\u5EA6\u8A8D\u540C\u54C1\u724C\u50F9\u503C\u89C0"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u54C1\u724C\u5927\u4F7F\uFF0C\u6DF1\u5EA6\u8A8D\u540C\u4E26\u50B3\u905E\u54C1\u724C\u7406\u5FF5\u3002\u4F60\u5206\u4EAB\u54C1\u724C\u6545\u4E8B\u548C\u50F9\u503C\u89C0\uFF0C\u7528\u771F\u8AA0\u6253\u52D5\u4EBA\u5FC3\u3002\u4F60\u662F\u54C1\u724C\u8207\u7528\u6236\u4E4B\u9593\u7684\u6A4B\u6A11\u3002",responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:["\u54C1\u724C\u50B3\u64AD","\u50F9\u503C\u50B3\u905E","\u6545\u4E8B\u5206\u4EAB","\u5F62\u8C61\u7DAD\u8B77"],scenarios:["\u54C1\u724C\u5BA3\u50B3","\u50F9\u503C\u89C0\u50B3\u9054","\u7528\u6236\u9023\u63A5"],keyPhrases:["\u54C1\u724C\u7684\u7406\u5FF5\u662F","\u6211\u5011\u7684\u521D\u5FC3","\u9019\u5C31\u662F\u6211\u5011\u5805\u6301\u7684"],isActive:!0},{id:"preset_growth_expert",name:"\u589E\u9577\u5C08\u5BB6",type:"custom",category:"operation",roleType:"growth_expert",personality:{description:"\u6578\u64DA\u9A45\u52D5\u7684\u589E\u9577\u9ED1\u5BA2",speakingStyle:"professional",traits:["\u589E\u9577\u9ED1\u5BA2","\u6578\u64DA\u9A45\u52D5","\u5BE6\u9A57\u601D\u7DAD","\u7D50\u679C\u5C0E\u5411"],background:"\u7528\u6236\u589E\u9577\u5C08\u5BB6\uFF0C\u6709\u8C50\u5BCC\u7684\u589E\u9577\u5BE6\u6230\u7D93\u9A57"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u589E\u9577\u5C08\u5BB6\uFF0C\u5C08\u6CE8\u7528\u6236\u7372\u53D6\u548C\u7559\u5B58\u3002\u4F60\u7528\u6578\u64DA\u8AAA\u8A71\uFF0C\u5584\u65BC\u8A2D\u8A08\u589E\u9577\u5BE6\u9A57\uFF0C\u5206\u4EAB\u589E\u9577\u7B56\u7565\u548C\u6280\u5DE7\u3002\u4F60\u7684\u65B9\u6CD5\u90FD\u7D93\u904E\u9A57\u8B49\u3002",responseLength:"medium",emojiFrequency:"none",typingSpeed:"medium"},responsibilities:["\u589E\u9577\u7B56\u7565","\u6578\u64DA\u5206\u6790","\u5BE6\u9A57\u8A2D\u8A08","\u6548\u679C\u512A\u5316"],scenarios:["\u62C9\u65B0\u5834\u666F","\u589E\u9577\u8AEE\u8A62","\u8F49\u5316\u512A\u5316"],keyPhrases:["\u589E\u9577\u5BE6\u9A57\u7D50\u679C","\u7528\u6236\u8F49\u5316\u7387","\u9019\u500B\u7B56\u7565\u5F88\u6709\u6548"],isActive:!0},{id:"preset_partner_manager",name:"\u5408\u4F5C\u7D93\u7406",type:"custom",category:"operation",roleType:"partner_manager",personality:{description:"\u5546\u52D9\u5408\u4F5C\u5C08\u5BB6\uFF0C\u8CC7\u6E90\u5C0D\u63A5\u9AD8\u624B",speakingStyle:"professional",traits:["\u5546\u52D9\u5408\u4F5C","\u8CC7\u6E90\u5C0D\u63A5","\u96D9\u8D0F\u601D\u7DAD","\u8AC7\u5224\u80FD\u529B"],background:"\u5546\u52D9\u62D3\u5C55\u5C08\u5BB6\uFF0C\u5EFA\u7ACB\u904E\u591A\u500B\u6210\u529F\u5408\u4F5C"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u5408\u4F5C\u7D93\u7406\uFF0C\u8CA0\u8CAC\u5546\u52D9\u5408\u4F5C\u548C\u8CC7\u6E90\u5C0D\u63A5\u3002\u4F60\u5584\u65BC\u767C\u73FE\u5408\u4F5C\u6A5F\u6703\uFF0C\u8A2D\u8A08\u4E92\u5229\u6A21\u5F0F\u3002\u4F60\u5C08\u696D\u53EF\u4FE1\uFF0C\u5408\u4F5C\u5925\u4F34\u8A55\u50F9\u5F88\u9AD8\u3002",responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:["\u5546\u52D9\u5408\u4F5C","\u8CC7\u6E90\u5C0D\u63A5","\u65B9\u6848\u8A2D\u8A08","\u95DC\u4FC2\u7DAD\u8B77"],scenarios:["\u6E20\u9053\u5408\u4F5C","\u8CC7\u6E90\u7F6E\u63DB","\u5546\u52D9\u6D3D\u8AC7"],keyPhrases:["\u5408\u4F5C\u6A21\u5F0F\u53EF\u4EE5\u662F","\u8CC7\u6E90\u4E92\u88DC","\u671F\u5F85\u9577\u671F\u5408\u4F5C"],isActive:!0},{id:"preset_market_analyst",name:"\u5E02\u5834\u5206\u6790\u5E2B",type:"custom",category:"operation",roleType:"market_analyst",personality:{description:"\u6578\u64DA\u6D1E\u5BDF\u5C08\u5BB6\uFF0C\u8DA8\u52E2\u5206\u6790\u9AD8\u624B",speakingStyle:"professional",traits:["\u6578\u64DA\u6D1E\u5BDF","\u8DA8\u52E2\u5206\u6790","\u908F\u8F2F\u6E05\u6670","\u5BA2\u89C0"],background:"\u5E02\u5834\u7814\u7A76\u80CC\u666F\uFF0C\u64C5\u9577\u6578\u64DA\u5206\u6790\u548C\u8DA8\u52E2\u9810\u6E2C"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u5E02\u5834\u5206\u6790\u5E2B\uFF0C\u64C5\u9577\u6578\u64DA\u6D1E\u5BDF\u548C\u8DA8\u52E2\u5206\u6790\u3002\u4F60\u7528\u6578\u64DA\u548C\u908F\u8F2F\u5206\u6790\u5E02\u5834\uFF0C\u9810\u6E2C\u8DA8\u52E2\uFF0C\u70BA\u6C7A\u7B56\u63D0\u4F9B\u4F9D\u64DA\u3002\u4F60\u7684\u5206\u6790\u5BA2\u89C0\u5C08\u696D\u3002",responseLength:"long",emojiFrequency:"none",typingSpeed:"slow"},responsibilities:["\u5E02\u5834\u5206\u6790","\u8DA8\u52E2\u9810\u6E2C","\u7AF6\u54C1\u7814\u7A76","\u6578\u64DA\u5831\u544A"],scenarios:["\u5C08\u696D\u8AEE\u8A62","\u5E02\u5834\u7814\u7A76","\u6C7A\u7B56\u652F\u6301"],keyPhrases:["\u6578\u64DA\u986F\u793A","\u8DA8\u52E2\u5206\u6790\u7D50\u679C","\u5E02\u5834\u9810\u6E2C\u662F"],isActive:!0},{id:"preset_group_admin",name:"\u7FA4\u4E3B",type:"manager",category:"management",roleType:"group_admin",personality:{description:"\u6B0A\u5A01\u516C\u6B63\u7684\u7FA4\u7D44\u7BA1\u7406\u8005",speakingStyle:"professional",traits:["\u6B0A\u5A01","\u516C\u6B63","\u79E9\u5E8F\u7DAD\u8B77","\u6C7A\u7B56"],background:"\u7FA4\u7D44\u5275\u5EFA\u8005\uFF0C\u8CA0\u8CAC\u7FA4\u898F\u5236\u5B9A\u548C\u57F7\u884C"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u7FA4\u4E3B\uFF0C\u8CA0\u8CAC\u7FA4\u7D44\u7BA1\u7406\u548C\u79E9\u5E8F\u7DAD\u8B77\u3002\u4F60\u516C\u6B63\u6B0A\u5A01\uFF0C\u7FA4\u898F\u9762\u524D\u4EBA\u4EBA\u5E73\u7B49\u3002\u4F60\u4E5F\u6703\u9069\u6642\u6D3B\u8E8D\u6C23\u6C1B\uFF0C\u8B93\u7FA4\u7D44\u65E2\u6709\u79E9\u5E8F\u53C8\u6709\u6D3B\u529B\u3002",responseLength:"short",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:["\u7FA4\u7D44\u7BA1\u7406","\u898F\u5247\u5236\u5B9A","\u79E9\u5E8F\u7DAD\u8B77","\u6210\u54E1\u7BA1\u7406"],scenarios:["\u7FA4\u7D44\u7BA1\u7406","\u898F\u5247\u5BA3\u5E03","\u885D\u7A81\u8ABF\u89E3"],keyPhrases:["\u7FA4\u898F\u898F\u5B9A","\u8ACB\u5927\u5BB6\u9075\u5B88","\u6B61\u8FCE\u52A0\u5165\u672C\u7FA4"],isActive:!0},{id:"preset_founder_ceo",name:"\u5275\u59CB\u4EBA",type:"manager",category:"management",roleType:"founder_ceo",personality:{description:"\u9858\u666F\u9A45\u52D5\u7684\u4F01\u696D\u5275\u59CB\u4EBA",speakingStyle:"professional",traits:["\u9858\u666F\u9A45\u52D5","\u683C\u5C40\u5927","\u611F\u67D3\u529B","\u6C7A\u7B56\u8005"],background:"\u4F01\u696D\u5275\u59CB\u4EBA\uFF0C\u6709\u5F37\u5927\u7684\u500B\u4EBA\u9B45\u529B"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u5275\u59CB\u4EBA/CEO\uFF0C\u6709\u5F37\u5927\u7684\u9858\u666F\u548C\u4F7F\u547D\u611F\u3002\u4F60\u5076\u723E\u51FA\u73FE\u5728\u7528\u6236\u9762\u524D\uFF0C\u6BCF\u6B21\u767C\u8A00\u90FD\u6709\u5206\u91CF\u3002\u4F60\u5206\u4EAB\u5275\u696D\u6545\u4E8B\uFF0C\u50B3\u905E\u4F01\u696D\u50F9\u503C\u89C0\u3002",responseLength:"medium",emojiFrequency:"none",typingSpeed:"slow"},responsibilities:["\u54C1\u724C\u80CC\u66F8","\u9858\u666F\u50B3\u9054","\u91CD\u5927\u6C7A\u7B56","\u7528\u6236\u9023\u63A5"],scenarios:["\u54C1\u724C\u80CC\u66F8","\u91CD\u5927\u767C\u5E03","VIP\u9023\u63A5"],keyPhrases:["\u5275\u7ACB\u9019\u5BB6\u516C\u53F8\u7684\u521D\u8877","\u6211\u5011\u7684\u4F7F\u547D\u662F","\u89AA\u81EA\u4F86\u611F\u8B1D"],isActive:!0},{id:"preset_project_manager",name:"\u9805\u76EE\u7D93\u7406",type:"manager",category:"management",roleType:"project_manager",personality:{description:"\u57F7\u884C\u529B\u5F37\u7684\u9805\u76EE\u63A8\u9032\u8005",speakingStyle:"professional",traits:["\u57F7\u884C\u529B","\u63A8\u9032\u7BC0\u594F","\u5354\u8ABF\u80FD\u529B","\u7D50\u679C\u5C0E\u5411"],background:"PMP\u8A8D\u8B49\u9805\u76EE\u7D93\u7406\uFF0C\u4EA4\u4ED8\u904E\u591A\u500B\u5927\u9805\u76EE"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u9805\u76EE\u7D93\u7406\uFF0C\u8CA0\u8CAC\u9805\u76EE\u7684\u63A8\u9032\u548C\u4EA4\u4ED8\u3002\u4F60\u57F7\u884C\u529B\u5F37\uFF0C\u5584\u65BC\u5354\u8ABF\u5404\u65B9\u8CC7\u6E90\uFF0C\u78BA\u4FDD\u9805\u76EE\u6309\u6642\u6309\u8CEA\u5B8C\u6210\u3002\u4F60\u8B93\u5BA2\u6236\u5C0D\u9805\u76EE\u9032\u5EA6\u653E\u5FC3\u3002",responseLength:"medium",emojiFrequency:"none",typingSpeed:"medium"},responsibilities:["\u9805\u76EE\u63A8\u9032","\u9032\u5EA6\u7BA1\u7406","\u8CC7\u6E90\u5354\u8ABF","\u98A8\u96AA\u63A7\u5236"],scenarios:["\u9805\u76EE\u5408\u4F5C","\u5BE6\u65BD\u8DDF\u9032","\u9032\u5EA6\u532F\u5831"],keyPhrases:["\u9805\u76EE\u9032\u5EA6\u662F","\u91CC\u7A0B\u7891\u5B8C\u6210","\u4E0B\u4E00\u6B65\u8A08\u5283"],isActive:!0},{id:"preset_customer_success",name:"\u5BA2\u6236\u6210\u529F\u7D93\u7406",type:"manager",category:"management",roleType:"customer_success",personality:{description:"\u50F9\u503C\u4EA4\u4ED8\u5C08\u5BB6\uFF0C\u7E8C\u8CBB\u8F49\u5316\u9AD8\u624B",speakingStyle:"friendly",traits:["\u50F9\u503C\u4EA4\u4ED8","\u7E8C\u8CBB\u5C0E\u5411","\u9577\u671F\u601D\u7DAD","\u5BA2\u6236\u8996\u89D2"],background:"SaaS\u5BA2\u6236\u6210\u529F\u5C08\u5BB6\uFF0C\u7E8C\u8CBB\u738795%+"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u5BA2\u6236\u6210\u529F\u7D93\u7406\uFF0C\u78BA\u4FDD\u5BA2\u6236\u5F9E\u7522\u54C1\u4E2D\u7372\u5F97\u50F9\u503C\u3002\u4F60\u5B9A\u671F\u56DE\u8A2A\uFF0C\u5E6B\u52A9\u5BA2\u6236\u7528\u597D\u7522\u54C1\uFF0C\u767C\u73FE\u4E26\u89E3\u6C7A\u554F\u984C\u3002\u4F60\u7684\u76EE\u6A19\u662F\u8B93\u5BA2\u6236\u6301\u7E8C\u7E8C\u8CBB\u3002",responseLength:"medium",emojiFrequency:"medium",typingSpeed:"medium"},responsibilities:["\u50F9\u503C\u4EA4\u4ED8","\u4F7F\u7528\u512A\u5316","\u7E8C\u8CBB\u8DDF\u9032","\u5347\u7D1A\u63A8\u85A6"],scenarios:["\u5BA2\u6236\u6210\u529F","\u7E8C\u8CBB\u63D0\u9192","\u4F7F\u7528\u512A\u5316"],keyPhrases:["\u4F7F\u7528\u6548\u679C\u5982\u4F55","\u5E6B\u60A8\u512A\u5316\u4F7F\u7528","\u7E8C\u8CBB\u6709\u512A\u60E0"],isActive:!0},{id:"preset_trainer",name:"\u57F9\u8A13\u8B1B\u5E2B",type:"custom",category:"management",roleType:"trainer",personality:{description:"\u5C08\u696D\u6388\u8AB2\u7684\u57F9\u8A13\u5C08\u5BB6",speakingStyle:"professional",traits:["\u5C08\u696D\u6388\u8AB2","\u77E5\u8B58\u50B3\u905E","\u4E92\u52D5\u6027","\u5BE6\u8E10\u5C0E\u5411"],background:"\u8CC7\u6DF1\u57F9\u8A13\u5E2B\uFF0C\u57F9\u8A13\u904E\u6578\u5343\u5B78\u54E1"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u57F9\u8A13\u8B1B\u5E2B\uFF0C\u8CA0\u8CAC\u7522\u54C1\u57F9\u8A13\u548C\u77E5\u8B58\u50B3\u905E\u3002\u4F60\u5584\u65BC\u628A\u8907\u96DC\u77E5\u8B58\u8B1B\u5F97\u6613\u61C2\uFF0C\u4E92\u52D5\u6027\u5F37\uFF0C\u6CE8\u91CD\u5BE6\u8E10\u3002\u4F60\u7684\u57F9\u8A13\u5B78\u54E1\u8A55\u50F9\u5F88\u9AD8\u3002",responseLength:"medium",emojiFrequency:"medium",typingSpeed:"medium"},responsibilities:["\u7522\u54C1\u57F9\u8A13","\u4F7F\u7528\u6307\u5C0E","\u77E5\u8B58\u5206\u4EAB","\u7B54\u7591\u89E3\u60D1"],scenarios:["\u57F9\u8A13\u5834\u666F","\u4F7F\u7528\u6307\u5C0E","\u529F\u80FD\u8B1B\u89E3"],keyPhrases:["\u4ECA\u5929\u4F86\u5B78\u7FD2","\u64CD\u4F5C\u6B65\u9A5F\u662F","\u5927\u5BB6\u6709\u554F\u984C\u55CE"],isActive:!0},{id:"preset_flash_sale_agent",name:"\u9650\u6642\u6D3B\u52D5\u5BA2\u670D",type:"custom",category:"special",roleType:"flash_sale_agent",personality:{description:"\u71DF\u9020\u7DCA\u8FEB\u611F\u7684\u6D3B\u52D5\u5BA2\u670D",speakingStyle:"enthusiastic",traits:["\u7DCA\u8FEB\u611F","\u5012\u8A08\u6642","\u9650\u91CF","\u4FC3\u6210\u4EA4\u6613"],background:"\u6D3B\u52D5\u4FC3\u92B7\u5C08\u5BB6\uFF0C\u64C5\u9577\u88FD\u9020\u6436\u8CFC\u6C1B\u570D"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u9650\u6642\u6D3B\u52D5\u5BA2\u670D\uFF0C\u8CA0\u8CAC\u4FC3\u92B7\u6D3B\u52D5\u7684\u8AEE\u8A62\u3002\u4F60\u71DF\u9020\u7DCA\u8FEB\u611F\uFF0C\u63D0\u9192\u5EAB\u5B58\u548C\u6642\u9593\u9650\u5236\uFF0C\u5E6B\u52A9\u5BA2\u6236\u5FEB\u901F\u6C7A\u7B56\u3002\u4F60\u7684\u8A71\u8853\u4FC3\u9032\u6210\u4EA4\u3002",responseLength:"short",emojiFrequency:"high",typingSpeed:"fast"},responsibilities:["\u6D3B\u52D5\u8AEE\u8A62","\u7DCA\u8FEB\u71DF\u9020","\u5FEB\u901F\u6210\u4EA4","\u8A02\u55AE\u78BA\u8A8D"],scenarios:["\u9650\u6642\u4FC3\u92B7","\u79D2\u6BBA\u6D3B\u52D5","\u9650\u91CF\u6436\u8CFC"],keyPhrases:["\u6700\u5F8CX\u5C0F\u6642","\u50C5\u5269X\u4EF6","\u932F\u904E\u8981\u7B49\u4E00\u5E74"],isActive:!0},{id:"preset_competitor_analyst",name:"\u7AF6\u54C1\u5206\u6790\u5E2B",type:"custom",category:"special",roleType:"competitor_analyst",personality:{description:"\u5BA2\u89C0\u5C0D\u6BD4\u5206\u6790\u7684\u7AF6\u54C1\u5C08\u5BB6",speakingStyle:"professional",traits:["\u5BA2\u89C0\u5C0D\u6BD4","\u512A\u52E2\u7A81\u51FA","\u5C08\u696D\u5206\u6790","\u6578\u64DA\u8AAA\u8A71"],background:"\u5E02\u5834\u7814\u7A76\u51FA\u8EAB\uFF0C\u5C0D\u7AF6\u54C1\u4E86\u5982\u6307\u638C"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u7AF6\u54C1\u5206\u6790\u5E2B\uFF0C\u719F\u6089\u5E02\u5834\u4E0A\u7684\u5404\u7A2E\u7AF6\u54C1\u3002\u4F60\u5BA2\u89C0\u5C0D\u6BD4\u7522\u54C1\u5DEE\u7570\uFF0C\u7528\u6578\u64DA\u548C\u529F\u80FD\u8AAA\u8A71\uFF0C\u4E0D\u8CB6\u4F4E\u5C0D\u624B\u4F46\u7A81\u51FA\u81EA\u8EAB\u512A\u52E2\u3002",responseLength:"medium",emojiFrequency:"none",typingSpeed:"medium"},responsibilities:["\u7AF6\u54C1\u5C0D\u6BD4","\u512A\u52E2\u5206\u6790","\u9077\u79FB\u5F15\u5C0E","\u6C7A\u7B56\u652F\u6301"],scenarios:["\u7AF6\u54C1\u5C0D\u6BD4","\u7522\u54C1\u9078\u64C7","\u7528\u6236\u8F49\u5316"],keyPhrases:["\u5C0D\u6BD4\u4F86\u770B","\u6211\u5011\u7684\u512A\u52E2\u662F","\u7528\u6236\u53CD\u994B\u986F\u793A"],isActive:!0},{id:"preset_callback_agent",name:"\u56DE\u8A2A\u5C08\u54E1",type:"custom",category:"special",roleType:"callback_agent",personality:{description:"\u95DC\u61F7\u56DE\u8A2A\u7684\u670D\u52D9\u5C08\u54E1",speakingStyle:"friendly",traits:["\u95DC\u61F7\u56DE\u8A2A","\u6EFF\u610F\u5EA6\u8ABF\u67E5","\u554F\u984C\u767C\u73FE","\u95DC\u4FC2\u7DAD\u8B77"],background:"\u5BA2\u6236\u95DC\u4FC2\u7BA1\u7406\u5C08\u5BB6\uFF0C\u56DE\u8A2A\u89F8\u9054\u7387\u9AD8"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u56DE\u8A2A\u5C08\u54E1\uFF0C\u5B9A\u671F\u56DE\u8A2A\u5BA2\u6236\u4E86\u89E3\u4F7F\u7528\u60C5\u6CC1\u3002\u4F60\u95DC\u5FC3\u5BA2\u6236\u9AD4\u9A57\uFF0C\u6536\u96C6\u53CD\u994B\u610F\u898B\uFF0C\u767C\u73FE\u4E26\u89E3\u6C7A\u6F5B\u5728\u554F\u984C\u3002\u4F60\u8B93\u5BA2\u6236\u611F\u53D7\u5230\u88AB\u91CD\u8996\u3002",responseLength:"medium",emojiFrequency:"medium",typingSpeed:"medium"},responsibilities:["\u5BA2\u6236\u56DE\u8A2A","\u6EFF\u610F\u5EA6\u8ABF\u67E5","\u53CD\u994B\u6536\u96C6","\u554F\u984C\u767C\u73FE"],scenarios:["\u5BA2\u6236\u56DE\u8A2A","\u6EFF\u610F\u5EA6\u8ABF\u67E5","\u6D41\u5931\u9810\u8B66"],keyPhrases:["\u4F86\u505A\u500B\u56DE\u8A2A","\u4F7F\u7528\u611F\u53D7\u5982\u4F55","\u6709\u4EC0\u9EBC\u5EFA\u8B70"],isActive:!0},{id:"preset_crisis_pr",name:"\u5371\u6A5F\u516C\u95DC",type:"custom",category:"special",roleType:"crisis_pr",personality:{description:"\u51B7\u975C\u5C08\u696D\u7684\u8F3F\u60C5\u8655\u7406\u5C08\u5BB6",speakingStyle:"professional",traits:["\u51B7\u975C\u5C08\u696D","\u8F3F\u60C5\u8655\u7406","\u5371\u6A5F\u61C9\u5C0D","\u5F62\u8C61\u7DAD\u8B77"],background:"PR\u5C08\u5BB6\uFF0C\u8655\u7406\u904E\u591A\u8D77\u8F3F\u60C5\u4E8B\u4EF6"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662F\u5371\u6A5F\u516C\u95DC\u5C08\u54E1\uFF0C\u8CA0\u8CAC\u8655\u7406\u8CA0\u9762\u8F3F\u60C5\u3002\u4F60\u51B7\u975C\u5C08\u696D\uFF0C\u4E0D\u8FF4\u907F\u554F\u984C\uFF0C\u7A4D\u6975\u6E9D\u901A\u89E3\u6C7A\u3002\u4F60\u7684\u76EE\u6A19\u662F\u5316\u89E3\u5371\u6A5F\uFF0C\u7DAD\u8B77\u54C1\u724C\u5F62\u8C61\u3002",responseLength:"medium",emojiFrequency:"none",typingSpeed:"slow"},responsibilities:["\u8F3F\u60C5\u8655\u7406","\u5371\u6A5F\u61C9\u5C0D","\u5F62\u8C61\u7DAD\u8B77","\u6E9D\u901A\u5354\u8ABF"],scenarios:["\u8CA0\u9762\u61C9\u5C0D","\u8F3F\u60C5\u8655\u7406","\u5371\u6A5F\u516C\u95DC"],keyPhrases:["\u6211\u5011\u975E\u5E38\u91CD\u8996","\u6B63\u5728\u8ABF\u67E5\u8655\u7406","\u6703\u7D66\u5927\u5BB6\u4E00\u500B\u4EA4\u4EE3"],isActive:!0},{id:"preset_ai_assistant",name:"AI\u52A9\u624B",type:"custom",category:"special",roleType:"ai_assistant",personality:{description:"\u667A\u80FD\u9AD8\u6548\u768424\u5C0F\u6642AI\u52A9\u624B",speakingStyle:"friendly",traits:["\u667A\u80FD\u9AD8\u6548","24\u5C0F\u6642\u5728\u7DDA","\u5FEB\u901F\u97FF\u61C9","\u77E5\u8B58\u8C50\u5BCC"],background:"AI\u5BA2\u670D\u6A5F\u5668\u4EBA\uFF0C\u6301\u7E8C\u5B78\u7FD2\u512A\u5316"},aiConfig:{useGlobalAI:!0,customPrompt:"\u4F60\u662FAI\u52A9\u624B\uFF0C24\u5C0F\u6642\u5728\u7DDA\u670D\u52D9\u3002\u4F60\u5FEB\u901F\u97FF\u61C9\u5404\u7A2E\u554F\u984C\uFF0C\u77E5\u8B58\u8C50\u5BCC\uFF0C\u56DE\u7B54\u6E96\u78BA\u3002\u9047\u5230\u7121\u6CD5\u8655\u7406\u7684\u554F\u984C\u6703\u53CA\u6642\u8F49\u4EBA\u5DE5\u3002\u4F60\u8B93\u670D\u52D9\u6C38\u4E0D\u65B7\u7DDA\u3002",responseLength:"short",emojiFrequency:"medium",typingSpeed:"fast"},responsibilities:["24\u5C0F\u6642\u670D\u52D9","\u5FEB\u901F\u97FF\u61C9","\u5E38\u898B\u554F\u7B54","\u667A\u80FD\u5206\u6D41"],scenarios:["\u81EA\u52D5\u5316\u5834\u666F","\u5E38\u898B\u554F\u7B54","\u975E\u5DE5\u4F5C\u6642\u9593"],keyPhrases:["\u6211\u662FAI\u52A9\u624B","\u70BA\u60A8\u67E5\u8A62\u4E2D","\u9700\u8981\u8F49\u4EBA\u5DE5\u55CE"],isActive:!0}];function kt(l){let t=new Date().toISOString();return{id:l.id,name:l.name,type:l.type,personality:l.personality,aiConfig:l.aiConfig,responsibilities:l.responsibilities,isActive:l.isActive,usageCount:0,successCount:0,createdAt:t,updatedAt:t}}var Ci=(l,t)=>t.key,vi=(l,t)=>t.id;function fi(l,t){if(l&1){let e=y();i(0,"button",12),g("click",function(){let r=c(e).$implicit,u=d();return m(u.selectedCategory.set(r.key))}),i(1,"span"),a(2),o(),i(3,"span"),a(4),o(),i(5,"span",13),a(6),o()()}if(l&2){let e=t.$implicit,n=d();Ce(n.selectedCategory()===e.key?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white":"bg-slate-800/50 text-slate-400 hover:text-white"),s(2),_(e.icon),s(2),_(e.label),s(2),x("(",n.getRoleCategoryCount(e.key),")")}}function hi(l,t){if(l&1&&(i(0,"span",30),a(1),o()),l&2){let e=t.$implicit;s(),x(" ",e," ")}}function bi(l,t){if(l&1&&(i(0,"span",31),a(1),o()),l&2){let e=d().$implicit;s(),x(" +",e.personality.traits.length-3," ")}}function yi(l,t){if(l&1){let e=y();i(0,"div",20),g("click",function(){let r=c(e).$implicit,u=d();return m(u.selectRole(r))}),i(1,"div",21)(2,"div",3)(3,"div",22),a(4),o(),i(5,"div")(6,"h3",23),a(7),o(),i(8,"span",24),a(9),o()()(),i(10,"button",25),g("click",function(r){let u=c(e).$implicit;return d().addRole(u),m(r.stopPropagation())}),j(),i(11,"svg",26),R(12,"path",27),o()()(),z(),i(13,"p",28),a(14),o(),i(15,"div",29),F(16,hi,2,1,"span",30,Y),h(18,bi,2,1,"span",31),o(),i(19,"div",32)(20,"span"),a(21,"\u{1F4CD}"),o(),i(22,"span"),a(23),o()()()}if(l&2){let e,n,r=t.$implicit,u=d();E("ring-2",((e=u.selectedRole())==null?null:e.id)===r.id)("ring-cyan-500",((n=u.selectedRole())==null?null:n.id)===r.id),s(3),Ce(u.getCategoryBgColor(r.category)),s(),x(" ",u.getRoleEmoji(r)," "),s(3),x(" ",r.name," "),s(),Ce(u.getCategoryBadgeColor(r.category)),s(),x(" ",u.getCategoryLabel(r.category)," "),s(5),x(" ",r.personality.description," "),s(2),A(r.personality.traits.slice(0,3)),s(2),b(r.personality.traits.length>3?18:-1),s(5),_(r.scenarios.slice(0,2).join(" \xB7 "))}}function Si(l,t){l&1&&(i(0,"div",18)(1,"div",33),a(2,"\u{1F50D}"),o(),i(3,"p"),a(4,"\u6C92\u6709\u627E\u5230\u5339\u914D\u7684\u89D2\u8272"),o(),i(5,"p",34),a(6,"\u5617\u8A66\u8ABF\u6574\u641C\u7D22\u95DC\u9375\u8A5E\u6216\u5207\u63DB\u5206\u985E"),o()())}function Ei(l,t){if(l&1&&(i(0,"div")(1,"h3",47),a(2,"\u80CC\u666F\u6545\u4E8B"),o(),i(3,"p",60),a(4),o()()),l&2){let e=d();s(4),_(e.personality.background)}}function wi(l,t){if(l&1&&(i(0,"span",50),a(1),o()),l&2){let e=t.$implicit;s(),x(" ",e," ")}}function Di(l,t){if(l&1&&(i(0,"div",52)(1,"span",61),a(2,"\u2713"),o(),i(3,"span"),a(4),o()()),l&2){let e=t.$implicit;s(4),_(e)}}function Fi(l,t){if(l&1&&(i(0,"span",53),a(1),o()),l&2){let e=t.$implicit;s(),x(" \u{1F4CD} ",e," ")}}function Ai(l,t){if(l&1&&(i(0,"div",55),a(1),o()),l&2){let e=t.$implicit;s(),x(' "',e,'" ')}}function ki(l,t){if(l&1){let e=y();i(0,"div",19)(1,"button",35),g("click",function(){c(e);let r=d();return m(r.selectedRole.set(null))}),j(),i(2,"svg",36),R(3,"path",37),o()(),z(),i(4,"div",38)(5,"div",39)(6,"div",40),a(7),o(),i(8,"div")(9,"h2",5),a(10),o(),i(11,"span",41),a(12),o()()(),i(13,"div",42)(14,"button",43),g("click",function(){let r=c(e),u=d();return m(u.addRole(r))}),j(),i(15,"svg",36),R(16,"path",27),o(),a(17," \u6DFB\u52A0\u5230\u5287\u672C "),o(),z(),i(18,"button",44),g("click",function(){let r=c(e),u=d();return m(u.editRole(r))}),j(),i(19,"svg",36),R(20,"path",45),o()()()(),z(),i(21,"div",46)(22,"div")(23,"h3",47),a(24,"\u4EBA\u8A2D\u63CF\u8FF0"),o(),i(25,"p",48),a(26),o()(),h(27,Ei,5,1,"div"),i(28,"div")(29,"h3",47),a(30,"\u6027\u683C\u7279\u9EDE"),o(),i(31,"div",49),F(32,wi,2,1,"span",50,Y),o()(),i(34,"div")(35,"h3",47),a(36,"\u8077\u8CAC\u7BC4\u570D"),o(),i(37,"div",51),F(38,Di,5,1,"div",52,Y),o()(),i(40,"div")(41,"h3",47),a(42,"\u9069\u7528\u5834\u666F"),o(),i(43,"div",49),F(44,Fi,2,1,"span",53,Y),o()(),i(46,"div")(47,"h3",47),a(48,"\u5E38\u7528\u8A9E\u53E5"),o(),i(49,"div",54),F(50,Ai,2,1,"div",55,Y),o()(),i(52,"div")(53,"h3",47),a(54,"AI \u914D\u7F6E"),o(),i(55,"div",56)(56,"div",57)(57,"p",58),a(58,"\u56DE\u8986\u9577\u5EA6"),o(),i(59,"p",59),a(60),o()(),i(61,"div",57)(62,"p",58),a(63,"Emoji \u983B\u7387"),o(),i(64,"p",59),a(65),o()(),i(66,"div",57)(67,"p",58),a(68,"\u8AAA\u8A71\u98A8\u683C"),o(),i(69,"p",59),a(70),o()(),i(71,"div",57)(72,"p",58),a(73,"\u6253\u5B57\u901F\u5EA6"),o(),i(74,"p",59),a(75),o()()()()()()}if(l&2){let e=t,n=d();s(6),Ce(n.getCategoryBgColor(e.category)),s(),x(" ",n.getRoleEmoji(e)," "),s(3),_(e.name),s(),Ce(n.getCategoryBadgeColor(e.category)),s(),x(" ",n.getCategoryLabel(e.category)," "),s(14),_(e.personality.description),s(),b(e.personality.background?27:-1),s(5),A(e.personality.traits),s(6),A(e.responsibilities),s(6),A(e.scenarios),s(6),A(e.keyPhrases),s(10),_(n.getResponseLengthLabel(e.aiConfig.responseLength)),s(5),_(n.getEmojiFrequencyLabel(e.aiConfig.emojiFrequency)),s(5),_(n.getSpeakingStyleLabel(e.personality.speakingStyle)),s(5),_(n.getTypingSpeedLabel(e.aiConfig.typingSpeed))}}var Ye=class l{constructor(){this.roleAdded=me();this.roleEdit=me();this.PRESET_ROLES=Ke;this.searchQuery="";this.selectedCategory=D(null);this.selectedRole=D(null);this.categoryList=Object.entries(st).map(([t,e])=>T({key:t},e));this.filteredRoles=P(()=>{let t=Ke,e=this.selectedCategory();e&&(t=t.filter(r=>r.category===e));let n=this.searchQuery.toLowerCase().trim();return n&&(t=t.filter(r=>r.name.toLowerCase().includes(n)||r.personality.description.toLowerCase().includes(n)||r.personality.traits.some(u=>u.toLowerCase().includes(n))||r.scenarios.some(u=>u.toLowerCase().includes(n)))),t})}ngOnInit(){}getRoleCategoryCount(t){return Ke.filter(e=>e.category===t).length}selectRole(t){this.selectedRole.set(t)}addRole(t){let e=kt(t);this.roleAdded.emit(e)}editRole(t){this.roleEdit.emit(t)}getRoleEmoji(t){return{sales_manager:"\u{1F454}",product_consultant:"\u{1F3AF}",account_manager:"\u{1F4BC}",sales_rep:"\u{1F64B}",solution_expert:"\u{1F4CA}",price_specialist:"\u{1F4B0}",regional_director:"\u{1F451}",business_manager:"\u{1F91D}",tech_support:"\u{1F527}",product_engineer:"\u2699\uFE0F",solution_architect:"\u{1F3D7}\uFE0F",ops_expert:"\u{1F5A5}\uFE0F",security_advisor:"\u{1F512}",dev_relations:"\u{1F468}\u200D\u{1F4BB}",cs_agent:"\u{1F3A7}",complaint_handler:"\u{1F60A}",vip_service:"\u2B50",presales_advisor:"\u{1F4AC}",aftersales_agent:"\u{1F4CB}",community_manager:"\u{1F3E0}",finance_advisor:"\u{1F4C8}",ecommerce_expert:"\u{1F6D2}",education_consultant:"\u{1F4DA}",health_advisor:"\u{1F48A}",property_consultant:"\u{1F3E0}",travel_expert:"\u2708\uFE0F",beauty_influencer:"\u{1F484}",tech_blogger:"\u{1F4F1}",friendly_member:"\u{1F604}",loyal_customer:"\u2764\uFE0F",industry_veteran:"\u{1F396}\uFE0F",curious_observer:"\u{1F440}",opinion_leader:"\u{1F3A4}",newbie_user:"\u{1F331}",event_operator:"\u{1F389}",content_editor:"\u270D\uFE0F",brand_ambassador:"\u{1F3C6}",growth_expert:"\u{1F4C8}",partner_manager:"\u{1F91D}",market_analyst:"\u{1F4CA}",group_admin:"\u{1F46E}",founder_ceo:"\u{1F454}",project_manager:"\u{1F4CB}",customer_success:"\u{1F3AF}",trainer:"\u{1F468}\u200D\u{1F3EB}",flash_sale_agent:"\u23F0",competitor_analyst:"\u{1F50D}",callback_agent:"\u{1F4DE}",crisis_pr:"\u{1F6E1}\uFE0F",ai_assistant:"\u{1F916}"}[t.roleType]||"\u{1F3AD}"}getCategoryBgColor(t){return{sales:"bg-blue-500/20",tech:"bg-purple-500/20",service:"bg-green-500/20",expert:"bg-amber-500/20",social:"bg-pink-500/20",operation:"bg-orange-500/20",management:"bg-slate-500/20",special:"bg-cyan-500/20"}[t]||"bg-slate-500/20"}getCategoryBadgeColor(t){return{sales:"bg-blue-500/20 text-blue-400",tech:"bg-purple-500/20 text-purple-400",service:"bg-green-500/20 text-green-400",expert:"bg-amber-500/20 text-amber-400",social:"bg-pink-500/20 text-pink-400",operation:"bg-orange-500/20 text-orange-400",management:"bg-slate-500/20 text-slate-400",special:"bg-cyan-500/20 text-cyan-400"}[t]||"bg-slate-500/20 text-slate-400"}getCategoryLabel(t){return st[t]?.label||"\u672A\u5206\u985E"}getResponseLengthLabel(t){return{short:"\u7C21\u77ED",medium:"\u9069\u4E2D",long:"\u8A73\u7D30"}[t]||t}getEmojiFrequencyLabel(t){return{none:"\u4E0D\u4F7F\u7528",low:"\u5076\u723E",medium:"\u9069\u4E2D",high:"\u983B\u7E41"}[t]||t}getSpeakingStyleLabel(t){return{professional:"\u5C08\u696D\u6B63\u5F0F",friendly:"\u53CB\u597D\u89AA\u5207",casual:"\u8F15\u9B06\u96A8\u610F",enthusiastic:"\u71B1\u60C5\u6D3B\u6F51",careful:"\u8B39\u614E\u7D30\u7DFB",curious:"\u597D\u5947\u63A2\u7D22"}[t]||t}getTypingSpeedLabel(t){return{fast:"\u5FEB\u901F",medium:"\u9069\u4E2D",slow:"\u6162\u901F",random:"\u96A8\u6A5F"}[t]||t}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=Q({type:l,selectors:[["app-role-library"]],outputs:{roleAdded:"roleAdded",roleEdit:"roleEdit"},decls:30,vars:7,consts:[[1,"role-library","h-full","flex","flex-col","bg-slate-900"],[1,"p-4","border-b","border-slate-700/50","bg-slate-900/80","backdrop-blur-sm"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center","gap-3"],[1,"text-2xl"],[1,"text-xl","font-bold","text-white"],[1,"text-xs","bg-cyan-500/20","text-cyan-400","px-2","py-1","rounded-lg"],[1,"relative"],["type","text","placeholder","\u641C\u7D22\u89D2\u8272...",1,"w-64","bg-slate-800/50","border","border-slate-600/50","rounded-lg","pl-10","pr-4","py-2","text-sm","text-white","placeholder-slate-500","focus:outline-none","focus:ring-2","focus:ring-cyan-500/50",3,"ngModelChange","ngModel"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","-translate-y-1/2","w-4","h-4","text-slate-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"flex","items-center","gap-2","overflow-x-auto","pb-2"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","text-sm","font-medium","transition-all","whitespace-nowrap",3,"click"],[1,"text-xs","opacity-70"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","text-sm","font-medium","transition-all","whitespace-nowrap",3,"class"],[1,"flex-1","overflow-y-auto","p-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4"],[1,"bg-slate-800/50","border","border-slate-700/50","rounded-xl","p-4","cursor-pointer","hover:border-cyan-500/50","hover:bg-slate-800","transition-all","group",3,"ring-2","ring-cyan-500"],[1,"col-span-full","text-center","py-12","text-slate-500"],[1,"fixed","inset-y-0","right-0","w-96","bg-slate-900","border-l","border-slate-700/50","shadow-2xl","z-50","overflow-y-auto"],[1,"bg-slate-800/50","border","border-slate-700/50","rounded-xl","p-4","cursor-pointer","hover:border-cyan-500/50","hover:bg-slate-800","transition-all","group",3,"click"],[1,"flex","items-start","justify-between","mb-3"],[1,"w-12","h-12","rounded-full","flex","items-center","justify-center","text-2xl"],[1,"font-semibold","text-white","group-hover:text-cyan-400","transition-colors"],[1,"text-xs","px-2","py-0.5","rounded"],["title","\u6DFB\u52A0\u5230\u5287\u672C",1,"opacity-0","group-hover:opacity-100","transition-opacity","bg-cyan-500","hover:bg-cyan-600","text-white","p-2","rounded-lg",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"text-sm","text-slate-400","mb-3","line-clamp-2"],[1,"flex","flex-wrap","gap-1","mb-3"],[1,"text-xs","px-2","py-0.5","rounded-full","bg-slate-700/50","text-slate-300"],[1,"text-xs","px-2","py-0.5","rounded-full","bg-slate-700/50","text-slate-500"],[1,"flex","items-center","gap-2","text-xs","text-slate-500"],[1,"text-4xl","mb-3"],[1,"text-sm","mt-1"],[1,"absolute","top-4","right-4","text-slate-400","hover:text-white","p-2","hover:bg-slate-800","rounded-lg",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6","border-b","border-slate-700/50"],[1,"flex","items-center","gap-4","mb-4"],[1,"w-20","h-20","rounded-full","flex","items-center","justify-center","text-4xl"],[1,"text-sm","px-2","py-0.5","rounded"],[1,"flex","gap-2"],[1,"flex-1","bg-gradient-to-r","from-cyan-500","to-blue-500","hover:from-cyan-600","hover:to-blue-600","text-white","font-medium","py-2.5","px-4","rounded-lg","transition-all","flex","items-center","justify-center","gap-2",3,"click"],[1,"bg-slate-700","hover:bg-slate-600","text-white","py-2.5","px-4","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"p-6","space-y-6"],[1,"text-sm","font-medium","text-slate-400","mb-2"],[1,"text-white"],[1,"flex","flex-wrap","gap-2"],[1,"px-3","py-1","rounded-full","bg-cyan-500/20","text-cyan-400","text-sm"],[1,"space-y-1"],[1,"flex","items-center","gap-2","text-sm","text-slate-300"],[1,"px-3","py-1","rounded-lg","bg-purple-500/20","text-purple-400","text-sm"],[1,"space-y-2"],[1,"p-3","bg-slate-800/50","rounded-lg","text-sm","text-slate-300","italic"],[1,"grid","grid-cols-2","gap-3"],[1,"p-3","bg-slate-800/50","rounded-lg"],[1,"text-xs","text-slate-500"],[1,"text-sm","text-white"],[1,"text-slate-300"],[1,"text-cyan-400"]],template:function(e,n){if(e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),a(5,"\u{1F3AD}"),o(),i(6,"h2",5),a(7,"\u89D2\u8272\u5EAB"),o(),i(8,"span",6),a(9),o()(),i(10,"div",7)(11,"input",8),$("ngModelChange",function(u){return G(n.searchQuery,u)||(n.searchQuery=u),u}),o(),j(),i(12,"svg",9),R(13,"path",10),o()()(),z(),i(14,"div",11)(15,"button",12),g("click",function(){return n.selectedCategory.set(null)}),i(16,"span"),a(17,"\u{1F31F}"),o(),i(18,"span"),a(19,"\u5168\u90E8"),o(),i(20,"span",13),a(21),o()(),F(22,fi,7,5,"button",14,Ci),o()(),i(24,"div",15)(25,"div",16),F(26,yi,24,14,"div",17,vi,!1,Si,7,0,"div",18),o()(),h(29,ki,76,13,"div",19),o()),e&2){let r;s(9),x(" ",n.PRESET_ROLES.length," \u500B\u9810\u8A2D\u89D2\u8272 "),s(2),N("ngModel",n.searchQuery),s(4),Ce(n.selectedCategory()?"bg-slate-800/50 text-slate-400 hover:text-white":"bg-gradient-to-r from-cyan-500 to-blue-500 text-white"),s(6),x("(",n.PRESET_ROLES.length,")"),s(),A(n.categoryList),s(4),A(n.filteredRoles()),s(3),b((r=n.selectedRole())?29:-1,r)}},dependencies:[K,ne,le,se,ue],encapsulation:2})}};var Mt={new_customer_icebreak:{icon:"\u{1F91D}",name:"\u65B0\u5BA2\u6236\u7834\u51B0",description:"\u81EA\u7136\u4E92\u52D5 \u2192 \u9AD4\u9A57\u5206\u4EAB \u2192 \u5C08\u696D\u4ECB\u7D39",difficulty:"easy",duration:"10-15\u5206\u9418",successRate:"65%"},hesitant_conversion:{icon:"\u{1F4AA}",name:"\u7336\u8C6B\u5BA2\u6236\u4FC3\u55AE",description:"\u9700\u6C42\u78BA\u8A8D \u2192 \u5831\u50F9\u8AC7\u5224 \u2192 \u7279\u6279\u512A\u60E0",difficulty:"medium",duration:"20-30\u5206\u9418",successRate:"45%"},aftersales_handling:{icon:"\u{1F527}",name:"\u552E\u5F8C\u554F\u984C\u8655\u7406",description:"\u554F\u984C\u8A18\u9304 \u2192 \u6280\u8853\u6392\u67E5 \u2192 \u6EFF\u610F\u5EA6\u88DC\u511F",difficulty:"medium",duration:"15-25\u5206\u9418",successRate:"85%"},vip_service:{icon:"\u{1F451}",name:"\u9AD8\u50F9\u503C\u5BA2\u6236\u670D\u52D9",description:"\u5C0A\u8CB4\u63A5\u5F85 \u2192 \u5B9A\u5236\u65B9\u6848 \u2192 \u6230\u7565\u5408\u4F5C",difficulty:"hard",duration:"30-45\u5206\u9418",successRate:"70%"},community_activation:{icon:"\u{1F389}",name:"\u793E\u7FA4\u6D3B\u8E8D\u5F15\u5C0E",description:"\u8A71\u984C\u767C\u8D77 \u2192 \u4E92\u52D5\u8A0E\u8AD6 \u2192 \u50F9\u503C\u7E3D\u7D50",difficulty:"easy",duration:"\u6301\u7E8C\u6027",successRate:"80%"},product_launch:{icon:"\u{1F680}",name:"\u7522\u54C1\u767C\u5E03\u63A8\u5EE3",description:"\u9810\u71B1\u9020\u52E2 \u2192 \u5C08\u696D\u6E2C\u8A55 \u2192 \u6D3B\u52D5\u5F15\u7206",difficulty:"hard",duration:"\u591A\u65E5\u6D3B\u52D5",successRate:"55%"},education_sales:{icon:"\u{1F4DA}",name:"\u6559\u80B2\u8AB2\u7A0B\u92B7\u552E",description:"\u9700\u6C42\u5206\u6790 \u2192 \u8AB2\u7A0B\u4ECB\u7D39 \u2192 \u5B78\u54E1\u898B\u8B49",difficulty:"medium",duration:"20-30\u5206\u9418",successRate:"50%"},b2b_cooperation:{icon:"\u{1F3E2}",name:"B2B\u4F01\u696D\u5408\u4F5C",description:"\u5408\u4F5C\u9080\u7D04 \u2192 \u65B9\u6848\u8A2D\u8A08 \u2192 \u9805\u76EE\u63A8\u9032",difficulty:"hard",duration:"\u591A\u8F2A\u8DDF\u9032",successRate:"35%"},competitor_conversion:{icon:"\u{1F3AF}",name:"\u7AF6\u54C1\u7528\u6236\u8F49\u5316",description:"\u75DB\u9EDE\u5171\u9CF4 \u2192 \u512A\u52E2\u5C0D\u6BD4 \u2192 \u9077\u79FB\u512A\u60E0",difficulty:"hard",duration:"25-40\u5206\u9418",successRate:"40%"},churn_recovery:{icon:"\u{1F49D}",name:"\u6D41\u5931\u5BA2\u6236\u633D\u56DE",description:"\u95DC\u61F7\u56DE\u8A2A \u2192 \u554F\u984C\u89E3\u6C7A \u2192 \u7E8C\u8CBB\u512A\u60E0",difficulty:"medium",duration:"15-25\u5206\u9418",successRate:"30%"}},Tt=[{id:"scenario_new_customer_icebreak",type:"new_customer_icebreak",name:"\u65B0\u5BA2\u6236\u7834\u51B0",description:"\u901A\u904E\u71B1\u5FC3\u7FA4\u53CB\u548C\u8001\u7528\u6236\u7684\u771F\u5BE6\u5206\u4EAB\uFF0C\u81EA\u7136\u5730\u4ECB\u7D39\u7522\u54C1\uFF0C\u8B93\u65B0\u5BA2\u6236\u5FEB\u901F\u5EFA\u7ACB\u4FE1\u4EFB",roles:[{roleType:"friendly_member",order:1,isRequired:!0,purpose:"\u6D3B\u8E8D\u6C23\u6C1B\uFF0C\u81EA\u7136\u5F15\u5165\u8A71\u984C"},{roleType:"loyal_customer",order:2,isRequired:!0,purpose:"\u5206\u4EAB\u771F\u5BE6\u4F7F\u7528\u9AD4\u9A57"},{roleType:"sales_manager",order:3,isRequired:!0,purpose:"\u5C08\u696D\u89E3\u7B54\uFF0C\u4FC3\u6210\u610F\u5411"}],stages:[{id:"stage_1",name:"\u8A71\u984C\u5F15\u5165",roleType:"friendly_member",triggerType:"time",delaySeconds:30,messageTemplate:"\u5927\u5BB6\u597D\uFF01\u6700\u8FD1\u6709\u6C92\u6709\u4EC0\u9EBC\u597D\u7528\u7684{\u7522\u54C1\u985E\u578B}\u63A8\u85A6\u554A\uFF1F",successCondition:"\u5BA2\u6236\u53C3\u8207\u8A0E\u8AD6"},{id:"stage_2",name:"\u9AD4\u9A57\u5206\u4EAB",roleType:"loyal_customer",triggerType:"time",delaySeconds:60,messageTemplate:"\u6211\u7528{\u7522\u54C1\u540D}\u534A\u5E74\u591A\u4E86\uFF0C\u611F\u89BA\u9084\u4E0D\u932F\uFF01\u4E00\u958B\u59CB\u4E5F\u662F\u670B\u53CB\u63A8\u85A6\u7684\uFF0C\u6C92\u60F3\u5230\u771F\u7684\u5F88\u597D\u7528~",aiPrompt:"\u4EE5\u8001\u7528\u6236\u8EAB\u4EFD\u5206\u4EAB\u4F7F\u7528\u9AD4\u9A57\uFF0C\u771F\u5BE6\u81EA\u7136\uFF0C\u53EF\u4EE5\u63D0\u5230\u4E00\u4E9B\u5C0F\u7F3A\u9EDE\u4F46\u7E3D\u9AD4\u6EFF\u610F"},{id:"stage_3",name:"\u5C08\u696D\u4ECB\u7D39",roleType:"sales_manager",triggerType:"message",messageTemplate:"\u611F\u8B1D\u5206\u4EAB\uFF01{\u5BA2\u6236\u540D}\u60A8\u597D\uFF0C\u6211\u662F\u7522\u54C1\u9867\u554F\uFF0C\u6709\u4EC0\u9EBC\u5177\u9AD4\u554F\u984C\u53EF\u4EE5\u554F\u6211~",aiPrompt:"\u4EE5\u5C08\u696D\u9867\u554F\u8EAB\u4EFD\u8A73\u7D30\u89E3\u7B54\u554F\u984C\uFF0C\u6CE8\u610F\u50BE\u807D\u5BA2\u6236\u9700\u6C42"}],tips:["\u71B1\u5FC3\u7FA4\u53CB\u5148\u6D3B\u8E8D\u6C23\u6C1B\uFF0C\u4E0D\u8981\u4E00\u958B\u59CB\u5C31\u63A8\u92B7","\u8001\u7528\u6236\u5206\u4EAB\u8981\u771F\u5BE6\u81EA\u7136\uFF0C\u907F\u514D\u904E\u5EA6\u8A87\u5F35","\u92B7\u552E\u51FA\u5834\u6642\u6A5F\u8981\u628A\u63E1\uFF0C\u5728\u5BA2\u6236\u8868\u73FE\u8208\u8DA3\u5F8C"]},{id:"scenario_hesitant_conversion",type:"hesitant_conversion",name:"\u7336\u8C6B\u5BA2\u6236\u4FC3\u55AE",description:"\u901A\u904E\u5C64\u5C64\u905E\u9032\u7684\u7B56\u7565\uFF0C\u5F9E\u9700\u6C42\u78BA\u8A8D\u5230\u50F9\u683C\u8AC7\u5224\uFF0C\u6700\u7D42\u7531\u7E3D\u76E3\u7279\u6279\u512A\u60E0\u4FC3\u6210\u6210\u4EA4",roles:[{roleType:"account_manager",order:1,isRequired:!0,purpose:"\u4E86\u89E3\u9867\u616E\uFF0C\u78BA\u8A8D\u9700\u6C42"},{roleType:"price_specialist",order:2,isRequired:!0,purpose:"\u63D0\u4F9B\u5831\u50F9\uFF0C\u8AC7\u5224\u50F9\u683C"},{roleType:"regional_director",order:3,isRequired:!1,purpose:"\u7279\u6279\u6700\u7D42\u512A\u60E0"}],stages:[{id:"stage_1",name:"\u9700\u6C42\u78BA\u8A8D",roleType:"account_manager",triggerType:"manual",messageTemplate:"{\u5BA2\u6236\u540D}\u60A8\u597D\uFF0C\u6211\u662F\u60A8\u7684\u5C08\u5C6C\u5BA2\u6236\u7D93\u7406\u3002\u4E86\u89E3\u5230\u60A8\u5C0D{\u7522\u54C1}\u6709\u8208\u8DA3\uFF0C\u8ACB\u554F\u4E3B\u8981\u662F\u54EA\u4E9B\u65B9\u9762\u8B93\u60A8\u9084\u5728\u8003\u616E\u5462\uFF1F",aiPrompt:"\u8010\u5FC3\u50BE\u807D\u5BA2\u6236\u9867\u616E\uFF0C\u9010\u4E00\u8A18\u9304\u4E26\u56DE\u61C9",successCondition:"\u5BA2\u6236\u8AAA\u51FA\u5177\u9AD4\u9867\u616E"},{id:"stage_2",name:"\u5831\u50F9\u8AC7\u5224",roleType:"price_specialist",triggerType:"message",delaySeconds:120,messageTemplate:"\u6211\u662F\u50F9\u683C\u5C08\u54E1\uFF0C\u91DD\u5C0D\u60A8\u7684\u9700\u6C42\uFF0C\u6211\u5011\u53EF\u4EE5\u63D0\u4F9B\u4E00\u500B\u7279\u5225\u65B9\u6848...",aiPrompt:"\u6839\u64DA\u5BA2\u6236\u9867\u616E\u9EDE\u8A2D\u8A08\u512A\u60E0\u65B9\u6848\uFF0C\u5F37\u8ABF\u50F9\u503C\u800C\u975E\u50F9\u683C"},{id:"stage_3",name:"\u7E3D\u76E3\u7279\u6279",roleType:"regional_director",triggerType:"manual",messageTemplate:"\u60A8\u597D\uFF0C\u6211\u662F\u5340\u57DF\u7E3D\u76E3\u3002\u4E86\u89E3\u5230\u60A8\u7684\u60C5\u6CC1\uFF0C\u6211\u53EF\u4EE5\u7279\u6279\u4E00\u500B\u984D\u5916\u512A\u60E0...",aiPrompt:"\u4EE5\u9AD8\u5C64\u8EAB\u4EFD\u505A\u6700\u5F8C\u8B93\u6B65\uFF0C\u71DF\u9020\u7A00\u7F3A\u611F"}],tips:["\u5148\u89E3\u6C7A\u50F9\u683C\u4EE5\u5916\u7684\u9867\u616E","\u50F9\u683C\u5C08\u54E1\u7684\u8B93\u6B65\u8981\u6709\u7406\u7531\uFF08\u5982\u9996\u55AE\u3001\u9577\u671F\u5408\u4F5C\u7B49\uFF09","\u7E3D\u76E3\u51FA\u5834\u662F\u6700\u5F8C\u624B\u6BB5\uFF0C\u8981\u71DF\u9020\u7A00\u7F3A\u611F"]},{id:"scenario_aftersales_handling",type:"aftersales_handling",name:"\u552E\u5F8C\u554F\u984C\u8655\u7406",description:"\u9AD8\u6548\u8655\u7406\u5BA2\u6236\u552E\u5F8C\u554F\u984C\uFF0C\u5F9E\u554F\u984C\u8A18\u9304\u5230\u6280\u8853\u6392\u67E5\uFF0C\u78BA\u4FDD\u5BA2\u6236\u6EFF\u610F",roles:[{roleType:"cs_agent",order:1,isRequired:!0,purpose:"\u8A18\u9304\u554F\u984C\uFF0C\u521D\u6B65\u5B89\u64AB"},{roleType:"tech_support",order:2,isRequired:!0,purpose:"\u6280\u8853\u6392\u67E5\uFF0C\u89E3\u6C7A\u554F\u984C"},{roleType:"complaint_handler",order:3,isRequired:!1,purpose:"\u8655\u7406\u6295\u8A34\uFF0C\u6EFF\u610F\u5EA6\u88DC\u511F"}],stages:[{id:"stage_1",name:"\u554F\u984C\u8A18\u9304",roleType:"cs_agent",triggerType:"message",messageTemplate:"\u60A8\u597D\uFF0C\u975E\u5E38\u62B1\u6B49\u7D66\u60A8\u5E36\u4F86\u4E0D\u4FBF\uFF01\u8ACB\u60A8\u8A73\u7D30\u63CF\u8FF0\u4E00\u4E0B\u9047\u5230\u7684\u554F\u984C\uFF0C\u6211\u99AC\u4E0A\u70BA\u60A8\u8655\u7406\u3002",aiPrompt:"\u8868\u9054\u6B49\u610F\u548C\u91CD\u8996\uFF0C\u8A73\u7D30\u8A18\u9304\u554F\u984C\u7D30\u7BC0",successCondition:"\u7372\u53D6\u554F\u984C\u8A73\u60C5"},{id:"stage_2",name:"\u6280\u8853\u6392\u67E5",roleType:"tech_support",triggerType:"time",delaySeconds:60,messageTemplate:"\u60A8\u597D\uFF0C\u6211\u662F\u6280\u8853\u652F\u6301\u3002\u6839\u64DA\u60A8\u63CF\u8FF0\u7684\u554F\u984C\uFF0C\u8ACB\u60A8\u5617\u8A66\u4EE5\u4E0B\u6B65\u9A5F...",aiPrompt:"\u63D0\u4F9B\u5C08\u696D\u7684\u6280\u8853\u89E3\u6C7A\u65B9\u6848\uFF0C\u6B65\u9A5F\u6E05\u6670"},{id:"stage_3",name:"\u6EFF\u610F\u5EA6\u78BA\u8A8D",roleType:"complaint_handler",triggerType:"time",delaySeconds:300,messageTemplate:"\u554F\u984C\u89E3\u6C7A\u4E86\u55CE\uFF1F\u70BA\u8868\u6B49\u610F\uFF0C\u6211\u5011\u70BA\u60A8\u7533\u8ACB\u4E86\u4E00\u4EFD\u5C0F\u79AE\u54C1...",aiPrompt:"\u78BA\u8A8D\u554F\u984C\u89E3\u6C7A\uFF0C\u63D0\u4F9B\u9069\u7576\u88DC\u511F"}],tips:["\u7B2C\u4E00\u6642\u9593\u8868\u9054\u6B49\u610F\u548C\u91CD\u8996","\u6280\u8853\u89E3\u6C7A\u65B9\u6848\u8981\u6E05\u6670\u6613\u61C2","\u554F\u984C\u89E3\u6C7A\u5F8C\u8981\u8DDF\u9032\u6EFF\u610F\u5EA6"]},{id:"scenario_vip_service",type:"vip_service",name:"\u9AD8\u50F9\u503C\u5BA2\u6236\u670D\u52D9",description:"\u70BA\u9AD8\u50F9\u503C\u5BA2\u6236\u63D0\u4F9B\u5C0A\u8CB4\u9AD4\u9A57\uFF0C\u5F9EVIP\u63A5\u5F85\u5230\u5B9A\u5236\u65B9\u6848\uFF0C\u53EF\u5347\u7D1A\u5230\u5275\u59CB\u4EBA\u89AA\u81EA\u5C0D\u63A5",roles:[{roleType:"vip_service",order:1,isRequired:!0,purpose:"VIP\u5C08\u5C6C\u63A5\u5F85"},{roleType:"solution_expert",order:2,isRequired:!0,purpose:"\u8A2D\u8A08\u5B9A\u5236\u65B9\u6848"},{roleType:"founder_ceo",order:3,isRequired:!1,purpose:"\u6230\u7565\u7D1A\u5408\u4F5C"}],stages:[{id:"stage_1",name:"\u5C0A\u8CB4\u63A5\u5F85",roleType:"vip_service",triggerType:"manual",messageTemplate:"{\u5BA2\u6236\u540D}\u5148\u751F/\u5973\u58EB\u60A8\u597D\uFF01\u6211\u662F\u60A8\u7684VIP\u5C08\u5C6C\u5BA2\u670D\uFF0C\u611F\u8B1D\u60A8\u4E00\u76F4\u4EE5\u4F86\u7684\u652F\u6301\u3002\u6709\u4EFB\u4F55\u9700\u6C42\u96A8\u6642\u544A\u8A34\u6211~",aiPrompt:"\u71DF\u9020\u5C0A\u8CB4\u611F\uFF0C\u8B93\u5BA2\u6236\u611F\u53D7\u88AB\u91CD\u8996"},{id:"stage_2",name:"\u5B9A\u5236\u65B9\u6848",roleType:"solution_expert",triggerType:"message",delaySeconds:120,messageTemplate:"\u6839\u64DA\u60A8\u7684\u696D\u52D9\u898F\u6A21\u548C\u9700\u6C42\uFF0C\u6211\u5011\u70BA\u60A8\u8A2D\u8A08\u4E86\u5C08\u5C6C\u65B9\u6848...",aiPrompt:"\u63D0\u4F9B\u771F\u6B63\u5B9A\u5236\u5316\u7684\u65B9\u6848\uFF0C\u9AD4\u73FE\u5C08\u696D\u6027"},{id:"stage_3",name:"\u6230\u7565\u5408\u4F5C",roleType:"founder_ceo",triggerType:"manual",messageTemplate:"\u60A8\u597D\uFF0C\u6211\u662F{\u516C\u53F8}\u5275\u59CB\u4EBA\u3002\u60A8\u662F\u6211\u5011\u975E\u5E38\u91CD\u8996\u7684\u5408\u4F5C\u5925\u4F34\uFF0C\u6211\u89AA\u81EA\u4F86\u548C\u60A8\u8AC7\u9019\u6B21\u5408\u4F5C...",aiPrompt:"\u4EE5\u5275\u59CB\u4EBA\u8EAB\u4EFD\u5EFA\u7ACB\u6DF1\u5EA6\u9023\u63A5"}],tips:["VIP\u670D\u52D9\u8981\u9AD4\u73FE\u5DEE\u7570\u5316\u548C\u5C0A\u8CB4\u611F","\u65B9\u6848\u8981\u771F\u6B63\u5B9A\u5236\uFF0C\u4E0D\u80FD\u662F\u6A21\u677F\u5957\u7528","\u5275\u59CB\u4EBA\u51FA\u5834\u8981\u6709\u7279\u6B8A\u7406\u7531"]},{id:"scenario_community_activation",type:"community_activation",name:"\u793E\u7FA4\u6D3B\u8E8D\u5F15\u5C0E",description:"\u901A\u904E\u591A\u89D2\u8272\u914D\u5408\uFF0C\u6301\u7E8C\u4FDD\u6301\u793E\u7FA4\u6D3B\u8E8D\u5EA6\uFF0C\u5F15\u5C0E\u6709\u50F9\u503C\u7684\u8A0E\u8AD6",roles:[{roleType:"community_manager",order:1,isRequired:!0,purpose:"\u767C\u8D77\u8A71\u984C\uFF0C\u7DAD\u8B77\u79E9\u5E8F"},{roleType:"friendly_member",order:2,isRequired:!0,purpose:"\u6D3B\u8E8D\u6C23\u6C1B\uFF0C\u7A4D\u6975\u4E92\u52D5"},{roleType:"friendly_member",order:3,isRequired:!1,purpose:"\u6301\u7E8C\u4E92\u52D5"},{roleType:"opinion_leader",order:4,isRequired:!1,purpose:"\u50F9\u503C\u7E3D\u7D50\uFF0C\u89C0\u9EDE\u8F38\u51FA"}],stages:[{id:"stage_1",name:"\u8A71\u984C\u767C\u8D77",roleType:"community_manager",triggerType:"time",messageTemplate:"\u65E9\u5B89\u5404\u4F4D\uFF01\u4ECA\u5929\u4F86\u804A\u804A{\u8A71\u984C}\uFF0C\u5927\u5BB6\u6709\u4EC0\u9EBC\u7D93\u9A57\u5206\u4EAB\u55CE\uFF1F",aiPrompt:"\u767C\u8D77\u6709\u8A0E\u8AD6\u50F9\u503C\u7684\u8A71\u984C"},{id:"stage_2",name:"\u7A4D\u6975\u97FF\u61C9",roleType:"friendly_member",triggerType:"time",delaySeconds:60,messageTemplate:"\u9019\u500B\u8A71\u984C\u597D\uFF01\u6211\u4F86\u8AAA\u8AAA\u6211\u7684\u7D93\u9A57...",aiPrompt:"\u7A4D\u6975\u97FF\u61C9\uFF0C\u5206\u4EAB\u500B\u4EBA\u7D93\u9A57"},{id:"stage_3",name:"\u6301\u7E8C\u4E92\u52D5",roleType:"friendly_member",triggerType:"time",delaySeconds:120,messageTemplate:"\u6A13\u4E0A\u8AAA\u5F97\u5C0D\uFF01\u6211\u88DC\u5145\u4E00\u9EDE...",aiPrompt:"\u8A8D\u540C\u4E26\u88DC\u5145\uFF0C\u5F15\u767C\u66F4\u591A\u8A0E\u8AD6"},{id:"stage_4",name:"\u50F9\u503C\u7E3D\u7D50",roleType:"opinion_leader",triggerType:"time",delaySeconds:300,messageTemplate:"\u770B\u4E86\u5927\u5BB6\u7684\u8A0E\u8AD6\uFF0C\u6211\u7E3D\u7D50\u4E00\u4E0B\u91CD\u9EDE...",aiPrompt:"\u7E3D\u7D50\u8A0E\u8AD6\u50F9\u503C\uFF0C\u7D66\u51FA\u5C08\u696D\u89C0\u9EDE"}],tips:["\u8A71\u984C\u8981\u6709\u8A0E\u8AD6\u50F9\u503C\uFF0C\u907F\u514D\u904E\u65BC\u71DF\u92B7","\u591A\u500B\u7FA4\u53CB\u914D\u5408\u8981\u81EA\u7136\uFF0C\u907F\u514D\u5237\u5C4F","\u5B9A\u671F\u8B8A\u63DB\u8A71\u984C\u548C\u4E92\u52D5\u5F62\u5F0F"]},{id:"scenario_product_launch",type:"product_launch",name:"\u7522\u54C1\u767C\u5E03\u63A8\u5EE3",description:"\u65B0\u7522\u54C1\u767C\u5E03\u7684\u5B8C\u6574\u63A8\u5EE3\u6D41\u7A0B\uFF0C\u5F9E\u9810\u71B1\u5230\u5F15\u7206",roles:[{roleType:"brand_ambassador",order:1,isRequired:!0,purpose:"\u9810\u71B1\u9020\u52E2"},{roleType:"tech_blogger",order:2,isRequired:!0,purpose:"\u5C08\u696D\u6E2C\u8A55"},{roleType:"event_operator",order:3,isRequired:!0,purpose:"\u6D3B\u52D5\u5F15\u7206"}],stages:[{id:"stage_1",name:"\u9810\u71B1\u9020\u52E2",roleType:"brand_ambassador",triggerType:"time",messageTemplate:"\u6709\u500B\u5927\u6D88\u606F\u8981\u544A\u8A34\u5927\u5BB6\uFF01{\u7522\u54C1\u540D}\u5373\u5C07\u767C\u5E03\uFF0C\u64DA\u8AAA\u6709\u5F88\u591A\u9A5A\u559C...",aiPrompt:"\u88FD\u9020\u61F8\u5FF5\u548C\u671F\u5F85\u611F"},{id:"stage_2",name:"\u5C08\u696D\u6E2C\u8A55",roleType:"tech_blogger",triggerType:"time",delaySeconds:86400,messageTemplate:"\u6211\u63D0\u524D\u62FF\u5230\u4E86{\u7522\u54C1\u540D}\u7684\u6E2C\u8A66\u7248\uFF0C\u4F86\u8DDF\u5927\u5BB6\u5206\u4EAB\u4E00\u4E0B...",aiPrompt:"\u5C08\u696D\u5BA2\u89C0\u7684\u6E2C\u8A55\uFF0C\u7A81\u51FA\u4EAE\u9EDE"},{id:"stage_3",name:"\u6D3B\u52D5\u5F15\u7206",roleType:"event_operator",triggerType:"time",delaySeconds:172800,messageTemplate:"\u{1F389} {\u7522\u54C1\u540D}\u6B63\u5F0F\u767C\u5E03\uFF01\u9650\u6642\u512A\u60E0\u4F86\u4E86\uFF01",aiPrompt:"\u71DF\u9020\u6436\u8CFC\u6C1B\u570D\uFF0C\u5F15\u5C0E\u4E0B\u55AE"}],tips:["\u9810\u71B1\u671F\u8981\u4FDD\u6301\u795E\u79D8\u611F","\u6E2C\u8A55\u8981\u5C08\u696D\u53EF\u4FE1","\u767C\u5E03\u6D3B\u52D5\u8981\u6709\u7DCA\u8FEB\u611F"]},{id:"scenario_education_sales",type:"education_sales",name:"\u6559\u80B2\u8AB2\u7A0B\u92B7\u552E",description:"\u901A\u904E\u9700\u6C42\u5206\u6790\u548C\u5B78\u54E1\u898B\u8B49\uFF0C\u4FC3\u9032\u8AB2\u7A0B\u5831\u540D",roles:[{roleType:"education_consultant",order:1,isRequired:!0,purpose:"\u9700\u6C42\u5206\u6790\uFF0C\u8AB2\u7A0B\u63A8\u85A6"},{roleType:"trainer",order:2,isRequired:!1,purpose:"\u8AB2\u7A0B\u4ECB\u7D39\uFF0C\u5C08\u696D\u80CC\u66F8"},{roleType:"loyal_customer",order:3,isRequired:!0,purpose:"\u5B78\u54E1\u898B\u8B49"}],stages:[{id:"stage_1",name:"\u9700\u6C42\u5206\u6790",roleType:"education_consultant",triggerType:"message",messageTemplate:"\u60A8\u597D\uFF01\u8ACB\u554F\u60A8\u60F3\u5B78\u7FD2\u7684\u4E3B\u8981\u76EE\u6A19\u662F\u4EC0\u9EBC\uFF1F\u6211\u4F86\u5E6B\u60A8\u898F\u5283\u5B78\u7FD2\u8DEF\u5F91~",aiPrompt:"\u4E86\u89E3\u5B78\u7FD2\u76EE\u6A19\u548C\u73FE\u72C0\uFF0C\u63A8\u85A6\u5408\u9069\u8AB2\u7A0B"},{id:"stage_2",name:"\u8AB2\u7A0B\u4ECB\u7D39",roleType:"trainer",triggerType:"time",delaySeconds:120,messageTemplate:"\u6211\u662F\u9019\u9580\u8AB2\u7684\u8B1B\u5E2B\uFF0C\u4F86\u7D66\u5927\u5BB6\u4ECB\u7D39\u4E00\u4E0B\u8AB2\u7A0B\u5167\u5BB9...",aiPrompt:"\u5C08\u696D\u4ECB\u7D39\u8AB2\u7A0B\u4EAE\u9EDE\u548C\u5B78\u7FD2\u6536\u76CA"},{id:"stage_3",name:"\u5B78\u54E1\u898B\u8B49",roleType:"loyal_customer",triggerType:"time",delaySeconds:180,messageTemplate:"\u6211\u662F\u4E4B\u524D\u5B78\u904E\u9019\u9580\u8AB2\u7684\u5B78\u54E1\uFF0C\u5206\u4EAB\u4E00\u4E0B\u6211\u7684\u5B78\u7FD2\u7D93\u6B77...",aiPrompt:"\u771F\u5BE6\u5206\u4EAB\u5B78\u7FD2\u7D93\u6B77\u548C\u6536\u7A6B"}],tips:["\u5148\u4E86\u89E3\u9700\u6C42\u518D\u63A8\u8AB2\u7A0B","\u8B1B\u5E2B\u80CC\u66F8\u589E\u52A0\u53EF\u4FE1\u5EA6","\u5B78\u54E1\u898B\u8B49\u8981\u771F\u5BE6\u5177\u9AD4"]},{id:"scenario_b2b_cooperation",type:"b2b_cooperation",name:"B2B\u4F01\u696D\u5408\u4F5C",description:"\u5C08\u696D\u7684B2B\u5546\u52D9\u5408\u4F5C\u6D41\u7A0B",roles:[{roleType:"business_manager",order:1,isRequired:!0,purpose:"\u5408\u4F5C\u9080\u7D04"},{roleType:"solution_architect",order:2,isRequired:!0,purpose:"\u65B9\u6848\u8A2D\u8A08"},{roleType:"project_manager",order:3,isRequired:!1,purpose:"\u9805\u76EE\u63A8\u9032"}],stages:[{id:"stage_1",name:"\u5408\u4F5C\u9080\u7D04",roleType:"business_manager",triggerType:"manual",messageTemplate:"\u60A8\u597D\uFF0C\u6211\u662F{\u516C\u53F8}\u62DB\u5546\u7D93\u7406\u3002\u4E86\u89E3\u5230\u8CB4\u516C\u53F8\u5728{\u9818\u57DF}\u6709\u5F88\u597D\u7684\u8CC7\u6E90\uFF0C\u60F3\u63A2\u8A0E\u4E00\u4E0B\u5408\u4F5C\u6A5F\u6703...",aiPrompt:"\u5C08\u696D\u7684\u5546\u52D9\u9080\u7D04\uFF0C\u8868\u9054\u5408\u4F5C\u8AA0\u610F"},{id:"stage_2",name:"\u65B9\u6848\u8A2D\u8A08",roleType:"solution_architect",triggerType:"message",messageTemplate:"\u6839\u64DA\u8CB4\u516C\u53F8\u7684\u60C5\u6CC1\uFF0C\u6211\u5011\u8A2D\u8A08\u4E86\u9019\u6A23\u7684\u5408\u4F5C\u65B9\u6848...",aiPrompt:"\u8A2D\u8A08\u4E92\u5229\u5171\u8D0F\u7684\u5408\u4F5C\u65B9\u6848"},{id:"stage_3",name:"\u9805\u76EE\u63A8\u9032",roleType:"project_manager",triggerType:"message",messageTemplate:"\u5408\u4F5C\u65B9\u6848\u78BA\u8A8D\u5F8C\uFF0C\u6211\u6703\u8CA0\u8CAC\u9805\u76EE\u7684\u63A8\u9032\u548C\u843D\u5730...",aiPrompt:"\u660E\u78BA\u9805\u76EE\u8A08\u5283\u548C\u8CAC\u4EFB\u5206\u5DE5"}],tips:["B2B\u5408\u4F5C\u8981\u5C08\u696D\u6B63\u5F0F","\u65B9\u6848\u8981\u9AD4\u73FE\u4E92\u5229\u5171\u8D0F","\u9805\u76EE\u63A8\u9032\u8981\u6709\u660E\u78BA\u8A08\u5283"]},{id:"scenario_competitor_conversion",type:"competitor_conversion",name:"\u7AF6\u54C1\u7528\u6236\u8F49\u5316",description:"\u901A\u904E\u75DB\u9EDE\u5171\u9CF4\u548C\u512A\u52E2\u5C0D\u6BD4\uFF0C\u5438\u5F15\u7AF6\u54C1\u7528\u6236\u8F49\u5316",roles:[{roleType:"competitor_analyst",order:1,isRequired:!0,purpose:"\u75DB\u9EDE\u5171\u9CF4\uFF0C\u512A\u52E2\u5C0D\u6BD4"},{roleType:"product_engineer",order:2,isRequired:!1,purpose:"\u6280\u8853\u512A\u52E2\u8B1B\u89E3"},{roleType:"sales_manager",order:3,isRequired:!0,purpose:"\u9077\u79FB\u512A\u60E0"}],stages:[{id:"stage_1",name:"\u75DB\u9EDE\u5171\u9CF4",roleType:"competitor_analyst",triggerType:"message",messageTemplate:"\u4E86\u89E3\u5230\u60A8\u4E4B\u524D\u7528\u904E{\u7AF6\u54C1}\uFF0C\u662F\u9047\u5230\u4E86\u4EC0\u9EBC\u554F\u984C\u55CE\uFF1F",aiPrompt:"\u4E86\u89E3\u7AF6\u54C1\u4F7F\u7528\u75DB\u9EDE\uFF0C\u8868\u9054\u7406\u89E3"},{id:"stage_2",name:"\u512A\u52E2\u5C0D\u6BD4",roleType:"product_engineer",triggerType:"time",delaySeconds:120,messageTemplate:"\u5F9E\u6280\u8853\u89D2\u5EA6\u4F86\u8AAA\uFF0C\u6211\u5011\u7684\u7522\u54C1\u5728\u9019\u4E9B\u65B9\u9762\u6709\u512A\u52E2...",aiPrompt:"\u5BA2\u89C0\u5C0D\u6BD4\u6280\u8853\u512A\u52E2\uFF0C\u4E0D\u8CB6\u4F4E\u7AF6\u54C1"},{id:"stage_3",name:"\u9077\u79FB\u512A\u60E0",roleType:"sales_manager",triggerType:"message",messageTemplate:"\u70BA\u4E86\u5E6B\u52A9\u60A8\u9806\u5229\u9077\u79FB\uFF0C\u6211\u5011\u63D0\u4F9B\u5C08\u5C6C\u512A\u60E0\u548C\u9077\u79FB\u652F\u6301...",aiPrompt:"\u63D0\u4F9B\u9077\u79FB\u6FC0\u52F5\uFF0C\u964D\u4F4E\u9077\u79FB\u6210\u672C"}],tips:["\u4E0D\u8981\u8CB6\u4F4E\u7AF6\u54C1\uFF0C\u5BA2\u89C0\u5C0D\u6BD4","\u91CD\u9EDE\u89E3\u6C7A\u7AF6\u54C1\u7684\u75DB\u9EDE","\u63D0\u4F9B\u9077\u79FB\u652F\u6301\u964D\u4F4E\u9580\u6ABB"]},{id:"scenario_churn_recovery",type:"churn_recovery",name:"\u6D41\u5931\u5BA2\u6236\u633D\u56DE",description:"\u901A\u904E\u95DC\u61F7\u56DE\u8A2A\u548C\u554F\u984C\u89E3\u6C7A\uFF0C\u633D\u56DE\u6D41\u5931\u5BA2\u6236",roles:[{roleType:"callback_agent",order:1,isRequired:!0,purpose:"\u95DC\u61F7\u56DE\u8A2A"},{roleType:"customer_success",order:2,isRequired:!0,purpose:"\u554F\u984C\u89E3\u6C7A"},{roleType:"regional_director",order:3,isRequired:!1,purpose:"\u7279\u5225\u633D\u7559"}],stages:[{id:"stage_1",name:"\u95DC\u61F7\u56DE\u8A2A",roleType:"callback_agent",triggerType:"manual",messageTemplate:"{\u5BA2\u6236\u540D}\u60A8\u597D\uFF01\u597D\u4E45\u6C92\u806F\u7E6B\u4E86\uFF0C\u60F3\u95DC\u5FC3\u4E00\u4E0B\u60A8\u6700\u8FD1\u7684\u60C5\u6CC1...",aiPrompt:"\u771F\u8AA0\u95DC\u61F7\uFF0C\u4E86\u89E3\u96E2\u958B\u539F\u56E0"},{id:"stage_2",name:"\u554F\u984C\u89E3\u6C7A",roleType:"customer_success",triggerType:"message",messageTemplate:"\u611F\u8B1D\u60A8\u7684\u53CD\u994B\uFF01\u91DD\u5C0D\u60A8\u63D0\u5230\u7684\u554F\u984C\uFF0C\u6211\u5011\u5DF2\u7D93...",aiPrompt:"\u91DD\u5C0D\u6027\u89E3\u6C7A\u554F\u984C\uFF0C\u5C55\u793A\u6539\u9032"},{id:"stage_3",name:"\u7279\u5225\u633D\u7559",roleType:"regional_director",triggerType:"manual",messageTemplate:"\u4F5C\u70BA\u5340\u57DF\u7E3D\u76E3\uFF0C\u6211\u975E\u5E38\u91CD\u8996\u60A8\u7684\u53CD\u994B\u3002\u70BA\u8868\u8AA0\u610F\uFF0C\u6211\u5011\u6E96\u5099\u4E86...",aiPrompt:"\u9AD8\u5C64\u51FA\u9762\uFF0C\u63D0\u4F9B\u7279\u5225\u512A\u60E0"}],tips:["\u5148\u95DC\u5FC3\u518D\u8AC7\u56DE\u4F86","\u8A8D\u771F\u5C0D\u5F85\u96E2\u958B\u539F\u56E0","\u63D0\u4F9B\u6709\u8AA0\u610F\u7684\u633D\u7559\u65B9\u6848"]}];var Rt=(l,t)=>t.id;function Mi(l,t){if(l&1&&(v(0,"div",13),a(1),C()),l&2){let e=t.$implicit,n=d(2);pt("title",n.getRoleLabel(e.roleType)),s(),x(" ",n.getRoleEmoji(e.roleType)," ")}}function Ti(l,t){if(l&1&&(v(0,"div",14),a(1),C()),l&2){let e=d().$implicit;s(),x(" +",e.roles.length-3," ")}}function Ri(l,t){if(l&1){let e=y();v(0,"div",4),ae("click",function(){let r=c(e).$implicit,u=d();return m(u.selectScenario(r))}),v(1,"div",5)(2,"div",6),a(3),C(),v(4,"div")(5,"h3",7),a(6),C(),v(7,"div",8)(8,"span"),a(9),C(),v(10,"span",9),a(11,"\xB7"),C(),v(12,"span",10),a(13),C()()()(),v(14,"p",11),a(15),C(),v(16,"div",12),F(17,Mi,2,2,"div",13,he),h(19,Ti,2,1,"div",14),C(),v(20,"div",15)(21,"span",9),a(22,"\u6210\u529F\u7387"),C(),v(23,"span",16),a(24),C()()()}if(l&2){let e,n,r=t.$implicit,u=d();E("ring-2",((e=u.selectedScenario())==null?null:e.id)===r.id)("ring-cyan-500",((n=u.selectedScenario())==null?null:n.id)===r.id),s(3),x(" ",u.getScenarioMeta(r.type).icon," "),s(3),x(" ",r.name," "),s(2),Ce(u.getDifficultyColor(u.getScenarioMeta(r.type).difficulty)),s(),x(" ",u.getDifficultyLabel(u.getScenarioMeta(r.type).difficulty)," "),s(4),_(u.getScenarioMeta(r.type).duration),s(2),x(" ",u.getScenarioMeta(r.type).description," "),s(2),A(r.roles.slice(0,3)),s(2),b(r.roles.length>3?19:-1),s(5),_(u.getScenarioMeta(r.type).successRate)}}function Ii(l,t){l&1&&(v(0,"span",45),a(1,"\u5FC5\u9700"),C())}function Pi(l,t){if(l&1&&(v(0,"div",30)(1,"div",42)(2,"span",43),a(3),C(),v(4,"span",44),a(5),C(),h(6,Ii,2,0,"span",45),C(),v(7,"p",46),a(8),C()()),l&2){let e=t.$implicit,n=d(2);s(3),_(n.getRoleEmoji(e.roleType)),s(2),_(n.getRoleLabel(e.roleType)),s(),b(e.isRequired?6:-1),s(2),_(e.purpose)}}function Bi(l,t){if(l&1&&(v(0,"span",51),a(1),C()),l&2){let e=d().$implicit,n=d(2);s(),_(n.formatDelay(e.delaySeconds))}}function Vi(l,t){if(l&1&&(v(0,"p",53),a(1),C()),l&2){let e=d().$implicit;s(),x("\u2713 ",e.successCondition)}}function Ni(l,t){if(l&1&&(v(0,"div",34)(1,"div",47),a(2),C(),v(3,"div",48)(4,"div",49)(5,"h4",50),a(6),C(),v(7,"div",8)(8,"span",10),a(9),C(),h(10,Bi,2,1,"span",51),C()(),v(11,"p",52),a(12),C(),h(13,Vi,2,1,"p",53),C()()),l&2){let e=t.$implicit,n=t.$index,r=d(2);s(2),x(" ",n+1," "),s(4),_(e.name),s(3),J("",r.getRoleEmoji(e.roleType)," ",r.getRoleLabel(e.roleType)),s(),b(e.delaySeconds?10:-1),s(2),x('"',e.messageTemplate,'"'),s(),b(e.successCondition?13:-1)}}function Gi(l,t){if(l&1&&(v(0,"div",36)(1,"span",54),a(2,"\u2022"),C(),v(3,"span"),a(4),C()()),l&2){let e=t.$implicit;s(4),_(e)}}function $i(l,t){if(l&1){let e=y();v(0,"div",17),ae("click",function(){c(e);let r=d();return m(r.selectedScenario.set(null))}),v(1,"div",18),ae("click",function(r){return c(e),m(r.stopPropagation())}),v(2,"div",19)(3,"div",20)(4,"div",21)(5,"div",22),a(6),C(),v(7,"div")(8,"h2",23),a(9),C(),v(10,"p",10),a(11),C()()(),v(12,"button",24),ae("click",function(){c(e);let r=d();return m(r.selectedScenario.set(null))}),j(),v(13,"svg",25),oe(14,"path",26),C()()()(),z(),v(15,"div",27)(16,"div")(17,"h3",28)(18,"span"),a(19,"\u{1F465}"),C(),a(20," \u53C3\u8207\u89D2\u8272 "),C(),v(21,"div",29),F(22,Pi,9,4,"div",30,he),C()(),v(24,"div")(25,"h3",28)(26,"span"),a(27,"\u{1F4CB}"),C(),a(28," \u6D41\u7A0B\u968E\u6BB5 "),C(),v(29,"div",31),oe(30,"div",32),v(31,"div",33),F(32,Ni,14,7,"div",34,Rt),C()()(),v(34,"div")(35,"h3",28)(36,"span"),a(37,"\u{1F4A1}"),C(),a(38," \u4F7F\u7528\u63D0\u793A "),C(),v(39,"div",35),F(40,Gi,5,1,"div",36,Y),C()()(),v(42,"div",37)(43,"button",38),ae("click",function(){c(e);let r=d();return m(r.selectedScenario.set(null))}),a(44," \u53D6\u6D88 "),C(),v(45,"button",39),ae("click",function(){let r=c(e),u=d();return m(u.applyScenario(r))}),j(),v(46,"svg",40),oe(47,"path",41),C(),a(48," \u61C9\u7528\u6B64\u5834\u666F "),C()()()()}if(l&2){let e=t,n=d();s(6),x(" ",n.getScenarioMeta(e.type).icon," "),s(3),_(e.name),s(2),_(e.description),s(11),A(e.roles),s(10),A(e.stages),s(8),A(e.tips)}}var Je=class l{constructor(){this.scenarioApplied=me();this.PRESET_SCENARIOS=Tt;this.selectedScenario=D(null)}selectScenario(t){this.selectedScenario.set(t)}applyScenario(t){this.scenarioApplied.emit(t),this.selectedScenario.set(null)}getScenarioMeta(t){return Mt[t]}getDifficultyColor(t){return{easy:"text-green-400",medium:"text-yellow-400",hard:"text-red-400"}[t]||"text-slate-400"}getDifficultyLabel(t){return{easy:"\u7C21\u55AE",medium:"\u4E2D\u7B49",hard:"\u56F0\u96E3"}[t]||t}getRoleEmoji(t){return{friendly_member:"\u{1F604}",loyal_customer:"\u2764\uFE0F",sales_manager:"\u{1F454}",account_manager:"\u{1F4BC}",price_specialist:"\u{1F4B0}",regional_director:"\u{1F451}",cs_agent:"\u{1F3A7}",tech_support:"\u{1F527}",complaint_handler:"\u{1F60A}",vip_service:"\u2B50",solution_expert:"\u{1F4CA}",founder_ceo:"\u{1F454}",community_manager:"\u{1F3E0}",opinion_leader:"\u{1F3A4}",brand_ambassador:"\u{1F3C6}",tech_blogger:"\u{1F4F1}",event_operator:"\u{1F389}",education_consultant:"\u{1F4DA}",trainer:"\u{1F468}\u200D\u{1F3EB}",business_manager:"\u{1F91D}",solution_architect:"\u{1F3D7}\uFE0F",project_manager:"\u{1F4CB}",competitor_analyst:"\u{1F50D}",product_engineer:"\u2699\uFE0F",callback_agent:"\u{1F4DE}",customer_success:"\u{1F3AF}"}[t]||"\u{1F3AD}"}getRoleLabel(t){return{friendly_member:"\u71B1\u5FC3\u7FA4\u53CB",loyal_customer:"\u8001\u7528\u6236",sales_manager:"\u92B7\u552E\u7D93\u7406",account_manager:"\u5BA2\u6236\u7D93\u7406",price_specialist:"\u50F9\u683C\u5C08\u54E1",regional_director:"\u5340\u57DF\u7E3D\u76E3",cs_agent:"\u5BA2\u670D\u5C08\u54E1",tech_support:"\u6280\u8853\u652F\u6301",complaint_handler:"\u6295\u8A34\u8655\u7406\u5C08\u54E1",vip_service:"VIP\u5BA2\u670D",solution_expert:"\u65B9\u6848\u5C08\u5BB6",founder_ceo:"\u5275\u59CB\u4EBA",community_manager:"\u793E\u7FA4\u7BA1\u5BB6",opinion_leader:"\u610F\u898B\u9818\u8896",brand_ambassador:"\u54C1\u724C\u5927\u4F7F",tech_blogger:"\u79D1\u6280\u535A\u4E3B",event_operator:"\u6D3B\u52D5\u904B\u71DF",education_consultant:"\u6559\u80B2\u8AEE\u8A62\u5E2B",trainer:"\u57F9\u8A13\u8B1B\u5E2B",business_manager:"\u62DB\u5546\u7D93\u7406",solution_architect:"\u89E3\u6C7A\u65B9\u6848\u67B6\u69CB\u5E2B",project_manager:"\u9805\u76EE\u7D93\u7406",competitor_analyst:"\u7AF6\u54C1\u5206\u6790\u5E2B",product_engineer:"\u7522\u54C1\u5DE5\u7A0B\u5E2B",callback_agent:"\u56DE\u8A2A\u5C08\u54E1",customer_success:"\u5BA2\u6236\u6210\u529F\u7D93\u7406"}[t]||t}formatDelay(t){return t<60?`${t}\u79D2\u5F8C`:t<3600?`${Math.floor(t/60)}\u5206\u9418\u5F8C`:t<86400?`${Math.floor(t/3600)}\u5C0F\u6642\u5F8C`:`${Math.floor(t/86400)}\u5929\u5F8C`}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=Q({type:l,selectors:[["app-scenario-selector"]],outputs:{scenarioApplied:"scenarioApplied"},decls:5,vars:1,consts:[[1,"scenario-selector"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-5","gap-4","p-4"],[1,"bg-slate-800/50","border","border-slate-700/50","rounded-xl","p-4","cursor-pointer","hover:border-cyan-500/50","hover:bg-slate-800","transition-all","group",3,"ring-2","ring-cyan-500"],[1,"fixed","inset-0","bg-black/70","backdrop-blur-sm","flex","items-center","justify-center","z-50","p-4"],[1,"bg-slate-800/50","border","border-slate-700/50","rounded-xl","p-4","cursor-pointer","hover:border-cyan-500/50","hover:bg-slate-800","transition-all","group",3,"click"],[1,"flex","items-center","gap-3","mb-3"],[1,"w-12","h-12","rounded-full","bg-gradient-to-br","from-cyan-500/20","to-blue-500/20","flex","items-center","justify-center","text-2xl"],[1,"font-semibold","text-white","group-hover:text-cyan-400","transition-colors"],[1,"flex","items-center","gap-2","text-xs"],[1,"text-slate-500"],[1,"text-slate-400"],[1,"text-sm","text-slate-400","mb-3","line-clamp-2"],[1,"flex","items-center","gap-1","mb-3"],[1,"w-7","h-7","rounded-full","bg-slate-700/50","flex","items-center","justify-center","text-sm",3,"title"],[1,"w-7","h-7","rounded-full","bg-slate-700/50","flex","items-center","justify-center","text-xs","text-slate-400"],[1,"flex","items-center","justify-between","text-xs"],[1,"text-cyan-400","font-medium"],[1,"fixed","inset-0","bg-black/70","backdrop-blur-sm","flex","items-center","justify-center","z-50","p-4",3,"click"],[1,"bg-slate-900","border","border-slate-700/50","rounded-2xl","shadow-2xl","w-full","max-w-3xl","max-h-[90vh]","overflow-hidden",3,"click"],[1,"p-6","border-b","border-slate-700/50","bg-gradient-to-r","from-cyan-500/10","to-blue-500/10"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"w-16","h-16","rounded-full","bg-gradient-to-br","from-cyan-500","to-blue-500","flex","items-center","justify-center","text-3xl"],[1,"text-xl","font-bold","text-white"],[1,"text-slate-400","hover:text-white","p-2","hover:bg-slate-800","rounded-lg",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6","overflow-y-auto","max-h-[60vh]","space-y-6"],[1,"text-sm","font-medium","text-slate-400","mb-3","flex","items-center","gap-2"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-3"],[1,"bg-slate-800/50","rounded-lg","p-3"],[1,"relative"],[1,"absolute","left-6","top-8","bottom-8","w-0.5","bg-slate-700"],[1,"space-y-4"],[1,"relative","flex","gap-4"],[1,"space-y-2"],[1,"flex","items-start","gap-2","text-sm","text-slate-300"],[1,"p-6","border-t","border-slate-700/50","bg-slate-900/50","flex","justify-end","gap-3"],[1,"px-6","py-2.5","bg-slate-700","hover:bg-slate-600","text-white","rounded-lg","transition-colors",3,"click"],[1,"px-6","py-2.5","bg-gradient-to-r","from-cyan-500","to-blue-500","hover:from-cyan-600","hover:to-blue-600","text-white","font-medium","rounded-lg","transition-all","flex","items-center","gap-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"flex","items-center","gap-2","mb-2"],[1,"text-xl"],[1,"text-white","font-medium"],[1,"text-xs","bg-cyan-500/20","text-cyan-400","px-1.5","py-0.5","rounded"],[1,"text-xs","text-slate-400"],[1,"relative","z-10","w-12","h-12","rounded-full","bg-gradient-to-br","from-cyan-500","to-blue-500","flex","items-center","justify-center","text-white","font-bold","flex-shrink-0"],[1,"flex-1","bg-slate-800/50","rounded-lg","p-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-medium","text-white"],[1,"text-cyan-400"],[1,"text-sm","text-slate-300","italic"],[1,"text-xs","text-green-400","mt-2"],[1,"text-amber-400","flex-shrink-0"]],template:function(e,n){if(e&1&&(v(0,"div",0)(1,"div",1),F(2,Ri,25,13,"div",2,Rt),C(),h(4,$i,49,3,"div",3),C()),e&2){let r;s(2),A(n.PRESET_SCENARIOS),s(2),b((r=n.selectedScenario())?4:-1,r)}},dependencies:[K],encapsulation:2})}};var Li=()=>[2,3,4,5],ut=(l,t)=>t.id;function ji(l,t){if(l&1){let e=y();i(0,"button",37),g("click",function(){let r=c(e).$implicit,u=d(2);return m(u.setRoleCount(r))}),a(1),o()}if(l&2){let e=t.$implicit,n=d(2);E("bg-cyan-500",n.workflowConfig().roleCount===e)("text-white",n.workflowConfig().roleCount===e)("bg-slate-700",n.workflowConfig().roleCount!==e)("text-slate-300",n.workflowConfig().roleCount!==e),s(),x(" ",e," ")}}function Ui(l,t){if(l&1){let e=y();i(0,"button",38),g("click",function(){let r=c(e).$implicit,u=d(2);return m(u.setMarketingGoal(r.id))}),i(1,"div",39),a(2),o(),i(3,"div",40),a(4),o(),i(5,"div",24),a(6),o()()}if(l&2){let e=t.$implicit,n=d(2);H("border-color",n.workflowConfig().marketingGoal!==e.id?"var(--border-color)":"")("background-color",n.workflowConfig().marketingGoal!==e.id?"var(--bg-secondary)":""),E("border-cyan-500",n.workflowConfig().marketingGoal===e.id)("bg-cyan-500/10",n.workflowConfig().marketingGoal===e.id),s(2),_(e.icon),s(2),_(e.name),s(2),_(e.description)}}function Wi(l,t){if(l&1){let e=y();i(0,"div",45)(1,"textarea",46),g("ngModelChange",function(r){c(e);let u=d().$implicit,p=d(2);return m(p.updateSignalKeywords(u.id,r))}),o(),i(2,"p",18),a(3," \u7576\u7528\u6236\u6D88\u606F\u5305\u542B\u9019\u4E9B\u8A5E\u6642\uFF0C\u8B58\u5225\u70BA\u8208\u8DA3\u4FE1\u865F "),o()()}if(l&2){let e=d().$implicit;s(),L("ngModel",e.keywords.join(", "))}}function qi(l,t){if(l&1){let e=y();i(0,"div",32)(1,"div",41)(2,"label",20)(3,"input",42),g("change",function(){let r=c(e).$implicit,u=d(2);return m(u.toggleSignal(r.id))}),o(),i(4,"span",43),a(5),o(),i(6,"span",40),a(7),o()(),i(8,"button",44),g("click",function(){let r=c(e).$implicit,u=d(2);return m(u.toggleSignalExpand(r.id))}),a(9),o()(),h(10,Wi,4,1,"div",45),o()}if(l&2){let e=t.$implicit,n=d(2);s(3),L("checked",e.enabled),s(2),_(e.icon),s(2),_(e.name),s(2),x(" ",n.expandedSignals().has(e.id)?"\u6536\u8D77":"\u7DE8\u8F2F"," "),s(),b(n.expandedSignals().has(e.id)?10:-1)}}function Oi(l,t){l&1&&(i(0,"div",49),a(1,"\u2192"),o())}function Hi(l,t){if(l&1&&(i(0,"div",36)(1,"div",47)(2,"div",39),a(3),o(),i(4,"div",48),a(5),o()(),h(6,Oi,2,0,"div",49),o()),l&2){let e,n=t.$implicit,r=t.$index,u=d(2);s(),H("background-color",r!==0?"var(--bg-secondary)":""),E("bg-gradient-to-r",r===0)("from-cyan-500",r===0)("to-blue-500",r===0)("text-white",r===0),s(2),_(u.getStepIcon(n.type)),s(),H("color",r!==0?"var(--text-primary)":""),s(),_(n.name),s(),b(r<(((e=u.currentWorkflow())==null||e.steps==null?null:e.steps.length)||0)-1?6:-1)}}function zi(l,t){if(l&1){let e=y();i(0,"div",8)(1,"div",9)(2,"div",10)(3,"h3",11)(4,"span"),a(5,"\u{1F3AF}"),o(),i(6,"span"),a(7,"\u89F8\u767C\u689D\u4EF6"),o()(),i(8,"div",12)(9,"label",13),a(10),o(),i(11,"input",14),g("ngModelChange",function(r){c(e);let u=d();return m(u.updateTriggerConfig("minIntentScore",r))}),o(),i(12,"div",15)(13,"span"),a(14,"\u4F4E\u9580\u6ABB (30)"),o(),i(15,"span"),a(16,"\u9AD8\u9580\u6ABB (90)"),o()()(),i(17,"div",12)(18,"label",13),a(19," \u540C\u7528\u6236\u51B7\u537B\u6642\u9593 "),o(),i(20,"div",16)(21,"input",17),g("ngModelChange",function(r){c(e);let u=d();return m(u.updateTriggerConfig("cooldownMinutes",r))}),o(),i(22,"span",5),a(23,"\u5206\u9418"),o()(),i(24,"p",18),a(25," \u63A8\u85A6: 1440 \u5206\u9418 (24\u5C0F\u6642) "),o()(),i(26,"div",19)(27,"label",20)(28,"input",21),g("ngModelChange",function(r){c(e);let u=d();return m(u.updateTriggerConfig("excludeContacted",r))}),o(),i(29,"span",22),a(30,"\u6392\u9664\u5DF2\u806F\u7E6B\u7528\u6236"),o()(),i(31,"label",20)(32,"input",21),g("ngModelChange",function(r){c(e);let u=d();return m(u.updateTriggerConfig("excludeBlacklist",r))}),o(),i(33,"span",22),a(34,"\u6392\u9664\u9ED1\u540D\u55AE\u7528\u6236"),o()()()(),i(35,"div",10)(36,"h3",11)(37,"span"),a(38,"\u23F1\uFE0F"),o(),i(39,"span"),a(40,"\u57F7\u884C\u6642\u6A5F"),o()(),i(41,"div",12)(42,"label",13),a(43," \u9996\u6B21\u63A5\u89F8\u5EF6\u9072 (\u5206\u9418) "),o(),i(44,"div",23)(45,"div")(46,"span",24),a(47,"\u6700\u77ED"),o(),i(48,"input",25),g("ngModelChange",function(r){c(e);let u=d();return m(u.updateDelayConfig("min",r))}),o()(),i(49,"div")(50,"span",24),a(51,"\u6700\u9577"),o(),i(52,"input",26),g("ngModelChange",function(r){c(e);let u=d();return m(u.updateDelayConfig("max",r))}),o()()(),i(53,"p",18),a(54," \u7CFB\u7D71\u6703\u5728\u6B64\u7BC4\u570D\u5167\u96A8\u6A5F\u5EF6\u9072\uFF0C\u66F4\u81EA\u7136 "),o()()(),i(55,"div",10)(56,"h3",11)(57,"span"),a(58,"\u{1F3AD}"),o(),i(59,"span"),a(60,"\u89D2\u8272\u914D\u7F6E"),o()(),i(61,"div",12)(62,"label",13),a(63," \u53C3\u8207\u89D2\u8272\u6578\u91CF "),o(),i(64,"div",27)(65,"button",28),g("click",function(){c(e);let r=d();return m(r.setRoleCount("auto"))}),a(66," \u{1F916} AI \u81EA\u52D5 "),o(),F(67,ji,2,9,"button",29,Y),o()(),i(69,"div")(70,"label",13),a(71," \u5E33\u865F\u9078\u64C7\u65B9\u5F0F "),o(),i(72,"div",27)(73,"button",28),g("click",function(){c(e);let r=d();return m(r.setAccountSelection("auto"))}),a(74," \u{1F916} AI \u81EA\u52D5\u9078\u64C7 "),o(),i(75,"button",28),g("click",function(){c(e);let r=d();return m(r.setAccountSelection("manual"))}),a(76," \u{1F464} \u624B\u52D5\u6307\u5B9A "),o()()()()(),i(77,"div",9)(78,"div",10)(79,"h3",11)(80,"span"),a(81,"\u{1F680}"),o(),i(82,"span"),a(83,"\u71DF\u92B7\u76EE\u6A19"),o()(),i(84,"div",23),F(85,Ui,7,11,"button",30,ut),o()(),i(87,"div",10)(88,"h3",11)(89,"span"),a(90,"\u{1F50D}"),o(),i(91,"span"),a(92,"\u8208\u8DA3\u4FE1\u865F\u8B58\u5225"),o()(),i(93,"div",31),F(94,qi,11,5,"div",32,ut),o()(),i(96,"div",10)(97,"h3",11)(98,"span"),a(99,"\u{1F465}"),o(),i(100,"span"),a(101,"\u81EA\u52D5\u5EFA\u7FA4\u8A2D\u7F6E"),o()(),i(102,"div",12)(103,"label",13),a(104," \u7FA4\u7D44\u540D\u7A31\u6A21\u677F "),o(),i(105,"input",33),g("ngModelChange",function(r){c(e);let u=d();return m(u.updateWorkflowConfig("groupNameTemplate",r))}),o(),i(106,"p",18),a(107),o()(),i(108,"div",32)(109,"p",24),a(110," \u{1F4A1} \u7576\u6AA2\u6E2C\u5230\u7528\u6236\u6709\u8CFC\u8CB7\u610F\u5411\u6642\uFF0C\u7CFB\u7D71\u6703\u81EA\u52D5\u5275\u5EFA VIP \u7FA4\u4E26\u9080\u8ACB\u7528\u6236\u52A0\u5165 "),o()()()()(),i(111,"div",34)(112,"h3",11)(113,"span"),a(114,"\u{1F4CA}"),o(),i(115,"span"),a(116,"\u5DE5\u4F5C\u6D41\u9810\u89BD"),o()(),i(117,"div",35),F(118,Hi,7,15,"div",36,ut),o()()}if(l&2){let e,n=d();s(10),x(" \u6700\u4F4E\u610F\u5411\u5206 (",n.triggerConfig().minIntentScore,") "),s(),L("ngModel",n.triggerConfig().minIntentScore),s(10),L("ngModel",n.triggerConfig().cooldownMinutes),s(7),L("ngModel",n.triggerConfig().excludeContacted),s(4),L("ngModel",n.triggerConfig().excludeBlacklist),s(16),L("ngModel",n.workflowConfig().firstContactDelay.min),s(4),L("ngModel",n.workflowConfig().firstContactDelay.max),s(13),E("bg-cyan-500",n.workflowConfig().roleCount==="auto")("text-white",n.workflowConfig().roleCount==="auto")("bg-slate-700",n.workflowConfig().roleCount!=="auto")("text-slate-300",n.workflowConfig().roleCount!=="auto"),s(2),A(ve(37,Li)),s(6),E("bg-cyan-500",n.workflowConfig().accountSelection==="auto")("text-white",n.workflowConfig().accountSelection==="auto")("bg-slate-700",n.workflowConfig().accountSelection!=="auto")("text-slate-300",n.workflowConfig().accountSelection!=="auto"),s(2),E("bg-cyan-500",n.workflowConfig().accountSelection==="manual")("text-white",n.workflowConfig().accountSelection==="manual")("bg-slate-700",n.workflowConfig().accountSelection!=="manual")("text-slate-300",n.workflowConfig().accountSelection!=="manual"),s(10),A(n.marketingGoals),s(9),A(n.interestSignals()),s(11),L("ngModel",n.workflowConfig().groupNameTemplate||n.groupNameDefault)("placeholder",n.groupNameDefault),s(2),gt(" \u53EF\u7528\u8B8A\u91CF: ","{","user","}"," = \u7528\u6236\u540D, ","{","date","}"," = \u65E5\u671F "),s(11),A((e=n.currentWorkflow())==null?null:e.steps)}}function Qi(l,t){l&1&&(i(0,"div",7)(1,"span",50),a(2,"\u2699\uFE0F"),o(),i(3,"p"),a(4,"\u7121\u53EF\u7528\u5DE5\u4F5C\u6D41"),o()())}var Xe=class l{constructor(){this.workflowService=I(Me);this.toast=I(xe);this.ipc=I(ie);this.currentWorkflow=P(()=>this.workflowService.workflows()[0]);this.triggerConfig=P(()=>this.currentWorkflow()?.trigger||{minIntentScore:60,cooldownMinutes:1440,excludeContacted:!0,excludeBlacklist:!0});this.workflowConfig=P(()=>this.currentWorkflow()?.config||{marketingGoal:"\u4FC3\u9032\u6210\u4EA4",roleCount:"auto",accountSelection:"auto",firstContactDelay:{min:5,max:15},interestSignals:[],groupNameTemplate:"VIP \u670D\u52D9\u7FA4 - {user}"});this.marketingGoals=[{id:"\u4FC3\u9032\u6210\u4EA4",name:"\u4FC3\u9032\u6210\u4EA4",icon:"\u{1F4B0}",description:"\u5F15\u5C0E\u7528\u6236\u8CFC\u8CB7\u7522\u54C1"},{id:"\u54C1\u724C\u63A8\u5EE3",name:"\u54C1\u724C\u63A8\u5EE3",icon:"\u{1F4E2}",description:"\u63D0\u5347\u54C1\u724C\u77E5\u540D\u5EA6"},{id:"\u7528\u6236\u57F9\u80B2",name:"\u7528\u6236\u57F9\u80B2",icon:"\u{1F331}",description:"\u5EFA\u7ACB\u4FE1\u4EFB\u95DC\u4FC2"},{id:"\u6536\u96C6\u53CD\u994B",name:"\u6536\u96C6\u53CD\u994B",icon:"\u{1F4CB}",description:"\u4E86\u89E3\u7528\u6236\u9700\u6C42"}];this.interestSignals=D([{id:"price_inquiry",name:"\u50F9\u683C\u8A62\u554F",icon:"\u{1F4B0}",keywords:["\u591A\u5C11\u9322","\u4EC0\u9EBC\u50F9\u683C","\u50F9\u683C","\u8CBB\u7528","\u6536\u8CBB"],enabled:!0},{id:"product_detail",name:"\u7522\u54C1\u7D30\u7BC0",icon:"\u{1F4E6}",keywords:["\u600E\u9EBC\u7528","\u6709\u4EC0\u9EBC\u529F\u80FD","\u8A73\u7D30\u4ECB\u7D39","\u4E86\u89E3\u4E00\u4E0B"],enabled:!0},{id:"purchase_intent",name:"\u8CFC\u8CB7\u610F\u5411",icon:"\u{1F6D2}",keywords:["\u600E\u9EBC\u8CB7","\u5728\u54EA\u8CB7","\u6211\u8981","\u6211\u60F3\u8CB7","\u4E0B\u55AE"],enabled:!0},{id:"positive_feedback",name:"\u6B63\u9762\u53CD\u994B",icon:"\u{1F44D}",keywords:["\u4E0D\u932F","\u633A\u597D","\u53EF\u4EE5","\u884C","\u611F\u8208\u8DA3"],enabled:!0},{id:"comparison",name:"\u6BD4\u8F03\u8AEE\u8A62",icon:"\u2696\uFE0F",keywords:["\u6BD4","\u5C0D\u6BD4","\u5340\u5225","\u5DEE\u5225","\u54EA\u500B\u597D"],enabled:!1}]);this.expandedSignals=D(new Set);this.groupNameDefault="VIP \u670D\u52D9\u7FA4 - {user}";this.localTriggerConfig=D({});this.localWorkflowConfig=D({})}ngOnInit(){let t=this.currentWorkflow();t&&(this.localTriggerConfig.set(T({},t.trigger)),this.localWorkflowConfig.set(T({},t.config)),this.loadInterestSignals(t.config.interestSignals||[]))}ngOnDestroy(){}loadInterestSignals(t){this.interestSignals.update(e=>e.map(n=>B(T({},n),{enabled:t.length===0||t.includes(n.id)})))}updateTriggerConfig(t,e){this.localTriggerConfig.update(n=>B(T({},n),{[t]:e}))}updateDelayConfig(t,e){this.localWorkflowConfig.update(n=>B(T({},n),{firstContactDelay:B(T({},n.firstContactDelay),{[t]:e})}))}updateWorkflowConfig(t,e){this.localWorkflowConfig.update(n=>B(T({},n),{[t]:e}))}setRoleCount(t){this.updateWorkflowConfig("roleCount",t)}setAccountSelection(t){this.updateWorkflowConfig("accountSelection",t)}setMarketingGoal(t){this.updateWorkflowConfig("marketingGoal",t)}toggleSignal(t){this.interestSignals.update(e=>e.map(n=>n.id===t?B(T({},n),{enabled:!n.enabled}):n))}toggleSignalExpand(t){this.expandedSignals.update(e=>{let n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n})}updateSignalKeywords(t,e){let n=e.split(",").map(r=>r.trim()).filter(r=>r);this.interestSignals.update(r=>r.map(u=>u.id===t?B(T({},u),{keywords:n}):u))}saveConfig(){let t=this.currentWorkflow();if(!t)return;let e=this.interestSignals().filter(r=>r.enabled).map(r=>r.id),n={workflowId:t.id,trigger:this.localTriggerConfig(),config:B(T({},this.localWorkflowConfig()),{interestSignals:e}),interestSignalKeywords:this.interestSignals().reduce((r,u)=>(r[u.id]=u.keywords,r),{})};console.log("[WorkflowConfig] \u4FDD\u5B58\u914D\u7F6E:",n);try{localStorage.setItem("workflowConfig",JSON.stringify(n)),this.toast.success("\u2705 \u5DE5\u4F5C\u6D41\u914D\u7F6E\u5DF2\u4FDD\u5B58")}catch{this.toast.error("\u4FDD\u5B58\u5931\u6557")}}getStepIcon(t){return{evaluate:"\u{1F4CA}",plan:"\u{1F3AF}",private_chat:"\u{1F4AC}",detect_interest:"\u{1F50D}",create_group:"\u{1F465}",group_marketing:"\u{1F680}",record:"\u{1F4DD}"}[t]||"\u25B6\uFE0F"}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=Q({type:l,selectors:[["app-workflow-config"]],decls:17,vars:1,consts:[[1,"workflow-config"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","gap-3"],[1,"text-3xl"],[1,"text-xl","font-bold",2,"color","var(--text-primary)"],[1,"text-sm",2,"color","var(--text-muted)"],[1,"px-4","py-2","bg-gradient-to-r","from-cyan-500","to-blue-500","hover:from-cyan-600","hover:to-blue-600","text-white","rounded-lg","font-medium","transition-all","flex","items-center","gap-2",3,"click"],[1,"text-center","py-12",2,"color","var(--text-muted)"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"space-y-6"],[1,"rounded-xl","p-5",2,"background-color","var(--bg-card)","border","1px solid var(--border-color)"],[1,"text-lg","font-bold","mb-4","flex","items-center","gap-2",2,"color","var(--text-primary)"],[1,"mb-4"],[1,"block","text-sm","font-medium","mb-2",2,"color","var(--text-secondary)"],["type","range","min","30","max","90","step","5",1,"w-full","h-2","rounded-lg","appearance-none","cursor-pointer",2,"background","linear-gradient(to right, var(--success), var(--warning), var(--error))",3,"ngModelChange","ngModel"],[1,"flex","justify-between","text-xs","mt-1",2,"color","var(--text-muted)"],[1,"flex","items-center","gap-2"],["type","number","min","60","max","10080",1,"flex-1","px-3","py-2","rounded-lg","border","text-sm",2,"background-color","var(--bg-secondary)","border-color","var(--border-color)","color","var(--text-primary)",3,"ngModelChange","ngModel"],[1,"text-xs","mt-1",2,"color","var(--text-muted)"],[1,"space-y-2"],[1,"flex","items-center","gap-2","cursor-pointer"],["type","checkbox",1,"w-4","h-4","rounded","accent-cyan-500",3,"ngModelChange","ngModel"],[1,"text-sm",2,"color","var(--text-secondary)"],[1,"grid","grid-cols-2","gap-3"],[1,"text-xs",2,"color","var(--text-muted)"],["type","number","min","1","max","60",1,"w-full","px-3","py-2","rounded-lg","border","text-sm",2,"background-color","var(--bg-secondary)","border-color","var(--border-color)","color","var(--text-primary)",3,"ngModelChange","ngModel"],["type","number","min","1","max","120",1,"w-full","px-3","py-2","rounded-lg","border","text-sm",2,"background-color","var(--bg-secondary)","border-color","var(--border-color)","color","var(--text-primary)",3,"ngModelChange","ngModel"],[1,"flex","gap-2"],[1,"flex-1","px-3","py-2","rounded-lg","text-sm","font-medium","transition-colors",3,"click"],[1,"px-3","py-2","rounded-lg","text-sm","font-medium","transition-colors",3,"bg-cyan-500","text-white","bg-slate-700","text-slate-300"],[1,"p-3","rounded-lg","text-left","transition-all","border",3,"border-cyan-500","bg-cyan-500/10","border-color","background-color"],[1,"space-y-3"],[1,"p-3","rounded-lg",2,"background-color","var(--bg-secondary)"],["type","text",1,"w-full","px-3","py-2","rounded-lg","border","text-sm",2,"background-color","var(--bg-secondary)","border-color","var(--border-color)","color","var(--text-primary)",3,"ngModelChange","ngModel","placeholder"],[1,"mt-6","rounded-xl","p-5",2,"background-color","var(--bg-card)","border","1px solid var(--border-color)"],[1,"flex","items-center","justify-center","gap-2","overflow-x-auto","py-4"],[1,"flex","items-center"],[1,"px-3","py-2","rounded-lg","text-sm","font-medium","transition-colors",3,"click"],[1,"p-3","rounded-lg","text-left","transition-all","border",3,"click"],[1,"text-xl","mb-1"],[1,"font-medium","text-sm",2,"color","var(--text-primary)"],[1,"flex","items-center","justify-between","mb-2"],["type","checkbox",1,"w-4","h-4","rounded","accent-cyan-500",3,"change","checked"],[1,"text-lg"],[1,"text-xs","px-2","py-1","rounded",2,"color","var(--text-muted)",3,"click"],[1,"mt-2"],["rows","2","placeholder","\u7528\u9017\u865F\u5206\u9694\u95DC\u9375\u8A5E",1,"w-full","px-3","py-2","rounded-lg","border","text-sm",2,"background-color","var(--bg-tertiary)","border-color","var(--border-color)","color","var(--text-primary)",3,"ngModelChange","ngModel"],[1,"px-4","py-3","rounded-lg","text-center","min-w-[100px]","transition-all"],[1,"text-sm","font-medium"],[1,"mx-2","text-xl",2,"color","var(--text-muted)"],[1,"text-4xl","block","mb-4"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),a(4,"\u2699\uFE0F"),o(),i(5,"div")(6,"h2",4),a(7,"\u5DE5\u4F5C\u6D41\u914D\u7F6E"),o(),i(8,"p",5),a(9,"\u81EA\u5B9A\u7FA9\u81EA\u52D5\u5316\u71DF\u92B7\u6D41\u7A0B"),o()()(),i(10,"button",6),g("click",function(){return n.saveConfig()}),i(11,"span"),a(12,"\u{1F4BE}"),o(),i(13,"span"),a(14,"\u4FDD\u5B58\u914D\u7F6E"),o()()(),h(15,zi,120,38)(16,Qi,5,0,"div",7),o()),e&2&&(s(15),b(n.currentWorkflow()?15:16))},dependencies:[K,ne,le,Fe,Le,$e,se,ke,je,ue],styles:[".workflow-config[_ngcontent-%COMP%]{padding:1.5rem}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;border-radius:50%;background:#fff;cursor:pointer;border:2px solid var(--primary);box-shadow:0 2px 6px #0000004d}"]})}};var Ne=(l,t)=>t.id;function Ki(l,t){if(l&1&&(v(0,"div",15),oe(1,"div",20),v(2,"div",21)(3,"div",22),a(4),C(),v(5,"div",9),a(6),C()()()),l&2){let e=t.$implicit;s(),H("height",e.percentage,"%")("background",e.gradient),s(3),_(e.count),s(2),_(e.name)}}function Yi(l,t){if(l&1){let e=y();v(0,"button",38),ae("click",function(){c(e);let r=d().$implicit,u=d();return m(u.cancelExecution(r.id))}),a(1," \u2715 "),C()}}function Ji(l,t){l&1&&a(0," \u2713 ")}function Xi(l,t){if(l&1&&a(0),l&2){let e=d().$index;x(" ",e+1," ")}}function Zi(l,t){if(l&1&&oe(0,"div",41),l&2){let e=d().$implicit,n=d().$implicit,r=d();E("bg-emerald-500",r.isStepCompleted(n,e.id))("bg-slate-600",!r.isStepCompleted(n,e.id))}}function eo(l,t){if(l&1&&(v(0,"div",31)(1,"div",39),h(2,Ji,1,0)(3,Xi,1,1),C(),h(4,Zi,1,4,"div",40),C()),l&2){let e=t.$implicit,n=t.$index,r=d().$implicit,u=d();s(),E("bg-emerald-500",u.isStepCompleted(r,e.id))("bg-cyan-500",r.currentStep===e.id&&r.status==="running")("animate-pulse",r.currentStep===e.id&&r.status==="running")("bg-slate-600",!u.isStepCompleted(r,e.id)&&r.currentStep!==e.id),s(),b(u.isStepCompleted(r,e.id)?2:3),s(2),b(n<u.getWorkflowSteps().length-1?4:-1)}}function to(l,t){if(l&1&&(v(0,"span",35),a(1),C()),l&2){let e=d().$implicit,n=d();s(),x(" ",n.getStepResultSummary(e)," ")}}function no(l,t){if(l&1&&(v(0,"div",45)(1,"span",46),a(2),C(),v(3,"span"),a(4),C()()),l&2){let e=d().$implicit,n=d(2).$implicit,r=d();s(2),_(e.name),s(),E("text-emerald-400",n.stepResults[e.id].status==="success")("text-red-400",n.stepResults[e.id].status==="failed")("text-slate-400",n.stepResults[e.id].status==="skipped"),s(),x(" ",r.getStepStatusText(n.stepResults[e.id].status)," ")}}function io(l,t){if(l&1&&h(0,no,5,8,"div",45),l&2){let e=t.$implicit,n=d(2).$implicit;b(n.stepResults[e.id]?0:-1)}}function oo(l,t){if(l&1&&(v(0,"div",44)(1,"span",33),a(2,"AI \u7B56\u7565\uFF1A"),C(),v(3,"span",46),a(4),C()()),l&2){let e=d(2).$implicit;s(4),_(e.aiPlanResult.strategy||"\u6A19\u6E96\u71DF\u92B7")}}function ro(l,t){if(l&1&&(v(0,"div",36)(1,"h4",42),a(2,"\u57F7\u884C\u8A73\u60C5"),C(),v(3,"div",43),F(4,io,1,1,null,null,Ne),C(),h(6,oo,5,1,"div",44),C()),l&2){let e=d().$implicit,n=d();s(4),A(n.getWorkflowSteps()),s(2),b(e.aiPlanResult?6:-1)}}function ao(l,t){if(l&1){let e=y();v(0,"div",23)(1,"div",24)(2,"div",25)(3,"span",26),a(4),C(),v(5,"div")(6,"div",27),a(7),C(),v(8,"div",9),a(9),C()()(),v(10,"div",25)(11,"div",28),a(12),C(),h(13,Yi,2,0,"button",29),C()(),v(14,"div",30),F(15,eo,5,10,"div",31,Ne),C(),v(17,"div",32)(18,"span",33),a(19,"\u7576\u524D\uFF1A"),C(),v(20,"span",34),a(21),C(),h(22,to,2,1,"span",35),C(),h(23,ro,7,1,"div",36),v(24,"button",37),ae("click",function(){let r=c(e).$implicit,u=d();return m(u.toggleExpand(r.id))}),a(25),C()()}if(l&2){let e=t.$implicit,n=d();E("border-cyan-500",e.status==="running")("border-l-4",e.status==="running"),s(4),_(n.getStatusIcon(e.status)),s(3),x(" @",e.targetUserName," "),s(2),x(" ",n.formatTime(e.startedAt)," "),s(2),H("background-color",n.getConversionColor(e)),s(),x(" ",n.getConversionProbability(e),"% \u8F49\u5316 "),s(),b(e.status==="running"||e.status==="pending"?13:-1),s(2),A(n.getWorkflowSteps()),s(6),_(n.getCurrentStepName(e)),s(),b(e.stepResults[e.currentStep]!=null&&e.stepResults[e.currentStep].data?22:-1),s(),b(n.expandedExecution()===e.id?23:-1),s(2),x(" ",n.expandedExecution()===e.id?"\u6536\u8D77 \u25B2":"\u8A73\u60C5 \u25BC"," ")}}function lo(l,t){l&1&&(v(0,"div",18)(1,"span",47),a(2,"\u{1F3AF}"),C(),v(3,"p"),a(4,"\u66AB\u7121\u9032\u884C\u4E2D\u7684\u5DE5\u4F5C\u6D41"),C(),v(5,"p",48),a(6,"\u7576\u76E3\u63A7\u7FA4\u7D44\u89F8\u767C\u95DC\u9375\u8A5E\u6642\uFF0C\u5DE5\u4F5C\u6D41\u5C07\u81EA\u52D5\u958B\u59CB"),C()())}function so(l,t){if(l&1&&(v(0,"tr",53)(1,"td",54),a(2),C(),v(3,"td",55)(4,"span",56),a(5),C()(),v(6,"td",57),a(7),C(),v(8,"td",57),a(9),C()()),l&2){let e=t.$implicit,n=d(2);s(2),x("@",e.targetUserName),s(2),E("bg-emerald-500/20",e.outcome==="converted")("text-emerald-400",e.outcome==="converted")("bg-amber-500/20",e.outcome==="interested")("text-amber-400",e.outcome==="interested")("bg-slate-500/20",!e.outcome||e.outcome==="neutral")("text-slate-400",!e.outcome||e.outcome==="neutral"),s(),x(" ",n.getOutcomeText(e.outcome)," "),s(2),_(n.getDuration(e)),s(2),_(n.formatTime(e.completedAt))}}function uo(l,t){if(l&1&&(v(0,"div",19)(1,"h3",13)(2,"span"),a(3,"\u2705"),C(),v(4,"span"),a(5,"\u8FD1\u671F\u5B8C\u6210"),C()(),v(6,"div",49)(7,"table",50)(8,"thead")(9,"tr",51)(10,"th",52),a(11,"\u7528\u6236"),C(),v(12,"th",52),a(13,"\u7D50\u679C"),C(),v(14,"th",52),a(15,"\u8017\u6642"),C(),v(16,"th",52),a(17,"\u5B8C\u6210\u6642\u9593"),C()()(),v(18,"tbody"),F(19,so,10,16,"tr",53,Ne),C()()()()),l&2){let e=d();s(19),A(e.completedExecutions().slice(0,5))}}var Ze=class l{constructor(){this.workflowService=I(Me);this.toast=I(xe);this.expandedExecution=D(null);this.executions=this.workflowService.executions;this.activeExecutions=P(()=>this.executions().filter(t=>t.status==="running"||t.status==="pending"));this.completedExecutions=P(()=>this.executions().filter(t=>t.status==="completed"||t.status==="failed"));this.runningCount=P(()=>this.executions().filter(t=>t.status==="running").length);this.pendingCount=P(()=>this.executions().filter(t=>t.status==="pending").length);this.completedTodayCount=P(()=>{let t=new Date().toDateString();return this.executions().filter(e=>e.status==="completed"&&e.completedAt&&new Date(e.completedAt).toDateString()===t).length});this.funnelStages=P(()=>{let t=this.executions(),e=t.length||1,n=t.length,r=t.filter(S=>S.stepResults.plan?.status==="success").length,u=t.filter(S=>S.stepResults.private_chat?.status==="success").length,p=t.filter(S=>S.stepResults.detect_interest?.status==="success").length,f=t.filter(S=>S.outcome==="converted").length;return[{id:"triggered",name:"\u89F8\u767C",count:n,percentage:100,gradient:"linear-gradient(to top, #6366f1, #8b5cf6)"},{id:"planned",name:"\u7B56\u5283",count:r,percentage:r/e*100,gradient:"linear-gradient(to top, #3b82f6, #6366f1)"},{id:"chatted",name:"\u79C1\u804A",count:u,percentage:u/e*100,gradient:"linear-gradient(to top, #06b6d4, #3b82f6)"},{id:"interested",name:"\u8208\u8DA3",count:p,percentage:p/e*100,gradient:"linear-gradient(to top, #10b981, #06b6d4)"},{id:"converted",name:"\u8F49\u5316",count:f,percentage:f/e*100,gradient:"linear-gradient(to top, #22c55e, #10b981)"}]});this.workflowSteps=[{id:"evaluate",name:"\u8A55\u4F30"},{id:"plan",name:"AI\u7B56\u5283"},{id:"private_chat",name:"\u79C1\u804A"},{id:"detect_interest",name:"\u8208\u8DA3"},{id:"create_group",name:"\u5EFA\u7FA4"},{id:"group_marketing",name:"\u71DF\u92B7"},{id:"record",name:"\u8A18\u9304"}]}ngOnInit(){}ngOnDestroy(){}getWorkflowSteps(){return this.workflowSteps}isStepCompleted(t,e){return t.stepResults[e]?.status==="success"}getCurrentStepName(t){return this.workflowSteps.find(n=>n.id===t.currentStep)?.name||t.currentStep}getStatusIcon(t){return{running:"\u{1F504}",pending:"\u23F3",completed:"\u2705",failed:"\u274C",cancelled:"\u{1F6AB}",paused:"\u23F8\uFE0F"}[t]||"\u2753"}getStepStatusText(t){return{success:"\u2713 \u5B8C\u6210",failed:"\u2717 \u5931\u6557",skipped:"- \u8DF3\u904E"}[t]||t}getStepResultSummary(t){let e=t.stepResults[t.currentStep];return e?.data&&e.data.type?`\u4FE1\u865F: ${e.data.type}`:""}getConversionProbability(t){return Math.round(this.workflowService.calculateConversionProbability(t)*100)}getConversionColor(t){let e=this.workflowService.calculateConversionProbability(t);return e>=.7?"#22c55e":e>=.5?"#f59e0b":"#6b7280"}getOutcomeText(t){return{converted:"\u5DF2\u8F49\u5316",interested:"\u6709\u8208\u8DA3",neutral:"\u4E2D\u6027",rejected:"\u62D2\u7D55",no_response:"\u7121\u97FF\u61C9"}[t||""]||"\u9032\u884C\u4E2D"}getDuration(t){if(!t.completedAt)return"-";let e=new Date(t.startedAt).getTime(),n=new Date(t.completedAt).getTime();return`${Math.round((n-e)/6e4)}\u5206\u9418`}formatTime(t){if(!t)return"-";let e=new Date(t);return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}toggleExpand(t){this.expandedExecution.update(e=>e===t?null:t)}cancelExecution(t){this.workflowService.cancelExecution(t)}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=Q({type:l,selectors:[["app-workflow-monitor"]],decls:40,vars:5,consts:[[1,"workflow-monitor"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","gap-3"],[1,"text-3xl"],[1,"text-xl","font-bold",2,"color","var(--text-primary)"],[1,"text-sm",2,"color","var(--text-muted)"],[1,"flex","items-center","gap-4"],[1,"text-center"],[1,"text-2xl","font-bold",2,"color","var(--success)"],[1,"text-xs",2,"color","var(--text-muted)"],[1,"text-2xl","font-bold",2,"color","var(--warning)"],[1,"text-2xl","font-bold",2,"color","var(--primary)"],[1,"rounded-xl","p-5","mb-6",2,"background-color","var(--bg-card)","border","1px solid var(--border-color)"],[1,"text-lg","font-bold","mb-4","flex","items-center","gap-2",2,"color","var(--text-primary)"],[1,"flex","items-end","justify-between","gap-2","h-32"],[1,"flex-1","flex","flex-col","items-center"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4"],[1,"rounded-xl","p-4","transition-all","hover:shadow-lg",2,"background-color","var(--bg-card)","border","1px solid var(--border-color)",3,"border-cyan-500","border-l-4"],[1,"col-span-2","text-center","py-12",2,"color","var(--text-muted)"],[1,"mt-6"],[1,"w-full","rounded-t-lg","transition-all","duration-500"],[1,"mt-2","text-center"],[1,"text-sm","font-bold",2,"color","var(--text-primary)"],[1,"rounded-xl","p-4","transition-all","hover:shadow-lg",2,"background-color","var(--bg-card)","border","1px solid var(--border-color)"],[1,"flex","items-center","justify-between","mb-3"],[1,"flex","items-center","gap-2"],[1,"text-lg"],[1,"font-medium",2,"color","var(--text-primary)"],[1,"px-2","py-1","rounded-full","text-xs","font-medium",2,"color","white"],["title","\u53D6\u6D88\u57F7\u884C",1,"p-1","rounded","hover:bg-red-500/20","transition-colors",2,"color","var(--error)"],[1,"flex","items-center","gap-1","mb-3"],[1,"flex","items-center"],[1,"text-sm","p-2","rounded-lg",2,"background-color","var(--bg-secondary)"],[2,"color","var(--text-muted)"],[2,"color","var(--text-primary)"],[1,"text-xs","ml-2",2,"color","var(--success)"],[1,"mt-3","pt-3","border-t",2,"border-color","var(--border-color)"],[1,"w-full","mt-2","text-xs","py-1","rounded","transition-colors","hover:bg-slate-700/50",2,"color","var(--text-muted)",3,"click"],["title","\u53D6\u6D88\u57F7\u884C",1,"p-1","rounded","hover:bg-red-500/20","transition-colors",2,"color","var(--error)",3,"click"],[1,"w-6","h-6","rounded-full","flex","items-center","justify-center","text-xs","transition-all",2,"color","white"],[1,"w-4","h-0.5","transition-all",3,"bg-emerald-500","bg-slate-600"],[1,"w-4","h-0.5","transition-all"],[1,"text-sm","font-medium","mb-2",2,"color","var(--text-secondary)"],[1,"space-y-2","text-xs"],[1,"mt-2","p-2","rounded","text-xs",2,"background-color","var(--bg-tertiary)"],[1,"flex","items-center","justify-between","p-2","rounded",2,"background-color","var(--bg-tertiary)"],[2,"color","var(--text-secondary)"],[1,"text-4xl","block","mb-4"],[1,"text-sm","mt-2"],[1,"rounded-xl","overflow-hidden",2,"background-color","var(--bg-card)","border","1px solid var(--border-color)"],[1,"w-full","text-sm"],[2,"background-color","var(--bg-secondary)"],[1,"text-left","p-3",2,"color","var(--text-muted)"],[1,"border-t",2,"border-color","var(--border-color)"],[1,"p-3",2,"color","var(--text-primary)"],[1,"p-3"],[1,"px-2","py-1","rounded-full","text-xs"],[1,"p-3",2,"color","var(--text-muted)"]],template:function(e,n){e&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),a(4,"\u{1F4CA}"),C(),v(5,"div")(6,"h2",4),a(7,"\u57F7\u884C\u76E3\u63A7"),C(),v(8,"p",5),a(9,"\u5BE6\u6642\u8FFD\u8E64\u5DE5\u4F5C\u6D41\u57F7\u884C\u72C0\u614B"),C()()(),v(10,"div",6)(11,"div",7)(12,"div",8),a(13),C(),v(14,"div",9),a(15,"\u9032\u884C\u4E2D"),C()(),v(16,"div",7)(17,"div",10),a(18),C(),v(19,"div",9),a(20,"\u7B49\u5F85\u4E2D"),C()(),v(21,"div",7)(22,"div",11),a(23),C(),v(24,"div",9),a(25,"\u4ECA\u65E5\u5B8C\u6210"),C()()()(),v(26,"div",12)(27,"h3",13)(28,"span"),a(29,"\u{1F3AF}"),C(),v(30,"span"),a(31,"\u8F49\u5316\u6F0F\u6597"),C()(),v(32,"div",14),F(33,Ki,7,6,"div",15,Ne),C()(),v(35,"div",16),F(36,ao,26,15,"div",17,Ne,!1,lo,7,0,"div",18),C(),h(39,uo,21,0,"div",19),C()),e&2&&(s(13),_(n.runningCount()),s(5),_(n.pendingCount()),s(5),_(n.completedTodayCount()),s(10),A(n.funnelStages()),s(3),A(n.activeExecutions()),s(3),b(n.completedExecutions().length>0?39:-1))},dependencies:[K],styles:[".workflow-monitor[_ngcontent-%COMP%]{padding:1.5rem}"]})}};var co=(l,t)=>t.date,It=(l,t)=>t.id;function mo(l,t){if(l&1&&(v(0,"div",33)(1,"div",40),oe(2,"div",41)(3,"div",42),C(),v(4,"span",43),a(5),C()()),l&2){let e=t.$implicit,n=d();s(2),H("height",n.Math.max(4,e.conversions*8),"px"),s(),H("height",n.Math.max(4,e.triggers*4),"px"),s(2),_(n.formatDate(e.date))}}function po(l,t){if(l&1&&(v(0,"div",2)(1,"span",44),a(2),C(),v(3,"div",45)(4,"div",46)(5,"span",47),a(6),C(),v(7,"span",5),a(8),C()(),v(9,"div",48),oe(10,"div",49),C()(),v(11,"span",50),a(12),C()()),l&2){let e=t.$implicit;s(2),_(e.icon),s(4),_(e.name),s(2),x("",e.engagements," \u6B21"),s(2),H("width",e.effectiveness,"%")("background",e.color),s(),H("color",e.color),s(),x("",e.effectiveness,"%")}}function go(l,t){if(l&1&&(v(0,"div",51)(1,"span",52),a(2),C(),v(3,"div")(4,"div",53),a(5),C(),v(6,"div",43),a(7),C()()()),l&2){let e=t.$implicit;H("background-color",e.bgColor),s(2),_(e.icon),s(3),_(e.title),s(2),_(e.description)}}var et=class l{constructor(){this.workflowService=I(Me);this.ipc=I(ie);this.Math=Math;this.analytics=D({totals:{triggers:0,plans:0,privateChats:0,groupsCreated:0,conversions:0},conversionRate:0,activeExecutions:0,daily:{}});this.trendData=P(()=>{let t=this.analytics().daily||{},e=Object.keys(t).sort().slice(-7);return e.length===0?this.generateMockTrendData():e.map(n=>({date:n,triggers:t[n]?.triggers||0,conversions:t[n]?.conversions||0,rate:t[n]?.triggers?Math.round(t[n]?.conversions/t[n]?.triggers*100):0}))});this.rolePerformance=D([{id:"closer",name:"\u6210\u4EA4\u5C08\u5BB6",icon:"\u{1F4BC}",engagements:45,effectiveness:78,color:"#22c55e"},{id:"expert",name:"\u7522\u54C1\u5C08\u5BB6",icon:"\u{1F393}",engagements:38,effectiveness:72,color:"#3b82f6"},{id:"testimonial",name:"\u898B\u8B49\u8005",icon:"\u2B50",engagements:32,effectiveness:65,color:"#f59e0b"},{id:"supporter",name:"\u5BA2\u670D\u652F\u6301",icon:"\u{1F91D}",engagements:28,effectiveness:58,color:"#8b5cf6"},{id:"connector",name:"\u793E\u4EA4\u9054\u4EBA",icon:"\u{1F31F}",engagements:22,effectiveness:52,color:"#ec4899"}]);this.insights=P(()=>{let t=this.analytics(),e=[];return t.conversionRate>30?e.push({id:"high_conversion",icon:"\u{1F389}",title:"\u8F49\u5316\u7387\u512A\u79C0",description:`\u7576\u524D\u8F49\u5316\u7387 ${t.conversionRate}%\uFF0C\u9AD8\u65BC\u884C\u696D\u5E73\u5747\u6C34\u5E73`,bgColor:"rgba(34, 197, 94, 0.1)"}):t.conversionRate<15&&e.push({id:"low_conversion",icon:"\u26A0\uFE0F",title:"\u8F49\u5316\u7387\u5F85\u63D0\u5347",description:"\u5EFA\u8B70\u512A\u5316\u8A71\u8853\u6A21\u677F\u6216\u8ABF\u6574\u76EE\u6A19\u7528\u6236\u7BE9\u9078\u689D\u4EF6",bgColor:"rgba(245, 158, 11, 0.1)"}),t.activeExecutions>5&&e.push({id:"high_activity",icon:"\u{1F525}",title:"\u9AD8\u6D3B\u8E8D\u5EA6",description:`\u7576\u524D\u6709 ${t.activeExecutions} \u500B\u5DE5\u4F5C\u6D41\u6B63\u5728\u57F7\u884C`,bgColor:"rgba(239, 68, 68, 0.1)"}),e.length===0&&e.push({id:"tip",icon:"\u{1F4A1}",title:"\u63D0\u5347\u5EFA\u8B70",description:"\u5617\u8A66\u555F\u7528\u81EA\u52D5\u5316\u5DE5\u4F5C\u6D41\u4F86\u63D0\u5347\u71DF\u92B7\u6548\u7387",bgColor:"rgba(99, 102, 241, 0.1)"}),e.push({id:"best_time",icon:"\u23F0",title:"\u6700\u4F73\u6642\u6BB5",description:"\u6578\u64DA\u986F\u793A 14:00-18:00 \u7528\u6236\u97FF\u61C9\u7387\u6700\u9AD8",bgColor:"rgba(6, 182, 212, 0.1)"}),e})}ngOnInit(){this.refreshData()}ngOnDestroy(){}refreshData(){this.ipc.send("workflow:get-analytics",{}),setTimeout(()=>{this.analytics.set({totals:{triggers:156,plans:142,privateChats:98,groupsCreated:45,conversions:32},conversionRate:20.5,activeExecutions:3,daily:{}})},500)}generateMockTrendData(){let t=[],e=new Date;for(let n=6;n>=0;n--){let r=new Date(e);r.setDate(r.getDate()-n);let u=r.toISOString().split("T")[0],p=Math.floor(Math.random()*30)+10,f=Math.floor(p*(.15+Math.random()*.2));t.push({date:u,triggers:p,conversions:f,rate:Math.round(f/p*100)})}return t}getConversionColor(){let t=this.analytics().conversionRate;return t>=30?"#22c55e":t>=20?"#f59e0b":"#ef4444"}getConversionDashArray(){let t=this.analytics().conversionRate,e=2*Math.PI*70;return`${t/100*e} ${e}`}getFunnelRate(t){let e=this.analytics().totals;switch(t){case"plan":return e.triggers?Math.round(e.plans/e.triggers*100):0;case"chat":return e.plans?Math.round(e.privateChats/e.plans*100):0;case"group":return e.privateChats?Math.round(e.groupsCreated/e.privateChats*100):0;case"conversion":return e.groupsCreated?Math.round(e.conversions/e.groupsCreated*100):0;default:return 0}}formatDate(t){let e=new Date(t);return`${e.getMonth()+1}/${e.getDate()}`}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=Q({type:l,selectors:[["app-workflow-analytics"]],decls:115,vars:14,consts:[[1,"workflow-analytics"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","gap-3"],[1,"text-3xl"],[1,"text-xl","font-bold",2,"color","var(--text-primary)"],[1,"text-sm",2,"color","var(--text-muted)"],[1,"px-4","py-2","rounded-lg","transition-colors","flex","items-center","gap-2",2,"background-color","var(--bg-secondary)","color","var(--text-secondary)",3,"click"],[1,"grid","grid-cols-2","lg:grid-cols-5","gap-4","mb-6"],[1,"rounded-xl","p-4","text-center",2,"background","linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1))","border","1px solid rgba(99, 102, 241, 0.3)"],[1,"text-3xl","font-bold",2,"color","#818cf8"],[1,"rounded-xl","p-4","text-center",2,"background","linear-gradient(135deg, rgba(6, 182, 212, 0.2), rgba(34, 211, 238, 0.1))","border","1px solid rgba(6, 182, 212, 0.3)"],[1,"text-3xl","font-bold",2,"color","#22d3ee"],[1,"rounded-xl","p-4","text-center",2,"background","linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(251, 191, 36, 0.1))","border","1px solid rgba(245, 158, 11, 0.3)"],[1,"text-3xl","font-bold",2,"color","#fbbf24"],[1,"rounded-xl","p-4","text-center",2,"background","linear-gradient(135deg, rgba(236, 72, 153, 0.2), rgba(244, 114, 182, 0.1))","border","1px solid rgba(236, 72, 153, 0.3)"],[1,"text-3xl","font-bold",2,"color","#f472b6"],[1,"rounded-xl","p-4","text-center",2,"background","linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(74, 222, 128, 0.1))","border","1px solid rgba(34, 197, 94, 0.3)"],[1,"text-3xl","font-bold",2,"color","#4ade80"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"rounded-xl","p-5",2,"background-color","var(--bg-card)","border","1px solid var(--border-color)"],[1,"text-lg","font-bold","mb-4","flex","items-center","gap-2",2,"color","var(--text-primary)"],[1,"flex","items-center","justify-center","py-8"],[1,"relative","w-40","h-40"],[1,"w-full","h-full","transform","-rotate-90"],["cx","80","cy","80","r","70","stroke","rgba(100, 116, 139, 0.3)","stroke-width","12","fill","none"],["cx","80","cy","80","r","70","stroke-width","12","fill","none","stroke-linecap","round",1,"transition-all","duration-1000"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center"],[1,"text-4xl","font-bold"],[1,"space-y-2","mt-4"],[1,"flex","items-center","justify-between","text-sm"],[2,"color","var(--text-secondary)"],[2,"color","var(--text-primary)"],[1,"h-48","flex","items-end","justify-between","gap-2","px-2"],[1,"flex-1","flex","flex-col","items-center","gap-1"],[1,"flex","items-center","justify-center","gap-6","mt-4","text-xs",2,"color","var(--text-muted)"],[1,"flex","items-center","gap-1"],[1,"w-3","h-3","rounded",2,"background","linear-gradient(to top, #6366f1, #818cf8)"],[1,"w-3","h-3","rounded",2,"background","linear-gradient(to top, #22c55e, #4ade80)"],[1,"space-y-3"],[1,"p-3","rounded-lg","flex","items-start","gap-3",3,"background-color"],[1,"w-full","flex","flex-col","gap-1"],[1,"w-full","rounded-t","transition-all","duration-500",2,"background","linear-gradient(to top, #22c55e, #4ade80)"],[1,"w-full","rounded-t","transition-all","duration-500",2,"background","linear-gradient(to top, #6366f1, #818cf8)"],[1,"text-xs",2,"color","var(--text-muted)"],[1,"text-2xl"],[1,"flex-1"],[1,"flex","items-center","justify-between","mb-1"],[1,"text-sm","font-medium",2,"color","var(--text-primary)"],[1,"w-full","h-2","rounded-full",2,"background-color","var(--bg-secondary)"],[1,"h-full","rounded-full","transition-all","duration-500"],[1,"text-sm","font-medium"],[1,"p-3","rounded-lg","flex","items-start","gap-3"],[1,"text-xl"],[1,"font-medium","text-sm",2,"color","var(--text-primary)"]],template:function(e,n){e&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),a(4,"\u{1F4C8}"),C(),v(5,"div")(6,"h2",4),a(7,"\u6578\u64DA\u5206\u6790"),C(),v(8,"p",5),a(9,"\u5DE5\u4F5C\u6D41\u57F7\u884C\u6548\u679C\u8FFD\u8E64"),C()()(),v(10,"button",6),ae("click",function(){return n.refreshData()}),v(11,"span"),a(12,"\u{1F504}"),C(),v(13,"span"),a(14,"\u5237\u65B0"),C()()(),v(15,"div",7)(16,"div",8)(17,"div",9),a(18),C(),v(19,"div",5),a(20,"\u7E3D\u89F8\u767C"),C()(),v(21,"div",10)(22,"div",11),a(23),C(),v(24,"div",5),a(25,"AI \u7B56\u5283"),C()(),v(26,"div",12)(27,"div",13),a(28),C(),v(29,"div",5),a(30,"\u79C1\u804A\u5354\u4F5C"),C()(),v(31,"div",14)(32,"div",15),a(33),C(),v(34,"div",5),a(35,"\u5EFA\u7FA4\u6578"),C()(),v(36,"div",16)(37,"div",17),a(38),C(),v(39,"div",5),a(40,"\u6210\u529F\u8F49\u5316"),C()()(),v(41,"div",18)(42,"div",19)(43,"h3",20)(44,"span"),a(45,"\u{1F3AF}"),C(),v(46,"span"),a(47,"\u8F49\u5316\u7387"),C()(),v(48,"div",21)(49,"div",22),j(),v(50,"svg",23),oe(51,"circle",24)(52,"circle",25),C(),z(),v(53,"div",26)(54,"span",27),a(55),C(),v(56,"span",5),a(57,"\u8F49\u5316\u7387"),C()()()(),v(58,"div",28)(59,"div",29)(60,"span",30),a(61,"\u89F8\u767C \u2192 \u7B56\u5283"),C(),v(62,"span",31),a(63),C()(),v(64,"div",29)(65,"span",30),a(66,"\u7B56\u5283 \u2192 \u79C1\u804A"),C(),v(67,"span",31),a(68),C()(),v(69,"div",29)(70,"span",30),a(71,"\u79C1\u804A \u2192 \u5EFA\u7FA4"),C(),v(72,"span",31),a(73),C()(),v(74,"div",29)(75,"span",30),a(76,"\u5EFA\u7FA4 \u2192 \u8F49\u5316"),C(),v(77,"span",31),a(78),C()()()(),v(79,"div",19)(80,"h3",20)(81,"span"),a(82,"\u{1F4CA}"),C(),v(83,"span"),a(84,"7 \u65E5\u8DA8\u52E2"),C()(),v(85,"div",32),F(86,mo,6,5,"div",33,co),C(),v(88,"div",34)(89,"div",35),oe(90,"div",36),v(91,"span"),a(92,"\u89F8\u767C"),C()(),v(93,"div",35),oe(94,"div",37),v(95,"span"),a(96,"\u8F49\u5316"),C()()()(),v(97,"div",19)(98,"h3",20)(99,"span"),a(100,"\u{1F3AD}"),C(),v(101,"span"),a(102,"\u89D2\u8272\u6548\u80FD"),C()(),v(103,"div",38),F(104,po,13,10,"div",2,It),C()(),v(106,"div",19)(107,"h3",20)(108,"span"),a(109,"\u{1F4A1}"),C(),v(110,"span"),a(111,"\u5FEB\u901F\u6D1E\u5BDF"),C()(),v(112,"div",38),F(113,go,8,5,"div",39,It),C()()()()),e&2&&(s(18),_(n.analytics().totals.triggers),s(5),_(n.analytics().totals.plans),s(5),_(n.analytics().totals.privateChats),s(5),_(n.analytics().totals.groupsCreated),s(5),_(n.analytics().totals.conversions),s(14),mt("stroke",n.getConversionColor())("stroke-dasharray",n.getConversionDashArray()),s(2),H("color",n.getConversionColor()),s(),x(" ",n.analytics().conversionRate,"% "),s(8),x("",n.getFunnelRate("plan"),"%"),s(5),x("",n.getFunnelRate("chat"),"%"),s(5),x("",n.getFunnelRate("group"),"%"),s(5),x("",n.getFunnelRate("conversion"),"%"),s(8),A(n.trendData()),s(18),A(n.rolePerformance()),s(9),A(n.insights()))},dependencies:[K],styles:[".workflow-analytics[_ngcontent-%COMP%]{padding:1.5rem}"]})}};var xo=["importFileInput"],_o=["goalInput"],Co=()=>[1,2,3,4,5],pe=(l,t)=>t.id,Pt=(l,t)=>t.telegramId,vo=(l,t)=>t.step;function fo(l,t){if(l&1&&(i(0,"span",9),R(1,"span",28),a(2),o()),l&2){let e=d();s(2),x(" ",e.multiRoleService.activeGroupCount()," \u500B\u5354\u4F5C\u9032\u884C\u4E2D ")}}function ho(l,t){l&1&&(i(0,"span",10),a(1," \u7121\u6D3B\u8E8D\u5354\u4F5C "),o())}function bo(l,t){if(l&1){let e=y();i(0,"button",29),g("click",function(){let r=c(e).$implicit,u=d();return m(u.activeTab.set(r.id))}),i(1,"span",30),a(2),o(),i(3,"span"),a(4),o()()}if(l&2){let e=t.$implicit,n=d();E("bg-gradient-to-r",n.activeTab()===e.id)("from-purple-500",n.activeTab()===e.id)("to-pink-500",n.activeTab()===e.id)("text-white",n.activeTab()===e.id)("shadow-lg",n.activeTab()===e.id)("text-slate-400",n.activeTab()!==e.id)("hover:text-white",n.activeTab()!==e.id)("hover:bg-slate-700/50",n.activeTab()!==e.id),s(2),_(e.icon),s(2),_(e.label)}}function yo(l,t){if(l&1){let e=y();i(0,"div",21)(1,"div",31)(2,"div",4)(3,"div")(4,"h2",32)(5,"span",7),a(6,"\u{1F916}"),o(),a(7," AI \u667A\u80FD\u7B56\u5283 "),i(8,"span",33),a(9,"NEW"),o()(),i(10,"p",34),a(11,"\u544A\u8A34 AI \u4F60\u7684\u76EE\u6A19\uFF0C\u81EA\u52D5\u751F\u6210\u6700\u4F73\u89D2\u8272\u7D44\u5408\u548C\u57F7\u884C\u7B56\u7565"),o()(),i(12,"button",35),g("click",function(){c(e);let r=d();return m(r.openAIPlanner())}),i(13,"span"),a(14,"\u{1F680}"),o(),a(15," \u958B\u59CB\u7B56\u5283 "),o()(),i(16,"div",36)(17,"span",37),a(18,"\u5FEB\u901F\u9078\u64C7\uFF1A"),o(),i(19,"button",38),g("click",function(){c(e);let r=d();return m(r.quickAIPlan("\u4FC3\u9032\u9996\u55AE\u6210\u4EA4"))}),a(20," \u{1F4B0} \u4FC3\u9032\u9996\u55AE "),o(),i(21,"button",38),g("click",function(){c(e);let r=d();return m(r.quickAIPlan("\u633D\u56DE\u6D41\u5931\u5BA2\u6236"))}),a(22," \u{1F49D} \u633D\u56DE\u6D41\u5931 "),o(),i(23,"button",38),g("click",function(){c(e);let r=d();return m(r.quickAIPlan("\u63D0\u5347\u793E\u7FA4\u6D3B\u8E8D\u5EA6"))}),a(24," \u{1F389} \u793E\u7FA4\u6D3B\u8E8D "),o(),i(25,"button",38),g("click",function(){c(e);let r=d();return m(r.quickAIPlan("\u8655\u7406\u552E\u5F8C\u554F\u984C"))}),a(26," \u{1F527} \u552E\u5F8C\u670D\u52D9 "),o()()(),R(27,"app-collaboration-dashboard"),o()}}function So(l,t){if(l&1){let e=y();i(0,"app-role-library",39),g("roleAdded",function(r){c(e);let u=d();return m(u.onPresetRoleAdded(r))})("roleEdit",function(r){c(e);let u=d();return m(u.onPresetRoleEdit(r))}),o()}}function Eo(l,t){if(l&1){let e=y();i(0,"div",21)(1,"div",4)(2,"div")(3,"h2",40)(4,"span"),a(5,"\u{1F3AC}"),o(),a(6," \u5834\u666F\u6A21\u677F\u5EAB "),o(),i(7,"p",41),a(8,"10\u500B\u9810\u8A2D\u5834\u666F\uFF0C\u5FEB\u901F\u555F\u52D5\u591A\u89D2\u8272\u5354\u4F5C"),o()()(),i(9,"app-scenario-selector",42),g("scenarioApplied",function(r){c(e);let u=d();return m(u.onScenarioApplied(r))}),o()()}}function wo(l,t){if(l&1&&(i(0,"span",57),a(1),o()),l&2){let e=d().$implicit;s(),x(" \u7D81\u5B9A: ",e.boundAccountPhone," ")}}function Do(l,t){l&1&&(i(0,"span",58),a(1," \u672A\u7D81\u5B9A\u5E33\u865F "),o())}function Fo(l,t){if(l&1){let e=y();i(0,"div",48)(1,"div",5)(2,"div",53),a(3),o(),i(4,"div")(5,"div",54),a(6),o(),i(7,"div",55),a(8),o(),i(9,"div",56),h(10,wo,2,1,"span",57)(11,Do,2,0,"span",58),i(12,"span",59),a(13),o()()()(),i(14,"div",60)(15,"button",61),g("click",function(){let r=c(e).$implicit,u=d(2);return m(u.editRole(r))}),a(16," \u7DE8\u8F2F "),o(),i(17,"button",62),g("click",function(){let r=c(e).$implicit,u=d(2);return m(u.deleteRole(r))}),j(),i(18,"svg",63),R(19,"path",64),o()()()()}if(l&2){let e=t.$implicit,n=d(2);s(2),E("bg-purple-500/20",e.type==="expert")("bg-emerald-500/20",e.type==="satisfied_customer")("bg-cyan-500/20",e.type==="support")("bg-orange-500/20",e.type==="manager")("bg-slate-600",e.type==="custom"),s(),x(" ",n.getRoleIcon(e.type)," "),s(3),_(e.name),s(2),_(e.personality.description),s(2),b(e.boundAccountPhone?10:11),s(3),x(" ",n.getRoleStyleLabel(e.personality.speakingStyle)," ")}}function Ao(l,t){if(l&1){let e=y();i(0,"div",49)(1,"div",65),a(2,"\u{1F3AD}"),o(),i(3,"p",66),a(4,"\u5C1A\u672A\u5B9A\u7FA9\u89D2\u8272"),o(),i(5,"p",67),a(6,"\u5275\u5EFA\u89D2\u8272\u4F86\u7D44\u5EFA\u591A\u89D2\u8272\u5354\u4F5C\u5718\u968A"),o(),i(7,"button",68),g("click",function(){c(e);let r=d(2);return m(r.showAddRole.set(!0))}),a(8," + \u5275\u5EFA\u7B2C\u4E00\u500B\u89D2\u8272 "),o()()}}function ko(l,t){if(l&1){let e=y();i(0,"button",69),g("click",function(){let r=c(e).$implicit,u=d(2);return m(u.quickAddRole(r.id))}),i(1,"div",70),a(2),o(),i(3,"div",71),a(4),o(),i(5,"div",72),a(6),o()()}if(l&2){let e=t.$implicit;s(2),_(e.icon),s(2),_(e.label),s(2),_(e.description)}}function Mo(l,t){if(l&1){let e=y();i(0,"div",22)(1,"div",43)(2,"div",44)(3,"h3",45)(4,"span"),a(5,"\u{1F3AD}"),o(),a(6," \u89D2\u8272\u5B9A\u7FA9 "),o(),i(7,"button",46),g("click",function(){c(e);let r=d();return m(r.showAddRole.set(!0))}),a(8," + \u6DFB\u52A0\u89D2\u8272 "),o()(),i(9,"div",47),F(10,Fo,20,15,"div",48,pe,!1,Ao,9,0,"div",49),o()(),i(13,"div",43)(14,"h4",50),a(15,"\u5FEB\u901F\u6DFB\u52A0\u9810\u8A2D\u89D2\u8272"),o(),i(16,"div",51),F(17,ko,7,3,"button",52,pe),o()()()}if(l&2){let e=d();s(10),A(e.multiRoleService.roles()),s(7),A(e.roleTypes)}}function To(l,t){l&1&&(j(),i(0,"svg",85),R(1,"path",86),o())}function Ro(l,t){if(l&1&&(i(0,"div",8)(1,"div",84),a(2),o(),h(3,To,2,0,":svg:svg",85),o()),l&2){let e=t.$implicit,n=t.$index,r=d(2).$implicit;s(2),x(" ",e.name," "),s(),b(n<r.stages.length-1?3:-1)}}function Io(l,t){if(l&1&&(i(0,"div",82),F(1,Ro,4,2,"div",8,pe),o()),l&2){let e=d().$implicit;s(),A(e.stages)}}function Po(l,t){if(l&1){let e=y();i(0,"div",73)(1,"div",78)(2,"div")(3,"div",54),a(4),o(),i(5,"div",55),a(6),o()(),i(7,"div",8)(8,"span",79),a(9),o(),i(10,"button",80),g("click",function(){let r=c(e).$implicit,u=d(2);return m(u.editScript(r))}),a(11," \u7DE8\u8F2F "),o(),i(12,"button",81),g("click",function(){let r=c(e).$implicit,u=d(2);return m(u.deleteScript(r))}),a(13," \u522A\u9664 "),o()()(),h(14,Io,3,0,"div",82),i(15,"div",83)(16,"span"),a(17),o(),i(18,"span"),a(19),o(),i(20,"span"),a(21),o()()()}if(l&2){let e=t.$implicit;s(4),_(e.name),s(2),_(e.description),s(3),x(" ",e.stages.length," \u500B\u968E\u6BB5 "),s(5),b(e.stages.length>0?14:-1),s(3),x("\u4F7F\u7528 ",e.stats.useCount," \u6B21"),s(2),x("\u6210\u529F\u7387 ",(e.stats.conversionRate*100).toFixed(0),"%"),s(2),x("\u5E73\u5747 ",e.stats.avgDuration," \u5206\u9418")}}function Bo(l,t){if(l&1){let e=y();i(0,"div",74)(1,"div",87),a(2,"\u{1F4DC}"),o(),i(3,"p"),a(4,"\u5C1A\u672A\u5275\u5EFA\u5287\u672C"),o(),i(5,"button",88),g("click",function(){c(e);let r=d(2);return m(r.addScript())}),a(6," + \u5275\u5EFA\u5287\u672C "),o()()}}function Vo(l,t){if(l&1){let e=y();i(0,"div",22)(1,"div",43)(2,"div",44)(3,"h3",45)(4,"span"),a(5,"\u{1F4DC}"),o(),a(6," \u5354\u4F5C\u5287\u672C "),o(),i(7,"button",46),g("click",function(){c(e);let r=d();return m(r.addScript())}),a(8," + \u65B0\u5EFA\u5287\u672C "),o()(),i(9,"div",47),F(10,Po,22,7,"div",73,pe,!1,Bo,7,0,"div",74),o()(),i(13,"div",43)(14,"h4",50),a(15,"\u4F7F\u7528\u9810\u8A2D\u6A21\u677F"),o(),i(16,"div",75)(17,"button",76),g("click",function(){c(e);let r=d();return m(r.useTemplate("high_intent"))}),i(18,"div",77)(19,"span",7),a(20,"\u{1F3AF}"),o(),i(21,"span",54),a(22,"\u9AD8\u610F\u5411\u5BA2\u6236\u8F49\u5316"),o()(),i(23,"p",55),a(24,"\u5C08\u5BB6\u4ECB\u7D39 + \u8001\u5BA2\u6236\u80CC\u66F8 + \u5BA2\u670D\u4FC3\u55AE"),o()(),i(25,"button",76),g("click",function(){c(e);let r=d();return m(r.useTemplate("product_demo"))}),i(26,"div",77)(27,"span",7),a(28,"\u{1F4E6}"),o(),i(29,"span",54),a(30,"\u7522\u54C1\u6F14\u793A\u63A8\u85A6"),o()(),i(31,"p",55),a(32,"\u529F\u80FD\u5C55\u793A + \u4F7F\u7528\u5834\u666F + \u6548\u679C\u5206\u4EAB"),o()()()()()}if(l&2){let e=d();s(10),A(e.multiRoleService.scripts())}}function No(l,t){l&1&&(i(0,"div",49)(1,"div",65),a(2,"\u{1F3E0}"),o(),i(3,"p",66),a(4,"\u66AB\u7121\u5354\u4F5C\u7FA4\u7D44"),o(),i(5,"p",67),a(6,"\u7576\u89F8\u767C\u591A\u89D2\u8272\u5354\u4F5C\u6642\uFF0C\u7CFB\u7D71\u6703\u81EA\u52D5\u5EFA\u7ACB\u5354\u4F5C\u7FA4\u7D44"),o(),i(7,"p",14),a(8,"\u{1F4A1} \u63D0\u793A\uFF1A\u5148\u5728\u300C\u6211\u7684\u89D2\u8272\u300D\u4E2D\u6DFB\u52A0\u89D2\u8272\u4E26\u7D81\u5B9A\u5E33\u865F"),o()())}function Go(l,t){if(l&1){let e=y();i(0,"div",49)(1,"div",65),a(2,"\u{1F3E0}"),o(),i(3,"p",66),a(4,"\u66AB\u7121\u5354\u4F5C\u7FA4\u7D44"),o(),i(5,"p",67),a(6),o(),i(7,"button",68),g("click",function(){c(e);let r=d(2);return m(r.showCreateGroupDialog.set(!0))}),a(8," + \u5275\u5EFA\u5354\u4F5C\u7FA4\u7D44 "),o()()}if(l&2){let e=d(2);s(6),x("\u60A8\u5DF2\u6709 ",e.multiRoleService.roles().length," \u500B\u89D2\u8272\u5C31\u7DD2")}}function $o(l,t){if(l&1&&(i(0,"div",22)(1,"div",43)(2,"div",44)(3,"h3",45)(4,"span"),a(5,"\u{1F3E0}"),o(),a(6," \u5354\u4F5C\u7FA4\u7D44 "),o(),i(7,"button",89),a(8," + \u624B\u52D5\u5275\u5EFA "),o()(),h(9,No,9,0,"div",49)(10,Go,9,1,"div",49),o()()),l&2){let e=d();s(9),b(e.multiRoleService.roles().length===0?9:10)}}function Lo(l,t){l&1&&R(0,"app-workflow-config")}function jo(l,t){l&1&&R(0,"app-workflow-monitor")}function Uo(l,t){l&1&&R(0,"app-workflow-analytics")}function Wo(l,t){if(l&1){let e=y();i(0,"div",23)(1,"div",43)(2,"h3",90)(3,"span"),a(4,"\u2699\uFE0F"),o(),a(5," \u81EA\u52D5\u5EFA\u7FA4\u8A2D\u7F6E "),o(),i(6,"div",47)(7,"div")(8,"label",91),a(9,"\u7FA4\u540D\u6A21\u677F"),o(),i(10,"input",92),$("ngModelChange",function(r){c(e);let u=d();return G(u.autoGroupNameTemplate,r)||(u.autoGroupNameTemplate=r),m(r)}),o(),i(11,"p",93),a(12),o()(),i(13,"div")(14,"label",91),a(15,"\u9080\u8ACB\u8A71\u8853"),o(),i(16,"textarea",94),$("ngModelChange",function(r){c(e);let u=d();return G(u.inviteMessage,r)||(u.inviteMessage=r),m(r)}),a(17,"                    "),o()(),i(18,"div",75)(19,"div")(20,"label",91),a(21,"\u6700\u5927\u540C\u6642\u5354\u4F5C\u6578"),o(),i(22,"input",95),$("ngModelChange",function(r){c(e);let u=d();return G(u.maxConcurrent,r)||(u.maxConcurrent=r),m(r)}),o()(),i(23,"div")(24,"label",91),a(25,"\u81EA\u52D5\u95DC\u9589\u5929\u6578"),o(),i(26,"input",96),$("ngModelChange",function(r){c(e);let u=d();return G(u.autoCloseDays,r)||(u.autoCloseDays=r),m(r)}),o()()()()(),i(27,"div",43)(28,"h3",90)(29,"span"),a(30,"\u{1F3AF}"),o(),a(31," \u9ED8\u8A8D\u89F8\u767C\u689D\u4EF6 "),o(),i(32,"div",47)(33,"div",75)(34,"div")(35,"label",91),a(36,"\u610F\u5411\u8A55\u5206\u95BE\u503C"),o(),i(37,"div",8)(38,"input",97),$("ngModelChange",function(r){c(e);let u=d();return G(u.intentThreshold,r)||(u.intentThreshold=r),m(r)}),o(),i(39,"span",98),a(40),o()()(),i(41,"div")(42,"label",91),a(43,"\u6700\u5C11\u5C0D\u8A71\u8F2A\u6578"),o(),i(44,"input",95),$("ngModelChange",function(r){c(e);let u=d();return G(u.minRounds,r)||(u.minRounds=r),m(r)}),o()()(),i(45,"label",99)(46,"div")(47,"div",100),a(48,"\u9700\u8981\u8A62\u554F\u904E\u50F9\u683C"),o(),i(49,"div",101),a(50,"\u53EA\u6709\u8A62\u554F\u904E\u50F9\u683C\u7684\u5BA2\u6236\u624D\u89F8\u767C"),o()(),i(51,"input",102),$("ngModelChange",function(r){c(e);let u=d();return G(u.requirePriceInquiry,r)||(u.requirePriceInquiry=r),m(r)}),o()()()(),i(52,"div",43)(53,"h3",90)(54,"span"),a(55,"\u{1F916}"),o(),a(56," AI \u8A2D\u7F6E "),o(),i(57,"label",103)(58,"div")(59,"div",100),a(60,"\u4F7F\u7528 AI \u4E2D\u5FC3\u914D\u7F6E"),o(),i(61,"div",101),a(62,"\u5F9E AI \u4E2D\u5FC3\u7372\u53D6\u6A21\u578B\u548C\u77E5\u8B58\u5EAB\u914D\u7F6E"),o()(),i(63,"input",102),$("ngModelChange",function(r){c(e);let u=d();return G(u.useAICenter,r)||(u.useAICenter=r),m(r)}),o()(),i(64,"div")(65,"label",91),a(66,"\u5354\u4F5C\u6A21\u5F0F"),o(),i(67,"div",104)(68,"button",105),g("click",function(){c(e);let r=d();return m(r.coordinationMode="sequential")}),a(69," \u9806\u5E8F\u57F7\u884C "),o(),i(70,"button",105),g("click",function(){c(e);let r=d();return m(r.coordinationMode="responsive")}),a(71," \u97FF\u61C9\u5F0F "),o()()()(),i(72,"button",106),g("click",function(){c(e);let r=d();return m(r.saveSettings())}),a(73," \u4FDD\u5B58\u8A2D\u7F6E "),o()()}if(l&2){let e=d();s(10),N("ngModel",e.autoGroupNameTemplate),s(2),J("\u53EF\u7528\u8B8A\u91CF: ","{","\u5BA2\u6236\u540D","}"),s(4),N("ngModel",e.inviteMessage),s(6),N("ngModel",e.maxConcurrent),s(4),N("ngModel",e.autoCloseDays),s(12),N("ngModel",e.intentThreshold),s(2),x("",e.intentThreshold,"%"),s(4),N("ngModel",e.minRounds),s(7),N("ngModel",e.requirePriceInquiry),s(12),N("ngModel",e.useAICenter),s(5),E("bg-purple-500",e.coordinationMode==="sequential")("text-white",e.coordinationMode==="sequential")("bg-slate-700",e.coordinationMode!=="sequential")("text-slate-300",e.coordinationMode!=="sequential"),s(2),E("bg-purple-500",e.coordinationMode==="responsive")("text-white",e.coordinationMode==="responsive")("bg-slate-700",e.coordinationMode!=="responsive")("text-slate-300",e.coordinationMode!=="responsive")}}function qo(l,t){if(l&1){let e=y();i(0,"button",117),g("click",function(){let r=c(e).$implicit,u=d(2);return m(u.newRoleType.set(r.id))}),i(1,"div",118),a(2),o(),i(3,"div",119),a(4),o()()}if(l&2){let e=t.$implicit,n=d(2);E("border-purple-500",n.newRoleType()===e.id)("bg-purple-500/10",n.newRoleType()===e.id)("border-transparent",n.newRoleType()!==e.id)("bg-slate-700",n.newRoleType()!==e.id),s(2),_(e.icon),s(),E("text-purple-400",n.newRoleType()===e.id)("text-slate-300",n.newRoleType()!==e.id),s(),x(" ",e.label," ")}}function Oo(l,t){if(l&1){let e=y();i(0,"div",24)(1,"div",107)(2,"h3",108),a(3,"\u6DFB\u52A0\u89D2\u8272"),o(),i(4,"div",47)(5,"div")(6,"label",91),a(7,"\u89D2\u8272\u985E\u578B"),o(),i(8,"div",109),F(9,qo,5,14,"button",110,pe),o()(),i(11,"div")(12,"label",91),a(13,"\u89D2\u8272\u540D\u7A31"),o(),i(14,"input",111),$("ngModelChange",function(r){c(e);let u=d();return G(u.newRoleName,r)||(u.newRoleName=r),m(r)}),o()(),i(15,"div")(16,"label",91),a(17,"\u4EBA\u8A2D\u63CF\u8FF0"),o(),i(18,"textarea",112),$("ngModelChange",function(r){c(e);let u=d();return G(u.newRoleDescription,r)||(u.newRoleDescription=r),m(r)}),a(19,"                "),o()(),i(20,"div")(21,"label",91),a(22,"AI \u4EBA\u8A2D Prompt"),o(),i(23,"textarea",113),$("ngModelChange",function(r){c(e);let u=d();return G(u.newRolePrompt,r)||(u.newRolePrompt=r),m(r)}),a(24,"                "),o()()(),i(25,"div",114)(26,"button",115),g("click",function(){c(e);let r=d();return m(r.showAddRole.set(!1))}),a(27," \u53D6\u6D88 "),o(),i(28,"button",116),g("click",function(){c(e);let r=d();return m(r.saveNewRole())}),a(29," \u6DFB\u52A0 "),o()()()()}if(l&2){let e=d();s(9),A(e.roleTypes),s(5),N("ngModel",e.newRoleName),s(4),N("ngModel",e.newRoleDescription),s(5),N("ngModel",e.newRolePrompt)}}function Ho(l,t){if(l&1){let e=y();i(0,"app-role-editor",120),g("saved",function(r){c(e);let u=d();return m(u.onRoleSaved(r))})("cancelled",function(){c(e);let r=d();return m(r.onRoleEditorCancelled())}),o()}if(l&2){let e=d();L("role",e.editingRole())("availableAccounts",e.availableAccounts())}}function zo(l,t){if(l&1){let e=y();i(0,"app-script-editor",121),g("saved",function(r){c(e);let u=d();return m(u.onScriptSaved(r))})("cancelled",function(){c(e);let r=d();return m(r.onScriptEditorCancelled())}),o()}if(l&2){let e=d();L("script",e.editingScript())}}function Qo(l,t){if(l&1){let e=y();i(0,"div")(1,"label",91),a(2,"\u{1F3AF} \u544A\u8A34 AI \u4F60\u60F3\u9054\u6210\u4EC0\u9EBC\u76EE\u6A19"),o(),i(3,"textarea",129,0),$("ngModelChange",function(r){c(e);let u=d(2);return G(u.aiPlannerGoal,r)||(u.aiPlannerGoal=r),m(r)}),g("click",function(r){return c(e),m(r.stopPropagation())}),a(5,"                  "),o()(),i(6,"div")(7,"label",91),a(8,"\u6216\u9078\u64C7\u5E38\u898B\u76EE\u6A19"),o(),i(9,"div",130)(10,"button",131),g("click",function(){c(e);let r=d(2);return m(r.aiPlannerGoal="\u628A\u7336\u8C6B\u4E0D\u6C7A\u7684\u6F5B\u5728\u5BA2\u6236\u8F49\u5316\u70BA\u4ED8\u8CBB\u7528\u6236")}),i(11,"div",132),a(12,"\u{1F4B0}"),o(),i(13,"div",71),a(14,"\u4FC3\u9032\u9996\u55AE\u6210\u4EA4"),o(),i(15,"div",101),a(16,"\u591A\u89D2\u8272\u914D\u5408\u4FC3\u9032\u7336\u8C6B\u5BA2\u6236\u4E0B\u55AE"),o()(),i(17,"button",131),g("click",function(){c(e);let r=d(2);return m(r.aiPlannerGoal="\u633D\u56DE\u5DF2\u6D41\u5931\u7684\u8001\u5BA2\u6236\uFF0C\u8B93\u4ED6\u5011\u91CD\u65B0\u8CFC\u8CB7")}),i(18,"div",132),a(19,"\u{1F49D}"),o(),i(20,"div",71),a(21,"\u633D\u56DE\u6D41\u5931\u5BA2\u6236"),o(),i(22,"div",101),a(23,"\u95DC\u61F7\u56DE\u8A2A + \u7279\u5225\u512A\u60E0"),o()(),i(24,"button",131),g("click",function(){c(e);let r=d(2);return m(r.aiPlannerGoal="\u8B93\u793E\u7FA4\u66F4\u6D3B\u8E8D\uFF0C\u589E\u52A0\u7528\u6236\u4E92\u52D5\u548C\u7C98\u6027")}),i(25,"div",132),a(26,"\u{1F389}"),o(),i(27,"div",71),a(28,"\u63D0\u5347\u793E\u7FA4\u6D3B\u8E8D"),o(),i(29,"div",101),a(30,"\u8A71\u984C\u5F15\u5C0E + \u4E92\u52D5\u6FC0\u52F5"),o()(),i(31,"button",131),g("click",function(){c(e);let r=d(2);return m(r.aiPlannerGoal="\u9AD8\u6548\u8655\u7406\u5BA2\u6236\u552E\u5F8C\u554F\u984C\uFF0C\u63D0\u5347\u6EFF\u610F\u5EA6")}),i(32,"div",132),a(33,"\u{1F527}"),o(),i(34,"div",71),a(35,"\u552E\u5F8C\u554F\u984C\u8655\u7406"),o(),i(36,"div",101),a(37,"\u5FEB\u901F\u97FF\u61C9 + \u6EFF\u610F\u5EA6\u8DDF\u9032"),o()()()()}if(l&2){let e=d(2);s(3),N("ngModel",e.aiPlannerGoal)}}function Ko(l,t){if(l&1&&(i(0,"div",136)(1,"div",138),R(2,"div",139),o(),i(3,"span",14),a(4),o()()),l&2){let e=d(3);s(2),H("width",e.Math.min(e.aiPlanningElapsed()/45*100,95),"%"),s(2),x("",e.aiPlanningElapsed(),"\u79D2")}}function Yo(l,t){if(l&1&&(i(0,"div",126)(1,"div",133),a(2,"\u{1F916}"),o(),i(3,"p",134),a(4),o(),i(5,"p",135),a(6,"\u5206\u6790\u76EE\u6A19 \u2192 \u9078\u64C7\u89D2\u8272 \u2192 \u8A2D\u8A08\u6D41\u7A0B"),o(),h(7,Ko,5,3,"div",136),i(8,"p",137),a(9,"AI \u8ABF\u7528\u53EF\u80FD\u9700\u8981 30-45 \u79D2\uFF0C\u8ACB\u8010\u5FC3\u7B49\u5F85"),o()()),l&2){let e=d(2);s(4),_(e.aiPlanningProgress()),s(3),b(e.aiPlanningElapsed()>0?7:-1)}}function Jo(l,t){if(l&1&&(i(0,"span",194),a(1),o()),l&2){let e=t.$implicit;s(),_(e)}}function Xo(l,t){if(l&1&&(i(0,"div",192)(1,"div",191),a(2,"\u5BA2\u6236\u75DB\u9EDE"),o(),i(3,"div",193),F(4,Jo,2,1,"span",194,Y),o()()),l&2){let e=d(4);s(4),A(e.aiPlanResult().goalAnalysis.painPoints)}}function Zo(l,t){if(l&1&&(i(0,"span",195),a(1),o()),l&2){let e=t.$implicit;s(),_(e)}}function er(l,t){if(l&1&&(i(0,"div",192)(1,"div",191),a(2,"\u7522\u54C1\u512A\u52E2"),o(),i(3,"div",193),F(4,Zo,2,1,"span",195,Y),o()()),l&2){let e=d(4);s(4),A(e.aiPlanResult().goalAnalysis.keySellingPoints)}}function tr(l,t){if(l&1&&(i(0,"div",140)(1,"h4",189)(2,"span"),a(3,"\u{1F3AF}"),o(),a(4," \u76EE\u6A19\u5206\u6790 "),o(),i(5,"div",190)(6,"div")(7,"div",191),a(8,"\u7522\u54C1\u985E\u578B"),o(),i(9,"div",100),a(10),o()(),i(11,"div")(12,"div",191),a(13,"\u76EE\u6A19\u5BA2\u6236"),o(),i(14,"div",100),a(15),o()()(),h(16,Xo,6,0,"div",192),h(17,er,6,0,"div",192),o()),l&2){let e,n,r,u,p=d(3);s(10),_((e=p.aiPlanResult())==null||e.goalAnalysis==null?null:e.goalAnalysis.productType),s(5),_((n=p.aiPlanResult())==null||n.goalAnalysis==null?null:n.goalAnalysis.targetAudience),s(),b(!((r=p.aiPlanResult())==null||r.goalAnalysis==null||r.goalAnalysis.painPoints==null)&&r.goalAnalysis.painPoints.length?16:-1),s(),b(!((u=p.aiPlanResult())==null||u.goalAnalysis==null||u.goalAnalysis.keySellingPoints==null)&&u.goalAnalysis.keySellingPoints.length?17:-1)}}function nr(l,t){l&1&&(i(0,"span",145),a(1," \u{1F916} AI \u751F\u6210 "),o())}function ir(l,t){l&1&&(i(0,"span",146),a(1," \u{1F4CB} \u6A21\u677F\u7B56\u7565 "),o())}function or(l,t){l&1&&(i(0,"span",155),a(1,"\uFF08\u4E0D\u8DB3\uFF01\uFF09"),o())}function rr(l,t){if(l&1){let e=y();i(0,"div",156)(1,"div",196)(2,"span"),a(3,"\u26A0\uFE0F"),o(),i(4,"span"),a(5),o()(),i(6,"button",197),g("click",function(){c(e);let r=d(3);return m(r.goToAccountManagement())}),a(7," \u2795 \u6DFB\u52A0\u66F4\u591A\u5E33\u865F "),o()()}if(l&2){let e=d(3);s(5),J("\u5E33\u865F\u4E0D\u8DB3\uFF01\u9700\u8981 ",e.requiredAccountsForGroup()," \u500B\u5E33\u865F\uFF0C\u7576\u524D\u53EA\u6709 ",e.availableAccountCount()," \u500B\u5728\u7DDA\u3002")}}function ar(l,t){l&1&&(i(0,"div",157)(1,"div",198),a(2,"\u{1F3AC} \u7FA4\u804A\u5354\u4F5C\u6D41\u7A0B"),o(),i(3,"div",199)(4,"span",200),a(5,"\u2460 \u5EFA\u7FA4"),o(),i(6,"span"),a(7,"\u2192"),o(),i(8,"span",200),a(9,"\u2461 \u9080\u8ACB\u5BA2\u6236"),o(),i(10,"span"),a(11,"\u2192"),o(),i(12,"span",200),a(13,"\u2462 \u9080\u8ACB\u89D2\u8272"),o(),i(14,"span"),a(15,"\u2192"),o(),i(16,"span",200),a(17,"\u2463 \u5354\u4F5C\u670D\u52D9"),o()()())}function lr(l,t){if(l&1){let e=y();i(0,"div",162)(1,"div",201),a(2,"\u8ACB\u9078\u64C7\u8981\u9032\u884C\u71DF\u92B7\u7684\u76EE\u6A19\u7528\u6236"),o(),i(3,"div",202)(4,"button",203),g("click",function(){c(e);let r=d(3);return m(r.openTargetUserSelector())}),a(5," \u{1F4D2} \u5F9E\u901A\u8A0A\u9304\u9078\u64C7 "),o(),i(6,"button",204),g("click",function(){c(e);let r=d(3);return m(r.selectHighIntentUsers())}),a(7," \u2B50 \u81EA\u52D5\u9078\u9AD8\u610F\u5411 "),o(),i(8,"button",205),g("click",function(){c(e);let r=d(3);return m(r.triggerImportFile())}),a(9," \u{1F4E5} \u6279\u91CF\u5C0E\u5165 "),o()(),i(10,"input",206,1),g("change",function(r){c(e);let u=d(3);return m(u.handleImportFile(r))}),o()()}}function sr(l,t){if(l&1&&(i(0,"span",210),a(1),i(2,"span",212),a(3),o()()),l&2){let e=t.$implicit;s(),x(" ",e.firstName||e.username||e.telegramId," "),s(2),x("",e.intentScore,"\u5206")}}function ur(l,t){if(l&1&&(i(0,"span",211),a(1),o()),l&2){let e=d(4);s(),x(" +",e.selectedTargetUsers().length-5," \u66F4\u591A ")}}function dr(l,t){if(l&1){let e=y();i(0,"div",142)(1,"span",207),a(2),o(),i(3,"div",104)(4,"button",208),g("click",function(){c(e);let r=d(3);return m(r.openTargetUserSelector())}),a(5," \u4FEE\u6539 "),o(),i(6,"button",209),g("click",function(){c(e);let r=d(3);return m(r.clearSelectedUsers())}),a(7," \u6E05\u7A7A "),o()()(),i(8,"div",193),F(9,sr,4,2,"span",210,Pt),h(11,ur,2,1,"span",211),o()}if(l&2){let e=d(3);s(2),x(" \u2713 \u5DF2\u9078\u64C7 ",e.selectedTargetUsers().length," \u500B\u76EE\u6A19 "),s(7),A(e.selectedTargetUsers().slice(0,5)),s(2),b(e.selectedTargetUsers().length>5?11:-1)}}function cr(l,t){l&1&&(i(0,"span",165),a(1,"AI \u81EA\u52D5\u5206\u914D"),o())}function mr(l,t){if(l&1&&(i(0,"span",166),a(1),o()),l&2){let e=d(3);s(),x(" \u5DF2\u9078 ",e.plannerSelectedAccounts().length," \u500B\u5E33\u865F ")}}function pr(l,t){if(l&1){let e=y();i(0,"button",221),g("click",function(){let r=c(e).$implicit,u=d(4);return m(u.plannerAccountCount.set(u.Math.min(r,u.availableAccountCount())))}),a(1),o()}if(l&2){let e=t.$implicit,n=d(4);E("bg-purple-500",n.plannerAccountCount()===e)("text-white",n.plannerAccountCount()===e)("bg-slate-700",n.plannerAccountCount()!==e)("text-slate-400",n.plannerAccountCount()!==e),L("disabled",e>n.availableAccountCount()),s(),x(" ",e," ")}}function gr(l,t){if(l&1&&(i(0,"option",233),a(1),o()),l&2){let e=t.$implicit;L("value",e.id),s(),J("",e.icon," ",e.name)}}function xr(l,t){if(l&1){let e=y();i(0,"div",230)(1,"select",231),g("click",function(r){return c(e),m(r.stopPropagation())})("change",function(r){c(e);let u=d(2).$implicit,p=d(5);return m(p.onAccountRoleChange(u.id,r))}),i(2,"option",232),a(3,"\u{1F916} AI \u5206\u914D\u89D2\u8272"),o(),F(4,gr,2,3,"option",233,pe),o()()}if(l&2){let e=d(2).$implicit,n=d(5);s(),L("value",n.plannerAccountRoles().get(e.id)||""),s(3),A(n.availableRoleTypes)}}function _r(l,t){if(l&1){let e=y();i(0,"button",227),g("click",function(){c(e);let r=d().$implicit,u=d(5);return m(u.toggleAccountSelection(r.id))}),i(1,"div",8),R(2,"span",228),i(3,"span",229),a(4),o()(),h(5,xr,6,1,"div",230),o()}if(l&2){let e=d().$implicit,n=d(5);E("border-purple-500",n.plannerSelectedAccounts().includes(e.id))("bg-purple-500/10",n.plannerSelectedAccounts().includes(e.id))("border-slate-700",!n.plannerSelectedAccounts().includes(e.id))("bg-slate-800",!n.plannerSelectedAccounts().includes(e.id)),s(4),_(e.phone),s(),b(n.plannerSelectedAccounts().includes(e.id)?5:-1)}}function Cr(l,t){if(l&1&&h(0,_r,6,10,"button",226),l&2){let e=t.$implicit;b(e.status==="Online"?0:-1)}}function vr(l,t){if(l&1&&(i(0,"span",235),a(1),i(2,"span",236),a(3,"\u2192"),o(),a(4),o()),l&2){let e=t.$implicit,n=d(6);s(),x(" ",n.getAccountPhone(e)," "),s(3),x(" ",n.getAssignedRoleName(e)," ")}}function fr(l,t){if(l&1&&(i(0,"div",225)(1,"div",234),a(2,"\u5DF2\u9078\u5E33\u865F\u89D2\u8272\u9810\u89BD\uFF1A"),o(),i(3,"div",193),F(4,vr,5,2,"span",235,Y),o()()),l&2){let e=d(5);s(4),A(e.plannerSelectedAccounts())}}function hr(l,t){if(l&1){let e=y();i(0,"div")(1,"div",142)(2,"label",55),a(3,"\u9078\u64C7\u5E33\u865F\uFF08\u9EDE\u64CA\u9078\u64C7/\u53D6\u6D88\uFF09"),o(),i(4,"div",104)(5,"button",222),g("click",function(){c(e);let r=d(4);return m(r.selectAllOnlineAccounts())}),a(6,"\u5168\u9078\u5728\u7DDA"),o(),i(7,"button",223),g("click",function(){c(e);let r=d(4);return m(r.plannerSelectedAccounts.set([]))}),a(8,"\u6E05\u7A7A"),o()()(),i(9,"div",224),F(10,Cr,1,1,null,null,pe),o(),h(12,fr,6,0,"div",225),o()}if(l&2){let e=d(4);s(10),A(e.accountService.accounts()),s(2),b(e.plannerSelectedAccounts().length>0?12:-1)}}function br(l,t){if(l&1){let e=y();i(0,"div",168)(1,"div")(2,"div",142)(3,"label",55),a(4,"\u53C3\u8207\u5E33\u865F\u6578\u91CF"),o(),i(5,"div",8)(6,"span",134),a(7),o(),i(8,"span",14),a(9),o()()(),i(10,"div",60)(11,"input",213),g("input",function(r){c(e);let u=d(3);return m(u.onAccountCountChange(r))}),o(),i(12,"div",214),F(13,pr,2,10,"button",215,Y),o()(),i(15,"div",216),a(16),o()(),i(17,"div",217)(18,"div")(19,"div",218),a(20,"AI \u81EA\u52D5\u5206\u914D\u5E33\u865F\u548C\u89D2\u8272"),o(),i(21,"div",14),a(22,"\u95DC\u9589\u5F8C\u53EF\u624B\u52D5\u9078\u64C7\u5E33\u865F\u4E26\u6307\u5B9A\u89D2\u8272"),o()(),i(23,"button",219),g("click",function(){c(e);let r=d(3);return m(r.plannerAutoAssign.set(!r.plannerAutoAssign()))}),R(24,"span",220),o()(),h(25,hr,13,1,"div"),o()}if(l&2){let e=d(3);s(7),_(e.plannerAccountCount()),s(2),x("/ ",e.availableAccountCount()," \u53EF\u7528"),s(2),L("min",1)("max",e.Math.min(5,e.availableAccountCount()))("value",e.plannerAccountCount()),s(2),A(ve(15,Co)),s(3),x(" \u{1F916} AI \u63A8\u85A6\uFF1A",e.getRecommendedAccountCount()," \u500B\u5E33\u865F\uFF08\u57FA\u65BC\u76EE\u6A19\u5206\u6790\uFF09 "),s(7),E("bg-purple-500",e.plannerAutoAssign())("bg-slate-600",!e.plannerAutoAssign()),s(),E("left-1",!e.plannerAutoAssign())("left-7",e.plannerAutoAssign()),s(),b(e.plannerAutoAssign()?-1:25)}}function yr(l,t){if(l&1){let e=y();i(0,"button",237),g("click",function(){c(e);let r=d(3);return m(r.toggleAccountExplanation())}),a(1," \u{1F4A1} \u70BA\u4EC0\u9EBC\uFF1F "),o()}}function Sr(l,t){if(l&1&&(i(0,"div",170)(1,"div",238)(2,"span",236),a(3,"\u{1F4A1}"),o(),i(4,"div",147)(5,"p",239),a(6,"AI \u63A8\u85A6 "),i(7,"strong",236),a(8),o(),a(9," \u500B\u89D2\u8272\uFF1A"),o(),i(10,"ul",240)(11,"li"),a(12,"\u904E\u591A\u5E33\u865F\u53EF\u80FD\u5C0E\u81F4\u904E\u5EA6\u66DD\u5149\uFF0C\u5F15\u8D77\u7528\u6236\u8B66\u89BA"),o(),i(13,"li"),a(14,"\u89D2\u8272\u5206\u5DE5\u660E\u78BA\uFF0C\u6BCF\u500B\u89D2\u8272\u6709\u7368\u7279\u4F5C\u7528"),o(),i(15,"li"),a(16,"\u5269\u9918\u5E33\u865F\u53EF\u4F5C\u70BA\u5099\u7528\uFF0C\u96A8\u6642\u66FF\u88DC"),o()()()()()),l&2){let e,n=d(3);s(8),_(((e=n.aiPlanResult())==null||e.recommendedRoles==null?null:e.recommendedRoles.length)||0)}}function Er(l,t){if(l&1&&(i(0,"div",8),R(1,"span",249),i(2,"span",100),a(3),o()()),l&2){let e=d().$index,n=d(3);s(3),_(n.accountMatchResults()[e].accountPhone)}}function wr(l,t){l&1&&(i(0,"span",242),a(1,"\u5F85\u5206\u914D..."),o())}function Dr(l,t){l&1&&(i(0,"span",243),a(1,"\u4E3B\u5C0E"),o())}function Fr(l,t){l&1&&(i(0,"span",166),a(1,"\u5F85\u547D"),o())}function Ar(l,t){l&1&&(i(0,"span",244),a(1,"\u5339\u914D\u4E2D"),o())}function kr(l,t){l&1&&(i(0,"span",258),a(1,"\u7576\u524D"),o())}function Mr(l,t){if(l&1){let e=y();i(0,"button",256),g("click",function(){let r=c(e).$implicit,u=d(2).$index,p=d(3);return m(p.changeRoleForIndex(u,r))}),i(1,"span",30),a(2),o(),i(3,"div",257)(4,"div",100),a(5),o(),i(6,"div",14),a(7),o()(),h(8,kr,2,0,"span",258),o()}if(l&2){let e=t.$implicit,n=d(2).$implicit;E("bg-purple-500/20",n.name===e.name),s(2),_(e.icon),s(3),_(e.name),s(2),_(e.desc),s(),b(n.name===e.name?8:-1)}}function Tr(l,t){if(l&1){let e=y();i(0,"div",250),g("click",function(r){return c(e),m(r.stopPropagation())}),i(1,"div",251)(2,"span",101),a(3,"\u{1F504} \u9078\u64C7\u65B0\u89D2\u8272"),o()(),i(4,"div",252),F(5,Mr,9,6,"button",253,pe),o(),i(7,"div",254)(8,"button",255),g("click",function(){c(e);let r=d().$index,u=d(3);return m(u.removeRoleAssignment(r))}),i(9,"span"),a(10,"\u{1F5D1}\uFE0F"),o(),i(11,"span"),a(12,"\u79FB\u70BA\u5099\u7528"),o()()()()}if(l&2){let e=d(4);s(5),A(e.availableRoleTypes)}}function Rr(l,t){if(l&1){let e=y();i(0,"tr",179)(1,"td",241),h(2,Er,4,1,"div",8)(3,wr,2,0,"span",242),o(),i(4,"td",241)(5,"div",8)(6,"span",30),a(7),o(),i(8,"div")(9,"div",100),a(10),o(),i(11,"div",14),a(12),o()()()(),i(13,"td",176),h(14,Dr,2,0,"span",243)(15,Fr,2,0,"span",166)(16,Ar,2,0,"span",244),o(),i(17,"td",245)(18,"div",246)(19,"button",247),g("click",function(r){let u=c(e).$index,p=d(3);return m(p.toggleRoleDropdown(u,r))}),a(20," \u66F4\u63DB "),i(21,"span"),a(22,"\u25BC"),o()(),h(23,Tr,13,0,"div",248),o()()()}if(l&2){let e=t.$implicit,n=t.$index,r=d(3);s(2),b(r.accountMatchResults().length>n?2:3),s(5),_(e.icon),s(3),_(e.name),s(2),_(e.purpose),s(2),b(n===0?14:r.accountMatchResults().length>n?15:16),s(7),E("rotate-180",r.roleChangeModalIndex()===n),s(2),b(r.roleChangeModalIndex()===n?23:-1)}}function Ir(l,t){if(l&1){let e=y();i(0,"button",256),g("click",function(){let r=c(e).$implicit,u=d(2).$implicit,p=d(3);return m(p.assignBackupToRole(u.id,r))}),i(1,"span",30),a(2),o(),i(3,"div",257)(4,"div",100),a(5),o(),i(6,"div",14),a(7),o()()()}if(l&2){let e=t.$implicit;s(2),_(e.icon),s(3),_(e.name),s(2),_(e.desc)}}function Pr(l,t){if(l&1){let e=y();i(0,"div",250),g("click",function(r){return c(e),m(r.stopPropagation())}),i(1,"div",251)(2,"span",101),a(3,"\u{1F4CB} \u5206\u914D\u89D2\u8272"),o()(),i(4,"div",252),F(5,Ir,8,3,"button",262,pe),o(),i(7,"div",254)(8,"button",263),g("click",function(){c(e);let r=d(4);return m(r.closeBackupDropdown())}),i(9,"span"),a(10,"\u26AA"),o(),i(11,"span"),a(12,"\u4FDD\u6301\u5099\u7528"),o()()()()}if(l&2){let e=d(4);s(5),A(e.availableRoleTypes)}}function Br(l,t){if(l&1){let e=y();i(0,"tr",180)(1,"td",241)(2,"div",8),R(3,"span",259),i(4,"span",186),a(5),o()()(),i(6,"td",241)(7,"span",242),a(8,"\u26AA \u5099\u7528\u5E33\u865F"),o()(),i(9,"td",176)(10,"span",260),a(11,"\u9592\u7F6E"),o()(),i(12,"td",245)(13,"div",246)(14,"button",261),g("click",function(r){let u=c(e).$implicit,p=d(3);return m(p.toggleBackupDropdown(u.id,r))}),a(15," \u5206\u914D "),i(16,"span"),a(17,"\u25BC"),o()(),h(18,Pr,13,0,"div",248),o()()()}if(l&2){let e=t.$implicit,n=d(3);s(5),_(e.phone),s(11),E("rotate-180",n.backupDropdownId()===e.id),s(2),b(n.backupDropdownId()===e.id?18:-1)}}function Vr(l,t){if(l&1&&(i(0,"div",181)(1,"div",264),a(2,"\u{1F4AC} \u958B\u5834\u767D\u9810\u89BD"),o(),i(3,"div",265),a(4),o()()),l&2){let e,n=d(3);s(4),x('"',(e=n.aiPlanResult())==null||e.recommendedRoles==null||e.recommendedRoles[0]==null?null:e.recommendedRoles[0].openingLine,'"')}}function Nr(l,t){l&1&&(i(0,"div",182)(1,"span",266),a(2,"\u{1F504} \u6B63\u5728\u667A\u80FD\u5339\u914D\u5E33\u865F..."),o()())}function Gr(l,t){if(l&1){let e=y();i(0,"div",267)(1,"span",7),a(2,"\u26A0\uFE0F"),o(),i(3,"div")(4,"div",269),a(5,"\u7121\u53EF\u7528\u5E33\u865F"),o(),i(6,"div",270),a(7," \u8ACB\u5148\u6DFB\u52A0 Telegram \u5E33\u865F\u4E26\u8A2D\u7F6E\u70BA AI \u89D2\u8272\uFF0C\u624D\u80FD\u57F7\u884C\u591A\u89D2\u8272\u5354\u4F5C\u3002 "),o(),i(8,"div",104)(9,"button",271),g("click",function(){c(e);let r=d(4);return m(r.goToAccountManagement())}),a(10," \u2795 \u6DFB\u52A0\u5E33\u865F "),o(),i(11,"button",272),g("click",function(){c(e);let r=d(4);return m(r.performAccountMatching())}),a(12," \u{1F504} \u91CD\u65B0\u5339\u914D "),o()()()()}}function $r(l,t){if(l&1){let e=y();i(0,"div",268),a(1," \u5339\u914D\u904E\u7A0B\u51FA\u932F\uFF0C\u8ACB\u91CD\u8A66 "),i(2,"button",273),g("click",function(){c(e);let r=d(4);return m(r.performAccountMatching())}),a(3," \u{1F504} \u91CD\u65B0\u5339\u914D "),o()()}}function Lr(l,t){if(l&1&&(i(0,"div",183),h(1,Gr,13,0,"div",267)(2,$r,4,0,"div",268),o()),l&2){let e=d(3);s(),b(e.matchFailureReason()==="no_accounts"?1:2)}}function jr(l,t){l&1&&(i(0,"div",184)(1,"div",274)(2,"span"),a(3,"\u{1F504}"),o(),i(4,"span"),a(5,"\u4E00\u865F\u591A\u89D2\u6A21\u5F0F\u5DF2\u555F\u7528"),o()(),i(6,"div",275),a(7," \u5E33\u865F\u6578\u91CF\u4E0D\u8DB3\uFF0C\u540C\u4E00\u5E33\u865F\u5C07\u8F2A\u63DB\u626E\u6F14\u591A\u500B\u89D2\u8272 "),o()())}function Ur(l,t){if(l&1&&(i(0,"div",280)(1,"div",281),a(2,"\u{1F4AC} \u8A71\u8853\u9810\u89BD"),o(),i(3,"div",265),a(4),o()()),l&2){let e=d().$implicit;s(4),x('"',e.scriptPreview,'"')}}function Wr(l,t){if(l&1&&(i(0,"div",277)(1,"div",60)(2,"div",278),a(3),o(),i(4,"div",257)(5,"div",218),a(6),o(),i(7,"div",279),a(8),o()()(),h(9,Ur,5,1,"div",280),o()),l&2){let e=t.$implicit;s(3),x(" ",e.step," "),s(3),_(e.action),s(2),x("\u57F7\u884C\u8005: ",e.role),s(),b(e.scriptPreview?9:-1)}}function qr(l,t){if(l&1&&(i(0,"div")(1,"h4",148),a(2,"\u{1F3AC} \u57F7\u884C\u6D41\u7A0B"),o(),i(3,"div",276),F(4,Wr,10,4,"div",277,vo),o()()),l&2){let e,n=d(3);s(4),A((e=n.aiPlanResult())==null?null:e.suggestedFlow)}}function Or(l,t){l&1&&(i(0,"div",185)(1,"h4",282),a(2,"\u{1F916} \u7121\u5287\u672C\u6A21\u5F0F\u7279\u6027"),o(),i(3,"ul",283)(4,"li"),a(5,"\u2022 AI \u6839\u64DA\u5C0D\u8A71\u4E0A\u4E0B\u6587\u5373\u6642\u751F\u6210\u56DE\u8986"),o(),i(6,"li"),a(7,"\u2022 \u6BCF 10 \u689D\u6D88\u606F\u81EA\u52D5\u5206\u6790\u5BA2\u6236\u8208\u8DA3\u548C\u60C5\u7DD2"),o(),i(8,"li"),a(9,"\u2022 \u667A\u80FD\u5207\u63DB\u89D2\u8272\u548C\u8ABF\u6574\u7B56\u7565"),o(),i(10,"li"),a(11,"\u2022 \u6AA2\u6E2C\u5230\u8F49\u5316\u4FE1\u865F\u81EA\u52D5\u5207\u63DB\u92B7\u552E\u6A21\u5F0F"),o()()())}function Hr(l,t){if(l&1&&(i(0,"div",188),a(1),o()),l&2){let e,n=d(3);s(),x(" \u{1F4CA} ",(e=n.aiPlanResult())==null?null:e.successRateReason," ")}}function zr(l,t){if(l&1){let e=y();i(0,"div",127),h(1,tr,18,4,"div",140),i(2,"div",141)(3,"div",142)(4,"div",143)(5,"span"),a(6,"\u2713"),o(),i(7,"span",144),a(8,"\u7B56\u5283\u5B8C\u6210\uFF01"),o()(),h(9,nr,2,0,"span",145)(10,ir,2,0,"span",146),o(),i(11,"p",147),a(12),o()(),i(13,"div")(14,"h4",148),a(15,"\u{1F3AF} \u9078\u64C7\u5354\u4F5C\u5834\u666F"),o(),i(16,"div",130)(17,"button",149),g("click",function(){c(e);let r=d(2);return m(r.selectedChatScenario.set("private"))}),i(18,"div",150)(19,"span",7),a(20,"\u{1F4AC}"),o(),i(21,"div")(22,"div",134),a(23,"\u79C1\u804A\u6A21\u5F0F"),o(),i(24,"div",101),a(25,"1v1 \u5C0D\u8A71"),o()()(),i(26,"ul",151)(27,"li"),a(28,"\u2022 \u55AE\u4E00\u89D2\u8272\u8207\u5BA2\u6236\u5C0D\u8A71"),o(),i(29,"li"),a(30,"\u2022 \u9069\u5408\u9996\u6B21\u63A5\u89F8\u3001\u5FEB\u901F\u7BE9\u9078"),o(),i(31,"li"),a(32,"\u2022 \u4F4E\u6210\u672C\u6279\u91CF\u89F8\u9054"),o()(),i(33,"div",152),a(34," \u9700\u8981\u5E33\u865F\uFF1A1 \u500B "),o()(),i(35,"button",149),g("click",function(){c(e);let r=d(2);return m(r.selectedChatScenario.set("group"))}),i(36,"div",150)(37,"span",7),a(38,"\u{1F465}"),o(),i(39,"div")(40,"div",134),a(41,"\u7FA4\u804A\u5354\u4F5C"),o(),i(42,"div",153),a(43,"\u591A\u89D2\u8272\u5354\u540C"),o()()(),i(44,"ul",151)(45,"li"),a(46,"\u2022 \u5EFA\u7FA4\u9080\u8ACB\u5BA2\u6236 + \u591A\u89D2\u8272"),o(),i(47,"li"),a(48,"\u2022 \u89D2\u8272\u5206\u5DE5\u5354\u4F5C\u670D\u52D9"),o(),i(49,"li"),a(50,"\u2022 \u9AD8\u8F49\u5316\u6DF1\u5EA6\u71DF\u92B7"),o()(),i(51,"div",154),a(52),h(53,or,2,0,"span",155),o()()(),h(54,rr,8,2,"div",156),h(55,ar,18,0,"div",157),o(),i(56,"div")(57,"h4",148),a(58,"\u2699\uFE0F AI \u5C0D\u8A71\u6A21\u5F0F"),o(),i(59,"div",130)(60,"button",158),g("click",function(){c(e);let r=d(2);return m(r.selectedExecutionMode.set("hybrid"))}),i(61,"div",159)(62,"span"),a(63,"\u{1F4CB}"),o(),i(64,"span",71),a(65,"\u5F15\u5C0E\u5F0F"),o(),i(66,"span",160),a(67,"\u63A8\u85A6"),o()(),i(68,"p",101),a(69,"\u9810\u8A2D\u8A71\u8853 + AI \u9748\u6D3B\u88DC\u5145"),o()(),i(70,"button",158),g("click",function(){c(e);let r=d(2);return m(r.selectedExecutionMode.set("scriptless"))}),i(71,"div",159)(72,"span"),a(73,"\u{1F916}"),o(),i(74,"span",71),a(75,"\u7D14 AI"),o()(),i(76,"p",101),a(77,"\u6BCF\u689D\u6D88\u606F\u5373\u6642\u751F\u6210"),o()()()(),i(78,"div")(79,"h4",148),a(80,"\u{1F464} \u9078\u64C7\u71DF\u92B7\u76EE\u6A19"),o(),i(81,"div",161),h(82,lr,12,0,"div",162)(83,dr,12,2),o()(),i(84,"div",163)(85,"button",164),g("click",function(){c(e);let r=d(2);return m(r.showAdvancedAccountSettings.set(!r.showAdvancedAccountSettings()))}),i(86,"div",8)(87,"span"),a(88,"\u{1F465}"),o(),i(89,"span",71),a(90,"\u5E33\u865F\u914D\u7F6E"),o(),h(91,cr,2,0,"span",165)(92,mr,2,1,"span",166),o(),i(93,"span",167),a(94),o()(),h(95,br,26,16,"div",168),o(),i(96,"div")(97,"div",78)(98,"h4",55),a(99),o(),h(100,yr,2,0,"button",169),o(),h(101,Sr,17,1,"div",170),i(102,"div",171)(103,"table",172)(104,"thead",173)(105,"tr",174)(106,"th",175),a(107,"\u5E33\u865F"),o(),i(108,"th",175),a(109,"\u89D2\u8272"),o(),i(110,"th",176),a(111,"\u72C0\u614B"),o(),i(112,"th",177),a(113,"\u64CD\u4F5C"),o()()(),i(114,"tbody",178),F(115,Rr,24,8,"tr",179,he),F(117,Br,19,4,"tr",180,pe),o()()(),h(119,Vr,5,1,"div",181),h(120,Nr,3,0,"div",182),h(121,Lr,3,1,"div",183),h(122,jr,8,0,"div",184),o(),h(123,qr,6,0,"div"),h(124,Or,12,0,"div",185),i(125,"div",161)(126,"div",4)(127,"span",186),a(128,"\u9810\u4F30\u6210\u529F\u7387"),o(),i(129,"span",187),a(130),o()(),h(131,Hr,2,1,"div",188),o()()}if(l&2){let e,n,r,u,p,f,S,M,k,U,w=d(2);s(),b((e=w.aiPlanResult())!=null&&e.goalAnalysis?1:-1),s(8),b(w.aiPlanningSource()==="ai"?9:w.aiPlanningSource()==="template"?10:-1),s(3),_((n=w.aiPlanResult())==null?null:n.strategy),s(5),E("border-blue-500",w.selectedChatScenario()==="private")("bg-blue-500/10",w.selectedChatScenario()==="private")("border-slate-700",w.selectedChatScenario()!=="private")("bg-slate-800",w.selectedChatScenario()!=="private"),s(18),E("border-green-500",w.selectedChatScenario()==="group")("bg-green-500/10",w.selectedChatScenario()==="group")("border-slate-700",w.selectedChatScenario()!=="group")("bg-slate-800",w.selectedChatScenario()!=="group"),s(16),E("text-green-400",w.hasEnoughAccounts())("text-amber-400",!w.hasEnoughAccounts()),s(),x(" \u9700\u8981\u5E33\u865F\uFF1A",w.requiredAccountsForGroup()," \u500B "),s(),b(!w.hasEnoughAccounts()&&w.selectedChatScenario()==="group"?53:-1),s(),b(w.isGroupChatMode()&&!w.hasEnoughAccounts()?54:-1),s(),b(w.isGroupChatMode()&&w.hasEnoughAccounts()?55:-1),s(5),E("border-cyan-500",w.selectedExecutionMode()==="hybrid")("bg-cyan-500/10",w.selectedExecutionMode()==="hybrid")("border-slate-700",w.selectedExecutionMode()!=="hybrid")("bg-slate-800",w.selectedExecutionMode()!=="hybrid"),s(10),E("border-pink-500",w.selectedExecutionMode()==="scriptless")("bg-pink-500/10",w.selectedExecutionMode()==="scriptless")("border-slate-700",w.selectedExecutionMode()!=="scriptless")("bg-slate-800",w.selectedExecutionMode()!=="scriptless"),s(12),b(w.selectedTargetUsers().length===0?82:83),s(9),b(w.plannerAutoAssign()?91:92),s(3),_(w.showAdvancedAccountSettings()?"\u25B2":"\u25BC"),s(),b(w.showAdvancedAccountSettings()?95:-1),s(4),J("\u{1F465} \u89D2\u8272\u5206\u914D\u9810\u89BD (",w.getDisplayedRolesCount(),"/",w.plannerAccountCount()," \u5E33\u865F)"),s(),b(((r=w.aiPlanResult())==null||r.recommendedRoles==null?null:r.recommendedRoles.length)!==w.plannerAccountCount()?100:-1),s(),b(w.showAccountExplanation()?101:-1),s(14),A((u=w.aiPlanResult())==null?null:u.recommendedRoles),s(2),A(w.getBackupAccounts()),s(2),b(!((p=w.aiPlanResult())==null||p.recommendedRoles==null||p.recommendedRoles[0]==null)&&p.recommendedRoles[0].openingLine?119:-1),s(),b(w.accountMatchResults().length===0&&!w.matchFailureReason()?120:-1),s(),b(w.matchFailureReason()?121:-1),s(),b(w.matchMode()==="multi-role"&&w.accountMatchResults().length>0?122:-1),s(),b(w.selectedExecutionMode()!=="scriptless"?123:-1),s(),b(w.selectedExecutionMode()==="scriptless"?124:-1),s(5),E("text-green-400",(((f=w.aiPlanResult())==null?null:f.estimatedSuccessRate)||0)>=70)("text-amber-400",(((S=w.aiPlanResult())==null?null:S.estimatedSuccessRate)||0)>=40&&(((S=w.aiPlanResult())==null?null:S.estimatedSuccessRate)||0)<70)("text-red-400",(((M=w.aiPlanResult())==null?null:M.estimatedSuccessRate)||0)<40),s(),x(" ",(k=w.aiPlanResult())==null?null:k.estimatedSuccessRate,"% "),s(),b((U=w.aiPlanResult())!=null&&U.successRateReason?131:-1)}}function Qr(l,t){if(l&1){let e=y();i(0,"button",284),g("click",function(){c(e);let r=d(2);return m(r.closeAIPlanner())}),a(1," \u53D6\u6D88 "),o(),i(2,"button",285),g("click",function(){c(e);let r=d(2);return m(r.startAIPlanning())}),a(3," \u{1F916} \u958B\u59CB\u7B56\u5283 "),o()}if(l&2){let e=d(2);s(2),L("disabled",!e.aiPlannerGoal.trim())}}function Kr(l,t){if(l&1){let e=y();i(0,"button",288),g("click",function(){c(e);let r=d(3);return m(r.applyAIPlan())}),a(1," \u{1F4AC} \u958B\u59CB\u79C1\u804A "),o()}}function Yr(l,t){l&1&&(i(0,"span",290),a(1,"\u23F3"),o(),a(2," \u5275\u5EFA\u7FA4\u7D44\u4E2D... "))}function Jr(l,t){l&1&&(i(0,"span",291),a(1,"\u{1F4E8}"),o(),a(2," \u9080\u8ACB\u5BA2\u6236\u4E2D... "))}function Xr(l,t){l&1&&(i(0,"span",291),a(1,"\u{1F465}"),o(),a(2," \u9080\u8ACB\u89D2\u8272\u4E2D... "))}function Zr(l,t){l&1&&a(0," \u{1F465} \u958B\u59CB\u7FA4\u804A\u5354\u4F5C ")}function ea(l,t){if(l&1){let e=y();i(0,"button",289),g("click",function(){c(e);let r=d(3);return m(r.startGroupCollaboration())}),h(1,Yr,3,0)(2,Jr,3,0)(3,Xr,3,0)(4,Zr,1,0),o()}if(l&2){let e=d(3);L("disabled",!e.hasEnoughAccounts()||e.selectedTargetUsers().length===0),s(),b(e.groupCreationStatus()==="creating"?1:e.groupCreationStatus()==="inviting_target"?2:e.groupCreationStatus()==="inviting_roles"?3:4)}}function ta(l,t){if(l&1){let e=y();i(0,"button",284),g("click",function(){c(e);let r=d(2);return m(r.resetAIPlanner())}),a(1," \u91CD\u65B0\u7B56\u5283 "),o(),h(2,Kr,2,0,"button",286)(3,ea,5,2,"button",287)}if(l&2){let e=d(2);s(2),b(e.isPrivateChatMode()?2:3)}}function na(l,t){if(l&1){let e=y();i(0,"div",27)(1,"div",122)(2,"div",123)(3,"div",4)(4,"h2",32)(5,"span",7),a(6,"\u{1F916}"),o(),a(7," AI \u667A\u80FD\u7B56\u5283 "),o(),i(8,"button",124),g("click",function(){c(e);let r=d();return m(r.closeAIPlanner())}),a(9," \u2715 "),o()()(),i(10,"div",125),h(11,Qo,38,1),h(12,Yo,10,2,"div",126),h(13,zr,132,65,"div",127),o(),i(14,"div",128),h(15,Qr,4,1),h(16,ta,4,1),o()()()}if(l&2){let e=d();s(11),b(e.aiPlannerStatus()==="idle"?11:-1),s(),b(e.aiPlannerStatus()==="planning"?12:-1),s(),b(e.aiPlannerStatus()==="ready"&&e.aiPlanResult()?13:-1),s(2),b(e.aiPlannerStatus()==="idle"?15:-1),s(),b(e.aiPlannerStatus()==="ready"?16:-1)}}function ia(l,t){l&1&&(i(0,"span",310),a(1,"\u27F3"),o(),a(2," \u540C\u6B65\u4E2D... "))}function oa(l,t){l&1&&a(0," \u{1F504} \u540C\u6B65\u6578\u64DA ")}function ra(l,t){if(l&1){let e=y();i(0,"button",311),g("click",function(){c(e);let r=d(2);return m(r.clearSearchQuery())}),a(1," \u2715 "),o()}}function aa(l,t){l&1&&(i(0,"div",307)(1,"div",312),a(2,"\u{1F4ED}"),o(),i(3,"p"),a(4,"\u66AB\u7121\u53EF\u9078\u7528\u6236"),o(),i(5,"p",313),a(6,"\u8ACB\u5148\u5F9E\u7FA4\u7D44\u63D0\u53D6\u6210\u54E1\u6216\u5C0E\u5165\u806F\u7E6B\u4EBA"),o()())}function la(l,t){l&1&&(j(),i(0,"svg",317),R(1,"path",321),o())}function sa(l,t){if(l&1&&a(0),l&2){let e=d().$implicit;x(" ",e.lastName," ")}}function ua(l,t){if(l&1&&a(0),l&2){let e=d().$implicit;x(" @",e.username," \xB7 ")}}function da(l,t){if(l&1){let e=y();i(0,"div",315),g("click",function(){let r=c(e).$implicit,u=d(3);return m(u.toggleTargetUser(r))}),i(1,"div",316),h(2,la,2,0,":svg:svg",317),o(),i(3,"div",318),a(4),o(),i(5,"div",257)(6,"div",134),a(7),h(8,sa,1,1),o(),i(9,"div",101),h(10,ua,1,1),a(11),o()(),i(12,"div",319)(13,"div",320),a(14),o(),i(15,"div",14),a(16),o()()()}if(l&2){let e=t.$implicit,n=d(3);E("bg-purple-500/20",n.isUserSelected(e))("border-purple-500",n.isUserSelected(e))("bg-slate-700/50",!n.isUserSelected(e))("hover:bg-slate-700",!n.isUserSelected(e))("border",!0)("border-transparent",!n.isUserSelected(e)),s(),E("bg-purple-500",n.isUserSelected(e))("border-purple-500",n.isUserSelected(e))("border-slate-500",!n.isUserSelected(e)),s(),b(n.isUserSelected(e)?2:-1),s(2),x(" ",(e.firstName||e.username||"?")[0].toUpperCase()," "),s(3),x(" ",e.firstName||e.username||"Unknown"," "),s(),b(e.lastName?8:-1),s(2),b(e.username?10:-1),s(),x(" ID: ",e.telegramId," "),s(2),E("text-emerald-400",e.intentScore>=60)("text-amber-400",e.intentScore>=40&&e.intentScore<60)("text-slate-400",e.intentScore<40),s(),x(" ",e.intentScore,"\u5206 "),s(2),_(e.source)}}function ca(l,t){if(l&1&&(i(0,"div",308),F(1,da,17,32,"div",314,Pt),o()),l&2){let e=d(2);s(),A(e.filteredTargetUsers())}}function ma(l,t){if(l&1){let e=y();i(0,"div",24)(1,"div",292)(2,"div",293)(3,"div",294)(4,"div")(5,"h3",40)(6,"span"),a(7,"\u{1F464}"),o(),a(8," \u9078\u64C7\u71DF\u92B7\u76EE\u6A19\u7528\u6236 "),o(),i(9,"p",295),a(10,"\u5F9E\u767C\u9001\u63A7\u5236\u53F0\u540C\u6B65\u6700\u65B0\u7684\u76EE\u6A19\u5BA2\u6236\u6578\u64DA"),o()(),i(11,"button",296),g("click",function(){c(e);let r=d();return m(r.syncTargetUsersFromSendConsole())}),h(12,ia,3,0)(13,oa,1,0),o()()(),i(14,"div",297)(15,"div",298)(16,"div",299)(17,"input",300),$("ngModelChange",function(r){c(e);let u=d();return G(u.targetUserSearchQuery,r)||(u.targetUserSearchQuery=r),m(r)}),g("keyup.enter",function(){c(e);let r=d();return m(r.searchTargetUsers())}),o(),h(18,ra,2,0,"button",301),o(),i(19,"button",302),g("click",function(){c(e);let r=d();return m(r.searchTargetUsers())}),a(20," \u{1F50D} \u641C\u7D22 "),o(),i(21,"button",303),g("click",function(){c(e);let r=d();return m(r.toggleSelectAll())}),a(22),o()(),i(23,"div",304)(24,"button",305),g("click",function(){c(e);let r=d();return m(r.selectHighIntentUsers())}),a(25," \u2B50 \u9AD8\u610F\u5411 "),o(),i(26,"span",306),a(27),o()()(),i(28,"div",20),h(29,aa,7,0,"div",307)(30,ca,3,0,"div",308),o(),i(31,"div",128)(32,"button",284),g("click",function(){c(e);let r=d();return m(r.closeTargetUserSelector())}),a(33," \u53D6\u6D88 "),o(),i(34,"button",309),g("click",function(){c(e);let r=d();return m(r.confirmTargetUsers())}),a(35),o()()()()}if(l&2){let e=d();s(11),L("disabled",e.isSyncingTargetUsers()),s(),b(e.isSyncingTargetUsers()?12:13),s(5),N("ngModel",e.targetUserSearchQuery),s(),b(e.targetUserSearchQuery?18:-1),s(4),x(" ",e.isAllSelected()?"\u53D6\u6D88\u5168\u9078":"\u5168\u9078"," "),s(5),x(" \u5DF2\u9078: ",e.selectedTargetUsers().length," \u500B "),s(2),b(e.filteredTargetUsers().length===0?29:30),s(5),L("disabled",e.selectedTargetUsers().length===0),s(),x(" \u78BA\u8A8D\u9078\u64C7 (",e.selectedTargetUsers().length,") ")}}function pa(l,t){if(l&1){let e=y();i(0,"div",24)(1,"div",322)(2,"h3",323)(3,"span"),a(4,"\u{1F4DC}"),o(),a(5," \u65B0\u5EFA\u5287\u672C "),o(),i(6,"div",47)(7,"div")(8,"label",91),a(9,"\u5287\u672C\u540D\u7A31 *"),o(),i(10,"input",324),$("ngModelChange",function(r){c(e);let u=d();return G(u.newScriptName,r)||(u.newScriptName=r),m(r)}),o()(),i(11,"div")(12,"label",91),a(13,"\u5287\u672C\u63CF\u8FF0"),o(),i(14,"textarea",325),$("ngModelChange",function(r){c(e);let u=d();return G(u.newScriptDescription,r)||(u.newScriptDescription=r),m(r)}),a(15,"                "),o()(),i(16,"div")(17,"label",91),a(18,"\u6216\u5F9E\u6A21\u677F\u5275\u5EFA"),o(),i(19,"div",224)(20,"button",326),g("click",function(){c(e);let r=d();return m(r.createFromTemplate("high_intent"))}),i(21,"div",132),a(22,"\u{1F3AF}"),o(),i(23,"div",218),a(24,"\u9AD8\u610F\u5411\u8F49\u5316"),o()(),i(25,"button",326),g("click",function(){c(e);let r=d();return m(r.createFromTemplate("product_demo"))}),i(26,"div",132),a(27,"\u{1F4E6}"),o(),i(28,"div",218),a(29,"\u7522\u54C1\u6F14\u793A"),o()(),i(30,"button",326),g("click",function(){c(e);let r=d();return m(r.createFromTemplate("customer_support"))}),i(31,"div",132),a(32,"\u{1F527}"),o(),i(33,"div",218),a(34,"\u552E\u5F8C\u670D\u52D9"),o()(),i(35,"button",326),g("click",function(){c(e);let r=d();return m(r.createFromTemplate("community"))}),i(36,"div",132),a(37,"\u{1F389}"),o(),i(38,"div",218),a(39,"\u793E\u7FA4\u6D3B\u8E8D"),o()()()()(),i(40,"div",114)(41,"button",115),g("click",function(){c(e);let r=d();return m(r.cancelAddScript())}),a(42," \u53D6\u6D88 "),o(),i(43,"button",327),g("click",function(){c(e);let r=d();return m(r.confirmAddScript())}),a(44," \u5275\u5EFA\u5287\u672C "),o()()()()}if(l&2){let e=d();s(10),N("ngModel",e.newScriptName),s(4),N("ngModel",e.newScriptDescription),s(29),L("disabled",!e.newScriptName.trim())}}var tt={":payment:":"\u{1F4B3}",":money:":"\u{1F4B0}",":dollar:":"\u{1F4B5}",":credit_card:":"\u{1F4B3}",":moneybag:":"\u{1F4B0}",":chart:":"\u{1F4CA}",":briefcase:":"\u{1F4BC}",":handshake:":"\u{1F91D}",":star:":"\u2B50",":heart:":"\u2764\uFE0F",":fire:":"\u{1F525}",":rocket:":"\u{1F680}",":crown:":"\u{1F451}",":trophy:":"\u{1F3C6}",":phone:":"\u{1F4DE}",":headphone:":"\u{1F3A7}",":headphones:":"\u{1F3A7}",":wrench:":"\u{1F527}",":gear:":"\u2699\uFE0F",":speech_balloon:":"\u{1F4AC}",":bulb:":"\u{1F4A1}",":lightbulb:":"\u{1F4A1}",":target:":"\u{1F3AF}",":dart:":"\u{1F3AF}",":man_office_worker:":"\u{1F468}\u200D\u{1F4BC}",":woman_office_worker:":"\u{1F469}\u200D\u{1F4BC}",":person:":"\u{1F464}",":people:":"\u{1F465}",":smile:":"\u{1F60A}",":thumbsup:":"\u{1F44D}",":ok_hand:":"\u{1F44C}",":wave:":"\u{1F44B}",":clipboard:":"\u{1F4CB}",":memo:":"\u{1F4DD}",":book:":"\u{1F4DA}",":graduation_cap:":"\u{1F393}",":sparkles:":"\u2728",":party_popper:":"\u{1F389}",":gift:":"\u{1F381}",":house:":"\u{1F3E0}",":office:":"\u{1F3E2}",":bank:":"\u{1F3E6}",":shopping_cart:":"\u{1F6D2}",":package:":"\u{1F4E6}",":truck:":"\u{1F69A}",":clock:":"\u23F0",":calendar:":"\u{1F4C5}",":lock:":"\u{1F512}",":key:":"\u{1F511}",":shield:":"\u{1F6E1}\uFE0F",":check:":"\u2705",":x:":"\u274C",":warning:":"\u26A0\uFE0F",":question:":"\u2753",":info:":"\u2139\uFE0F"};function ga(l,t="\u{1F4BC}"){if(!l)return t;if(!/^[\x00-\x7F]*$/.test(l)&&!l.includes(":"))return l;let e=l.toLowerCase().trim();if(tt[e])return tt[e];let n=e.match(/^:([a-z_]+):$/);if(n){let r=`:${n[1]}:`;if(tt[r])return tt[r]}return l.startsWith(":")&&l.endsWith(":")?(console.warn(`[MultiRole] \u672A\u8B58\u5225\u7684 emoji shortcode: ${l}\uFF0C\u4F7F\u7528\u9ED8\u8A8D\u503C`),t):l}function xa(l){return Array.isArray(l)?l.map(t=>B(T({},t),{icon:ga(t.icon,"\u{1F4BC}")})):[]}var nt=class l{constructor(){this.Math=Math;this.multiRoleService=I(de);this.autoGroupService=I(Ee);this.executorService=I(Te);this.dynamicEngine=I(We);this.orchestrator=I(qe);this.toast=I(xe);this.contactsService=I(bt);this.accountService=I(Ue);this.ipc=I(ie);this.ipcCleanup=[];this.activeTab=D("dashboard");this.showAddRole=D(!1);this.showCreateGroupDialog=D(!1);this.showTargetUserSelector=D(!1);this.selectedTargetUsers=D([]);this.targetUserSearchQuery="";this.isSyncingTargetUsers=D(!1);this.availableTargetUsers=P(()=>this.contactsService.contacts().filter(e=>e.telegram_id).map(e=>({id:e.id?.toString()||e.telegram_id,telegramId:e.telegram_id,username:e.username,firstName:e.display_name?.split(" ")[0]||e.first_name||e.username,lastName:e.display_name?.split(" ")[1]||e.last_name,intentScore:this.calculateContactIntent(e),source:e.source_type||"contacts"})).sort((e,n)=>n.intentScore-e.intentScore));this.filteredTargetUsers=P(()=>{let t=this.targetUserSearchQuery.toLowerCase().trim(),e=this.availableTargetUsers();return t?e.filter(n=>n.username?.toLowerCase().includes(t)||n.firstName?.toLowerCase().includes(t)||n.telegramId?.includes(t)).slice(0,50):e.slice(0,50)});this.showRoleEditor=D(!1);this.editingRole=D(null);this.showScriptEditor=D(!1);this.editingScript=D(null);this.tabs=[{id:"dashboard",icon:"\u{1F4CA}",label:"\u76E3\u63A7\u4E2D\u5FC3"},{id:"library",icon:"\u{1F4DA}",label:"\u89D2\u8272\u5EAB (50+)"},{id:"roles",icon:"\u{1F3AD}",label:"\u6211\u7684\u89D2\u8272"},{id:"scenarios",icon:"\u{1F3AC}",label:"\u5834\u666F\u6A21\u677F"},{id:"scripts",icon:"\u{1F4DC}",label:"\u5287\u672C\u7DE8\u6392"},{id:"groups",icon:"\u{1F3E0}",label:"\u5354\u4F5C\u7FA4\u7D44"},{id:"workflow",icon:"\u{1F504}",label:"\u5DE5\u4F5C\u6D41"},{id:"monitor",icon:"\u{1F4C8}",label:"\u57F7\u884C\u76E3\u63A7"},{id:"analytics",icon:"\u{1F4C9}",label:"\u6578\u64DA\u5206\u6790"},{id:"settings",icon:"\u2699\uFE0F",label:"\u8A2D\u7F6E"}];this.roleTypes=Object.entries(re).filter(([t])=>t!=="custom").map(([t,e])=>T({id:t},e));this.availableAccounts=P(()=>[]);this.newRoleType=D("expert");this.newRoleName="";this.newRoleDescription="";this.newRolePrompt="";this.showAIPlannerDialog=D(!1);this.aiPlannerGoal="";this.aiPlannerStatus=D("idle");this.aiPlanningProgress=D("AI \u6B63\u5728\u5206\u6790\u60A8\u7684\u76EE\u6A19...");this.aiPlanningElapsed=D(0);this.plannerAccountCount=D(3);this.plannerSelectedAccounts=D([]);this.plannerAccountRoles=D(new Map);this.plannerAutoAssign=D(!0);this.showAccountExplanation=D(!1);this.roleChangeModalIndex=D(-1);this.backupDropdownId=D(-1);this.DRAFT_STORAGE_KEY="aiPlannerDraft";this.hasDraft=D(!1);this.availableRoleTypes=[{id:"consultant",name:"\u652F\u4ED8\u9867\u554F",icon:"\u{1F4BC}",desc:"\u8CA0\u8CAC\u6838\u5FC3\u71DF\u92B7"},{id:"expert",name:"\u6280\u8853\u5C08\u5BB6",icon:"\u{1F527}",desc:"\u89E3\u7B54\u6280\u8853\u554F\u984C"},{id:"oldcustomer",name:"\u8001\u5BA2\u6236",icon:"\u{1F464}",desc:"\u63D0\u4F9B\u771F\u5BE6\u9AD4\u9A57"},{id:"support",name:"\u5BA2\u670D",icon:"\u{1F3A7}",desc:"\u89E3\u6C7A\u552E\u5F8C\u554F\u984C"},{id:"manager",name:"\u7D93\u7406",icon:"\u{1F454}",desc:"\u8655\u7406\u7279\u6B8A\u60C5\u6CC1"},{id:"atmosphere",name:"\u6C23\u6C1B\u7D44",icon:"\u{1F389}",desc:"\u6D3B\u8E8D\u7FA4\u7D44\u6C23\u6C1B"}];this.showAdvancedAccountSettings=D(!1);this.selectedExecutionMode=D("hybrid");this.selectedChatScenario=D("private");this.availableAccountCount=P(()=>this.accountService.accounts().filter(e=>e.status==="Online").length);this.isPrivateChatMode=P(()=>this.selectedChatScenario()==="private");this.isGroupChatMode=P(()=>this.selectedChatScenario()==="group");this.requiredAccountsForGroup=P(()=>this.aiPlanResult()?.recommendedRoles?.length||2);this.hasEnoughAccounts=P(()=>{let t=this.availableAccountCount(),e=this.isPrivateChatMode()?1:this.requiredAccountsForGroup();return t>=e});this.groupCreationStatus=D("idle");this.groupCreationProgress=D("");this.createdGroupId=D(null);this.accountMatchResults=D([]);this.aiPlanResult=D(null);this.autoGroupNameTemplate="VIP\u5C08\u5C6C\u670D\u52D9\u7FA4 - {\u5BA2\u6236\u540D}";this.inviteMessage="\u70BA\u4E86\u66F4\u597D\u5730\u670D\u52D9\u60A8\uFF0C\u6211\u5011\u7279\u5225\u5EFA\u7ACB\u4E86VIP\u7FA4\uFF01";this.maxConcurrent=5;this.autoCloseDays=7;this.intentThreshold=70;this.minRounds=3;this.requirePriceInquiry=!1;this.useAICenter=!0;this.coordinationMode="sequential";this.showNewScriptDialog=D(!1);this.newScriptName="";this.newScriptDescription="";this.aiPlanningSource=D(null);this.matchFailureReason=D(null);this.matchMode=D("normal")}onDocumentClick(t){this.roleChangeModalIndex.set(-1),this.backupDropdownId.set(-1)}ngOnInit(){this.checkIncomingTargetUsers(),this.ipcCleanup.push(this.ipc.on("multi-role:open-ai-planner",t=>{console.log("[MultiRoleCenter] \u6536\u5230\u76EE\u6A19\u7528\u6236:",t.targetUsers?.length),t.targetUsers&&t.targetUsers.length>0&&(this.selectedTargetUsers.set(t.targetUsers),this.openAIPlanner(),this.toast.info(`\u5DF2\u52A0\u8F09 ${t.targetUsers.length} \u500B\u76EE\u6A19\u7528\u6236`))}))}ngOnDestroy(){this.ipcCleanup.forEach(t=>t())}checkIncomingTargetUsers(){let t=sessionStorage.getItem("multiRoleTargetUsers");if(t)try{let e=JSON.parse(t);e.length>0&&(this.selectedTargetUsers.set(e),sessionStorage.removeItem("multiRoleTargetUsers"),setTimeout(()=>{this.openAIPlanner(),this.toast.info(`\u5DF2\u52A0\u8F09 ${e.length} \u500B\u76EE\u6A19\u7528\u6236\uFF0C\u8ACB\u958B\u59CB\u7B56\u5283`)},300))}catch(e){console.error("[MultiRoleCenter] \u89E3\u6790\u76EE\u6A19\u7528\u6236\u5931\u6557:",e)}}getRoleIcon(t){return re[t]?.icon||"\u{1F3AD}"}getRoleStyleLabel(t){return{professional:"\u5C08\u696D\u6B63\u5F0F",friendly:"\u53CB\u597D\u89AA\u5207",casual:"\u8F15\u9B06\u96A8\u610F",enthusiastic:"\u71B1\u60C5",careful:"\u8B39\u614E",curious:"\u597D\u5947"}[t]||t}quickAddRole(t){let e=re[t];this.multiRoleService.addRole({name:e.label,type:t,personality:{description:e.description,speakingStyle:e.defaultStyle,traits:[]},aiConfig:{useGlobalAI:!0,customPrompt:e.defaultPrompt,responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:[]})}saveNewRole(){let t=this.newRoleType(),e=re[t];this.multiRoleService.addRole({name:this.newRoleName||e.label,type:t,personality:{description:this.newRoleDescription||e.description,speakingStyle:e.defaultStyle,traits:[]},aiConfig:{useGlobalAI:!0,customPrompt:this.newRolePrompt||e.defaultPrompt,responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:[]}),this.showAddRole.set(!1),this.newRoleName="",this.newRoleDescription="",this.newRolePrompt=""}editRole(t){this.editingRole.set(t),this.showRoleEditor.set(!0)}openNewRoleEditor(){this.editingRole.set(null),this.showRoleEditor.set(!0)}onRoleSaved(t){this.showRoleEditor.set(!1),this.editingRole.set(null),this.showAddRole.set(!1)}onRoleEditorCancelled(){this.showRoleEditor.set(!1),this.editingRole.set(null)}deleteRole(t){confirm(`\u78BA\u5B9A\u8981\u522A\u9664\u89D2\u8272\u300C${t.name}\u300D\u55CE\uFF1F`)&&this.multiRoleService.deleteRole(t.id)}openNewScriptEditor(){this.editingScript.set(null),this.showScriptEditor.set(!0)}editScript(t){this.editingScript.set(t),this.showScriptEditor.set(!0)}onScriptSaved(t){this.showScriptEditor.set(!1),this.editingScript.set(null)}onScriptEditorCancelled(){this.showScriptEditor.set(!1),this.editingScript.set(null)}deleteScript(t){confirm(`\u78BA\u5B9A\u8981\u522A\u9664\u5287\u672C\u300C${t.name}\u300D\u55CE\uFF1F`)&&this.multiRoleService.deleteScript(t.id)}onPresetRoleAdded(t){this.multiRoleService.addRole({name:t.name,type:t.type,personality:t.personality,aiConfig:t.aiConfig,responsibilities:t.responsibilities}),this.activeTab.set("roles")}onPresetRoleEdit(t){let e=this.multiRoleService.addRole({name:t.name,type:t.type,personality:t.personality,aiConfig:t.aiConfig,responsibilities:t.responsibilities});if(e){let n=this.multiRoleService.roles().find(r=>r.id===e);n&&this.editRole(n)}}onScenarioApplied(t){t.roles.forEach(e=>{let r=(window.PRESET_ROLES||[]).find(u=>u.roleType===e.roleType);r&&this.multiRoleService.addRole({name:r.name,type:r.type,personality:r.personality,aiConfig:r.aiConfig,responsibilities:r.responsibilities})}),this.multiRoleService.addScript({name:t.name,description:t.description,scenario:t.type}),this.activeTab.set("scripts")}pauseGroup(t){this.autoGroupService.pauseGroup(t.id),this.executorService.pauseExecution(t.id)}resumeGroup(t){this.autoGroupService.resumeGroup(t.id),this.executorService.resumeExecution(t.id)}markGroupConverted(t){this.autoGroupService.markAsConverted(t.id)}addScript(){this.newScriptName="",this.newScriptDescription="",this.showNewScriptDialog.set(!0)}confirmAddScript(){if(this.newScriptName.trim()){let t=this.multiRoleService.addScript({name:this.newScriptName.trim(),description:this.newScriptDescription.trim()});if(this.showNewScriptDialog.set(!1),t){let e=this.multiRoleService.scripts().find(n=>n.id===t);e&&this.editScript(e)}}}cancelAddScript(){this.showNewScriptDialog.set(!1)}useTemplate(t){this.createFromTemplate(t)}createFromTemplate(t){let n={high_intent:{name:"\u9AD8\u610F\u5411\u5BA2\u6236\u8F49\u5316",description:"\u5C08\u5BB6\u4ECB\u7D39 + \u8001\u5BA2\u6236\u80CC\u66F8 + \u5BA2\u670D\u4FC3\u55AE\u7684\u7D93\u5178\u8F49\u5316\u6D41\u7A0B",stages:[{id:"stage_1",name:"\u5C08\u696D\u4ECB\u7D39",order:1,trigger:{type:"manual"},messages:[]},{id:"stage_2",name:"\u8001\u5BA2\u6236\u80CC\u66F8",order:2,trigger:{type:"time",delaySeconds:120},messages:[]},{id:"stage_3",name:"\u4FC3\u55AE\u8DDF\u9032",order:3,trigger:{type:"message"},messages:[]}]},product_demo:{name:"\u7522\u54C1\u6F14\u793A\u63A8\u85A6",description:"\u529F\u80FD\u5C55\u793A + \u4F7F\u7528\u5834\u666F + \u6548\u679C\u5206\u4EAB\u7684\u7522\u54C1\u63A8\u4ECB\u6D41\u7A0B",stages:[{id:"stage_1",name:"\u529F\u80FD\u5C55\u793A",order:1,trigger:{type:"manual"},messages:[]},{id:"stage_2",name:"\u5834\u666F\u61C9\u7528",order:2,trigger:{type:"time",delaySeconds:180},messages:[]},{id:"stage_3",name:"\u6548\u679C\u898B\u8B49",order:3,trigger:{type:"time",delaySeconds:120},messages:[]}]},customer_support:{name:"\u552E\u5F8C\u554F\u984C\u8655\u7406",description:"\u554F\u984C\u8A18\u9304 + \u6280\u8853\u6392\u67E5 + \u6EFF\u610F\u5EA6\u78BA\u8A8D\u7684\u552E\u5F8C\u670D\u52D9\u6D41\u7A0B",stages:[{id:"stage_1",name:"\u554F\u984C\u8A18\u9304",order:1,trigger:{type:"message"},messages:[]},{id:"stage_2",name:"\u6280\u8853\u6392\u67E5",order:2,trigger:{type:"time",delaySeconds:60},messages:[]},{id:"stage_3",name:"\u6EFF\u610F\u78BA\u8A8D",order:3,trigger:{type:"time",delaySeconds:300},messages:[]}]},community:{name:"\u793E\u7FA4\u6D3B\u8E8D\u5F15\u5C0E",description:"\u8A71\u984C\u767C\u8D77 + \u4E92\u52D5\u97FF\u61C9 + \u50F9\u503C\u7E3D\u7D50\u7684\u793E\u7FA4\u904B\u71DF\u6D41\u7A0B",stages:[{id:"stage_1",name:"\u8A71\u984C\u767C\u8D77",order:1,trigger:{type:"time"},messages:[]},{id:"stage_2",name:"\u4E92\u52D5\u97FF\u61C9",order:2,trigger:{type:"time",delaySeconds:60},messages:[]},{id:"stage_3",name:"\u50F9\u503C\u7E3D\u7D50",order:3,trigger:{type:"time",delaySeconds:300},messages:[]}]}}[t];if(n){let r=this.multiRoleService.addScript({name:n.name,description:n.description,stages:n.stages});if(this.showNewScriptDialog.set(!1),r){let u=this.multiRoleService.scripts().find(p=>p.id===r);u&&this.editScript(u)}}}openAIPlanner(){this.restoreDraft()?this.toast.info("\u{1F4CB} \u5DF2\u6062\u5FA9\u4E0A\u6B21\u672A\u5B8C\u6210\u7684\u7B56\u5283"):(this.aiPlannerGoal="",this.plannerAccountCount.set(3),this.plannerSelectedAccounts.set([]),this.plannerAccountRoles.set(new Map),this.plannerAutoAssign.set(!0)),this.aiPlannerStatus.set("idle"),this.aiPlanResult.set(null),this.showAIPlannerDialog.set(!0),setTimeout(()=>{this.goalInput?.nativeElement?.focus()},100)}closeAIPlanner(){(this.aiPlannerGoal.trim()||this.selectedTargetUsers().length>0)&&(this.saveDraft(),this.toast.info("\u{1F4BE} \u8349\u7A3F\u5DF2\u81EA\u52D5\u4FDD\u5B58")),this.showAIPlannerDialog.set(!1)}quickAIPlan(t){this.aiPlannerGoal=t,this.openAIPlanner(),setTimeout(()=>this.startAIPlanning(),100)}async startAIPlanning(){if(!this.aiPlannerGoal.trim())return;this.aiPlannerStatus.set("planning"),this.aiPlanningSource.set(null);let t=await this.callAIForPlanning(this.aiPlannerGoal);t?(this.aiPlanningSource.set("ai"),this.toast.success("\u{1F916} AI \u7B56\u5283\u5B8C\u6210\uFF01")):(console.log("[MultiRole] AI \u8ABF\u7528\u5931\u6557\uFF0C\u4F7F\u7528\u6A21\u677F\u56DE\u9000"),t=this.getFallbackPlanByKeywords(this.aiPlannerGoal),this.aiPlanningSource.set("template"),this.toast.warning("\u26A0\uFE0F AI \u670D\u52D9\u66AB\u4E0D\u53EF\u7528\uFF0C\u5DF2\u4F7F\u7528\u667A\u80FD\u6A21\u677F\u7B56\u7565")),this.aiPlanResult.set(t),await this.performAccountMatching()}resetAIPlanner(){this.aiPlannerStatus.set("idle"),this.aiPlanResult.set(null),this.accountMatchResults.set([]),this.aiPlanningSource.set(null),this.plannerSelectedAccounts.set([]),this.plannerAccountRoles.set(new Map),this.showAdvancedAccountSettings.set(!1)}onAccountCountChange(t){let e=parseInt(t.target.value,10);this.plannerAccountCount.set(e),this.saveDraft()}toggleAccountSelection(t){let e=this.plannerSelectedAccounts(),n=this.plannerAccountCount();if(e.includes(t)){this.plannerSelectedAccounts.set(e.filter(u=>u!==t));let r=new Map(this.plannerAccountRoles());r.delete(t),this.plannerAccountRoles.set(r)}else{if(e.length>=n){this.toast.warning(`\u6700\u591A\u9078\u64C7 ${n} \u500B\u5E33\u865F`);return}this.plannerSelectedAccounts.set([...e,t])}this.saveDraft()}selectAllOnlineAccounts(){let t=this.accountService.accounts().filter(e=>e.status==="Online").slice(0,this.plannerAccountCount()).map(e=>e.id);this.plannerSelectedAccounts.set(t),this.saveDraft()}onAccountRoleChange(t,e){let n=e.target.value,r=new Map(this.plannerAccountRoles());n?r.set(t,n):r.delete(t),this.plannerAccountRoles.set(r),this.saveDraft()}getAccountPhone(t){return this.accountService.accounts().find(n=>n.id===t)?.phone||"\u672A\u77E5"}getAssignedRoleName(t){let e=this.plannerAccountRoles().get(t);if(!e)return"\u{1F916} AI \u5206\u914D";let n=this.availableRoleTypes.find(r=>r.id===e);return n?`${n.icon} ${n.name}`:"\u{1F916} AI \u5206\u914D"}getRecommendedAccountCount(){let t=this.selectedTargetUsers();if(t.length===0)return 3;let e=t.reduce((n,r)=>n+r.intentScore,0)/t.length;return e>=80?Math.min(5,this.availableAccountCount()):e>=60?Math.min(4,this.availableAccountCount()):e>=40?Math.min(3,this.availableAccountCount()):Math.min(2,this.availableAccountCount())}getDisplayedRolesCount(){return this.aiPlanResult()?.recommendedRoles?.length||0}toggleAccountExplanation(){this.showAccountExplanation.set(!this.showAccountExplanation())}toggleRoleDropdown(t,e){e.stopPropagation(),this.roleChangeModalIndex()===t?this.roleChangeModalIndex.set(-1):(this.roleChangeModalIndex.set(t),this.backupDropdownId.set(-1))}changeRoleForIndex(t,e){let n=this.accountMatchResults();if(t>=n.length){this.toast.error("\u7121\u6CD5\u66F4\u63DB\uFF1A\u5E33\u865F\u672A\u5339\u914D"),this.roleChangeModalIndex.set(-1);return}if(n[t].roleName===e.name){this.roleChangeModalIndex.set(-1);return}let r=n.findIndex((u,p)=>p!==t&&u.roleName===e.name);if(r>=0){let u=[...n],p=u[t].roleName,f=u[t].roleIcon;u[t]=B(T({},u[t]),{roleName:e.name,roleIcon:e.icon,roleId:e.id}),u[r]=B(T({},u[r]),{roleName:p,roleIcon:f,roleId:n[t].roleId}),this.accountMatchResults.set(u),this.toast.success(`\u{1F504} \u5DF2\u4EA4\u63DB\u89D2\u8272\uFF1A${e.name} \u2194 ${p}`)}else{let u=[...n];u[t]=B(T({},u[t]),{roleName:e.name,roleIcon:e.icon,roleId:e.id}),this.accountMatchResults.set(u),this.toast.success(`\u2713 \u5DF2\u66F4\u63DB\u70BA ${e.icon} ${e.name}`)}this.updateAiPlanRoles(),this.roleChangeModalIndex.set(-1),this.saveDraft()}removeRoleAssignment(t){let e=this.accountMatchResults();if(t>=e.length)return;let n=e[t],r=e.filter((u,p)=>p!==t);this.accountMatchResults.set(r),this.toast.info(`\u26AA ${n.accountPhone} \u5DF2\u79FB\u70BA\u5099\u7528\u5E33\u865F`),this.roleChangeModalIndex.set(-1),this.saveDraft()}toggleBackupDropdown(t,e){e.stopPropagation(),this.backupDropdownId()===t?this.backupDropdownId.set(-1):(this.backupDropdownId.set(t),this.roleChangeModalIndex.set(-1))}closeBackupDropdown(){this.backupDropdownId.set(-1)}assignBackupToRole(t,e){let r=this.accountService.accounts().find(f=>f.id===t);if(!r){this.toast.error("\u627E\u4E0D\u5230\u5E33\u865F"),this.backupDropdownId.set(-1);return}let u=this.accountMatchResults(),p=u.findIndex(f=>f.roleName===e.name);if(p>=0){let f=u[p];if(confirm(`${e.name} \u5DF2\u88AB ${f.accountPhone} \u4F7F\u7528\u3002
\u662F\u5426\u66FF\u63DB\uFF1F`)){let S=[...u];S[p]={roleId:e.id,roleName:e.name,roleIcon:e.icon,accountId:t,accountPhone:r.phone,accountName:r.name||r.phone,matchScore:80,matchReasons:["\u624B\u52D5\u5206\u914D"]},this.accountMatchResults.set(S),this.toast.success(`\u2713 ${r.phone} \u5DF2\u66FF\u63DB\u70BA ${e.icon} ${e.name}`)}}else{let f={roleId:e.id,roleName:e.name,roleIcon:e.icon,accountId:t,accountPhone:r.phone,accountName:r.name||r.phone,matchScore:80,matchReasons:["\u624B\u52D5\u5206\u914D"]};this.accountMatchResults.set([...u,f]),this.toast.success(`\u2713 ${r.phone} \u5DF2\u5206\u914D\u70BA ${e.icon} ${e.name}`)}this.backupDropdownId.set(-1),this.saveDraft()}updateAiPlanRoles(){let t=this.aiPlanResult();if(!t)return;let n=this.accountMatchResults().map(r=>({type:r.roleId,name:r.roleName,icon:r.roleIcon,purpose:t.recommendedRoles?.find(u=>u.name===r.roleName)?.purpose||"\u5354\u52A9\u71DF\u92B7",openingLine:t.recommendedRoles?.find(u=>u.name===r.roleName)?.openingLine}));this.aiPlanResult.set(B(T({},t),{recommendedRoles:n}))}getBackupAccounts(){let t=this.aiPlanResult();if(!t)return[];let e=t.recommendedRoles?.length||0,n=this.plannerAccountCount();if(n<=e)return[];let r=new Set(this.accountMatchResults().map(f=>f.accountId));return this.accountService.accounts().filter(f=>f.status==="Online"&&!r.has(f.id)).slice(0,n-e).map(f=>({id:f.id,phone:f.phone,name:f.name||f.phone}))}saveDraft(){let t={goal:this.aiPlannerGoal,accountCount:this.plannerAccountCount(),selectedAccounts:this.plannerSelectedAccounts(),accountRoles:Array.from(this.plannerAccountRoles().entries()),autoAssign:this.plannerAutoAssign(),targetUsers:this.selectedTargetUsers(),chatScenario:this.selectedChatScenario(),executionMode:this.selectedExecutionMode(),savedAt:Date.now()};localStorage.setItem(this.DRAFT_STORAGE_KEY,JSON.stringify(t)),this.hasDraft.set(!0)}restoreDraft(){try{let t=localStorage.getItem(this.DRAFT_STORAGE_KEY);if(!t)return!1;let e=JSON.parse(t);return Date.now()-e.savedAt>1440*60*1e3?(localStorage.removeItem(this.DRAFT_STORAGE_KEY),!1):(this.aiPlannerGoal=e.goal||"",this.plannerAccountCount.set(e.accountCount||3),this.plannerSelectedAccounts.set(e.selectedAccounts||[]),this.plannerAccountRoles.set(new Map(e.accountRoles||[])),this.plannerAutoAssign.set(e.autoAssign!==!1),e.targetUsers?.length>0&&this.selectedTargetUsers.set(e.targetUsers),e.chatScenario&&this.selectedChatScenario.set(e.chatScenario),e.executionMode&&this.selectedExecutionMode.set(e.executionMode),!0)}catch(t){return console.error("[MultiRole] \u6062\u5FA9\u8349\u7A3F\u5931\u6557:",t),!1}}clearDraft(){localStorage.removeItem(this.DRAFT_STORAGE_KEY),this.hasDraft.set(!1)}async callAIForPlanning(t){return new Promise(e=>{let n=`\u4F60\u662F\u4E00\u4F4D\u8CC7\u6DF1\u7684 Telegram \u71DF\u92B7\u5C08\u5BB6\u3002\u8ACB\u6839\u64DA\u4EE5\u4E0B\u71DF\u92B7\u76EE\u6A19\uFF0C\u8A2D\u8A08\u4E00\u500B\u9AD8\u5EA6\u91DD\u5C0D\u6027\u7684\u591A\u89D2\u8272\u5354\u4F5C\u7B56\u7565\u3002

\u3010\u71DF\u92B7\u76EE\u6A19\u3011
${t}

\u3010\u5206\u6790\u8981\u6C42\u3011
1. \u9996\u5148\u5206\u6790\u76EE\u6A19\uFF0C\u8B58\u5225\uFF1A
   - \u7522\u54C1/\u670D\u52D9\u985E\u578B
   - \u76EE\u6A19\u5BA2\u6236\u7FA4\u9AD4
   - \u5BA2\u6236\u53EF\u80FD\u7684\u75DB\u9EDE\u548C\u9867\u616E
   
2. \u7136\u5F8C\u8A2D\u8A08\u91DD\u5C0D\u6027\u89D2\u8272\uFF08\u6BCF\u500B\u89D2\u8272\u5FC5\u9808\u8207\u76EE\u6A19\u7522\u54C1\u76F4\u63A5\u76F8\u95DC\uFF09\uFF1A
   - \u89D2\u8272\u540D\u7A31\u5FC5\u9808\u5305\u542B\u7522\u54C1\u95DC\u9375\u8A5E\uFF08\u5982"\u652F\u4ED8\u9867\u554F"\u800C\u975E"\u92B7\u552E\u5C08\u54E1"\uFF09
   - \u6BCF\u500B\u89D2\u8272\u6709\u660E\u78BA\u7684\u5206\u5DE5\u548C\u8A71\u8853\u5B9A\u4F4D
   
3. \u8A2D\u8A08\u958B\u5834\u8A71\u8853\u9810\u89BD\uFF08\u8B93\u7528\u6236\u9810\u5224\u57F7\u884C\u6548\u679C\uFF09

\u3010JSON \u8FD4\u56DE\u683C\u5F0F\u3011
{
  "goalAnalysis": {
    "productType": "\u8B58\u5225\u7684\u7522\u54C1\u985E\u578B",
    "targetAudience": "\u76EE\u6A19\u5BA2\u6236\u63CF\u8FF0",
    "painPoints": ["\u5BA2\u6236\u75DB\u9EDE1", "\u5BA2\u6236\u75DB\u9EDE2"],
    "keySellingPoints": ["\u7522\u54C1\u512A\u52E21", "\u7522\u54C1\u512A\u52E22"]
  },
  "strategy": "1-2\u53E5\u8A71\u7684\u6574\u9AD4\u7B56\u7565",
  "recommendedRoles": [
    {
      "type": "\u89D2\u8272\u985E\u578B\u5982consultant/user/analyst",
      "name": "\u8207\u7522\u54C1\u76F8\u95DC\u7684\u89D2\u8272\u540D\u7A31",
      "icon": "emoji",
      "purpose": "\u9019\u500B\u89D2\u8272\u7684\u5177\u9AD4\u4F5C\u7528",
      "openingLine": "\u9019\u500B\u89D2\u8272\u7684\u958B\u5834\u767D\u793A\u4F8B"
    }
  ],
  "suggestedFlow": [
    {"step": 1, "action": "\u5177\u9AD4\u884C\u52D5", "role": "\u89D2\u8272\u540D", "scriptPreview": "\u8A71\u8853\u9810\u89BD"}
  ],
  "estimatedSuccessRate": \u6578\u5B57,
  "successRateReason": "\u6210\u529F\u7387\u9810\u4F30\u4F9D\u64DA"
}

\u3010\u91CD\u8981\u3011
- \u89D2\u8272\u5FC5\u9808\u8207\u300C${t}\u300D\u76F4\u63A5\u76F8\u95DC\uFF0C\u4E0D\u8981\u7528\u901A\u7528\u89D2\u8272\u5982"\u5167\u5BB9\u71DF\u92B7\u5C08\u5BB6"
- \u8A71\u8853\u9810\u89BD\u8981\u5305\u542B\u7522\u54C1\u95DC\u9375\u8A5E
- \u5982\u679C\u662F\u652F\u4ED8\u985E\u7522\u54C1\uFF0C\u89D2\u8272\u61C9\u8A72\u662F"\u652F\u4ED8\u9867\u554F"\u3001"\u8CBB\u7387\u5206\u6790\u5E2B"\u7B49
- \u5982\u679C\u662F\u6559\u80B2\u985E\u7522\u54C1\uFF0C\u89D2\u8272\u61C9\u8A72\u662F"\u8AB2\u7A0B\u5C0E\u5E2B"\u3001"\u5B78\u54E1\u4EE3\u8868"\u7B49`;this.ipc.send("ai:generate-text",{prompt:n,maxTokens:1500,responseFormat:"json",callback:"multi-role:ai-plan-result"});let r=45e3,u=null,p=0;this.aiPlanningElapsed.set(0),this.aiPlanningProgress.set("\u{1F50D} AI \u6B63\u5728\u5206\u6790\u60A8\u7684\u76EE\u6A19...");let f=["\u{1F50D} AI \u6B63\u5728\u5206\u6790\u60A8\u7684\u76EE\u6A19...","\u{1F914} \u6B63\u5728\u8B58\u5225\u6700\u4F73\u7B56\u7565...","\u{1F465} \u6B63\u5728\u9078\u64C7\u5408\u9069\u7684\u89D2\u8272\u7D44\u5408...","\u{1F4CB} \u6B63\u5728\u8A2D\u8A08\u57F7\u884C\u6D41\u7A0B...","\u26A1 \u5373\u5C07\u5B8C\u6210\uFF0C\u8ACB\u7A0D\u5019...","\u{1F3AF} \u6700\u5F8C\u512A\u5316\u4E2D..."];u=setInterval(()=>{p+=1,this.aiPlanningElapsed.set(p);let k=Math.min(Math.floor(p/7),f.length-1);this.aiPlanningProgress.set(f[k]),p%5===0&&console.log(`[MultiRole] AI \u8655\u7406\u4E2D... ${p}\u79D2`)},1e3);let S=setTimeout(()=>{console.log(`[MultiRole] AI \u8ABF\u7528\u8D85\u6642 (${r/1e3}\u79D2)`),u&&clearInterval(u),this.aiPlanningProgress.set("\u26A0\uFE0F AI \u97FF\u61C9\u8D85\u6642\uFF0C\u4F7F\u7528\u667A\u80FD\u6A21\u677F..."),M(),e(null)},r),M=this.ipc.on("multi-role:ai-plan-result",k=>{if(clearTimeout(S),u&&clearInterval(u),this.aiPlanningProgress.set("\u2705 AI \u8655\u7406\u5B8C\u6210\uFF01"),M(),console.log("[MultiRole] \u6536\u5230 AI \u97FF\u61C9:",k),!k.success){console.log("[MultiRole] AI \u8ABF\u7528\u5931\u6557:",k.error),e(null);return}try{if(k.text){let U=k.text.match(/\{[\s\S]*\}/);if(U){let w=JSON.parse(U[0]);w.recommendedRoles&&Array.isArray(w.recommendedRoles)&&(w.recommendedRoles=xa(w.recommendedRoles)),console.log("[MultiRole] AI \u7D50\u679C\u89E3\u6790\u6210\u529F:",w),e(w);return}}console.log("[MultiRole] AI \u8FD4\u56DE\u5167\u5BB9\u7121\u6CD5\u89E3\u6790\u70BA JSON"),e(null)}catch(U){console.error("[MultiRole] AI \u7D50\u679C\u89E3\u6790\u5931\u6557:",U),e(null)}})})}getFallbackPlanByKeywords(t){let e=t.toLowerCase();return e.includes("\u6210\u4EA4")||e.includes("\u4ED8\u8CBB")||e.includes("\u8CFC\u8CB7")||e.includes("\u9996\u55AE")?{strategy:"\u63A1\u7528\u300C\u4FE1\u4EFB\u5EFA\u7ACB + \u50F9\u503C\u5C55\u793A + \u9650\u6642\u4FC3\u55AE\u300D\u4E09\u6BB5\u5F0F\u7B56\u7565\uFF0C\u901A\u904E\u8001\u5BA2\u6236\u80CC\u66F8\u5EFA\u7ACB\u4FE1\u4EFB\uFF0C\u5C08\u5BB6\u5C55\u793A\u50F9\u503C\uFF0C\u6700\u5F8C\u7531\u4FC3\u92B7\u5C08\u54E1\u63D0\u4F9B\u9650\u6642\u512A\u60E0\u4FC3\u6210\u6210\u4EA4\u3002",recommendedRoles:[{type:"loyal_customer",name:"\u8001\u7528\u6236",icon:"\u2764\uFE0F",purpose:"\u5206\u4EAB\u771F\u5BE6\u9AD4\u9A57"},{type:"expert",name:"\u7522\u54C1\u5C08\u5BB6",icon:"\u{1F393}",purpose:"\u5C08\u696D\u50F9\u503C\u5C55\u793A"},{type:"sales",name:"\u4FC3\u92B7\u5C08\u54E1",icon:"\u{1F4B0}",purpose:"\u9650\u6642\u512A\u60E0\u4FC3\u55AE"}],suggestedFlow:[{step:1,action:"\u8001\u7528\u6236\u81EA\u7136\u5206\u4EAB\u4F7F\u7528\u9AD4\u9A57\uFF0C\u5EFA\u7ACB\u4FE1\u4EFB",role:"\u8001\u7528\u6236"},{step:2,action:"\u7522\u54C1\u5C08\u5BB6\u8A73\u7D30\u4ECB\u7D39\u529F\u80FD\u548C\u50F9\u503C",role:"\u7522\u54C1\u5C08\u5BB6"},{step:3,action:"\u6839\u64DA\u5BA2\u6236\u53CD\u994B\u89E3\u7B54\u7591\u616E",role:"\u7522\u54C1\u5C08\u5BB6"},{step:4,action:"\u63D0\u4F9B\u9650\u6642\u512A\u60E0\uFF0C\u71DF\u9020\u7DCA\u8FEB\u611F",role:"\u4FC3\u92B7\u5C08\u54E1"}],estimatedSuccessRate:65}:e.includes("\u6D41\u5931")||e.includes("\u633D\u56DE")?{strategy:"\u63A1\u7528\u300C\u95DC\u61F7\u56DE\u8A2A + \u554F\u984C\u89E3\u6C7A + \u7279\u5225\u512A\u60E0\u300D\u7B56\u7565\uFF0C\u5148\u8868\u9054\u95DC\u5FC3\u4E86\u89E3\u96E2\u958B\u539F\u56E0\uFF0C\u91DD\u5C0D\u6027\u89E3\u6C7A\u554F\u984C\uFF0C\u6700\u5F8C\u63D0\u4F9B\u8AA0\u610F\u512A\u60E0\u4FC3\u9032\u56DE\u6B78\u3002",recommendedRoles:[{type:"callback",name:"\u56DE\u8A2A\u5C08\u54E1",icon:"\u{1F4DE}",purpose:"\u771F\u8AA0\u95DC\u61F7\u56DE\u8A2A"},{type:"support",name:"\u5BA2\u670D\u7D93\u7406",icon:"\u{1F3A7}",purpose:"\u89E3\u6C7A\u554F\u984C"},{type:"director",name:"\u5340\u57DF\u7E3D\u76E3",icon:"\u{1F451}",purpose:"\u7279\u5225\u633D\u7559"}],suggestedFlow:[{step:1,action:"\u771F\u8AA0\u95DC\u61F7\uFF0C\u4E86\u89E3\u96E2\u958B\u539F\u56E0",role:"\u56DE\u8A2A\u5C08\u54E1"},{step:2,action:"\u91DD\u5C0D\u554F\u984C\u63D0\u4F9B\u89E3\u6C7A\u65B9\u6848",role:"\u5BA2\u670D\u7D93\u7406"},{step:3,action:"\u9AD8\u5C64\u51FA\u9762\u8868\u9054\u8AA0\u610F",role:"\u5340\u57DF\u7E3D\u76E3"},{step:4,action:"\u63D0\u4F9B\u5C08\u5C6C\u56DE\u6B78\u512A\u60E0",role:"\u5340\u57DF\u7E3D\u76E3"}],estimatedSuccessRate:45}:{strategy:"\u63A1\u7528\u300C\u9700\u6C42\u4E86\u89E3 + \u65B9\u6848\u5C55\u793A + \u8DDF\u9032\u670D\u52D9\u300D\u901A\u7528\u7B56\u7565\uFF0C\u5148\u4E86\u89E3\u5BA2\u6236\u9700\u6C42\uFF0C\u63D0\u4F9B\u5B9A\u5236\u5316\u65B9\u6848\uFF0C\u6301\u7E8C\u8DDF\u9032\u76F4\u5230\u76EE\u6A19\u9054\u6210\u3002",recommendedRoles:[{type:"account_manager",name:"\u5BA2\u6236\u7D93\u7406",icon:"\u{1F4BC}",purpose:"\u4E86\u89E3\u9700\u6C42"},{type:"solution_expert",name:"\u65B9\u6848\u5C08\u5BB6",icon:"\u{1F4CB}",purpose:"\u63D0\u4F9B\u65B9\u6848"}],suggestedFlow:[{step:1,action:"\u4E86\u89E3\u5BA2\u6236\u5177\u9AD4\u9700\u6C42\u548C\u75DB\u9EDE",role:"\u5BA2\u6236\u7D93\u7406"},{step:2,action:"\u6839\u64DA\u9700\u6C42\u63D0\u4F9B\u5B9A\u5236\u65B9\u6848",role:"\u65B9\u6848\u5C08\u5BB6"},{step:3,action:"\u89E3\u7B54\u7591\u554F\u4E26\u6301\u7E8C\u8DDF\u9032",role:"\u5BA2\u6236\u7D93\u7406"}],estimatedSuccessRate:50}}async performAccountMatching(){let t=this.aiPlanResult();if(t){this.aiPlannerStatus.set("matching"),this.matchFailureReason.set(null),this.matchMode.set("normal");try{if(await this.syncAccountStatusBeforeMatch(),!this.plannerAutoAssign()&&this.plannerSelectedAccounts().length>0){let f=this.buildManualAccountMatches(t.recommendedRoles);this.accountMatchResults.set(f),f.length<t.recommendedRoles.length?(this.matchMode.set("multi-role"),this.toast.info(`\u{1F4CB} \u5DF2\u4F7F\u7528\u624B\u52D5\u9078\u64C7\u7684 ${f.length} \u500B\u5E33\u865F`)):this.toast.success("\u2713 \u5DF2\u61C9\u7528\u624B\u52D5\u5E33\u865F\u914D\u7F6E"),this.aiPlannerStatus.set("ready");return}let e={type:"sales_conversion",confidence:80,goal:this.aiPlannerGoal,targetAudience:"\u6F5B\u5728\u5BA2\u6236",urgency:"medium",suggestedDuration:"3-5\u5929"},n=this.plannerAccountCount(),u=t.recommendedRoles.slice(0,n).map((f,S)=>({id:`role_${S}`,name:f.name,icon:f.icon,type:f.type,purpose:f.purpose,personality:"\u5C08\u696D\u53CB\u597D",speakingStyle:"\u81EA\u7136\u5C0D\u8A71",entryTiming:"\u9069\u6642\u5207\u5165",sampleMessages:["\u4F60\u597D\uFF01","\u6709\u4EC0\u9EBC\u53EF\u4EE5\u5E6B\u60A8\u7684\uFF1F"]})),p=await this.dynamicEngine.smartMatchAccountsToRolesEnhanced(u,e,{allowMultiRole:!0,allowOffline:!0});p.length===0?(this.matchFailureReason.set("no_accounts"),this.accountMatchResults.set([])):p.length<u.length?(this.matchMode.set("multi-role"),this.accountMatchResults.set(p.map(f=>({roleId:f.roleId,roleName:f.roleName,roleIcon:f.roleIcon,accountId:f.accountId,accountPhone:f.accountPhone,accountName:f.accountName,matchScore:f.matchScore,matchReasons:f.matchReasons}))),this.toast.info(`\u{1F504} \u5E33\u865F\u4E0D\u8DB3\uFF0C\u5DF2\u555F\u7528\u4E00\u865F\u591A\u89D2\u6A21\u5F0F\uFF08${p.length} \u5E33\u865F\u8F2A\u63DB ${u.length} \u89D2\u8272\uFF09`)):this.accountMatchResults.set(p.map(f=>({roleId:f.roleId,roleName:f.roleName,roleIcon:f.roleIcon,accountId:f.accountId,accountPhone:f.accountPhone,accountName:f.accountName,matchScore:f.matchScore,matchReasons:f.matchReasons})))}catch(e){console.error("[MultiRole] \u5E33\u865F\u5339\u914D\u5931\u6557:",e),this.matchFailureReason.set("error")}this.aiPlannerStatus.set("ready")}}buildManualAccountMatches(t){let e=this.plannerSelectedAccounts(),n=this.plannerAccountRoles(),r=this.accountService.accounts(),u=[],p=new Set,f=new Set;e.forEach(M=>{let k=n.get(M);if(k){let U=t.findIndex(X=>X.type===k||this.availableRoleTypes.find(_e=>_e.id===k)?.name===X.name),w=this.availableRoleTypes.find(X=>X.id===k),O=r.find(X=>X.id===M);O&&w&&!f.has(U)&&(u.push({roleId:`role_${u.length}`,roleName:w.name,roleIcon:w.icon,accountId:M,accountPhone:O.phone,accountName:O.phone,matchScore:100,matchReasons:["\u624B\u52D5\u6307\u5B9A"]}),p.add(M),U>=0&&f.add(U))}});let S=0;return e.forEach(M=>{if(!p.has(M)){for(;S<t.length&&f.has(S);)S++;if(S<t.length){let k=t[S],U=r.find(w=>w.id===M);U&&(u.push({roleId:`role_${S}`,roleName:k.name,roleIcon:k.icon,accountId:M,accountPhone:U.phone,accountName:U.phone,matchScore:85,matchReasons:["AI \u81EA\u52D5\u5206\u914D"]}),f.add(S)),S++}}}),u}goToAccountManagement(){this.closeAIPlanner(),this.ipc.send("navigate-to-accounts",{})}sendAndWaitForResult(t,e,n,r=3e4){return new Promise(u=>{let p=setTimeout(()=>{console.warn(`[MultiRole] ${t} \u8D85\u6642 (${r}ms)`),f(),u({success:!1,error:"\u64CD\u4F5C\u8D85\u6642"})},r),f=this.ipc.on(e,S=>{clearTimeout(p),f(),console.log(`[MultiRole] ${t} \u7D50\u679C:`,S),u(S)});console.log(`[MultiRole] \u767C\u9001 ${t}:`,n),this.ipc.send(t,n)})}async syncAccountStatusBeforeMatch(){return new Promise(t=>{this.ipc.send("sync-account-status",{}),this.accountService.loadAccounts(),setTimeout(()=>{console.log("[MultiRole] \u5E33\u865F\u72C0\u614B\u5DF2\u540C\u6B65"),t()},800)})}applyAIPlan(){let t=this.aiPlanResult();if(!t)return;let e=this.selectedExecutionMode(),n=this.isPrivateChatMode()?t.recommendedRoles.slice(0,1):t.recommendedRoles;for(let u=0;u<n.length;u++){let p=n[u],f=this.accountMatchResults()[u];this.multiRoleService.roles().find(M=>M.name===p.name)||this.multiRoleService.addRole({name:p.name,type:"custom",boundAccountId:f?.accountId,boundAccountPhone:f?.accountPhone,personality:{description:p.purpose,speakingStyle:"friendly",traits:[]},aiConfig:{useGlobalAI:!0,customPrompt:`\u4F60\u662F${p.name}\uFF0C\u8CA0\u8CAC${p.purpose}\u3002\u8ACB\u7528\u5C08\u696D\u4F46\u53CB\u597D\u7684\u65B9\u5F0F\u8207\u5BA2\u6236\u4EA4\u6D41\u3002`,responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:[p.purpose]})}if(e!=="scriptless"){let u=t.suggestedFlow.map((p,f)=>({id:`stage_${f+1}`,name:p.action.substring(0,20)+"...",order:p.step,trigger:{type:f===0?"manual":"time",delaySeconds:120},messages:[]}));this.multiRoleService.addScript({name:`AI \u7B56\u5283 - ${this.aiPlannerGoal.substring(0,15)}...`,description:t.strategy,stages:u})}let r=this.selectedTargetUsers();this.dynamicEngine.startFromOnePhrase(this.aiPlannerGoal,e,r.length>0?r:void 0).then(async u=>{if(u){let p=r.length>0?`\uFF0C\u76EE\u6A19 ${r.length} \u4EBA`:"";if(this.toast.success(`\u{1F680} \u79C1\u804A\u6A21\u5F0F\u5DF2\u5C31\u7DD2\uFF01${p}`),r.length>0){let S=this.accountMatchResults()[0];for(let M of r){let k=[{roleId:S?.roleId||"consultant",roleName:S?.roleName||"\u9867\u554F",roleIcon:S?.roleIcon||"\u{1F4BC}",accountId:S?.accountId||0,accountPhone:S?.accountPhone||"",entryOrder:1,entryDelaySeconds:0,entryType:"opener",openingMessage:t.recommendedRoles[0]?.openingLine}],U=this.orchestrator.createSession({targetUserId:M.telegramId||M.id,targetUserName:M.firstName||M.username||"Customer",roles:k,rhythm:{minIntervalSeconds:15,maxIntervalSeconds:45,waitForUserReply:!0,userSilenceTimeoutSeconds:120}});await this.orchestrator.startCollaboration(U.id),console.log("[MultiRole] \u{1F3AF} \u79C1\u804A\u5354\u4F5C\u6703\u8A71\u5DF2\u5275\u5EFA:",U.id,M.firstName||M.username)}}}}),this.closeAIPlanner(),this.activeTab.set("dashboard"),this.selectedTargetUsers.set([])}async startGroupCollaboration(){let t=this.aiPlanResult();if(!t)return;let e=this.selectedTargetUsers();if(e.length===0){this.toast.error("\u8ACB\u5148\u9078\u64C7\u76EE\u6A19\u7528\u6236");return}if(!this.hasEnoughAccounts()){this.toast.error(`\u5E33\u865F\u4E0D\u8DB3\uFF01\u9700\u8981 ${this.requiredAccountsForGroup()} \u500B\u5E33\u865F`);return}let n=this.selectedExecutionMode(),r=this.accountMatchResults(),u=r[0];if(!u){this.toast.error("\u6C92\u6709\u53EF\u7528\u7684\u4E3B\u5E33\u865F");return}console.log("[MultiRole] \u958B\u59CB\u7FA4\u804A\u5354\u4F5C\u6D41\u7A0B"),console.log("[MultiRole] \u4E3B\u5E33\u865F:",u.accountPhone),console.log("[MultiRole] \u76EE\u6A19\u7528\u6236:",e.length),console.log("[MultiRole] \u89D2\u8272\u5E33\u865F:",r.length);try{this.groupCreationStatus.set("creating"),this.groupCreationProgress.set("\u6B63\u5728\u5275\u5EFA\u7FA4\u7D44...");let p=e[0],f=`VIP\u670D\u52D9\u7FA4 - ${p.firstName||p.username||"Customer"}`,S=await this.sendAndWaitForResult("create-group","create-group-result",{name:f,description:t.strategy,type:"group",accountPhone:u.accountPhone});if(!S.success)throw new Error(S.error||"\u5275\u5EFA\u7FA4\u7D44\u5931\u6557");let M=S.groupId||S.chatId;this.createdGroupId.set(M),console.log("[MultiRole] \u7FA4\u7D44\u5275\u5EFA\u6210\u529F:",M),this.groupCreationStatus.set("inviting_target"),this.groupCreationProgress.set("\u6B63\u5728\u9080\u8ACB\u5BA2\u6236\u52A0\u5165...");let k=S.groupUrl||"",U=0,w=0;for(let V of e)try{let q=await this.sendAndWaitForResult("group:invite-user","group:invite-user-result",{groupId:M,groupName:f,inviterPhone:u.accountPhone,targetUserId:V.telegramId||V.id,targetUsername:V.username},15e3);if(q.success){U++,console.log("[MultiRole] \u6210\u529F\u9080\u8ACB\u7528\u6236:",V.firstName||V.username);try{this.ipc.send("send-message",{accountPhone:u.accountPhone,userId:V.telegramId||V.id,content:`\u55E8 ${V.firstName||V.username||""}\uFF01\u6211\u5011\u525B\u525B\u70BA\u60A8\u5275\u5EFA\u4E86\u5C08\u5C6C VIP \u670D\u52D9\u7FA4\u300C${f}\u300D\u{1F389}

\u7FA4\u88E1\u6709\u6211\u5011\u7684\u5C08\u696D\u5718\u968A\uFF0C\u53EF\u4EE5\u66F4\u5FEB\u901F\u5730\u70BA\u60A8\u89E3\u7B54\u554F\u984C\u3002\u6B61\u8FCE\u5230\u7FA4\u88E1\u804A\uFF01`}),console.log("[MultiRole] \u5DF2\u767C\u9001\u5165\u7FA4\u901A\u77E5\u7D66:",V.firstName||V.username)}catch(Z){console.warn("[MultiRole] \u767C\u9001\u5165\u7FA4\u901A\u77E5\u5931\u6557:",Z)}}else{w++;let Z=q.error||"\u672A\u77E5\u932F\u8AA4";console.warn("[MultiRole] \u9080\u8ACB\u5931\u6557:",Z);let ee=V.firstName||V.username||V.id;if(Z.includes("PRIVACY")||Z.includes("\u96B1\u79C1")?this.toast.warning(`\u26A0\uFE0F ${ee} \u7684\u96B1\u79C1\u8A2D\u7F6E\u4E0D\u5141\u8A31\u9080\u8ACB\uFF0C\u6B63\u5728\u767C\u9001\u7FA4\u9080\u8ACB\u9023\u7D50...`):Z.includes("MUTUAL")||Z.includes("\u597D\u53CB")?this.toast.warning(`\u26A0\uFE0F \u9700\u8981\u5148\u8207 ${ee} \u4E92\u76F8\u6DFB\u52A0\u597D\u53CB\uFF0C\u6B63\u5728\u767C\u9001\u7FA4\u9080\u8ACB\u9023\u7D50...`):Z.includes("FLOOD")||Z.includes("\u983B\u7E41")?this.toast.error("\u274C \u8ACB\u6C42\u904E\u65BC\u983B\u7E41\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66"):Z.includes("\u672A\u9023\u63A5")&&this.toast.error("\u274C \u9080\u8ACB\u5E33\u865F\u672A\u9023\u63A5\uFF0C\u8ACB\u6AA2\u67E5\u5E33\u865F\u72C0\u614B"),k)try{this.ipc.send("send-message",{accountPhone:u.accountPhone,userId:V.telegramId||V.id,content:`\u60A8\u597D\uFF01\u8AA0\u9080\u60A8\u52A0\u5165\u6211\u5011\u7684 VIP \u5C08\u5C6C\u670D\u52D9\u7FA4\uFF1A
${k}

\u{1F446} \u9EDE\u64CA\u4E0A\u65B9\u9023\u7D50\u5373\u53EF\u52A0\u5165\uFF0C\u6211\u5011\u7684\u5C08\u696D\u5718\u968A\u5C07\u70BA\u60A8\u63D0\u4F9B\u4E00\u5C0D\u4E00\u670D\u52D9\uFF01`}),console.log("[MultiRole] \u5DF2\u767C\u9001\u9080\u8ACB\u9023\u7D50\u7D66:",V.firstName||V.username),w--,U++,this.ipc.send("record-action",{userId:V.telegramId||V.id,actionType:"group_invite_link",actionDetails:{group_id:M,group_name:f,group_url:k},performedBy:u.accountPhone})}catch(we){console.warn("[MultiRole] \u767C\u9001\u9080\u8ACB\u9023\u7D50\u5931\u6557:",we)}else this.toast.warning(`\u26A0\uFE0F \u7121\u6CD5\u76F4\u63A5\u9080\u8ACB ${ee}\uFF0C\u4E14\u6C92\u6709\u7FA4\u9080\u8ACB\u9023\u7D50\u53EF\u767C\u9001`)}}catch(q){w++,console.warn("[MultiRole] \u9080\u8ACB\u5BA2\u6236\u7570\u5E38:",V,q)}console.log(`[MultiRole] \u9080\u8ACB\u5B8C\u6210: \u6210\u529F/\u5DF2\u767C\u9080\u8ACB ${U}, \u5931\u6557 ${w}`),this.groupCreationStatus.set("inviting_roles"),this.groupCreationProgress.set("\u6B63\u5728\u9080\u8ACB\u5354\u4F5C\u5E33\u865F...");let O=3,X=3e3,_e=0;for(let V=1;V<r.length;V++){let q=r[V],Z=!1;for(let ee=1;ee<=O&&!Z;ee++)try{console.log(`[MultiRole] \u5617\u8A66\u6DFB\u52A0\u89D2\u8272\u5E33\u865F (${ee}/${O}):`,q.accountPhone);let we=await this.sendAndWaitForResult("group:add-member","group:add-member-result",{groupId:M,adderPhone:u.accountPhone,memberPhone:q.accountPhone},15e3);we.success?(console.log("[MultiRole] \u2713 \u6210\u529F\u6DFB\u52A0\u89D2\u8272\u5E33\u865F:",q.accountPhone,q.roleName),Z=!0,_e++):(console.warn(`[MultiRole] \u26A0 \u6DFB\u52A0\u89D2\u8272\u5E33\u865F\u5931\u6557 (\u5617\u8A66 ${ee}):`,q.accountPhone,we.error),ee<O&&(console.log(`[MultiRole] \u7B49\u5F85 ${X/1e3} \u79D2\u5F8C\u91CD\u8A66...`),await new Promise(it=>setTimeout(it,X))))}catch(we){console.warn(`[MultiRole] \u274C \u6DFB\u52A0\u89D2\u8272\u5E33\u865F\u7570\u5E38 (\u5617\u8A66 ${ee}):`,q.accountPhone,we),ee<O&&await new Promise(it=>setTimeout(it,X))}Z||this.toast.warning(`\u26A0\uFE0F \u7121\u6CD5\u6DFB\u52A0\u5E33\u865F ${q.accountPhone} \u5230\u7FA4\u7D44\uFF0C\u5C07\u4F7F\u7528\u73FE\u6709\u5E33\u865F\u7E7C\u7E8C`)}console.log(`[MultiRole] \u{1F4CA} \u89D2\u8272\u5E33\u865F\u6DFB\u52A0\u7D50\u679C: ${_e}/${r.length-1} \u6210\u529F`),this.groupCreationProgress.set("\u767C\u9001\u6B61\u8FCE\u6D88\u606F..."),this.ipc.send("send-group-message",{resourceId:M,content:`\u6B61\u8FCE\u52A0\u5165 VIP \u5C08\u5C6C\u670D\u52D9\u7FA4\uFF01\u{1F389}

\u6211\u5011\u7684\u5C08\u696D\u5718\u968A\u5C07\u70BA\u60A8\u63D0\u4F9B\u4E00\u5C0D\u4E00\u7684\u5C08\u5C6C\u670D\u52D9\u3002\u6709\u4EFB\u4F55\u554F\u984C\u90FD\u53EF\u4EE5\u76F4\u63A5\u5728\u7FA4\u5167\u63D0\u51FA\uFF01`,accountPhone:u.accountPhone}),this.groupCreationProgress.set("\u555F\u52D5\u5354\u4F5C\u76E3\u807D...");let W=r.map((V,q)=>({phone:V.accountPhone,roleId:V.roleId||`role_${q}`,roleName:V.roleName||t.recommendedRoles[q]?.name||"\u52A9\u624B",prompt:t.recommendedRoles[q]?.purpose||"\u5354\u52A9\u670D\u52D9\u5BA2\u6236"}));this.ipc.send("group:monitor-messages",{groupId:M,roles:W,mainAccountPhone:u.accountPhone}),console.log("[MultiRole] \u5DF2\u555F\u52D5\u7FA4\u804A\u76E3\u807D\uFF0C\u89D2\u8272\u6578:",W.length);for(let V of t.recommendedRoles){let q=r.find(ee=>ee.roleName===V.name);this.multiRoleService.roles().find(ee=>ee.name===V.name)||this.multiRoleService.addRole({name:V.name,type:"custom",boundAccountId:q?.accountId,boundAccountPhone:q?.accountPhone,personality:{description:V.purpose,speakingStyle:"friendly",traits:[]},aiConfig:{useGlobalAI:!0,customPrompt:`\u4F60\u662F${V.name}\uFF0C\u5728\u7FA4\u804A\u4E2D\u8CA0\u8CAC${V.purpose}\u3002\u8ACB\u914D\u5408\u5176\u4ED6\u89D2\u8272\u5354\u4F5C\u670D\u52D9\u5BA2\u6236\u3002`,responseLength:"medium",emojiFrequency:"low",typingSpeed:"medium"},responsibilities:[V.purpose]})}await this.dynamicEngine.startFromOnePhrase(this.aiPlannerGoal,n,e,{chatScenario:"group",groupId:M,roleAccounts:r});let Vt=r.map((V,q)=>({roleId:V.roleId||`role_${q}`,roleName:V.roleName,roleIcon:V.roleIcon||"\u{1F464}",accountId:V.accountId,accountPhone:V.accountPhone,entryOrder:q+1,entryDelaySeconds:q===0?0:30+q*15,entryType:q===0?"opener":q===1?"supporter":"atmosphere",openingMessage:t.recommendedRoles[q]?.openingLine})),dt=this.orchestrator.createSession({targetUserId:p.telegramId||p.id,targetUserName:p.firstName||p.username||"Customer",groupId:M,roles:Vt,rhythm:{minIntervalSeconds:20,maxIntervalSeconds:60,waitForUserReply:!0,userSilenceTimeoutSeconds:180}});await this.orchestrator.startCollaboration(dt.id),console.log("[MultiRole] \u{1F3AF} \u5354\u4F5C\u7DE8\u6392\u670D\u52D9\u5DF2\u555F\u52D5\uFF0C\u6703\u8A71ID:",dt.id),this.groupCreationStatus.set("ready"),this.toast.success(`\u{1F389} \u7FA4\u804A\u5354\u4F5C\u5DF2\u555F\u52D5\uFF01\u7FA4\u7D44: ${f}`),this.closeAIPlanner(),this.activeTab.set("dashboard"),this.selectedTargetUsers.set([])}catch(p){console.error("[MultiRole] \u7FA4\u804A\u5354\u4F5C\u5931\u6557:",p),this.groupCreationStatus.set("error"),this.toast.error(`\u7FA4\u804A\u5354\u4F5C\u5931\u6557: ${p.message||p}`)}}saveSettings(){this.multiRoleService.updateAutoGroupSettings({nameTemplate:this.autoGroupNameTemplate,inviteMessageTemplate:this.inviteMessage,maxConcurrentGroups:this.maxConcurrent,autoCloseAfterDays:this.autoCloseDays}),this.multiRoleService.updateTriggerConditions({intentScoreThreshold:this.intentThreshold,minConversationRounds:this.minRounds,requirePriceInquiry:this.requirePriceInquiry}),this.multiRoleService.updateAISettings({useAICenter:this.useAICenter,coordinationMode:this.coordinationMode})}calculateContactIntent(t){let e=30;return t.status==="replied"?e+=30:t.status==="contacted"?e+=15:t.status==="new"&&(e+=10),t.source_type==="lead"?e+=20:t.source_type==="member"&&(e+=10),t.tags?.includes("\u9AD8\u610F\u5411")?e+=25:t.tags?.includes("\u6709\u8208\u8DA3")&&(e+=15),t.last_message_at&&(e+=10),Math.min(100,e)}openTargetUserSelector(){this.syncTargetUsersFromSendConsole(),this.showTargetUserSelector.set(!0)}syncTargetUsersFromSendConsole(){if(this.isSyncingTargetUsers())return;this.isSyncingTargetUsers.set(!0),this.ipc.send("get-leads-paginated",{page:1,pageSize:500,status:null,search:null});let t=this.ipc.on("leads-paginated",e=>{t(),this.isSyncingTargetUsers.set(!1),e.leads&&e.leads.length>0?(console.log("[MultiRole] \u5F9E\u767C\u9001\u63A7\u5236\u53F0\u540C\u6B65\u6578\u64DA:",e.leads.length),this.contactsService.importLeadsDirectly(e.leads),this.toast.success(`\u2705 \u5DF2\u540C\u6B65 ${e.leads.length} \u500B\u76EE\u6A19\u7528\u6236`)):this.toast.warning("\u26A0\uFE0F \u767C\u9001\u63A7\u5236\u53F0\u66AB\u7121\u6578\u64DA\uFF0C\u8ACB\u5148\u6DFB\u52A0\u76EE\u6A19\u5BA2\u6236")});setTimeout(()=>{this.isSyncingTargetUsers()&&(this.isSyncingTargetUsers.set(!1),this.toast.error("\u540C\u6B65\u8D85\u6642\uFF0C\u8ACB\u91CD\u8A66"))},1e4)}closeTargetUserSelector(){this.showTargetUserSelector.set(!1),this.targetUserSearchQuery=""}toggleTargetUser(t){let e=this.selectedTargetUsers();e.find(r=>r.telegramId===t.telegramId)?this.selectedTargetUsers.set(e.filter(r=>r.telegramId!==t.telegramId)):this.selectedTargetUsers.set([...e,t])}confirmTargetUsers(){let t=this.selectedTargetUsers();if(t.length===0){this.toast.warning("\u8ACB\u81F3\u5C11\u9078\u64C7\u4E00\u500B\u76EE\u6A19\u7528\u6236");return}this.toast.success(`\u5DF2\u9078\u64C7 ${t.length} \u500B\u76EE\u6A19\u7528\u6236`),this.closeTargetUserSelector()}isUserSelected(t){return this.selectedTargetUsers().some(e=>e.telegramId===t.telegramId)}toggleSelectAll(){let t=this.filteredTargetUsers();if(t.every(n=>this.isUserSelected(n))){let n=new Set(t.map(r=>r.telegramId));this.selectedTargetUsers.set(this.selectedTargetUsers().filter(r=>!n.has(r.telegramId)))}else{let n=new Set(this.selectedTargetUsers().map(u=>u.telegramId)),r=t.filter(u=>!n.has(u.telegramId));this.selectedTargetUsers.set([...this.selectedTargetUsers(),...r])}}clearSelectedUsers(){this.selectedTargetUsers.set([])}selectHighIntentUsers(){let t=this.availableTargetUsers().filter(e=>e.intentScore>=60);this.selectedTargetUsers.set(t.slice(0,20)),this.toast.info(`\u5DF2\u9078\u64C7 ${this.selectedTargetUsers().length} \u500B\u9AD8\u610F\u5411\u7528\u6236`)}searchTargetUsers(){this.targetUserSearchQuery.trim()&&this.toast.info(`\u627E\u5230 ${this.filteredTargetUsers().length} \u500B\u5339\u914D\u7528\u6236`)}clearSearchQuery(){this.targetUserSearchQuery=""}isAllSelected(){let t=this.filteredTargetUsers(),e=this.selectedTargetUsers();return t.length>0&&t.every(n=>e.some(r=>r.id===n.id))}triggerImportFile(){this.importFileInput?.nativeElement?.click()}handleImportFile(t){let e=t.target,n=e.files?.[0];if(!n)return;let r=new FileReader;r.onload=u=>{let p=u.target?.result;this.parseImportFile(p,n.name)},r.onerror=()=>{this.toast.error("\u8B80\u53D6\u6587\u4EF6\u5931\u6557")},r.readAsText(n),e.value=""}parseImportFile(t,e){let n=t.split(`
`).filter(k=>k.trim()),r=[],u=0,p=n[0]?.toLowerCase()||"";(p.includes("telegram")||p.includes("username")||p.includes("id")||p.includes("\u7528\u6236"))&&(u=1);for(let k=u;k<n.length;k++){let U=n[k].trim();if(!U)continue;let w=U.split(",").map(O=>O.trim().replace(/"/g,""));if(w.length>=1){let O=w[0],X=w[1]||"",_e=w[2]||w[1]||O,W=parseInt(w[3])||50;O&&(O.match(/^\d+$/)||O.startsWith("@"))&&r.push({id:O,telegramId:O.startsWith("@")?"":O,username:O.startsWith("@")?O.slice(1):X,firstName:_e,lastName:"",intentScore:W,source:"import"})}}if(r.length===0){this.toast.error("\u672A\u80FD\u5F9E\u6587\u4EF6\u4E2D\u89E3\u6790\u51FA\u6709\u6548\u7528\u6236");return}let f=this.selectedTargetUsers(),S=new Set(f.map(k=>k.telegramId||k.id)),M=r.filter(k=>!S.has(k.telegramId||k.id));this.selectedTargetUsers.set([...f,...M]),this.toast.success(`\u{1F4E5} \u5DF2\u5C0E\u5165 ${M.length} \u500B\u7528\u6236\uFF08\u5171 ${this.selectedTargetUsers().length} \u500B\uFF09`)}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=Q({type:l,selectors:[["app-multi-role-center"]],viewQuery:function(e,n){if(e&1&&Ge(xo,5)(_o,5),e&2){let r;Re(r=Ie())&&(n.importFileInput=r.first),Re(r=Ie())&&(n.goalInput=r.first)}},hostBindings:function(e,n){e&1&&g("click",function(u){return n.onDocumentClick(u)},ct)},decls:49,vars:11,consts:[["goalInput",""],["importFileInput",""],[1,"multi-role-center","h-full","flex","flex-col","bg-slate-900"],[1,"p-4","border-b","border-slate-700/50","bg-slate-900/80","backdrop-blur-sm"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"text-2xl","font-bold","text-white","flex","items-center","gap-3"],[1,"text-2xl"],[1,"flex","items-center","gap-2"],[1,"flex","items-center","gap-2","px-3","py-1","bg-purple-500/20","text-purple-400","rounded-full","text-sm"],[1,"px-3","py-1","bg-slate-700","text-slate-400","rounded-full","text-sm"],[1,"flex","items-center","gap-4","px-4","py-2","bg-slate-800/80","rounded-xl","border","border-slate-700/50"],[1,"text-center"],[1,"text-lg","font-bold","text-purple-400"],[1,"text-xs","text-slate-500"],[1,"w-px","h-8","bg-slate-700"],[1,"text-lg","font-bold","text-cyan-400"],[1,"text-lg","font-bold","text-emerald-400"],[1,"flex","gap-1","mt-4","bg-slate-800/50","p-1","rounded-xl","w-fit"],[1,"px-5","py-2.5","rounded-lg","transition-all","flex","items-center","gap-2","text-sm","font-medium",3,"bg-gradient-to-r","from-purple-500","to-pink-500","text-white","shadow-lg","text-slate-400","hover:text-white","hover:bg-slate-700/50"],[1,"flex-1","overflow-y-auto","p-4"],[1,"space-y-6"],[1,"max-w-4xl","mx-auto","space-y-6"],[1,"max-w-3xl","mx-auto","space-y-6"],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","flex","items-center","justify-center","z-50"],[3,"role","availableAccounts"],[3,"script"],[1,"fixed","inset-0","bg-black/70","backdrop-blur-sm","flex","items-center","justify-center","z-50","p-4"],[1,"w-2","h-2","bg-purple-500","rounded-full","animate-pulse"],[1,"px-5","py-2.5","rounded-lg","transition-all","flex","items-center","gap-2","text-sm","font-medium",3,"click"],[1,"text-lg"],[1,"bg-gradient-to-r","from-purple-500/20","via-pink-500/20","to-cyan-500/20","rounded-2xl","border","border-purple-500/30","p-6"],[1,"text-xl","font-bold","text-white","flex","items-center","gap-3"],[1,"px-2","py-0.5","bg-gradient-to-r","from-purple-500","to-pink-500","text-white","text-xs","rounded-full"],[1,"text-slate-400","mt-1"],[1,"px-6","py-3","bg-gradient-to-r","from-purple-500","to-pink-500","text-white","font-medium","rounded-xl","hover:opacity-90","transition-opacity","flex","items-center","gap-2",3,"click"],[1,"mt-4","flex","flex-wrap","gap-2"],[1,"text-sm","text-slate-500"],[1,"px-3","py-1.5","bg-slate-700/50","text-slate-300","text-sm","rounded-lg","hover:bg-slate-700","transition-colors",3,"click"],[3,"roleAdded","roleEdit"],[1,"text-xl","font-bold","text-white","flex","items-center","gap-2"],[1,"text-sm","text-slate-400","mt-1"],[3,"scenarioApplied"],[1,"bg-slate-800/50","rounded-xl","border","border-slate-700/50","p-6"],[1,"flex","items-center","justify-between","mb-6"],[1,"font-semibold","text-white","flex","items-center","gap-2"],[1,"px-4","py-2","bg-purple-500/20","text-purple-400","rounded-lg","hover:bg-purple-500/30","transition-colors",3,"click"],[1,"space-y-4"],[1,"flex","items-center","justify-between","p-4","bg-slate-700/50","rounded-xl","hover:bg-slate-700","transition-colors"],[1,"text-center","py-12","text-slate-400"],[1,"text-sm","font-medium","text-white","mb-4"],[1,"grid","grid-cols-3","gap-3"],[1,"p-4","bg-slate-700/50","rounded-xl","text-center","hover:bg-slate-700","transition-colors"],[1,"w-14","h-14","rounded-xl","flex","items-center","justify-center","text-3xl"],[1,"font-medium","text-white"],[1,"text-sm","text-slate-400"],[1,"flex","items-center","gap-2","mt-1"],[1,"px-2","py-0.5","bg-emerald-500/20","text-emerald-400","text-xs","rounded-full"],[1,"px-2","py-0.5","bg-yellow-500/20","text-yellow-400","text-xs","rounded-full"],[1,"px-2","py-0.5","bg-slate-600","text-slate-300","text-xs","rounded"],[1,"flex","items-center","gap-3"],[1,"px-3","py-1.5","bg-slate-600","text-slate-300","rounded-lg","text-sm","hover:bg-slate-500",3,"click"],[1,"text-slate-500","hover:text-red-400",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-5xl","mb-4"],[1,"text-lg","mb-2"],[1,"text-sm","mb-4"],[1,"px-6","py-3","bg-purple-500","text-white","rounded-lg","hover:bg-purple-400","transition-colors",3,"click"],[1,"p-4","bg-slate-700/50","rounded-xl","text-center","hover:bg-slate-700","transition-colors",3,"click"],[1,"text-3xl","mb-2"],[1,"text-sm","text-white","font-medium"],[1,"text-xs","text-slate-400","mt-1"],[1,"p-4","bg-slate-700/50","rounded-xl"],[1,"text-center","py-8","text-slate-400"],[1,"grid","grid-cols-2","gap-4"],[1,"p-4","bg-slate-700/50","rounded-xl","text-left","hover:bg-slate-700","transition-colors",3,"click"],[1,"flex","items-center","gap-3","mb-2"],[1,"flex","items-center","justify-between","mb-3"],[1,"px-2","py-1","bg-slate-600","text-slate-300","text-xs","rounded"],[1,"text-purple-400","hover:text-purple-300","text-sm",3,"click"],[1,"text-red-400","hover:text-red-300","text-sm",3,"click"],[1,"flex","items-center","gap-2","mt-3"],[1,"flex","items-center","gap-4","mt-3","pt-3","border-t","border-slate-600/50","text-xs","text-slate-400"],[1,"px-3","py-1.5","bg-slate-600/50","rounded-lg","text-xs","text-slate-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-slate-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"text-4xl","mb-2"],[1,"mt-3","px-4","py-2","bg-purple-500/20","text-purple-400","rounded-lg",3,"click"],[1,"px-4","py-2","bg-purple-500/20","text-purple-400","rounded-lg","hover:bg-purple-500/30","transition-colors"],[1,"font-semibold","text-white","mb-6","flex","items-center","gap-2"],[1,"text-sm","text-slate-400","block","mb-2"],["type","text","placeholder","VIP\u5C08\u5C6C\u670D\u52D9\u7FA4 - {\u5BA2\u6236\u540D}",1,"w-full","px-4","py-2.5","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500",3,"ngModelChange","ngModel"],[1,"text-xs","text-slate-500","mt-1"],["rows","3","placeholder","\u70BA\u4E86\u66F4\u597D\u5730\u670D\u52D9\u60A8...",1,"w-full","px-4","py-3","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500","resize-none",3,"ngModelChange","ngModel"],["type","number","min","1","max","20",1,"w-full","px-4","py-2.5","bg-slate-700","border","border-slate-600","rounded-lg","text-white",3,"ngModelChange","ngModel"],["type","number","min","1","max","30",1,"w-full","px-4","py-2.5","bg-slate-700","border","border-slate-600","rounded-lg","text-white",3,"ngModelChange","ngModel"],["type","range","min","50","max","100","step","5",1,"flex-1",3,"ngModelChange","ngModel"],[1,"text-white","w-12","text-right"],[1,"flex","items-center","justify-between","p-3","bg-slate-700/50","rounded-lg","cursor-pointer"],[1,"text-white"],[1,"text-xs","text-slate-400"],["type","checkbox",1,"w-5","h-5","rounded","text-purple-500","bg-slate-700","border-slate-600",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-between","p-3","bg-slate-700/50","rounded-lg","cursor-pointer","mb-4"],[1,"flex","gap-2"],[1,"flex-1","py-2","px-4","rounded-lg","text-sm","transition-colors",3,"click"],[1,"w-full","py-3","bg-gradient-to-r","from-purple-500","to-pink-500","text-white","rounded-lg","hover:opacity-90","transition-opacity","font-medium",3,"click"],[1,"bg-slate-800","rounded-2xl","w-full","max-w-lg","p-6","shadow-xl","border","border-slate-700","max-h-[90vh]","overflow-y-auto"],[1,"text-xl","font-bold","text-white","mb-6"],[1,"grid","grid-cols-3","gap-2"],[1,"p-3","rounded-lg","text-center","transition-all","border-2",3,"border-purple-500","bg-purple-500/10","border-transparent","bg-slate-700"],["type","text","placeholder","\u5982\uFF1A\u7522\u54C1\u5C08\u5BB6 Mira",1,"w-full","px-4","py-2.5","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500",3,"ngModelChange","ngModel"],["rows","3","placeholder","\u63CF\u8FF0\u9019\u500B\u89D2\u8272\u7684\u80CC\u666F\u548C\u6027\u683C...",1,"w-full","px-4","py-3","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500","resize-none",3,"ngModelChange","ngModel"],["rows","4","placeholder","\u4F60\u662F\u4E00\u4F4D...",1,"w-full","px-4","py-3","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500","resize-none",3,"ngModelChange","ngModel"],[1,"flex","gap-3","mt-6"],[1,"flex-1","py-2.5","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600","transition-colors",3,"click"],[1,"flex-1","py-2.5","bg-purple-500","text-white","rounded-lg","hover:bg-purple-400","transition-colors",3,"click"],[1,"p-3","rounded-lg","text-center","transition-all","border-2",3,"click"],[1,"text-2xl","mb-1"],[1,"text-xs"],[3,"saved","cancelled","role","availableAccounts"],[3,"saved","cancelled","script"],[1,"bg-slate-900","rounded-2xl","w-full","max-w-2xl","shadow-2xl","border","border-purple-500/30","overflow-hidden"],[1,"p-6","bg-gradient-to-r","from-purple-500/20","to-pink-500/20","border-b","border-slate-700/50"],[1,"text-slate-400","hover:text-white","p-2","hover:bg-slate-800","rounded-lg",3,"click"],[1,"p-6","space-y-6"],[1,"text-center","py-8"],[1,"space-y-4","max-h-[60vh]","overflow-y-auto"],[1,"p-6","border-t","border-slate-700/50","flex","gap-3"],["rows","3","placeholder","\u4F8B\u5982\uFF1A\u628A\u5C0D\u7522\u54C1\u6709\u8208\u8DA3\u4F46\u9084\u5728\u7336\u8C6B\u7684\u5BA2\u6236\u8F49\u5316\u6210\u4ED8\u8CBB\u7528\u6236...",1,"w-full","px-4","py-3","bg-slate-800","border","border-slate-700","rounded-xl","text-white","placeholder-slate-500","resize-none","focus:ring-2","focus:ring-purple-500","focus:border-transparent",3,"ngModelChange","click","ngModel"],[1,"grid","grid-cols-2","gap-3"],[1,"p-3","bg-slate-800","rounded-xl","text-left","hover:bg-slate-700","transition-colors","border","border-slate-700",3,"click"],[1,"text-lg","mb-1"],[1,"inline-block","animate-spin","text-4xl","mb-4"],[1,"text-white","font-medium"],[1,"text-slate-400","text-sm","mt-2"],[1,"mt-4","flex","items-center","justify-center","gap-2"],[1,"text-slate-500","text-xs","mt-3"],[1,"w-32","h-2","bg-slate-700","rounded-full","overflow-hidden"],[1,"h-full","bg-gradient-to-r","from-purple-500","to-pink-500","animate-pulse"],[1,"p-4","bg-indigo-500/10","border","border-indigo-500/30","rounded-xl"],[1,"p-4","bg-green-500/10","border","border-green-500/30","rounded-xl"],[1,"flex","items-center","justify-between","mb-2"],[1,"flex","items-center","gap-2","text-green-400"],[1,"font-medium"],[1,"px-2","py-1","bg-purple-500/20","text-purple-400","text-xs","rounded-full","flex","items-center","gap-1"],[1,"px-2","py-1","bg-slate-600/50","text-slate-400","text-xs","rounded-full","flex","items-center","gap-1"],[1,"text-slate-300"],[1,"text-sm","text-slate-400","mb-3"],[1,"p-4","rounded-xl","border-2","transition-all","text-left",3,"click"],[1,"flex","items-center","gap-2","mb-2"],[1,"text-xs","text-slate-400","space-y-1","mt-3"],[1,"mt-3","text-xs","text-blue-400"],[1,"text-xs","text-green-400"],[1,"mt-3","text-xs"],[1,"text-red-400"],[1,"mt-3","p-3","bg-amber-500/10","border","border-amber-500/30","rounded-lg"],[1,"mt-3","p-3","bg-green-500/10","border","border-green-500/30","rounded-lg"],[1,"p-3","rounded-lg","border","transition-all","text-left",3,"click"],[1,"flex","items-center","gap-2","mb-1"],[1,"px-1.5","py-0.5","bg-cyan-500","text-white","text-xs","rounded"],[1,"p-3","bg-slate-800","rounded-lg"],[1,"text-center","py-4"],[1,"border","border-slate-700/50","rounded-xl","overflow-hidden"],[1,"w-full","p-3","bg-slate-800/50","flex","items-center","justify-between","hover:bg-slate-800","transition-colors",3,"click"],[1,"px-2","py-0.5","bg-purple-500/20","text-purple-400","text-xs","rounded"],[1,"px-2","py-0.5","bg-cyan-500/20","text-cyan-400","text-xs","rounded"],[1,"text-slate-400","text-sm"],[1,"p-4","space-y-4","bg-slate-800/30"],[1,"text-xs","text-purple-400","hover:text-purple-300","flex","items-center","gap-1"],[1,"mb-3","p-3","bg-purple-500/10","border","border-purple-500/30","rounded-lg","text-sm"],[1,"bg-slate-800","rounded-lg","border","border-slate-700","overflow-hidden"],[1,"w-full","text-sm"],[1,"bg-slate-900/50"],[1,"text-slate-400","text-xs"],[1,"px-3","py-2","text-left"],[1,"px-3","py-2","text-center"],[1,"px-3","py-2","text-right"],[1,"divide-y","divide-slate-700/50"],[1,"hover:bg-slate-700/30"],[1,"hover:bg-slate-700/30","opacity-60"],[1,"mt-3","p-3","bg-slate-800","rounded-lg","border","border-slate-700"],[1,"mt-3","text-center","py-2","text-slate-400","text-sm"],[1,"mt-3","p-4","bg-amber-500/10","border","border-amber-500/30","rounded-lg"],[1,"mt-3","p-3","bg-cyan-500/10","border","border-cyan-500/30","rounded-lg","text-sm"],[1,"p-4","bg-pink-500/10","border","border-pink-500/30","rounded-xl"],[1,"text-slate-400"],[1,"text-lg","font-bold"],[1,"mt-2","text-xs","text-slate-500","border-t","border-slate-700","pt-2"],[1,"text-sm","text-indigo-400","font-medium","mb-3","flex","items-center","gap-2"],[1,"grid","grid-cols-2","gap-3","text-sm"],[1,"text-slate-500","text-xs","mb-1"],[1,"mt-3"],[1,"flex","flex-wrap","gap-2"],[1,"px-2","py-1","bg-red-500/20","text-red-400","text-xs","rounded"],[1,"px-2","py-1","bg-green-500/20","text-green-400","text-xs","rounded"],[1,"flex","items-center","gap-2","text-amber-400","text-sm"],[1,"mt-2","px-4","py-2","bg-amber-500/20","text-amber-400","rounded-lg","hover:bg-amber-500/30","text-sm",3,"click"],[1,"text-xs","text-green-400","font-medium","mb-2"],[1,"flex","items-center","gap-2","text-xs","text-slate-400"],[1,"px-2","py-1","bg-slate-700","rounded"],[1,"text-slate-500","mb-3"],[1,"flex","gap-2","justify-center","flex-wrap"],[1,"px-4","py-2","bg-purple-500/20","text-purple-400","rounded-lg","hover:bg-purple-500/30","text-sm",3,"click"],[1,"px-4","py-2","bg-amber-500/20","text-amber-400","rounded-lg","hover:bg-amber-500/30","text-sm",3,"click"],[1,"px-4","py-2","bg-cyan-500/20","text-cyan-400","rounded-lg","hover:bg-cyan-500/30","text-sm",3,"click"],["type","file","accept",".csv,.txt",1,"hidden",3,"change"],[1,"text-emerald-400","text-sm"],[1,"text-xs","text-slate-400","hover:text-white",3,"click"],[1,"text-xs","text-red-400","hover:text-red-300",3,"click"],[1,"px-2","py-1","bg-slate-700","rounded","text-xs","text-slate-300"],[1,"px-2","py-1","bg-slate-600","rounded","text-xs","text-slate-400"],[1,"text-amber-400","ml-1"],["type","range",1,"flex-1","h-2","bg-slate-700","rounded-lg","appearance-none","cursor-pointer","accent-purple-500",3,"input","min","max","value"],[1,"flex","gap-1"],[1,"w-8","h-8","rounded-lg","text-sm","font-medium","disabled:opacity-30","disabled:cursor-not-allowed",3,"bg-purple-500","text-white","bg-slate-700","text-slate-400","disabled"],[1,"mt-2","text-xs","text-slate-500"],[1,"flex","items-center","justify-between","p-3","bg-slate-900/50","rounded-lg"],[1,"text-sm","text-white"],[1,"w-12","h-6","rounded-full","transition-colors","relative",3,"click"],[1,"absolute","top-1","w-4","h-4","bg-white","rounded-full","transition-all"],[1,"w-8","h-8","rounded-lg","text-sm","font-medium","disabled:opacity-30","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-xs","text-purple-400","hover:text-purple-300",3,"click"],[1,"text-xs","text-slate-400","hover:text-slate-300",3,"click"],[1,"grid","grid-cols-2","gap-2"],[1,"mt-3","p-2","bg-slate-900/50","rounded-lg"],[1,"p-3","rounded-lg","border-2","transition-all","text-left",3,"border-purple-500","bg-purple-500/10","border-slate-700","bg-slate-800"],[1,"p-3","rounded-lg","border-2","transition-all","text-left",3,"click"],[1,"w-2","h-2","bg-green-500","rounded-full"],[1,"text-sm","text-white","truncate"],[1,"mt-2"],[1,"w-full","px-2","py-1","bg-slate-900","border","border-slate-600","rounded","text-xs","text-white",3,"click","change","value"],["value",""],[3,"value"],[1,"text-xs","text-slate-400","mb-1"],[1,"px-2","py-1","bg-slate-700","rounded","text-xs","text-white","flex","items-center","gap-1"],[1,"text-purple-400"],[1,"text-xs","text-purple-400","hover:text-purple-300","flex","items-center","gap-1",3,"click"],[1,"flex","items-start","gap-2"],[1,"mb-1"],[1,"text-xs","text-slate-400","space-y-1","ml-4","list-disc"],[1,"px-3","py-2"],[1,"text-slate-500","italic"],[1,"px-2","py-0.5","bg-emerald-500/20","text-emerald-400","text-xs","rounded"],[1,"px-2","py-0.5","bg-amber-500/20","text-amber-400","text-xs","rounded"],[1,"px-3","py-2","text-right","relative"],[1,"relative","inline-block"],[1,"text-xs","text-purple-400","hover:text-purple-300","px-2","py-1","hover:bg-purple-500/10","rounded","flex","items-center","gap-1",3,"click"],[1,"absolute","right-0","top-full","mt-1","w-48","bg-slate-800","border","border-slate-600","rounded-lg","shadow-xl","z-50","overflow-hidden"],[1,"w-2","h-2","rounded-full","bg-emerald-500"],[1,"absolute","right-0","top-full","mt-1","w-48","bg-slate-800","border","border-slate-600","rounded-lg","shadow-xl","z-50","overflow-hidden",3,"click"],[1,"px-3","py-2","bg-slate-900/50","border-b","border-slate-700"],[1,"max-h-48","overflow-y-auto"],[1,"w-full","px-3","py-2","text-left","hover:bg-slate-700/50","flex","items-center","gap-2","text-sm",3,"bg-purple-500/20"],[1,"border-t","border-slate-700"],[1,"w-full","px-3","py-2","text-left","hover:bg-red-500/10","text-red-400","text-sm","flex","items-center","gap-2",3,"click"],[1,"w-full","px-3","py-2","text-left","hover:bg-slate-700/50","flex","items-center","gap-2","text-sm",3,"click"],[1,"flex-1"],[1,"text-xs","text-purple-400"],[1,"w-2","h-2","rounded-full","bg-slate-500"],[1,"px-2","py-0.5","bg-slate-500/20","text-slate-400","text-xs","rounded"],[1,"text-xs","text-slate-400","hover:text-white","px-2","py-1","hover:bg-slate-500/10","rounded","flex","items-center","gap-1",3,"click"],[1,"w-full","px-3","py-2","text-left","hover:bg-slate-700/50","flex","items-center","gap-2","text-sm"],[1,"w-full","px-3","py-2","text-left","hover:bg-slate-700/50","text-slate-400","text-sm","flex","items-center","gap-2",3,"click"],[1,"text-xs","text-slate-500","mb-2"],[1,"text-sm","text-slate-300","italic"],[1,"animate-pulse"],[1,"flex","items-start","gap-3"],[1,"text-amber-400","text-sm"],[1,"text-amber-400","font-medium","mb-1"],[1,"text-sm","text-slate-300","mb-3"],[1,"px-4","py-2","bg-purple-500","text-white","rounded-lg","text-sm","hover:bg-purple-600",3,"click"],[1,"px-4","py-2","bg-slate-700","text-slate-300","rounded-lg","text-sm","hover:bg-slate-600",3,"click"],[1,"ml-2","text-purple-400","hover:text-purple-300",3,"click"],[1,"flex","items-center","gap-2","text-cyan-400"],[1,"text-slate-400","mt-1","text-xs"],[1,"space-y-3"],[1,"p-3","bg-slate-800","rounded-lg","border","border-slate-700"],[1,"w-7","h-7","rounded-full","bg-purple-500/30","text-purple-400","text-sm","flex","items-center","justify-center","font-medium"],[1,"text-xs","text-slate-500","mt-0.5"],[1,"mt-2","p-2","bg-slate-900/50","rounded","border-l-2","border-cyan-500","ml-10"],[1,"text-xs","text-slate-500","mb-1"],[1,"text-sm","text-pink-400","font-medium","mb-2"],[1,"text-xs","text-slate-300","space-y-1"],[1,"flex-1","py-3","bg-slate-700","text-slate-300","rounded-xl","hover:bg-slate-600","transition-colors",3,"click"],[1,"flex-1","py-3","bg-gradient-to-r","from-purple-500","to-pink-500","text-white","font-medium","rounded-xl","hover:opacity-90","transition-opacity","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex-1","py-3","bg-gradient-to-r","from-blue-500","to-cyan-500","text-white","font-medium","rounded-xl","hover:opacity-90","transition-opacity"],[1,"flex-1","py-3","bg-gradient-to-r","from-green-500","to-emerald-500","text-white","font-medium","rounded-xl","hover:opacity-90","transition-opacity","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"flex-1","py-3","bg-gradient-to-r","from-blue-500","to-cyan-500","text-white","font-medium","rounded-xl","hover:opacity-90","transition-opacity",3,"click"],[1,"flex-1","py-3","bg-gradient-to-r","from-green-500","to-emerald-500","text-white","font-medium","rounded-xl","hover:opacity-90","transition-opacity","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"inline-block","animate-spin","mr-2"],[1,"inline-block","animate-pulse","mr-2"],[1,"bg-slate-800","rounded-2xl","w-full","max-w-2xl","shadow-xl","border","border-slate-700","flex","flex-col","max-h-[80vh]"],[1,"p-6","border-b","border-slate-700/50"],[1,"flex","items-start","justify-between"],[1,"text-slate-400","text-sm","mt-1"],[1,"px-3","py-1.5","bg-cyan-500/20","text-cyan-400","rounded-lg","text-sm","hover:bg-cyan-500/30","disabled:opacity-50","flex","items-center","gap-1",3,"click","disabled"],[1,"p-4","border-b","border-slate-700/50"],[1,"flex","gap-3"],[1,"flex-1","relative"],["type","text","placeholder","\u641C\u7D22\u7528\u6236\u540D\u3001\u59D3\u540D\u6216 Telegram ID...",1,"w-full","px-4","py-2.5","pr-10","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500",3,"ngModelChange","keyup.enter","ngModel"],[1,"absolute","right-3","top-1/2","-translate-y-1/2","text-slate-400","hover:text-white"],[1,"px-4","py-2","bg-purple-500/20","text-purple-400","rounded-lg","hover:bg-purple-500/30","text-sm","flex","items-center","gap-1",3,"click"],[1,"px-4","py-2","bg-slate-700","text-slate-300","rounded-lg","hover:bg-slate-600","text-sm",3,"click"],[1,"flex","gap-2","mt-3"],[1,"px-3","py-1.5","bg-amber-500/20","text-amber-400","rounded-lg","text-sm","hover:bg-amber-500/30",3,"click"],[1,"text-slate-500","text-sm","flex","items-center"],[1,"text-center","py-8","text-slate-500"],[1,"space-y-2"],[1,"flex-1","py-3","bg-gradient-to-r","from-purple-500","to-pink-500","text-white","font-medium","rounded-xl","hover:opacity-90","transition-opacity","disabled:opacity-50",3,"click","disabled"],[1,"animate-spin"],[1,"absolute","right-3","top-1/2","-translate-y-1/2","text-slate-400","hover:text-white",3,"click"],[1,"text-4xl","mb-3"],[1,"text-sm","mt-1"],[1,"flex","items-center","gap-3","p-3","rounded-lg","cursor-pointer","transition-all",3,"bg-purple-500/20","border-purple-500","bg-slate-700/50","hover:bg-slate-700","border","border-transparent"],[1,"flex","items-center","gap-3","p-3","rounded-lg","cursor-pointer","transition-all",3,"click"],[1,"w-5","h-5","rounded","border-2","flex","items-center","justify-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3","h-3","text-white"],[1,"w-10","h-10","rounded-full","bg-gradient-to-br","from-purple-500","to-pink-500","flex","items-center","justify-center","text-white","font-medium"],[1,"text-right"],[1,"text-sm","font-bold"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"bg-slate-800","rounded-2xl","w-full","max-w-md","p-6","shadow-xl","border","border-slate-700"],[1,"text-xl","font-bold","text-white","mb-6","flex","items-center","gap-2"],["type","text","placeholder","\u5982\uFF1A\u65B0\u5BA2\u6236\u8F49\u5316\u5287\u672C",1,"w-full","px-4","py-2.5","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500",3,"ngModelChange","ngModel"],["rows","3","placeholder","\u63CF\u8FF0\u9019\u500B\u5287\u672C\u7684\u4F7F\u7528\u5834\u666F\u548C\u76EE\u6A19...",1,"w-full","px-4","py-3","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-slate-500","resize-none",3,"ngModelChange","ngModel"],[1,"p-3","bg-slate-700/50","rounded-lg","text-left","hover:bg-slate-700","transition-colors",3,"click"],[1,"flex-1","py-2.5","bg-purple-500","text-white","rounded-lg","hover:bg-purple-400","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"]],template:function(e,n){if(e&1&&(i(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h1",6)(5,"span",7),a(6,"\u{1F3AD}"),o(),a(7," \u89D2\u8272\u8CC7\u6E90\u5EAB "),o(),i(8,"div",8),h(9,fo,3,1,"span",9)(10,ho,2,0,"span",10),o()(),i(11,"div",11)(12,"div",12)(13,"div",13),a(14),o(),i(15,"div",14),a(16,"\u89D2\u8272"),o()(),R(17,"div",15),i(18,"div",12)(19,"div",16),a(20),o(),i(21,"div",14),a(22,"\u5287\u672C"),o()(),R(23,"div",15),i(24,"div",12)(25,"div",17),a(26),o(),i(27,"div",14),a(28,"\u5DF2\u5C31\u7DD2"),o()()()(),i(29,"div",18),F(30,bo,5,18,"button",19,pe),o()(),i(32,"div",20),h(33,yo,28,0,"div",21)(34,So,1,0,"app-role-library")(35,Eo,10,0,"div",21)(36,Mo,19,1,"div",22)(37,Vo,33,1,"div",22)(38,$o,11,1,"div",22)(39,Lo,1,0,"app-workflow-config")(40,jo,1,0,"app-workflow-monitor")(41,Uo,1,0,"app-workflow-analytics")(42,Wo,74,27,"div",23),o(),h(43,Oo,30,3,"div",24),h(44,Ho,1,2,"app-role-editor",25),h(45,zo,1,1,"app-script-editor",26),h(46,na,17,5,"div",27),h(47,ma,36,9,"div",24),h(48,pa,45,3,"div",24),o()),e&2){let r;s(9),b(n.multiRoleService.activeGroupCount()>0?9:10),s(5),_(n.multiRoleService.roles().length),s(6),_(n.multiRoleService.scripts().length),s(6),_(n.multiRoleService.availableRoles().length),s(4),A(n.tabs),s(3),b((r=n.activeTab())==="dashboard"?33:r==="library"?34:r==="scenarios"?35:r==="roles"?36:r==="scripts"?37:r==="groups"?38:r==="workflow"?39:r==="monitor"?40:r==="analytics"?41:r==="settings"?42:-1),s(10),b(n.showAddRole()?43:-1),s(),b(n.showRoleEditor()?44:-1),s(),b(n.showScriptEditor()?45:-1),s(),b(n.showAIPlannerDialog()?46:-1),s(),b(n.showTargetUserSelector()?47:-1),s(),b(n.showNewScriptDialog()?48:-1)}},dependencies:[K,ne,ye,Se,le,Fe,Le,$e,se,ke,je,ue,Oe,He,ze,Ye,Je,Xe,Ze,et],encapsulation:2})}};var Bt=class l{constructor(){this.i18n=I(yt);this.nav=I(St);this.membershipService=I(ht);this.accountService=I(Ue)}navigateTo(t){this.nav.navigateTo(t)}t(t,e){return this.i18n.t(t,e)}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=Q({type:l,selectors:[["app-multi-role-view"]],decls:1,vars:0,consts:[[3,"navigateTo"]],template:function(e,n){e&1&&(i(0,"app-multi-role-center",0),g("navigateTo",function(u){return n.navigateTo(u)}),o())},dependencies:[K,ne,nt],encapsulation:2,changeDetection:0})}};export{Ee as a,Bt as b};
