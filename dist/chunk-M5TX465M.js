import{h as ue}from"./chunk-IWXYAO3A.js";import{a as pe}from"./chunk-N6Z24AKW.js";import{a as U,b as me,d as ge}from"./chunk-43M2OKI7.js";import{a as G}from"./chunk-YKEUYVE5.js";import{b as H}from"./chunk-CXXWQ5XE.js";import{a as $,b as ee,c as te,f as ne,h as ie,j as oe,k as re,l as ae,m as le,n as ce,o as se,s as de,t as N}from"./chunk-36YFMG3E.js";import{$a as C,Aa as l,Ab as L,Eb as x,Fb as b,Gb as h,Na as z,R as k,Sa as X,W as u,X as m,Y as V,Z as B,_a as _,a as O,b as W,bb as Q,ca as T,cb as F,db as P,eb as w,fb as n,ga as v,gb as i,hb as S,ka as J,lb as f,mc as Z,nb as g,pb as d,qc as R,ub as E,vb as M,wa as q,wb as I,xb as a,yb as p,zb as y}from"./chunk-YLSLTE5F.js";var D=(s,r)=>r.id;function fe(s,r){if(s&1&&(n(0,"option",13),a(1),i()),s&2){let e=r.$implicit;w("value",e.id),l(),y("\u{1F4C1} ",e.name)}}function ve(s,r){if(s&1&&(n(0,"span",16),a(1),i()),s&2){let e=d();l(),p(e.tagFilter.length)}}function ye(s,r){if(s&1){let e=f();n(0,"label",51)(1,"input",35),g("change",function(){let t=u(e).$implicit,c=d(2);return m(c.toggleTagFilterItem(t.id))}),i(),S(2,"span",52),n(3,"span"),a(4),i()()}if(s&2){let e=r.$implicit,o=d(2);E("--tag-color",e.color),l(),w("checked",o.tagFilter.includes(e.id)),l(),E("background",e.color),l(2),p(e.name)}}function we(s,r){if(s&1){let e=f();n(0,"div",17)(1,"div",47)(2,"span"),a(3,"\u9009\u62E9\u6807\u7B7E"),i(),n(4,"button",48),g("click",function(){u(e);let t=d();return m(t.clearTagFilter())}),a(5,"\u6E05\u9664"),i()(),F(6,ye,5,6,"label",49,D),n(8,"button",50),g("click",function(){u(e);let t=d();return m(t.openTagManager())}),a(9,"\u2699\uFE0F \u7BA1\u7406\u6807\u7B7E"),i()()}if(s&2){let e=d();l(6),P(e.availableTags())}}function Ee(s,r){if(s&1){let e=f();n(0,"div",43)(1,"span",53),a(2),i(),n(3,"button",54),g("click",function(){u(e);let t=d();return m(t.batchLogin())}),a(4),i(),n(5,"button",55),g("click",function(){u(e);let t=d();return m(t.batchLogout())}),a(6),i(),n(7,"button",56),g("click",function(){u(e);let t=d();return m(t.openBatchEditModal())}),a(8," \u2699\uFE0F \u6279\u91CF\u8BBE\u7F6E "),i(),n(9,"button",57),g("click",function(){u(e);let t=d();return m(t.batchSync())}),a(10," \u{1F504} \u6279\u91CF\u540C\u6B65 "),i(),n(11,"button",58),g("click",function(){u(e);let t=d();return m(t.confirmBatchDelete())}),a(12," \u{1F5D1}\uFE0F \u6279\u91CF\u5220\u9664 "),i(),n(13,"button",59),g("click",function(){u(e);let t=d();return m(t.clearSelection())}),a(14," \u2715 \u53D6\u6D88\u9009\u62E9 "),i()()}if(s&2){let e=d();l(2),y("\u5DF2\u9078 ",e.selectedIds.size," \u500B"),l(),w("disabled",e.batchLoggingIn()),l(),y(" ",e.batchLoggingIn()?"\u23F3":"\u25B6\uFE0F"," \u6279\u91CF\u767B\u5165 "),l(),w("disabled",e.batchLoggingOut()),l(),y(" ",e.batchLoggingOut()?"\u23F3":"\u23F9\uFE0F"," \u6279\u91CF\u9000\u51FA "),l(3),w("disabled",e.batchSyncing())}}function Me(s,r){if(s&1){let e=f();n(0,"div",64)(1,"img",96),g("error",function(t){u(e);let c=d(3);return m(c.onAvatarError(t))}),i(),n(2,"div",97),a(3),i()()}if(s&2){let e=d().$implicit,o=d(2);l(),w("src",o.getAvatarUrl(e.avatarPath),q),l(2),p(o.getAvatarLetter(e))}}function Ae(s,r){if(s&1&&(n(0,"div",65),a(1),i()),s&2){let e=d().$implicit,o=d(2);l(),p(o.getAvatarLetter(e))}}function Fe(s,r){if(s&1&&(n(0,"div",75),a(1),i()),s&2){let e=d().$implicit;l(),p(e.nickname)}}function Pe(s,r){if(s&1&&(n(0,"span",78),a(1),i()),s&2){let e=d().$implicit;l(),p("@"+e.username)}}function Se(s,r){if(s&1&&(n(0,"span",100),a(1),i()),s&2){let e=r;E("background",e.color),l(),p(e.name)}}function De(s,r){if(s&1&&_(0,Se,2,3,"span",99),s&2){let e,o=r.$implicit,t=d(4);C((e=t.getTagById(o))?0:-1,e)}}function ke(s,r){if(s&1&&(n(0,"span",98),a(1),i()),s&2){let e=d(2).$implicit;l(),y("+",e.tags.length-3)}}function Te(s,r){if(s&1&&(n(0,"div",79),F(1,De,1,1,null,null,Q),_(3,ke,2,1,"span",98),i()),s&2){let e=d().$implicit;l(),P(e.tags.slice(0,3)),l(2),C(e.tags.length>3?3:-1)}}function Le(s,r){s&1&&a(0," \u6B63\u5728\u9023\u63A5... ")}function Oe(s,r){s&1&&a(0," \u7B49\u5F85\u9A57\u8B49\u78BC ")}function Ve(s,r){s&1&&a(0," \u7B49\u5F852FA\u5BC6\u78BC ")}function Be(s,r){if(s&1&&a(0),s&2){let e,o=d(2).$implicit,t=d(2);y(" ",((e=t.getLoginProgress(o.id))==null?null:e.step)||"\u8655\u7406\u4E2D..."," ")}}function Ie(s,r){if(s&1&&(n(0,"div",87),S(1,"div",101),n(2,"span",102),_(3,Le,1,0)(4,Oe,1,0)(5,Ve,1,0)(6,Be,1,1),i()()),s&2){let e,o=d().$implicit;l(3),C((e=o.status)==="Logging in..."?3:e==="Waiting Code"?4:e==="Waiting 2FA"?5:6)}}function We(s,r){if(s&1){let e=f();n(0,"button",103),g("click",function(){u(e);let t=d().$implicit,c=d(2);return m(c.onLogin(t))}),n(1,"span",93),a(2,"\u25B6\uFE0F"),i(),n(3,"span",94),a(4,"\u767B\u5165"),i()()}}function ze(s,r){s&1&&(n(0,"button",90)(1,"span",104),a(2,"\u23F3"),i(),n(3,"span",94),a(4,"\u767B\u5165\u4E2D"),i()())}function Re(s,r){if(s&1){let e=f();n(0,"button",105),g("click",function(){u(e);let t=d().$implicit,c=d(2);return m(c.onLogout(t))}),n(1,"span",93),a(2,"\u23F9\uFE0F"),i(),n(3,"span",94),a(4,"\u9000\u51FA"),i()()}}function Ne(s,r){if(s&1){let e=f();n(0,"div",61),g("click",function(){let t=u(e).$implicit,c=d(2);return m(c.selectAccount(t))}),n(1,"div",62),g("click",function(t){return u(e),m(t.stopPropagation())}),n(2,"input",35),g("change",function(){let t=u(e).$implicit,c=d(2);return m(c.toggleSelect(t.id))}),i()(),n(3,"div",63),_(4,Me,4,2,"div",64)(5,Ae,2,1,"div",65),n(6,"div",66)(7,"div",67),S(8,"span",68),n(9,"span",69),a(10),i()(),n(11,"div",70),g("click",function(t){let c=u(e).$implicit,A=d(2);return m(A.openRoleSelector(c,t))}),n(12,"span",71),a(13),i(),n(14,"span",72),a(15),i(),n(16,"span",73),a(17,"\u25BC"),i()()()(),n(18,"div",74),_(19,Fe,2,1,"div",75),n(20,"div",76),a(21),i(),n(22,"div",77),a(23),_(24,Pe,2,1,"span",78),i(),_(25,Te,4,1,"div",79),i(),n(26,"div",80)(27,"span",81),a(28),i(),n(29,"span",82),a(30),i()(),n(31,"div",83)(32,"div",84),S(33,"div",85),i(),n(34,"span",86),a(35),i()(),_(36,Ie,7,1,"div",87),n(37,"div",88),g("click",function(t){return u(e),m(t.stopPropagation())}),_(38,We,5,0,"button",89),_(39,ze,5,0,"button",90),_(40,Re,5,0,"button",91),n(41,"button",92),g("click",function(t){let c=u(e).$implicit;return d(2).openEditModal(c),m(t.stopPropagation())}),n(42,"span",93),a(43,"\u2699\uFE0F"),i(),n(44,"span",94),a(45,"\u8BBE\u7F6E"),i()(),n(46,"button",95),g("click",function(){let t=u(e).$implicit,c=d(2);return m(c.onRemove(t))}),n(47,"span",93),a(48,"\u{1F5D1}\uFE0F"),i(),n(49,"span",94),a(50,"\u5220\u9664"),i()()()()}if(s&2){let e=r.$implicit,o=d(2);M("online",e.status==="Online")("offline",e.status==="Offline")("banned",e.status==="Banned")("warming",e.status==="Warming Up")("logging-in",o.isLoggingIn(e.id)||e.status==="Logging in..."||e.status==="Waiting Code"||e.status==="Waiting 2FA")("selected",o.selectedIds.has(e.id)),l(2),w("checked",o.selectedIds.has(e.id)),l(2),C(o.isValidAvatarPath(e.avatarPath)?4:5),l(4),I(o.getStatusClass(e.status)),l(2),p(o.getStatusText(e.status)),l(3),p(o.getRoleIcon(e.role)),l(),E("color",o.getRoleColor(e.role)),l(),p(o.getRoleName(e.role)),l(4),C(e.nickname?19:-1),l(2),p(e.phone),l(2),L(" ",e.firstName||""," ",e.lastName||""," "),l(),C(e.username?24:-1),l(),C(e.tags&&e.tags.length>0?25:-1),l(3),p(o.getDeviceIcon(e.platform)),l(2),p(e.deviceModel||"Unknown Device"),l(3),E("width",e.healthScore||100,"%"),M("good",(e.healthScore||100)>=80)("warning",(e.healthScore||100)>=50&&(e.healthScore||100)<80)("danger",(e.healthScore||100)<50),l(2),y("",e.healthScore||100,"%"),l(),C(o.isLoggingIn(e.id)||e.status==="Logging in..."||e.status==="Waiting Code"||e.status==="Waiting 2FA"?36:-1),l(2),C(o.canLogin(e)&&!o.isLoggingIn(e.id)?38:-1),l(),C(o.isLoggingIn(e.id)||e.status==="Logging in..."||e.status==="Waiting Code"||e.status==="Waiting 2FA"?39:-1),l(),C(e.status==="Online"?40:-1),l(6),w("disabled",o.isLoggingIn(e.id))}}function Ge(s,r){if(s&1&&(n(0,"div",44),F(1,Ne,51,43,"div",60,D),i()),s&2){let e=d();l(),P(e.filteredAccounts)}}function Ue(s,r){if(s&1){let e=f();n(0,"button",122),g("click",function(){u(e);let t=d().$implicit,c=d(2);return m(c.onLogin(t))}),a(1,"\u25B6\uFE0F"),i()}}function He(s,r){if(s&1){let e=f();n(0,"button",123),g("click",function(){u(e);let t=d().$implicit,c=d(2);return m(c.onLogout(t))}),a(1,"\u23F9\uFE0F"),i()}}function je(s,r){if(s&1){let e=f();n(0,"tr",109),g("click",function(){let t=u(e).$implicit,c=d(2);return m(c.selectAccount(t))}),n(1,"td",109),g("click",function(t){return u(e),m(t.stopPropagation())}),n(2,"input",35),g("change",function(){let t=u(e).$implicit,c=d(2);return m(c.toggleSelect(t.id))}),i()(),n(3,"td"),S(4,"span",110),i(),n(5,"td",111),a(6),i(),n(7,"td",112)(8,"span",113),g("click",function(t){let c=u(e).$implicit,A=d(2);return m(A.openRoleSelector(c,t))}),a(9),i()(),n(10,"td"),a(11),i(),n(12,"td",114),a(13),i(),n(14,"td")(15,"div",115)(16,"div",116),S(17,"div",85),i(),n(18,"span"),a(19),i()()(),n(20,"td"),a(21),i(),n(22,"td",117),g("click",function(t){return u(e),m(t.stopPropagation())}),_(23,Ue,2,0,"button",118),_(24,He,2,0,"button",119),n(25,"button",120),g("click",function(t){let c=u(e).$implicit;return d(2).openEditModal(c),m(t.stopPropagation())}),a(26,"\u2699\uFE0F"),i(),n(27,"button",121),g("click",function(){let t=u(e).$implicit,c=d(2);return m(c.onRemove(t))}),a(28,"\u{1F5D1}\uFE0F"),i()()()}if(s&2){let e=r.$implicit,o=d(2);M("selected",o.selectedIds.has(e.id)),l(2),w("checked",o.selectedIds.has(e.id)),l(2),I(o.getStatusClass(e.status)),l(2),p(e.phone),l(2),E("background",o.getRoleColor(e.role)+"20")("color",o.getRoleColor(e.role))("border-color",o.getRoleColor(e.role)+"40"),l(),L(" ",o.getRoleIcon(e.role)," ",o.getRoleName(e.role)," "),l(2),p((e.firstName||"")+" "+(e.lastName||"")),l(2),p(e.deviceModel||"-"),l(4),E("width",e.healthScore||100,"%"),l(2),y("",e.healthScore||100,"%"),l(2),L("",e.dailySendCount||0,"/",e.dailySendLimit||50),l(2),C(o.canLogin(e)?23:-1),l(),C(e.status==="Online"?24:-1)}}function Ke(s,r){if(s&1){let e=f();n(0,"div",45)(1,"table",106)(2,"thead")(3,"tr")(4,"th")(5,"input",107),h("ngModelChange",function(t){u(e);let c=d();return b(c.selectAll,t)||(c.selectAll=t),m(t)}),g("change",function(){u(e);let t=d();return m(t.toggleSelectAll())}),i()(),n(6,"th"),a(7,"\u72B6\u6001"),i(),n(8,"th"),a(9,"\u624B\u6A5F\u865F"),i(),n(10,"th"),a(11,"\u89D2\u8272"),i(),n(12,"th"),a(13,"\u540D\u7A31"),i(),n(14,"th"),a(15,"\u8BBE\u5907"),i(),n(16,"th"),a(17,"\u5065\u5EB7\u5EA6"),i(),n(18,"th"),a(19,"\u4ECA\u65E5\u53D1\u9001"),i(),n(20,"th"),a(21,"\u64CD\u4F5C"),i()()(),n(22,"tbody"),F(23,je,29,23,"tr",108,D),i()()()}if(s&2){let e=d();l(5),x("ngModel",e.selectAll),l(18),P(e.filteredAccounts)}}function qe(s,r){if(s&1){let e=f();n(0,"div",46)(1,"div",124),a(2,"\u{1F465}"),i(),n(3,"h3"),a(4),i(),n(5,"p"),a(6),i(),n(7,"button",125),g("click",function(){u(e);let t=d();return m(t.addAccount.emit())}),a(8),i()()}if(s&2){let e=d();l(4),p(e.t("accounts.noAccountsYet")),l(2),p(e.t("accounts.clickToAddFirst")),l(2),y(" \u2795 ",e.t("accounts.addAccount")," ")}}function Qe(s,r){s&1&&(n(0,"div",46)(1,"div",124),a(2,"\u{1F50D}"),i(),n(3,"h3"),a(4,"\u6C92\u6709\u627E\u5230\u5339\u914D\u7684\u8D26\u6237"),i(),n(5,"p"),a(6,"\u8ACB\u5617\u8A66\u8ABF\u6574\u641C\u7D22\u689D\u4EF6\u6216\u7BE9\u9078\u5668"),i()())}function Ye(s,r){if(s&1){let e=f();n(0,"div",132)(1,"img",163),g("error",function(t){u(e);let c=d(2);return m(c.onAvatarError(t))}),i(),n(2,"div",164),a(3),i()()}if(s&2){let e=d(2);l(),w("src",e.getAvatarUrl(e.selectedAccount().avatarPath),q),l(2),y(" ",e.getAvatarLetter(e.selectedAccount())," ")}}function Je(s,r){if(s&1&&(n(0,"div",133),a(1),i()),s&2){let e=d(2);l(),y(" ",e.getAvatarLetter(e.selectedAccount())," ")}}function Xe(s,r){if(s&1&&(n(0,"div",165),a(1),i()),s&2){let e=d(2);l(),y(" ",e.selectedAccount().nickname," ")}}function Ze(s,r){if(s&1&&(n(0,"div",137),a(1),i()),s&2){let e=d(2);l(),p("@"+e.selectedAccount().username)}}function $e(s,r){if(s&1&&(n(0,"div",142),a(1),i()),s&2){let e=d(2);l(),p(e.selectedAccount().bio)}}function et(s,r){if(s&1&&(n(0,"span",100),a(1),i()),s&2){let e=r;E("background",e.color),l(),p(e.name)}}function tt(s,r){if(s&1&&_(0,et,2,3,"span",99),s&2){let e,o=r.$implicit,t=d(3);C((e=t.getTagById(o))?0:-1,e)}}function nt(s,r){if(s&1&&F(0,tt,1,1,null,null,Q),s&2){let e=d(2);P(e.selectedAccount().tags)}}function it(s,r){s&1&&(n(0,"span",153),a(1,"\u7121\u6807\u7B7E"),i())}function ot(s,r){s&1&&a(0," \u6B63\u5728\u9023\u63A5 Telegram \u670D\u52D9\u5668... ")}function rt(s,r){s&1&&a(0," \u7B49\u5F85\u8F38\u5165\u9A57\u8B49\u78BC... ")}function at(s,r){s&1&&a(0," \u7B49\u5F85\u8F38\u5165\u5169\u6B65\u9A5F\u9A57\u8B49\u5BC6\u78BC... ")}function lt(s,r){if(s&1&&a(0),s&2){let e,o=d(3);y(" ",((e=o.getLoginProgress(o.selectedAccount().id))==null?null:e.step)||"\u8655\u7406\u4E2D..."," ")}}function ct(s,r){if(s&1&&(n(0,"div",155),S(1,"div",101),n(2,"span",166),_(3,ot,1,0)(4,rt,1,0)(5,at,1,0)(6,lt,1,1),i()()),s&2){let e,o=d(2);l(3),C((e=o.selectedAccount().status)==="Logging in..."?3:e==="Waiting Code"?4:e==="Waiting 2FA"?5:6)}}function st(s,r){if(s&1){let e=f();n(0,"button",167),g("click",function(){u(e);let t=d(2);return m(t.onLogin(t.selectedAccount()))}),a(1,"\u25B6\uFE0F \u767B\u5165"),i()}}function dt(s,r){s&1&&(n(0,"button",158),a(1,"\u23F3 \u767B\u5165\u4E2D..."),i())}function ut(s,r){if(s&1){let e=f();n(0,"button",168),g("click",function(){u(e);let t=d(2);return m(t.onLogout(t.selectedAccount()))}),a(1,"\u23F9\uFE0F \u9000\u51FA"),i()}}function mt(s,r){if(s&1){let e=f();n(0,"div",126),g("click",function(){u(e);let t=d();return m(t.closeDetail())}),i(),n(1,"div",127)(2,"div",128)(3,"h3"),a(4,"\u8D26\u6237\u8BE6\u60C5"),i(),n(5,"button",129),g("click",function(){u(e);let t=d();return m(t.closeDetail())}),a(6,"\xD7"),i()(),n(7,"div",130)(8,"div",131),_(9,Ye,4,2,"div",132)(10,Je,2,1,"div",133),X(11,Xe,2,1,"div",134),n(12,"div",135),a(13),i(),n(14,"div",136),a(15),i(),_(16,Ze,2,1,"div",137),n(17,"div",138),g("click",function(t){u(e);let c=d();return m(c.openRoleSelector(c.selectedAccount(),t))}),n(18,"span",139),a(19),i(),n(20,"span",140),a(21),i(),n(22,"span",141),a(23,"\u9EDE\u64CA\u66F4\u6539"),i()(),_(24,$e,2,1,"div",142),i(),n(25,"div",131)(26,"h4"),a(27,"\u{1F4CA} \u72B6\u6001\u4FE1\u606F"),i(),n(28,"div",143)(29,"div",144)(30,"span",145),a(31,"\u767B\u5165\u72B6\u6001"),i(),n(32,"span",146),a(33),i()(),n(34,"div",144)(35,"span",145),a(36,"\u5065\u5EB7\u5206\u6570"),i(),n(37,"span",147),a(38),i()(),n(39,"div",144)(40,"span",145),a(41,"\u4ECA\u65E5\u53D1\u9001"),i(),n(42,"span",147),a(43),i()(),n(44,"div",144)(45,"span",145),a(46,"\u89D2\u8272"),i(),n(47,"div",148),g("click",function(t){u(e);let c=d();return m(c.openRoleSelector(c.selectedAccount(),t))}),n(48,"span",149),a(49),i(),n(50,"span",150),a(51,"\u270F\uFE0F"),i()()(),n(52,"div",144)(53,"span",145),a(54,"\u5206\u7D44"),i(),n(55,"span",147),a(56),i()(),n(57,"div",151)(58,"span",145),a(59,"\u6807\u7B7E"),i(),n(60,"div",152),_(61,nt,2,0)(62,it,2,0,"span",153),i()()()(),n(63,"div",131)(64,"h4"),a(65,"\u{1F527} \u8BBE\u5907\u4FE1\u606F"),i(),n(66,"div",143)(67,"div",144)(68,"span",145),a(69,"\u8BBE\u5907\u578B\u865F"),i(),n(70,"span",147),a(71),i()(),n(72,"div",144)(73,"span",145),a(74,"\u7CFB\u7D71\u7248\u672C"),i(),n(75,"span",147),a(76),i()(),n(77,"div",144)(78,"span",145),a(79,"\u5E73\u53F0"),i(),n(80,"span",147),a(81),i()(),n(82,"div",144)(83,"span",145),a(84,"API ID"),i(),n(85,"span",147),a(86),i()()()(),n(87,"div",131)(88,"h4"),a(89,"\u{1F310} \u4EE3\u7406\u8BBE\u7F6E"),i(),n(90,"div",143)(91,"div",154)(92,"span",145),a(93,"\u4EE3\u7406\u5730\u5740"),i(),n(94,"span",147),a(95),i()(),n(96,"div",144)(97,"span",145),a(98,"\u4EE3\u7406\u7C7B\u578B"),i(),n(99,"span",147),a(100),i()(),n(101,"div",144)(102,"span",145),a(103,"\u4EE3\u7406\u56FD\u5BB6"),i(),n(104,"span",147),a(105),i()()()()(),_(106,ct,7,1,"div",155),n(107,"div",156),_(108,st,2,0,"button",157),_(109,dt,2,0,"button",158),_(110,ut,2,0,"button",159),n(111,"button",160),g("click",function(){u(e);let t=d();return m(t.syncAccountInfo(t.selectedAccount()))}),a(112),i(),n(113,"button",161),g("click",function(){u(e);let t=d();return m(t.openAccountTagEditor(t.selectedAccount()))}),a(114,"\u{1F3F7}\uFE0F \u6807\u7B7E"),i(),n(115,"button",161),g("click",function(){u(e);let t=d();return m(t.openPersonaManager(t.selectedAccount()))}),a(116,"\u{1F916} \u4EBA\u8A2D"),i(),n(117,"button",161),g("click",function(){u(e);let t=d();return m(t.onExport(t.selectedAccount()))}),a(118,"\u{1F4E4} \u5C0E\u51FA"),i(),n(119,"button",161),g("click",function(){u(e);let t=d();return m(t.openEditModal(t.selectedAccount()))}),a(120,"\u270F\uFE0F \u7F16\u8F91"),i(),n(121,"button",162),g("click",function(){u(e);let t=d();return m(t.onRemove(t.selectedAccount()))}),a(122,"\u{1F5D1}\uFE0F \u5220\u9664"),i()()()}if(s&2){let e=d();l(),M("open",e.selectedAccount()),l(8),C(e.isValidAvatarPath(e.selectedAccount().avatarPath)?9:10),l(2),w("ngIf",e.selectedAccount().nickname),l(2),L(" ",e.selectedAccount().firstName||""," ",e.selectedAccount().lastName||""," "),l(2),p(e.selectedAccount().phone),l(),C(e.selectedAccount().username?16:-1),l(2),E("background",e.getRoleColor(e.selectedAccount().role)+"20")("color",e.getRoleColor(e.selectedAccount().role)),l(),y(" ",e.getRoleIcon(e.selectedAccount().role)," "),l(),E("color",e.getRoleColor(e.selectedAccount().role)),l(),y(" ",e.getRoleName(e.selectedAccount().role)," "),l(3),C(e.selectedAccount().bio?24:-1),l(8),I(e.getStatusClass(e.selectedAccount().status)),l(),y(" ",e.getStatusText(e.selectedAccount().status)," "),l(5),y("",e.selectedAccount().healthScore||100,"/100"),l(5),L("",e.selectedAccount().dailySendCount||0,"/",e.selectedAccount().dailySendLimit||50),l(5),E("background",e.getRoleColor(e.selectedAccount().role)+"20")("color",e.getRoleColor(e.selectedAccount().role)),l(),L(" ",e.getRoleIcon(e.selectedAccount().role)," ",e.getRoleName(e.selectedAccount().role)," "),l(7),p(e.selectedAccount().group||"\u672A\u5206\u7D44"),l(5),C(e.selectedAccount().tags&&e.selectedAccount().tags.length>0?61:62),l(10),p(e.selectedAccount().deviceModel||"-"),l(5),p(e.selectedAccount().systemVersion||"-"),l(5),p(e.selectedAccount().platform||"-"),l(5),p(e.selectedAccount().apiId||"-"),l(9),p(e.selectedAccount().proxy||"\u76F4\u9023\uFF08\u7121\u4EE3\u7406\uFF09"),l(5),p(e.selectedAccount().proxyType||"-"),l(5),p(e.selectedAccount().proxyCountry||"-"),l(),C(e.isLoggingIn(e.selectedAccount().id)||e.selectedAccount().status==="Logging in..."||e.selectedAccount().status==="Waiting Code"||e.selectedAccount().status==="Waiting 2FA"?106:-1),l(2),C(e.canLogin(e.selectedAccount())&&!e.isLoggingIn(e.selectedAccount().id)?108:-1),l(),C(e.isLoggingIn(e.selectedAccount().id)||e.selectedAccount().status==="Logging in..."||e.selectedAccount().status==="Waiting Code"||e.selectedAccount().status==="Waiting 2FA"?109:-1),l(),C(e.selectedAccount().status==="Online"?110:-1),l(),w("disabled",e.syncing()),l(),y(" ",e.syncing()?"\u23F3":"\u{1F504}"," \u540C\u6B65 "),l(9),w("disabled",e.isLoggingIn(e.selectedAccount().id))}}function gt(s,r){if(s&1){let e=f();n(0,"div",175)(1,"div",179)(2,"label"),a(3,"\u6635\u79F0"),i(),n(4,"input",180),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.editForm.nickname,t)||(c.editForm.nickname=t),m(t)}),i()(),n(5,"div",179)(6,"label"),a(7,"\u5907\u6CE8"),i(),n(8,"textarea",181),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.editForm.notes,t)||(c.editForm.notes=t),m(t)}),i()(),n(9,"div",182)(10,"div",179)(11,"label"),a(12,"API ID"),i(),n(13,"input",183),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.editForm.apiId,t)||(c.editForm.apiId=t),m(t)}),i()(),n(14,"div",179)(15,"label"),a(16,"API Hash"),i(),n(17,"input",183),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.editForm.apiHash,t)||(c.editForm.apiHash=t),m(t)}),i()()(),n(18,"p",184),a(19,"API \u51ED\u8BC1\u7528\u4E8E\u8FDE\u63A5 Telegram\uFF0C\u53EF\u4ECE "),n(20,"a",185),a(21,"my.telegram.org"),i(),a(22," \u83B7\u53D6"),i(),n(23,"div",182)(24,"div",179)(25,"label"),a(26,"\u6BCF\u65E5\u53D1\u9001\u4E0A\u9650"),i(),n(27,"input",186),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.editForm.dailySendLimit,t)||(c.editForm.dailySendLimit=t),m(t)}),i()(),n(28,"div",179)(29,"label"),a(30,"\u7FA4\u7D44\u5206\u985E"),i(),n(31,"input",187),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.editForm.group,t)||(c.editForm.group=t),m(t)}),i()()(),n(32,"div",179)(33,"label",36)(34,"input",188),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.editForm.enableWarmup,t)||(c.editForm.enableWarmup=t),m(t)}),i(),n(35,"span"),a(36,"\u542F\u7528\u9810\u71B1\u6A21\u5F0F"),i()(),n(37,"p",184),a(38,"\u9810\u71B1\u6A21\u5F0F\u6703\u9010\u6B65\u589E\u52A0\u6BCF\u65E5\u53D1\u9001\u91CF\uFF0C\u964D\u4F4E\u5C01\u865F\u98A8\u96AA"),i()()()}if(s&2){let e=d(2);l(4),x("ngModel",e.editForm.nickname),l(4),x("ngModel",e.editForm.notes),l(5),x("ngModel",e.editForm.apiId),l(4),x("ngModel",e.editForm.apiHash),l(10),x("ngModel",e.editForm.dailySendLimit),l(4),x("ngModel",e.editForm.group),l(3),x("ngModel",e.editForm.enableWarmup)}}function pt(s,r){if(s&1&&(n(0,"option",13),a(1),i()),s&2){let e=r.$implicit;w("value",e.id),l(),p(e.name)}}function _t(s,r){if(s&1&&(n(0,"div",207),a(1),i()),s&2){let e=d(4);M("success",e.proxyTestResult().success)("error",!e.proxyTestResult().success),l(),y(" ",e.proxyTestResult().message," ")}}function Ct(s,r){if(s&1){let e=f();n(0,"div",182)(1,"div",190)(2,"label"),a(3,"\u4EE3\u7406\u5730\u5740"),i(),n(4,"input",191),h("ngModelChange",function(t){u(e);let c=d(3);return b(c.editForm.proxyHost,t)||(c.editForm.proxyHost=t),m(t)}),i()(),n(5,"div",192)(6,"label"),a(7,"\u7AEF\u53E3"),i(),n(8,"input",193),h("ngModelChange",function(t){u(e);let c=d(3);return b(c.editForm.proxyPort,t)||(c.editForm.proxyPort=t),m(t)}),i()()(),n(9,"div",182)(10,"div",179)(11,"label"),a(12,"\u7528\u6236\u540D\uFF08\u53EF\u9078\uFF09"),i(),n(13,"input",194),h("ngModelChange",function(t){u(e);let c=d(3);return b(c.editForm.proxyUsername,t)||(c.editForm.proxyUsername=t),m(t)}),i()(),n(14,"div",179)(15,"label"),a(16,"\u5BC6\u78BC\uFF08\u53EF\u9078\uFF09"),i(),n(17,"input",195),h("ngModelChange",function(t){u(e);let c=d(3);return b(c.editForm.proxyPassword,t)||(c.editForm.proxyPassword=t),m(t)}),i()()(),n(18,"div",179)(19,"label"),a(20,"\u4EE3\u7406\u56FD\u5BB6/\u5730\u5340"),i(),n(21,"select",189),h("ngModelChange",function(t){u(e);let c=d(3);return b(c.editForm.proxyCountry,t)||(c.editForm.proxyCountry=t),m(t)}),n(22,"option",196),a(23,"\u9009\u62E9\u56FD\u5BB6"),i(),n(24,"option",197),a(25,"\u{1F1FA}\u{1F1F8} \u7F8E\u570B"),i(),n(26,"option",198),a(27,"\u{1F1EF}\u{1F1F5} \u65E5\u672C"),i(),n(28,"option",199),a(29,"\u{1F1F8}\u{1F1EC} \u65B0\u52A0\u5761"),i(),n(30,"option",200),a(31,"\u{1F1ED}\u{1F1F0} \u9999\u6E2F"),i(),n(32,"option",201),a(33,"\u{1F1F9}\u{1F1FC} \u53F0\u7063"),i(),n(34,"option",202),a(35,"\u{1F1F0}\u{1F1F7} \u97D3\u570B"),i(),n(36,"option",203),a(37,"\u{1F1E9}\u{1F1EA} \u5FB7\u570B"),i(),n(38,"option",204),a(39,"\u{1F1EC}\u{1F1E7} \u82F1\u570B"),i()()(),n(40,"button",205),g("click",function(){u(e);let t=d(3);return m(t.testProxy())}),a(41),i(),_(42,_t,2,5,"div",206),n(43,"div",179)(44,"label",36)(45,"input",188),h("ngModelChange",function(t){u(e);let c=d(3);return b(c.editForm.proxyRotationEnabled,t)||(c.editForm.proxyRotationEnabled=t),m(t)}),i(),n(46,"span"),a(47,"\u542F\u7528\u667A\u80FD\u4EE3\u7406\u8F2A\u63DB"),i()(),n(48,"p",184),a(49,"\u81EA\u52A8\u5207\u63DB\u4EE3\u7406\u4EE5\u907F\u514D IP \u88AB\u5C01"),i()()}if(s&2){let e=d(3);l(4),x("ngModel",e.editForm.proxyHost),l(4),x("ngModel",e.editForm.proxyPort),l(5),x("ngModel",e.editForm.proxyUsername),l(4),x("ngModel",e.editForm.proxyPassword),l(4),x("ngModel",e.editForm.proxyCountry),l(19),w("disabled",e.testingProxy()),l(),y(" ",e.testingProxy()?"\u6D4B\u8BD5\u4E2D...":"\u{1F50D} \u6D4B\u8BD5\u4EE3\u7406\u8FDE\u63A5"," "),l(),C(e.proxyTestResult()?42:-1),l(3),x("ngModel",e.editForm.proxyRotationEnabled)}}function xt(s,r){if(s&1){let e=f();n(0,"div",175)(1,"div",179)(2,"label"),a(3,"\u4EE3\u7406\u7C7B\u578B"),i(),n(4,"select",189),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.editForm.proxyType,t)||(c.editForm.proxyType=t),m(t)}),g("ngModelChange",function(){u(e);let t=d(2);return m(t.onProxyTypeChange())}),F(5,pt,2,2,"option",13,D),i()(),_(7,Ct,50,9),i()}if(s&2){let e=d(2);l(4),x("ngModel",e.editForm.proxyType),l(),P(e.proxyTypes),l(2),C(e.editForm.proxyType&&e.editForm.proxyType!=="none"?7:-1)}}function bt(s,r){if(s&1){let e=f();n(0,"div",212),g("click",function(){let t=u(e).$implicit,c=d(3);return m(c.selectRole(t.id))}),n(1,"div",72),a(2),i(),n(3,"div",213),a(4),i()()}if(s&2){let e=r.$implicit,o=d(3);M("selected",o.editForm.role===e.id),l(2),p(e.name),l(2),p(e.description)}}function ht(s,r){if(s&1){let e=f();n(0,"div",175)(1,"div",179)(2,"label"),a(3,"\u9009\u62E9\u89D2\u8272\u6A21\u677F"),i(),n(4,"div",208),F(5,bt,5,4,"div",209,D),i()(),n(7,"div",179)(8,"label"),a(9,"\u81EA\u5B9A\u7FA9\u89D2\u8272\u540D\u7A31"),i(),n(10,"input",210),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.editForm.customRoleName,t)||(c.editForm.customRoleName=t),m(t)}),i()(),n(11,"div",179)(12,"label"),a(13,"\u89D2\u8272\u4EBA\u8A2D\u63CF\u8FF0"),i(),n(14,"textarea",211),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.editForm.roleDescription,t)||(c.editForm.roleDescription=t),m(t)}),i()()()}if(s&2){let e=d(2);l(5),P(e.roleTemplates),l(5),x("ngModel",e.editForm.customRoleName),l(4),x("ngModel",e.editForm.roleDescription)}}function ft(s,r){if(s&1&&(n(0,"span",227),a(1),i(),n(2,"span",228),a(3),i()),s&2){let e=r;l(),p(e.icon),l(2),p(e.name)}}function vt(s,r){s&1&&(n(0,"span",216),a(1,"\u70B9\u51FB\u9009\u62E9\u4EBA\u8A2D"),i())}function yt(s,r){if(s&1){let e=f();n(0,"div",179)(1,"label"),a(2,"AI \u4EBA\u8A2D"),i(),n(3,"div",214)(4,"div",215),g("click",function(){u(e);let t=d(3);return m(t.openPersonaManagerFromEdit())}),_(5,ft,4,2)(6,vt,2,0,"span",216),n(7,"span",217),a(8,"\u25BC"),i()(),n(9,"button",218),g("click",function(){u(e);let t=d(3);return m(t.openPersonaManagerFromEdit())}),a(10," \u{1F916} \u4EBA\u8A2D\u5EAB "),i()(),n(11,"p",184),a(12,"\u4EBA\u8A2D\u51B3\u5B9A\u4E86 AI \u7684\u6027\u683C\u548C\u56DE\u590D\u98CE\u683C"),i()(),n(13,"div",179)(14,"label"),a(15,"AI \u6A21\u578B"),i(),n(16,"select",189),h("ngModelChange",function(t){u(e);let c=d(3);return b(c.editForm.aiModel,t)||(c.editForm.aiModel=t),m(t)}),n(17,"option",219),a(18,"GPT-4 Turbo\uFF08\u63A8\u85A6\uFF09"),i(),n(19,"option",220),a(20,"GPT-3.5 Turbo\uFF08\u5FEB\u901F\uFF09"),i(),n(21,"option",221),a(22,"Claude 3 Sonnet"),i(),n(23,"option",222),a(24,"\u672C\u5730 Ollama"),i()()(),n(25,"div",182)(26,"div",179)(27,"label"),a(28),i(),n(29,"input",223),h("ngModelChange",function(t){u(e);let c=d(3);return b(c.editForm.aiCreativity,t)||(c.editForm.aiCreativity=t),m(t)}),i()(),n(30,"div",179)(31,"label"),a(32,"\u56DE\u590D\u9577\u5EA6"),i(),n(33,"select",189),h("ngModelChange",function(t){u(e);let c=d(3);return b(c.editForm.aiResponseLength,t)||(c.editForm.aiResponseLength=t),m(t)}),n(34,"option",224),a(35,"\u7B80\u77ED"),i(),n(36,"option",224),a(37,"\u9069\u4E2D"),i(),n(38,"option",224),a(39,"\u8BE6\u7EC6"),i()()()(),n(40,"div",179)(41,"label",36)(42,"input",188),h("ngModelChange",function(t){u(e);let c=d(3);return b(c.editForm.aiAutoReply,t)||(c.editForm.aiAutoReply=t),m(t)}),i(),n(43,"span"),a(44,"\u81EA\u52A8\u53D1\u9001\u56DE\u590D\uFF08\u7121\u9700\u78BA\u8A8D\uFF09"),i()(),n(45,"p",225),a(46,"\u26A0\uFE0F \u542F\u7528\u5F8C AI \u6703\u81EA\u52A8\u53D1\u9001\u56DE\u590D\uFF0C\u8ACB\u78BA\u4FDD\u5DF2\u8BBE\u7F6E\u597D\u4EBA\u8A2D"),i()(),n(47,"div",179)(48,"label"),a(49,"\u7981\u6B62\u56DE\u590D\u5173\u9375\u8A5E"),i(),n(50,"input",226),h("ngModelChange",function(t){u(e);let c=d(3);return b(c.editForm.aiBlockKeywords,t)||(c.editForm.aiBlockKeywords=t),m(t)}),i(),n(51,"p",184),a(52,"\u5305\u542B\u9019\u4E9B\u5173\u9375\u8A5E\u7684\u6D88\u606F\u6703\u6A19\u8A18\u70BA\u5F85\u4EBA\u5DE5\u8655\u7406"),i()()}if(s&2){let e,o=d(3);l(5),C((e=o.editForm.aiPersonality&&o.getPersonaById(o.editForm.aiPersonality))?5:6,e),l(11),x("ngModel",o.editForm.aiModel),l(12),y("\u5275\u9020\u529B ",o.editForm.aiCreativity,"%"),l(),x("ngModel",o.editForm.aiCreativity),l(4),x("ngModel",o.editForm.aiResponseLength),l(),w("ngValue",0),l(2),w("ngValue",50),l(2),w("ngValue",100),l(4),x("ngModel",o.editForm.aiAutoReply),l(8),x("ngModel",o.editForm.aiBlockKeywords)}}function wt(s,r){if(s&1){let e=f();n(0,"div",175)(1,"div",179)(2,"label",36)(3,"input",188),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.editForm.aiEnabled,t)||(c.editForm.aiEnabled=t),m(t)}),i(),n(4,"span"),a(5,"\u542F\u7528 AI \u81EA\u52A8\u56DE\u590D"),i()()(),_(6,yt,53,10),i()}if(s&2){let e=d(2);l(3),x("ngModel",e.editForm.aiEnabled),l(3),C(e.editForm.aiEnabled?6:-1)}}function Et(s,r){if(s&1){let e=f();n(0,"div",169),g("click",function(){u(e);let t=d();return m(t.closeEditModal())}),i(),n(1,"div",170)(2,"div",171)(3,"h3"),a(4,"\u270F\uFE0F \u7F16\u8F91\u8D26\u53F7"),i(),n(5,"button",129),g("click",function(){u(e);let t=d();return m(t.closeEditModal())}),a(6,"\xD7"),i()(),n(7,"div",172)(8,"div",173)(9,"button",174),g("click",function(){u(e);let t=d();return m(t.editTab.set("basic"))}),a(10," \u{1F4CB} \u57FA\u672C\u8BBE\u7F6E "),i(),n(11,"button",174),g("click",function(){u(e);let t=d();return m(t.editTab.set("proxy"))}),a(12," \u{1F310} \u4EE3\u7406\u8BBE\u7F6E "),i(),n(13,"button",174),g("click",function(){u(e);let t=d();return m(t.editTab.set("role"))}),a(14," \u{1F3AD} \u89D2\u8272\u8BBE\u7F6E "),i(),n(15,"button",174),g("click",function(){u(e);let t=d();return m(t.editTab.set("ai"))}),a(16," \u{1F916} AI \u8BBE\u7F6E "),i()(),_(17,gt,39,7,"div",175),_(18,xt,8,2,"div",175),_(19,ht,15,2,"div",175),_(20,wt,7,2,"div",175),i(),n(21,"div",176)(22,"button",177),g("click",function(){u(e);let t=d();return m(t.closeEditModal())}),a(23,"\u53D6\u6D88"),i(),n(24,"button",178),g("click",function(){u(e);let t=d();return m(t.saveEdit())}),a(25),i()()()}if(s&2){let e=d();l(9),M("active",e.editTab()==="basic"),l(2),M("active",e.editTab()==="proxy"),l(2),M("active",e.editTab()==="role"),l(2),M("active",e.editTab()==="ai"),l(2),C(e.editTab()==="basic"?17:-1),l(),C(e.editTab()==="proxy"?18:-1),l(),C(e.editTab()==="role"?19:-1),l(),C(e.editTab()==="ai"?20:-1),l(4),w("disabled",e.saving()),l(),y(" ",e.saving()?"\u4FDD\u5B58\u4E2D...":"\u{1F4BE} \u4FDD\u5B58\u8BBE\u7F6E"," ")}}function Mt(s,r){if(s&1&&(n(0,"option",13),a(1),i()),s&2){let e=r.$implicit;w("value",e.id),l(),p(e.name)}}function At(s,r){if(s&1){let e=f();n(0,"div",233)(1,"div",182)(2,"div",179)(3,"label"),a(4,"\u4EE3\u7406\u7C7B\u578B"),i(),n(5,"select",189),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.batchForm.proxyType,t)||(c.batchForm.proxyType=t),m(t)}),F(6,Mt,2,2,"option",13,D),i()(),n(8,"div",190)(9,"label"),a(10,"\u4EE3\u7406\u5730\u5740"),i(),n(11,"input",234),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.batchForm.proxyHost,t)||(c.batchForm.proxyHost=t),m(t)}),i()(),n(12,"div",179)(13,"label"),a(14,"\u7AEF\u53E3"),i(),n(15,"input",193),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.batchForm.proxyPort,t)||(c.batchForm.proxyPort=t),m(t)}),i()()(),n(16,"div",182)(17,"div",179)(18,"label"),a(19,"\u7528\u6236\u540D\uFF08\u53EF\u9078\uFF09"),i(),n(20,"input",235),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.batchForm.proxyUsername,t)||(c.batchForm.proxyUsername=t),m(t)}),i()(),n(21,"div",179)(22,"label"),a(23,"\u5BC6\u78BC\uFF08\u53EF\u9078\uFF09"),i(),n(24,"input",236),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.batchForm.proxyPassword,t)||(c.batchForm.proxyPassword=t),m(t)}),i()(),n(25,"div",179)(26,"label"),a(27,"\u56FD\u5BB6"),i(),n(28,"select",189),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.batchForm.proxyCountry,t)||(c.batchForm.proxyCountry=t),m(t)}),n(29,"option",196),a(30,"\u9009\u62E9"),i(),n(31,"option",197),a(32,"\u{1F1FA}\u{1F1F8} \u7F8E\u570B"),i(),n(33,"option",198),a(34,"\u{1F1EF}\u{1F1F5} \u65E5\u672C"),i(),n(35,"option",199),a(36,"\u{1F1F8}\u{1F1EC} \u65B0\u52A0\u5761"),i(),n(37,"option",200),a(38,"\u{1F1ED}\u{1F1F0} \u9999\u6E2F"),i()()()()()}if(s&2){let e=d(2);l(5),x("ngModel",e.batchForm.proxyType),l(),P(e.proxyTypes),l(5),x("ngModel",e.batchForm.proxyHost),l(4),x("ngModel",e.batchForm.proxyPort),l(5),x("ngModel",e.batchForm.proxyUsername),l(4),x("ngModel",e.batchForm.proxyPassword),l(4),x("ngModel",e.batchForm.proxyCountry)}}function Ft(s,r){if(s&1&&(n(0,"span",245),a(1,"\u2713"),i()),s&2){let e=d().$implicit;E("color",e.color)}}function Pt(s,r){if(s&1){let e=f();n(0,"div",239),g("click",function(){let t=u(e).$implicit,c=d(3);return m(c.batchForm.role=t.id)}),n(1,"span",240),a(2),i(),n(3,"div",241)(4,"div",242),a(5),i(),n(6,"div",243),a(7),i()(),_(8,Ft,2,2,"span",244),i()}if(s&2){let e=r.$implicit,o=d(3);E("border-color",o.batchForm.role===e.id?e.color:"transparent"),M("selected",o.batchForm.role===e.id),l(),E("background",e.color+"20")("color",e.color),l(),p(e.icon),l(2),E("color",e.color),l(),p(e.name),l(2),p(e.description),l(),C(o.batchForm.role===e.id?8:-1)}}function St(s,r){if(s&1&&(n(0,"div",233)(1,"div",237),F(2,Pt,9,14,"div",238,D),i()()),s&2){let e=d(2);l(2),P(e.assignableRoles)}}function Dt(s,r){if(s&1){let e=f();n(0,"div",233)(1,"div",182)(2,"div",179)(3,"label",36)(4,"input",188),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.batchForm.aiEnabled,t)||(c.batchForm.aiEnabled=t),m(t)}),i(),n(5,"span"),a(6,"\u542F\u7528 AI \u81EA\u52A8\u56DE\u590D"),i()()(),n(7,"div",179)(8,"label"),a(9,"AI \u6A21\u578B"),i(),n(10,"select",189),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.batchForm.aiModel,t)||(c.batchForm.aiModel=t),m(t)}),n(11,"option",219),a(12,"GPT-4 Turbo"),i(),n(13,"option",220),a(14,"GPT-3.5 Turbo"),i(),n(15,"option",221),a(16,"Claude 3"),i(),n(17,"option",222),a(18,"\u672C\u5730 Ollama"),i()()()()()}if(s&2){let e=d(2);l(4),x("ngModel",e.batchForm.aiEnabled),l(6),x("ngModel",e.batchForm.aiModel)}}function kt(s,r){if(s&1){let e=f();n(0,"div",233)(1,"div",182)(2,"div",179)(3,"label"),a(4,"\u6BCF\u65E5\u53D1\u9001\u4E0A\u9650"),i(),n(5,"input",186),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.batchForm.dailySendLimit,t)||(c.batchForm.dailySendLimit=t),m(t)}),i()(),n(6,"div",179)(7,"label",36)(8,"input",188),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.batchForm.enableWarmup,t)||(c.batchForm.enableWarmup=t),m(t)}),i(),n(9,"span"),a(10,"\u542F\u7528\u9810\u71B1\u6A21\u5F0F"),i()()()()()}if(s&2){let e=d(2);l(5),x("ngModel",e.batchForm.dailySendLimit),l(3),x("ngModel",e.batchForm.enableWarmup)}}function Tt(s,r){if(s&1){let e=f();n(0,"div",233)(1,"div",179)(2,"label"),a(3,"\u5206\u914D\u5230\u7FA4\u7D44"),i(),n(4,"input",246),h("ngModelChange",function(t){u(e);let c=d(2);return b(c.batchForm.group,t)||(c.batchForm.group=t),m(t)}),i()()()}if(s&2){let e=d(2);l(4),x("ngModel",e.batchForm.group)}}function Lt(s,r){if(s&1){let e=f();n(0,"div",169),g("click",function(){u(e);let t=d();return m(t.closeBatchEditModal())}),i(),n(1,"div",229)(2,"div",171)(3,"h3"),a(4),i(),n(5,"button",129),g("click",function(){u(e);let t=d();return m(t.closeBatchEditModal())}),a(6,"\xD7"),i()(),n(7,"div",172)(8,"div",230),a(9," \u26A0\uFE0F \u4EE5\u4E0B\u52FE\u9009\u7684\u8BBE\u7F6E\u5C06\u5E94\u7528\u5230\u6240\u6709\u9078\u4E2D\u7684\u8D26\u53F7 "),i(),n(10,"div",231)(11,"label",232)(12,"input",188),h("ngModelChange",function(t){u(e);let c=d();return b(c.batchForm.enableProxy,t)||(c.batchForm.enableProxy=t),m(t)}),i(),n(13,"span"),a(14,"\u{1F310} \u4EE3\u7406\u8BBE\u7F6E"),i()(),_(15,At,39,6,"div",233),i(),n(16,"div",231)(17,"label",232)(18,"input",188),h("ngModelChange",function(t){u(e);let c=d();return b(c.batchForm.enableRole,t)||(c.batchForm.enableRole=t),m(t)}),i(),n(19,"span"),a(20,"\u{1F3AD} \u5E33\u865F\u89D2\u8272\u8A2D\u7F6E"),i()(),_(21,St,4,0,"div",233),i(),n(22,"div",231)(23,"label",232)(24,"input",188),h("ngModelChange",function(t){u(e);let c=d();return b(c.batchForm.enableAI,t)||(c.batchForm.enableAI=t),m(t)}),i(),n(25,"span"),a(26,"\u{1F916} AI \u8BBE\u7F6E"),i()(),_(27,Dt,19,2,"div",233),i(),n(28,"div",231)(29,"label",232)(30,"input",188),h("ngModelChange",function(t){u(e);let c=d();return b(c.batchForm.enableLimit,t)||(c.batchForm.enableLimit=t),m(t)}),i(),n(31,"span"),a(32,"\u{1F4CA} \u53D1\u9001\u9650\u5236"),i()(),_(33,kt,11,2,"div",233),i(),n(34,"div",231)(35,"label",232)(36,"input",188),h("ngModelChange",function(t){u(e);let c=d();return b(c.batchForm.enableGroup,t)||(c.batchForm.enableGroup=t),m(t)}),i(),n(37,"span"),a(38,"\u{1F4C1} \u5206\u7D44\u8BBE\u7F6E"),i()(),_(39,Tt,5,1,"div",233),i()(),n(40,"div",176)(41,"button",177),g("click",function(){u(e);let t=d();return m(t.closeBatchEditModal())}),a(42,"\u53D6\u6D88"),i(),n(43,"button",178),g("click",function(){u(e);let t=d();return m(t.applyBatchEdit())}),a(44),i()()()}if(s&2){let e=d();l(4),y("\u2699\uFE0F \u6279\u91CF\u8BBE\u7F6E - \u5DF2\u9078 ",e.selectedIds.size," \u500B\u8D26\u53F7"),l(8),x("ngModel",e.batchForm.enableProxy),l(3),C(e.batchForm.enableProxy?15:-1),l(3),x("ngModel",e.batchForm.enableRole),l(3),C(e.batchForm.enableRole?21:-1),l(3),x("ngModel",e.batchForm.enableAI),l(3),C(e.batchForm.enableAI?27:-1),l(3),x("ngModel",e.batchForm.enableLimit),l(3),C(e.batchForm.enableLimit?33:-1),l(3),x("ngModel",e.batchForm.enableGroup),l(3),C(e.batchForm.enableGroup?39:-1),l(4),w("disabled",e.batchSaving()),l(),y(" ",e.batchSaving()?"\u5E94\u7528\u4E2D...":"\u2713 \u5E94\u7528\u5230 "+e.selectedIds.size+" \u500B\u8D26\u53F7"," ")}}function Ot(s,r){if(s&1){let e=f();n(0,"div",253)(1,"span",255),a(2),i(),n(3,"input",256),h("ngModelChange",function(t){let c=u(e).$implicit;return b(c.name,t)||(c.name=t),m(t)}),i(),n(4,"input",257),h("ngModelChange",function(t){let c=u(e).$implicit;return b(c.color,t)||(c.color=t),m(t)}),i(),n(5,"button",258),g("click",function(){let t=u(e).$implicit,c=d(2);return m(c.deleteTag(t.id))}),a(6,"\u{1F5D1}\uFE0F"),i()()}if(s&2){let e=r.$implicit;l(),E("background",e.color),l(),p(e.name),l(),x("ngModel",e.name),l(),x("ngModel",e.color)}}function Vt(s,r){s&1&&(n(0,"div",46),a(1,"\u6682\u65E0\u6807\u7B7E\uFF0C\u8ACB\u6DFB\u52A0"),i())}function Bt(s,r){if(s&1){let e=f();n(0,"div",169),g("click",function(){u(e);let t=d();return m(t.closeTagManager())}),i(),n(1,"div",247)(2,"div",171)(3,"h3"),a(4,"\u{1F3F7}\uFE0F \u6807\u7B7E\u7BA1\u7406"),i(),n(5,"button",129),g("click",function(){u(e);let t=d();return m(t.closeTagManager())}),a(6,"\xD7"),i()(),n(7,"div",172)(8,"div",248)(9,"input",249),h("ngModelChange",function(t){u(e);let c=d();return b(c.newTagName,t)||(c.newTagName=t),m(t)}),i(),n(10,"input",250),h("ngModelChange",function(t){u(e);let c=d();return b(c.newTagColor,t)||(c.newTagColor=t),m(t)}),i(),n(11,"button",251),g("click",function(){u(e);let t=d();return m(t.addTag())}),a(12,"\u2795 \u6DFB\u52A0"),i()(),n(13,"div",252),F(14,Ot,7,5,"div",253,D),_(16,Vt,2,0,"div",46),i()(),n(17,"div",176)(18,"button",177),g("click",function(){u(e);let t=d();return m(t.closeTagManager())}),a(19,"\u53D6\u6D88"),i(),n(20,"button",254),g("click",function(){u(e);let t=d();return m(t.saveTags())}),a(21,"\u{1F4BE} \u4FDD\u5B58\u6807\u7B7E"),i()()()}if(s&2){let e=d();l(9),x("ngModel",e.newTagName),l(),x("ngModel",e.newTagColor),l(),w("disabled",!e.newTagName.trim()),l(3),P(e.availableTags()),l(2),C(e.availableTags().length===0?16:-1)}}function It(s,r){if(s&1){let e=f();n(0,"div",263),S(1,"div",264),n(2,"div",265)(3,"input",266),h("ngModelChange",function(t){let c=u(e).$implicit;return b(c.name,t)||(c.name=t),m(t)}),i(),n(4,"span",267),a(5),i()(),n(6,"input",257),h("ngModelChange",function(t){let c=u(e).$implicit;return b(c.color,t)||(c.color=t),m(t)}),i(),n(7,"button",258),g("click",function(){let t=u(e).$implicit,c=d(2);return m(c.deleteGroup(t.id))}),a(8,"\u{1F5D1}\uFE0F"),i()()}if(s&2){let e=r.$implicit,o=d(2);l(),E("background",e.color||"#6b7280"),l(2),x("ngModel",e.name),l(2),y("",o.getGroupAccountCount(e.id)," \u500B\u8D26\u53F7"),l(),x("ngModel",e.color)}}function Wt(s,r){s&1&&(n(0,"div",46),a(1,"\u6682\u65E0\u5206\u7D44\uFF0C\u8ACB\u6DFB\u52A0"),i())}function zt(s,r){if(s&1){let e=f();n(0,"div",169),g("click",function(){u(e);let t=d();return m(t.closeGroupManager())}),i(),n(1,"div",259)(2,"div",171)(3,"h3"),a(4,"\u{1F4C1} \u5206\u7D44\u7BA1\u7406"),i(),n(5,"button",129),g("click",function(){u(e);let t=d();return m(t.closeGroupManager())}),a(6,"\xD7"),i()(),n(7,"div",172)(8,"div",260)(9,"input",261),h("ngModelChange",function(t){u(e);let c=d();return b(c.newGroupName,t)||(c.newGroupName=t),m(t)}),i(),n(10,"input",250),h("ngModelChange",function(t){u(e);let c=d();return b(c.newGroupColor,t)||(c.newGroupColor=t),m(t)}),i(),n(11,"button",251),g("click",function(){u(e);let t=d();return m(t.addGroup())}),a(12,"\u2795 \u6DFB\u52A0"),i()(),n(13,"div",262),F(14,It,9,5,"div",263,D),_(16,Wt,2,0,"div",46),i()(),n(17,"div",176)(18,"button",177),g("click",function(){u(e);let t=d();return m(t.closeGroupManager())}),a(19,"\u53D6\u6D88"),i(),n(20,"button",254),g("click",function(){u(e);let t=d();return m(t.saveGroups())}),a(21,"\u{1F4BE} \u4FDD\u5B58\u5206\u7D44"),i()()()}if(s&2){let e=d();l(9),x("ngModel",e.newGroupName),l(),x("ngModel",e.newGroupColor),l(),w("disabled",!e.newGroupName.trim()),l(3),P(e.groups()),l(2),C(e.groups().length===0?16:-1)}}function Rt(s,r){if(s&1){let e=f();n(0,"label",278)(1,"input",35),g("change",function(){let t=u(e).$implicit,c=d(2);return m(c.toggleAccountTag(t.id))}),i(),n(2,"span",279),a(3),i()()}if(s&2){let e=r.$implicit,o=d(2);M("selected",o.accountTagsSelection.has(e.id)),l(),w("checked",o.accountTagsSelection.has(e.id)),l(),E("background",e.color),l(),p(e.name)}}function Nt(s,r){s&1&&(n(0,"div",46),a(1," \u6682\u65E0\u6807\u7B7E\uFF0C\u8BF7\u5148\u521B\u5EFA\u6807\u7B7E "),i())}function Gt(s,r){if(s&1){let e=f();n(0,"div",169),g("click",function(){u(e);let t=d();return m(t.closeAccountTagEditor())}),i(),n(1,"div",268)(2,"div",171)(3,"h3"),a(4),i(),n(5,"button",129),g("click",function(){u(e);let t=d();return m(t.closeAccountTagEditor())}),a(6,"\xD7"),i()(),n(7,"div",172)(8,"div",269),F(9,Rt,4,6,"label",270,D),i(),_(11,Nt,2,0,"div",46),n(12,"div",271)(13,"div",272)(14,"input",273),h("ngModelChange",function(t){u(e);let c=d();return b(c.newTagName,t)||(c.newTagName=t),m(t)}),i(),n(15,"input",274),h("ngModelChange",function(t){u(e);let c=d();return b(c.newTagColor,t)||(c.newTagColor=t),m(t)}),i(),n(16,"button",275),g("click",function(){u(e);let t=d();return m(t.quickAddTag())}),a(17,"\u2795 \u6DFB\u52A0"),i()()()(),n(18,"div",176)(19,"button",276),g("click",function(){u(e);let t=d();return m(t.openTagManagerFromEditor())}),a(20,"\u2699\uFE0F \u7BA1\u7406\u6807\u7B7E"),i(),n(21,"div",277)(22,"button",177),g("click",function(){u(e);let t=d();return m(t.closeAccountTagEditor())}),a(23,"\u53D6\u6D88"),i(),n(24,"button",254),g("click",function(){u(e);let t=d();return m(t.saveAccountTags())}),a(25,"\u{1F4BE} \u4FDD\u5B58"),i()()()()}if(s&2){let e,o=d();l(4),y("\u{1F3F7}\uFE0F \u7F16\u8F91\u6807\u7B7E - ",(e=o.editingTagAccount())==null?null:e.phone),l(5),P(o.availableTags()),l(2),C(o.availableTags().length===0?11:-1),l(3),x("ngModel",o.newTagName),l(),x("ngModel",o.newTagColor),l(),w("disabled",!o.newTagName.trim())}}function Ut(s,r){if(s&1){let e=f();n(0,"div",286),g("click",function(){u(e);let t=d().$implicit,c=d(3);return m(c.selectPersona(t))}),n(1,"div",287),a(2),i(),n(3,"div",288)(4,"div",289),a(5),i(),n(6,"div",290),a(7),i()(),n(8,"div",291)(9,"span",292),a(10),i(),n(11,"span",292),a(12),i()()()}if(s&2){let e=d().$implicit,o=d(3);M("selected",o.selectedPersonaId()===e.id),l(2),p(e.icon),l(3),p(e.name),l(2),p(e.description),l(3),y("\u5275\u610F: ",e.creativity,"%"),l(2),p(o.getToneName(e.tone))}}function Ht(s,r){if(s&1&&_(0,Ut,13,7,"div",285),s&2){let e=r.$implicit;C(e.isCustom?-1:0)}}function jt(s,r){if(s&1&&(n(0,"div",282),F(1,Ht,1,1,null,null,D),i()),s&2){let e=d(2);l(),P(e.availablePersonas())}}function Kt(s,r){if(s&1){let e=f();n(0,"div",296),g("click",function(){let t=u(e).$implicit,c=d(3);return m(c.selectPersona(t))}),n(1,"div",287),a(2),i(),n(3,"div",288)(4,"div",289),a(5),i(),n(6,"div",290),a(7),i()(),n(8,"div",297)(9,"button",298),g("click",function(t){let c=u(e).$implicit;return d(3).editPersona(c),m(t.stopPropagation())}),a(10,"\u270F\uFE0F"),i(),n(11,"button",299),g("click",function(t){let c=u(e).$implicit;return d(3).deletePersona(c.id),m(t.stopPropagation())}),a(12,"\u{1F5D1}\uFE0F"),i()()()}if(s&2){let e=r.$implicit,o=d(3);M("selected",o.selectedPersonaId()===e.id),l(2),p(e.icon),l(3),p(e.name),l(2),p(e.description)}}function qt(s,r){s&1&&(n(0,"div",46),a(1,"\u6682\u65E0\u81EA\u5B9A\u7FA9\u4EBA\u8A2D\uFF0C\u70B9\u51FB\u4E0A\u65B9\u6309\u9215\u521B\u5EFA"),i())}function Qt(s,r){if(s&1){let e=f();n(0,"div",283)(1,"button",293),g("click",function(){u(e);let t=d(2);return m(t.startNewPersona())}),a(2," \u2795 \u521B\u5EFA\u65B0\u4EBA\u8A2D "),i(),n(3,"div",294),F(4,Kt,13,5,"div",295,D),_(6,qt,2,0,"div",46),i()()}if(s&2){let e=d(2);l(4),P(e.getCustomPersonas()),l(2),C(e.getCustomPersonas().length===0?6:-1)}}function Yt(s,r){if(s&1){let e=f();n(0,"button",254),g("click",function(){u(e);let t=d(2);return m(t.applySelectedPersona())}),a(1),i()}if(s&2){let e,o=d(2);l(),y(" \u2713 \u4F7F\u7528\u300C",(e=o.getPersonaById(o.selectedPersonaId()))==null?null:e.name,"\u300D ")}}function Jt(s,r){if(s&1){let e=f();n(0,"div",169),g("click",function(){u(e);let t=d();return m(t.closePersonaManager())}),i(),n(1,"div",280)(2,"div",171)(3,"h3"),a(4,"\u{1F916} AI \u4EBA\u8A2D\u7BA1\u7406"),i(),n(5,"button",129),g("click",function(){u(e);let t=d();return m(t.closePersonaManager())}),a(6,"\xD7"),i()(),n(7,"div",172)(8,"div",281)(9,"button",109),g("click",function(){u(e);let t=d();return m(t.personaTab.set("templates"))}),a(10," \u{1F4CB} \u6A21\u677F\u5EAB "),i(),n(11,"button",109),g("click",function(){u(e);let t=d();return m(t.personaTab.set("custom"))}),a(12," \u270F\uFE0F \u81EA\u5B9A\u7FA9 "),i()(),_(13,jt,3,0,"div",282),_(14,Qt,7,1,"div",283),i(),n(15,"div",176)(16,"button",177),g("click",function(){u(e);let t=d();return m(t.closePersonaManager())}),a(17,"\u53D6\u6D88"),i(),_(18,Yt,2,1,"button",284),i()()}if(s&2){let e=d();l(9),M("active",e.personaTab()==="templates"),l(2),M("active",e.personaTab()==="custom"),l(2),C(e.personaTab()==="templates"?13:-1),l(),C(e.personaTab()==="custom"?14:-1),l(4),C(e.selectedPersonaId()?18:-1)}}function Xt(s,r){if(s&1){let e=f();n(0,"div",169),g("click",function(){u(e);let t=d();return m(t.closePersonaEditor())}),i(),n(1,"div",300)(2,"div",171)(3,"h3"),a(4),i(),n(5,"button",129),g("click",function(){u(e);let t=d();return m(t.closePersonaEditor())}),a(6,"\xD7"),i()(),n(7,"div",172)(8,"div",301)(9,"div",182)(10,"div",302)(11,"label"),a(12,"\u56FE\u6807"),i(),n(13,"input",303),h("ngModelChange",function(t){u(e);let c=d();return b(c.personaForm.icon,t)||(c.personaForm.icon=t),m(t)}),i()(),n(14,"div",190)(15,"label"),a(16,"\u4EBA\u8A2D\u540D\u7A31"),i(),n(17,"input",304),h("ngModelChange",function(t){u(e);let c=d();return b(c.personaForm.name,t)||(c.personaForm.name=t),m(t)}),i()()(),n(18,"div",179)(19,"label"),a(20,"\u7B80\u77ED\u63CF\u8FF0"),i(),n(21,"input",305),h("ngModelChange",function(t){u(e);let c=d();return b(c.personaForm.description,t)||(c.personaForm.description=t),m(t)}),i()(),n(22,"div",179)(23,"label"),a(24,"\u7CFB\u7D71\u63D0\u793A\u8A5E (System Prompt)"),i(),n(25,"textarea",306),h("ngModelChange",function(t){u(e);let c=d();return b(c.personaForm.systemPrompt,t)||(c.personaForm.systemPrompt=t),m(t)}),i(),n(26,"p",184),a(27,"\u9019\u662F AI \u7684\u300C\u6027\u683C\u8BF4\u660E\u4E66\u300D\uFF0C\u51B3\u5B9A\u4E86 AI \u5982\u4F55\u56DE\u5E94\u7528\u6236"),i()(),n(28,"div",179)(29,"label"),a(30,"\u958B\u5834\u767D\uFF08\u53EF\u9078\uFF09"),i(),n(31,"input",307),h("ngModelChange",function(t){u(e);let c=d();return b(c.personaForm.greeting,t)||(c.personaForm.greeting=t),m(t)}),i()(),n(32,"div",182)(33,"div",179)(34,"label"),a(35),i(),n(36,"input",223),h("ngModelChange",function(t){u(e);let c=d();return b(c.personaForm.creativity,t)||(c.personaForm.creativity=t),m(t)}),i(),n(37,"p",184),a(38,"\u8D8A\u9AD8\u8D8A\u6709\u5275\u610F\uFF0C\u8D8A\u4F4E\u8D8A\u7A69\u5B9A"),i()(),n(39,"div",179)(40,"label"),a(41,"\u56DE\u590D\u9577\u5EA6"),i(),n(42,"select",189),h("ngModelChange",function(t){u(e);let c=d();return b(c.personaForm.responseLength,t)||(c.personaForm.responseLength=t),m(t)}),n(43,"option",308),a(44,"\u7B80\u77ED"),i(),n(45,"option",309),a(46,"\u9069\u4E2D"),i(),n(47,"option",310),a(48,"\u8BE6\u7EC6"),i()()()(),n(49,"div",182)(50,"div",179)(51,"label"),a(52,"\u8A9E\u6C23\u98CE\u683C"),i(),n(53,"select",189),h("ngModelChange",function(t){u(e);let c=d();return b(c.personaForm.tone,t)||(c.personaForm.tone=t),m(t)}),n(54,"option",311),a(55,"\u6B63\u5F0F"),i(),n(56,"option",312),a(57,"\u4E13\u4E1A"),i(),n(58,"option",313),a(59,"\u53CB\u5584"),i(),n(60,"option",314),a(61,"\u8F15\u9B06"),i()()(),n(62,"div",179)(63,"label"),a(64,"\u8BED\u8A00"),i(),n(65,"select",189),h("ngModelChange",function(t){u(e);let c=d();return b(c.personaForm.language,t)||(c.personaForm.language=t),m(t)}),n(66,"option",315),a(67,"\u7E41\u4F53\u4E2D\u6587"),i(),n(68,"option",316),a(69,"\u7C21\u9AD4\u4E2D\u6587"),i(),n(70,"option",317),a(71,"English"),i(),n(72,"option",318),a(73,"\u65E5\u672C\u8A9E"),i()()(),n(74,"div",179)(75,"label",36)(76,"input",188),h("ngModelChange",function(t){u(e);let c=d();return b(c.personaForm.enableEmoji,t)||(c.personaForm.enableEmoji=t),m(t)}),i(),n(77,"span"),a(78,"\u4F7F\u7528\u8868\u60C5\u7B26\u53F7"),i()()()(),n(79,"div",179)(80,"label"),a(81,"\u5C4F\u853D\u5173\u9375\u8A5E\uFF08\u4E00\u884C\u4E00\u500B\uFF09"),i(),n(82,"textarea",319),h("ngModelChange",function(t){u(e);let c=d();return b(c.personaForm.blockKeywordsText,t)||(c.personaForm.blockKeywordsText=t),m(t)}),i()()()(),n(83,"div",176)(84,"button",177),g("click",function(){u(e);let t=d();return m(t.closePersonaEditor())}),a(85,"\u53D6\u6D88"),i(),n(86,"button",178),g("click",function(){u(e);let t=d();return m(t.savePersona())}),a(87," \u{1F4BE} \u4FDD\u5B58\u4EBA\u8A2D "),i()()()}if(s&2){let e,o=d();l(4),p((e=o.editingPersona())!=null&&e.id?"\u270F\uFE0F \u7F16\u8F91\u4EBA\u8A2D":"\u2795 \u521B\u5EFA\u4EBA\u8A2D"),l(9),x("ngModel",o.personaForm.icon),l(4),x("ngModel",o.personaForm.name),l(4),x("ngModel",o.personaForm.description),l(4),x("ngModel",o.personaForm.systemPrompt),l(6),x("ngModel",o.personaForm.greeting),l(4),y("\u5275\u9020\u529B ",o.personaForm.creativity,"%"),l(),x("ngModel",o.personaForm.creativity),l(6),x("ngModel",o.personaForm.responseLength),l(11),x("ngModel",o.personaForm.tone),l(12),x("ngModel",o.personaForm.language),l(11),x("ngModel",o.personaForm.enableEmoji),l(6),x("ngModel",o.personaForm.blockKeywordsText),l(4),w("disabled",!o.personaForm.name||!o.personaForm.systemPrompt)}}function Zt(s,r){s&1&&(n(0,"span",334),a(1,"\u2713"),i())}function $t(s,r){if(s&1){let e=f();n(0,"div",329),g("click",function(){let t=u(e).$implicit,c=d(2);return m(c.changeAccountRole(t.id))}),n(1,"span",330),a(2),i(),n(3,"div",331)(4,"span",332),a(5),i(),n(6,"span",333),a(7),i()(),_(8,Zt,2,0,"span",334),i()}if(s&2){let e,o,t=r.$implicit,c=d(2);M("active",((e=c.roleSelectorAccount())==null?null:e.role)===t.id),l(),E("background",t.color+"20")("color",t.color),l(),p(t.icon),l(3),p(t.name),l(2),p(t.description),l(),C(((o=c.roleSelectorAccount())==null?null:o.role)===t.id?8:-1)}}function en(s,r){if(s&1){let e=f();n(0,"div",320),g("click",function(){u(e);let t=d();return m(t.closeRoleSelector())}),i(),n(1,"div",321)(2,"div",322)(3,"span",323),a(4,"\u9078\u64C7\u89D2\u8272"),i(),n(5,"span",324),a(6),i()(),n(7,"div",325),F(8,$t,9,10,"div",326,D),i(),n(10,"div",327)(11,"button",328),g("click",function(){u(e);let t=d();return m(t.closeRoleSelector())}),a(12,"\u53D6\u6D88"),i()()()}if(s&2){let e,o=d();l(),E("top",o.roleSelectorPosition().top,"px")("left",o.roleSelectorPosition().left,"px"),l(5),p((e=o.roleSelectorAccount())==null?null:e.phone),l(2),P(o.assignableRoles)}}var Y=[{id:"Listener",name:"\u76E3\u63A7\u865F",icon:"\u{1F441}\uFE0F",color:"#22c55e",description:"\u76E3\u63A7\u7FA4\u7D44\u6D88\u606F\uFF0C\u6355\u7372\u6F5B\u5728\u5BA2\u6236",features:["\u7FA4\u7D44\u76E3\u63A7","\u95DC\u9375\u8A5E\u5339\u914D","Lead \u6355\u7372"],priority:1},{id:"Sender",name:"\u767C\u9001\u865F",icon:"\u{1F4E4}",color:"#3b82f6",description:"\u767C\u9001\u6D88\u606F\u7D66\u6F5B\u5728\u5BA2\u6236",features:["\u6D88\u606F\u767C\u9001","\u81EA\u52D5\u56DE\u8986","\u5EE3\u544A\u7FA4\u767C","\u79C1\u804A\u8DDF\u9032"],priority:2},{id:"Explorer",name:"\u63A2\u7D22\u865F",icon:"\u{1F50D}",color:"#f59e0b",description:"\u767C\u73FE\u65B0\u8CC7\u6E90\uFF0C\u52A0\u5165\u7FA4\u7D44",features:["\u8CC7\u6E90\u641C\u7D22","\u7FA4\u7D44\u52A0\u5165","\u6210\u54E1\u63D0\u53D6","\u93C8\u63A5\u5206\u6790"],priority:3},{id:"AI",name:"AI\u865F",icon:"\u{1F916}",color:"#8b5cf6",description:"AI \u81EA\u52D5\u804A\u5929\u548C\u667A\u80FD\u56DE\u8986",features:["AI \u81EA\u52D5\u804A\u5929","\u667A\u80FD\u56DE\u8986","\u610F\u5716\u5206\u6790"],priority:4},{id:"Backup",name:"\u5099\u7528\u865F",icon:"\u26A1",color:"#06b6d4",description:"\u8CA0\u8F09\u5747\u8861\u548C\u6545\u969C\u5099\u63F4",features:["\u8CA0\u8F09\u5747\u8861","\u6545\u969C\u5099\u63F4","\u6279\u91CF\u64CD\u4F5C"],priority:5},{id:"Unassigned",name:"\u672A\u5206\u914D",icon:"\u2B55",color:"#94a3b8",description:"\u65B0\u5E33\u865F\uFF0C\u7B49\u5F85\u5206\u914D\u89D2\u8272",features:[],priority:99}];function K(s){return Y.find(r=>r.id===s)||Y.find(r=>r.id==="Unassigned")}function tn(s){return K(s).name}function nn(s){return K(s).icon}function on(s){return K(s).color}function rn(){return Y.filter(s=>s.id!=="Unassigned")}var _e=[{id:"vip",name:"VIP",color:"#f59e0b"},{id:"active",name:"\u6D3B\u8DC3",color:"#10b981"},{id:"new",name:"\u65B0\u53F7",color:"#3b82f6"},{id:"stable",name:"\u7A33\u5B9A",color:"#8b5cf6"},{id:"test",name:"\u6D4B\u8BD5",color:"#6b7280"},{id:"priority",name:"\u4F18\u5148",color:"#ef4444"}],an=[{id:"sales",name:"\u{1F6D2} \u9500\u552E\u8FBE\u4EBA",description:"\u79EF\u6781\u3001\u5584\u4E8E\u5F15\u5BFC\u8D2D\u4E70"},{id:"support",name:"\u{1F4AC} \u5BA2\u670D\u4E13\u5458",description:"\u8010\u5FC3\u3001\u4E13\u4E1A\u3001\u89E3\u51B3\u95EE\u9898"},{id:"expert",name:"\u{1F393} \u884C\u4E1A\u4E13\u5BB6",description:"\u4E13\u4E1A\u3001\u6743\u5A01\u3001\u6DF1\u5EA6\u5206\u6790"},{id:"friendly",name:"\u{1F60A} \u4EB2\u548C\u52A9\u624B",description:"\u8F7B\u677E\u3001\u53CB\u5584\u3001\u95F2\u804A\u5F0F"},{id:"efficient",name:"\u{1F916} \u6548\u7387\u52A9\u624B",description:"\u7B80\u6D01\u3001\u76F4\u63A5\u3001\u5FEB\u901F\u54CD\u5E94"}],Ce=[{id:"sales_expert",name:"\u92B7\u552E\u5C08\u5BB6",icon:"\u{1F4BC}",description:"\u4E13\u4E1A\u92B7\u552E\u9867\u554F\uFF0C\u5584\u65BC\u6316\u6398\u9700\u6C42\u3001\u63A8\u85A6\u7522\u54C1\u3001\u4FC3\u6210\u4EA4\u6613",systemPrompt:`\u4F60\u662F\u4E00\u4F4D\u7D93\u9A57\u8C50\u5BCC\u7684\u92B7\u552E\u5C08\u5BB6\u3002\u4F60\u7684\u76EE\u6A19\u662F\uFF1A
1. \u53CB\u597D\u5730\u8207\u5BA2\u6236\u5EFA\u7ACB\u4FE1\u4EFB\u5173\u4FC2
2. \u901A\u904E\u63D0\u554F\u4E86\u89E3\u5BA2\u6236\u7684\u771F\u5BE6\u9700\u6C42
3. \u6839\u64DA\u9700\u6C42\u63A8\u85A6\u5408\u9069\u7684\u7522\u54C1\u6216\u670D\u52D9
4. \u89E3\u7B54\u7591\u616E\uFF0C\u8655\u7406\u7570\u8B70
5. \u9069\u6642\u5F15\u5C0E\u5B8C\u6210\u8CFC\u8CB7\u6C7A\u7B56

\u6E9D\u901A\u98CE\u683C\uFF1A\u4E13\u4E1A\u4F46\u4E0D\u751F\u786C\uFF0C\u71B1\u60C5\u4F46\u4E0D\u904E\u5EA6\u63A8\u92B7\uFF0C\u5584\u65BC\u50BE\u807D\u548C\u56DE\u61C9\u3002`,greeting:"\u60A8\u597D\uFF01\u5F88\u9AD8\u8208\u70BA\u60A8\u670D\u52D9\uFF0C\u8ACB\u554F\u6709\u4EC0\u9EBC\u53EF\u4EE5\u5E6B\u60A8\u7684\u55CE\uFF1F",creativity:60,responseLength:"medium",tone:"professional",language:"zh-TW",enableEmoji:!0,blockKeywords:[]},{id:"customer_service",name:"\u5BA2\u670D\u5C08\u54E1",icon:"\u{1F3A7}",description:"\u8010\u5FC3\u7D30\u7DFB\u7684\u5BA2\u670D\u4EBA\u54E1\uFF0C\u5C08\u6CE8\u65BC\u89E3\u6C7A\u554F\u984C\u548C\u63D0\u4F9B\u5E6B\u52A9",systemPrompt:`\u4F60\u662F\u4E00\u4F4D\u4E13\u4E1A\u7684\u5BA2\u670D\u5C08\u54E1\u3002\u4F60\u7684\u8077\u8CAC\u662F\uFF1A
1. \u8010\u5FC3\u50BE\u807D\u5BA2\u6236\u7684\u554F\u984C\u548C\u8A34\u6C42
2. \u6E96\u78BA\u7406\u89E3\u554F\u984C\u7684\u6838\u5FC3
3. \u63D0\u4F9B\u6E05\u6670\u3001\u5BE6\u7528\u7684\u89E3\u6C7A\u65B9\u6848
4. \u78BA\u8A8D\u554F\u984C\u662F\u5426\u89E3\u6C7A
5. \u4FDD\u6301\u79AE\u8C8C\u548C\u4E13\u4E1A

\u6E9D\u901A\u539F\u5247\uFF1A\u59CB\u7D42\u4FDD\u6301\u8010\u5FC3\uFF0C\u4E0D\u63A8\u8AC9\u8CAC\u4EFB\uFF0C\u7A4D\u6975\u89E3\u6C7A\u554F\u984C\u3002`,greeting:"\u60A8\u597D\uFF0C\u6211\u662F\u5BA2\u670D\u5C08\u54E1\uFF0C\u8ACB\u554F\u9047\u5230\u4E86\u4EC0\u9EBC\u554F\u984C\uFF1F",creativity:40,responseLength:"medium",tone:"friendly",language:"zh-TW",enableEmoji:!0,blockKeywords:[]},{id:"tech_consultant",name:"\u6280\u8853\u9867\u554F",icon:"\u{1F527}",description:"\u4E13\u4E1A\u6280\u8853\u80CC\u666F\uFF0C\u64C5\u9577\u89E3\u91CB\u8907\u96DC\u6982\u5FF5\u548C\u63D0\u4F9B\u6280\u8853\u5EFA\u8B70",systemPrompt:`\u4F60\u662F\u4E00\u4F4D\u8CC7\u6DF1\u6280\u8853\u9867\u554F\u3002\u4F60\u7684\u7279\u9EDE\u662F\uFF1A
1. \u64C1\u6709\u6DF1\u539A\u7684\u6280\u8853\u80CC\u666F
2. \u80FD\u5C06\u8907\u96DC\u6982\u5FF5\u7528\u7C21\u55AE\u6613\u61C2\u7684\u65B9\u5F0F\u89E3\u91CB
3. \u63D0\u4F9B\u4E13\u4E1A\u3001\u53EF\u884C\u7684\u6280\u8853\u5EFA\u8B70
4. \u5E6B\u52A9\u8A55\u4F30\u6280\u8853\u65B9\u6848\u7684\u512A\u7F3A\u9EDE
5. \u4FDD\u6301\u5BA2\u89C0\u3001\u7406\u6027\u7684\u5206\u6790\u614B\u5EA6

\u6E9D\u901A\u98CE\u683C\uFF1A\u4E13\u4E1A\u3001\u56B4\u8B39\u3001\u6709\u689D\u7406\uFF0C\u907F\u514D\u4F7F\u7528\u904E\u591A\u8853\u8A9E\u3002`,greeting:"\u60A8\u597D\uFF0C\u6211\u662F\u6280\u8853\u9867\u554F\uFF0C\u6709\u4EC0\u9EBC\u6280\u8853\u554F\u984C\u9700\u8981\u8A0E\u8AD6\u55CE\uFF1F",creativity:50,responseLength:"long",tone:"professional",language:"zh-TW",enableEmoji:!1,blockKeywords:[]},{id:"social_butterfly",name:"\u793E\u4EA4\u9054\u4EBA",icon:"\u{1F98B}",description:"\u6D3B\u6F51\u958B\u6717\uFF0C\u64C5\u9577\u65E5\u5E38\u9592\u804A\u548C\u7DAD\u8B77\u793E\u4EA4\u5173\u4FC2",systemPrompt:`\u4F60\u662F\u4E00\u500B\u6D3B\u6F51\u958B\u6717\u7684\u793E\u4EA4\u9054\u4EBA\u3002\u4F60\u7684\u7279\u9EDE\u662F\uFF1A
1. \u6027\u683C\u958B\u6717\uFF0C\u5BB9\u6613\u89AA\u8FD1
2. \u5584\u65BC\u627E\u8A71\u984C\uFF0C\u7DAD\u6301\u8F15\u9B06\u6109\u5FEB\u7684\u6C23\u6C1B
3. \u8A18\u4F4F\u5C0D\u65B9\u8AAA\u904E\u7684\u4E8B\u60C5\uFF0C\u8868\u73FE\u51FA\u5173\u5FC3
4. \u9069\u6642\u5206\u4EAB\u6709\u8DA3\u7684\u898B\u805E
5. \u8B93\u5C0D\u65B9\u611F\u5230\u88AB\u91CD\u8996\u548C\u6B23\u8CDE

\u6E9D\u901A\u98CE\u683C\uFF1A\u8F15\u9B06\u3001\u81EA\u7136\u3001\u771F\u8AA0\uFF0C\u50CF\u670B\u53CB\u4E00\u6A23\u4EA4\u6D41\u3002`,greeting:"\u55E8\uFF01\u6700\u8FD1\u600E\u9EBC\u6A23\uFF1F\u6709\u4EC0\u9EBC\u65B0\u9BAE\u4E8B\u55CE\uFF1F\u{1F60A}",creativity:80,responseLength:"short",tone:"casual",language:"zh-TW",enableEmoji:!0,blockKeywords:[]},{id:"marketing_expert",name:"\u71DF\u92B7\u7B56\u5283",icon:"\u{1F4E2}",description:"\u5275\u610F\u5341\u8DB3\u7684\u71DF\u92B7\u5C08\u5BB6\uFF0C\u64C5\u9577\u63A8\u5EE3\u548C\u54C1\u724C\u5EFA\u8A2D",systemPrompt:`\u4F60\u662F\u4E00\u4F4D\u5275\u610F\u71DF\u92B7\u5C08\u5BB6\u3002\u4F60\u64C5\u9577\uFF1A
1. \u7B56\u5283\u5438\u5F15\u4EBA\u7684\u71DF\u92B7\u6D3B\u52D5
2. \u64B0\u5BEB\u6709\u5438\u5F15\u529B\u7684\u6587\u6848
3. \u5206\u6790\u76EE\u6A19\u53D7\u773E\u7684\u9700\u6C42
4. \u63D0\u4F9B\u54C1\u724C\u5B9A\u4F4D\u5EFA\u8B70
5. \u7D50\u5408\u71B1\u9EDE\u5275\u9020\u8A71\u984C

\u6E9D\u901A\u98CE\u683C\uFF1A\u6709\u5275\u610F\u3001\u6709\u611F\u67D3\u529B\u3001\u5584\u65BC\u8B1B\u6545\u4E8B\u3002`,greeting:"\u55E8\uFF01\u6E96\u5099\u597D\u8B93\u60A8\u7684\u54C1\u724C\u812B\u7A4E\u800C\u51FA\u4E86\u55CE\uFF1F",creativity:85,responseLength:"medium",tone:"friendly",language:"zh-TW",enableEmoji:!0,blockKeywords:[]},{id:"financial_advisor",name:"\u7406\u8CA1\u9867\u554F",icon:"\u{1F4B0}",description:"\u4E13\u4E1A\u7406\u8CA1\u5EFA\u8B70\uFF0C\u5E6B\u52A9\u5236\u5B9A\u8CA1\u52D9\u898F\u5283",systemPrompt:`\u4F60\u662F\u4E00\u4F4D\u4E13\u4E1A\u7684\u7406\u8CA1\u9867\u554F\u3002\u4F60\u7684\u8077\u8CAC\u662F\uFF1A
1. \u4E86\u89E3\u5BA2\u6236\u7684\u8CA1\u52D9\u72C0\u6CC1\u548C\u76EE\u6A19
2. \u63D0\u4F9B\u4E13\u4E1A\u7684\u7406\u8CA1\u5EFA\u8B70
3. \u89E3\u91CB\u5404\u7A2E\u91D1\u878D\u7522\u54C1\u7684\u7279\u9EDE
4. \u5E6B\u52A9\u8A55\u4F30\u98A8\u96AA\u548C\u6536\u76CA
5. \u5236\u5B9A\u5408\u7406\u7684\u8CA1\u52D9\u898F\u5283

\u6CE8\u610F\uFF1A\u4E0D\u63D0\u4F9B\u5177\u9AD4\u6295\u8CC7\u5EFA\u8B70\uFF0C\u5F37\u8ABF\u98A8\u96AA\u610F\u8B58\u3002`,greeting:"\u60A8\u597D\uFF0C\u6211\u662F\u7406\u8CA1\u9867\u554F\uFF0C\u6709\u4EC0\u9EBC\u8CA1\u52D9\u898F\u5283\u7684\u554F\u984C\u55CE\uFF1F",creativity:30,responseLength:"long",tone:"formal",language:"zh-TW",enableEmoji:!1,blockKeywords:["\u4FDD\u8B49\u6536\u76CA","\u7A69\u8CFA\u4E0D\u8CE0"]},{id:"health_coach",name:"\u5065\u5EB7\u6559\u7DF4",icon:"\u{1F4AA}",description:"\u5065\u5EB7\u751F\u6D3B\u65B9\u5F0F\u7684\u5021\u5C0E\u8005\uFF0C\u63D0\u4F9B\u5065\u8EAB\u548C\u98F2\u98DF\u5EFA\u8B70",systemPrompt:`\u4F60\u662F\u4E00\u4F4D\u4E13\u4E1A\u7684\u5065\u5EB7\u6559\u7DF4\u3002\u4F60\u5C08\u6CE8\u65BC\uFF1A
1. \u63D0\u4F9B\u79D1\u5B78\u7684\u5065\u8EAB\u5EFA\u8B70
2. \u5236\u5B9A\u5408\u7406\u7684\u904B\u52D5\u8A08\u5283
3. \u7D66\u51FA\u5065\u5EB7\u98F2\u98DF\u7684\u6307\u5C0E
4. \u9F13\u52F5\u548C\u6FC0\u52F5\u5BA2\u6236\u5805\u6301
5. \u5206\u4EAB\u5065\u5EB7\u751F\u6D3B\u7684\u77E5\u8B58

\u6E9D\u901A\u98CE\u683C\uFF1A\u7A4D\u6975\u3001\u9F13\u52F5\u3001\u5145\u6EFF\u6B63\u80FD\u91CF\u3002`,greeting:"\u55E8\uFF01\u6E96\u5099\u597D\u958B\u59CB\u5065\u5EB7\u751F\u6D3B\u4E86\u55CE\uFF1F\u{1F4AA}",creativity:60,responseLength:"medium",tone:"friendly",language:"zh-TW",enableEmoji:!0,blockKeywords:[]},{id:"educator",name:"\u77E5\u8B58\u5C0E\u5E2B",icon:"\u{1F4DA}",description:"\u8010\u5FC3\u7684\u6559\u80B2\u8005\uFF0C\u5584\u65BC\u89E3\u91CB\u548C\u50B3\u6388\u77E5\u8B58",systemPrompt:`\u4F60\u662F\u4E00\u4F4D\u8010\u5FC3\u7684\u77E5\u8B58\u5C0E\u5E2B\u3002\u4F60\u7684\u7279\u9EDE\u662F\uFF1A
1. \u5584\u65BC\u5C06\u8907\u96DC\u77E5\u8B58\u7C21\u5316
2. \u4F7F\u7528\u4F8B\u5B50\u548C\u6BD4\u55BB\u5E6B\u52A9\u7406\u89E3
3. \u9F13\u52F5\u63D0\u554F\uFF0C\u8010\u5FC3\u89E3\u7B54
4. \u6839\u64DA\u5C0D\u65B9\u6C34\u5E73\u8ABF\u6574\u8B1B\u89E3\u65B9\u5F0F
5. \u6FC0\u767C\u5B78\u7FD2\u8208\u8DA3

\u6E9D\u901A\u98CE\u683C\uFF1A\u8010\u5FC3\u3001\u5FAA\u5E8F\u6F38\u9032\u3001\u5584\u65BC\u5F15\u5C0E\u3002`,greeting:"\u4F60\u597D\uFF01\u4ECA\u5929\u60F3\u5B78\u7FD2\u4EC0\u9EBC\u5462\uFF1F",creativity:55,responseLength:"long",tone:"friendly",language:"zh-TW",enableEmoji:!0,blockKeywords:[]}],ln=[{id:"none",name:"\u76F4\u9023\uFF08\u7121\u4EE3\u7406\uFF09"},{id:"socks5",name:"SOCKS5"},{id:"http",name:"HTTP/HTTPS"},{id:"mtproto",name:"MTProto"}],j=class s{constructor(){this.ipcService=k(G);this.toast=k(U);this.i18n=k(H);this.ipcChannels=[];this.accounts=[];this.addAccount=new T;this.accountSelected=new T;this.accountLogin=new T;this.accountLogout=new T;this.accountRemove=new T;this.accountExport=new T;this.accountEdit=new T;this.accountUpdated=new T;this.viewMode=v("card");this.searchQuery="";this.statusFilter="all";this.selectedAccount=v(null);this.selectedIds=new Set;this.selectAll=!1;this.showEditModal=v(!1);this.editTab=v("basic");this.editingAccount=v(null);this.saving=v(!1);this.testingProxy=v(!1);this.proxyTestResult=v(null);this.syncing=v(!1);this.showBatchEditModal=v(!1);this.batchSaving=v(!1);this.batchSyncing=v(!1);this.batchLoggingIn=v(!1);this.batchLoggingOut=v(!1);this.loggingInAccounts=v(new Set);this.loginProgress=v(new Map);this.showTagFilter=v(!1);this.showTagManager=v(!1);this.showGroupManager=v(!1);this.showAccountTagEditor=v(!1);this.editingTagAccount=v(null);this.availableTags=v([..._e]);this.groups=v([]);this.groupFilter="all";this.tagFilter=[];this.accountTagsSelection=new Set;this.newTagName="";this.newTagColor="#3b82f6";this.newGroupName="";this.newGroupColor="#6b7280";this.showPersonaManager=v(!1);this.showPersonaEditor=v(!1);this.personaTab=v("templates");this.selectedPersonaId=v(null);this.editingPersona=v(null);this.availablePersonas=v([...Ce]);this.applyPersonaToAccount=v(null);this.showRoleSelector=v(!1);this.roleSelectorAccount=v(null);this.roleSelectorPosition=v({top:0,left:0});this.assignableRoles=rn();this.personaForm=this.getDefaultPersonaForm();this.batchForm=this.getDefaultBatchForm();this.roleTemplates=an;this.proxyTypes=ln;this.editForm=this.getDefaultEditForm()}t(r){return this.i18n.t(r)}get filteredAccounts(){let r=this.accounts;if(this.searchQuery){let e=this.searchQuery.toLowerCase();r=r.filter(o=>o.phone.toLowerCase().includes(e)||o.firstName?.toLowerCase().includes(e)||o.lastName?.toLowerCase().includes(e)||o.username?.toLowerCase().includes(e)||o.nickname?.toLowerCase().includes(e))}return this.statusFilter!=="all"&&(r=r.filter(e=>e.status===this.statusFilter)),this.groupFilter!=="all"&&(this.groupFilter==="_ungrouped"?r=r.filter(e=>!e.group):r=r.filter(e=>e.group===this.groupFilter)),this.tagFilter.length>0&&(r=r.filter(e=>e.tags&&this.tagFilter.some(o=>e.tags.includes(o)))),r}get onlineCount(){return this.accounts.filter(r=>r.status==="Online").length}get offlineCount(){return this.accounts.filter(r=>r.status==="Offline").length}get bannedCount(){return this.accounts.filter(r=>r.status==="Banned").length}ngOnInit(){this.loadTagsAndGroups(),this.loadPersonas(),this.setupLoginStatusListeners()}ngOnChanges(r){if(r.accounts&&!r.accounts.firstChange){let e=r.accounts.currentValue;this.loggingInAccounts().forEach(t=>{let c=e.find(A=>A.id===t);c&&(["Logging in...","Waiting Code","Waiting 2FA"].includes(c.status)||this.onLoginComplete(t))})}}ngOnDestroy(){this.ipcChannels.forEach(r=>{this.ipcService.cleanup(r)})}setupLoginStatusListeners(){this.ipcService.on("account-login-error",r=>{r.accountId&&this.onLoginComplete(r.accountId)}),this.ipcChannels.push("account-login-error"),this.ipcService.on("login-success",r=>{r.accountId&&this.onLoginComplete(r.accountId)}),this.ipcChannels.push("login-success")}loadTagsAndGroups(){this.ipcService.once("get-tags-result",r=>{r.success&&r.tags&&this.availableTags.set(r.tags.length>0?r.tags:[..._e])}),this.ipcService.send("get-tags",{}),this.ipcService.once("get-groups-result",r=>{r.success&&r.groups&&this.groups.set(r.groups)}),this.ipcService.send("get-groups",{})}getAvatarLetter(r){return r.nickname?r.nickname.charAt(0).toUpperCase():r.firstName?r.firstName.charAt(0).toUpperCase():r.phone?r.phone.replace("+","").charAt(0):"?"}getDisplayName(r){return r.nickname?r.nickname:`${r.firstName||""} ${r.lastName||""}`.trim()||r.phone}getStatusClass(r){switch(r){case"Online":return"online";case"Offline":return"offline";case"Banned":return"banned";case"Warming Up":case"Cooldown":return"warning";default:return"offline"}}getStatusText(r){switch(r){case"Online":return"\u5728\u7EBF";case"Offline":return"\u79BB\u7EBF";case"Banned":return"\u5C01\u7981";case"Warming Up":return"\u9884\u70ED\u4E2D";case"Cooldown":return"\u51B7\u5374\u4E2D";case"Proxy Error":return"\u4EE3\u7406\u9519\u8BEF";default:return r}}getDeviceIcon(r){switch(r){case"ios":return"\u{1F4F1}";case"android":return"\u{1F916}";case"desktop":return"\u{1F4BB}";default:return"\u{1F4F1}"}}getAvatarUrl(r){return r?"local-file://"+r:""}onAvatarError(r){let e=r.target;if(e){e.style.display="none";let o=e.parentElement;if(o){let t=o.querySelector(".avatar-fallback");t&&(t.style.display="flex")}}}isValidAvatarPath(r){return!!r&&r.length>0&&!r.includes("undefined")}selectAccount(r){this.selectedAccount.set(r),this.accountSelected.emit(r)}closeDetail(){this.selectedAccount.set(null)}toggleSelect(r){this.selectedIds.has(r)?this.selectedIds.delete(r):this.selectedIds.add(r)}getRoleConfig(r){return K(r||"Unassigned")}getRoleName(r){return tn(r||"Unassigned")}getRoleIcon(r){return nn(r||"Unassigned")}getRoleColor(r){return on(r||"Unassigned")}openRoleSelector(r,e){e.stopPropagation();let t=e.target.getBoundingClientRect();this.roleSelectorAccount.set(r),this.roleSelectorPosition.set({top:t.bottom+8,left:Math.min(t.left,window.innerWidth-280)}),this.showRoleSelector.set(!0)}closeRoleSelector(){this.showRoleSelector.set(!1),this.roleSelectorAccount.set(null)}changeAccountRole(r){let e=this.roleSelectorAccount();if(!e)return;this.ipcService.send("update-account",{id:e.id,phone:e.phone,role:r});let o=this.accounts.findIndex(t=>t.id===e.id);o>=0&&(this.accounts[o]=W(O({},this.accounts[o]),{role:r})),this.selectedAccount()?.id===e.id&&this.selectedAccount.set(W(O({},e),{role:r})),this.toast.success(`\u5DF2\u5C07 ${e.phone} \u8A2D\u70BA\u300C${this.getRoleName(r)}\u300D`),this.closeRoleSelector()}onLogin(r){let e=new Set(this.loggingInAccounts());e.add(r.id),this.loggingInAccounts.set(e);let o=new Map(this.loginProgress());o.set(r.id,{step:"\u6B63\u5728\u9023\u63A5...",progress:10}),this.loginProgress.set(o),this.accountLogin.emit(r)}canLogin(r){let e=["Offline","Banned","Error","error","Proxy Error","Session Expired","Auth Error"],o=r.status!=="Online",t=!["Logging in...","Waiting Code","Waiting 2FA"].includes(r.status),c=e.includes(r.status)||r.status.toLowerCase().includes("error")||r.status.toLowerCase().includes("offline");return o&&t&&c}isLoggingIn(r){return this.loggingInAccounts().has(r)}getLoginProgress(r){return this.loginProgress().get(r)||null}updateLoginProgress(r,e,o){let t=new Map(this.loginProgress());t.set(r,{step:e,progress:o}),this.loginProgress.set(t)}onLoginComplete(r){let e=new Set(this.loggingInAccounts());e.delete(r),this.loggingInAccounts.set(e);let o=new Map(this.loginProgress());o.delete(r),this.loginProgress.set(o)}onLogout(r){this.accountLogout.emit(r)}onRemove(r){confirm(`\u786E\u5B9A\u8981\u5220\u9664\u8D26\u6237 ${r.phone} \u55CE\uFF1F`)&&(this.accountRemove.emit(r),this.closeDetail())}onExport(r){this.accountExport.emit(r)}onEdit(r){this.accountEdit.emit(r)}syncAccountInfo(r){if(r.status!=="Online"){this.toast.warning(`\u5E33\u865F ${r.phone} \u672A\u767B\u5165\uFF0C\u8ACB\u5148\u9EDE\u64CA\u300C\u767B\u5165\u300D\u6309\u9215`);return}this.syncing.set(!0),this.toast.info("\u6B63\u5728\u540C\u6B65\u8D26\u53F7\u4FE1\u606F..."),this.ipcService.once("sync-account-info-result",e=>{if(this.syncing.set(!1),console.log("[AccountCard] Sync result:",e),e.success&&e.profile){let o=e.profile,t=W(O({},r),{firstName:o.firstName||r.firstName,lastName:o.lastName||r.lastName,username:o.username||r.username,bio:o.bio||r.bio,avatarPath:o.avatarPath||r.avatarPath,telegramId:o.id?String(o.id):r.telegramId});this.selectedAccount()?.id===r.id&&this.selectedAccount.set(t);let c=this.accounts.findIndex(A=>A.id===r.id);c>=0&&(this.accounts[c]=t),this.toast.success(`\u540C\u6B65\u6210\u529F\uFF01\u7528\u6236\u540D: @${o.username||"\u7121"}`)}else this.toast.error(`\u540C\u6B65\u5931\u6557: ${e.error||"\u65E0\u6CD5\u7372\u53D6\u4FE1\u606F\uFF08\u8D26\u53F7\u53EF\u80FD\u672A\u767B\u5165\uFF09"}`)}),this.ipcService.send("sync-account-info",{id:r.id,phone:r.phone}),setTimeout(()=>{this.syncing()&&(this.syncing.set(!1),this.toast.error("\u540C\u6B65\u8D85\u65F6\uFF0C\u8BF7\u91CD\u8BD5"))},3e4)}getDefaultPersonaForm(){return{id:"",name:"",icon:"\u{1F916}",description:"",systemPrompt:"",greeting:"",creativity:50,responseLength:"medium",tone:"friendly",language:"zh-TW",enableEmoji:!0,blockKeywordsText:""}}openPersonaManager(r){r&&(this.applyPersonaToAccount.set(r),r.aiPersonality&&this.selectedPersonaId.set(r.aiPersonality)),this.showPersonaManager.set(!0)}closePersonaManager(){this.showPersonaManager.set(!1),this.selectedPersonaId.set(null),this.applyPersonaToAccount.set(null)}selectPersona(r){this.selectedPersonaId.set(r.id)}getPersonaById(r){return this.availablePersonas().find(e=>e.id===r)}getCustomPersonas(){return this.availablePersonas().filter(r=>r.isCustom)}getToneName(r){return{formal:"\u6B63\u5F0F",professional:"\u4E13\u4E1A",friendly:"\u53CB\u5584",casual:"\u8F15\u9B06"}[r]||r}applySelectedPersona(){let r=this.selectedPersonaId(),e=this.applyPersonaToAccount();r&&e&&(this.ipcService.send("update-account",{id:e.id,phone:e.phone,aiPersonality:r,aiEnabled:!0}),e.aiPersonality=r,e.aiEnabled=!0,this.toast.success(`\u5DF2\u5E94\u7528\u4EBA\u8A2D\u300C${this.getPersonaById(r)?.name}\u300D`),this.closePersonaManager())}startNewPersona(){this.personaForm=this.getDefaultPersonaForm(),this.editingPersona.set(null),this.showPersonaEditor.set(!0)}editPersona(r){this.personaForm={id:r.id,name:r.name,icon:r.icon,description:r.description,systemPrompt:r.systemPrompt,greeting:r.greeting||"",creativity:r.creativity,responseLength:r.responseLength,tone:r.tone,language:r.language,enableEmoji:r.enableEmoji,blockKeywordsText:r.blockKeywords.join(`
`)},this.editingPersona.set(r),this.showPersonaEditor.set(!0)}closePersonaEditor(){this.showPersonaEditor.set(!1),this.editingPersona.set(null),this.personaForm=this.getDefaultPersonaForm()}savePersona(){let r={id:this.personaForm.id||"custom_"+Date.now(),name:this.personaForm.name,icon:this.personaForm.icon||"\u{1F916}",description:this.personaForm.description,systemPrompt:this.personaForm.systemPrompt,greeting:this.personaForm.greeting,creativity:this.personaForm.creativity,responseLength:this.personaForm.responseLength,tone:this.personaForm.tone,language:this.personaForm.language,enableEmoji:this.personaForm.enableEmoji,blockKeywords:this.personaForm.blockKeywordsText.split(`
`).filter(e=>e.trim()),isCustom:!0};this.editingPersona()?(this.availablePersonas.update(e=>e.map(o=>o.id===r.id?r:o)),this.toast.success("\u4EBA\u8A2D\u5DF2\u66F4\u65B0")):(this.availablePersonas.update(e=>[...e,r]),this.toast.success("\u4EBA\u8A2D\u5DF2\u521B\u5EFA")),this.savePersonasToBackend(),this.closePersonaEditor()}deletePersona(r){confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u4EBA\u8A2D\u55CE\uFF1F")&&(this.availablePersonas.update(e=>e.filter(o=>o.id!==r)),this.savePersonasToBackend(),this.toast.success("\u4EBA\u8A2D\u5DF2\u5220\u9664"))}savePersonasToBackend(){let r=this.getCustomPersonas();this.ipcService.send("save-personas",{personas:r})}openPersonaManagerFromEdit(){this.selectedPersonaId.set(this.editForm.aiPersonality||null),this.showPersonaManager.set(!0);let r=this.applySelectedPersona.bind(this);this.applySelectedPersona=()=>{let e=this.selectedPersonaId();if(e){this.editForm.aiPersonality=e;let o=this.getPersonaById(e);o&&(this.editForm.aiCreativity=o.creativity)}this.closePersonaManager(),this.applySelectedPersona=r}}loadPersonas(){this.ipcService.once("get-personas-result",r=>{if(r.success&&r.personas){let e=r.personas.map(o=>W(O({},o),{isCustom:!0}));this.availablePersonas.set([...Ce,...e])}}),this.ipcService.send("get-personas",{})}toggleTagFilter(){this.showTagFilter.set(!this.showTagFilter())}toggleTagFilterItem(r){let e=this.tagFilter.indexOf(r);e>=0?this.tagFilter.splice(e,1):this.tagFilter.push(r)}clearTagFilter(){this.tagFilter=[]}getTagById(r){return this.availableTags().find(e=>e.id===r)}getGroupAccountCount(r){return this.accounts.filter(e=>e.group===r).length}openTagManager(){this.showTagFilter.set(!1),this.showTagManager.set(!0)}closeTagManager(){this.showTagManager.set(!1)}addTag(){if(!this.newTagName.trim())return;let r={id:"tag_"+Date.now(),name:this.newTagName.trim(),color:this.newTagColor};this.availableTags.update(e=>[...e,r]),this.newTagName="",this.newTagColor="#3b82f6"}quickAddTag(){if(!this.newTagName.trim())return;let r={id:"tag_"+Date.now(),name:this.newTagName.trim(),color:this.newTagColor};this.availableTags.update(e=>[...e,r]),this.ipcService.send("save-tags",{tags:this.availableTags()}),this.toast.success(`\u6807\u7B7E "${r.name}" \u5DF2\u6DFB\u52A0`),this.newTagName="",this.newTagColor="#3b82f6"}openTagManagerFromEditor(){this.closeAccountTagEditor(),this.openTagManager()}deleteTag(r){confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u6807\u7B7E\u5417\uFF1F")&&this.availableTags.update(e=>e.filter(o=>o.id!==r))}saveTags(){this.ipcService.send("save-tags",{tags:this.availableTags()}),this.toast.success("\u6807\u7B7E\u5DF2\u4FDD\u5B58"),this.closeTagManager()}openGroupManager(){this.showGroupManager.set(!0)}closeGroupManager(){this.showGroupManager.set(!1)}addGroup(){if(!this.newGroupName.trim())return;let r={id:"group_"+Date.now(),name:this.newGroupName.trim(),color:this.newGroupColor};this.groups.update(e=>[...e,r]),this.newGroupName="",this.newGroupColor="#6b7280"}deleteGroup(r){confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u5206\u7D44\u55CE\uFF1F\u8D26\u53F7\u5C06\u8B8A\u70BA\u672A\u5206\u7D44\u3002")&&this.groups.update(e=>e.filter(o=>o.id!==r))}saveGroups(){this.ipcService.send("save-groups",{groups:this.groups()}),this.toast.success("\u5206\u7D44\u5DF2\u4FDD\u5B58"),this.closeGroupManager()}openAccountTagEditor(r){this.editingTagAccount.set(r),this.accountTagsSelection=new Set(r.tags||[]),this.showAccountTagEditor.set(!0)}closeAccountTagEditor(){this.showAccountTagEditor.set(!1),this.editingTagAccount.set(null),this.accountTagsSelection.clear()}toggleAccountTag(r){this.accountTagsSelection.has(r)?this.accountTagsSelection.delete(r):this.accountTagsSelection.add(r)}saveAccountTags(){let r=this.editingTagAccount();if(!r)return;let e=Array.from(this.accountTagsSelection);this.ipcService.send("update-account",{id:r.id,phone:r.phone,tags:e}),r.tags=e,this.toast.success("\u6807\u7B7E\u5DF2\u66F4\u65B0"),this.closeAccountTagEditor()}getDefaultBatchForm(){return{enableProxy:!1,proxyType:"socks5",proxyHost:"",proxyPort:null,proxyUsername:"",proxyPassword:"",proxyCountry:"",enableRole:!1,role:"",enableAI:!1,aiEnabled:!1,aiModel:"gpt-4-turbo",enableLimit:!1,dailySendLimit:50,enableWarmup:!1,enableGroup:!1,group:""}}isAllSelected(){return this.filteredAccounts.length>0&&this.filteredAccounts.every(r=>this.selectedIds.has(r.id))}toggleSelectAll(){this.isAllSelected()?this.selectedIds.clear():this.filteredAccounts.forEach(r=>this.selectedIds.add(r.id))}clearSelection(){this.selectedIds.clear()}openBatchEditModal(){this.batchForm=this.getDefaultBatchForm(),this.showBatchEditModal.set(!0)}closeBatchEditModal(){this.showBatchEditModal.set(!1)}applyBatchEdit(){if(this.selectedIds.size===0){this.toast.warning("\u8BF7\u5148\u9009\u62E9\u8D26\u53F7");return}this.batchSaving.set(!0);let r={};if(this.batchForm.enableProxy){let e="";if(this.batchForm.proxyType!=="none"&&this.batchForm.proxyHost&&this.batchForm.proxyPort){let o=this.batchForm.proxyUsername&&this.batchForm.proxyPassword?`${this.batchForm.proxyUsername}:${this.batchForm.proxyPassword}@`:"";e=`${this.batchForm.proxyType}://${o}${this.batchForm.proxyHost}:${this.batchForm.proxyPort}`}r.proxy=e,r.proxyType=this.batchForm.proxyType,r.proxyHost=this.batchForm.proxyHost,r.proxyPort=this.batchForm.proxyPort,r.proxyUsername=this.batchForm.proxyUsername,r.proxyPassword=this.batchForm.proxyPassword,r.proxyCountry=this.batchForm.proxyCountry}if(this.batchForm.enableRole&&(r.role=this.batchForm.role),this.batchForm.enableAI&&(r.aiEnabled=this.batchForm.aiEnabled,r.aiModel=this.batchForm.aiModel),this.batchForm.enableLimit&&(r.dailySendLimit=this.batchForm.dailySendLimit,r.enableWarmup=this.batchForm.enableWarmup),this.batchForm.enableGroup&&(r.group=this.batchForm.group),Object.keys(r).length===0){this.toast.warning("\u8ACB\u81F3\u5C11\u9009\u62E9\u4E00\u9805\u8BBE\u7F6E"),this.batchSaving.set(!1);return}this.ipcService.once("batch-update-accounts-result",e=>{this.batchSaving.set(!1),e.success?(this.toast.success(`\u5DF2\u66F4\u65B0 ${e.count||this.selectedIds.size} \u500B\u8D26\u53F7`),this.closeBatchEditModal(),this.clearSelection()):this.toast.error(`\u6279\u91CF\u66F4\u65B0\u5931\u6557: ${e.error||"\u672A\u77E5\u9519\u8BEF"}`)}),this.ipcService.send("batch-update-accounts",{accountIds:Array.from(this.selectedIds),updates:r}),setTimeout(()=>{this.batchSaving()&&(this.batchSaving.set(!1),this.toast.error("\u6279\u91CF\u66F4\u65B0\u8D85\u65F6\uFF0C\u8ACB\u91CD\u8A66"))},6e4)}batchLogin(){if(this.selectedIds.size===0){this.toast.warning("\u8ACB\u5148\u9078\u64C7\u5E33\u865F");return}let r=this.accounts.filter(c=>this.selectedIds.has(c.id)&&(c.status==="Offline"||c.status==="Banned"));if(r.length===0){this.toast.info("\u9078\u4E2D\u7684\u5E33\u865F\u90FD\u5DF2\u5728\u7DDA\u6216\u6B63\u5728\u767B\u5165\u4E2D");return}this.batchLoggingIn.set(!0),this.toast.info(`\u6B63\u5728\u6279\u91CF\u767B\u5165 ${r.length} \u500B\u5E33\u865F...`);let e=new Set(this.loggingInAccounts());r.forEach(c=>{e.add(c.id)}),this.loggingInAccounts.set(e);let o=0,t=()=>{if(o>=r.length){this.batchLoggingIn.set(!1),this.toast.success(`\u5DF2\u767C\u9001 ${r.length} \u500B\u5E33\u865F\u7684\u767B\u5165\u8ACB\u6C42`);return}let c=r[o];this.accountLogin.emit(c),o++,setTimeout(t,2e3)};t()}batchLogout(){if(this.selectedIds.size===0){this.toast.warning("\u8ACB\u5148\u9078\u64C7\u5E33\u865F");return}let r=this.accounts.filter(o=>this.selectedIds.has(o.id)&&o.status==="Online");if(r.length===0){this.toast.info("\u9078\u4E2D\u7684\u5E33\u865F\u90FD\u5DF2\u96E2\u7DDA");return}if(!confirm(`\u78BA\u5B9A\u8981\u9000\u51FA ${r.length} \u500B\u5728\u7DDA\u5E33\u865F\u55CE\uFF1F`))return;this.batchLoggingOut.set(!0),this.toast.info(`\u6B63\u5728\u6279\u91CF\u9000\u51FA ${r.length} \u500B\u5E33\u865F...`);let e=0;r.forEach((o,t)=>{setTimeout(()=>{this.accountLogout.emit(o),e++,e>=r.length&&(this.batchLoggingOut.set(!1),this.toast.success(`\u5DF2\u767C\u9001 ${r.length} \u500B\u5E33\u865F\u7684\u9000\u51FA\u8ACB\u6C42`))},t*500)})}batchSync(){if(this.selectedIds.size===0){this.toast.warning("\u8BF7\u5148\u9009\u62E9\u8D26\u53F7");return}this.batchSyncing.set(!0);let r=Array.from(this.selectedIds),e=0;r.forEach(t=>{let c=this.accounts.find(A=>A.id===t);c&&this.ipcService.send("sync-account-info",{id:t,phone:c.phone})});let o=t=>{e++,e>=r.length&&(this.batchSyncing.set(!1),this.toast.success(`\u5DF2\u540C\u6B65 ${r.length} \u4E2A\u8D26\u53F7`),this.ipcService.off("sync-account-info-result",o))};this.ipcService.on("sync-account-info-result",o),setTimeout(()=>{this.batchSyncing()&&(this.batchSyncing.set(!1),this.ipcService.off("sync-account-info-result",o),this.toast.warning(`\u5DF2\u540C\u6B65 ${e}/${r.length} \u4E2A\u8D26\u53F7`))},6e4)}confirmBatchDelete(){if(this.selectedIds.size===0){this.toast.warning("\u8BF7\u5148\u9009\u62E9\u8D26\u53F7");return}confirm(`\u786E\u5B9A\u8981\u5220\u9664\u9078\u4E2D\u7684 ${this.selectedIds.size} \u500B\u8D26\u53F7\u55CE\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u64A4\u92B7\u3002`)&&(this.ipcService.send("bulk-delete-accounts",{accountIds:Array.from(this.selectedIds)}),this.clearSelection(),this.toast.success("\u6279\u91CF\u5220\u9664\u8ACB\u6C42\u5DF2\u53D1\u9001"))}getDefaultEditForm(){return{nickname:"",notes:"",apiId:"",apiHash:"",dailySendLimit:50,group:"",enableWarmup:!1,proxyType:"none",proxyHost:"",proxyPort:null,proxyUsername:"",proxyPassword:"",proxyCountry:"",proxyRotationEnabled:!1,role:"",customRoleName:"",roleDescription:"",aiEnabled:!1,aiModel:"gpt-4-turbo",aiCreativity:50,aiResponseLength:50,aiAutoReply:!1,aiBlockKeywords:"",aiPersonality:""}}openEditModal(r){this.editingAccount.set(r),this.editTab.set("basic"),this.proxyTestResult.set(null),this.editForm={nickname:r.nickname||"",notes:r.notes||"",apiId:r.apiId||"",apiHash:r.apiHash||"",dailySendLimit:r.dailySendLimit||50,group:r.group||"",enableWarmup:r.enableWarmup||!1,proxyType:r.proxyType||"none",proxyHost:r.proxyHost||"",proxyPort:r.proxyPort||null,proxyUsername:r.proxyUsername||"",proxyPassword:r.proxyPassword||"",proxyCountry:r.proxyCountry||"",proxyRotationEnabled:r.proxyRotationEnabled||!1,role:r.role||"",customRoleName:"",roleDescription:"",aiEnabled:r.aiEnabled||!1,aiModel:r.aiModel||"gpt-4-turbo",aiCreativity:50,aiResponseLength:50,aiAutoReply:!1,aiBlockKeywords:"",aiPersonality:r.aiPersonality||""},this.showEditModal.set(!0)}closeEditModal(){this.showEditModal.set(!1),this.editingAccount.set(null),this.editForm=this.getDefaultEditForm()}onProxyTypeChange(){this.editForm.proxyType==="none"&&(this.editForm.proxyHost="",this.editForm.proxyPort=null,this.editForm.proxyUsername="",this.editForm.proxyPassword=""),this.proxyTestResult.set(null)}selectRole(r){this.editForm.role=r;let e=this.roleTemplates.find(o=>o.id===r);e&&(this.editForm.customRoleName=e.name)}testProxy(){if(!this.editForm.proxyHost||!this.editForm.proxyPort){this.toast.warning("\u8ACB\u586B\u5BEB\u4EE3\u7406\u5730\u5740\u548C\u7AEF\u53E3");return}this.testingProxy.set(!0),this.proxyTestResult.set(null);let r={type:this.editForm.proxyType,host:this.editForm.proxyHost,port:this.editForm.proxyPort,username:this.editForm.proxyUsername,password:this.editForm.proxyPassword};this.ipcService.once("test-proxy-result",e=>{this.testingProxy.set(!1),e.success?this.proxyTestResult.set({success:!0,message:`\u2705 \u4EE3\u7406\u8FDE\u63A5\u6210\u529F\uFF01\u5EF6\u9072: ${e.latency||"N/A"}ms`}):this.proxyTestResult.set({success:!1,message:`\u274C \u8FDE\u63A5\u5931\u6557: ${e.error||"\u672A\u77E5\u9519\u8BEF"}`})}),this.ipcService.send("test-proxy",r),setTimeout(()=>{this.testingProxy()&&(this.testingProxy.set(!1),this.proxyTestResult.set({success:!1,message:"\u274C \u6D4B\u8BD5\u8D85\u65F6\uFF0815\u79D2\uFF09"}))},15e3)}saveEdit(){let r=this.editingAccount();if(!r)return;this.saving.set(!0);let e="";if(this.editForm.proxyType!=="none"&&this.editForm.proxyHost&&this.editForm.proxyPort){let c=this.editForm.proxyUsername&&this.editForm.proxyPassword?`${this.editForm.proxyUsername}:${this.editForm.proxyPassword}@`:"";e=`${this.editForm.proxyType}://${c}${this.editForm.proxyHost}:${this.editForm.proxyPort}`}let o=this.editForm.customRoleName||this.roleTemplates.find(c=>c.id===this.editForm.role)?.name||this.editForm.role,t={id:r.id,phone:r.phone,nickname:this.editForm.nickname,notes:this.editForm.notes,apiId:this.editForm.apiId,apiHash:this.editForm.apiHash,dailySendLimit:this.editForm.dailySendLimit,group:this.editForm.group,enableWarmup:this.editForm.enableWarmup,proxy:e,proxyType:this.editForm.proxyType,proxyHost:this.editForm.proxyHost,proxyPort:this.editForm.proxyPort,proxyUsername:this.editForm.proxyUsername,proxyPassword:this.editForm.proxyPassword,proxyCountry:this.editForm.proxyCountry,proxyRotationEnabled:this.editForm.proxyRotationEnabled,role:o,aiEnabled:this.editForm.aiEnabled,aiModel:this.editForm.aiModel,aiPersonality:this.editForm.roleDescription};this.ipcService.once("update-account-result",c=>{if(this.saving.set(!1),c.success){this.toast.success("\u8D26\u53F7\u8BBE\u7F6E\u5DF2\u4FDD\u5B58");let A=O(O({},r),t);this.accountUpdated.emit(A),this.selectedAccount()?.id===r.id&&this.selectedAccount.set(A),this.closeEditModal()}else this.toast.error(`\u4FDD\u5B58\u5931\u6557: ${c.error||"\u672A\u77E5\u9519\u8BEF"}`)}),this.ipcService.send("update-account",t),setTimeout(()=>{this.saving()&&(this.saving.set(!1),this.toast.error("\u4FDD\u5B58\u8D85\u65F6\uFF0C\u8ACB\u91CD\u8A66"))},3e4)}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275cmp=z({type:s,selectors:[["app-account-card-list"]],inputs:{accounts:"accounts"},outputs:{addAccount:"addAccount",accountSelected:"accountSelected",accountLogin:"accountLogin",accountLogout:"accountLogout",accountRemove:"accountRemove",accountExport:"accountExport",accountEdit:"accountEdit",accountUpdated:"accountUpdated"},features:[J],decls:90,vars:41,consts:[[1,"account-card-list"],[1,"toolbar"],[1,"toolbar-left"],[1,"search-box"],[1,"search-icon"],["type","text","placeholder","\u641C\u7D22\u624B\u673A\u53F7\u3001\u540D\u79F0...",1,"search-input",3,"ngModelChange","ngModel"],[1,"filter-select",3,"ngModelChange","ngModel"],["value","all"],["value","Online"],["value","Offline"],["value","Banned"],["value","Warming Up"],["value","_ungrouped"],[3,"value"],[1,"tag-filter-dropdown"],[1,"filter-btn",3,"click"],[1,"tag-count"],[1,"tag-dropdown"],[1,"toolbar-right"],[1,"view-toggle"],["title","\u5361\u7247\u89C6\u56FE",1,"toggle-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","currentColor"],["x","3","y","3","width","7","height","7","rx","1"],["x","14","y","3","width","7","height","7","rx","1"],["x","3","y","14","width","7","height","7","rx","1"],["x","14","y","14","width","7","height","7","rx","1"],["title","\u8868\u683C\u89C6\u56FE",1,"toggle-btn",3,"click"],["x","3","y","4","width","18","height","3","rx","1"],["x","3","y","10","width","18","height","3","rx","1"],["x","3","y","16","width","18","height","3","rx","1"],[1,"manage-btn",3,"click"],[1,"add-btn",3,"click"],[1,"stats-bar"],[1,"stats-left"],[1,"batch-checkbox"],["type","checkbox",3,"change","checked"],[1,"checkbox-label"],[1,"stat-item"],[1,"stat-dot","online"],[1,"stat-label"],[1,"stat-value"],[1,"stat-dot","offline"],[1,"stat-dot","banned"],[1,"batch-actions"],[1,"card-grid"],[1,"table-container"],[1,"empty-state"],[1,"tag-dropdown-header"],[1,"clear-btn",3,"click"],[1,"tag-option",3,"--tag-color"],[1,"manage-tags-btn",3,"click"],[1,"tag-option"],[1,"tag-dot"],[1,"batch-count"],["title","\u6279\u91CF\u767B\u5165\u96E2\u7DDA\u5E33\u865F",1,"batch-btn","success",3,"click","disabled"],["title","\u6279\u91CF\u9000\u51FA\u5728\u7DDA\u5E33\u865F",1,"batch-btn","warning",3,"click","disabled"],[1,"batch-btn","primary",3,"click"],[1,"batch-btn",3,"click","disabled"],[1,"batch-btn","danger",3,"click"],[1,"batch-btn",3,"click"],[1,"account-card",3,"online","offline","banned","warming","logging-in","selected"],[1,"account-card",3,"click"],[1,"card-select",3,"click"],[1,"card-header"],[1,"card-avatar-wrapper"],[1,"card-avatar"],[1,"card-status-role"],[1,"card-status"],[1,"status-dot"],[1,"status-text"],[1,"card-role",3,"click"],[1,"role-icon"],[1,"role-name"],[1,"role-arrow"],[1,"card-main"],[1,"card-nickname"],[1,"card-phone"],[1,"card-name"],[1,"card-username"],[1,"card-tags"],[1,"card-device"],[1,"device-icon"],[1,"device-name"],[1,"card-health"],[1,"health-bar"],[1,"health-fill"],[1,"health-text"],[1,"login-progress-overlay"],[1,"card-actions",3,"click"],["title","\u767B\u5165\u8D26\u53F7",1,"action-btn","login"],["disabled","","title","\u767B\u5165\u4E2D...",1,"action-btn","logging-in"],["title","\u9000\u51FA\u8D26\u53F7",1,"action-btn","logout"],["title","\u7F16\u8F91\u8BBE\u7F6E",1,"action-btn","edit",3,"click"],[1,"action-icon"],[1,"action-label"],["title","\u5220\u9664\u8D26\u53F7",1,"action-btn","remove",3,"click","disabled"],["alt","",1,"card-avatar-img",3,"error","src"],[1,"card-avatar","avatar-fallback",2,"display","none"],[1,"tag-more"],[1,"tag-badge",3,"background"],[1,"tag-badge"],[1,"login-spinner"],[1,"login-status-text"],["title","\u767B\u5165\u8D26\u53F7",1,"action-btn","login",3,"click"],[1,"action-icon","spinning"],["title","\u9000\u51FA\u8D26\u53F7",1,"action-btn","logout",3,"click"],[1,"account-table"],["type","checkbox",3,"ngModelChange","change","ngModel"],[3,"selected"],[3,"click"],[1,"status-dot","small"],[1,"phone-cell"],[1,"role-cell"],[1,"role-tag-small",3,"click"],[1,"device-cell"],[1,"health-inline"],[1,"health-bar","small"],[1,"actions-cell",3,"click"],["title","\u767B\u5165\u8D26\u53F7",1,"table-action","login"],["title","\u9000\u51FA\u8D26\u53F7",1,"table-action","logout"],["title","\u8D26\u53F7\u8BBE\u7F6E",1,"table-action","edit",3,"click"],["title","\u5220\u9664\u8D26\u53F7",1,"table-action","remove",3,"click"],["title","\u767B\u5165\u8D26\u53F7",1,"table-action","login",3,"click"],["title","\u9000\u51FA\u8D26\u53F7",1,"table-action","logout",3,"click"],[1,"empty-icon"],[1,"add-btn","large",3,"click"],[1,"detail-overlay",3,"click"],[1,"detail-panel"],[1,"detail-header"],[1,"close-btn",3,"click"],[1,"detail-content"],[1,"detail-section"],[1,"detail-avatar-wrapper"],[1,"detail-avatar"],["class","detail-nickname",4,"ngIf"],[1,"detail-name"],[1,"detail-phone"],[1,"detail-username"],[1,"detail-role-badge",3,"click"],[1,"role-icon-large"],[1,"role-label"],[1,"role-change-hint"],[1,"detail-bio"],[1,"detail-grid"],[1,"detail-item"],[1,"label"],[1,"value","status"],[1,"value"],[1,"value","role-value",3,"click"],[1,"role-badge"],[1,"role-edit"],[1,"detail-item","full-width"],[1,"detail-tags"],[1,"no-tags"],[1,"detail-item","full"],[1,"detail-login-progress"],[1,"detail-actions-grid"],[1,"action-btn-sm","primary"],["disabled","",1,"action-btn-sm","logging-in"],[1,"action-btn-sm","warning"],[1,"action-btn-sm",3,"click","disabled"],[1,"action-btn-sm",3,"click"],[1,"action-btn-sm","danger",3,"click","disabled"],["alt","Avatar",1,"detail-avatar-img",3,"error","src"],[1,"detail-avatar","avatar-fallback",2,"display","none"],[1,"detail-nickname"],[1,"login-progress-text"],[1,"action-btn-sm","primary",3,"click"],[1,"action-btn-sm","warning",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-container"],[1,"modal-header"],[1,"modal-content"],[1,"tab-nav"],[1,"tab-btn",3,"click"],[1,"tab-panel"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click","disabled"],[1,"form-group"],["type","text","placeholder","\u81EA\u5B9A\u4E49\u6635\u79F0\uFF08\u65B9\u4FBF\u8BC6\u522B\uFF09",3,"ngModelChange","ngModel"],["placeholder","\u6DFB\u52A0\u5907\u6CE8\u4FE1\u606F...","rows","3",3,"ngModelChange","ngModel"],[1,"form-row"],["type","text","placeholder","\u4ECE my.telegram.org \u83B7\u53D6",3,"ngModelChange","ngModel"],[1,"form-hint"],["href","https://my.telegram.org","target","_blank"],["type","number","min","1","max","500",3,"ngModelChange","ngModel"],["type","text","placeholder","\u4F8B\u5982\uFF1A\u71DF\u92B7\u7D44A",3,"ngModelChange","ngModel"],["type","checkbox",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[1,"form-group","flex-2"],["type","text","placeholder","\u4F8B\u5982\uFF1A127.0.0.1",3,"ngModelChange","ngModel"],[1,"form-group","flex-1"],["type","number","placeholder","1080",3,"ngModelChange","ngModel"],["type","text","placeholder","\u4EE3\u7406\u7528\u6236\u540D",3,"ngModelChange","ngModel"],["type","password","placeholder","\u4EE3\u7406\u5BC6\u78BC",3,"ngModelChange","ngModel"],["value",""],["value","US"],["value","JP"],["value","SG"],["value","HK"],["value","TW"],["value","KR"],["value","DE"],["value","UK"],[1,"test-btn",3,"click","disabled"],[1,"test-result",3,"success","error"],[1,"test-result"],[1,"role-grid"],[1,"role-card",3,"selected"],["type","text","placeholder","\u4F8B\u5982\uFF1AVIP\u5BA2\u670D\u5C0F\u7F8E",3,"ngModelChange","ngModel"],["rows","4","placeholder","\u63CF\u8FF0\u8FD9\u4E2A\u89D2\u8272\u7684\u6027\u683C\u7279\u9EDE\u3001\u8AAA\u8A71\u98CE\u683C\u3001\u4E13\u4E1A\u9818\u57DF\u7B49...",3,"ngModelChange","ngModel"],[1,"role-card",3,"click"],[1,"role-desc"],[1,"persona-select-row"],[1,"current-persona",3,"click"],[1,"no-persona"],[1,"select-arrow"],[1,"btn-persona-manager",3,"click"],["value","gpt-4-turbo"],["value","gpt-3.5-turbo"],["value","claude-3-sonnet"],["value","ollama"],["type","range","min","0","max","100","step","5",3,"ngModelChange","ngModel"],[3,"ngValue"],[1,"form-hint","warning"],["type","text","placeholder","\u7528\u9017\u865F\u5206\u9694\uFF0C\u4F8B\u5982\uFF1A\u9000\u6B3E,\u6295\u8A34,\u7AF6\u54C1",3,"ngModelChange","ngModel"],[1,"persona-icon-small"],[1,"persona-name-small"],[1,"modal-container","batch-modal"],[1,"batch-warning"],[1,"batch-section"],[1,"batch-section-header"],[1,"batch-section-content"],["type","text","placeholder","127.0.0.1",3,"ngModelChange","ngModel"],["type","text",3,"ngModelChange","ngModel"],["type","password",3,"ngModelChange","ngModel"],[1,"account-role-grid"],[1,"account-role-card",3,"selected","border-color"],[1,"account-role-card",3,"click"],[1,"role-card-icon"],[1,"role-card-content"],[1,"role-card-name"],[1,"role-card-desc"],[1,"role-card-check",3,"color"],[1,"role-card-check"],["type","text","placeholder","\u4F8B\u5982\uFF1A\u92B7\u552E\u7D44A",3,"ngModelChange","ngModel"],[1,"modal-container","tag-manager-modal"],[1,"add-tag-form"],["type","text","placeholder","\u6807\u7B7E\u540D\u7A31",1,"tag-input",3,"ngModelChange","ngModel"],["type","color",1,"color-picker",3,"ngModelChange","ngModel"],[1,"btn-add",3,"click","disabled"],[1,"tag-list"],[1,"tag-item"],[1,"btn-save",3,"click"],[1,"tag-preview"],["type","text",1,"tag-edit-input",3,"ngModelChange","ngModel"],["type","color",1,"color-picker","small",3,"ngModelChange","ngModel"],[1,"btn-delete",3,"click"],[1,"modal-container","group-manager-modal"],[1,"add-group-form"],["type","text","placeholder","\u5206\u7D44\u540D\u7A31",1,"group-input",3,"ngModelChange","ngModel"],[1,"group-list"],[1,"group-item"],[1,"group-color-bar"],[1,"group-info"],["type","text",1,"group-edit-input",3,"ngModelChange","ngModel"],[1,"group-count"],[1,"modal-container","account-tag-modal"],[1,"account-tags-grid"],[1,"account-tag-option",3,"selected"],[1,"quick-add-tag"],[1,"quick-add-form"],["type","text","placeholder","\u8F93\u5165\u65B0\u6807\u7B7E\u540D\u79F0",1,"tag-input-inline",3,"ngModelChange","ngModel"],["type","color",1,"color-picker-inline",3,"ngModelChange","ngModel"],[1,"btn-quick-add",3,"click","disabled"],[1,"btn-manage",3,"click"],[1,"footer-actions"],[1,"account-tag-option"],[1,"tag-badge","large"],[1,"modal-container","persona-manager-modal"],[1,"persona-tabs"],[1,"persona-grid"],[1,"custom-persona-section"],[1,"btn-save"],[1,"persona-card",3,"selected"],[1,"persona-card",3,"click"],[1,"persona-icon"],[1,"persona-info"],[1,"persona-name"],[1,"persona-desc"],[1,"persona-meta"],[1,"meta-tag"],[1,"btn-new-persona",3,"click"],[1,"custom-persona-list"],[1,"persona-card","horizontal",3,"selected"],[1,"persona-card","horizontal",3,"click"],[1,"persona-actions"],[1,"action-btn",3,"click"],[1,"action-btn","danger",3,"click"],[1,"modal-container","persona-editor-modal"],[1,"persona-form"],[1,"form-group",2,"flex","0 0 80px"],["type","text","maxlength","2",1,"icon-input",3,"ngModelChange","ngModel"],["type","text","placeholder","\u4F8B\u5982\uFF1A\u4E13\u4E1A\u92B7\u552E",3,"ngModelChange","ngModel"],["type","text","placeholder","\u4E00\u53E5\u8A71\u63CF\u8FF0\u8FD9\u4E2A\u4EBA\u8A2D\u7684\u7279\u9EDE",3,"ngModelChange","ngModel"],["placeholder","\u63CF\u8FF0 AI \u7684\u89D2\u8272\u3001\u6027\u683C\u3001\u76EE\u6A19\u548C\u884C\u70BA\u6E96\u5247...","rows","6",3,"ngModelChange","ngModel"],["type","text","placeholder","AI \u4E3B\u52D5\u767C\u8D77\u5BF9\u8BDD\u6642\u7684\u7B2C\u4E00\u53E5\u8A71",3,"ngModelChange","ngModel"],["value","short"],["value","medium"],["value","long"],["value","formal"],["value","professional"],["value","friendly"],["value","casual"],["value","zh-TW"],["value","zh-CN"],["value","en"],["value","ja"],["placeholder","\u5305\u542B\u9019\u4E9B\u5173\u9375\u8A5E\u7684\u6D88\u606F\u4E0D\u81EA\u52A8\u56DE\u590D","rows","3",3,"ngModelChange","ngModel"],[1,"role-selector-overlay",3,"click"],[1,"role-selector-popup"],[1,"role-selector-header"],[1,"role-selector-title"],[1,"role-selector-phone"],[1,"role-selector-list"],[1,"role-option",3,"active"],[1,"role-selector-footer"],[1,"role-selector-cancel",3,"click"],[1,"role-option",3,"click"],[1,"role-option-icon"],[1,"role-option-info"],[1,"role-option-name"],[1,"role-option-desc"],[1,"role-option-check"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),a(5,"\u{1F50D}"),i(),n(6,"input",5),h("ngModelChange",function(c){return b(o.searchQuery,c)||(o.searchQuery=c),c}),i()(),n(7,"select",6),h("ngModelChange",function(c){return b(o.statusFilter,c)||(o.statusFilter=c),c}),n(8,"option",7),a(9),i(),n(10,"option",8),a(11),i(),n(12,"option",9),a(13),i(),n(14,"option",10),a(15),i(),n(16,"option",11),a(17),i()(),n(18,"select",6),h("ngModelChange",function(c){return b(o.groupFilter,c)||(o.groupFilter=c),c}),n(19,"option",7),a(20),i(),n(21,"option",12),a(22,"\u{1F4C1} \u672A\u5206\u7EC4"),i(),F(23,fe,2,2,"option",13,D),i(),n(25,"div",14)(26,"button",15),g("click",function(){return o.toggleTagFilter()}),a(27," \u{1F3F7}\uFE0F \u6807\u7B7E "),_(28,ve,2,1,"span",16),i(),_(29,we,10,0,"div",17),i()(),n(30,"div",18)(31,"div",19)(32,"button",20),g("click",function(){return o.viewMode.set("card")}),V(),n(33,"svg",21),S(34,"rect",22)(35,"rect",23)(36,"rect",24)(37,"rect",25),i()(),B(),n(38,"button",26),g("click",function(){return o.viewMode.set("table")}),V(),n(39,"svg",21),S(40,"rect",27)(41,"rect",28)(42,"rect",29),i()()(),B(),n(43,"button",30),g("click",function(){return o.openGroupManager()}),a(44),i(),n(45,"button",31),g("click",function(){return o.addAccount.emit()}),a(46),i()()(),n(47,"div",32)(48,"div",33)(49,"label",34)(50,"input",35),g("change",function(){return o.toggleSelectAll()}),i(),n(51,"span",36),a(52),i()(),n(53,"div",37),S(54,"span",38),n(55,"span",39),a(56),i(),n(57,"span",40),a(58),i()(),n(59,"div",37),S(60,"span",41),n(61,"span",39),a(62),i(),n(63,"span",40),a(64),i()(),n(65,"div",37),S(66,"span",42),n(67,"span",39),a(68),i(),n(69,"span",40),a(70),i()(),n(71,"div",37)(72,"span",39),a(73),i(),n(74,"span",40),a(75),i()()(),_(76,Ee,15,6,"div",43),i(),_(77,Ge,3,0,"div",44),_(78,Ke,25,1,"div",45),_(79,qe,9,3,"div",46),_(80,Qe,7,0,"div",46),i(),_(81,mt,123,45),_(82,Et,26,14),_(83,Lt,45,13),_(84,Bt,22,4),_(85,zt,22,4),_(86,Gt,26,5),_(87,Jt,19,7),_(88,Xt,88,14),_(89,en,13,5)),e&2&&(l(6),x("ngModel",o.searchQuery),l(),x("ngModel",o.statusFilter),l(2),p(o.t("accounts.allStatus")),l(2),y("\u{1F7E2} ",o.t("accounts.online")),l(2),y("\u26AA ",o.t("accounts.offline")),l(2),y("\u{1F534} ",o.t("accounts.banned")),l(2),y("\u{1F7E1} ",o.t("accounts.warmingUp")),l(),x("ngModel",o.groupFilter),l(2),p(o.t("accounts.allGroups")),l(3),P(o.groups()),l(5),C(o.tagFilter.length>0?28:-1),l(),C(o.showTagFilter()?29:-1),l(3),M("active",o.viewMode()==="card"),l(6),M("active",o.viewMode()==="table"),l(6),y(" \u{1F4C1} ",o.t("accounts.manageGroups")," "),l(2),y(" \u2795 ",o.t("accounts.addAccount")," "),l(4),w("checked",o.isAllSelected()),l(2),p(o.t("accounts.selectAll")),l(4),p(o.t("accounts.online")),l(2),p(o.onlineCount),l(4),p(o.t("accounts.offline")),l(2),p(o.offlineCount),l(4),p(o.t("accounts.banned")),l(2),p(o.bannedCount),l(3),p(o.t("accounts.total")),l(2),p(o.accounts.length),l(),C(o.selectedIds.size>0?76:-1),l(),C(o.viewMode()==="card"?77:-1),l(),C(o.viewMode()==="table"?78:-1),l(),C(o.filteredAccounts.length===0&&o.accounts.length===0?79:-1),l(),C(o.filteredAccounts.length===0&&o.accounts.length>0?80:-1),l(),C(o.selectedAccount()?81:-1),l(),C(o.showEditModal()?82:-1),l(),C(o.showBatchEditModal()?83:-1),l(),C(o.showTagManager()?84:-1),l(),C(o.showGroupManager()?85:-1),l(),C(o.showAccountTagEditor()?86:-1),l(),C(o.showPersonaManager()?87:-1),l(),C(o.showPersonaEditor()?88:-1),l(),C(o.showRoleSelector()?89:-1))},dependencies:[R,Z,N,ae,le,ee,ie,oe,$,re,te,de,se,ce,ne],styles:[".account-card-list[_ngcontent-%COMP%]{padding:1rem}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;gap:1rem;flex-wrap:wrap}.toolbar-left[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex:1}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.5rem;flex:1;max-width:300px}.search-icon[_ngcontent-%COMP%]{font-size:.875rem}.search-input[_ngcontent-%COMP%]{flex:1;background:transparent;border:none;color:var(--text-primary, white);font-size:.875rem;outline:none}.filter-select[_ngcontent-%COMP%]{padding:.5rem .75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.5rem;color:var(--text-primary, white);font-size:.875rem}.toolbar-right[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center}.view-toggle[_ngcontent-%COMP%]{display:flex;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border-radius:.5rem;overflow:hidden}.toggle-btn[_ngcontent-%COMP%]{padding:.5rem .75rem;background:transparent;border:none;color:var(--text-muted, #94a3b8);cursor:pointer;transition:all .2s}.toggle-btn.active[_ngcontent-%COMP%]{background:var(--primary, #06b6d4);color:#fff}.add-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:linear-gradient(135deg,#06b6d4,#3b82f6);border:none;border-radius:.5rem;color:#fff;font-weight:500;cursor:pointer;transition:all .2s}.add-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #06b6d44d}.add-btn.large[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:1rem}.stats-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding:.75rem 1rem;background:var(--bg-card, rgba(30, 41, 59, .5));border-radius:.5rem;flex-wrap:wrap;gap:.75rem}.stats-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.batch-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.batch-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:16px;height:16px;accent-color:var(--primary, #06b6d4)}.checkbox-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #cbd5e1)}.batch-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.batch-count[_ngcontent-%COMP%]{font-size:.875rem;color:var(--primary, #06b6d4);font-weight:500;margin-right:.5rem}.batch-btn[_ngcontent-%COMP%]{padding:.375rem .75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.375rem;color:var(--text-secondary, #cbd5e1);font-size:.75rem;cursor:pointer;transition:all .2s}.batch-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:var(--primary, #06b6d4);color:var(--primary, #06b6d4)}.batch-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#06b6d4,#3b82f6);border:none;color:#fff}.batch-btn.primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px)}.batch-btn.danger[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#ef4444;color:#ef4444;background:#ef44441a}.batch-btn.success[_ngcontent-%COMP%]{border-color:#22c55e;color:#22c55e}.batch-btn.success[_ngcontent-%COMP%]:hover:not(:disabled){background:#22c55e1a}.batch-btn.warning[_ngcontent-%COMP%]{border-color:#f59e0b;color:#f59e0b}.batch-btn.warning[_ngcontent-%COMP%]:hover:not(:disabled){background:#f59e0b1a}.batch-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.stat-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%}.stat-dot.online[_ngcontent-%COMP%]{background:#22c55e}.stat-dot.offline[_ngcontent-%COMP%]{background:#94a3b8}.stat-dot.banned[_ngcontent-%COMP%]{background:#ef4444}.stat-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted, #94a3b8)}.stat-value[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary, white)}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}.account-card[_ngcontent-%COMP%]{background:var(--bg-card, rgba(30, 41, 59, .8));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.75rem;padding:1rem;cursor:pointer;transition:all .2s;display:flex;flex-direction:column;gap:.75rem;position:relative}.account-card.selected[_ngcontent-%COMP%]{border-color:var(--primary, #06b6d4);background:#06b6d41a}.card-select[_ngcontent-%COMP%]{position:absolute;top:.75rem;right:.75rem;z-index:2}.card-select[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:18px;height:18px;accent-color:var(--primary, #06b6d4);cursor:pointer}.account-card[_ngcontent-%COMP%]:hover{border-color:var(--primary, #06b6d4);transform:translateY(-2px);box-shadow:0 4px 12px #0003}.account-card.online[_ngcontent-%COMP%]{border-left:3px solid #22c55e;box-shadow:inset 0 0 20px #22c55e0d}.account-card.online[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #22c55e33,inset 0 0 20px #22c55e0d}.account-card.offline[_ngcontent-%COMP%]{border-left:3px solid #94a3b8}.account-card.banned[_ngcontent-%COMP%]{border-left:3px solid #ef4444;background:linear-gradient(135deg,rgba(239,68,68,.05),transparent)}.account-card.warming[_ngcontent-%COMP%]{border-left:3px solid #f59e0b;background:linear-gradient(135deg,rgba(245,158,11,.05),transparent)}.account-card.logging-in[_ngcontent-%COMP%]{border-left:3px solid #06b6d4;animation:_ngcontent-%COMP%_card-pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_card-pulse{0%,to{box-shadow:0 2px 8px #06b6d41a}50%{box-shadow:0 4px 16px #06b6d44d}}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.card-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#06b6d4,#3b82f6);display:flex;align-items:center;justify-content:center;font-size:1rem;font-weight:700;color:#fff;flex-shrink:0}.card-avatar-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover;flex-shrink:0}.card-nickname[_ngcontent-%COMP%]{font-size:.75rem;color:var(--primary, #06b6d4);font-weight:500;margin-bottom:.125rem}.card-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.card-status-role[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.375rem;flex:1}.card-role[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.375rem;padding:.25rem .5rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border-radius:.375rem;cursor:pointer;transition:all .2s;font-size:.75rem}.card-role[_ngcontent-%COMP%]:hover{background:var(--bg-secondary, rgba(30, 41, 59, .8))}.role-icon[_ngcontent-%COMP%]{font-size:.875rem}.role-name[_ngcontent-%COMP%]{font-weight:500}.role-arrow[_ngcontent-%COMP%]{font-size:.625rem;color:var(--text-muted, #94a3b8);margin-left:auto}.role-selector-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0000004d;z-index:1000}.role-selector-popup[_ngcontent-%COMP%]{position:fixed;width:260px;background:var(--bg-card, #1e293b);border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.75rem;box-shadow:0 10px 40px #0000004d;z-index:1001;overflow:hidden}.role-selector-header[_ngcontent-%COMP%]{padding:.75rem 1rem;border-bottom:1px solid var(--border-default, rgba(148, 163, 184, .1));display:flex;justify-content:space-between;align-items:center}.role-selector-title[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;color:var(--text-primary, white)}.role-selector-phone[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted, #94a3b8)}.role-selector-list[_ngcontent-%COMP%]{max-height:320px;overflow-y:auto}.role-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;cursor:pointer;transition:all .2s}.role-option[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary, rgba(15, 23, 42, .5))}.role-option.active[_ngcontent-%COMP%]{background:#06b6d41a}.role-option-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:.5rem;display:flex;align-items:center;justify-content:center;font-size:1.25rem;flex-shrink:0}.role-option-info[_ngcontent-%COMP%]{flex:1;min-width:0}.role-option-name[_ngcontent-%COMP%]{display:block;font-weight:500;font-size:.875rem;color:var(--text-primary, white)}.role-option-desc[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-muted, #94a3b8);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.role-option-check[_ngcontent-%COMP%]{color:#22c55e;font-weight:700}.role-selector-footer[_ngcontent-%COMP%]{padding:.75rem 1rem;border-top:1px solid var(--border-default, rgba(148, 163, 184, .1));display:flex;justify-content:flex-end}.role-selector-cancel[_ngcontent-%COMP%]{padding:.5rem 1rem;background:transparent;border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.375rem;color:var(--text-secondary, #94a3b8);cursor:pointer;font-size:.75rem}.role-selector-cancel[_ngcontent-%COMP%]:hover{border-color:var(--text-muted, #94a3b8)}.status-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.status-dot.small[_ngcontent-%COMP%]{width:8px;height:8px}.status-dot.online[_ngcontent-%COMP%]{background:#22c55e;animation:_ngcontent-%COMP%_pulse-online 2s ease-in-out infinite;box-shadow:0 0 8px #22c55e80}.status-dot.offline[_ngcontent-%COMP%]{background:#94a3b8}.status-dot.banned[_ngcontent-%COMP%]{background:#ef4444;animation:_ngcontent-%COMP%_pulse-banned 1.5s ease-in-out infinite}.status-dot.warning[_ngcontent-%COMP%]{background:#f59e0b;animation:_ngcontent-%COMP%_pulse-warning 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse-online{0%,to{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_pulse-banned{0%,to{opacity:1}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_pulse-warning{0%,to{opacity:1}50%{opacity:.6}}.status-text[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted, #94a3b8)}.card-main[_ngcontent-%COMP%]{flex:1}.card-phone[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--text-primary, white)}.card-name[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #cbd5e1)}.card-username[_ngcontent-%COMP%]{color:var(--primary, #06b6d4)}.card-device[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem;color:var(--text-muted, #94a3b8)}.device-icon[_ngcontent-%COMP%]{font-size:1rem}.card-health[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.health-bar[_ngcontent-%COMP%]{flex:1;height:4px;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border-radius:2px;overflow:hidden}.health-bar.small[_ngcontent-%COMP%]{width:50px}.health-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s}.health-fill.good[_ngcontent-%COMP%]{background:#22c55e}.health-fill.warning[_ngcontent-%COMP%]{background:#f59e0b}.health-fill.danger[_ngcontent-%COMP%]{background:#ef4444}.health-text[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted, #94a3b8);min-width:35px}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;border-top:1px solid var(--border-default, rgba(148, 163, 184, .1));padding-top:.75rem}.action-btn[_ngcontent-%COMP%]{padding:.375rem .5rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:none;border-radius:.375rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:.25rem}.action-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--bg-secondary, rgba(30, 41, 59, .8));transform:translateY(-1px)}.action-btn.login[_ngcontent-%COMP%]{color:#22c55e}.action-btn.login[_ngcontent-%COMP%]:hover:not(:disabled){background:#22c55e26;box-shadow:0 2px 8px #22c55e33}.action-btn.logout[_ngcontent-%COMP%]{color:#f59e0b}.action-btn.logout[_ngcontent-%COMP%]:hover:not(:disabled){background:#f59e0b26}.action-btn.edit[_ngcontent-%COMP%]{color:#3b82f6}.action-btn.edit[_ngcontent-%COMP%]:hover:not(:disabled){background:#3b82f626}.action-btn.remove[_ngcontent-%COMP%]{color:#94a3b8}.action-btn.remove[_ngcontent-%COMP%]:hover:not(:disabled){background:#ef444426;color:#ef4444}.action-label[_ngcontent-%COMP%]{font-size:.75rem}.action-btn.logging-in[_ngcontent-%COMP%]{background:#06b6d433;cursor:not-allowed;opacity:.8}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.action-icon.spinning[_ngcontent-%COMP%]{display:inline-block;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.login-progress-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0f172ae6;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.75rem;z-index:10;border-radius:.75rem}.login-spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid rgba(6,182,212,.3);border-top-color:#06b6d4;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.login-status-text[_ngcontent-%COMP%]{font-size:.875rem;color:#06b6d4;font-weight:500}.detail-login-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem;background:#06b6d41a;border:1px solid rgba(6,182,212,.3);border-radius:.5rem;margin-bottom:1rem}.login-progress-text[_ngcontent-%COMP%]{font-size:.875rem;color:#06b6d4}.action-btn-sm.logging-in[_ngcontent-%COMP%]{background:#06b6d433;color:#06b6d4;cursor:not-allowed}.add-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;border:2px dashed var(--border-default, rgba(148, 163, 184, .3));background:transparent;min-height:180px}.add-card[_ngcontent-%COMP%]:hover{border-color:var(--primary, #06b6d4);background:#06b6d40d}.add-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem}.add-text[_ngcontent-%COMP%]{color:var(--text-muted, #94a3b8)}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.account-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:var(--bg-card, rgba(30, 41, 59, .8));border-radius:.75rem;overflow:hidden}.account-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.75rem 1rem;text-align:left;font-size:.75rem;font-weight:600;color:var(--text-muted, #94a3b8);text-transform:uppercase;background:var(--bg-tertiary, rgba(15, 23, 42, .5))}.account-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;border-top:1px solid var(--border-default, rgba(148, 163, 184, .1));color:var(--text-secondary, #cbd5e1);font-size:.875rem}.account-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#06b6d40d}.account-table[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#06b6d41a}.phone-cell[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary, white)}.device-cell[_ngcontent-%COMP%]{font-size:.75rem}.health-inline[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.table-action[_ngcontent-%COMP%]{padding:.25rem;background:transparent;border:none;cursor:pointer;opacity:.7;transition:opacity .2s}.table-action[_ngcontent-%COMP%]:hover{opacity:1}.table-action.login[_ngcontent-%COMP%]:hover{background:#22c55e33;border-radius:4px}.table-action.logout[_ngcontent-%COMP%]:hover{background:#f59e0b33;border-radius:4px}.table-action.edit[_ngcontent-%COMP%]:hover{background:#3b82f633;border-radius:4px}.table-action.remove[_ngcontent-%COMP%]:hover{background:#ef444433;border-radius:4px}.role-cell[_ngcontent-%COMP%]{min-width:80px}.role-tag-small[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .5rem;border-radius:.375rem;font-size:.75rem;font-weight:500;border:1px solid;cursor:pointer;transition:all .2s;white-space:nowrap}.role-tag-small[_ngcontent-%COMP%]:hover{filter:brightness(1.1);transform:scale(1.02)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:var(--bg-card, rgba(30, 41, 59, .5));border-radius:.75rem;border:1px dashed var(--border-default, rgba(148, 163, 184, .3))}.empty-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-primary, white)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:var(--text-muted, #94a3b8)}.detail-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:40}.detail-panel[_ngcontent-%COMP%]{position:fixed;top:0;right:0;width:400px;max-width:100%;height:100vh;background:var(--bg-card, rgb(30, 41, 59));border-left:1px solid var(--border-default, rgba(148, 163, 184, .2));z-index:50;display:flex;flex-direction:column;transform:translate(100%);transition:transform .3s}.detail-panel.open[_ngcontent-%COMP%]{transform:translate(0)}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid var(--border-default, rgba(148, 163, 184, .1))}.detail-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary, white)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-muted, #94a3b8);font-size:1.5rem;cursor:pointer}.detail-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1.5rem}.detail-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.detail-section[_ngcontent-%COMP%]:first-child{text-align:center}.detail-avatar[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:50%;background:linear-gradient(135deg,#06b6d4,#3b82f6);display:flex;align-items:center;justify-content:center;font-size:1.75rem;font-weight:700;color:#fff;margin:0 auto .75rem}.detail-avatar-img[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:50%;object-fit:cover;margin:0 auto .75rem;border:3px solid var(--primary, #06b6d4)}.detail-nickname[_ngcontent-%COMP%]{font-size:.875rem;color:var(--primary, #06b6d4);font-weight:500;margin-bottom:.25rem}.detail-bio[_ngcontent-%COMP%]{margin-top:.75rem;padding:.75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border-radius:.5rem;font-size:.875rem;color:var(--text-secondary, #cbd5e1);font-style:italic;text-align:left}.detail-name[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-primary, white)}.detail-phone[_ngcontent-%COMP%]{color:var(--text-secondary, #cbd5e1)}.detail-username[_ngcontent-%COMP%]{color:var(--primary, #06b6d4);font-size:.875rem}.detail-role-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;margin-top:.75rem;padding:.5rem .75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border-radius:.5rem;cursor:pointer;transition:all .2s}.detail-role-badge[_ngcontent-%COMP%]:hover{background:var(--bg-secondary, rgba(30, 41, 59, .8))}.role-icon-large[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:.375rem;display:flex;align-items:center;justify-content:center;font-size:1.125rem}.role-label[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem}.role-change-hint[_ngcontent-%COMP%]{font-size:.625rem;color:var(--text-muted, #94a3b8);margin-left:.25rem}.role-value[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.role-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .5rem;border-radius:.25rem;font-size:.75rem;font-weight:500}.role-edit[_ngcontent-%COMP%]{font-size:.75rem;opacity:0;transition:opacity .2s}.role-value[_ngcontent-%COMP%]:hover   .role-edit[_ngcontent-%COMP%]{opacity:1}.detail-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:.875rem;color:var(--text-muted, #94a3b8)}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:.75rem}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.detail-item.full[_ngcontent-%COMP%]{grid-column:span 2}.detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted, #94a3b8)}.detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-primary, white)}.detail-item[_ngcontent-%COMP%]   .value.status.online[_ngcontent-%COMP%]{color:#22c55e}.detail-item[_ngcontent-%COMP%]   .value.status.offline[_ngcontent-%COMP%]{color:#94a3b8}.detail-item[_ngcontent-%COMP%]   .value.status.banned[_ngcontent-%COMP%]{color:#ef4444}.detail-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid var(--border-default, rgba(148, 163, 184, .1));display:flex;flex-direction:column;gap:.5rem}.detail-actions-grid[_ngcontent-%COMP%]{padding:.75rem 1rem;border-top:1px solid var(--border-default, rgba(148, 163, 184, .1));display:grid;grid-template-columns:1fr 1fr;gap:.375rem}.action-btn-sm[_ngcontent-%COMP%]{padding:.5rem .75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.375rem;color:var(--text-secondary, #cbd5e1);font-size:.75rem;cursor:pointer;transition:all .2s;text-align:center}.action-btn-sm[_ngcontent-%COMP%]:hover:not(:disabled){border-color:var(--primary, #06b6d4);color:var(--primary, #06b6d4)}.action-btn-sm[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.action-btn-sm.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e,#16a34a);border-color:transparent;color:#fff}.action-btn-sm.warning[_ngcontent-%COMP%]{background:#f59e0b33;border-color:#f59e0b;color:#fcd34d}.action-btn-sm.danger[_ngcontent-%COMP%]{background:#ef44441a;border-color:#ef44444d;color:#f87171}.action-btn-sm.danger[_ngcontent-%COMP%]:hover{background:#ef444433;border-color:#ef4444}.detail-btn[_ngcontent-%COMP%]{padding:.75rem;border:none;border-radius:.5rem;font-weight:500;cursor:pointer;transition:all .2s}.detail-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e,#16a34a);color:#fff}.detail-btn.secondary[_ngcontent-%COMP%]{background:var(--bg-tertiary, rgba(15, 23, 42, .5));color:var(--text-secondary, #cbd5e1);border:1px solid var(--border-default, rgba(148, 163, 184, .2))}.detail-btn.warning[_ngcontent-%COMP%]{background:#f59e0b33;color:#fcd34d}.detail-btn.danger[_ngcontent-%COMP%]{background:#ef444433;color:#fca5a5}.detail-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;padding:.375rem .5rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:none;border-radius:.375rem;cursor:pointer;transition:all .2s;min-width:48px}.action-icon[_ngcontent-%COMP%]{font-size:1rem}.action-label[_ngcontent-%COMP%]{font-size:.625rem;color:var(--text-muted, #94a3b8)}.action-btn[_ngcontent-%COMP%]:hover   .action-label[_ngcontent-%COMP%]{color:var(--text-primary, white)}.action-btn.login[_ngcontent-%COMP%]:hover{background:#22c55e33}.action-btn.logout[_ngcontent-%COMP%]:hover{background:#f59e0b33}.action-btn.edit[_ngcontent-%COMP%]:hover{background:#3b82f633}.action-btn.remove[_ngcontent-%COMP%]:hover{background:#ef444433}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;z-index:100;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-container[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:560px;max-width:95vw;max-height:90vh;background:var(--bg-card, rgb(30, 41, 59));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:1rem;z-index:101;display:flex;flex-direction:column;box-shadow:0 20px 60px #00000080}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid var(--border-default, rgba(148, 163, 184, .1))}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary, white);font-size:1.125rem}.modal-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:0}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding:1rem 1.5rem;border-top:1px solid var(--border-default, rgba(148, 163, 184, .1))}.tab-nav[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid var(--border-default, rgba(148, 163, 184, .1));padding:0 1rem;overflow-x:auto}.tab-btn[_ngcontent-%COMP%]{padding:.75rem 1rem;background:none;border:none;color:var(--text-muted, #94a3b8);font-size:.875rem;cursor:pointer;white-space:nowrap;border-bottom:2px solid transparent;transition:all .2s}.tab-btn[_ngcontent-%COMP%]:hover{color:var(--text-primary, white)}.tab-btn.active[_ngcontent-%COMP%]{color:var(--primary, #06b6d4);border-bottom-color:var(--primary, #06b6d4)}.tab-panel[_ngcontent-%COMP%]{padding:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:.875rem;color:var(--text-secondary, #cbd5e1)}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.625rem .75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.5rem;color:var(--text-primary, white);font-size:.875rem;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary, #06b6d4)}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.form-row[_ngcontent-%COMP%]   .form-group.flex-2[_ngcontent-%COMP%]{flex:2}.form-row[_ngcontent-%COMP%]   .form-group.flex-1[_ngcontent-%COMP%]{flex:1}.form-hint[_ngcontent-%COMP%]{margin-top:.375rem;font-size:.75rem;color:var(--text-muted, #64748b)}.form-hint.warning[_ngcontent-%COMP%]{color:#f59e0b}.checkbox-label[_ngcontent-%COMP%]{display:flex!important;align-items:center;gap:.5rem;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;accent-color:var(--primary, #06b6d4)}.role-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:.75rem;margin-top:.5rem}.role-card[_ngcontent-%COMP%]{padding:.75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:2px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.5rem;cursor:pointer;transition:all .2s;text-align:center}.role-card[_ngcontent-%COMP%]:hover{border-color:var(--primary, #06b6d4);background:#06b6d41a}.role-card.selected[_ngcontent-%COMP%]{border-color:var(--primary, #06b6d4);background:#06b6d433}.role-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--text-primary, white);margin-bottom:.25rem}.role-desc[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted, #94a3b8)}.slider-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.slider-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted, #94a3b8);min-width:32px}.slider-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{flex:1;height:4px;accent-color:var(--primary, #06b6d4)}.test-btn[_ngcontent-%COMP%]{width:100%;padding:.625rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.5rem;color:var(--text-secondary, #cbd5e1);cursor:pointer;transition:all .2s;margin-bottom:.75rem}.test-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:var(--primary, #06b6d4);color:var(--primary, #06b6d4)}.test-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.test-result[_ngcontent-%COMP%]{padding:.5rem .75rem;border-radius:.375rem;font-size:.875rem;margin-bottom:1rem}.test-result.success[_ngcontent-%COMP%]{background:#22c55e33;color:#86efac}.test-result.error[_ngcontent-%COMP%]{background:#ef444433;color:#fca5a5}.btn-cancel[_ngcontent-%COMP%]{padding:.625rem 1.25rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.5rem;color:var(--text-secondary, #cbd5e1);cursor:pointer;transition:all .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background:var(--bg-secondary, rgba(30, 41, 59, .8))}.btn-save[_ngcontent-%COMP%]{padding:.625rem 1.25rem;background:linear-gradient(135deg,#06b6d4,#3b82f6);border:none;border-radius:.5rem;color:#fff;font-weight:500;cursor:pointer;transition:all .2s}.btn-save[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #06b6d44d}.btn-save[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.batch-modal[_ngcontent-%COMP%]{width:640px;max-height:85vh}.batch-warning[_ngcontent-%COMP%]{padding:.75rem 1rem;background:#f59e0b26;border:1px solid rgba(245,158,11,.3);border-radius:.5rem;color:#fcd34d;font-size:.875rem;margin:1rem 1.5rem}.batch-section[_ngcontent-%COMP%]{border:1px solid var(--border-default, rgba(148, 163, 184, .1));border-radius:.5rem;margin:0 1.5rem 1rem;overflow:hidden}.batch-section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));cursor:pointer;font-size:.875rem;color:var(--text-primary, white)}.batch-section-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:16px;height:16px;accent-color:var(--primary, #06b6d4)}.batch-section-content[_ngcontent-%COMP%]{padding:1rem;border-top:1px solid var(--border-default, rgba(148, 163, 184, .1))}.role-grid.compact[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:.5rem}.role-grid.compact[_ngcontent-%COMP%]   .role-card[_ngcontent-%COMP%]{padding:.5rem}.role-grid.compact[_ngcontent-%COMP%]   .role-name[_ngcontent-%COMP%]{font-size:.75rem}.account-role-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:.5rem}.account-role-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:2px solid transparent;border-radius:.5rem;cursor:pointer;transition:all .2s}.account-role-card[_ngcontent-%COMP%]:hover{background:var(--bg-secondary, rgba(30, 41, 59, .8))}.account-role-card.selected[_ngcontent-%COMP%]{background:#06b6d41a}.role-card-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:.375rem;display:flex;align-items:center;justify-content:center;font-size:1.125rem;flex-shrink:0}.role-card-content[_ngcontent-%COMP%]{flex:1;min-width:0}.role-card-name[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem}.role-card-desc[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted, #94a3b8);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.role-card-check[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.tag-filter-dropdown[_ngcontent-%COMP%]{position:relative}.filter-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.375rem;color:var(--text-secondary, #cbd5e1);font-size:.875rem;cursor:pointer}.filter-btn[_ngcontent-%COMP%]:hover{border-color:var(--primary, #06b6d4)}.tag-count[_ngcontent-%COMP%]{background:var(--primary, #06b6d4);color:#fff;padding:.125rem .375rem;border-radius:9999px;font-size:.75rem}.tag-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;margin-top:.25rem;min-width:200px;background:var(--bg-card, rgba(30, 41, 59, .95));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.5rem;padding:.5rem;z-index:100;box-shadow:0 4px 12px #0000004d}.tag-dropdown-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.25rem .5rem .5rem;border-bottom:1px solid var(--border-default, rgba(148, 163, 184, .1));margin-bottom:.5rem;font-size:.75rem;color:var(--text-secondary, #94a3b8)}.clear-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--primary, #06b6d4);cursor:pointer;font-size:.75rem}.tag-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.375rem .5rem;cursor:pointer;border-radius:.25rem}.tag-option[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary, rgba(15, 23, 42, .5))}.tag-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.manage-tags-btn[_ngcontent-%COMP%]{width:100%;padding:.5rem;margin-top:.5rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:1px dashed var(--border-default, rgba(148, 163, 184, .3));border-radius:.375rem;color:var(--text-secondary, #94a3b8);cursor:pointer;font-size:.75rem}.manage-tags-btn[_ngcontent-%COMP%]:hover{border-color:var(--primary, #06b6d4);color:var(--primary, #06b6d4)}.manage-btn[_ngcontent-%COMP%]{padding:.5rem .75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.375rem;color:var(--text-secondary, #cbd5e1);font-size:.875rem;cursor:pointer}.manage-btn[_ngcontent-%COMP%]:hover{border-color:var(--primary, #06b6d4);color:var(--primary, #06b6d4)}.card-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem;margin-top:.5rem}.tag-badge[_ngcontent-%COMP%]{padding:.125rem .375rem;border-radius:.25rem;font-size:.625rem;color:#fff;font-weight:500}.tag-badge.large[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem}.tag-more[_ngcontent-%COMP%]{padding:.125rem .375rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border-radius:.25rem;font-size:.625rem;color:var(--text-secondary, #94a3b8)}.tag-manager-modal[_ngcontent-%COMP%], .group-manager-modal[_ngcontent-%COMP%], .account-tag-modal[_ngcontent-%COMP%]{width:480px;max-height:70vh}.add-tag-form[_ngcontent-%COMP%], .add-group-form[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:1rem 1.5rem;border-bottom:1px solid var(--border-default, rgba(148, 163, 184, .1))}.tag-input[_ngcontent-%COMP%], .group-input[_ngcontent-%COMP%]{flex:1;padding:.5rem .75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.375rem;color:var(--text-primary, white);font-size:.875rem}.color-picker[_ngcontent-%COMP%]{width:40px;height:36px;padding:0;border:none;border-radius:.375rem;cursor:pointer}.color-picker.small[_ngcontent-%COMP%]{width:32px;height:32px}.btn-add[_ngcontent-%COMP%]{padding:.5rem 1rem;background:linear-gradient(135deg,#06b6d4,#3b82f6);border:none;border-radius:.375rem;color:#fff;cursor:pointer;font-size:.875rem}.btn-add[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.tag-list[_ngcontent-%COMP%], .group-list[_ngcontent-%COMP%]{padding:1rem 1.5rem;max-height:300px;overflow-y:auto}.tag-item[_ngcontent-%COMP%], .group-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .3));border-radius:.5rem;margin-bottom:.5rem}.tag-preview[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:.25rem;font-size:.75rem;color:#fff;min-width:60px;text-align:center}.tag-edit-input[_ngcontent-%COMP%], .group-edit-input[_ngcontent-%COMP%]{flex:1;padding:.375rem .5rem;background:var(--bg-card, rgba(30, 41, 59, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.25rem;color:var(--text-primary, white);font-size:.875rem}.btn-delete[_ngcontent-%COMP%]{padding:.375rem .5rem;background:none;border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.25rem;color:var(--text-secondary, #94a3b8);cursor:pointer}.btn-delete[_ngcontent-%COMP%]:hover{border-color:#ef4444;color:#ef4444;background:#ef44441a}.group-color-bar[_ngcontent-%COMP%]{width:4px;height:40px;border-radius:2px}.group-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.group-count[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary, #94a3b8)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:var(--text-secondary, #94a3b8)}.empty-state[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary, #06b6d4);cursor:pointer}.account-tags-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:.75rem;padding:1.5rem}.account-tag-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;padding:.75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .3));border:2px solid transparent;border-radius:.5rem;cursor:pointer;transition:all .2s}.account-tag-option[_ngcontent-%COMP%]:hover{border-color:var(--border-default, rgba(148, 163, 184, .3))}.account-tag-option.selected[_ngcontent-%COMP%]{border-color:var(--primary, #06b6d4);background:#06b6d41a}.account-tag-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.quick-add-tag[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid var(--border-default, rgba(148, 163, 184, .1));margin-top:.5rem}.quick-add-form[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.tag-input-inline[_ngcontent-%COMP%]{flex:1;padding:.5rem .75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.375rem;color:var(--text-primary, white);font-size:.875rem}.tag-input-inline[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary, #06b6d4)}.color-picker-inline[_ngcontent-%COMP%]{width:36px;height:36px;padding:0;border:none;border-radius:.375rem;cursor:pointer}.btn-quick-add[_ngcontent-%COMP%]{padding:.5rem 1rem;background:var(--primary, #06b6d4);color:#fff;border:none;border-radius:.375rem;font-size:.875rem;cursor:pointer;white-space:nowrap}.btn-quick-add[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-hover, #0891b2)}.btn-quick-add[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-footer[_ngcontent-%COMP%]   .btn-manage[_ngcontent-%COMP%]{padding:.5rem 1rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));color:var(--text-secondary, #94a3b8);border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.375rem;font-size:.875rem;cursor:pointer}.modal-footer[_ngcontent-%COMP%]   .btn-manage[_ngcontent-%COMP%]:hover{background:var(--bg-secondary, rgba(30, 41, 59, .5));color:var(--text-primary, white)}.modal-footer[_ngcontent-%COMP%]   .footer-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.account-tag-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.detail-item.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.detail-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.375rem;margin-top:.25rem}.no-tags[_ngcontent-%COMP%]{color:var(--text-secondary, #94a3b8);font-size:.75rem}.persona-manager-modal[_ngcontent-%COMP%]{width:720px;max-height:85vh}.persona-editor-modal[_ngcontent-%COMP%]{width:600px;max-height:90vh}.persona-tabs[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:1rem 1.5rem;border-bottom:1px solid var(--border-default, rgba(148, 163, 184, .1))}.persona-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.5rem;color:var(--text-secondary, #94a3b8);cursor:pointer;transition:all .2s}.persona-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:var(--primary, #06b6d4)}.persona-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#06b6d433,#3b82f633);border-color:var(--primary, #06b6d4);color:var(--primary, #06b6d4)}.persona-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:.75rem;padding:1rem 1.5rem;max-height:400px;overflow-y:auto}.persona-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;padding:1rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:2px solid transparent;border-radius:.75rem;cursor:pointer;transition:all .2s}.persona-card[_ngcontent-%COMP%]:hover{border-color:var(--border-default, rgba(148, 163, 184, .3))}.persona-card.selected[_ngcontent-%COMP%]{border-color:var(--primary, #06b6d4);background:#06b6d41a}.persona-card.horizontal[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.persona-icon[_ngcontent-%COMP%]{font-size:2rem;width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:var(--bg-card, rgba(30, 41, 59, .5));border-radius:.5rem}.persona-info[_ngcontent-%COMP%]{flex:1}.persona-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--text-primary, white);margin-bottom:.25rem}.persona-desc[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary, #94a3b8);line-height:1.4}.persona-meta[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.meta-tag[_ngcontent-%COMP%]{padding:.125rem .375rem;background:var(--bg-card, rgba(30, 41, 59, .5));border-radius:.25rem;font-size:.625rem;color:var(--text-secondary, #94a3b8)}.persona-actions[_ngcontent-%COMP%]{display:flex;gap:.25rem}.action-btn[_ngcontent-%COMP%]{padding:.375rem .5rem;background:var(--bg-card, rgba(30, 41, 59, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.25rem;color:var(--text-secondary, #94a3b8);cursor:pointer;transition:all .2s}.action-btn[_ngcontent-%COMP%]:hover{border-color:var(--primary, #06b6d4);color:var(--primary, #06b6d4)}.action-btn.danger[_ngcontent-%COMP%]:hover{border-color:#ef4444;color:#ef4444}.custom-persona-section[_ngcontent-%COMP%]{padding:1rem 1.5rem}.btn-new-persona[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:linear-gradient(135deg,#06b6d433,#3b82f633);border:1px dashed var(--primary, #06b6d4);border-radius:.5rem;color:var(--primary, #06b6d4);cursor:pointer;font-size:.875rem;margin-bottom:1rem}.btn-new-persona[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#06b6d44d,#3b82f64d)}.custom-persona-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;max-height:300px;overflow-y:auto}.persona-form[_ngcontent-%COMP%]{padding:1rem 1.5rem;display:flex;flex-direction:column;gap:1rem}.icon-input[_ngcontent-%COMP%]{text-align:center;font-size:1.5rem!important}.persona-select-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.current-persona[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;background:var(--bg-tertiary, rgba(15, 23, 42, .5));border:1px solid var(--border-default, rgba(148, 163, 184, .2));border-radius:.375rem;cursor:pointer}.current-persona[_ngcontent-%COMP%]:hover{border-color:var(--primary, #06b6d4)}.persona-icon-small[_ngcontent-%COMP%]{font-size:1.25rem}.persona-name-small[_ngcontent-%COMP%]{color:var(--text-primary, white);font-size:.875rem}.no-persona[_ngcontent-%COMP%]{color:var(--text-secondary, #94a3b8);font-size:.875rem}.select-arrow[_ngcontent-%COMP%]{margin-left:auto;color:var(--text-secondary, #94a3b8);font-size:.75rem}.btn-persona-manager[_ngcontent-%COMP%]{padding:.5rem .75rem;background:linear-gradient(135deg,#06b6d433,#3b82f633);border:1px solid var(--primary, #06b6d4);border-radius:.375rem;color:var(--primary, #06b6d4);cursor:pointer;font-size:.75rem;white-space:nowrap}.btn-persona-manager[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#06b6d44d,#3b82f64d)}"]})}};function cn(s,r){if(s&1){let e=f();n(0,"button",21),g("click",function(){u(e);let t=d();return m(t.showUpgrade())}),a(1," \u5347\u7D1A\u89E3\u9396\u66F4\u591A "),i()}}function sn(s,r){s&1&&(n(0,"span",22),a(1,"\u23F3"),i(),a(2," \u5C0E\u5165\u4E2D... "))}function dn(s,r){s&1&&(n(0,"span"),a(1,"\u{1F4E5}"),i(),a(2," \u5C0E\u5165 Session "))}var xe=class s{constructor(){this.i18n=k(H);this.nav=k(ge);this.ipc=k(G);this.toast=k(U);this.dialog=k(ue);this.membershipService=k(me);this.accountService=k(pe);this.accounts=this.accountService.accounts;this.isImportingSession=v(!1);this.ipcCleanup=[]}ngOnInit(){this.loadAccounts(),this.setupIpcListeners()}ngOnDestroy(){this.ipcCleanup.forEach(r=>r())}loadAccounts(){this.ipc.send("get-accounts")}setupIpcListeners(){let r=this.ipc.on("session-import-result",o=>{if(this.isImportingSession.set(!1),o.success){let t=o.phone?`\u2705 Session \u5C0E\u5165\u6210\u529F: ${o.phone}`:`\u2705 Session \u5C0E\u5165\u5B8C\u6210: ${o.count||1} \u500B\u5E33\u865F`;this.toast.success(t),this.reloadAccounts()}else this.toast.error(`\u274C \u5C0E\u5165\u5931\u6557: ${o.message||"\u672A\u77E5\u932F\u8AA4"}`)}),e=this.ipc.on("session-import-error",o=>{this.isImportingSession.set(!1),this.toast.error(`\u274C Session \u5C0E\u5165\u5931\u6557: ${o.error}`)});this.ipcCleanup.push(r,e)}t(r,e){return this.i18n.t(r,e)}navigateTo(r){let o={"add-account":"add-account","api-credentials":"api-credentials",accounts:"accounts",settings:"settings"}[r]||r;this.nav.navigateTo(o)}showUpgrade(){this.toast.info("\u8ACB\u5347\u7D1A\u6703\u54E1\u4EE5\u89E3\u9396\u66F4\u591A\u529F\u80FD")}openQrLogin(){this.dialog.openQrLogin()}importSession(){this.isImportingSession.set(!0),this.toast.info("\u6B63\u5728\u6253\u958B\u6587\u4EF6\u9078\u64C7\u5668..."),this.ipc.send("import-session"),setTimeout(()=>{this.isImportingSession()&&this.isImportingSession.set(!1)},3e4)}reloadAccounts(){this.ipc.send("get-accounts"),this.toast.info("\u6B63\u5728\u5237\u65B0\u5E33\u6236\u5217\u8868...")}refreshQueueStatus(){this.ipc.send("get-queue-status")}loginAccount(r){this.accountService.loginAccount(r)}logoutAccount(r){this.accountService.logoutAccount(r)}removeAccount(r){this.dialog.confirm({title:"\u78BA\u8A8D\u522A\u9664",message:"\u78BA\u5B9A\u8981\u522A\u9664\u6B64\u5E33\u6236\u55CE\uFF1F\u6B64\u64CD\u4F5C\u7121\u6CD5\u64A4\u92B7\u3002",type:"danger",confirmText:"\u522A\u9664",onConfirm:()=>{this.accountService.removeAccount(r)}})}exportAccount(r){this.ipc.send("export-session",{phone:r}),this.toast.info("\u6B63\u5728\u5C0E\u51FA Session...")}editAccount(r){this.accountService.toggleSelection(r.id),this.toast.info(`\u7DE8\u8F2F\u5E33\u6236: ${r.phone}`)}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275cmp=z({type:s,selectors:[["app-accounts-view"]],decls:37,vars:9,consts:[[1,"flex","items-center","justify-between","mb-6"],["id","accounts-section",1,"text-4xl","font-bold","text-slate-900","dark:text-white"],[1,"flex","items-center","gap-3"],[1,"text-sm","text-slate-500"],[1,"text-lg","font-bold","px-3","py-1","rounded-lg"],[1,"text-xs","px-3","py-1","bg-gradient-to-r","from-amber-500","to-orange-500","text-white","rounded-full","hover:opacity-90","transition-opacity"],[1,"bg-slate-100/50","dark:bg-slate-900/50","backdrop-blur-sm","border","border-slate-500/20","p-4","rounded-xl","shadow-lg","mb-6"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"flex","flex-wrap","items-center","gap-3"],[1,"flex","items-center","gap-2","bg-gradient-to-r","from-cyan-500","to-blue-500","hover:from-cyan-600","hover:to-blue-600","text-white","text-sm","font-bold","py-2","px-4","rounded-lg","transition","duration-200","shadow-lg","shadow-cyan-500/20",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"h-4","w-4"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"flex","items-center","gap-2","bg-gradient-to-r","from-amber-500","to-orange-500","hover:from-amber-600","hover:to-orange-600","text-white","text-sm","font-bold","py-2","px-4","rounded-lg","transition","duration-200","shadow-lg","shadow-amber-500/20",3,"click"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],[1,"flex","items-center","gap-2","bg-gradient-to-r","from-emerald-500","to-teal-500","hover:from-emerald-600","hover:to-teal-600","text-white","text-sm","font-bold","py-2","px-4","rounded-lg","transition","duration-200","shadow-lg","shadow-emerald-500/20",3,"click"],[1,"flex","items-center","gap-2","bg-slate-200","dark:bg-slate-800/50","hover:bg-slate-300","dark:hover:bg-slate-700/50","disabled:opacity-50","disabled:cursor-not-allowed","text-sm","font-bold","py-2","px-4","rounded-lg","transition","duration-200",3,"click","disabled"],["title","\u5237\u65B0\u5E33\u6236\u5217\u8868",1,"flex","items-center","gap-2","bg-slate-200","dark:bg-slate-800/50","hover:bg-slate-300","dark:hover:bg-slate-700/50","text-sm","py-2","px-3","rounded-lg","transition","duration-200",3,"click"],["title","\u5237\u65B0\u968A\u5217\u72C0\u614B",1,"flex","items-center","gap-2","bg-slate-200","dark:bg-slate-800/50","hover:bg-slate-300","dark:hover:bg-slate-700/50","text-sm","py-2","px-3","rounded-lg","transition","duration-200",3,"click"],[3,"addAccount","accountLogin","accountLogout","accountRemove","accountExport","accountEdit","accounts"],[1,"text-xs","px-3","py-1","bg-gradient-to-r","from-amber-500","to-orange-500","text-white","rounded-full","hover:opacity-90","transition-opacity",3,"click"],[1,"animate-spin"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"h2",1),a(2),i(),n(3,"div",2)(4,"span",3),a(5,"\u8CEC\u6236\u914D\u984D:"),i(),n(6,"span",4),a(7),i(),_(8,cn,2,0,"button",5),i()(),n(9,"div",6)(10,"div",7)(11,"div",8)(12,"button",9),g("click",function(){return o.navigateTo("add-account")}),V(),n(13,"svg",10),S(14,"line",11)(15,"line",12),i(),a(16," \u6DFB\u52A0\u5E33\u6236 "),i(),B(),n(17,"button",13),g("click",function(){return o.navigateTo("api-credentials")}),V(),n(18,"svg",10),S(19,"rect",14)(20,"path",15),i(),a(21," API \u6191\u64DA\u6C60 "),i(),B(),n(22,"button",16),g("click",function(){return o.openQrLogin()}),n(23,"span"),a(24,"\u{1F4F1}"),i(),a(25," \u6383\u78BC\u767B\u5165 "),i(),n(26,"button",17),g("click",function(){return o.importSession()}),_(27,sn,3,0)(28,dn,3,0),i()(),n(29,"div",2)(30,"button",18),g("click",function(){return o.reloadAccounts()}),n(31,"span"),a(32,"\u{1F504}"),i()(),n(33,"button",19),g("click",function(){return o.refreshQueueStatus()}),n(34,"span"),a(35,"\u{1F4CA}"),i()()()()(),n(36,"app-account-card-list",20),g("addAccount",function(){return o.navigateTo("add-account")})("accountLogin",function(c){return o.loginAccount(c.id)})("accountLogout",function(c){return o.logoutAccount(c.id)})("accountRemove",function(c){return o.removeAccount(c.id)})("accountExport",function(c){return o.exportAccount(c.phone)})("accountEdit",function(c){return o.editAccount(c)}),i()),e&2&&(l(2),p(o.t("accounts.manageAccounts")),l(4),I(o.membershipService.quotas().maxAccounts===-1?"bg-emerald-500/20 text-emerald-400":o.accounts().length>=o.membershipService.quotas().maxAccounts?"bg-red-500/20 text-red-400":"bg-cyan-500/20 text-cyan-400"),l(),L(" ",o.accounts().length,"/",o.membershipService.quotas().maxAccounts===-1?"\u221E":o.membershipService.quotas().maxAccounts," "),l(),C(o.membershipService.quotas().maxAccounts!==-1&&o.accounts().length>=o.membershipService.quotas().maxAccounts?8:-1),l(18),w("disabled",o.isImportingSession()),l(),C(o.isImportingSession()?27:28),l(9),w("accounts",o.accounts()))},dependencies:[R,N,j],encapsulation:2,changeDetection:0})}};export{xe as a};
