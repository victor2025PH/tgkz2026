{
  "version": 3,
  "sources": ["src/toast.service.ts", "src/membership.service.ts"],
  "sourcesContent": ["/**\r\n * Toast Notification Service\r\n * å¢å¼·ç‰ˆ - æä¾›è±å¯Œçš„æ“ä½œåé¥‹\r\n * \r\n * åŠŸèƒ½ï¼š\r\n * 1. åŸºç¤é€šçŸ¥ï¼ˆsuccess/error/warning/infoï¼‰\r\n * 2. å¸¶åœ–æ¨™å’Œè¡¨æƒ…ç¬¦è™Ÿçš„æ¶ˆæ¯\r\n * 3. å¸¶æ“ä½œæŒ‰éˆ•çš„é€šçŸ¥\r\n * 4. ä¸‹ä¸€æ­¥æç¤º\r\n * 5. é€²åº¦é€šçŸ¥\r\n */\r\nimport { Injectable, signal, WritableSignal } from '@angular/core';\r\n\r\nexport type ToastType = 'success' | 'error' | 'warning' | 'info' | 'progress';\r\n\r\nexport interface ToastAction {\r\n  label: string;\r\n  handler: () => void;\r\n  variant?: 'primary' | 'secondary' | 'danger';\r\n}\r\n\r\nexport interface Toast {\r\n  id: string;\r\n  type: ToastType;\r\n  message: string;\r\n  title?: string;\r\n  icon?: string;\r\n  duration?: number;\r\n  timestamp: Date;\r\n  actions?: ToastAction[];\r\n  nextStep?: { label: string; action: () => void };\r\n  progress?: number; // 0-100\r\n  dismissible?: boolean;\r\n}\r\n\r\n// é è¨­åœ–æ¨™\r\nconst DEFAULT_ICONS: Record<ToastType, string> = {\r\n  success: 'âœ…',\r\n  error: 'âŒ',\r\n  warning: 'âš ï¸',\r\n  info: 'â„¹ï¸',\r\n  progress: 'â³'\r\n};\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ToastService {\r\n  private toasts: WritableSignal<Toast[]> = signal([]);\r\n  private toastIdCounter = 0;\r\n\r\n  /**\r\n   * Get all active toasts\r\n   */\r\n  getToasts(): WritableSignal<Toast[]> {\r\n    return this.toasts;\r\n  }\r\n\r\n  /**\r\n   * Show a success toast\r\n   */\r\n  success(message: string, duration: number = 3000): string {\r\n    return this.show('success', message, duration);\r\n  }\r\n\r\n  /**\r\n   * Show an error toast\r\n   */\r\n  error(message: string, duration: number = 5000): string {\r\n    return this.show('error', message, duration);\r\n  }\r\n\r\n  /**\r\n   * Show a warning toast\r\n   */\r\n  warning(message: string, duration: number = 4000): string {\r\n    return this.show('warning', message, duration);\r\n  }\r\n\r\n  /**\r\n   * Show a warning toast with an action button\r\n   */\r\n  warningWithAction(message: string, actionLabel: string, actionHandler: () => void, duration: number = 0): string {\r\n    return this.withActions(\r\n      'warning',\r\n      message,\r\n      [\r\n        { label: actionLabel, handler: actionHandler, variant: 'primary' },\r\n        { label: 'ç¨å¾Œ', handler: () => {}, variant: 'secondary' }\r\n      ],\r\n      duration\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Show an info toast\r\n   */\r\n  info(message: string, duration: number = 3000): string {\r\n    return this.show('info', message, duration);\r\n  }\r\n\r\n  /**\r\n   * Show a success toast with next step hint\r\n   */\r\n  successWithNextStep(message: string, nextStepLabel: string, nextStepAction: () => void): string {\r\n    const id = `toast-${++this.toastIdCounter}`;\r\n    const toast: Toast = {\r\n      id,\r\n      type: 'success',\r\n      message,\r\n      icon: 'ğŸ‰',\r\n      duration: 5000,\r\n      timestamp: new Date(),\r\n      nextStep: { label: nextStepLabel, action: nextStepAction },\r\n      dismissible: true\r\n    };\r\n\r\n    this.toasts.update(toasts => [...toasts, toast]);\r\n    \r\n    setTimeout(() => this.dismiss(id), 5000);\r\n    return id;\r\n  }\r\n\r\n  /**\r\n   * Show a toast with action buttons\r\n   */\r\n  withActions(\r\n    type: ToastType, \r\n    message: string, \r\n    actions: ToastAction[], \r\n    duration: number = 0\r\n  ): string {\r\n    const id = `toast-${++this.toastIdCounter}`;\r\n    const toast: Toast = {\r\n      id,\r\n      type,\r\n      message,\r\n      icon: DEFAULT_ICONS[type],\r\n      duration: duration > 0 ? duration : undefined,\r\n      timestamp: new Date(),\r\n      actions,\r\n      dismissible: true\r\n    };\r\n\r\n    this.toasts.update(toasts => [...toasts, toast]);\r\n    \r\n    if (duration > 0) {\r\n      setTimeout(() => this.dismiss(id), duration);\r\n    }\r\n    \r\n    return id;\r\n  }\r\n\r\n  /**\r\n   * Show a progress toast\r\n   */\r\n  showProgress(message: string, progress: number = 0): string {\r\n    const id = `toast-${++this.toastIdCounter}`;\r\n    const toast: Toast = {\r\n      id,\r\n      type: 'progress',\r\n      message,\r\n      icon: 'â³',\r\n      progress,\r\n      timestamp: new Date(),\r\n      dismissible: false\r\n    };\r\n\r\n    this.toasts.update(toasts => [...toasts, toast]);\r\n    return id;\r\n  }\r\n\r\n  /**\r\n   * Update progress toast\r\n   */\r\n  updateProgress(id: string, progress: number, message?: string): void {\r\n    this.toasts.update(toasts => \r\n      toasts.map(t => t.id === id ? { \r\n        ...t, \r\n        progress, \r\n        message: message || t.message,\r\n        icon: progress >= 100 ? 'âœ…' : 'â³'\r\n      } : t)\r\n    );\r\n\r\n    // Auto dismiss when complete\r\n    if (progress >= 100) {\r\n      setTimeout(() => this.dismiss(id), 2000);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show a configuration reminder toast\r\n   */\r\n  configReminder(stepName: string, action: () => void): string {\r\n    return this.withActions(\r\n      'warning',\r\n      `é…ç½®æœªå®Œæˆï¼š${stepName}`,\r\n      [\r\n        { label: 'ç«‹å³è¨­ç½®', handler: action, variant: 'primary' },\r\n        { label: 'ç¨å¾Œ', handler: () => {}, variant: 'secondary' }\r\n      ],\r\n      0\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Show operation result with emoji\r\n   */\r\n  operationResult(success: boolean, successMsg: string, errorMsg: string): string {\r\n    if (success) {\r\n      return this.success(successMsg);\r\n    } else {\r\n      return this.error(errorMsg);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Common operation feedback messages\r\n   */\r\n  \r\n  // å¸³è™Ÿç›¸é—œ\r\n  accountConnected(name: string): string {\r\n    return this.successWithNextStep(\r\n      `ğŸ”— ${name} å·²é€£æ¥`,\r\n      'è¨­ç‚ºç›£è½å¸³è™Ÿ',\r\n      () => {}\r\n    );\r\n  }\r\n\r\n  accountDisconnected(name: string): string {\r\n    return this.warning(`ğŸ“´ ${name} å·²æ–·é–‹é€£æ¥`);\r\n  }\r\n\r\n  accountRoleChanged(name: string, role: string): string {\r\n    const roleEmoji = role === 'Listener' ? 'ğŸ‘ï¸' : role === 'Sender' ? 'ğŸ“¤' : 'ğŸ‘¤';\r\n    return this.success(`${roleEmoji} ${name} å·²è¨­ç‚º${role === 'Listener' ? 'ç›£è½' : role === 'Sender' ? 'ç™¼é€' : 'æ™®é€š'}å¸³è™Ÿ`);\r\n  }\r\n\r\n  // ç¾¤çµ„ç›¸é—œ\r\n  groupAdded(name: string): string {\r\n    return this.successWithNextStep(\r\n      `ğŸ’¬ å·²æ·»åŠ ç¾¤çµ„ã€Œ${name}ã€`,\r\n      'ç¶å®šé—œéµè©é›†',\r\n      () => {}\r\n    );\r\n  }\r\n\r\n  groupRemoved(name: string): string {\r\n    return this.success(`ğŸ—‘ï¸ å·²ç§»é™¤ã€Œ${name}ã€`);\r\n  }\r\n\r\n  groupKeywordBound(groupName: string, keywordSetName: string): string {\r\n    return this.success(`ğŸ”— å·²å°‡ã€Œ${keywordSetName}ã€ç¶å®šåˆ°ã€Œ${groupName}ã€`);\r\n  }\r\n\r\n  // è©é›†ç›¸é—œ\r\n  keywordSetCreated(name: string): string {\r\n    return this.successWithNextStep(\r\n      `ğŸ”‘ è©é›†ã€Œ${name}ã€å·²å‰µå»º`,\r\n      'ç¶å®šåˆ°ç¾¤çµ„',\r\n      () => {}\r\n    );\r\n  }\r\n\r\n  keywordSetDeleted(name: string): string {\r\n    return this.success(`ğŸ—‘ï¸ è©é›†ã€Œ${name}ã€å·²åˆªé™¤`);\r\n  }\r\n\r\n  // ç›£æ§ç›¸é—œ\r\n  monitoringStarted(): string {\r\n    return this.success('ğŸš€ ç›£æ§å·²å•Ÿå‹•ï¼Œç³»çµ±æ­£åœ¨å·¥ä½œä¸­...');\r\n  }\r\n\r\n  monitoringStopped(): string {\r\n    return this.info('â¸ï¸ ç›£æ§å·²æš«åœ');\r\n  }\r\n\r\n  keywordMatched(keyword: string, groupName: string): string {\r\n    return this.info(`ğŸ¯ åœ¨ã€Œ${groupName}ã€åŒ¹é…åˆ°é—œéµè©ã€Œ${keyword}ã€`);\r\n  }\r\n\r\n  // æå–æˆå“¡\r\n  extractMembersStarted(groupName: string): string {\r\n    return this.showProgress(`æ­£åœ¨æå–ã€Œ${groupName}ã€çš„æˆå“¡...`, 0);\r\n  }\r\n\r\n  extractMembersCompleted(count: number, groupName: string): string {\r\n    return this.success(`âœ… å·²å¾ã€Œ${groupName}ã€æå– ${count} å€‹æˆå“¡`);\r\n  }\r\n\r\n  /**\r\n   * Show a toast notification\r\n   */\r\n  private show(type: ToastType, message: string, duration: number = 3000): string {\r\n    const id = `toast-${++this.toastIdCounter}`;\r\n    const toast: Toast = {\r\n      id,\r\n      type,\r\n      message,\r\n      icon: DEFAULT_ICONS[type],\r\n      duration: duration > 0 ? duration : undefined,\r\n      timestamp: new Date(),\r\n      dismissible: true\r\n    };\r\n\r\n    this.toasts.update(toasts => [...toasts, toast]);\r\n\r\n    if (duration > 0) {\r\n      setTimeout(() => {\r\n        this.dismiss(id);\r\n      }, duration);\r\n    }\r\n\r\n    return id;\r\n  }\r\n\r\n  /**\r\n   * Dismiss a toast by ID\r\n   */\r\n  dismiss(id: string): void {\r\n    this.toasts.update(toasts => toasts.filter(t => t.id !== id));\r\n  }\r\n\r\n  /**\r\n   * Dismiss all toasts\r\n   */\r\n  dismissAll(): void {\r\n    this.toasts.set([]);\r\n  }\r\n}\r\n", "/**\r\n * TG-Matrix Membership Service\r\n * ã€Œç‹è€…æ¦®è€€ã€é¢¨æ ¼æœƒå“¡ç­‰ç´šç³»çµ±\r\n * \r\n * æœƒå“¡ç­‰ç´šï¼š\r\n * âš”ï¸ é’éŠ…æˆ°å£« (Bronze) - å…è²»é«”é©—\r\n * ğŸ¥ˆ ç™½éŠ€ç²¾è‹± (Silver) - å€‹äººå…¥é–€\r\n * ğŸ¥‡ é»ƒé‡‘å¤§å¸« (Gold) - å€‹äººé€²éš\r\n * ğŸ’ é‘½çŸ³ç‹ç‰Œ (Diamond) - å°ˆæ¥­ç”¨æˆ¶\r\n * ğŸŒŸ æ˜Ÿè€€å‚³èªª (Star) - åœ˜éšŠç”¨æˆ¶\r\n * ğŸ‘‘ æ¦®è€€ç‹è€… (King) - ç„¡é™å°Šäº«\r\n * \r\n * ============ ğŸ”§ P2 æ•¸æ“šæºèªªæ˜ ============\r\n * \r\n * æ•¸æ“šæºå„ªå…ˆç´šï¼š\r\n * 1. SaaS æ¨¡å¼ï¼ˆé Electronï¼‰ï¼šAuthService æ˜¯å”¯ä¸€æ•¸æ“šæº\r\n *    - æœƒå“¡ç­‰ç´šå¾ /api/v1/auth/me ç²å–\r\n *    - æœ¬æœå‹™åƒ…æä¾›é…é¡å’ŒåŠŸèƒ½é…ç½®æŸ¥è©¢\r\n * \r\n * 2. Electron æ¨¡å¼ï¼šæœ¬æœå‹™ç‚ºä¸»è¦æ•¸æ“šæº\r\n *    - æ”¯æŒæœ¬åœ°å¡å¯†æ¿€æ´»\r\n *    - æ•¸æ“šå­˜å„²åœ¨ localStorage (tg-matrix-membership)\r\n * \r\n * é‡è¦ï¼šç•¶éœ€è¦é¡¯ç¤ºæœƒå“¡ç­‰ç´šæ™‚ï¼Œå„ªå…ˆä½¿ç”¨ AuthService.membershipLevel()\r\n * ==========================================\r\n */\r\nimport { Injectable, signal, computed, WritableSignal, inject, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { AuthEventsService } from './core/auth-events.service';\r\n\r\n// ============ é¡å‹å®šç¾© ============\r\n\r\nexport type MembershipLevel = 'bronze' | 'silver' | 'gold' | 'diamond' | 'star' | 'king';\r\n\r\nexport interface MembershipInfo {\r\n  level: MembershipLevel;\r\n  levelName: string;\r\n  levelIcon: string;\r\n  expiresAt?: Date;\r\n  activatedAt?: Date;\r\n  licenseKey?: string;\r\n  email?: string;\r\n  machineId: string;\r\n  // ç”¨é‡çµ±è¨ˆ\r\n  usage: UsageStats;\r\n  // é‚€è«‹ä¿¡æ¯\r\n  inviteCode: string;\r\n  invitedBy?: string;\r\n  inviteCount: number;\r\n  inviteRewards: number; // ç´¯è¨ˆé‚€è«‹çå‹µå¤©æ•¸\r\n}\r\n\r\nexport interface UsageStats {\r\n  // ä»Šæ—¥ä½¿ç”¨\r\n  todayMessages: number;\r\n  todayAiCalls: number;\r\n  todayDate: string;\r\n  // ç¸½è¨ˆä½¿ç”¨\r\n  totalMessages: number;\r\n  totalAiCalls: number;\r\n  totalLeads: number;\r\n}\r\n\r\nexport interface Quotas {\r\n  maxAccounts: number;\r\n  dailyMessages: number;\r\n  dailyAiCalls: number;\r\n  maxGroups: number;\r\n  maxKeywordSets: number;\r\n  dataRetentionDays: number;\r\n  // å¹³å° API é…é¡ï¼ˆæ–°å¢ï¼‰\r\n  platformApiQuota: number;        // å¯ä½¿ç”¨çš„å¹³å° API æ•¸é‡\r\n  platformApiMaxAccounts: number;  // æ¯å€‹å¹³å° API å¯ç¶å®šçš„å¸³è™Ÿæ•¸\r\n}\r\n\r\nexport interface FeatureAccess {\r\n  // åŸºç¤åŠŸèƒ½\r\n  accountManagement: boolean;\r\n  keywordMonitoring: boolean;\r\n  leadCapture: boolean;\r\n  // ç™½éŠ€åŠŸèƒ½\r\n  aiAutoReply: boolean;\r\n  adBroadcast: boolean;\r\n  hotLeads: boolean;            // ç†±é–€å®¢æˆ¶åˆ†æ\r\n  // é»ƒé‡‘åŠŸèƒ½\r\n  smartMode: boolean;           // æ™ºèƒ½æ¨¡å¼å„€è¡¨ç›¤\r\n  aiInsights: boolean;          // AIæ™ºèƒ½æ´å¯Ÿ\r\n  dataExport: boolean;\r\n  batchOperations: boolean;\r\n  dataInsightsBasic: boolean;   // åŸºç¤æ•¸æ“šæ´å¯Ÿ\r\n  // é‘½çŸ³åŠŸèƒ½\r\n  strategyPlanning: boolean;    // ç­–ç•¥è¦åŠƒ (AIç‡ŸéŠ·åŠ©æ‰‹)\r\n  autoExecution: boolean;       // è‡ªå‹•åŸ·è¡Œ (AIåœ˜éšŠéŠ·å”®)\r\n  dataInsightsAdvanced: boolean;// é€²éšæ•¸æ“šæ´å¯Ÿ\r\n  abTesting: boolean;           // A/Bæ¸¬è©¦\r\n  multiRole: boolean;\r\n  aiSalesFunnel: boolean;\r\n  advancedAnalytics: boolean;\r\n  smartAntiBlock: boolean;\r\n  // æ˜Ÿè€€åŠŸèƒ½\r\n  apiAccess: boolean;\r\n  teamManagement: boolean;\r\n  // ç‹è€…åŠŸèƒ½\r\n  customBranding: boolean;\r\n  prioritySupport: boolean;\r\n}\r\n\r\nexport interface PricingPlan {\r\n  level: MembershipLevel;\r\n  name: string;\r\n  icon: string;\r\n  monthlyPrice: number;\r\n  yearlyPrice: number;\r\n  features: string[];\r\n  quotas: Quotas;\r\n  recommended?: boolean;\r\n}\r\n\r\n// ============ æœƒå“¡é…ç½®ï¼ˆç‹è€…æ¦®è€€é¢¨æ ¼ï¼‰============\r\n\r\nconst MEMBERSHIP_CONFIG: Record<MembershipLevel, {\r\n  name: string;\r\n  icon: string;\r\n  rank: number;\r\n  quotas: Quotas;\r\n  features: FeatureAccess;\r\n  monthlyPrice: number;\r\n  yearlyPrice: number;\r\n}> = {\r\n  bronze: {\r\n    name: 'é’éŠ…æˆ°å£«',\r\n    icon: 'âš”ï¸',\r\n    rank: 1,\r\n    monthlyPrice: 0,\r\n    yearlyPrice: 0,\r\n    quotas: {\r\n      maxAccounts: 2,\r\n      dailyMessages: 20,\r\n      dailyAiCalls: 10,\r\n      maxGroups: 3,\r\n      maxKeywordSets: 1,\r\n      dataRetentionDays: 7,\r\n      platformApiQuota: 0,\r\n      platformApiMaxAccounts: 0\r\n    },\r\n    features: {\r\n      // åŸºç¤åŠŸèƒ½\r\n      accountManagement: true,\r\n      keywordMonitoring: true,\r\n      leadCapture: true,\r\n      // ç™½éŠ€åŠŸèƒ½\r\n      aiAutoReply: true,\r\n      adBroadcast: false,\r\n      hotLeads: false,\r\n      // é»ƒé‡‘åŠŸèƒ½\r\n      smartMode: false,\r\n      aiInsights: false,\r\n      dataExport: false,\r\n      batchOperations: false,\r\n      dataInsightsBasic: false,\r\n      // é‘½çŸ³åŠŸèƒ½\r\n      strategyPlanning: false,\r\n      autoExecution: false,\r\n      dataInsightsAdvanced: false,\r\n      abTesting: false,\r\n      multiRole: false,\r\n      aiSalesFunnel: false,\r\n      advancedAnalytics: false,\r\n      smartAntiBlock: false,\r\n      // æ˜Ÿè€€åŠŸèƒ½\r\n      apiAccess: false,\r\n      teamManagement: false,\r\n      // ç‹è€…åŠŸèƒ½\r\n      customBranding: false,\r\n      prioritySupport: false\r\n    }\r\n  },\r\n  silver: {\r\n    name: 'ç™½éŠ€ç²¾è‹±',\r\n    icon: 'ğŸ¥ˆ',\r\n    rank: 2,\r\n    monthlyPrice: 4.99,\r\n    yearlyPrice: 49.9,\r\n    quotas: {\r\n      maxAccounts: 5,\r\n      dailyMessages: 100,\r\n      dailyAiCalls: 50,\r\n      maxGroups: 10,\r\n      maxKeywordSets: 5,\r\n      dataRetentionDays: 30,\r\n      platformApiQuota: 1,\r\n      platformApiMaxAccounts: 3\r\n    },\r\n    features: {\r\n      // åŸºç¤åŠŸèƒ½\r\n      accountManagement: true,\r\n      keywordMonitoring: true,\r\n      leadCapture: true,\r\n      // ç™½éŠ€åŠŸèƒ½ âœ“\r\n      aiAutoReply: true,\r\n      adBroadcast: true,\r\n      hotLeads: true,              // è§£é–ç†±é–€å®¢æˆ¶\r\n      // é»ƒé‡‘åŠŸèƒ½\r\n      smartMode: false,\r\n      aiInsights: false,\r\n      dataExport: false,\r\n      batchOperations: false,\r\n      dataInsightsBasic: false,\r\n      // é‘½çŸ³åŠŸèƒ½\r\n      strategyPlanning: false,\r\n      autoExecution: false,\r\n      dataInsightsAdvanced: false,\r\n      abTesting: false,\r\n      multiRole: false,\r\n      aiSalesFunnel: false,\r\n      advancedAnalytics: false,\r\n      smartAntiBlock: false,\r\n      // æ˜Ÿè€€åŠŸèƒ½\r\n      apiAccess: false,\r\n      teamManagement: false,\r\n      // ç‹è€…åŠŸèƒ½\r\n      customBranding: false,\r\n      prioritySupport: false\r\n    }\r\n  },\r\n  gold: {\r\n    name: 'é»ƒé‡‘å¤§å¸«',\r\n    icon: 'ğŸ¥‡',\r\n    rank: 3,\r\n    monthlyPrice: 19.9,  // ä¸»æ¨ç”¢å“\r\n    yearlyPrice: 199,\r\n    quotas: {\r\n      maxAccounts: 15,\r\n      dailyMessages: 500,\r\n      dailyAiCalls: 300,\r\n      maxGroups: 30,\r\n      maxKeywordSets: 20,\r\n      dataRetentionDays: 60,\r\n      platformApiQuota: 3,\r\n      platformApiMaxAccounts: 9\r\n    },\r\n    features: {\r\n      // åŸºç¤åŠŸèƒ½\r\n      accountManagement: true,\r\n      keywordMonitoring: true,\r\n      leadCapture: true,\r\n      // ç™½éŠ€åŠŸèƒ½ âœ“\r\n      aiAutoReply: true,\r\n      adBroadcast: true,\r\n      hotLeads: true,\r\n      // é»ƒé‡‘åŠŸèƒ½ âœ“\r\n      smartMode: true,             // è§£é–æ™ºèƒ½æ¨¡å¼\r\n      aiInsights: true,            // è§£é–AIæ™ºèƒ½æ´å¯Ÿ\r\n      dataExport: true,\r\n      batchOperations: true,\r\n      dataInsightsBasic: true,     // è§£é–åŸºç¤æ•¸æ“šæ´å¯Ÿ\r\n      // é‘½çŸ³åŠŸèƒ½\r\n      strategyPlanning: false,\r\n      autoExecution: false,\r\n      dataInsightsAdvanced: false,\r\n      abTesting: false,\r\n      multiRole: false,\r\n      aiSalesFunnel: false,\r\n      advancedAnalytics: false,\r\n      smartAntiBlock: false,\r\n      // æ˜Ÿè€€åŠŸèƒ½\r\n      apiAccess: false,\r\n      teamManagement: false,\r\n      // ç‹è€…åŠŸèƒ½\r\n      customBranding: false,\r\n      prioritySupport: false\r\n    }\r\n  },\r\n  diamond: {\r\n    name: 'é‘½çŸ³ç‹ç‰Œ',\r\n    icon: 'ğŸ’',\r\n    rank: 4,\r\n    monthlyPrice: 59.9,\r\n    yearlyPrice: 599,\r\n    quotas: {\r\n      maxAccounts: 50,\r\n      dailyMessages: 2000,\r\n      dailyAiCalls: -1,\r\n      maxGroups: 100,\r\n      maxKeywordSets: 50,\r\n      dataRetentionDays: 90,\r\n      platformApiQuota: 10,\r\n      platformApiMaxAccounts: 30\r\n    },\r\n    features: {\r\n      // åŸºç¤åŠŸèƒ½\r\n      accountManagement: true,\r\n      keywordMonitoring: true,\r\n      leadCapture: true,\r\n      // ç™½éŠ€åŠŸèƒ½ âœ“\r\n      aiAutoReply: true,\r\n      adBroadcast: true,\r\n      hotLeads: true,\r\n      // é»ƒé‡‘åŠŸèƒ½ âœ“\r\n      smartMode: true,\r\n      aiInsights: true,\r\n      dataExport: true,\r\n      batchOperations: true,\r\n      dataInsightsBasic: true,\r\n      // é‘½çŸ³åŠŸèƒ½ âœ“\r\n      strategyPlanning: true,      // è§£é–ç­–ç•¥è¦åŠƒ\r\n      autoExecution: true,         // è§£é–è‡ªå‹•åŸ·è¡Œ\r\n      dataInsightsAdvanced: true,  // è§£é–é€²éšæ•¸æ“šæ´å¯Ÿ\r\n      abTesting: true,             // è§£é–A/Bæ¸¬è©¦\r\n      multiRole: true,\r\n      aiSalesFunnel: true,\r\n      advancedAnalytics: true,\r\n      smartAntiBlock: false,\r\n      // æ˜Ÿè€€åŠŸèƒ½\r\n      apiAccess: false,\r\n      teamManagement: false,\r\n      // ç‹è€…åŠŸèƒ½\r\n      customBranding: false,\r\n      prioritySupport: true        // å„ªå…ˆæ”¯æŒ\r\n    }\r\n  },\r\n  star: {\r\n    name: 'æ˜Ÿè€€å‚³èªª',\r\n    icon: 'ğŸŒŸ',\r\n    rank: 5,\r\n    monthlyPrice: 199,\r\n    yearlyPrice: 1999,\r\n    quotas: {\r\n      maxAccounts: 100,\r\n      dailyMessages: 10000,\r\n      dailyAiCalls: -1,\r\n      maxGroups: 300,\r\n      maxKeywordSets: 100,\r\n      dataRetentionDays: 180,\r\n      platformApiQuota: 30,\r\n      platformApiMaxAccounts: 90\r\n    },\r\n    features: {\r\n      // åŸºç¤åŠŸèƒ½\r\n      accountManagement: true,\r\n      keywordMonitoring: true,\r\n      leadCapture: true,\r\n      // ç™½éŠ€åŠŸèƒ½ âœ“\r\n      aiAutoReply: true,\r\n      adBroadcast: true,\r\n      hotLeads: true,\r\n      // é»ƒé‡‘åŠŸèƒ½ âœ“\r\n      smartMode: true,\r\n      aiInsights: true,\r\n      dataExport: true,\r\n      batchOperations: true,\r\n      dataInsightsBasic: true,\r\n      // é‘½çŸ³åŠŸèƒ½ âœ“\r\n      strategyPlanning: true,\r\n      autoExecution: true,\r\n      dataInsightsAdvanced: true,\r\n      abTesting: true,\r\n      multiRole: true,\r\n      aiSalesFunnel: true,\r\n      advancedAnalytics: true,\r\n      smartAntiBlock: true,\r\n      // æ˜Ÿè€€åŠŸèƒ½ âœ“\r\n      apiAccess: true,             // è§£é–APIæ¥å£\r\n      teamManagement: true,        // è§£é–åœ˜éšŠç®¡ç†\r\n      // ç‹è€…åŠŸèƒ½\r\n      customBranding: false,\r\n      prioritySupport: true\r\n    }\r\n  },\r\n  king: {\r\n    name: 'æ¦®è€€ç‹è€…',\r\n    icon: 'ğŸ‘‘',\r\n    rank: 6,\r\n    monthlyPrice: 599,\r\n    yearlyPrice: 5999,\r\n    quotas: {\r\n      maxAccounts: -1,  // ç„¡é™\r\n      dailyMessages: -1,\r\n      dailyAiCalls: -1,\r\n      maxGroups: -1,\r\n      maxKeywordSets: -1,\r\n      dataRetentionDays: 365,\r\n      platformApiQuota: -1,\r\n      platformApiMaxAccounts: -1\r\n    },\r\n    features: {\r\n      // æ‰€æœ‰åŠŸèƒ½å…¨éƒ¨è§£é–\r\n      accountManagement: true,\r\n      keywordMonitoring: true,\r\n      leadCapture: true,\r\n      // ç™½éŠ€åŠŸèƒ½ âœ“\r\n      aiAutoReply: true,\r\n      adBroadcast: true,\r\n      hotLeads: true,\r\n      // é»ƒé‡‘åŠŸèƒ½ âœ“\r\n      smartMode: true,\r\n      aiInsights: true,\r\n      dataExport: true,\r\n      batchOperations: true,\r\n      dataInsightsBasic: true,\r\n      // é‘½çŸ³åŠŸèƒ½ âœ“\r\n      strategyPlanning: true,\r\n      autoExecution: true,\r\n      dataInsightsAdvanced: true,\r\n      abTesting: true,\r\n      multiRole: true,\r\n      aiSalesFunnel: true,\r\n      advancedAnalytics: true,\r\n      smartAntiBlock: true,\r\n      // æ˜Ÿè€€åŠŸèƒ½ âœ“\r\n      apiAccess: true,\r\n      teamManagement: true,\r\n      // ç‹è€…åŠŸèƒ½ âœ“\r\n      customBranding: true,        // è§£é–è‡ªå®šç¾©å“ç‰Œ\r\n      prioritySupport: true\r\n    }\r\n  }\r\n};\r\n\r\n// ============ æœå‹™å¯¦ç¾ ============\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MembershipService {\r\n  private static readonly STORAGE_KEY = 'tg-matrix-membership';\r\n  private static readonly USAGE_KEY = 'tg-matrix-usage';\r\n  private static readonly TRIAL_DAYS = 7; // å…è²»è©¦ç”¨å¤©æ•¸\r\n  \r\n  // ========== å…ç™»éŒ„å®Œæ•´ç‰ˆé…ç½® ==========\r\n  // èˆ‡ AuthService ä¿æŒä¸€è‡´ï¼šå…ç™»éŒ„æ¨¡å¼ä¸‹é»˜èªç‚ºæ¦®è€€ç‹è€…\r\n  // åƒ…åœ¨ Electron/IPC æ¨¡å¼ä¸‹å•Ÿç”¨å…ç™»éŒ„\r\n  private readonly SKIP_LOGIN = !!(window as any).electronAPI || !!(window as any).electron;\r\n  private readonly DEFAULT_LEVEL: MembershipLevel = 'king';\r\n  // ========================================\r\n  \r\n  // ç‹€æ…‹\r\n  private _membership: WritableSignal<MembershipInfo | null> = signal(null);\r\n  private _isLoading: WritableSignal<boolean> = signal(true);\r\n  \r\n  // è¨ˆç®—å±¬æ€§\r\n  membership = computed(() => this._membership());\r\n  isLoading = computed(() => this._isLoading());\r\n  \r\n  level = computed(() => {\r\n    // å…ç™»éŒ„æ¨¡å¼é»˜èªç‚ºæ¦®è€€ç‹è€…\r\n    const defaultLevel = this.SKIP_LOGIN ? this.DEFAULT_LEVEL : 'bronze';\r\n    const rawLevel = this._membership()?.level || defaultLevel;\r\n    // ç¢ºä¿è¿”å›æœ‰æ•ˆçš„æœƒå“¡ç­‰ç´šï¼Œè™•ç†èˆŠç‰ˆæ•¸æ“šå…¼å®¹\r\n    if (rawLevel in MEMBERSHIP_CONFIG) {\r\n      return rawLevel as MembershipLevel;\r\n    }\r\n    // èˆŠç‰ˆç­‰ç´šæ˜ å°„\r\n    const legacyMap: Record<string, MembershipLevel> = {\r\n      'free': 'bronze',\r\n      'vip': 'silver',\r\n      'svip': 'diamond',\r\n      'mvp': 'king'\r\n    };\r\n    return legacyMap[rawLevel] || defaultLevel;\r\n  });\r\n  levelName = computed(() => MEMBERSHIP_CONFIG[this.level()]?.name || (this.SKIP_LOGIN ? 'æ¦®è€€ç‹è€…' : 'é’éŠ…æˆ°å£«'));\r\n  levelIcon = computed(() => MEMBERSHIP_CONFIG[this.level()]?.icon || (this.SKIP_LOGIN ? 'ğŸ‘‘' : 'âš”ï¸'));\r\n  levelRank = computed(() => MEMBERSHIP_CONFIG[this.level()]?.rank || (this.SKIP_LOGIN ? 6 : 1));\r\n  \r\n  isActive = computed(() => {\r\n    const m = this._membership();\r\n    if (!m) return false;\r\n    if (m.level === 'bronze') return true; // é’éŠ…æˆ°å£«æ°¸é æœ‰æ•ˆ\r\n    // å¦‚æœæ²’æœ‰è¨­ç½®éæœŸæ—¥æœŸï¼Œè¦–ç‚ºæ°¸ä¹…æœƒå“¡ï¼ˆé–‹ç™¼æ¨¡å¼æˆ–çµ‚èº«æœƒå“¡ï¼‰\r\n    if (!m.expiresAt) return true;\r\n    return new Date() < m.expiresAt;\r\n  });\r\n  \r\n  daysRemaining = computed(() => {\r\n    const m = this._membership();\r\n    if (!m || !m.expiresAt || m.level === 'bronze') return -1; // -1 è¡¨ç¤ºæ°¸ä¹…/ç„¡é™\r\n    const diff = m.expiresAt.getTime() - Date.now();\r\n    return Math.max(0, Math.ceil(diff / (1000 * 60 * 60 * 24)));\r\n  });\r\n  \r\n  quotas = computed<Quotas>(() => {\r\n    const effectiveLevel = this.isActive() ? this.level() : 'bronze';\r\n    return MEMBERSHIP_CONFIG[effectiveLevel].quotas;\r\n  });\r\n  \r\n  features = computed<FeatureAccess>(() => {\r\n    const effectiveLevel = this.isActive() ? this.level() : 'bronze';\r\n    return MEMBERSHIP_CONFIG[effectiveLevel].features;\r\n  });\r\n  \r\n  usage = computed<UsageStats>(() => {\r\n    return this._membership()?.usage || this.getDefaultUsage();\r\n  });\r\n  \r\n  // ğŸ†• äº‹ä»¶è¨‚é–±ç®¡ç†\r\n  private authEventsService = inject(AuthEventsService);\r\n  private eventSubscription: Subscription | null = null;\r\n  \r\n  constructor() {\r\n    this.loadMembership();\r\n    this.subscribeToAuthEvents();\r\n  }\r\n  \r\n  /**\r\n   * ğŸ†• è¨‚é–±èªè­‰äº‹ä»¶\r\n   * åœ¨ SaaS æ¨¡å¼ä¸‹ï¼Œç•¶ç”¨æˆ¶ç™»å…¥æˆ–æ•¸æ“šæ›´æ–°æ™‚è‡ªå‹•åŒæ­¥æœƒå“¡ç‹€æ…‹\r\n   */\r\n  private subscribeToAuthEvents(): void {\r\n    // Electron æ¨¡å¼ä¸éœ€è¦è¨‚é–±ï¼ˆä½¿ç”¨æœ¬åœ°å¡å¯†ï¼‰\r\n    if (this.SKIP_LOGIN) {\r\n      return;\r\n    }\r\n    \r\n    this.eventSubscription = this.authEventsService.authEvents$.subscribe(event => {\r\n      if (event.type === 'login' || event.type === 'user_update') {\r\n        const user = event.payload?.user;\r\n        if (user) {\r\n          // å¾ç”¨æˆ¶æ•¸æ“šä¸­æå–æœƒå“¡ç­‰ç´š\r\n          const tier = user.membershipLevel || user.subscription_tier || 'free';\r\n          const level = this.tierToLevel(tier);\r\n          const expires = user.membershipExpires || user.membership_expires;\r\n          \r\n          console.log(`[MembershipService] ğŸ”„ æ”¶åˆ° ${event.type} äº‹ä»¶ï¼ŒåŒæ­¥æœƒå“¡: ${level}`);\r\n          this.syncFromAuthService(level, expires);\r\n        }\r\n      } else if (event.type === 'logout') {\r\n        // ç™»å‡ºæ™‚é‡ç½®ç‚ºé’éŠ…\r\n        console.log('[MembershipService] æ”¶åˆ° logout äº‹ä»¶ï¼Œé‡ç½®æœƒå“¡ç‹€æ…‹');\r\n        this.initializeFreeMembership();\r\n      }\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ğŸ†• å°‡ subscription_tier è½‰æ›ç‚º MembershipLevel\r\n   */\r\n  private tierToLevel(tier: string): MembershipLevel {\r\n    const tierMap: Record<string, MembershipLevel> = {\r\n      'free': 'bronze',\r\n      'basic': 'silver',\r\n      'pro': 'gold',\r\n      'enterprise': 'diamond',\r\n      'bronze': 'bronze',\r\n      'silver': 'silver',\r\n      'gold': 'gold',\r\n      'diamond': 'diamond',\r\n      'star': 'star',\r\n      'king': 'king'\r\n    };\r\n    return tierMap[tier] || 'bronze';\r\n  }\r\n  \r\n  /**\r\n   * ğŸ†• æ¸…ç†è¨‚é–±\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.eventSubscription?.unsubscribe();\r\n  }\r\n  \r\n  // ============ ğŸ”§ P2: æ•¸æ“šåŒæ­¥ ============\r\n  \r\n  /**\r\n   * å¾ AuthService åŒæ­¥æœƒå“¡æ•¸æ“š\r\n   * ç”¨æ–¼ SaaS æ¨¡å¼ä¸‹ç¢ºä¿æ•¸æ“šä¸€è‡´æ€§\r\n   * \r\n   * @param authLevel å¾ AuthService ç²å–çš„æœƒå“¡ç­‰ç´š\r\n   * @param authExpires å¾ AuthService ç²å–çš„éæœŸæ™‚é–“\r\n   */\r\n  syncFromAuthService(authLevel: MembershipLevel, authExpires?: string): void {\r\n    // Electron æ¨¡å¼ä¸‹ä¸åŒæ­¥ï¼ˆæœ¬åœ°å¡å¯†å„ªå…ˆï¼‰\r\n    if (this.SKIP_LOGIN) {\r\n      console.log('[MembershipService] Electron æ¨¡å¼ï¼Œè·³é AuthService åŒæ­¥');\r\n      return;\r\n    }\r\n    \r\n    const currentMembership = this._membership();\r\n    const currentLevel = currentMembership?.level;\r\n    \r\n    // ğŸ”§ ä¿®å¾©ï¼šå§‹çµ‚æ›´æ–°æœƒå“¡æ•¸æ“šï¼Œç¢ºä¿ expiresAt ç­‰å±¬æ€§ä¹Ÿè¢«åŒæ­¥\r\n    // å³ä½¿ç­‰ç´šç›¸åŒï¼Œä¹Ÿéœ€è¦ç¢ºä¿å®Œæ•´çš„æœƒå“¡ä¿¡æ¯è¢«è¨­ç½®\r\n    const levelConfig = MEMBERSHIP_CONFIG[authLevel];\r\n    const newMembership: MembershipInfo = {\r\n      level: authLevel,\r\n      levelName: levelConfig?.name || 'æœªçŸ¥',\r\n      levelIcon: levelConfig?.icon || '?',\r\n      // ğŸ”§ ä¿®å¾©ï¼šå°æ–¼ä»˜è²»æœƒå“¡ï¼Œå¦‚æœæ²’æœ‰éæœŸæ™‚é–“ï¼Œè¨­ç½®ç‚ºæ°¸ä¹…ï¼ˆ100å¹´ï¼‰\r\n      expiresAt: authExpires \r\n        ? new Date(authExpires) \r\n        : (authLevel !== 'bronze' ? new Date(Date.now() + 365 * 100 * 24 * 60 * 60 * 1000) : undefined),\r\n      activatedAt: currentMembership?.activatedAt || new Date(),\r\n      machineId: this.getMachineId(),\r\n      usage: currentMembership?.usage || this.getDefaultUsage(),\r\n      inviteCode: currentMembership?.inviteCode || this.generateInviteCode(),\r\n      inviteCount: currentMembership?.inviteCount || 0,\r\n      inviteRewards: currentMembership?.inviteRewards || 0,\r\n    };\r\n    \r\n    // æª¢æŸ¥æ˜¯å¦æœ‰è®ŠåŒ–ï¼ˆç”¨æ–¼æ—¥èªŒï¼‰\r\n    if (currentLevel !== authLevel) {\r\n      console.log(`[MembershipService] ğŸ”„ æœƒå“¡ç­‰ç´šè®Šæ›´: ${currentLevel} â†’ ${authLevel}`);\r\n    } else {\r\n      console.log(`[MembershipService] âœ“ æœƒå“¡åŒæ­¥ç¢ºèª: ${authLevel} (expiresAt: ${newMembership.expiresAt || 'æ°¸ä¹…'})`);\r\n    }\r\n    \r\n    this._membership.set(newMembership);\r\n    \r\n    // ğŸ”§ ä¿®å¾©ï¼šåœ¨ SaaS æ¨¡å¼ä¸‹ä¿å­˜åˆ° localStorageï¼Œç¢ºä¿åˆ·æ–°å¾Œç«‹å³å¯ç”¨\r\n    // é€™æ¨£ç”¨æˆ¶åˆ·æ–°é é¢å¾Œï¼Œåœ¨ AuthService å®Œæˆåˆå§‹åŒ–å‰å°±èƒ½æœ‰æ­£ç¢ºçš„æœƒå“¡ç‹€æ…‹\r\n    this.saveMembership(newMembership);\r\n  }\r\n  \r\n  /**\r\n   * æª¢æŸ¥æ˜¯å¦ç‚º SaaS æ¨¡å¼ï¼ˆé Electronï¼‰\r\n   */\r\n  isSaaSMode(): boolean {\r\n    return !this.SKIP_LOGIN;\r\n  }\r\n  \r\n  // ============ æœƒå“¡ç®¡ç† ============\r\n  \r\n  /**\r\n   * åŠ è¼‰æœƒå“¡ä¿¡æ¯\r\n   */\r\n  private loadMembership(): void {\r\n    try {\r\n      const stored = localStorage.getItem(MembershipService.STORAGE_KEY);\r\n      \r\n      if (stored) {\r\n        const parsed = JSON.parse(stored);\r\n        parsed.expiresAt = parsed.expiresAt ? new Date(parsed.expiresAt) : undefined;\r\n        parsed.activatedAt = parsed.activatedAt ? new Date(parsed.activatedAt) : undefined;\r\n        \r\n        // å…ç™»éŒ„æ¨¡å¼ï¼šè‡ªå‹•å‡ç´šåˆ°æ¦®è€€ç‹è€…\r\n        if (this.SKIP_LOGIN && parsed.level !== this.DEFAULT_LEVEL) {\r\n          console.log(`[MembershipService] å…ç™»éŒ„æ¨¡å¼ï¼šå¾ ${parsed.level} å‡ç´šåˆ° ${this.DEFAULT_LEVEL}`);\r\n          parsed.level = this.DEFAULT_LEVEL;\r\n          parsed.levelName = MEMBERSHIP_CONFIG[this.DEFAULT_LEVEL].name;\r\n          parsed.levelIcon = MEMBERSHIP_CONFIG[this.DEFAULT_LEVEL].icon;\r\n          parsed.expiresAt = new Date(Date.now() + 365 * 100 * 24 * 60 * 60 * 1000); // 100å¹´\r\n          this.saveMembership(parsed);\r\n        }\r\n        \r\n        // æª¢æŸ¥ä¸¦é‡ç½®æ¯æ—¥ç”¨é‡\r\n        this.checkAndResetDailyUsage(parsed);\r\n        \r\n        this._membership.set(parsed);\r\n      } else {\r\n        // é¦–æ¬¡ä½¿ç”¨ï¼Œå‰µå»ºæœƒå“¡\r\n        this.initializeFreeMembership();\r\n      }\r\n    } catch (e) {\r\n      console.error('Failed to load membership:', e);\r\n      this.initializeFreeMembership();\r\n    } finally {\r\n      this._isLoading.set(false);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * åˆå§‹åŒ–æœƒå“¡\r\n   * å…ç™»éŒ„æ¨¡å¼ï¼šæ¦®è€€ç‹è€…ï¼ˆç„¡é™åˆ¶ï¼‰\r\n   * æ­£å¸¸æ¨¡å¼ï¼šé’éŠ…æˆ°å£«ï¼ˆå…è²»è©¦ç”¨ï¼‰\r\n   */\r\n  private initializeFreeMembership(): void {\r\n    const level = this.SKIP_LOGIN ? this.DEFAULT_LEVEL : 'bronze';\r\n    const config = MEMBERSHIP_CONFIG[level];\r\n    \r\n    const membership: MembershipInfo = {\r\n      level: level,\r\n      levelName: config.name,\r\n      levelIcon: config.icon,\r\n      activatedAt: new Date(),\r\n      // å…ç™»éŒ„æ¨¡å¼ï¼š100å¹´å¾ŒéæœŸï¼ˆç›¸ç•¶æ–¼æ°¸ä¹…ï¼‰\r\n      expiresAt: this.SKIP_LOGIN ? new Date(Date.now() + 365 * 100 * 24 * 60 * 60 * 1000) : undefined,\r\n      machineId: this.getMachineId(),\r\n      usage: this.getDefaultUsage(),\r\n      inviteCode: this.generateInviteCode(),\r\n      inviteCount: 0,\r\n      inviteRewards: 0\r\n    };\r\n    \r\n    console.log(`[MembershipService] åˆå§‹åŒ–æœƒå“¡: ${config.icon} ${config.name}`);\r\n    this.saveMembership(membership);\r\n  }\r\n  \r\n  /**\r\n   * æ¿€æ´»æœƒå“¡ï¼ˆç‹è€…æ¦®è€€é¢¨æ ¼ï¼‰\r\n   */\r\n  async activateMembership(\r\n    licenseKey: string,\r\n    email: string\r\n  ): Promise<{ success: boolean; message: string }> {\r\n    // é©—è­‰å¡å¯†æ ¼å¼\r\n    // æ–°æ ¼å¼: TGAI-[é¡å‹]-[XXXX]-[XXXX]-[XXXX]\r\n    // èˆŠæ ¼å¼: TGM-[é¡å‹]-[XXXX]-[XXXX]-[XXXX]\r\n    // é¡å‹: B=ç™½éŠ€/G=é»ƒé‡‘/D=é‘½çŸ³/S=æ˜Ÿè€€/K=ç‹è€…, 1=å‘¨/2=æœˆ/3=å­£/Y=å¹´/L=çµ‚èº«\r\n    const newKeyRegex = /^TGAI-([BGDSK][123YL]|EXT)-[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{4}$/i;\r\n    const oldKeyRegex = /^TGM-([BGDSK][123Y])-[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{4}$/i;\r\n    \r\n    let match = licenseKey.toUpperCase().match(newKeyRegex);\r\n    if (!match) {\r\n      match = licenseKey.toUpperCase().match(oldKeyRegex);\r\n    }\r\n    \r\n    if (!match) {\r\n      return { success: false, message: 'âš”ï¸ å¡å¯†æ ¼å¼ä¸æ­£ç¢ºï¼Œè«‹æª¢æŸ¥å¾Œé‡è©¦' };\r\n    }\r\n    \r\n    const typeCode = match[1];\r\n    const levelCode = typeCode[0];\r\n    const durationCode = typeCode[1] || '2';\r\n    \r\n    // è§£æç­‰ç´š\r\n    const levelMap: Record<string, MembershipLevel> = {\r\n      'B': 'silver',   // ç™½éŠ€ç²¾è‹±\r\n      'G': 'gold',     // é»ƒé‡‘å¤§å¸«\r\n      'D': 'diamond',  // é‘½çŸ³ç‹ç‰Œ\r\n      'S': 'star',     // æ˜Ÿè€€å‚³èªª\r\n      'K': 'king',     // æ¦®è€€ç‹è€…\r\n      'E': 'gold',     // EXT æ‰‹å‹•çºŒè²»é»˜èªé»ƒé‡‘\r\n    };\r\n    \r\n    // è§£ææ™‚é•·\r\n    const durationMap: Record<string, number> = {\r\n      '1': 7,     // å‘¨å¡\r\n      '2': 30,    // æœˆå¡\r\n      '3': 90,    // å­£å¡\r\n      'Y': 365,   // å¹´å¡\r\n      'L': 36500, // çµ‚èº«\r\n      'X': 30,    // EXT é»˜èª30å¤©\r\n    };\r\n    \r\n    const level = levelMap[levelCode] || 'silver';\r\n    const durationDays = durationMap[durationCode] || 30;\r\n    \r\n    // TODO: åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ï¼Œé€™è£¡æ‡‰è©²èª¿ç”¨æœå‹™å™¨APIé©—è­‰å¡å¯†\r\n    // const response = await this.verifyLicenseKey(licenseKey, email);\r\n    \r\n    // è¨ˆç®—åˆ°æœŸæ™‚é–“\r\n    const currentMembership = this._membership();\r\n    let expiresAt = new Date();\r\n    \r\n    // å¦‚æœç•¶å‰æœƒå“¡æœªéæœŸï¼Œå‰‡åœ¨ç¾æœ‰åŸºç¤ä¸Šå»¶é•·\r\n    if (currentMembership?.expiresAt && currentMembership.expiresAt > new Date()) {\r\n      expiresAt = new Date(currentMembership.expiresAt);\r\n    }\r\n    expiresAt.setDate(expiresAt.getDate() + durationDays);\r\n    \r\n    const config = MEMBERSHIP_CONFIG[level];\r\n    \r\n    const membership: MembershipInfo = {\r\n      ...currentMembership!,\r\n      level,\r\n      levelName: config.name,\r\n      levelIcon: config.icon,\r\n      expiresAt,\r\n      activatedAt: new Date(),\r\n      licenseKey: licenseKey.toUpperCase(),\r\n      email,\r\n      machineId: this.getMachineId()\r\n    };\r\n    \r\n    this.saveMembership(membership);\r\n    \r\n    return {\r\n      success: true,\r\n      message: `ğŸ‰ ${config.icon} ${config.name} æ¿€æ´»æˆåŠŸï¼æœ‰æ•ˆæœŸè‡³ ${expiresAt.toLocaleDateString()}`\r\n    };\r\n  }\r\n  \r\n  /**\r\n   * ä½¿ç”¨é‚€è«‹ç¢¼\r\n   */\r\n  async applyInviteCode(code: string): Promise<{ success: boolean; message: string }> {\r\n    if (!code || code.length !== 8) {\r\n      return { success: false, message: 'é‚€è«‹ç¢¼æ ¼å¼ä¸æ­£ç¢º' };\r\n    }\r\n    \r\n    const currentMembership = this._membership();\r\n    if (currentMembership?.invitedBy) {\r\n      return { success: false, message: 'æ‚¨å·²ç¶“ä½¿ç”¨éé‚€è«‹ç¢¼' };\r\n    }\r\n    \r\n    // TODO: æœå‹™å™¨é©—è­‰é‚€è«‹ç¢¼\r\n    \r\n    // çå‹µè¢«é‚€è«‹è€…ï¼š7å¤©ç™½éŠ€ç²¾è‹±\r\n    let expiresAt = new Date();\r\n    expiresAt.setDate(expiresAt.getDate() + 7);\r\n    \r\n    const membership: MembershipInfo = {\r\n      ...currentMembership!,\r\n      level: 'silver',\r\n      levelName: MEMBERSHIP_CONFIG.silver.name,\r\n      levelIcon: MEMBERSHIP_CONFIG.silver.icon,\r\n      expiresAt,\r\n      invitedBy: code\r\n    };\r\n    \r\n    this.saveMembership(membership);\r\n    \r\n    return {\r\n      success: true,\r\n      message: 'ğŸ é‚€è«‹ç¢¼ä½¿ç”¨æˆåŠŸï¼ç²å¾— 7 å¤©ç™½éŠ€ç²¾è‹±é«”é©—'\r\n    };\r\n  }\r\n  \r\n  /**\r\n   * æ·»åŠ é‚€è«‹çå‹µ\r\n   */\r\n  addInviteReward(days: number = 3): void {\r\n    const membership = this._membership();\r\n    if (!membership) return;\r\n    \r\n    // å»¶é•·æœƒå“¡æ™‚é–“\r\n    let expiresAt = membership.expiresAt || new Date();\r\n    if (expiresAt < new Date()) {\r\n      expiresAt = new Date();\r\n    }\r\n    expiresAt.setDate(expiresAt.getDate() + days);\r\n    \r\n    const updated: MembershipInfo = {\r\n      ...membership,\r\n      expiresAt,\r\n      inviteCount: (membership.inviteCount || 0) + 1,\r\n      inviteRewards: (membership.inviteRewards || 0) + days\r\n    };\r\n    \r\n    // å¦‚æœæ˜¯é’éŠ…ç”¨æˆ¶ï¼Œå‡ç´šç‚ºç™½éŠ€\r\n    if (updated.level === 'bronze') {\r\n      updated.level = 'silver';\r\n      updated.levelName = MEMBERSHIP_CONFIG.silver.name;\r\n      updated.levelIcon = MEMBERSHIP_CONFIG.silver.icon;\r\n    }\r\n    \r\n    this.saveMembership(updated);\r\n  }\r\n  \r\n  // ============ é…é¡ç®¡ç† ============\r\n  \r\n  /**\r\n   * æª¢æŸ¥æ˜¯å¦å¯ä»¥æ·»åŠ è³¬æˆ¶\r\n   */\r\n  canAddAccount(currentCount: number): { allowed: boolean; message?: string } {\r\n    const maxAccounts = this.quotas().maxAccounts;\r\n    if (maxAccounts === -1) return { allowed: true };\r\n    \r\n    if (currentCount >= maxAccounts) {\r\n      return {\r\n        allowed: false,\r\n        message: `${this.levelIcon()} ${this.levelName()} æœ€å¤šæ”¯æŒ ${maxAccounts} å€‹è³¬æˆ¶ï¼Œå‡ç´šè§£é–æ›´å¤š`\r\n      };\r\n    }\r\n    return { allowed: true };\r\n  }\r\n  \r\n  /**\r\n   * æª¢æŸ¥æ˜¯å¦å¯ä»¥ç™¼é€æ¶ˆæ¯\r\n   */\r\n  canSendMessage(): { allowed: boolean; remaining: number; message?: string } {\r\n    const daily = this.quotas().dailyMessages;\r\n    if (daily === -1) return { allowed: true, remaining: -1 };\r\n    \r\n    const usage = this.usage();\r\n    const remaining = daily - usage.todayMessages;\r\n    \r\n    if (remaining <= 0) {\r\n      return {\r\n        allowed: false,\r\n        remaining: 0,\r\n        message: `ä»Šæ—¥æ¶ˆæ¯é…é¡å·²ç”¨å®Œ (${daily}æ¢)ï¼Œæ˜å¤©é‡ç½®æˆ–å‡ç´šæœƒå“¡`\r\n      };\r\n    }\r\n    \r\n    return { allowed: true, remaining };\r\n  }\r\n  \r\n  /**\r\n   * æª¢æŸ¥æ˜¯å¦å¯ä»¥ä½¿ç”¨AI\r\n   */\r\n  canUseAi(): { allowed: boolean; remaining: number; message?: string } {\r\n    const daily = this.quotas().dailyAiCalls;\r\n    if (daily === -1) return { allowed: true, remaining: -1 };\r\n    \r\n    const usage = this.usage();\r\n    const remaining = daily - usage.todayAiCalls;\r\n    \r\n    if (remaining <= 0) {\r\n      return {\r\n        allowed: false,\r\n        remaining: 0,\r\n        message: `ä»Šæ—¥AIé…é¡å·²ç”¨å®Œ (${daily}æ¬¡)ï¼Œæ˜å¤©é‡ç½®æˆ–å‡ç´šæœƒå“¡`\r\n      };\r\n    }\r\n    \r\n    return { allowed: true, remaining };\r\n  }\r\n  \r\n  /**\r\n   * æª¢æŸ¥åŠŸèƒ½æ˜¯å¦å¯ç”¨\r\n   */\r\n  hasFeature(feature: keyof FeatureAccess): boolean {\r\n    if (!this.isActive()) {\r\n      return MEMBERSHIP_CONFIG.bronze.features[feature];\r\n    }\r\n    return this.features()[feature];\r\n  }\r\n  \r\n  /**\r\n   * è¨˜éŒ„æ¶ˆæ¯ç™¼é€\r\n   */\r\n  recordMessageSent(count: number = 1): void {\r\n    const membership = this._membership();\r\n    if (!membership) return;\r\n    \r\n    const usage = { ...membership.usage };\r\n    usage.todayMessages += count;\r\n    usage.totalMessages += count;\r\n    \r\n    this.saveMembership({ ...membership, usage });\r\n  }\r\n  \r\n  /**\r\n   * è¨˜éŒ„AIèª¿ç”¨\r\n   */\r\n  recordAiCall(count: number = 1): void {\r\n    const membership = this._membership();\r\n    if (!membership) return;\r\n    \r\n    const usage = { ...membership.usage };\r\n    usage.todayAiCalls += count;\r\n    usage.totalAiCalls += count;\r\n    \r\n    this.saveMembership({ ...membership, usage });\r\n  }\r\n  \r\n  /**\r\n   * è¨˜éŒ„ç²å–Lead\r\n   */\r\n  recordLeadCaptured(count: number = 1): void {\r\n    const membership = this._membership();\r\n    if (!membership) return;\r\n    \r\n    const usage = { ...membership.usage };\r\n    usage.totalLeads += count;\r\n    \r\n    this.saveMembership({ ...membership, usage });\r\n  }\r\n  \r\n  // ============ å®šåƒ¹ä¿¡æ¯ ============\r\n  \r\n  /**\r\n   * ç²å–æ‰€æœ‰å®šåƒ¹æ–¹æ¡ˆï¼ˆç‹è€…æ¦®è€€é¢¨æ ¼ï¼‰\r\n   */\r\n  getPricingPlans(): PricingPlan[] {\r\n    return [\r\n      {\r\n        level: 'bronze',\r\n        name: 'âš”ï¸ é’éŠ…æˆ°å£«',\r\n        icon: 'âš”ï¸',\r\n        monthlyPrice: 0,\r\n        yearlyPrice: 0,\r\n        quotas: MEMBERSHIP_CONFIG.bronze.quotas,\r\n        features: [\r\n          '2 å€‹è³¬æˆ¶',\r\n          'æ¯æ—¥ 20 æ¢æ¶ˆæ¯',\r\n          'æ¯æ—¥ 10 æ¬¡ AI',\r\n          '3 å€‹ç¾¤çµ„ / 1 å€‹é—œéµè©é›†',\r\n          'åŸºç¤ç›£æ§åŠŸèƒ½'\r\n        ]\r\n      },\r\n      {\r\n        level: 'silver',\r\n        name: 'ğŸ¥ˆ ç™½éŠ€ç²¾è‹±',\r\n        icon: 'ğŸ¥ˆ',\r\n        monthlyPrice: 4.99,\r\n        yearlyPrice: 49.9,\r\n        quotas: MEMBERSHIP_CONFIG.silver.quotas,\r\n        features: [\r\n          '5 å€‹è³¬æˆ¶',\r\n          'æ¯æ—¥ 100 æ¢æ¶ˆæ¯',\r\n          'æ¯æ—¥ 50 æ¬¡ AI',\r\n          '10 å€‹ç¾¤çµ„ / 5 å€‹é—œéµè©é›†',\r\n          'å»£å‘Šç™¼é€åŠŸèƒ½',\r\n          'ç†±é–€å®¢æˆ¶åˆ†æ'\r\n        ]\r\n      },\r\n      {\r\n        level: 'gold',\r\n        name: 'ğŸ¥‡ é»ƒé‡‘å¤§å¸«',\r\n        icon: 'ğŸ¥‡',\r\n        monthlyPrice: 19.9,\r\n        yearlyPrice: 199,\r\n        quotas: MEMBERSHIP_CONFIG.gold.quotas,\r\n        recommended: true,\r\n        features: [\r\n          '15 å€‹è³¬æˆ¶',\r\n          'æ¯æ—¥ 500 æ¢æ¶ˆæ¯ / 300 æ¬¡ AI',\r\n          '30 å€‹ç¾¤çµ„ / 20 å€‹é—œéµè©é›†',\r\n          'ğŸ†• æ™ºèƒ½æ¨¡å¼å„€è¡¨ç›¤',\r\n          'ğŸ†• AI æ™ºèƒ½æ´å¯Ÿ',\r\n          'æ•¸æ“šå°å‡º + æ‰¹é‡æ“ä½œ'\r\n        ]\r\n      },\r\n      {\r\n        level: 'diamond',\r\n        name: 'ğŸ’ é‘½çŸ³ç‹ç‰Œ',\r\n        icon: 'ğŸ’',\r\n        monthlyPrice: 59.9,\r\n        yearlyPrice: 599,\r\n        quotas: MEMBERSHIP_CONFIG.diamond.quotas,\r\n        features: [\r\n          '50 å€‹è³¬æˆ¶',\r\n          'æ¯æ—¥ 2000 æ¢æ¶ˆæ¯ / ç„¡é™ AI',\r\n          '100 å€‹ç¾¤çµ„ / 50 å€‹é—œéµè©é›†',\r\n          'ğŸ†• AI ç­–ç•¥è¦åŠƒ',\r\n          'ğŸ†• AI è‡ªå‹•åŸ·è¡Œ',\r\n          'å¤šè§’è‰²å”ä½œ + A/Bæ¸¬è©¦'\r\n        ]\r\n      },\r\n      {\r\n        level: 'star',\r\n        name: 'ğŸŒŸ æ˜Ÿè€€å‚³èªª',\r\n        icon: 'ğŸŒŸ',\r\n        monthlyPrice: 199,\r\n        yearlyPrice: 1999,\r\n        quotas: MEMBERSHIP_CONFIG.star.quotas,\r\n        features: [\r\n          '100 å€‹è³¬æˆ¶',\r\n          'æ¯æ—¥ 10000 æ¢æ¶ˆæ¯ / ç„¡é™ AI',\r\n          '300 å€‹ç¾¤çµ„ / 100 å€‹é—œéµè©é›†',\r\n          'API æ¥å£',\r\n          'åœ˜éšŠç®¡ç†',\r\n          'æ™ºèƒ½é˜²å°',\r\n          'å„ªå…ˆæ”¯æŒ'\r\n        ]\r\n      },\r\n      {\r\n        level: 'king',\r\n        name: 'ğŸ‘‘ æ¦®è€€ç‹è€…',\r\n        icon: 'ğŸ‘‘',\r\n        monthlyPrice: 599,\r\n        yearlyPrice: 5999,\r\n        quotas: MEMBERSHIP_CONFIG.king.quotas,\r\n        features: [\r\n          'ç„¡é™è³¬æˆ¶ / æ¶ˆæ¯ / AI',\r\n          'ç„¡é™ç¾¤çµ„ / é—œéµè©é›† / è¦å‰‡',\r\n          'æ‰€æœ‰åŠŸèƒ½å…¨éƒ¨è§£é–',\r\n          'è‡ªå®šç¾©å“ç‰Œ',\r\n          '1å°1 å°ˆå±¬é¡§å•',\r\n          'æ–°åŠŸèƒ½å…§æ¸¬é«”é©—'\r\n        ]\r\n      }\r\n    ];\r\n  }\r\n  \r\n  /**\r\n   * ç²å–å‡ç´šå»ºè­°ï¼ˆç‹è€…æ¦®è€€é¢¨æ ¼ï¼‰\r\n   */\r\n  getUpgradeSuggestion(): { nextLevel: MembershipLevel | null; benefits: string[]; price: number } | null {\r\n    const current = this.level();\r\n    \r\n    const upgradeMap: Record<MembershipLevel, MembershipLevel | null> = {\r\n      bronze: 'silver',\r\n      silver: 'gold',\r\n      gold: 'diamond',\r\n      diamond: 'star',\r\n      star: 'king',\r\n      king: null\r\n    };\r\n    \r\n    const nextLevel = upgradeMap[current];\r\n    if (!nextLevel) return null;\r\n    \r\n    const currentConfig = MEMBERSHIP_CONFIG[current];\r\n    const nextConfig = MEMBERSHIP_CONFIG[nextLevel];\r\n    \r\n    const benefits: string[] = [];\r\n    \r\n    // æ¯”è¼ƒé…é¡\r\n    const currAccounts = currentConfig.quotas.maxAccounts === -1 ? 'ç„¡é™' : currentConfig.quotas.maxAccounts;\r\n    const nextAccounts = nextConfig.quotas.maxAccounts === -1 ? 'ç„¡é™' : nextConfig.quotas.maxAccounts;\r\n    if (nextAccounts !== currAccounts) {\r\n      benefits.push(`è³¬æˆ¶æ•¸é‡ ${currAccounts} â†’ ${nextAccounts}`);\r\n    }\r\n    \r\n    const currMsg = currentConfig.quotas.dailyMessages === -1 ? 'ç„¡é™' : currentConfig.quotas.dailyMessages;\r\n    const nextMsg = nextConfig.quotas.dailyMessages === -1 ? 'ç„¡é™' : nextConfig.quotas.dailyMessages;\r\n    if (nextMsg !== currMsg) {\r\n      benefits.push(`æ¯æ—¥æ¶ˆæ¯ ${currMsg} â†’ ${nextMsg}`);\r\n    }\r\n    \r\n    if (nextConfig.quotas.dailyAiCalls === -1 && currentConfig.quotas.dailyAiCalls !== -1) {\r\n      benefits.push(`AI èª¿ç”¨ ${currentConfig.quotas.dailyAiCalls} â†’ ç„¡é™`);\r\n    }\r\n    \r\n    // æ¯”è¼ƒåŠŸèƒ½\r\n    if (nextConfig.features.adBroadcast && !currentConfig.features.adBroadcast) {\r\n      benefits.push('âš¡ è§£é–å»£å‘Šç™¼é€');\r\n    }\r\n    if (nextConfig.features.multiRole && !currentConfig.features.multiRole) {\r\n      benefits.push('ğŸ­ è§£é–å¤šè§’è‰²å”ä½œ');\r\n    }\r\n    if (nextConfig.features.aiSalesFunnel && !currentConfig.features.aiSalesFunnel) {\r\n      benefits.push('ğŸ¯ è§£é– AI éŠ·å”®æ¼æ–—');\r\n    }\r\n    if (nextConfig.features.smartAntiBlock && !currentConfig.features.smartAntiBlock) {\r\n      benefits.push('ğŸ›¡ï¸ è§£é–æ™ºèƒ½é˜²å°');\r\n    }\r\n    if (nextConfig.features.apiAccess && !currentConfig.features.apiAccess) {\r\n      benefits.push('ğŸ”Œ è§£é– API æ¥å£');\r\n    }\r\n    \r\n    return {\r\n      nextLevel,\r\n      benefits,\r\n      price: nextConfig.monthlyPrice\r\n    };\r\n  }\r\n  \r\n  // ============ è¼”åŠ©æ–¹æ³• ============\r\n  \r\n  private saveMembership(membership: MembershipInfo): void {\r\n    this._membership.set(membership);\r\n    localStorage.setItem(MembershipService.STORAGE_KEY, JSON.stringify(membership));\r\n  }\r\n  \r\n  private getMachineId(): string {\r\n    let machineId = localStorage.getItem('tg-matrix-machine-id');\r\n    if (!machineId) {\r\n      machineId = 'mid-' + this.generateId();\r\n      localStorage.setItem('tg-matrix-machine-id', machineId);\r\n    }\r\n    return machineId;\r\n  }\r\n  \r\n  private generateId(): string {\r\n    return 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\r\n      const r = Math.random() * 16 | 0;\r\n      const v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n      return v.toString(16);\r\n    });\r\n  }\r\n  \r\n  private generateInviteCode(): string {\r\n    return this.generateId().substring(0, 8).toUpperCase();\r\n  }\r\n  \r\n  private getDefaultUsage(): UsageStats {\r\n    return {\r\n      todayMessages: 0,\r\n      todayAiCalls: 0,\r\n      todayDate: new Date().toDateString(),\r\n      totalMessages: 0,\r\n      totalAiCalls: 0,\r\n      totalLeads: 0\r\n    };\r\n  }\r\n  \r\n  private checkAndResetDailyUsage(membership: MembershipInfo): void {\r\n    const today = new Date().toDateString();\r\n    if (membership.usage.todayDate !== today) {\r\n      membership.usage.todayMessages = 0;\r\n      membership.usage.todayAiCalls = 0;\r\n      membership.usage.todayDate = today;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ç²å–æœƒå“¡ç‹€æ…‹é¡¯ç¤ºæ–‡å­—\r\n   */\r\n  getStatusText(): string {\r\n    const m = this._membership();\r\n    if (!m) return 'æœªçŸ¥';\r\n    \r\n    if (m.level === 'bronze') {\r\n      return `${m.levelIcon} ${m.levelName}`;\r\n    }\r\n    \r\n    if (!this.isActive()) {\r\n      return `${m.levelIcon} ${m.levelName} (å·²éæœŸ)`;\r\n    }\r\n    \r\n    const days = this.daysRemaining();\r\n    if (days <= 7) {\r\n      return `${m.levelIcon} ${m.levelName} (${days}å¤©å¾Œåˆ°æœŸ)`;\r\n    }\r\n    \r\n    return `${m.levelIcon} ${m.levelName}`;\r\n  }\r\n  \r\n  /**\r\n   * ç²å–æ®µä½é¡¯ç¤ºæ–‡å­—ï¼ˆç‹è€…æ¦®è€€é¢¨æ ¼ï¼‰\r\n   */\r\n  getRankDisplay(): { name: string; icon: string; rank: number; color: string } {\r\n    const level = this.level();\r\n    const config = MEMBERSHIP_CONFIG[level];\r\n    \r\n    const colorMap: Record<MembershipLevel, string> = {\r\n      bronze: '#CD7F32',\r\n      silver: '#C0C0C0',\r\n      gold: '#FFD700',\r\n      diamond: '#B9F2FF',\r\n      star: '#9B59B6',\r\n      king: '#FF6B6B'\r\n    };\r\n    \r\n    return {\r\n      name: config.name,\r\n      icon: config.icon,\r\n      rank: config.rank,\r\n      color: colorMap[level]\r\n    };\r\n  }\r\n  \r\n  /**\r\n   * ç²å–ä½¿ç”¨é‡ç™¾åˆ†æ¯”\r\n   */\r\n  getUsagePercentage(): { messages: number; ai: number } {\r\n    const quotas = this.quotas();\r\n    const usage = this.usage();\r\n    \r\n    return {\r\n      messages: quotas.dailyMessages === -1 ? 0 : Math.min(100, (usage.todayMessages / quotas.dailyMessages) * 100),\r\n      ai: quotas.dailyAiCalls === -1 ? 0 : Math.min(100, (usage.todayAiCalls / quotas.dailyAiCalls) * 100)\r\n    };\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
