import{a as oe}from"./chunk-6DNRJUNI.js";import{t as ie,y as ne}from"./chunk-BDXALK3H.js";import"./chunk-E5JAB72H.js";import{a as te}from"./chunk-A22KDSKM.js";import"./chunk-LAYKK35A.js";import"./chunk-M2VKGXCG.js";import{b as ee}from"./chunk-5UHDXNYI.js";import{a as Q,b as X}from"./chunk-7LTHB4NI.js";import"./chunk-SIDS6FGB.js";import{a as Z}from"./chunk-5HHK7KPZ.js";import{b as U,c as j,f as H,k as q,l as J,m as W,t as K}from"./chunk-FZJM4IRN.js";import{b as Y}from"./chunk-CIOQN4KY.js";import"./chunk-B2KG2WNU.js";import"./chunk-TMNXXRHZ.js";import"./chunk-K5SU4RX2.js";import{Aa as l,Ab as F,Bb as n,Cb as f,Db as _,Eb as O,Na as L,R as S,W as g,X as C,Y as N,Z as R,Zb as E,cb as v,db as b,fb as G,ga as h,gb as y,hb as k,ib as D,jb as a,kb as r,lb as I,mb as u,nb as d,ob as z,pb as w,qb as M,rb as p,sb as P,tb as c,uc as B,yb as V,zb as T}from"./chunk-PDD6YQ47.js";var de=(o,t)=>t.id,ce=(o,t)=>t.primary_id;function ue(o,t){o&1&&(N(),u(0,"svg",10),z(1,"circle",11)(2,"path",12),d(),R(),u(3,"span"),n(4,"\u8A55\u5206\u4E2D..."),d())}function me(o,t){o&1&&(u(0,"span"),n(1,"\u{1F504} \u6279\u91CF\u8A55\u5206"),d())}function pe(o,t){if(o&1&&(u(0,"div",27)(1,"div",29),n(2),d(),u(3,"div",30)(4,"div",31),n(5),d(),u(6,"div",32)(7,"span",33),n(8),d(),u(9,"span",34),n(10),d()()(),u(11,"div",35)(12,"div"),n(13),d(),u(14,"div"),n(15),d()()()),o&2){let e=t.$implicit,i=c(2);l(),F(i.getScoreBgClass(e.intent_level)),l(),_(" ",e.lead_score," "),l(3),O("#",e.id," ",e.telegram_id||""),l(2),F(i.getIntentBadgeClass(e.intent_level)),l(),_(" ",e.intent_level," "),l(2),_(" ",e.value_level," "),l(3),_("\u610F\u5411 ",e.intent_score),l(2),_("\u8CEA\u91CF ",e.quality_score)}}function xe(o,t){if(o&1&&(u(0,"div",13)(1,"div",14)(2,"div",15),n(3),d(),u(4,"div",16),n(5,"\u{1F525} Hot"),d()(),u(6,"div",17)(7,"div",18),n(8),d(),u(9,"div",19),n(10,"\u{1F321}\uFE0F Warm"),d()(),u(11,"div",20)(12,"div",21),n(13),d(),u(14,"div",22),n(15,"\u{1F610} Neutral"),d()(),u(16,"div",23)(17,"div",24),n(18),d(),u(19,"div",25),n(20,"\u2744\uFE0F Cold"),d()()(),u(21,"div",26),y(22,pe,16,11,"div",27,de),d(),u(24,"div",28),n(25),d()),o&2){let e=c();l(3),f(e.hotCount()),l(5),f(e.warmCount()),l(5),f(e.neutralCount()),l(5),f(e.coldCount()),l(4),k(e.scoreResults().slice(0,20)),l(3),_(" \u5DF2\u8A55\u5206 ",e.scoreResults().length," \u689D\u7DDA\u7D22 ")}}function _e(o,t){o&1&&(u(0,"div",5)(1,"p",36),n(2,"\u{1F4CA}"),d(),u(3,"p"),n(4,"\u9EDE\u64CA\u300C\u6279\u91CF\u8A55\u5206\u300D\u5C0D\u672A\u8A55\u5206\u7DDA\u7D22\u81EA\u52D5\u6253\u5206"),d(),u(5,"p",37),n(6,"\u5C07\u57FA\u65BC\u5B8C\u6574\u5EA6\u3001\u6D3B\u8E8D\u5EA6\u3001\u610F\u5411\u4FE1\u865F\u7B49 5 \u500B\u7DAD\u5EA6\u8A55\u5206"),d()())}function ge(o,t){o&1&&(N(),u(0,"svg",10),z(1,"circle",11)(2,"path",12),d(),R(),u(3,"span"),n(4,"\u6383\u63CF\u4E2D..."),d())}function Ce(o,t){o&1&&(u(0,"span"),n(1,"\u{1F50E} \u6383\u63CF\u91CD\u8907"),d())}function ve(o,t){if(o&1&&(u(0,"div",7)(1,"div",38)(2,"div",39),n(3),d(),u(4,"div",40),n(5,"\u7E3D\u806F\u7E6B\u4EBA"),d()(),u(6,"div",41)(7,"div",42),n(8),d(),u(9,"div",43),n(10,"\u91CD\u8907\u7D44"),d()(),u(11,"div",44)(12,"div",45),n(13),d(),u(14,"div",16),n(15,"\u9810\u4F30\u91CD\u8907"),d()()()),o&2){let e=t;l(3),f(e.total_contacts),l(5),f(e.duplicate_username_groups),l(5),f(e.estimated_duplicates)}}function be(o,t){if(o&1&&(u(0,"span",54),n(1),d(),n(2)),o&2){let e=t.$implicit,i=t.$index,s=t.$count;l(),_("#",e),l(),_("",i===s-1?"":", "," ")}}function fe(o,t){if(o&1&&n(0),o&2){let e=c(2).$implicit;_(" \u7528\u6236\u540D: ",e.details.username," ")}}function he(o,t){if(o&1&&n(0),o&2){let e=c(2).$implicit;_(" \u96FB\u8A71: ",e.details.phone," ")}}function Ee(o,t){if(o&1&&n(0),o&2){let e=c(2).$implicit;_(" (",e.details.count," \u689D\u8A18\u9304) ")}}function Se(o,t){if(o&1&&(u(0,"div",53),v(1,fe,1,1),v(2,he,1,1),v(3,Ee,1,1),d()),o&2){let e=c().$implicit;l(),b(e.details.username?1:-1),l(),b(e.details.phone?2:-1),l(),b(e.details.count?3:-1)}}function De(o,t){if(o&1){let e=w();u(0,"div",46)(1,"div",47)(2,"div",48)(3,"span",49),n(4),d(),u(5,"span",50),n(6),d()(),u(7,"button",51),P("click",function(){let s=g(e).$implicit,m=c(2);return C(m.mergeGroup(s))}),n(8," \u5408\u4F75 "),d()(),u(9,"div",52),n(10),y(11,be,3,2,null,null,G),d(),v(13,Se,4,3,"div",53),d()}if(o&2){let e=t.$implicit,i=c(2);l(3),F(e.match_type==="exact_phone"?"bg-purple-500/20 text-purple-400":e.match_type==="exact_telegram_id"?"bg-blue-500/20 text-blue-400":"bg-amber-500/20 text-amber-400"),l(),_(" ",e.match_type==="exact_phone"?"\u{1F4DE} \u96FB\u8A71\u91CD\u8907":e.match_type==="exact_telegram_id"?"\u{1F194} ID\u91CD\u8907":"\u{1F464} \u7528\u6236\u540D\u91CD\u8907"," "),l(2),_(" \u4FE1\u5FC3\u5EA6 ",(e.confidence*100).toFixed(0),"% "),l(),M("disabled",i.isMerging()),l(3),_(" \u4FDD\u7559 #",e.primary_id,"\uFF0C\u5408\u4F75 "),l(),k(e.duplicate_ids),l(2),b(e.details?13:-1)}}function we(o,t){if(o&1&&(u(0,"div",8),y(1,De,14,7,"div",46,ce),d()),o&2){let e=c();l(),k(e.duplicateGroups())}}function ye(o,t){o&1&&(u(0,"div",9)(1,"p"),n(2,"\u2705 \u672A\u767C\u73FE\u91CD\u8907\u7DDA\u7D22"),d()())}function ke(o,t){o&1&&(u(0,"div",9)(1,"p",36),n(2,"\u{1F50D}"),d(),u(3,"p"),n(4,"\u9EDE\u64CA\u300C\u6383\u63CF\u91CD\u8907\u300D\u6AA2\u67E5\u7DDA\u7D22\u6578\u64DA\u5EAB"),d()())}var $=class o{constructor(){this.bizApi=S(oe);this.isScoring=h(!1);this.scoreResults=h([]);this.isScanning=h(!1);this.isMerging=h(!1);this.duplicateGroups=this.bizApi.duplicateGroups;this.dedupStats=this.bizApi.dedupStats;this.hotCount=E(()=>this.scoreResults().filter(t=>t.intent_level==="hot").length);this.warmCount=E(()=>this.scoreResults().filter(t=>t.intent_level==="warm").length);this.neutralCount=E(()=>this.scoreResults().filter(t=>t.intent_level==="neutral").length);this.coldCount=E(()=>this.scoreResults().filter(t=>t.intent_level==="cold").length)}ngOnInit(){}async runBatchScoring(){this.isScoring.set(!0);try{let t=await this.bizApi.scoreLeads();this.scoreResults.set(t)}finally{this.isScoring.set(!1)}}async scanDuplicates(){this.isScanning.set(!0);try{await this.bizApi.scanDuplicates(50)}finally{this.isScanning.set(!1)}}async mergeGroup(t){this.isMerging.set(!0);try{await this.bizApi.mergeDuplicates(t.primary_id,t.duplicate_ids)}finally{this.isMerging.set(!1)}}getScoreBgClass(t){switch(t){case"hot":return"bg-red-500/20 text-red-400";case"warm":return"bg-orange-500/20 text-orange-400";case"neutral":return"bg-blue-500/20 text-blue-400";default:return"bg-slate-500/20 text-slate-400"}}getIntentBadgeClass(t){switch(t){case"hot":return"bg-red-500/20 text-red-400";case"warm":return"bg-orange-500/20 text-orange-400";case"neutral":return"bg-blue-500/20 text-blue-400";default:return"bg-slate-500/20 text-slate-400"}}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=L({type:o,selectors:[["app-lead-scoring-panel"]],decls:25,vars:7,consts:[[1,"space-y-4"],[1,"bg-slate-800/50","rounded-xl","border","border-slate-700/50","p-4"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-white","flex","items-center","gap-2"],[1,"px-4","py-1.5","bg-gradient-to-r","from-cyan-500","to-blue-500","hover:from-cyan-400","hover:to-blue-400","text-white","text-sm","rounded-lg","transition-all","disabled:opacity-50","flex","items-center","gap-2",3,"click","disabled"],[1,"text-center","py-8","text-slate-500"],[1,"px-4","py-1.5","bg-gradient-to-r","from-amber-500","to-orange-500","hover:from-amber-400","hover:to-orange-400","text-white","text-sm","rounded-lg","transition-all","disabled:opacity-50","flex","items-center","gap-2",3,"click","disabled"],[1,"grid","grid-cols-3","gap-3","mb-4"],[1,"space-y-3","max-h-60","overflow-y-auto"],[1,"text-center","py-6","text-slate-500"],["viewBox","0 0 24 24","fill","none",1,"w-4","h-4","animate-spin"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z",1,"opacity-75"],[1,"grid","grid-cols-4","gap-3","mb-4"],[1,"p-3","bg-red-500/10","border","border-red-500/20","rounded-xl","text-center"],[1,"text-2xl","font-bold","text-red-400"],[1,"text-xs","text-red-400/70","mt-1"],[1,"p-3","bg-orange-500/10","border","border-orange-500/20","rounded-xl","text-center"],[1,"text-2xl","font-bold","text-orange-400"],[1,"text-xs","text-orange-400/70","mt-1"],[1,"p-3","bg-blue-500/10","border","border-blue-500/20","rounded-xl","text-center"],[1,"text-2xl","font-bold","text-blue-400"],[1,"text-xs","text-blue-400/70","mt-1"],[1,"p-3","bg-slate-500/10","border","border-slate-500/20","rounded-xl","text-center"],[1,"text-2xl","font-bold","text-slate-400"],[1,"text-xs","text-slate-400/70","mt-1"],[1,"space-y-2","max-h-60","overflow-y-auto"],[1,"flex","items-center","gap-3","p-2","bg-slate-700/30","rounded-lg","hover:bg-slate-700/50","transition-colors"],[1,"text-xs","text-slate-500","mt-2","text-center"],[1,"w-10","h-10","rounded-lg","flex","items-center","justify-center","text-lg","font-bold"],[1,"flex-1","min-w-0"],[1,"text-sm","text-white"],[1,"flex","items-center","gap-2","mt-0.5"],[1,"text-xs","px-1.5","py-0.5","rounded"],[1,"text-xs","px-1.5","py-0.5","rounded","bg-slate-600/50","text-slate-300"],[1,"text-right","text-xs","text-slate-400"],[1,"text-lg","mb-2"],[1,"text-xs","mt-1"],[1,"p-3","bg-slate-700/30","rounded-lg","text-center"],[1,"text-xl","font-bold","text-white"],[1,"text-xs","text-slate-400","mt-1"],[1,"p-3","bg-amber-500/10","border","border-amber-500/20","rounded-lg","text-center"],[1,"text-xl","font-bold","text-amber-400"],[1,"text-xs","text-amber-400/70","mt-1"],[1,"p-3","bg-red-500/10","border","border-red-500/20","rounded-lg","text-center"],[1,"text-xl","font-bold","text-red-400"],[1,"p-3","bg-slate-700/30","rounded-lg","border","border-slate-600/30"],[1,"flex","items-center","justify-between","mb-2"],[1,"flex","items-center","gap-2"],[1,"text-xs","px-2","py-0.5","rounded"],[1,"text-xs","text-slate-400"],[1,"px-3","py-1","text-xs","bg-amber-500/20","hover:bg-amber-500/30","text-amber-400","rounded-lg","transition-all","disabled:opacity-50",3,"click","disabled"],[1,"text-xs","text-slate-300"],[1,"text-xs","text-slate-500","mt-1"],[1,"text-amber-400"]],template:function(e,i){if(e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span"),n(5,"\u2B50"),d(),n(6," \u7DDA\u7D22\u667A\u80FD\u8A55\u5206 "),d(),u(7,"button",4),P("click",function(){return i.runBatchScoring()}),v(8,ue,5,0)(9,me,2,0,"span"),d()(),v(10,xe,26,5)(11,_e,7,0,"div",5),d(),u(12,"div",1)(13,"div",2)(14,"h3",3)(15,"span"),n(16,"\u{1F50D}"),d(),n(17," \u7DDA\u7D22\u53BB\u91CD "),d(),u(18,"button",6),P("click",function(){return i.scanDuplicates()}),v(19,ge,5,0)(20,Ce,2,0,"span"),d()(),v(21,ve,16,3,"div",7),v(22,we,3,0,"div",8)(23,ye,3,0,"div",9)(24,ke,5,0,"div",9),d()()),e&2){let s;l(7),M("disabled",i.isScoring()),l(),b(i.isScoring()?8:9),l(2),b(i.scoreResults().length>0?10:11),l(8),M("disabled",i.isScanning()),l(),b(i.isScanning()?19:20),l(2),b((s=i.dedupStats())?21:-1,s),l(),b(i.duplicateGroups().length>0?22:i.dedupStats()?23:24)}},dependencies:[B],styles:["[_nghost-%COMP%]{display:block}"]})}};var ae=(o,t)=>t.id;function Fe(o,t){o&1&&(a(0,"div",8),I(1,"app-lead-scoring-panel"),r())}function Te(o,t){o&1&&n(0," \u5DF2\u5168\u9078 ")}function Ie(o,t){o&1&&n(0," \u90E8\u5206\u9078\u4E2D ")}function Ve(o,t){o&1&&n(0," \u5168\u9078 ")}function Ae(o,t){if(o&1&&(a(0,"span",37),n(1),r()),o&2){let e=c();l(),_(" \u5DF2\u9078 ",e.selectedCount()," \u500B ")}}function Le(o,t){if(o&1&&(a(0,"span",12),n(1),r()),o&2){let e=c();l(),_(" \u5171 ",e.filteredContacts().length," \u500B\u5BA2\u6236 ")}}function Me(o,t){if(o&1){let e=w();a(0,"div",32)(1,"button",44),p("click",function(){g(e);let s=c();return C(s.batchSend())}),n(2," \u{1F4E8} \u7FA4\u767C "),r(),a(3,"button",45),p("click",function(){g(e);let s=c();return C(s.batchInvite())}),n(4," \u{1F465} \u62C9\u7FA4 "),r(),a(5,"button",46),p("click",function(){g(e);let s=c();return C(s.batchDelete())}),n(6," \u{1F5D1}\uFE0F \u522A\u9664 "),r()()}if(o&2){let e=c();l(5),D("disabled",e.isDeleting())}}function Pe(o,t){if(o&1){let e=w();a(0,"div",39)(1,"span",47),n(2),r(),I(3,"div",38),a(4,"button",48),p("click",function(){g(e);let s=c();return C(s.batchSend())}),a(5,"span"),n(6,"\u{1F4E8}"),r(),n(7," \u7FA4\u767C\u6D88\u606F "),r(),a(8,"button",49),p("click",function(){g(e);let s=c();return C(s.batchInvite())}),a(9,"span"),n(10,"\u{1F465}"),r(),n(11," \u6279\u91CF\u62C9\u7FA4 "),r(),a(12,"button",50),p("click",function(){g(e);let s=c();return C(s.startMultiRoleCollaboration())}),a(13,"span"),n(14,"\u{1F916}"),r(),n(15," AI \u591A\u89D2\u8272\u71DF\u92B7 "),r(),a(16,"button",51),p("click",function(){g(e);let s=c();return C(s.batchDelete())}),a(17,"span"),n(18),r(),n(19),r(),a(20,"button",52),p("click",function(){g(e);let s=c();return C(s.clearSelection())}),n(21," \u2716 \u53D6\u6D88\u9078\u64C7 "),r()()}if(o&2){let e=c();l(2),_(" \u{1F446} \u5DF2\u9078\u64C7 ",e.selectedCount()," \u500B\u5BA2\u6236 - \u8ACB\u9078\u64C7\u6279\u91CF\u64CD\u4F5C "),l(14),D("disabled",e.isDeleting()),l(2),f(e.isDeleting()?"\u23F3":"\u{1F5D1}\uFE0F"),l(),_(" ",e.isDeleting()?"\u522A\u9664\u4E2D...":"\u522A\u9664"," ")}}function Be(o,t){if(o&1){let e=w();a(0,"div",41)(1,"span",53),n(2,"\u{1F4ED}"),r(),a(3,"p",54),n(4,"\u66AB\u7121\u5BA2\u6236\u6578\u64DA"),r(),a(5,"p",55),n(6,"\u8ACB\u5148\u5230\u300C\u8CC7\u6E90\u4E2D\u5FC3\u300D\u6DFB\u52A0\u5BA2\u6236\uFF0C\u6216\u5F9E\u76E3\u63A7\u7FA4\u7D44\u81EA\u52D5\u6536\u96C6"),r(),a(7,"button",56),p("click",function(){g(e);let s=c();return C(s.goToResourceCenter())}),n(8," \u524D\u5F80\u8CC7\u6E90\u4E2D\u5FC3 \u2192 "),r()()}}function $e(o,t){if(o&1&&(a(0,"p",65),n(1),r()),o&2){let e=c().$implicit;l(),_("@",e.username)}}function Ne(o,t){o&1&&(a(0,"div",70),n(1," \u2B06\uFE0F \u8ACB\u4F7F\u7528\u4E0A\u65B9\u6279\u91CF\u64CD\u4F5C\u6B04 "),r())}function Re(o,t){if(o&1){let e=w();a(0,"button",71),p("click",function(s){g(e);let m=c().$implicit;return c(2).sendMessage(m),C(s.stopPropagation())}),n(1," \u{1F4AC} \u767C\u9001 "),r(),a(2,"button",72),p("click",function(s){g(e);let m=c().$implicit;return c(2).inviteToGroup(m),C(s.stopPropagation())}),n(3," \u{1F465} \u62C9\u7FA4 "),r(),a(4,"button",73),p("click",function(s){g(e);let m=c().$implicit;return c(2).deleteContact(m),C(s.stopPropagation())}),n(5," \u{1F5D1}\uFE0F "),r()}}function ze(o,t){if(o&1){let e=w();a(0,"div",58),p("click",function(){let s=g(e).$implicit,m=c(2);return C(m.toggleSelect(s.id))}),a(1,"div",59)(2,"input",60),p("change",function(){let s=g(e).$implicit,m=c(2);return C(m.toggleSelect(s.id))})("click",function(s){return g(e),C(s.stopPropagation())}),r()(),a(3,"div",61)(4,"div",62),n(5),r(),a(6,"div",63)(7,"p",64),n(8),r(),v(9,$e,2,1,"p",65),r()(),a(10,"div",66)(11,"span",67),n(12),r(),a(13,"span",68),n(14),r()(),a(15,"div",69),v(16,Ne,2,0,"div",70)(17,Re,6,0),r()()}if(o&2){let e=t.$implicit,i=c(2);T("ring-2",i.isSelected(e.id))("ring-cyan-500",i.isSelected(e.id)),l(2),D("checked",i.isSelected(e.id)),l(3),_(" ",i.getInitial(e)," "),l(3),f(e.display_name||e.username||e.telegram_id),l(),b(e.username?9:-1),l(3),_(" ",e.source_name||e.source_type||"\u672A\u77E5\u4F86\u6E90"," "),l(),F(i.getStatusClass(e.status)),l(),_(" ",i.getStatusLabel(e.status)," "),l(2),b(i.selectedIds().size>1?16:17)}}function Ge(o,t){if(o&1&&(a(0,"div",42),y(1,ze,18,13,"div",57,ae),r()),o&2){let e=c();l(),k(e.filteredContacts())}}function Oe(o,t){if(o&1&&(a(0,"p",82),n(1),r()),o&2){let e=c().$implicit;l(),_("@",e.username)}}function Ue(o,t){o&1&&(a(0,"div",85),n(1," \u2B06\uFE0F \u4F7F\u7528\u6279\u91CF\u64CD\u4F5C "),r())}function je(o,t){if(o&1){let e=w();a(0,"div",32)(1,"button",86),p("click",function(){g(e);let s=c().$implicit,m=c(2);return C(m.sendMessage(s))}),n(2," \u{1F4AC} "),r(),a(3,"button",87),p("click",function(){g(e);let s=c().$implicit,m=c(2);return C(m.inviteToGroup(s))}),n(4," \u{1F465} "),r(),a(5,"button",88),p("click",function(){g(e);let s=c().$implicit,m=c(2);return C(m.viewContact(s))}),n(6," \u{1F441}\uFE0F "),r(),a(7,"button",89),p("click",function(){g(e);let s=c().$implicit,m=c(2);return C(m.deleteContact(s))}),n(8," \u{1F5D1}\uFE0F "),r()()}}function He(o,t){if(o&1){let e=w();a(0,"tr",78)(1,"td",79)(2,"input",76),p("change",function(){let s=g(e).$implicit,m=c(2);return C(m.toggleSelect(s.id))}),r()(),a(3,"td",79)(4,"div",2)(5,"div",80),n(6),r(),a(7,"div")(8,"p",81),n(9),r(),v(10,Oe,2,1,"p",82),r()()(),a(11,"td",83)(12,"span",84),n(13),r()(),a(14,"td",79)(15,"span",68),n(16),r()(),a(17,"td",79),v(18,Ue,2,0,"div",85)(19,je,9,0,"div",32),r()()}if(o&2){let e=t.$implicit,i=c(2);l(2),D("checked",i.isSelected(e.id)),l(4),_(" ",i.getInitial(e)," "),l(3),f(e.display_name||e.username||e.telegram_id),l(),b(e.username?10:-1),l(3),f(e.source_name||e.source_type||"-"),l(2),F(i.getStatusClass(e.status)),l(),_(" ",i.getStatusLabel(e.status)," "),l(2),b(i.selectedIds().size>1?18:19)}}function qe(o,t){if(o&1){let e=w();a(0,"table",43)(1,"thead")(2,"tr",74)(3,"th",75)(4,"input",76),p("change",function(){g(e);let s=c();return C(s.toggleSelectAll())}),r()(),a(5,"th",77),n(6,"\u5BA2\u6236"),r(),a(7,"th",77),n(8,"\u4F86\u6E90"),r(),a(9,"th",77),n(10,"\u72C0\u614B"),r(),a(11,"th",77),n(12,"\u64CD\u4F5C"),r()()(),a(13,"tbody"),y(14,He,20,9,"tr",78,ae),r()()}if(o&2){let e=c();l(4),D("checked",e.isAllSelected()),l(10),k(e.filteredContacts())}}var re=class o{constructor(){this.i18n=S(Y);this.nav=S(ee);this.ipc=S(Z);this.toast=S(X);this.dialog=S(ne);this.exportService=S(ie);this.membershipService=S(Q);this.contactsService=S(te);this.searchTerm=h("");this.statusFilter=h("");this.selectedIds=h(new Set);this.viewMode=h("card");this.showToolsPanel=h(!1);this.isDeleting=h(!1);this.isSending=h(!1);this.isInviting=h(!1);this.sendProgress=h({sent:0,total:0,success:0,failed:0});this.inviteProgress=h({invited:0,total:0,success:0,failed:0,skipped:0});this.contacts=E(()=>this.contactsService.contacts());this.filteredContacts=E(()=>{let t=this.contacts(),e=this.searchTerm().toLowerCase(),i=this.statusFilter();return t=t.filter(s=>s.contact_type==="user"),e&&(t=t.filter(s=>s.display_name?.toLowerCase().includes(e)||s.username?.toLowerCase().includes(e)||s.telegram_id?.toString().includes(e)||s.source_name?.toLowerCase().includes(e))),i&&(t=t.filter(s=>s.status===i)),t});this.pendingCount=E(()=>this.contacts().filter(t=>t.contact_type==="user"&&t.status==="new").length);this.sentCount=E(()=>this.contacts().filter(t=>t.contact_type==="user"&&t.status==="contacted").length);this.repliedCount=E(()=>this.contacts().filter(t=>t.contact_type==="user"&&t.status==="replied").length);this.failedCount=E(()=>this.contacts().filter(t=>t.contact_type==="user"&&t.status==="failed").length);this.selectedCount=E(()=>this.selectedIds().size);this.ipcCleanup=[]}ngOnInit(){this.contactsService.loadContacts(),this.setupIpcListeners()}ngOnDestroy(){this.ipcCleanup.forEach(t=>t())}setupIpcListeners(){let t=this.ipc.on("message-sent",x=>{x.success?(this.toast.success("\u6D88\u606F\u767C\u9001\u6210\u529F"),x.telegramId&&this.contactsService.updateContactStatus(x.telegramId,"contacted")):x.telegramId&&this.contactsService.updateContactStatus(x.telegramId,"failed")}),e=this.ipc.on("private-message-received",x=>{x.telegramId&&(this.contactsService.updateContactStatus(x.telegramId,"replied"),this.toast.info("\u6536\u5230\u5BA2\u6236\u56DE\u8986"))}),i=this.ipc.on("batch-send:progress",x=>{this.sendProgress.set(x),console.log(`\u767C\u9001\u9032\u5EA6: ${x.sent}/${x.total}, \u6210\u529F: ${x.success}, \u5931\u6557: ${x.failed}`)}),s=this.ipc.on("batch-send:complete",x=>{this.isSending.set(!1),this.sendProgress.set({sent:0,total:0,success:0,failed:0}),x.failed>0?this.toast.warning(`\u6279\u91CF\u767C\u9001\u5B8C\u6210: \u6210\u529F ${x.success}\uFF0C\u5931\u6557 ${x.failed}${x.failureSummary?` (${x.failureSummary})`:""}`):this.toast.success(`\u6279\u91CF\u767C\u9001\u5B8C\u6210: \u6210\u529F ${x.success} \u689D`),this.contactsService.loadContacts()}),m=this.ipc.on("batch-invite:progress",x=>{this.inviteProgress.set(x),console.log(`\u62C9\u7FA4\u9032\u5EA6: ${x.invited}/${x.total}`)}),A=this.ipc.on("batch-invite:complete",x=>{this.isInviting.set(!1),this.inviteProgress.set({invited:0,total:0,success:0,failed:0,skipped:0}),this.toast.success(`\u6279\u91CF\u62C9\u7FA4\u5B8C\u6210: \u6210\u529F ${x.success}\uFF0C\u8DF3\u904E ${x.skipped}\uFF0C\u5931\u6557 ${x.failed}`),this.contactsService.loadContacts()});this.ipcCleanup.push(t,e,i,s,m,A)}refresh(){this.contactsService.loadContacts(),this.toast.info("\u6B63\u5728\u5237\u65B0...")}goToResourceCenter(){this.nav.navigateTo("resource-center")}isSelected(t){return this.selectedIds().has(t)}toggleSelect(t){this.selectedIds.update(e=>{let i=new Set(e);return i.has(t)?i.delete(t):i.add(t),i})}isAllSelected(){let t=this.filteredContacts();return t.length>0&&t.every(e=>this.selectedIds().has(e.id))}isPartialSelected(){let t=this.filteredContacts(),e=this.selectedIds().size;return e>0&&e<t.length&&!this.isAllSelected()}toggleSelectAll(){let t=this.filteredContacts();this.isAllSelected()?this.selectedIds.set(new Set):this.selectedIds.set(new Set(t.map(e=>e.id)))}selectAll(){let t=this.filteredContacts();this.selectedIds.set(new Set(t.map(e=>e.id))),this.toast.info(`\u5DF2\u5168\u9078 ${t.length} \u500B\u5BA2\u6236`)}invertSelection(){let t=this.filteredContacts(),e=this.selectedIds(),i=new Set;t.forEach(s=>{e.has(s.id)||i.add(s.id)}),this.selectedIds.set(i),this.toast.info(`\u5DF2\u9078\u64C7 ${i.size} \u500B\u5BA2\u6236`)}batchSend(){let t=this.contacts().filter(i=>this.selectedIds().has(i.id));if(t.length===0){this.toast.warning("\u8ACB\u5148\u9078\u64C7\u5BA2\u6236");return}let e=this.convertToSendTargets(t);if(e.length===0){this.toast.error("\u9078\u4E2D\u7684\u5BA2\u6236\u6C92\u6709\u6709\u6548\u7684 Telegram ID");return}this.dialog.openBatchSend(e)}sendMessage(t){let e=this.convertToSendTargets([t]);if(e.length===0){this.toast.error("\u6B64\u5BA2\u6236\u6C92\u6709\u6709\u6548\u7684 Telegram ID");return}this.dialog.openBatchSend(e)}convertToSendTargets(t){return t.filter(e=>e.telegram_id).map(e=>({telegramId:e.telegram_id,username:e.username||"",firstName:e.first_name||e.display_name?.split(" ")[0]||"",lastName:e.last_name||e.display_name?.split(" ")[1]||"",displayName:e.display_name||e.username||e.telegram_id,groupName:e.source_name||"",source:e.source_type||""}))}batchInvite(){let t=this.contacts().filter(i=>this.selectedIds().has(i.id));if(t.length===0){this.toast.warning("\u8ACB\u5148\u9078\u64C7\u5BA2\u6236");return}let e=t.map(i=>({telegramId:i.telegram_id||String(i.id),username:i.username||"",firstName:i.first_name||i.display_name?.split(" ")[0]||"",lastName:i.last_name||i.display_name?.split(" ")[1]||""}));this.dialog.openBatchInvite(e)}inviteToGroup(t){let e={telegramId:t.telegram_id||String(t.id),username:t.username||"",firstName:t.first_name||t.display_name?.split(" ")[0]||"",lastName:t.last_name||t.display_name?.split(" ")[1]||""};this.dialog.openBatchInvite([e])}batchDelete(){let t=this.selectedIds().size;if(t===0){this.toast.warning("\u8ACB\u5148\u9078\u64C7\u5BA2\u6236");return}if(this.isDeleting()){this.toast.warning("\u6B63\u5728\u522A\u9664\u4E2D\uFF0C\u8ACB\u7A0D\u5019...");return}if(!confirm(`\u78BA\u5B9A\u8981\u522A\u9664\u9078\u4E2D\u7684 ${t} \u500B\u5BA2\u6236\u55CE\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u5FA9\u3002`))return;let i=this.contacts().filter(m=>this.selectedIds().has(m.id)).map(m=>m.telegram_id).filter(Boolean);if(i.length===0){this.toast.error("\u9078\u4E2D\u7684\u5BA2\u6236\u6C92\u6709\u6709\u6548\u7684 Telegram ID");return}this.isDeleting.set(!0),this.contactsService.deleteContacts(i),this.toast.info(`\u6B63\u5728\u522A\u9664 ${i.length} \u500B\u5BA2\u6236...`);let s=this.ipc.once("unified-contacts:delete-result",m=>{this.isDeleting.set(!1),m.success?(this.toast.success(`\u5DF2\u522A\u9664 ${m.deleted||m.leadsDeleted||i.length} \u500B\u5BA2\u6236`),this.clearSelection()):this.toast.error(`\u522A\u9664\u5931\u6557: ${m.error||"\u672A\u77E5\u932F\u8AA4"}`)});setTimeout(()=>{this.isDeleting()&&(this.isDeleting.set(!1),this.toast.warning("\u522A\u9664\u64CD\u4F5C\u8D85\u6642\uFF0C\u8ACB\u5237\u65B0\u9801\u9762\u67E5\u770B\u7D50\u679C"))},3e4)}deleteContact(t){if(!confirm(`\u78BA\u5B9A\u8981\u522A\u9664\u5BA2\u6236\u300C${t.display_name||t.username||t.telegram_id}\u300D\u55CE\uFF1F`))return;if(!t.telegram_id){this.toast.error("\u6B64\u5BA2\u6236\u6C92\u6709\u6709\u6548\u7684 Telegram ID");return}this.isDeleting.set(!0),this.contactsService.deleteContacts([t.telegram_id]),this.toast.info("\u6B63\u5728\u522A\u9664\u5BA2\u6236...");let e=this.ipc.once("unified-contacts:delete-result",i=>{this.isDeleting.set(!1),i.success?this.toast.success("\u5BA2\u6236\u5DF2\u522A\u9664"):this.toast.error(`\u522A\u9664\u5931\u6557: ${i.error||"\u672A\u77E5\u932F\u8AA4"}`)})}clearSelection(){this.selectedIds.set(new Set)}viewContact(t){console.log("View contact:",t)}getInitial(t){return(t.display_name||t.username||t.telegram_id||"?").charAt(0).toUpperCase()}getStatusClass(t){return{new:"bg-blue-500/20 text-blue-400",contacted:"bg-emerald-500/20 text-emerald-400",replied:"bg-green-500/20 text-green-400",failed:"bg-red-500/20 text-red-400",blacklisted:"bg-slate-500/20 text-slate-400"}[t]||"bg-slate-500/20 text-slate-400"}getStatusLabel(t){return{new:"\u5F85\u767C\u9001",contacted:"\u5DF2\u767C\u9001",replied:"\u5DF2\u56DE\u8986",failed:"\u767C\u9001\u5931\u6557",blacklisted:"\u5DF2\u62C9\u9ED1"}[t]||t||"\u672A\u77E5"}startMultiRoleCollaboration(){let t=this.contacts().filter(i=>this.selectedIds().has(i.id));if(t.length===0){this.toast.warning("\u8ACB\u5148\u9078\u64C7\u5BA2\u6236");return}let e=t.map(i=>({id:i.id?.toString()||i.telegram_id,telegramId:i.telegram_id||i.id?.toString()||"",username:i.username,firstName:i.first_name||i.display_name?.split(" ")[0],lastName:i.last_name||i.display_name?.split(" ")[1],intentScore:this.calculateContactIntent(i),source:i.source_type||"leads"}));sessionStorage.setItem("multiRoleTargetUsers",JSON.stringify(e)),this.toast.success(`\u{1F916} \u5DF2\u9078\u64C7 ${e.length} \u500B\u76EE\u6A19\uFF0C\u6B63\u5728\u8DF3\u8F49\u5230\u591A\u89D2\u8272\u5354\u4F5C\u4E2D\u5FC3...`),this.ipc.send("navigate-to-multi-role",{targetUsers:e}),setTimeout(()=>{this.ipc.send("multi-role:open-ai-planner",{targetUsers:e})},500)}calculateContactIntent(t){let e=30;return t.status==="replied"?e+=30:t.status==="contacted"?e+=15:t.status==="new"&&(e+=10),t.source_type==="lead"?e+=20:t.source_type==="member"&&(e+=10),t.tags?.includes("\u9AD8\u610F\u5411")?e+=25:t.tags?.includes("\u6709\u8208\u8DA3")&&(e+=15),t.last_message_at&&(e+=10),Math.min(100,e)}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=L({type:o,selectors:[["app-leads-view"]],decls:103,vars:46,consts:[[1,"page-content"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","gap-3"],[1,"text-3xl"],[1,"text-2xl","font-bold",2,"color","var(--text-primary)"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","transition-colors",3,"click"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","transition-colors",2,"background-color","var(--bg-tertiary)","color","var(--text-primary)",3,"click"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","bg-gradient-to-r","from-cyan-500","to-blue-500","text-white","disabled:opacity-50",3,"click","disabled"],[1,"mb-6","animate-in","slide-in-from-top"],[1,"grid","grid-cols-2","md:grid-cols-5","gap-4","mb-6"],[1,"rounded-xl","p-4","text-center",2,"background-color","var(--bg-card)","border","1px solid var(--border-color)"],[1,"text-2xl","mb-1"],[1,"text-sm",2,"color","var(--text-muted)"],[1,"text-xl","font-bold","text-cyan-400"],[1,"text-xl","font-bold","text-blue-400"],[1,"text-xl","font-bold","text-emerald-400"],[1,"text-xl","font-bold","text-green-400"],[1,"text-xl","font-bold","text-red-400"],[1,"flex","items-center","gap-4","mb-6"],[1,"flex-1","relative"],["type","text","placeholder","\u641C\u7D22\u5BA2\u6236\u540D\u7A31\u3001\u7528\u6236\u540D\u6216\u4F86\u6E90...",1,"w-full","py-3","px-4","pl-10","rounded-xl",2,"background-color","var(--bg-tertiary)","color","var(--text-primary)","border","1px solid var(--border-color)",3,"ngModelChange","ngModel"],[1,"absolute","left-3","top-1/2","-translate-y-1/2","text-slate-400"],[1,"py-3","px-4","rounded-xl",2,"background-color","var(--bg-tertiary)","color","var(--text-primary)","border","1px solid var(--border-color)",3,"ngModelChange","ngModel"],["value",""],["value","new"],["value","contacted"],["value","replied"],["value","failed"],[1,"flex","rounded-lg","overflow-hidden",2,"border","1px solid var(--border-color)"],[1,"p-2","px-3","transition-colors",3,"click"],[1,"flex","items-center","gap-4","mb-4","p-3","rounded-xl",2,"background-color","var(--bg-card)","border","1px solid var(--border-color)"],["type","checkbox",1,"w-5","h-5","rounded","accent-cyan-500","cursor-pointer",3,"change","checked","indeterminate"],[1,"flex","items-center","gap-2"],[1,"px-3","py-1.5","rounded-lg","text-xs","transition-colors",3,"click"],[1,"px-3","py-1.5","rounded-lg","text-xs","transition-colors",2,"background-color","var(--bg-tertiary)","color","var(--text-muted)",3,"click"],[1,"px-3","py-1.5","rounded-lg","text-xs","transition-colors","disabled:opacity-50",2,"background-color","var(--bg-tertiary)","color","var(--text-muted)",3,"click","disabled"],[1,"w-px","h-6","bg-slate-700"],[1,"px-3","py-1","rounded-full","text-sm","font-medium","bg-cyan-500/20","text-cyan-400"],[1,"flex-1"],[1,"sticky","top-0","z-50","flex","items-center","gap-4","mb-4","p-4","rounded-xl","border","transition-all","duration-300","shadow-lg","backdrop-blur-sm","bg-gradient-to-r","from-amber-500/30","to-orange-500/30","border-amber-500/50",2,"background-color","rgba(15, 23, 42, 0.95)"],[1,"rounded-xl","overflow-hidden",2,"background-color","var(--bg-card)","border","1px solid var(--border-color)"],[1,"p-12","text-center",2,"color","var(--text-muted)"],[1,"p-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4"],[1,"w-full"],[1,"flex","items-center","gap-1.5","px-3","py-1.5","rounded-lg","text-xs","bg-cyan-500","hover:bg-cyan-600","text-white","transition-colors",3,"click"],[1,"flex","items-center","gap-1.5","px-3","py-1.5","rounded-lg","text-xs","bg-purple-500","hover:bg-purple-600","text-white","transition-colors",3,"click"],[1,"flex","items-center","gap-1.5","px-3","py-1.5","rounded-lg","text-xs","bg-red-500/20","hover:bg-red-500/30","text-red-400","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"text-amber-400","font-bold","text-lg"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","bg-cyan-500","hover:bg-cyan-600","text-white","transition-colors",3,"click"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","bg-purple-500","hover:bg-purple-600","text-white","transition-colors",3,"click"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","bg-gradient-to-r","from-pink-500","to-purple-500","hover:opacity-90","text-white","transition-colors",3,"click"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","bg-red-500/20","hover:bg-red-500/30","text-red-400","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"flex","items-center","gap-2","px-3","py-2","rounded-lg","hover:bg-slate-700/50","transition-colors","text-slate-400",3,"click"],[1,"text-5xl","mb-4","block"],[1,"text-lg","mb-2"],[1,"text-sm","mb-4"],[1,"px-4","py-2","bg-cyan-500","hover:bg-cyan-600","text-white","rounded-lg","transition-colors",3,"click"],[1,"rounded-xl","p-4","transition-all","hover:scale-[1.02]","cursor-pointer","relative","group",2,"background-color","var(--bg-tertiary)","border","1px solid var(--border-color)",3,"ring-2","ring-cyan-500"],[1,"rounded-xl","p-4","transition-all","hover:scale-[1.02]","cursor-pointer","relative","group",2,"background-color","var(--bg-tertiary)","border","1px solid var(--border-color)",3,"click"],[1,"absolute","top-3","right-3"],["type","checkbox",1,"rounded","w-5","h-5","accent-cyan-500","cursor-pointer",3,"change","click","checked"],[1,"flex","items-center","gap-3","mb-3"],[1,"w-12","h-12","rounded-full","bg-gradient-to-r","from-cyan-500","to-blue-500","flex","items-center","justify-center","text-white","font-bold","text-lg","shadow-lg"],[1,"flex-1","min-w-0"],[1,"font-medium","truncate",2,"color","var(--text-primary)"],[1,"text-xs","truncate",2,"color","var(--text-muted)"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-xs","px-2","py-1","rounded","bg-slate-700/50",2,"color","var(--text-muted)"],[1,"px-2","py-1","rounded-full","text-xs","font-medium"],[1,"flex","items-center","gap-2","pt-2","border-t",2,"border-color","var(--border-color)"],[1,"flex-1","text-center","py-2","text-xs","text-amber-400"],[1,"flex-1","flex","items-center","justify-center","gap-1","py-2","rounded-lg","text-xs","font-medium","transition-colors","bg-cyan-500/20","hover:bg-cyan-500/30","text-cyan-400",3,"click"],[1,"flex-1","flex","items-center","justify-center","gap-1","py-2","rounded-lg","text-xs","font-medium","transition-colors","bg-purple-500/20","hover:bg-purple-500/30","text-purple-400",3,"click"],["title","\u522A\u9664",1,"p-2","rounded-lg","text-xs","transition-colors","hover:bg-red-500/20","text-red-400",3,"click"],[2,"background-color","var(--bg-tertiary)"],[1,"py-3","px-4","text-left","text-sm","font-medium","w-10",2,"color","var(--text-muted)"],["type","checkbox",1,"rounded",3,"change","checked"],[1,"py-3","px-4","text-left","text-sm","font-medium",2,"color","var(--text-muted)"],[1,"border-t","transition-colors","hover:bg-slate-800/30",2,"border-color","var(--border-color)"],[1,"py-3","px-4"],[1,"w-10","h-10","rounded-full","bg-gradient-to-r","from-cyan-500","to-blue-500","flex","items-center","justify-center","text-white","font-bold"],[1,"font-medium",2,"color","var(--text-primary)"],[1,"text-xs",2,"color","var(--text-muted)"],[1,"py-3","px-4",2,"color","var(--text-muted)"],[1,"text-xs","px-2","py-1","rounded","bg-slate-700/50"],[1,"text-xs","text-amber-400"],["title","\u767C\u9001\u6D88\u606F",1,"p-2","rounded-lg","hover:bg-cyan-500/20","transition-colors","text-cyan-400",3,"click"],["title","\u62C9\u7FA4",1,"p-2","rounded-lg","hover:bg-purple-500/20","transition-colors","text-purple-400",3,"click"],["title","\u67E5\u770B\u8A73\u60C5",1,"p-2","rounded-lg","hover:bg-slate-700/50","transition-colors","text-slate-400",3,"click"],["title","\u522A\u9664",1,"p-2","rounded-lg","hover:bg-red-500/20","transition-colors","text-red-400",3,"click"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),n(4,"\u{1F4E4}"),r(),a(5,"h2",4),n(6,"\u767C\u9001\u63A7\u5236\u53F0"),r()(),a(7,"div",2)(8,"button",5),p("click",function(){return i.showToolsPanel.set(!i.showToolsPanel())}),a(9,"span"),n(10,"\u2B50"),r(),n(11," \u8A55\u5206 & \u53BB\u91CD "),r(),a(12,"button",6),p("click",function(){return i.refresh()}),a(13,"span"),n(14,"\u{1F504}"),r(),n(15," \u5237\u65B0 "),r(),a(16,"button",7),p("click",function(){return i.batchSend()}),a(17,"span"),n(18,"\u{1F4E8}"),r(),n(19," \u6279\u91CF\u767C\u9001 "),r()()(),v(20,Fe,2,0,"div",8),a(21,"div",9)(22,"div",10)(23,"div",11),n(24,"\u{1F465}"),r(),a(25,"div",12),n(26,"\u7E3D\u5BA2\u6236"),r(),a(27,"div",13),n(28),r()(),a(29,"div",10)(30,"div",11),n(31,"\u23F3"),r(),a(32,"div",12),n(33,"\u5F85\u767C\u9001"),r(),a(34,"div",14),n(35),r()(),a(36,"div",10)(37,"div",11),n(38,"\u2705"),r(),a(39,"div",12),n(40,"\u5DF2\u767C\u9001"),r(),a(41,"div",15),n(42),r()(),a(43,"div",10)(44,"div",11),n(45,"\u{1F4AC}"),r(),a(46,"div",12),n(47,"\u5DF2\u56DE\u8986"),r(),a(48,"div",16),n(49),r()(),a(50,"div",10)(51,"div",11),n(52,"\u274C"),r(),a(53,"div",12),n(54,"\u767C\u9001\u5931\u6557"),r(),a(55,"div",17),n(56),r()()(),a(57,"div",18)(58,"div",19)(59,"input",20),p("ngModelChange",function(m){return i.searchTerm.set(m)}),r(),a(60,"span",21),n(61,"\u{1F50D}"),r()(),a(62,"select",22),p("ngModelChange",function(m){return i.statusFilter.set(m)}),a(63,"option",23),n(64,"\u5168\u90E8\u72C0\u614B"),r(),a(65,"option",24),n(66,"\u5F85\u767C\u9001"),r(),a(67,"option",25),n(68,"\u5DF2\u767C\u9001"),r(),a(69,"option",26),n(70,"\u5DF2\u56DE\u8986"),r(),a(71,"option",27),n(72,"\u767C\u9001\u5931\u6557"),r()(),a(73,"div",28)(74,"button",29),p("click",function(){return i.viewMode.set("list")}),n(75," \u{1F4CB} "),r(),a(76,"button",29),p("click",function(){return i.viewMode.set("card")}),n(77," \u{1F0CF} "),r()()(),a(78,"div",30)(79,"div",2)(80,"input",31),p("change",function(){return i.toggleSelectAll()}),r(),a(81,"span",12),v(82,Te,1,0)(83,Ie,1,0)(84,Ve,1,0),r()(),a(85,"div",32)(86,"button",33),p("click",function(){return i.selectAll()}),n(87),r(),a(88,"button",34),p("click",function(){return i.invertSelection()}),n(89," \u{1F504} \u53CD\u9078 "),r(),a(90,"button",35),p("click",function(){return i.clearSelection()}),n(91," \u2716 \u6E05\u9664 "),r()(),I(92,"div",36),a(93,"div",32),v(94,Ae,2,1,"span",37)(95,Le,2,1,"span",12),r(),I(96,"div",38),v(97,Me,7,1,"div",32),r(),v(98,Pe,22,4,"div",39),a(99,"div",40),v(100,Be,9,0,"div",41)(101,Ge,3,0,"div",42)(102,qe,16,1,"table",43),r()()),e&2&&(l(8),V("background-color",i.showToolsPanel()?"":"var(--bg-tertiary)")("color",i.showToolsPanel()?"":"var(--text-primary)"),T("bg-amber-500",i.showToolsPanel())("text-white",i.showToolsPanel()),l(8),D("disabled",i.selectedCount()===0),l(4),b(i.showToolsPanel()?20:-1),l(8),f(i.contacts().length),l(7),f(i.pendingCount()),l(7),f(i.sentCount()),l(7),f(i.repliedCount()),l(7),f(i.failedCount()),l(3),D("ngModel",i.searchTerm()),l(3),D("ngModel",i.statusFilter()),l(12),V("background-color",i.viewMode()!=="list"?"var(--bg-tertiary)":""),T("bg-cyan-500",i.viewMode()==="list")("text-white",i.viewMode()==="list"),l(2),V("background-color",i.viewMode()!=="card"?"var(--bg-tertiary)":""),T("bg-cyan-500",i.viewMode()==="card")("text-white",i.viewMode()==="card"),l(4),D("checked",i.isAllSelected())("indeterminate",i.isPartialSelected()),l(2),b(i.isAllSelected()?82:i.isPartialSelected()?83:84),l(4),V("background-color",i.isAllSelected()?"":"var(--bg-tertiary)")("color",i.isAllSelected()?"":"var(--text-muted)"),T("bg-cyan-500",i.isAllSelected())("text-white",i.isAllSelected()),l(),_(" \u2611\uFE0F \u5168\u9078 (",i.filteredContacts().length,") "),l(3),D("disabled",i.selectedCount()===0),l(4),b(i.selectedCount()>0?94:95),l(3),b(i.selectedCount()>0?97:-1),l(),b(i.selectedCount()>1?98:-1),l(2),b(i.filteredContacts().length===0?100:i.viewMode()==="card"?101:102))},dependencies:[B,K,J,W,U,q,j,H,$],encapsulation:2,changeDetection:0})}};export{re as LeadsViewComponent};
