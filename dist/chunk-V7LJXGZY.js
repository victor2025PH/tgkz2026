import{h as me,t as he}from"./chunk-G45EE4VF.js";import{a as Q}from"./chunk-ZJK56S5Y.js";import{a as L,b as _e,d as xe}from"./chunk-43M2OKI7.js";import{a as H}from"./chunk-3V3KVMT4.js";import{b as pe}from"./chunk-CXXWQ5XE.js";import{b as ae,c as se,f as le,k as ce,l as ue,m as de,t as z}from"./chunk-36YFMG3E.js";import{$a as x,Aa as l,Ab as W,Eb as G,Fb as X,Gb as Y,Mb as ie,Na as O,Ob as j,Pb as N,Qb as ne,R as F,Vb as T,W as m,X as _,Xb as B,Yb as M,_a as p,a as ee,b as te,bb as P,cb as I,db as A,eb as y,fb as o,ga as b,gb as n,hb as V,lb as S,nb as d,nc as oe,oc as re,pb as c,qc as K,vb as q,wa as $,wb as w,xb as a,yb as D,zb as v}from"./chunk-YLSLTE5F.js";var fe=()=>[1,2,3,4,5],Z=(i,t)=>t.id;function be(i,t){return this.getResourceTrackId(t,i)}function Se(i,t){if(i&1){let e=S();o(0,"button",40),d("click",function(){let s=m(e).$implicit,u=c(3);return _(u.selectAccount(s))}),V(1,"span",34),o(2,"span",41),a(3),n()()}if(i&2){let e=t.$implicit;l(),q("bg-green-400",e.status==="Online")("bg-slate-400",e.status!=="Online"),l(2),D(e.phone)}}function ye(i,t){if(i&1&&(o(0,"div",37)(1,"div",38),I(2,Se,4,5,"button",39,Z),n()()),i&2){let e=c(2);l(2),A(e.mergedAccounts())}}function De(i,t){if(i&1){let e=S();o(0,"div",10)(1,"button",33),d("click",function(){m(e);let s=c();return _(s.showAccountSelector.set(!s.showAccountSelector()))}),V(2,"span",34),o(3,"span",35),a(4),n(),o(5,"span",36),a(6,"\u25BC"),n()(),p(7,ye,4,0,"div",37),n()}if(i&2){let e=t,r=c();l(2),q("bg-green-400",e.status==="Online")("bg-slate-400",e.status!=="Online"),l(2),D(e.phone),l(3),x(r.showAccountSelector()?7:-1)}}function we(i,t){i&1&&(o(0,"span",11),a(1,"\u26A0\uFE0F \u7121\u53EF\u7528\u5E33\u865F"),n())}function Ee(i,t){i&1&&(o(0,"span",12),a(1," \u{1F504} \u641C\u7D22\u4E2D... "),n())}function ke(i,t){i&1&&(o(0,"span",13),a(1," \u2705 \u5C31\u7DD2 "),n())}function Te(i,t){if(i&1){let e=S();o(0,"button",48),d("mousedown",function(){let s=m(e).$implicit,u=c(3);return _(u.quickSearch(s))}),a(1),n()}if(i&2){let e=t.$implicit;l(),v(" ",e," ")}}function Fe(i,t){if(i&1&&(o(0,"div",42)(1,"div",44),a(2,"\u{1F550} \u6700\u8FD1\u641C\u7D22"),n(),o(3,"div",45),I(4,Te,2,1,"button",47,P),n()()),i&2){let e=c(2);l(4),A(e.mergedHistoryKeywords().slice(0,5))}}function Ie(i,t){if(i&1){let e=S();o(0,"button",49),d("mousedown",function(){let s=m(e).$implicit,u=c(2);return _(u.quickSearch(s))}),a(1),n()}if(i&2){let e=t.$implicit;l(),v(" ",e," ")}}function Ae(i,t){if(i&1&&(o(0,"div",19),p(1,Fe,6,0,"div",42),o(2,"div",43)(3,"div",44),a(4,"\u{1F525} \u71B1\u9580\u641C\u7D22"),n(),o(5,"div",45),I(6,Ie,2,1,"button",46,P),n()()()),i&2){let e=c();l(),x(e.mergedHistoryKeywords().length>0?1:-1),l(5),A(e.hotKeywords)}}function Me(i,t){if(i&1&&(o(0,"span",54),a(1),n()),i&2){let e=c().$implicit;w(e.tagClass),l(),D(e.tag)}}function Re(i,t){if(i&1){let e=S();o(0,"label",50)(1,"input",51),d("change",function(){let s=m(e).$implicit,u=c();return _(u.toggleSource(s.id))}),n(),o(2,"span"),a(3),n(),o(4,"span",52),a(5),n(),p(6,Me,2,3,"span",53),n()}if(i&2){let e=t.$implicit,r=c();w(e.disabled?"bg-slate-800/50 border border-slate-700/30 cursor-not-allowed opacity-50":r.selectedSources().includes(e.id)?"bg-cyan-500/20 border border-cyan-500/50 cursor-pointer":"bg-slate-700/30 border border-slate-700 hover:bg-slate-700/50 cursor-pointer"),y("title",e.disabled?"\u8A72\u529F\u80FD\u6B63\u5728\u958B\u767C\u4E2D\uFF0C\u656C\u8ACB\u671F\u5F85":""),l(),y("checked",r.selectedSources().includes(e.id))("disabled",e.disabled),l(2),D(e.icon),l(2),D(e.name),l(),x(e.tag?6:-1)}}function Ve(i,t){if(i&1&&(o(0,"div",24)(1,"span",69),a(2,"\u7576\u524D\u641C\u7D22\uFF1A"),n(),o(3,"span",70),a(4),n()()),i&2){let e=c(2);l(4),v(" \u{1F50D} ",e.currentKeyword()," ")}}function Be(i,t){if(i&1&&(o(0,"span",71),a(1),n(),o(2,"span",72),a(3),n()),i&2){let e=c(2);l(),v("\u{1F195} ",e.newDiscoveredCount()," \u500B\u65B0\u767C\u73FE"),l(2),v("\u{1F504} ",e.existingCount()," \u500B\u5DF2\u77E5")}}function Pe(i,t){if(i&1&&(o(0,"span",57)(1,"span",73),a(2,"\u23F3"),n(),a(3),n()),i&2){let e=c(2);l(3),v(" ",e.searchProgress()," ")}}function je(i,t){i&1&&(o(0,"span",58)(1,"span",74),a(2,"\u{1F4CA}"),n(),a(3," \u6B63\u5728\u7372\u53D6\u6210\u54E1\u6578\u7B49\u8A73\u60C5... "),n())}function Ne(i,t){if(i&1&&(o(0,"span",64),a(1),n()),i&2){let e=c(2);l(),v(" ",e.activeFilterCount()," ")}}function $e(i,t){if(i&1){let e=S();o(0,"div",67)(1,"div")(2,"label",75),a(3,"\u6210\u54E1\u6578\u7BC4\u570D"),n(),o(4,"div",24)(5,"input",76),d("change",function(s){m(e);let u=c(2);return _(u.filterMemberMin.set(s.target.value?+s.target.value:null))}),n(),o(6,"span",77),a(7,"-"),n(),o(8,"input",78),d("change",function(s){m(e);let u=c(2);return _(u.filterMemberMax.set(s.target.value?+s.target.value:null))}),n()()(),o(9,"div")(10,"label",75),a(11,"\u4F86\u6E90\u6E20\u9053"),n(),o(12,"select",79),d("change",function(s){m(e);let u=c(2);return _(u.filterSource.set(s.target.value))}),o(13,"option",60),a(14,"\u5168\u90E8\u4F86\u6E90"),n(),o(15,"option",80),a(16,"TG \u5B98\u65B9"),n(),o(17,"option",81),a(18,"\u4E2D\u6587\u641C\u7D22"),n(),o(19,"option",82),a(20,"\u672C\u5730\u7D22\u5F15"),n()()(),o(21,"div")(22,"label",75),a(23,"\u52A0\u5165\u72C0\u614B"),n(),o(24,"select",79),d("change",function(s){m(e);let u=c(2);return _(u.filterJoinStatus.set(s.target.value))}),o(25,"option",60),a(26,"\u5168\u90E8\u72C0\u614B"),n(),o(27,"option",83),a(28,"\u5DF2\u52A0\u5165"),n(),o(29,"option",84),a(30,"\u672A\u52A0\u5165"),n()()(),o(31,"div")(32,"label",75),a(33,"\u5176\u4ED6\u9078\u9805"),n(),o(34,"div",3)(35,"label",85)(36,"input",86),d("change",function(s){m(e);let u=c(2);return _(u.filterHasId.set(s.target.checked))}),n(),o(37,"span",87),a(38,"\u53EA\u986F\u793A\u6709 ID"),n()(),o(39,"button",88),d("click",function(){m(e);let s=c(2);return _(s.resetFilters())}),a(40," \u91CD\u7F6E\u7BE9\u9078 "),n()()()()}if(i&2){let e=c(2);l(5),y("value",e.filterMemberMin()||""),l(3),y("value",e.filterMemberMax()||""),l(4),y("value",e.filterSource()),l(12),y("value",e.filterJoinStatus()),l(12),y("checked",e.filterHasId())}}function Je(i,t){if(i&1){let e=S();o(0,"div",91)(1,"span",92),a(2),n(),V(3,"div",93),o(4,"button",94),d("click",function(){m(e);let s=c(3);return _(s.batchSaveSelected())}),a(5," \u2B50 \u6536\u85CF\u9078\u4E2D "),n(),o(6,"button",95),d("click",function(){m(e);let s=c(3);return _(s.copySelectedIds())}),a(7," \u{1F4CB} \u8907\u88FDID "),n()()}if(i&2){let e=c(3);l(2),v(" \u2713 \u5DF2\u9078 ",e.selectedCount()," \u9805 ")}}function Oe(i,t){if(i&1){let e=S();o(0,"div",68)(1,"div",89)(2,"span",69),a(3,"\u6279\u91CF\u64CD\u4F5C:"),n(),o(4,"button",90),d("click",function(){m(e);let s=c(2);return _(s.selectAllVisible())}),a(5," \u2611\uFE0F \u5168\u9078\u672C\u9801 "),n(),o(6,"button",90),d("click",function(){m(e);let s=c(2);return _(s.clearSelection())}),a(7," \u2610 \u53D6\u6D88\u5168\u9078 "),n(),o(8,"button",90),d("click",function(){m(e);let s=c(2);return _(s.invertSelection())}),a(9," \u21C6 \u53CD\u9078 "),n()(),p(10,Je,8,1,"div",91),n()}if(i&2){let e=c(2);l(10),x(e.selectedCount()>0?10:-1)}}function Ke(i,t){if(i&1){let e=S();o(0,"div",27)(1,"div",2)(2,"div",3),p(3,Ve,5,1,"div",24),o(4,"span",55),a(5," \u5171 "),o(6,"span",56),a(7),n(),a(8," \u500B\u7D50\u679C "),p(9,Be,4,2),n(),p(10,Pe,4,1,"span",57),p(11,je,4,0,"span",58),n(),o(12,"div",24)(13,"select",59),Y("ngModelChange",function(s){m(e);let u=c();return X(u.filterType,s)||(u.filterType=s),_(s)}),o(14,"option",60),a(15,"\u5168\u90E8\u985E\u578B"),n(),o(16,"option",61),a(17,"\u7FA4\u7D44"),n(),o(18,"option",62),a(19,"\u983B\u9053"),n()(),o(20,"button",63),d("click",function(){m(e);let s=c();return _(s.showAdvancedFilter.set(!s.showAdvancedFilter()))}),a(21," \u{1F39B}\uFE0F \u9AD8\u7D1A\u7BE9\u9078 "),p(22,Ne,2,1,"span",64),n(),o(23,"button",65),d("click",function(){m(e);let s=c();return _(s.batchSave())}),a(24," \u2B50 \u6279\u91CF\u6536\u85CF "),n(),o(25,"button",66),d("click",function(){m(e);let s=c();return _(s.exportResults())}),a(26),n()()(),p(27,$e,41,5,"div",67),p(28,Oe,11,1,"div",68),n()}if(i&2){let e=c();l(3),x(e.currentKeyword()?3:-1),l(4),D(e.mergedResources().length),l(2),x(e.newDiscoveredCount()>0||e.existingCount()>0?9:-1),l(),x(e.searchProgress()?10:-1),l(),x(e.isFetchingDetails()?11:-1),l(2),G("ngModel",e.filterType),l(7),w(e.showAdvancedFilter()||e.activeFilterCount()>0?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/50":"bg-slate-700/50 text-slate-300 border border-slate-700 hover:border-slate-600"),l(2),x(e.activeFilterCount()>0?22:-1),l(3),w(e.filteredResources().length>0?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-slate-600/30 text-slate-500 cursor-not-allowed"),y("disabled",e.filteredResources().length===0),l(),v(" \u{1F4E4} \u5C0E\u51FA\u5168\u90E8 (",e.filteredResources().length,") "),l(),x(e.showAdvancedFilter()?27:-1),l(),x(e.filteredResources().length>0?28:-1)}}function ze(i,t){i&1&&(o(0,"div",96)(1,"div",97),V(2,"div",98),o(3,"div",99),V(4,"div",100)(5,"div",101)(6,"div",102),n()()())}function He(i,t){i&1&&(o(0,"div",29),I(1,ze,7,0,"div",96,P),n()),i&2&&(l(),A(ie(0,fe)))}function Le(i,t){if(i&1){let e=S();o(0,"div",103)(1,"div",104),a(2,"\u26A0\uFE0F"),n(),o(3,"p",105),a(4,"\u641C\u7D22\u5931\u6557"),n(),o(5,"p",106),a(6),n(),o(7,"button",107),d("click",function(){m(e);let s=c(2);return _(s.doSearch())}),a(8," \u{1F504} \u91CD\u8A66 "),n()()}if(i&2){let e=c(2);l(6),D(e.mergedSearchError().message)}}function Qe(i,t){if(i&1){let e=S();o(0,"button",113),d("click",function(){let s=m(e).$implicit,u=c(3);return _(u.quickSearch(s))}),a(1),n()}if(i&2){let e=t.$implicit;l(),v(" ",e," ")}}function Ue(i,t){if(i&1&&(o(0,"div",104),a(1,"\u{1F50D}"),n(),o(2,"p",108),a(3,"\u958B\u59CB\u641C\u7D22\u767C\u73FE\u7FA4\u7D44"),n(),o(4,"p",109),a(5,"\u8F38\u5165\u95DC\u9375\u8A5E\u641C\u7D22 Telegram \u7FA4\u7D44\u548C\u983B\u9053"),n(),o(6,"div",110)(7,"span",111),a(8,"\u8A66\u8A66\uFF1A"),n(),I(9,Qe,2,1,"button",112,P),n()),i&2){let e=c(2);l(9),A(e.hotKeywords.slice(0,5))}}function qe(i,t){if(i&1&&(o(0,"div",30),p(1,Le,9,1,"div",103)(2,Ue,11,0),n()),i&2){let e=c();l(),x(e.mergedSearchError().hasError?1:2)}}function We(i,t){if(i&1&&(o(0,"option",118),a(1),n()),i&2){let e=t.$implicit;y("value",e),l(),D(e)}}function Ge(i,t){i&1&&(o(0,"span",128),a(1,"\u2713"),n())}function Xe(i,t){i&1&&(o(0,"span",133),a(1," \u2705 \u5DF2\u52A0\u5165 "),n())}function Ye(i,t){i&1&&(o(0,"span",134),a(1," \u{1F195} \u65B0\u767C\u73FE "),n())}function Ze(i,t){i&1&&(o(0,"span",135),a(1," \u{1F504} \u5DF2\u77E5 "),n())}function et(i,t){if(i&1){let e=S();o(0,"a",155),d("click",function(s){return m(e),_(s.stopPropagation())}),a(1),n()}if(i&2){let e=c().$implicit;y("href","https://t.me/"+e.username,$),l(),v(" @",e.username," ")}}function tt(i,t){if(i&1){let e=S();o(0,"code",156),a(1),n(),o(2,"button",157),d("click",function(s){m(e);let u=c().$implicit,C=c(2);return _(C.copyId(u,s))}),a(3),n()}if(i&2){let e=c().$implicit,r=c(2);l(),D(e.telegram_id),l(),w(r.copiedId()===e.telegram_id?"bg-green-500/20 text-green-400":"bg-slate-700 text-slate-400 hover:bg-cyan-500/20 hover:text-cyan-400"),l(),v(" ",r.copiedId()===e.telegram_id?"\u2713 \u5DF2\u8907\u88FD":"\u{1F4CB} \u8907\u88FD"," ")}}function it(i,t){if(i&1&&(o(0,"code",158),a(1),n(),o(2,"span",159),a(3," \u26A0\uFE0F \u9700\u52A0\u5165\u7372\u53D6 "),n()),i&2){let e=c().$implicit;l(),v("@",e.username)}}function nt(i,t){i&1&&(o(0,"span",111),a(1,"\u9700\u901A\u904E\u9080\u8ACB\u93C8\u63A5\u52A0\u5165"),n())}function ot(i,t){if(i&1){let e=S();o(0,"span",160),a(1,"|"),n(),o(2,"button",161),d("click",function(s){m(e);let u=c().$implicit,C=c(2);return _(C.copyLink(u,s))}),a(3),n()}if(i&2){let e=c().$implicit,r=c(2);l(2),w(r.copiedLink()===e.username?"bg-green-500/20 text-green-400":"bg-slate-700 text-slate-400 hover:bg-cyan-500/20 hover:text-cyan-400"),l(),v(" ",r.copiedLink()===e.username?"\u2713 \u5DF2\u8907\u88FD":"\u{1F517} \u8907\u88FD\u9023\u7D50"," ")}}function rt(i,t){if(i&1&&(o(0,"p",139),a(1),n()),i&2){let e=c().$implicit;l(),D(e.description)}}function at(i,t){if(i&1&&(o(0,"span",144),a(1),j(2,"number"),n()),i&2){let e=c().$implicit;l(),v(" \u{1F4C8} +",N(2,1,e.member_change)," ")}}function st(i,t){if(i&1&&(o(0,"span",145),a(1),j(2,"number"),n()),i&2){let e=c().$implicit;l(),v(" \u{1F4C9} ",N(2,1,e.member_change)," ")}}function lt(i,t){i&1&&(o(0,"span",162),a(1,"\u2B50\u2B50\u2B50"),n(),o(2,"span",163),a(3,"\u9AD8\u5EA6\u76F8\u95DC"),n())}function ct(i,t){i&1&&(o(0,"span",162),a(1,"\u2B50\u2B50"),n(),o(2,"span",9),a(3,"\u4E2D\u5EA6\u76F8\u95DC"),n())}function ut(i,t){i&1&&(o(0,"span",162),a(1,"\u2B50"),n(),o(2,"span",77),a(3,"\u4E00\u822C\u76F8\u95DC"),n())}function dt(i,t){if(i&1&&(o(0,"span",148),a(1),n()),i&2){let e=c().$implicit,r=c(2);l(),v(" ",r.getSourceLabel(e.discovery_source)," ")}}function mt(i,t){i&1&&(o(0,"span",149),a(1,"\u2713 \u5DF2\u52A0\u5165"),n())}function _t(i,t){if(i&1&&(o(0,"span",165),a(1),n()),i&2){let e=c(2).$implicit;l(),v("",e.joined_phone.slice(0,7),"***")}}function pt(i,t){if(i&1&&(o(0,"div",151)(1,"span",164),a(2," \u2705 \u5DF2\u52A0\u5165 "),n(),p(3,_t,2,1,"span",165),n()),i&2){let e=c().$implicit;l(3),x(e.joined_phone?3:-1)}}function xt(i,t){i&1&&(o(0,"button",152)(1,"span",73),a(2,"\u23F3"),n(),a(3," \u52A0\u5165\u4E2D... "),n())}function ht(i,t){if(i&1){let e=S();o(0,"button",166),d("click",function(){m(e);let s=c().$implicit,u=c(2);return _(u.openJoinDialog(s))}),a(1," \u{1F680} \u52A0\u5165 "),n()}}function gt(i,t){if(i&1){let e=S();o(0,"button",169),d("click",function(){m(e);let s=c(2).$implicit,u=c(2);return _(u.extractMembers(s))}),a(1," \u{1F465} \u63D0\u53D6\u6210\u54E1 "),n()}}function vt(i,t){i&1&&(o(0,"button",168),a(1," \u{1F465} \u6210\u54E1 "),n())}function Ct(i,t){if(i&1&&p(0,gt,2,0,"button",167)(1,vt,2,0,"button",168),i&2){let e=c().$implicit;x(e.status==="joined"||e.status==="monitoring"?0:1)}}function ft(i,t){i&1&&(o(0,"button",154),a(1," \u{1F465} \u6210\u54E1 \u{1F512} "),n())}function bt(i,t){if(i&1){let e=S();o(0,"div",122),d("click",function(){let s=m(e).$implicit,u=c(2);return _(u.openDetail(s))}),o(1,"div",123)(2,"div",124)(3,"label",125),d("click",function(s){return m(e),_(s.stopPropagation())}),o(4,"input",126),d("change",function(s){let u=m(e).$implicit,C=c(2);return _(C.toggleBatchSelect(u,s))}),n(),o(5,"div",127),p(6,Ge,2,0,"span",128),n()(),o(7,"button",129),d("click",function(s){let u=m(e).$implicit;return c(2).toggleSave(u),_(s.stopPropagation())}),a(8),n()(),o(9,"div",130)(10,"div",131)(11,"span",132),a(12),n(),p(13,Xe,2,0,"span",133),p(14,Ye,2,0,"span",134)(15,Ze,2,0,"span",135),o(16,"h4",136),a(17),n(),p(18,et,2,2,"a",137),n(),o(19,"div",138)(20,"span",69),a(21,"ID:"),n(),p(22,tt,4,4)(23,it,4,1)(24,nt,2,0,"span",111),p(25,ot,4,3),n(),p(26,rt,2,1,"p",139),o(27,"div",140)(28,"span",141)(29,"span",142),a(30,"\u{1F465}"),n(),o(31,"span",143),a(32),j(33,"number"),n(),a(34," \u6210\u54E1 "),p(35,at,3,3,"span",144)(36,st,3,3,"span",145),n(),o(37,"span",146),p(38,lt,4,0)(39,ct,4,0)(40,ut,4,0),o(41,"span",147),a(42),n()(),p(43,dt,2,1,"span",148),p(44,mt,2,0,"span",149),n()(),o(45,"div",150),d("click",function(s){return m(e),_(s.stopPropagation())}),p(46,pt,4,1,"div",151)(47,xt,4,0,"button",152)(48,ht,2,0,"button",153),p(49,Ct,2,1)(50,ft,2,0,"button",154),n()()()}if(i&2){let e=t.$implicit,r=c(2);w(r.isSelectedForBatch(e)?"border-cyan-500/70 shadow-lg shadow-cyan-500/10":"border-slate-700/50 hover:border-cyan-500/50 hover:shadow-lg hover:shadow-cyan-500/10"),l(4),y("checked",r.isSelectedForBatch(e)),l(),w(r.isSelectedForBatch(e)?"bg-cyan-500 border-cyan-500":"border-slate-500 hover:border-cyan-400"),l(),x(r.isSelectedForBatch(e)?6:-1),l(),w(e.is_saved?"bg-yellow-500/20 text-yellow-400":"bg-slate-700/50 text-slate-400 hover:bg-yellow-500/20 hover:text-yellow-400"),y("title",e.is_saved?"\u53D6\u6D88\u6536\u85CF":"\u6536\u85CF"),l(),v(" ",e.is_saved?"\u2B50":"\u2606"," "),l(3),w(e.resource_type==="channel"?"bg-purple-500/30 text-purple-300":"bg-blue-500/30 text-blue-300"),l(),v(" ",e.resource_type==="channel"?"\u{1F4E2} \u983B\u9053":"\u{1F465} \u7FA4\u7D44"," "),l(),x(e.status==="joined"||e.status==="monitoring"?13:-1),l(),x(e.is_new?14:e.is_new===!1?15:-1),l(3),D(e.title),l(),x(e.username?18:-1),l(4),x(e.telegram_id?22:e.username?23:24),l(3),x(e.username?25:-1),l(),x(e.description?26:-1),l(6),D(N(33,28,e.member_count)),l(3),x(e.member_change&&e.member_change>0?35:e.member_change&&e.member_change<0?36:-1),l(3),x((e.overall_score||0)>=.7?38:(e.overall_score||0)>=.5?39:40),l(4),v(" (",r.formatScore(e.overall_score),") "),l(),x(e.discovery_source?43:-1),l(),x(e.status==="joined"||e.status==="monitoring"?44:-1),l(2),x(e.status==="joined"||e.status==="monitoring"?46:r.isJoining(e)?47:48),l(3),x(e.resource_type!=="channel"?49:50)}}function St(i,t){if(i&1){let e=S();o(0,"button",173),d("click",function(){let s=m(e).$implicit,u=c(3);return _(u.goToPage(s))}),a(1),n()}if(i&2){let e=t.$implicit,r=c(3);w(e===r.currentPage()?"bg-cyan-500 text-white":"bg-slate-700/50 text-slate-300 hover:bg-slate-600"),l(),v(" ",e," ")}}function yt(i,t){if(i&1){let e=S();o(0,"div",121)(1,"button",170),d("click",function(){m(e);let s=c(2);return _(s.firstPage())}),a(2," \u23EE\uFE0F \u9996\u9801 "),n(),o(3,"button",170),d("click",function(){m(e);let s=c(2);return _(s.prevPage())}),a(4," \u25C0\uFE0F \u4E0A\u4E00\u9801 "),n(),I(5,St,2,3,"button",171,P),o(7,"button",170),d("click",function(){m(e);let s=c(2);return _(s.nextPage())}),a(8," \u4E0B\u4E00\u9801 \u25B6\uFE0F "),n(),o(9,"button",170),d("click",function(){m(e);let s=c(2);return _(s.lastPage())}),a(10," \u5C3E\u9801 \u23ED\uFE0F "),n(),o(11,"span",172),a(12),n()()}if(i&2){let e=c(2);l(),w(e.currentPage()===1?"bg-slate-700/30 text-slate-500 cursor-not-allowed":"bg-slate-700/50 text-slate-300 hover:bg-slate-600"),y("disabled",e.currentPage()===1),l(2),w(e.currentPage()===1?"bg-slate-700/30 text-slate-500 cursor-not-allowed":"bg-slate-700/50 text-slate-300 hover:bg-slate-600"),y("disabled",e.currentPage()===1),l(2),A(e.pageNumbers()),l(2),w(e.currentPage()===e.totalPages()?"bg-slate-700/30 text-slate-500 cursor-not-allowed":"bg-slate-700/50 text-slate-300 hover:bg-slate-600"),y("disabled",e.currentPage()===e.totalPages()),l(2),w(e.currentPage()===e.totalPages()?"bg-slate-700/30 text-slate-500 cursor-not-allowed":"bg-slate-700/50 text-slate-300 hover:bg-slate-600"),y("disabled",e.currentPage()===e.totalPages()),l(3),W(" \u7B2C ",e.currentPage()," / ",e.totalPages()," \u9801 ")}}function Dt(i,t){if(i&1){let e=S();o(0,"div",114)(1,"div",21),a(2," \u5171 "),o(3,"span",115),a(4),n(),a(5," \u500B\u7D50\u679C\uFF0C \u986F\u793A\u7B2C "),o(6,"span",116),a(7),n(),a(8," - "),o(9,"span",116),a(10),n(),a(11," \u500B "),n(),o(12,"div",24)(13,"span",21),a(14,"\u6BCF\u9801"),n(),o(15,"select",117),d("ngModelChange",function(s){m(e);let u=c();return _(u.changePageSize(s))}),I(16,We,2,2,"option",118,P),n()()(),o(18,"div",119),I(19,bt,51,30,"div",120,be,!0),n(),p(21,yt,13,14,"div",121)}if(i&2){let e=c();l(4),D(e.filteredResources().length),l(3),D((e.currentPage()-1)*e.pageSize()+1),l(3),D(e.Math.min(e.currentPage()*e.pageSize(),e.filteredResources().length)),l(5),y("ngModel",e.pageSize()),l(),A(e.pageSizeOptions),l(3),A(e.pagedResources()),l(2),x(e.filteredResources().length>e.pageSize()?21:-1)}}function wt(i,t){if(i&1&&(o(0,"a",187),a(1),n()),i&2){let e=c();y("href","https://t.me/"+e.username,$),l(),v(" @",e.username," ")}}function Et(i,t){if(i&1){let e=S();o(0,"code",209),a(1),n(),o(2,"button",210),d("click",function(s){m(e);let u=c(),C=c();return _(C.copyId(u,s))}),a(3),n()}if(i&2){let e=c(),r=c();l(),D(e.telegram_id),l(),w(r.copiedId()===e.telegram_id?"bg-green-500/20 text-green-400":"bg-slate-700 text-slate-400 hover:bg-cyan-500/20 hover:text-cyan-400"),l(),v(" ",r.copiedId()===e.telegram_id?"\u2713":"\u{1F4CB}"," ")}}function kt(i,t){i&1&&(o(0,"span",212),a(1,"\u26A0\uFE0F \u9700\u52A0\u5165\u7372\u53D6ID"),n())}function Tt(i,t){i&1&&(o(0,"span",213),a(1,"\u{1F504} \u540C\u6B65\u4E2D"),n())}function Ft(i,t){if(i&1&&(o(0,"code",211),a(1),n(),p(2,kt,2,0,"span",212)(3,Tt,2,0,"span",213)),i&2){let e=c();l(),v("@",e.username),l(),x(e.status!=="joined"&&e.status!=="monitoring"?2:3)}}function It(i,t){i&1&&(o(0,"span",77),a(1,"\u9700\u52A0\u5165\u7372\u53D6"),n())}function At(i,t){i&1&&(o(0,"span",214),a(1,"\u{1F504} \u540C\u6B65\u4E2D"),n())}function Mt(i,t){if(i&1&&p(0,It,2,0,"span",77)(1,At,2,0,"span",214),i&2){let e=c();x(e.status!=="joined"&&e.status!=="monitoring"?0:1)}}function Rt(i,t){if(i&1){let e=S();o(0,"span",193),a(1),n(),o(2,"button",215),d("click",function(s){m(e);let u=c(),C=c();return _(C.copyLink(u,s))}),a(3," \u{1F517} "),n()}if(i&2){let e=c();l(),v("@",e.username)}}function Vt(i,t){i&1&&(o(0,"span",77),a(1,"\u7121"),n())}function Bt(i,t){if(i&1&&(o(0,"a",194),a(1),n()),i&2){let e=c();y("href","https://t.me/"+e.username,$),l(),v(" t.me/",e.username," ")}}function Pt(i,t){i&1&&(o(0,"span",77),a(1,"\u7121\u516C\u958B\u9023\u7D50"),n())}function jt(i,t){i&1&&a(0," \u2B50\u2B50\u2B50 ")}function Nt(i,t){i&1&&a(0," \u2B50\u2B50 ")}function $t(i,t){i&1&&a(0," \u2B50 ")}function Jt(i,t){i&1&&a(0," \u5DF2\u52A0\u5165\xB7\u76E3\u63A7\u4E2D ")}function Ot(i,t){i&1&&a(0," \u5DF2\u52A0\u5165 ")}function Kt(i,t){i&1&&a(0," \u52A0\u5165\u4E2D... ")}function zt(i,t){i&1&&a(0," \u672A\u52A0\u5165 ")}function Ht(i,t){if(i&1&&(o(0,"div",189)(1,"h4",190)(2,"span"),a(3,"\u{1F4DD}"),n(),a(4," \u7FA4\u7D44\u63CF\u8FF0 "),n(),o(5,"p",216),a(6),n()()),i&2){let e=c();l(6),D(e.description)}}function Lt(i,t){if(i&1&&(o(0,"span",202),a(1),n()),i&2){let e=c(),r=c();l(),v(" \u4F86\u6E90\uFF1A",r.getSourceLabel(e.discovery_source)," ")}}function Qt(i,t){if(i&1&&(o(0,"span",203),a(1),n()),i&2){let e=c();l(),v(" \u95DC\u9375\u8A5E\uFF1A",e.discovery_keyword," ")}}function Ut(i,t){if(i&1&&(o(0,"span",202),a(1),j(2,"date"),n()),i&2){let e=c();l(),v(" \u767C\u73FE\u6642\u9593\uFF1A",ne(2,1,e.created_at,"yyyy-MM-dd HH:mm")," ")}}function qt(i,t){if(i&1&&(o(0,"a",206),a(1," \u{1F517} \u6253\u958B Telegram "),n()),i&2){let e=c();y("href","https://t.me/"+e.username,$)}}function Wt(i,t){if(i&1){let e=S();o(0,"button",217),d("click",function(){m(e);let s=c(),u=c();return u.openJoinDialog(s),_(u.closeDetail())}),a(1," \u{1F680} \u52A0\u5165\u7FA4\u7D44 "),n()}}function Gt(i,t){if(i&1){let e=S();o(0,"button",219),d("click",function(){m(e);let s=c(2),u=c();return u.extractMembers(s),_(u.closeDetail())}),a(1," \u{1F465} \u63D0\u53D6\u6210\u54E1 "),n()}}function Xt(i,t){if(i&1&&p(0,Gt,2,0,"button",218),i&2){let e=c();x(e.resource_type!=="channel"?0:-1)}}function Yt(i,t){if(i&1){let e=S();o(0,"div",174),d("click",function(){m(e);let s=c();return _(s.closeDetail())}),o(1,"div",175),d("click",function(s){return m(e),_(s.stopPropagation())}),o(2,"div",176)(3,"div",89)(4,"span",177),a(5),n(),o(6,"h2",178),a(7,"\u7FA4\u7D44\u8A73\u60C5"),n(),o(8,"span",21),a(9),n()(),o(10,"div",24)(11,"button",179),d("click",function(){m(e);let s=c();return _(s.navigatePrev())}),a(12," \u2190 "),n(),o(13,"button",180),d("click",function(){m(e);let s=c();return _(s.navigateNext())}),a(14," \u2192 "),n(),V(15,"div",181),o(16,"button",182),d("click",function(){m(e);let s=c();return _(s.closeDetail())}),a(17," \u2715 "),n()()(),o(18,"div",183)(19,"div",184)(20,"div",185),a(21),n(),o(22,"div",130)(23,"h3",186),a(24),n(),p(25,wt,2,2,"a",187),n(),o(26,"button",188),d("click",function(){let s=m(e),u=c();return _(u.toggleSave(s))}),a(27),n()(),o(28,"div",189)(29,"h4",190)(30,"span"),a(31,"\u{1F4CA}"),n(),a(32," \u57FA\u672C\u4FE1\u606F "),n(),o(33,"div",191)(34,"div")(35,"div",192),a(36,"\u985E\u578B"),n(),o(37,"div",193),a(38),n()(),o(39,"div")(40,"div",192),a(41,"Telegram ID"),n(),o(42,"div",24),p(43,Et,4,4)(44,Ft,4,2)(45,Mt,2,1),n()(),o(46,"div")(47,"div",192),a(48,"Username"),n(),o(49,"div",24),p(50,Rt,4,1)(51,Vt,2,0,"span",77),n()(),o(52,"div")(53,"div",192),a(54,"\u9023\u7D50"),n(),p(55,Bt,2,2,"a",194)(56,Pt,2,0,"span",77),n()()(),o(57,"div",189)(58,"h4",190)(59,"span"),a(60,"\u{1F465}"),n(),a(61," \u6210\u54E1\u6578\u64DA "),n(),o(62,"div",195)(63,"div",196)(64,"div",197),a(65),j(66,"number"),n(),o(67,"div",111),a(68,"\u7E3D\u6210\u54E1"),n()(),o(69,"div",196)(70,"div",198),p(71,jt,1,0)(72,Nt,1,0)(73,$t,1,0),n(),o(74,"div",199),a(75),n(),o(76,"div",72),a(77,"\u76F8\u95DC\u5EA6"),n()(),o(78,"div",196)(79,"div",200),a(80),n(),o(81,"div",111),p(82,Jt,1,0)(83,Ot,1,0)(84,Kt,1,0)(85,zt,1,0),n()()()(),p(86,Ht,7,1,"div",189),o(87,"div",201)(88,"h4",190)(89,"span"),a(90,"\u{1F3F7}\uFE0F"),n(),a(91," \u4F86\u6E90\u4FE1\u606F "),n(),o(92,"div",45),p(93,Lt,2,1,"span",202),p(94,Qt,2,1,"span",203),p(95,Ut,3,4,"span",202),n()()(),o(96,"div",204)(97,"div",24)(98,"button",205),d("click",function(){let s=m(e),u=c();return _(u.toggleSave(s))}),a(99),n(),p(100,qt,2,1,"a",206),n(),o(101,"div",24)(102,"button",207),d("click",function(){m(e);let s=c();return _(s.closeDetail())}),a(103," \u95DC\u9589 "),n(),p(104,Wt,2,0,"button",208)(105,Xt,1,1),n()()()()}if(i&2){let e=t,r=c();l(4),w(e.resource_type==="channel"?"bg-purple-500/30 text-purple-300":"bg-blue-500/30 text-blue-300"),l(),v(" ",e.resource_type==="channel"?"\u{1F4E2} \u983B\u9053":"\u{1F465} \u7FA4\u7D44"," "),l(4),W(" ",r.selectedResourceIndex()+1," / ",r.filteredResources().length," "),l(2),w(r.canNavigatePrev()?"text-slate-400 hover:text-white hover:bg-slate-700":"text-slate-600 cursor-not-allowed"),y("disabled",!r.canNavigatePrev()),l(2),w(r.canNavigateNext()?"text-slate-400 hover:text-white hover:bg-slate-700":"text-slate-600 cursor-not-allowed"),y("disabled",!r.canNavigateNext()),l(8),v(" ",e.title[0]||"?"," "),l(3),D(e.title),l(),x(e.username?25:-1),l(),w(e.is_saved?"bg-yellow-500/20 text-yellow-400":"bg-slate-700 text-slate-400 hover:bg-yellow-500/20 hover:text-yellow-400"),l(),v(" ",e.is_saved?"\u2B50":"\u2606"," "),l(11),D(e.resource_type==="channel"?"\u983B\u9053":"\u7FA4\u7D44"),l(5),x(e.telegram_id?43:e.username?44:45),l(7),x(e.username?50:51),l(5),x(e.username?55:56),l(10),D(N(66,37,e.member_count)),l(6),x((e.overall_score||0)>=.7?71:(e.overall_score||0)>=.5?72:73),l(4),D(r.formatScore(e.overall_score)),l(4),w(e.status==="joined"||e.status==="monitoring"?"text-green-400":"text-slate-400"),l(),v(" ",e.status==="joined"||e.status==="monitoring"?"\u2713":"\u2014"," "),l(2),x(e.status==="monitoring"?82:e.status==="joined"?83:e.status==="joining"?84:85),l(4),x(e.description?86:-1),l(7),x(e.discovery_source?93:-1),l(),x(e.discovery_keyword?94:-1),l(),x(e.created_at?95:-1),l(3),w(e.is_saved?"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30":"bg-slate-700 text-slate-300 hover:bg-slate-600"),l(),v(" ",e.is_saved?"\u2B50 \u5DF2\u6536\u85CF":"\u2606 \u6536\u85CF"," "),l(),x(e.username?100:-1),l(4),x(e.status!=="joined"&&e.status!=="monitoring"?104:105)}}function Zt(i,t){i&1&&(o(0,"p",224),a(1),n()),i&2&&(l(),D(t.title))}function ei(i,t){if(i&1&&(o(0,"div",234),a(1),n()),i&2){let e=c();l(),v("@",e.username)}}function ti(i,t){if(i&1&&(o(0,"div",225)(1,"div",89)(2,"div",232),a(3),n(),o(4,"div",130)(5,"div",233),a(6),n(),p(7,ei,2,1,"div",234),o(8,"div",235)(9,"span"),a(10),j(11,"number"),n()()()()()),i&2){let e=t;l(3),v(" ",(e.title==null?null:e.title.charAt(0))||"G"," "),l(3),D(e.title),l(),x(e.username?7:-1),l(3),v("\u{1F465} ",N(11,4,e.member_count)," \u6210\u54E1")}}function ii(i,t){if(i&1&&(o(0,"div",241),a(1),n()),i&2){let e=c(2).$implicit;l(),D(e.display_name)}}function ni(i,t){if(i&1){let e=S();o(0,"label",237)(1,"input",238),d("change",function(){m(e);let s=c().$implicit,u=c(2);return _(u.joinDialogSelectedPhone.set(s.phone))}),n(),o(2,"div",239)(3,"div",240),a(4),n(),p(5,ii,2,1,"div",241),n(),V(6,"span",242),n()}if(i&2){let e=c().$implicit,r=c(2);w(r.joinDialogSelectedPhone()===e.phone?"bg-cyan-500/20 border-2 border-cyan-500":"bg-slate-700/30 border-2 border-transparent hover:bg-slate-700/50"),l(),y("value",e.phone)("checked",r.joinDialogSelectedPhone()===e.phone),l(3),D(e.phone),l(),x(e.display_name?5:-1)}}function oi(i,t){if(i&1&&p(0,ni,7,6,"label",236),i&2){let e=t.$implicit;x(e.status==="Online"?0:-1)}}function ri(i,t){if(i&1){let e=S();o(0,"div",220),d("click",function(){m(e);let s=c();return _(s.cancelJoinDialog())}),o(1,"div",221),d("click",function(s){return m(e),_(s.stopPropagation())}),o(2,"div",222)(3,"h3",223),a(4," \u{1F680} \u9078\u64C7\u52A0\u5165\u5E33\u865F "),n(),p(5,Zt,2,1,"p",224),n(),p(6,ti,12,6,"div",225),o(7,"div",226)(8,"div",227),a(9,"\u9078\u64C7\u8981\u4F7F\u7528\u7684\u5E33\u865F\uFF1A"),n(),o(10,"div",228),I(11,oi,1,1,null,null,Z),n()(),o(13,"div",229)(14,"button",230),d("click",function(){m(e);let s=c();return _(s.cancelJoinDialog())}),a(15," \u53D6\u6D88 "),n(),o(16,"button",231),d("click",function(){m(e);let s=c();return _(s.confirmJoinFromDialog())}),a(17," \u78BA\u8A8D\u52A0\u5165 "),n()()()()}if(i&2){let e,r,s=c();l(5),x((e=s.joinDialogResource())?5:-1,e),l(),x((r=s.joinDialogResource())?6:-1,r),l(5),A(s.mergedAccounts()),l(5),y("disabled",!s.joinDialogSelectedPhone())}}var U=class i{constructor(){this.toast=F(L);this.ipc=F(H);this.accountService=F(Q);this.dialogService=F(me);this.groupService=null;this.Math=Math;this._internalAccounts=b([]);this._internalResources=b([]);this._internalSearching=b(!1);this._internalSelectedAccount=b(null);this._internalSearchError=b({hasError:!1,message:""});this._historyKeywords=b([]);this.ipcCleanup=[];this.searchProgress=b("");this.isFetchingDetails=b(!1);this.newDiscoveredCount=b(0);this.existingCount=b(0);this.currentPage=b(1);this.pageSize=b(50);this.pageSizeOptions=[20,50,100,200];this.searchTimeoutId=null;this.SEARCH_BASE_TIMEOUT_MS=6e4;this.HEARTBEAT_TIMEOUT_MS=15e3;this.lastProgressTime=0;this.resources=M([]);this.isSearching=M(!1);this.selectedAccount=M(null);this.availableAccounts=M([]);this.historyKeywords=M([]);this.currentKeyword=M("");this.searchError=M({hasError:!1,message:""});this.savedResourceIds=M(new Set);this.mergedAccounts=T(()=>{let t=this._internalAccounts(),e=this.availableAccounts();return t.length>0?t:e});this.mergedResources=T(()=>{let t=this._internalResources(),e=this.resources();return t.length>0?t:e});this.pagedResources=T(()=>{let t=this.filteredResources(),e=this.currentPage(),r=this.pageSize(),s=(e-1)*r,u=s+r;return t.slice(s,u)});this.totalPages=T(()=>{let t=this.filteredResources().length,e=this.pageSize();return Math.ceil(t/e)||1});this.pageNumbers=T(()=>{let t=this.totalPages(),e=this.currentPage(),r=[],s=Math.max(1,e-2),u=Math.min(t,e+2);for(let C=s;C<=u;C++)r.push(C);return r});this.mergedSearching=T(()=>this._internalSearching()||this.isSearching());this.mergedSelectedAccount=T(()=>this._internalSelectedAccount()||this.selectedAccount());this.mergedSearchError=T(()=>{let t=this._internalSearchError();return t.hasError?t:this.searchError()});this.mergedHistoryKeywords=T(()=>{let t=this._historyKeywords(),e=this.historyKeywords();return t.length>0?t:e});this.searchEvent=B();this.selectAccountEvent=B();this.saveResourceEvent=B();this.unsaveResourceEvent=B();this.joinResourceEvent=B();this.extractMembersEvent=B();this.clearResultsEvent=B();this.searchQuery="";this.filterType="all";this.showAccountSelector=b(!1);this.showSuggestions=b(!1);this.copiedId=b("");this.copiedLink=b("");this.selectedSources=b(["telegram","jiso"]);this.showJoinAccountDialog=b(!1);this.joinDialogResource=b(null);this.joinDialogSelectedPhone=b("");this.joiningResourceIds=b(new Set);this.showAdvancedFilter=b(!1);this.filterMemberMin=b(null);this.filterMemberMax=b(null);this.filterSource=b("all");this.filterJoinStatus=b("all");this.filterHasId=b(!1);this.showDetailDialog=b(!1);this.selectedResource=b(null);this.selectedResourceIndex=b(-1);this.selectedForBatch=b(new Set);this.searchSources=[{id:"telegram",name:"\u5B98\u65B9\u641C\u7D22",icon:"\u{1F4F1}",tag:"\u7A69\u5B9A",tagClass:"bg-green-500/20 text-green-400",disabled:!1},{id:"jiso",name:"\u4E2D\u6587\u641C\u7D22",icon:"\u{1F50D}",tag:"\u63A8\u85A6",tagClass:"bg-yellow-500/20 text-yellow-400",disabled:!1},{id:"tgstat",name:"TGStat",icon:"\u{1F4CA}",tag:"\u958B\u767C\u4E2D",tagClass:"bg-slate-600 text-slate-400",disabled:!0},{id:"local",name:"\u672C\u5730\u7D22\u5F15",icon:"\u{1F4BE}",tag:null,tagClass:"",disabled:!1}];this.hotKeywords=["\u652F\u4ED8","USDT","\u4EA4\u6613","\u62DB\u8058","\u4EE3\u8CFC","\u52A0\u5BC6\u8CA8\u5E63","\u96FB\u5F71","\u8CC7\u6E90\u5206\u4EAB"];this.filteredResources=T(()=>{let t=this.mergedResources();this.filterType!=="all"&&(t=t.filter(C=>this.filterType==="channel"?C.resource_type==="channel":C.resource_type!=="channel"));let e=this.filterMemberMin(),r=this.filterMemberMax();e!==null&&e>0&&(t=t.filter(C=>C.member_count>=e)),r!==null&&r>0&&(t=t.filter(C=>C.member_count<=r));let s=this.filterSource();s!=="all"&&(t=t.filter(C=>C.discovery_source===s));let u=this.filterJoinStatus();return u==="joined"?t=t.filter(C=>C.status==="joined"||C.status==="monitoring"):u==="not_joined"&&(t=t.filter(C=>C.status!=="joined"&&C.status!=="monitoring")),this.filterHasId()&&(t=t.filter(C=>C.telegram_id&&C.telegram_id.trim()!=="")),t});this.savedCount=T(()=>this.mergedResources().filter(t=>t.is_saved).length);this.canNavigatePrev=T(()=>this.selectedResourceIndex()>0);this.canNavigateNext=T(()=>{let t=this.filteredResources();return this.selectedResourceIndex()<t.length-1});this.pendingJoinResource=null;this.selectedCount=T(()=>this.selectedForBatch().size);this.activeFilterCount=T(()=>{let t=0;return this.filterType!=="all"&&t++,this.filterMemberMin()!==null&&this.filterMemberMin()>0&&t++,this.filterMemberMax()!==null&&this.filterMemberMax()>0&&t++,this.filterSource()!=="all"&&t++,this.filterJoinStatus()!=="all"&&t++,this.filterHasId()&&t++,t})}getResourceTrackId(t,e){let r=[`idx-${e}`];return t.id&&t.id!==0&&r.push(`id-${t.id}`),t.telegram_id&&t.telegram_id.toString().trim()!==""&&r.push(`tg-${t.telegram_id}`),t.username&&t.username.trim()!==""&&r.push(`u-${t.username}`),t.source&&r.push(`src-${t.source}`),r.join("_")}ngOnInit(){document.addEventListener("click",this.handleOutsideClick.bind(this)),document.addEventListener("keydown",this.handleKeydown.bind(this)),this.loadAccounts(),this.setupIpcListeners(),this.loadSearchHistory(),this.restoreSearchResults()}saveSearchResults(){try{let t=this._internalResources(),e=this.searchQuery;if(t.length>0){let r={query:e,resources:t,timestamp:Date.now(),newCount:this.newDiscoveredCount(),existingCount:this.existingCount()};sessionStorage.setItem("search-discovery-results",JSON.stringify(r)),console.log(`[SearchDiscovery] \u5DF2\u4FDD\u5B58 ${t.length} \u500B\u641C\u7D22\u7D50\u679C\u5230 sessionStorage`)}}catch(t){console.error("[SearchDiscovery] \u4FDD\u5B58\u641C\u7D22\u7D50\u679C\u5931\u6557:",t)}}restoreSearchResults(){try{let t=sessionStorage.getItem("search-discovery-results");if(t){let e=JSON.parse(t);Date.now()-(e.timestamp||0)<1800*1e3?(this._internalResources.set(e.resources||[]),this.searchQuery=e.query||"",this.newDiscoveredCount.set(e.newCount||0),this.existingCount.set(e.existingCount||0),console.log(`[SearchDiscovery] \u5DF2\u6062\u5FA9 ${e.resources?.length||0} \u500B\u641C\u7D22\u7D50\u679C`)):sessionStorage.removeItem("search-discovery-results")}}catch(t){console.error("[SearchDiscovery] \u6062\u5FA9\u641C\u7D22\u7D50\u679C\u5931\u6557:",t)}}ngOnDestroy(){document.removeEventListener("click",this.handleOutsideClick.bind(this)),document.removeEventListener("keydown",this.handleKeydown.bind(this)),this.ipcCleanup.forEach(t=>t()),this.clearSearchTimeout()}loadAccounts(){let e=this.accountService.accounts().filter(r=>r.status==="Online");this._internalAccounts.set(e.map(r=>({id:r.id,phone:r.phone,status:r.status}))),!this._internalSelectedAccount()&&e.length>0&&this._internalSelectedAccount.set({id:e[0].id,phone:e[0].phone,status:e[0].status}),console.log("[SearchDiscovery] \u8F09\u5165\u5E33\u865F:",e.length,"\u500B\u5728\u7DDA")}setupIpcListeners(){let t=this.ipc.on("accounts-updated",h=>{let g=h.filter(E=>E.status==="Online");this._internalAccounts.set(g.map(E=>({id:E.id,phone:E.phone,status:E.status})));let f=this._internalSelectedAccount();f?!g.find(R=>R.id===f.id)&&g.length>0&&this._internalSelectedAccount.set({id:g[0].id,phone:g[0].phone,status:g[0].status}):g.length>0&&this._internalSelectedAccount.set({id:g[0].id,phone:g[0].phone,status:g[0].status}),console.log("[SearchDiscovery] \u5E33\u865F\u66F4\u65B0:",g.length,"\u500B\u5728\u7DDA")}),e=this.ipc.on("search-batch",h=>{if(this.resetHeartbeat(),h.success&&h.groups){let g=h.groups.map((f,E)=>({id:E+1,telegram_id:f.telegram_id||null,title:f.title,username:f.username,description:f.description,member_count:f.member_count||f.members_count||0,resource_type:f.type||"group",status:"discovered",overall_score:f.score,discovery_source:"search",discovery_keyword:this.searchQuery,source:f.source,link:f.link}));this._internalResources.set(g),h.message&&this.searchProgress.set(h.message),console.log(`[SearchDiscovery] \u6536\u5230\u6279\u6B21\u7D50\u679C: ${g.length} \u500B (\u4F86\u6E90: ${h.source})`)}}),r=this.ipc.on("search-results",h=>{if(this.clearSearchTimeout(),this._internalSearching.set(!1),this.searchProgress.set(""),this.isFetchingDetails.set(!1),h.success&&h.groups){let g=h.groups.map((k,J)=>({id:J+1,telegram_id:k.telegram_id||null,title:k.title,username:k.username,description:k.description,member_count:k.member_count||k.members_count||0,resource_type:k.type||"group",status:k.status||"discovered",joined_phone:k.joined_phone||k.joined_by_phone||null,overall_score:k.score,discovery_source:"search",discovery_keyword:this.searchQuery,source:k.source,link:k.link,is_new:k.is_new,member_change:k.member_change}));this._internalResources.set(g),this._internalSearchError.set({hasError:!1,message:""}),this.saveSearchResults();let f=h.new_count||0,E=h.existing_count||0;this.newDiscoveredCount.set(f),this.existingCount.set(E);let R=`\u641C\u7D22\u5B8C\u6210\uFF01\u5171\u627E\u5230 ${g.length} \u500B\u7D50\u679C`;f>0&&(R+=`\uFF0C\u5176\u4E2D ${f} \u500B\u70BA\u65B0\u767C\u73FE`),this.toast.success(R)}else this._internalSearchError.set({hasError:!0,message:h.error||"\u641C\u7D22\u5931\u6557"})}),s=this.ipc.on("search-error",h=>{this.clearSearchTimeout(),this._internalSearching.set(!1),this.searchProgress.set(""),this.isFetchingDetails.set(!1),this._internalSearchError.set({hasError:!0,message:h.message||"\u641C\u7D22\u8ACB\u6C42\u5931\u6557"}),this.toast.error("\u641C\u7D22\u5931\u6557: "+(h.message||"\u672A\u77E5\u932F\u8AA4"))}),u=this.ipc.on("jiso-search-progress",h=>{if(this.resetHeartbeat(),this.searchProgress.set(h.message),h.status==="basic_results"&&h.data?.results){let g=h.data.results.map((f,E)=>({id:E+1,telegram_id:f.telegram_id||null,title:f.title,username:f.username,description:f.description,member_count:f.member_count||0,resource_type:f.chat_type||f.type||"group",link:f.link,status:"discovered",overall_score:f.score,discovery_source:"search",discovery_keyword:this.searchQuery}));this._internalResources.set(g),this.isFetchingDetails.set(!0),this.toast.info(`\u5DF2\u8F09\u5165 ${g.length} \u500B\u57FA\u790E\u7D50\u679C\uFF0C\u6B63\u5728\u7372\u53D6\u8A73\u60C5...`)}else h.status==="fetching_details"?this.isFetchingDetails.set(!0):h.status==="completed"&&(this.isFetchingDetails.set(!1),this.searchProgress.set(""))}),C=this.ipc.on("join-and-monitor-complete",h=>{if(h.resourceId&&this.joiningResourceIds.update(g=>{let f=new Set(g);return f.delete(h.resourceId),f}),h.success){let f=this._internalResources().map(E=>h.resourceId&&E.id===h.resourceId||h.username&&E.username===h.username||h.telegramId&&E.telegram_id===h.telegramId?(this.joiningResourceIds.update(k=>{let J=new Set(k);return J.delete(E.id),J}),te(ee({},E),{status:"joined",member_count:h.memberCount||E.member_count,joined_phone:h.phone||E.joined_phone})):E);this._internalResources.set(f),this.saveSearchResults(),console.log(`[SearchDiscovery] \u8CC7\u6E90\u72C0\u614B\u5DF2\u66F4\u65B0: ${h.username||h.telegramId} \u2192 joined (${h.phone})`)}else(h.username||h.telegramId)&&this._internalResources().forEach(f=>{(h.username&&f.username===h.username||h.telegramId&&f.telegram_id===h.telegramId)&&this.joiningResourceIds.update(E=>{let R=new Set(E);return R.delete(f.id),R})})});this.ipcCleanup.push(t,e,r,s,u,C)}loadSearchHistory(){try{let t=localStorage.getItem("search-history");t&&this._historyKeywords.set(JSON.parse(t))}catch(t){console.warn("[SearchDiscovery] \u52A0\u8F09\u641C\u7D22\u6B77\u53F2\u5931\u6557:",t)}}saveSearchHistory(t){let e=this._historyKeywords(),r=[t,...e.filter(s=>s!==t)].slice(0,10);this._historyKeywords.set(r);try{localStorage.setItem("search-history",JSON.stringify(r))}catch(s){console.warn("[SearchDiscovery] \u4FDD\u5B58\u641C\u7D22\u6B77\u53F2\u5931\u6557:",s)}}handleKeydown(t){if(this.showDetailDialog())switch(t.key){case"Escape":this.closeDetail();break;case"ArrowLeft":this.canNavigatePrev()&&this.navigatePrev();break;case"ArrowRight":this.canNavigateNext()&&this.navigateNext();break}}handleOutsideClick(t){t.target.closest(".relative")||this.showAccountSelector.set(!1)}doSearch(){if(!this.searchQuery.trim()){this.toast.warning("\u8ACB\u8F38\u5165\u641C\u7D22\u95DC\u9375\u8A5E");return}if(this.selectedSources().length===0){this.toast.warning("\u8ACB\u81F3\u5C11\u9078\u64C7\u4E00\u500B\u641C\u7D22\u6E20\u9053");return}let t=this.mergedSelectedAccount();if(!t){this.toast.warning("\u8ACB\u5148\u9078\u64C7\u4E00\u500B\u5728\u7DDA\u5E33\u865F"),this.loadAccounts();return}let e=this.searchQuery.trim(),r=this.selectedSources();console.log("[SearchDiscovery] \u958B\u59CB\u641C\u7D22:",{query:e,sources:r,account:t.phone}),this.clearSearchTimeout(),this.resetPagination(),this._internalSearching.set(!0),this._internalSearchError.set({hasError:!1,message:""}),this.saveSearchHistory(e),this.lastProgressTime=Date.now(),this.startHeartbeatCheck(),this.ipc.send("search-groups",{keyword:e,sources:r,account_id:t.id,account_phone:t.phone,limit:500}),this.searchEvent.emit({query:e,sources:r})}clearSearchTimeout(){this.searchTimeoutId&&(clearTimeout(this.searchTimeoutId),this.searchTimeoutId=null)}startHeartbeatCheck(){this.clearSearchTimeout(),this.searchTimeoutId=setTimeout(()=>{if(!this._internalSearching())return;let t=Date.now(),e=t-this.lastProgressTime,r=t-(this.lastProgressTime-e);e>this.HEARTBEAT_TIMEOUT_MS?(console.warn("[SearchDiscovery] \u641C\u7D22\u8D85\u6642 - \u7121\u9032\u5EA6\u66F4\u65B0",{timeSinceLastProgress:e,totalElapsed:r}),this.handleSearchTimeout()):this.startHeartbeatCheck()},5e3)}handleSearchTimeout(){this.clearSearchTimeout(),this._internalSearching.set(!1),this.searchProgress.set(""),this.isFetchingDetails.set(!1),this._internalSearchError.set({hasError:!0,message:"\u641C\u7D22\u8D85\u6642\uFF0C\u8ACB\u7A0D\u5F8C\u91CD\u8A66"}),this.toast.warning("\u641C\u7D22\u8D85\u6642\uFF0C\u8ACB\u7A0D\u5F8C\u91CD\u8A66")}resetHeartbeat(){this.lastProgressTime=Date.now()}quickSearch(t){this.searchQuery=t,this.showSuggestions.set(!1),this.doSearch()}goToPage(t){let e=this.totalPages();t>=1&&t<=e&&this.currentPage.set(t)}nextPage(){this.goToPage(this.currentPage()+1)}prevPage(){this.goToPage(this.currentPage()-1)}firstPage(){this.goToPage(1)}lastPage(){this.goToPage(this.totalPages())}changePageSize(t){this.pageSize.set(t),this.currentPage.set(1)}resetPagination(){this.currentPage.set(1)}toggleSource(t){if(this.searchSources.find(s=>s.id===t)?.disabled){console.log("\u26A0\uFE0F \u8A72\u641C\u7D22\u6E20\u9053\u6B63\u5728\u958B\u767C\u4E2D:",t);return}let r=this.selectedSources();r.includes(t)?this.selectedSources.set(r.filter(s=>s!==t)):this.selectedSources.set([...r,t])}hideSuggestions(){setTimeout(()=>this.showSuggestions.set(!1),200)}clearResults(){this.clearResultsEvent.emit()}selectAccount(t){if(this._internalSelectedAccount.set(t),this.selectAccountEvent.emit(t),this.showAccountSelector.set(!1),this.pendingJoinResource){let e=this.pendingJoinResource;if(t.status!=="Online"){this.toast.warning(`\u5E33\u865F ${t.phone} \u672A\u9023\u63A5\uFF0C\u7121\u6CD5\u52A0\u5165\u7FA4\u7D44`);return}setTimeout(()=>{this.executeJoin(e,t.phone)},100)}}openDetail(t){let r=this.filteredResources().findIndex(s=>s.telegram_id&&s.telegram_id===t.telegram_id||s.id&&s.id===t.id);this.selectedResource.set(t),this.selectedResourceIndex.set(r),this.showDetailDialog.set(!0)}closeDetail(){this.showDetailDialog.set(!1),this.selectedResource.set(null),this.selectedResourceIndex.set(-1)}navigatePrev(){let t=this.filteredResources(),e=this.selectedResourceIndex();if(e>0){let r=t[e-1];this.selectedResource.set(r),this.selectedResourceIndex.set(e-1)}}navigateNext(){let t=this.filteredResources(),e=this.selectedResourceIndex();if(e<t.length-1){let r=t[e+1];this.selectedResource.set(r),this.selectedResourceIndex.set(e+1)}}toggleSave(t){t.is_saved?this.unsaveResourceEvent.emit(t):this.saveResourceEvent.emit(t)}openJoinDialog(t){if(console.log("[SearchDiscovery] \u6253\u958B\u52A0\u5165\u5C0D\u8A71\u6846:",t.title),!t.username&&!t.telegram_id){this.toast.warning("\u7121\u6CD5\u52A0\u5165\uFF1A\u7F3A\u5C11\u7FA4\u7D44\u6A19\u8B58");return}if(this.joiningResourceIds().has(t.id)){this.toast.warning("\u6B63\u5728\u52A0\u5165\u4E2D\uFF0C\u8ACB\u7A0D\u5019...");return}let e=this.mergedAccounts().filter(r=>r.status==="Online");if(e.length===0){this.toast.warning("\u6C92\u6709\u5728\u7DDA\u5E33\u865F\uFF0C\u8ACB\u5148\u767B\u9304\u5E33\u865F");return}if(e.length===1){this.executeJoin(t,e[0].phone);return}this.joinDialogResource.set(t),this.joinDialogSelectedPhone.set(""),this.showJoinAccountDialog.set(!0)}confirmJoinFromDialog(){let t=this.joinDialogResource(),e=this.joinDialogSelectedPhone();if(!t){this.toast.warning("\u8ACB\u9078\u64C7\u8981\u52A0\u5165\u7684\u7FA4\u7D44");return}if(!e){this.toast.warning("\u8ACB\u9078\u64C7\u8981\u4F7F\u7528\u7684\u5E33\u865F");return}this.showJoinAccountDialog.set(!1),this.executeJoin(t,e)}cancelJoinDialog(){this.showJoinAccountDialog.set(!1),this.joinDialogResource.set(null),this.joinDialogSelectedPhone.set("")}joinResource(t){if(console.log("[SearchDiscovery] \u52A0\u5165\u7FA4\u7D44:",t.title,t.username),!t.username&&!t.telegram_id){this.toast.warning("\u7121\u6CD5\u52A0\u5165\uFF1A\u7F3A\u5C11\u7FA4\u7D44\u6A19\u8B58");return}if(this.joiningResourceIds().has(t.id)){this.toast.warning("\u6B63\u5728\u52A0\u5165\u4E2D\uFF0C\u8ACB\u7A0D\u5019...");return}let e=this.mergedSelectedAccount();if(!e){this.pendingJoinResource=t,this.showAccountSelector.set(!0),this.toast.warning("\u8ACB\u9078\u64C7\u4E00\u500B\u5E33\u865F\u4F86\u52A0\u5165\u7FA4\u7D44");return}if(e.status!=="Online"){this.toast.warning(`\u5E33\u865F ${e.phone} \u672A\u9023\u63A5\uFF0C\u8ACB\u9078\u64C7\u5DF2\u9023\u63A5\u7684\u5E33\u865F`),this.pendingJoinResource=t,this.showAccountSelector.set(!0);return}this.executeJoin(t,e.phone)}executeJoin(t,e){this.joiningResourceIds.update(r=>{let s=new Set(r);return s.add(t.id),s}),this.toast.info(`\u6B63\u5728\u4F7F\u7528 ${e.slice(0,4)}**** \u52A0\u5165\u7FA4\u7D44: ${t.title||t.username}...`),this.ipc.send("join-and-monitor-resource",{resourceId:t.id||0,username:t.username,telegramId:t.telegram_id,title:t.title,phone:e}),this.pendingJoinResource=null,this.joinResourceEvent.emit(t)}isJoining(t){return this.joiningResourceIds().has(t.id)}extractMembers(t){if(console.log("[SearchDiscovery] \u6253\u958B\u63D0\u53D6\u6210\u54E1\u5C0D\u8A71\u6846:",t.title),!t.telegram_id&&!t.username){this.toast.warning("\u7121\u6CD5\u63D0\u53D6\uFF1A\u7F3A\u5C11\u7FA4\u7D44\u6A19\u8B58");return}let e=t.joined_phone||this.mergedSelectedAccount()?.phone,r={id:String(t.id||t.telegram_id||""),name:t.title||"\u672A\u77E5\u7FA4\u7D44",url:t.username?`https://t.me/${t.username}`:"",telegramId:t.telegram_id||"",memberCount:t.member_count||0,accountPhone:e,resourceType:t.resource_type||"group"};console.log("[SearchDiscovery] \u6253\u958B\u63D0\u53D6\u6210\u54E1\u5C0D\u8A71\u6846\uFF0C\u7FA4\u7D44\u4FE1\u606F:",r),this.dialogService.openMemberExtraction(r),this.extractMembersEvent.emit(t)}toggleBatchSelect(t,e){e.stopPropagation();let r=t.telegram_id||String(t.id),s=new Set(this.selectedForBatch());s.has(r)?s.delete(r):s.add(r),this.selectedForBatch.set(s)}isSelectedForBatch(t){let e=t.telegram_id||String(t.id);return this.selectedForBatch().has(e)}selectAllVisible(){let t=this.filteredResources().map(e=>e.telegram_id||String(e.id));this.selectedForBatch.set(new Set(t))}clearSelection(){this.selectedForBatch.set(new Set)}invertSelection(){let t=this.selectedForBatch(),e=this.filteredResources().map(s=>s.telegram_id||String(s.id)),r=new Set(e.filter(s=>!t.has(s)));this.selectedForBatch.set(r)}batchSaveSelected(){let t=this.filteredResources().filter(e=>this.selectedForBatch().has(e.telegram_id||String(e.id))&&!e.is_saved);if(t.length===0){this.toast.info("\u672A\u9078\u4E2D\u53EF\u6536\u85CF\u7684\u8CC7\u6E90");return}t.forEach(e=>this.saveResourceEvent.emit(e)),this.toast.success(`\u5DF2\u6536\u85CF ${t.length} \u500B\u8CC7\u6E90`),this.clearSelection()}copySelectedIds(){let t=this.filteredResources().filter(e=>this.selectedForBatch().has(e.telegram_id||String(e.id))).map(e=>e.telegram_id).filter(e=>e);if(t.length===0){this.toast.warning("\u9078\u4E2D\u7684\u8CC7\u6E90\u4E2D\u6C92\u6709\u53EF\u8907\u88FD\u7684 ID");return}navigator.clipboard.writeText(t.join(`
`)).then(()=>{this.toast.success(`\u5DF2\u8907\u88FD ${t.length} \u500B ID`)}).catch(()=>{this.toast.error("\u8907\u88FD\u5931\u6557")})}batchSave(){let t=this.filteredResources().filter(e=>!e.is_saved);if(t.length===0){this.toast.info("\u6240\u6709\u7D50\u679C\u90FD\u5DF2\u6536\u85CF");return}t.forEach(e=>this.saveResourceEvent.emit(e)),this.toast.success(`\u5DF2\u6536\u85CF ${t.length} \u500B\u8CC7\u6E90`)}exportResults(){let t=this.filteredResources();if(t.length===0){this.toast.warning("\u6C92\u6709\u53EF\u5C0E\u51FA\u7684\u7D50\u679C");return}let e=t.map((g,f)=>({\u5E8F\u865F:f+1,ID:g.telegram_id||"",\u540D\u7A31:g.title||"",Username:g.username||"",\u985E\u578B:g.resource_type==="channel"?"\u983B\u9053":"\u7FA4\u7D44",\u6210\u54E1\u6578:g.member_count||0,\u63CF\u8FF0:(g.description||"").replace(/"/g,'""').substring(0,200),\u9023\u7D50:g.username?`https://t.me/${g.username}`:"",\u4F86\u6E90:g.source||"search"})),s=[["\u5E8F\u865F","ID","\u540D\u7A31","Username","\u985E\u578B","\u6210\u54E1\u6578","\u63CF\u8FF0","\u9023\u7D50","\u4F86\u6E90"].join(","),...e.map(g=>[g.\u5E8F\u865F,`"${g.ID}"`,`"${g.\u540D\u7A31}"`,g.Username,g.\u985E\u578B,g.\u6210\u54E1\u6578,`"${g.\u63CF\u8FF0}"`,g.\u9023\u7D50,g.\u4F86\u6E90].join(","))].join(`
`),u=new Blob(["\uFEFF"+s],{type:"text/csv;charset=utf-8;"}),C=document.createElement("a");C.href=URL.createObjectURL(u);let h=this.searchQuery||"all";C.download=`telegram-search-${h}-${t.length}\u689D-${new Date().toISOString().split("T")[0]}.csv`,C.click(),this.toast.success(`\u5DF2\u5C0E\u51FA ${t.length} \u689D\u641C\u7D22\u7D50\u679C`)}copyId(t,e){e.stopPropagation();let r=t.telegram_id||"";if(!r){this.toast.warning("\u7121\u53EF\u8907\u88FD\u7684 ID");return}navigator.clipboard.writeText(r).then(()=>{this.copiedId.set(r),console.log("\u2705 ID \u5DF2\u8907\u88FD:",r),setTimeout(()=>this.copiedId.set(""),2e3)}).catch(()=>{this.toast.error("\u8907\u88FD\u5931\u6557")})}copyLink(t,e){if(e.stopPropagation(),!t.username){this.toast.warning("\u8A72\u8CC7\u6E90\u6C92\u6709\u516C\u958B\u9023\u7D50");return}let r=`https://t.me/${t.username}`;navigator.clipboard.writeText(r).then(()=>{this.copiedLink.set(t.username),console.log("\u2705 \u9023\u7D50\u5DF2\u8907\u88FD:",r),setTimeout(()=>this.copiedLink.set(""),2e3)}).catch(()=>{this.toast.error("\u8907\u88FD\u5931\u6557")})}getSourceLabel(t){return{telegram:"TG\u5B98\u65B9",jiso:"\u4E2D\u6587\u641C\u7D22",tgstat:"TGStat",local:"\u672C\u5730"}[t]||t}formatScore(t){return t==null?"0.0/1.0":`${t.toFixed(1)}/1.0`}resetFilters(){this.filterType="all",this.filterMemberMin.set(null),this.filterMemberMax.set(null),this.filterSource.set("all"),this.filterJoinStatus.set("all"),this.filterHasId.set(!1)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=O({type:i,selectors:[["app-search-discovery"]],inputs:{resources:[1,"resources"],isSearching:[1,"isSearching"],selectedAccount:[1,"selectedAccount"],availableAccounts:[1,"availableAccounts"],historyKeywords:[1,"historyKeywords"],currentKeyword:[1,"currentKeyword"],searchError:[1,"searchError"],savedResourceIds:[1,"savedResourceIds"]},outputs:{searchEvent:"searchEvent",selectAccountEvent:"selectAccountEvent",saveResourceEvent:"saveResourceEvent",unsaveResourceEvent:"unsaveResourceEvent",joinResourceEvent:"joinResourceEvent",extractMembersEvent:"extractMembersEvent",clearResultsEvent:"clearResultsEvent"},decls:49,vars:12,consts:[[1,"h-full","flex","flex-col","bg-slate-900","text-white","overflow-hidden"],[1,"flex-shrink-0","px-6","py-4","border-b","border-slate-700/50","bg-slate-900/95","backdrop-blur-sm"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"text-2xl","font-bold","text-white","flex","items-center","gap-3"],[1,"text-2xl"],[1,"flex","items-center","gap-2","text-sm"],[1,"px-3","py-1","bg-cyan-500/20","text-cyan-400","rounded-lg"],[1,"px-3","py-1","bg-yellow-500/20","text-yellow-400","rounded-lg"],[1,"text-slate-400"],[1,"relative"],[1,"text-red-400","text-sm","px-3","py-1.5","bg-red-500/10","rounded-lg"],[1,"px-3","py-1.5","rounded-lg","text-sm","bg-blue-500/20","text-blue-400","animate-pulse"],[1,"px-3","py-1.5","rounded-lg","text-sm","bg-green-500/20","text-green-400"],[1,"flex-shrink-0","px-6","py-4","border-b","border-slate-700/30","bg-slate-800/30"],[1,"flex","gap-3","mb-4"],[1,"flex-1","relative"],["type","text","placeholder","\u8F38\u5165\u95DC\u9375\u8A5E\u641C\u7D22\u7FA4\u7D44\u548C\u983B\u9053...",1,"w-full","bg-slate-700/50","border","border-slate-600","rounded-xl","py-3","px-4","pl-12","text-white","text-lg","focus:ring-2","focus:ring-cyan-500/50","focus:border-cyan-500","transition-all",3,"ngModelChange","keyup.enter","focus","blur","ngModel"],[1,"absolute","left-4","top-1/2","-translate-y-1/2","text-slate-400","text-xl"],[1,"absolute","top-full","left-0","right-0","mt-2","bg-slate-800","border","border-slate-700","rounded-xl","shadow-xl","z-50","overflow-hidden"],[1,"px-8","py-3","bg-gradient-to-r","from-cyan-500","to-blue-500","hover:from-cyan-400","hover:to-blue-400","text-white","rounded-xl","font-medium","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","shadow-lg","shadow-cyan-500/25",3,"click","disabled"],[1,"text-sm","text-slate-400"],[1,"flex","gap-2"],[1,"flex","items-center","gap-2","px-3","py-1.5","rounded-lg","transition-all",3,"class","title"],[1,"flex","items-center","gap-2"],[1,"text-xs","px-2","py-1","bg-cyan-500/20","hover:bg-cyan-500/30","text-cyan-400","rounded","transition-all",3,"click"],[1,"text-xs","px-2","py-1","bg-slate-600/50","hover:bg-slate-600","text-slate-400","rounded","transition-all",3,"click"],[1,"flex-shrink-0","px-6","py-3","border-b","border-slate-700/30","bg-slate-800/20"],[1,"flex-1","overflow-y-auto","px-6","py-4"],[1,"space-y-4"],[1,"flex","flex-col","items-center","justify-center","h-full","text-center"],[1,"fixed","inset-0","bg-black/70","backdrop-blur-sm","flex","items-center","justify-center","z-50","p-4"],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","flex","items-center","justify-center","z-[100]"],[1,"flex","items-center","gap-2","px-3","py-1.5","bg-slate-700/50","hover:bg-slate-600/50","rounded-lg","border","border-slate-600/50",3,"click"],[1,"w-2","h-2","rounded-full"],[1,"font-mono","text-sm"],[1,"text-slate-400","text-xs"],[1,"absolute","top-full","right-0","mt-1","w-56","bg-slate-800","border","border-slate-700","rounded-lg","shadow-xl","z-50"],[1,"max-h-48","overflow-y-auto","p-1"],[1,"w-full","flex","items-center","gap-2","px-3","py-2","hover:bg-slate-700/50","rounded-lg","text-left"],[1,"w-full","flex","items-center","gap-2","px-3","py-2","hover:bg-slate-700/50","rounded-lg","text-left",3,"click"],[1,"font-mono","text-sm","flex-1"],[1,"p-3","border-b","border-slate-700"],[1,"p-3"],[1,"text-xs","text-slate-500","mb-2"],[1,"flex","flex-wrap","gap-2"],[1,"px-3","py-1.5","bg-orange-500/10","hover:bg-orange-500/20","text-orange-300","hover:text-orange-200","rounded-lg","text-sm","transition-all"],[1,"px-3","py-1.5","bg-slate-700/50","hover:bg-cyan-500/20","text-slate-300","hover:text-cyan-400","rounded-lg","text-sm","transition-all"],[1,"px-3","py-1.5","bg-slate-700/50","hover:bg-cyan-500/20","text-slate-300","hover:text-cyan-400","rounded-lg","text-sm","transition-all",3,"mousedown"],[1,"px-3","py-1.5","bg-orange-500/10","hover:bg-orange-500/20","text-orange-300","hover:text-orange-200","rounded-lg","text-sm","transition-all",3,"mousedown"],[1,"flex","items-center","gap-2","px-3","py-1.5","rounded-lg","transition-all",3,"title"],["type","checkbox",1,"hidden",3,"change","checked","disabled"],[1,"text-sm"],[1,"text-[10px]","px-1.5","py-0.5","rounded",3,"class"],[1,"text-[10px]","px-1.5","py-0.5","rounded"],[1,"text-slate-400","text-sm","flex","items-center","gap-3"],[1,"font-bold","text-white"],[1,"text-cyan-400","text-sm","flex","items-center","gap-1"],[1,"text-amber-400","text-sm","flex","items-center","gap-1"],[1,"bg-slate-700/50","border","border-slate-600","rounded-lg","py-1.5","px-3","text-white","text-sm",3,"ngModelChange","ngModel"],["value","all"],["value","group"],["value","channel"],[1,"px-3","py-1.5","rounded-lg","text-sm","flex","items-center","gap-1","transition-all",3,"click"],[1,"ml-1","px-1.5","py-0.5","bg-cyan-500","text-white","text-xs","rounded-full"],[1,"px-3","py-1.5","bg-yellow-500/20","text-yellow-400","rounded-lg","hover:bg-yellow-500/30","text-sm","flex","items-center","gap-1",3,"click"],[1,"px-3","py-1.5","rounded-lg","text-sm","flex","items-center","gap-1","transition-all",3,"click","disabled"],[1,"mt-3","pt-3","border-t","border-slate-700/30","grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"mt-3","pt-3","border-t","border-slate-700/30","flex","items-center","justify-between"],[1,"text-slate-400","text-sm"],[1,"px-3","py-1","bg-cyan-500/20","text-cyan-400","rounded-full","text-sm","font-medium"],[1,"text-green-400","text-xs"],[1,"text-slate-500","text-xs"],[1,"animate-spin"],[1,"animate-pulse"],[1,"text-xs","text-slate-400","mb-1","block"],["type","number","placeholder","\u6700\u5C11",1,"w-full","bg-slate-700/50","border","border-slate-600","rounded","py-1.5","px-2","text-white","text-sm",3,"change","value"],[1,"text-slate-500"],["type","number","placeholder","\u6700\u591A",1,"w-full","bg-slate-700/50","border","border-slate-600","rounded","py-1.5","px-2","text-white","text-sm",3,"change","value"],[1,"w-full","bg-slate-700/50","border","border-slate-600","rounded","py-1.5","px-2","text-white","text-sm",3,"change","value"],["value","telegram"],["value","jiso"],["value","local"],["value","joined"],["value","not_joined"],[1,"flex","items-center","gap-2","cursor-pointer"],["type","checkbox",1,"rounded","border-slate-500","bg-slate-700","text-cyan-500",3,"change","checked"],[1,"text-sm","text-slate-300"],[1,"text-xs","text-slate-400","hover:text-white","underline",3,"click"],[1,"flex","items-center","gap-3"],[1,"px-2","py-1","text-xs","bg-slate-700/50","hover:bg-slate-700","text-slate-300","rounded","transition-all",3,"click"],[1,"flex","items-center","gap-3","px-3","py-1.5","bg-cyan-500/10","rounded-lg","border","border-cyan-500/30"],[1,"text-cyan-400","text-sm","font-medium"],[1,"w-px","h-4","bg-slate-600"],[1,"px-2","py-1","text-xs","bg-yellow-500/20","hover:bg-yellow-500/30","text-yellow-400","rounded","transition-all",3,"click"],[1,"px-2","py-1","text-xs","bg-cyan-500/20","hover:bg-cyan-500/30","text-cyan-400","rounded","transition-all",3,"click"],[1,"animate-pulse","bg-slate-800/50","rounded-xl","p-4","border","border-slate-700/50"],[1,"flex","items-start","gap-4"],[1,"w-12","h-12","bg-slate-700","rounded-lg"],[1,"flex-1","space-y-2"],[1,"h-5","bg-slate-700","rounded","w-1/3"],[1,"h-4","bg-slate-700","rounded","w-1/4"],[1,"h-3","bg-slate-700","rounded","w-2/3"],[1,"max-w-md"],[1,"text-6xl","mb-4"],[1,"text-red-400","text-xl","mb-2"],[1,"text-slate-400","mb-4"],[1,"px-4","py-2","bg-cyan-500","hover:bg-cyan-600","text-white","rounded-lg",3,"click"],[1,"text-slate-300","text-xl","mb-2"],[1,"text-slate-500","mb-6"],[1,"flex","flex-wrap","justify-center","gap-2","max-w-lg"],[1,"text-slate-500","text-sm"],[1,"px-3","py-1.5","bg-slate-700/50","hover:bg-cyan-500/20","text-slate-400","hover:text-cyan-400","rounded-full","text-sm","transition-all"],[1,"px-3","py-1.5","bg-slate-700/50","hover:bg-cyan-500/20","text-slate-400","hover:text-cyan-400","rounded-full","text-sm","transition-all",3,"click"],[1,"flex","items-center","justify-between","mb-3","px-1"],[1,"text-white","font-bold"],[1,"text-cyan-400"],[1,"bg-slate-700/50","border","border-slate-600","rounded","px-2","py-1","text-sm","text-white",3,"ngModelChange","ngModel"],[3,"value"],[1,"space-y-3"],[1,"group","bg-gradient-to-r","from-slate-800/80","to-slate-800/40","rounded-xl","border","transition-all","duration-300","overflow-hidden","cursor-pointer",3,"class"],[1,"flex","items-center","justify-center","gap-2","mt-4","py-3","border-t","border-slate-700/50"],[1,"group","bg-gradient-to-r","from-slate-800/80","to-slate-800/40","rounded-xl","border","transition-all","duration-300","overflow-hidden","cursor-pointer",3,"click"],[1,"p-4","flex","items-start","gap-4"],[1,"flex-shrink-0","flex","flex-col","gap-2"],[1,"relative","cursor-pointer",3,"click"],["type","checkbox",1,"sr-only",3,"change","checked"],[1,"w-5","h-5","rounded","border-2","flex","items-center","justify-center","transition-all"],[1,"text-white","text-xs"],[1,"p-2","rounded-lg","transition-all",3,"click","title"],[1,"flex-1","min-w-0"],[1,"flex","items-center","gap-2","mb-2","flex-wrap"],[1,"px-2.5","py-1","text-xs","rounded-full","font-medium","flex-shrink-0"],[1,"px-2","py-0.5","text-xs","rounded-full","font-medium","bg-green-500/30","text-green-300","flex-shrink-0"],[1,"px-2","py-0.5","text-xs","rounded-full","font-medium","bg-cyan-500/30","text-cyan-300","flex-shrink-0","animate-pulse"],[1,"px-2","py-0.5","text-xs","rounded-full","font-medium","bg-slate-600/30","text-slate-400","flex-shrink-0"],[1,"font-semibold","text-white","truncate"],["target","_blank",1,"text-cyan-400","text-sm","hover:underline","flex-shrink-0",3,"href"],[1,"flex","items-center","gap-3","mb-2","bg-slate-900/50","rounded-lg","px-3","py-2"],[1,"text-slate-400","text-sm","mb-2","line-clamp-2"],[1,"flex","items-center","gap-4","text-sm","flex-wrap"],[1,"flex","items-center","gap-1","text-slate-400"],[1,"text-lg"],[1,"font-medium","text-white"],["title","\u76F8\u6BD4\u4E0A\u6B21\u589E\u52A0",1,"text-green-400","text-xs","ml-1"],["title","\u76F8\u6BD4\u4E0A\u6B21\u6E1B\u5C11",1,"text-red-400","text-xs","ml-1"],[1,"flex","items-center","gap-1.5"],[1,"text-xs","text-slate-500","font-mono"],[1,"px-2","py-0.5","bg-slate-700/50","text-slate-400","rounded","text-xs"],[1,"px-2","py-0.5","bg-green-500/20","text-green-400","rounded","text-xs"],[1,"flex-shrink-0","flex","flex-col","gap-2",3,"click"],[1,"flex","flex-col","items-center"],["disabled","",1,"px-4","py-2","bg-slate-600","text-slate-300","rounded-lg","text-sm","font-medium","cursor-wait","flex","items-center","gap-1"],[1,"px-4","py-2","bg-cyan-500","hover:bg-cyan-400","text-white","rounded-lg","text-sm","font-medium","transition-all","shadow-lg","shadow-cyan-500/20"],["disabled","","title","\u983B\u9053\u7121\u6CD5\u63D0\u53D6\u6210\u54E1",1,"px-4","py-2","bg-slate-500/20","text-slate-500","rounded-lg","text-sm","cursor-not-allowed"],["target","_blank",1,"text-cyan-400","text-sm","hover:underline","flex-shrink-0",3,"click","href"],[1,"font-mono","text-cyan-300","text-sm","select-all"],["title","\u8907\u88FD ID",1,"px-2","py-1","text-xs","rounded","transition-all",3,"click"],[1,"font-mono","text-slate-400","text-sm"],["title","\u52A0\u5165\u7FA4\u7D44\u5F8C\u53EF\u7372\u53D6\u5B8C\u6574\u6578\u5B57 ID",1,"text-xs","text-amber-400/80","bg-amber-500/10","px-2","py-0.5","rounded"],[1,"text-slate-600"],["title","\u8907\u88FD\u9023\u7D50",1,"px-2","py-1","text-xs","rounded","transition-all",3,"click"],[1,"text-yellow-400"],[1,"text-yellow-400","font-medium"],[1,"px-4","py-2","bg-green-500/20","text-green-400","rounded-lg","text-sm","text-center"],[1,"text-xs","text-slate-500","mt-1"],[1,"px-4","py-2","bg-cyan-500","hover:bg-cyan-400","text-white","rounded-lg","text-sm","font-medium","transition-all","shadow-lg","shadow-cyan-500/20",3,"click"],[1,"px-4","py-2","bg-purple-500/20","hover:bg-purple-500/30","text-purple-400","rounded-lg","text-sm","transition-all"],["disabled","","title","\u9700\u8981\u5148\u52A0\u5165\u7FA4\u7D44",1,"px-4","py-2","bg-slate-500/20","text-slate-500","rounded-lg","text-sm","cursor-not-allowed"],[1,"px-4","py-2","bg-purple-500/20","hover:bg-purple-500/30","text-purple-400","rounded-lg","text-sm","transition-all",3,"click"],[1,"px-3","py-1.5","rounded-lg","text-sm","transition-all",3,"click","disabled"],[1,"w-8","h-8","rounded-lg","text-sm","font-medium","transition-all",3,"class"],[1,"ml-2","text-sm","text-slate-400"],[1,"w-8","h-8","rounded-lg","text-sm","font-medium","transition-all",3,"click"],[1,"fixed","inset-0","bg-black/70","backdrop-blur-sm","flex","items-center","justify-center","z-50","p-4",3,"click"],[1,"bg-slate-800","rounded-2xl","w-full","max-w-2xl","max-h-[90vh]","overflow-hidden","shadow-2xl","border","border-slate-700",3,"click"],[1,"px-6","py-4","border-b","border-slate-700","flex","items-center","justify-between","bg-slate-800/95"],[1,"px-3","py-1","text-sm","rounded-full","font-medium"],[1,"text-xl","font-bold","text-white"],["title","\u4E0A\u4E00\u500B (\u2190 \u9375)",1,"p-2","rounded-lg","transition-all",3,"click","disabled"],["title","\u4E0B\u4E00\u500B (\u2192 \u9375)",1,"p-2","rounded-lg","transition-all",3,"click","disabled"],[1,"w-px","h-6","bg-slate-700","mx-1"],["title","\u95DC\u9589 (Esc \u9375)",1,"p-2","text-slate-400","hover:text-white","hover:bg-slate-700","rounded-lg","transition-all",3,"click"],[1,"p-6","overflow-y-auto","max-h-[calc(90vh-140px)]"],[1,"flex","items-start","gap-4","mb-6"],[1,"w-16","h-16","rounded-xl","bg-gradient-to-br","from-cyan-500","to-blue-600","flex","items-center","justify-center","text-3xl","flex-shrink-0"],[1,"text-2xl","font-bold","text-white","mb-1"],["target","_blank",1,"text-cyan-400","hover:underline",3,"href"],[1,"p-3","rounded-xl","transition-all",3,"click"],[1,"bg-slate-900/50","rounded-xl","p-4","mb-4"],[1,"text-slate-300","font-medium","mb-3","flex","items-center","gap-2"],[1,"grid","grid-cols-2","gap-4"],[1,"text-slate-500","text-sm","mb-1"],[1,"text-white"],["target","_blank",1,"text-cyan-400","hover:underline","text-sm",3,"href"],[1,"grid","grid-cols-3","gap-4"],[1,"text-center","p-3","bg-slate-800/50","rounded-lg"],[1,"text-2xl","font-bold","text-cyan-400"],[1,"text-xl","font-bold","text-yellow-400","mb-1"],[1,"text-cyan-400","font-mono","text-lg"],[1,"text-2xl","font-bold"],[1,"bg-slate-900/50","rounded-xl","p-4"],[1,"px-3","py-1","bg-slate-700","text-slate-300","rounded-full","text-sm"],[1,"px-3","py-1","bg-cyan-500/20","text-cyan-400","rounded-full","text-sm"],[1,"px-6","py-4","border-t","border-slate-700","bg-slate-800/95","flex","items-center","justify-between"],[1,"px-4","py-2","rounded-lg","transition-all","flex","items-center","gap-2",3,"click"],["target","_blank",1,"px-4","py-2","bg-slate-700","text-slate-300","hover:bg-slate-600","rounded-lg","flex","items-center","gap-2",3,"href"],[1,"px-4","py-2","bg-slate-700","text-slate-300","hover:bg-slate-600","rounded-lg",3,"click"],[1,"px-6","py-2","bg-cyan-500","hover:bg-cyan-400","text-white","rounded-lg","font-medium","transition-all","shadow-lg","shadow-cyan-500/20"],[1,"font-mono","text-cyan-300"],[1,"px-2","py-1","text-xs","rounded","transition-all",3,"click"],[1,"font-mono","text-slate-400"],["title","\u52A0\u5165\u7FA4\u7D44\u5F8C\u53EF\u7372\u53D6\u5B8C\u6574\u6578\u5B57 ID",1,"text-xs","text-amber-400/80"],["title","\u6B63\u5728\u540C\u6B65ID...",1,"text-xs","text-blue-400/80"],[1,"text-blue-400"],[1,"px-2","py-1","text-xs","bg-slate-700","text-slate-400","hover:bg-cyan-500/20","hover:text-cyan-400","rounded","transition-all",3,"click"],[1,"text-slate-400","whitespace-pre-wrap"],[1,"px-6","py-2","bg-cyan-500","hover:bg-cyan-400","text-white","rounded-lg","font-medium","transition-all","shadow-lg","shadow-cyan-500/20",3,"click"],[1,"px-6","py-2","bg-purple-500","hover:bg-purple-400","text-white","rounded-lg","font-medium","transition-all"],[1,"px-6","py-2","bg-purple-500","hover:bg-purple-400","text-white","rounded-lg","font-medium","transition-all",3,"click"],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","flex","items-center","justify-center","z-[100]",3,"click"],[1,"bg-slate-800","rounded-2xl","border","border-slate-700","shadow-2xl","w-[420px]","max-h-[80vh]","overflow-hidden",3,"click"],[1,"p-5","border-b","border-slate-700","bg-gradient-to-r","from-cyan-500/10","to-blue-500/10"],[1,"text-lg","font-bold","text-white","flex","items-center","gap-2"],[1,"text-sm","text-slate-400","mt-1","truncate"],[1,"p-4","border-b","border-slate-700/50","bg-slate-800/50"],[1,"p-4","max-h-[300px]","overflow-y-auto"],[1,"text-sm","text-slate-400","mb-3"],[1,"space-y-2"],[1,"p-4","border-t","border-slate-700","flex","justify-end","gap-3"],[1,"px-4","py-2","bg-slate-700","hover:bg-slate-600","text-slate-300","rounded-lg","transition-colors",3,"click"],[1,"px-6","py-2","bg-cyan-500","hover:bg-cyan-400","disabled:bg-slate-600","disabled:text-slate-400","disabled:cursor-not-allowed","text-white","rounded-lg","font-medium","transition-all",3,"click","disabled"],[1,"w-12","h-12","rounded-xl","bg-gradient-to-br","from-cyan-500","to-blue-600","flex","items-center","justify-center","text-2xl","font-bold","text-white"],[1,"font-medium","text-white","truncate"],[1,"text-sm","text-cyan-400"],[1,"text-xs","text-slate-500","flex","items-center","gap-2","mt-0.5"],[1,"flex","items-center","gap-3","p-3","rounded-xl","cursor-pointer","transition-all",3,"class"],[1,"flex","items-center","gap-3","p-3","rounded-xl","cursor-pointer","transition-all"],["type","radio",1,"w-4","h-4","text-cyan-500","bg-slate-700","border-slate-600","focus:ring-cyan-500",3,"change","value","checked"],[1,"flex-1"],[1,"font-mono","text-white"],[1,"text-xs","text-slate-400"],[1,"w-2","h-2","rounded-full","bg-green-400"]],template:function(e,r){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4)(5,"span",5),a(6,"\u{1F50D}"),n(),a(7," \u641C\u7D22\u767C\u73FE "),n(),o(8,"div",6)(9,"span",7),a(10),n(),o(11,"span",8),a(12),n()()(),o(13,"div",3)(14,"div",6)(15,"span",9),a(16,"\u4F7F\u7528\u5E33\u865F:"),n(),p(17,De,8,6,"div",10)(18,we,2,0,"span",11),n(),p(19,Ee,2,0,"span",12)(20,ke,2,0,"span",13),n()()(),o(21,"div",14)(22,"div",15)(23,"div",16)(24,"input",17),Y("ngModelChange",function(u){return X(r.searchQuery,u)||(r.searchQuery=u),u}),d("keyup.enter",function(){return r.doSearch()})("focus",function(){return r.showSuggestions.set(!0)})("blur",function(){return r.hideSuggestions()}),n(),o(25,"span",18),a(26,"\u{1F50D}"),n(),p(27,Ae,8,1,"div",19),n(),o(28,"button",20),d("click",function(){return r.doSearch()}),a(29),n()(),o(30,"div",2)(31,"div",3)(32,"span",21),a(33,"\u641C\u7D22\u6E20\u9053:"),n(),o(34,"div",22),I(35,Re,7,8,"label",23,Z),n()(),o(37,"div",24)(38,"button",25),d("click",function(){return r.selectedSources.set(["telegram","jiso"])}),a(39," \u63A8\u85A6\u7D44\u5408 "),n(),o(40,"button",26),d("click",function(){return r.clearResults()}),a(41," \u6E05\u7A7A\u7D50\u679C "),n()()()(),p(42,Ke,29,15,"div",27),o(43,"div",28),p(44,He,3,1,"div",29)(45,qe,3,1,"div",30)(46,Dt,22,5),n(),p(47,Yt,106,39,"div",31),p(48,ri,18,3,"div",32),n()),e&2){let s,u;l(10),v(" ",r.mergedResources().length," \u7D50\u679C "),l(2),v(" ",r.savedCount()," \u5DF2\u6536\u85CF "),l(5),x((s=r.mergedSelectedAccount())?17:18,s),l(2),x(r.mergedSearching()?19:20),l(5),G("ngModel",r.searchQuery),l(3),x(r.showSuggestions()&&!r.mergedSearching()?27:-1),l(),y("disabled",r.mergedSearching()||!r.searchQuery.trim()),l(),v(" ",r.mergedSearching()?"\u641C\u7D22\u4E2D...":"\u641C\u7D22"," "),l(6),A(r.searchSources),l(7),x(r.mergedResources().length>0||r.currentKeyword()?42:-1),l(2),x(r.mergedSearching()?44:r.filteredResources().length===0?45:46),l(3),x((u=r.showDetailDialog()&&r.selectedResource())?47:-1,u),l(),x(r.showJoinAccountDialog()?48:-1)}},dependencies:[K,z,ue,de,ae,ce,se,le,re,oe],styles:["[_nghost-%COMP%]{display:block;height:100%}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#64748b4d;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#64748b80}"]})}};var ge=class i{constructor(){this.i18n=F(pe);this.nav=F(xe);this.ipc=F(H);this.toast=F(L);this.membershipService=F(_e);this.accountService=F(Q);this.resourceService=F(he)}navigateTo(t){this.nav.navigateTo(t)}selectResource(t){this.resourceService.toggleSelection(t.id)}batchJoin(t){let e=t.map(r=>r.id).join(",");this.resourceService.batchJoin(e)}t(t,e){return this.i18n.t(t,e)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=O({type:i,selectors:[["app-resource-discovery-view"]],decls:1,vars:0,consts:[[3,"resourceSelected","batchJoin","navigateTo"]],template:function(e,r){e&1&&(o(0,"app-search-discovery",0),d("resourceSelected",function(u){return r.selectResource(u)})("batchJoin",function(u){return r.batchJoin(u)})("navigateTo",function(u){return r.navigateTo(u)}),n())},dependencies:[K,z,U],encapsulation:2,changeDetection:0})}};export{U as a,ge as b};
