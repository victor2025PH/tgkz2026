import{a as i}from"./chunk-TFMISNVG.js";import{b as s}from"./chunk-7U27PO57.js";import{g as c}from"./chunk-N7GMY4UM.js";import{R as t}from"./chunk-YLSLTE5F.js";var S=(e,n)=>{let r=t(s),a=t(c),l=!!window.electronAPI||!!window.electron;if(i.apiMode==="ipc"&&l)return!0;let o=r.accessToken(),u=localStorage.getItem("tgm_access_token");if(console.log("[AuthGuard] Checking auth:",{isAuthenticated:r.isAuthenticated(),hasServiceToken:!!o,hasLocalToken:!!u}),o&&o.length>10)return!0;if(u&&u.length>10)return console.log("[AuthGuard] Using localStorage token fallback"),!0;let h=n.url;return a.navigate(["/auth/login"],{queryParams:{returnUrl:h}}),!1},k=()=>{let e=t(s),n=t(c),r=e.isAuthenticated(),a=e.accessToken()&&(e.accessToken()?.length||0)>10;return!r||!a?!0:(n.navigate(["/dashboard"]),!1)};export{S as a,k as b};
