{
  "version": 3,
  "sources": ["src/services/security.service.ts", "src/auth/login.component.ts"],
  "sourcesContent": ["/**\r\n * å‰ç«¯å®‰å…¨æœå‹™\r\n * \r\n * P1.5: å®‰å…¨å¢å¼·\r\n * 1. CSRF Token ç®¡ç†\r\n * 2. ç™»å…¥å˜—è©¦é™åˆ¶\r\n * 3. å®‰å…¨é ­è™•ç†\r\n * 4. XSS é˜²è­·\r\n */\r\n\r\nimport { Injectable, signal, computed } from '@angular/core';\r\n\r\n// CSRF é…ç½®\r\nconst CSRF_CONFIG = {\r\n  COOKIE_NAME: 'csrf_token',\r\n  HEADER_NAME: 'X-CSRF-Token',\r\n  STORAGE_KEY: 'tgm_csrf_token'\r\n};\r\n\r\n// ç™»å…¥é™åˆ¶é…ç½®\r\nconst LOGIN_LIMIT_CONFIG = {\r\n  MAX_ATTEMPTS: 5,           // æœ€å¤§å˜—è©¦æ¬¡æ•¸\r\n  LOCKOUT_DURATION: 300,     // é–å®šæ™‚é•·ï¼ˆç§’ï¼‰\r\n  ATTEMPT_WINDOW: 900,       // å˜—è©¦çª—å£ï¼ˆç§’ï¼‰\r\n  STORAGE_KEY: 'tgm_login_attempts'\r\n};\r\n\r\ninterface LoginAttempt {\r\n  timestamp: number;\r\n  success: boolean;\r\n  email?: string;\r\n}\r\n\r\ninterface LoginLockout {\r\n  lockedUntil: number;\r\n  attempts: LoginAttempt[];\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FrontendSecurityService {\r\n  \r\n  // ==================== CSRF Token ç®¡ç† ====================\r\n  \r\n  private _csrfToken = signal<string>('');\r\n  readonly csrfToken = computed(() => this._csrfToken());\r\n  \r\n  constructor() {\r\n    // åˆå§‹åŒ–æ™‚å˜—è©¦å¾ Cookie ç²å– CSRF Token\r\n    this.refreshCsrfToken();\r\n  }\r\n  \r\n  /**\r\n   * å¾ Cookie åˆ·æ–° CSRF Token\r\n   */\r\n  refreshCsrfToken(): void {\r\n    const token = this.getCookie(CSRF_CONFIG.COOKIE_NAME);\r\n    if (token) {\r\n      this._csrfToken.set(token);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ç²å– CSRF Tokenï¼ˆç”¨æ–¼è«‹æ±‚é ­ï¼‰\r\n   */\r\n  getCsrfToken(): string {\r\n    return this._csrfToken();\r\n  }\r\n  \r\n  /**\r\n   * ç²å–åŒ…å« CSRF Token çš„è«‹æ±‚é ­\r\n   */\r\n  getCsrfHeaders(): Record<string, string> {\r\n    const token = this.getCsrfToken();\r\n    if (token) {\r\n      return { [CSRF_CONFIG.HEADER_NAME]: token };\r\n    }\r\n    return {};\r\n  }\r\n  \r\n  /**\r\n   * å¢å¼·çš„ fetchï¼Œè‡ªå‹•æ·»åŠ  CSRF Token\r\n   */\r\n  async secureFetch(url: string, options: RequestInit = {}): Promise<Response> {\r\n    const headers = new Headers(options.headers);\r\n    \r\n    // æ·»åŠ  CSRF Token\r\n    const csrfToken = this.getCsrfToken();\r\n    if (csrfToken) {\r\n      headers.set(CSRF_CONFIG.HEADER_NAME, csrfToken);\r\n    }\r\n    \r\n    // æ·»åŠ å®‰å…¨é ­\r\n    if (!headers.has('Content-Type')) {\r\n      headers.set('Content-Type', 'application/json');\r\n    }\r\n    \r\n    const response = await fetch(url, {\r\n      ...options,\r\n      headers,\r\n      credentials: 'include'  // åŒ…å« Cookie\r\n    });\r\n    \r\n    // å¾éŸ¿æ‡‰æ›´æ–° CSRF Token\r\n    this.refreshCsrfToken();\r\n    \r\n    return response;\r\n  }\r\n  \r\n  // ==================== ç™»å…¥å˜—è©¦é™åˆ¶ ====================\r\n  \r\n  private _isLocked = signal<boolean>(false);\r\n  private _lockoutRemaining = signal<number>(0);\r\n  private _attemptCount = signal<number>(0);\r\n  \r\n  readonly isLocked = computed(() => this._isLocked());\r\n  readonly lockoutRemaining = computed(() => this._lockoutRemaining());\r\n  readonly attemptCount = computed(() => this._attemptCount());\r\n  readonly attemptsLeft = computed(() => Math.max(0, LOGIN_LIMIT_CONFIG.MAX_ATTEMPTS - this._attemptCount()));\r\n  \r\n  /**\r\n   * æª¢æŸ¥æ˜¯å¦å¯ä»¥å˜—è©¦ç™»å…¥\r\n   */\r\n  canAttemptLogin(): { allowed: boolean; message?: string; waitSeconds?: number } {\r\n    const lockout = this.getLockoutData();\r\n    const now = Date.now();\r\n    \r\n    // æª¢æŸ¥æ˜¯å¦è¢«é–å®š\r\n    if (lockout.lockedUntil > now) {\r\n      const waitSeconds = Math.ceil((lockout.lockedUntil - now) / 1000);\r\n      this._isLocked.set(true);\r\n      this._lockoutRemaining.set(waitSeconds);\r\n      return {\r\n        allowed: false,\r\n        message: `ç™»å…¥å˜—è©¦æ¬¡æ•¸éå¤šï¼Œè«‹ ${this.formatDuration(waitSeconds)} å¾Œå†è©¦`,\r\n        waitSeconds\r\n      };\r\n    }\r\n    \r\n    this._isLocked.set(false);\r\n    this._lockoutRemaining.set(0);\r\n    \r\n    // è¨ˆç®—æœ€è¿‘çš„å˜—è©¦æ¬¡æ•¸\r\n    const recentAttempts = this.getRecentAttempts(lockout.attempts);\r\n    this._attemptCount.set(recentAttempts.length);\r\n    \r\n    if (recentAttempts.length >= LOGIN_LIMIT_CONFIG.MAX_ATTEMPTS) {\r\n      // è¨­ç½®é–å®š\r\n      const lockedUntil = now + LOGIN_LIMIT_CONFIG.LOCKOUT_DURATION * 1000;\r\n      this.setLockout(lockedUntil, lockout.attempts);\r\n      \r\n      const waitSeconds = LOGIN_LIMIT_CONFIG.LOCKOUT_DURATION;\r\n      this._isLocked.set(true);\r\n      this._lockoutRemaining.set(waitSeconds);\r\n      \r\n      return {\r\n        allowed: false,\r\n        message: `ç™»å…¥å˜—è©¦æ¬¡æ•¸éå¤šï¼Œè«‹ ${this.formatDuration(waitSeconds)} å¾Œå†è©¦`,\r\n        waitSeconds\r\n      };\r\n    }\r\n    \r\n    return { allowed: true };\r\n  }\r\n  \r\n  /**\r\n   * è¨˜éŒ„ç™»å…¥å˜—è©¦\r\n   */\r\n  recordLoginAttempt(success: boolean, email?: string): void {\r\n    const lockout = this.getLockoutData();\r\n    \r\n    // æ·»åŠ æ–°å˜—è©¦\r\n    lockout.attempts.push({\r\n      timestamp: Date.now(),\r\n      success,\r\n      email\r\n    });\r\n    \r\n    // åªä¿ç•™æœ€è¿‘çš„å˜—è©¦\r\n    lockout.attempts = this.getRecentAttempts(lockout.attempts);\r\n    \r\n    // å¦‚æœæˆåŠŸï¼Œæ¸…é™¤é–å®šå’Œå˜—è©¦è¨˜éŒ„\r\n    if (success) {\r\n      lockout.lockedUntil = 0;\r\n      lockout.attempts = [];\r\n    }\r\n    \r\n    this.saveLockoutData(lockout);\r\n    this._attemptCount.set(lockout.attempts.filter(a => !a.success).length);\r\n  }\r\n  \r\n  /**\r\n   * æ¸…é™¤ç™»å…¥é™åˆ¶\r\n   */\r\n  clearLoginLimit(): void {\r\n    localStorage.removeItem(LOGIN_LIMIT_CONFIG.STORAGE_KEY);\r\n    this._isLocked.set(false);\r\n    this._lockoutRemaining.set(0);\r\n    this._attemptCount.set(0);\r\n  }\r\n  \r\n  /**\r\n   * ç²å–æœ€è¿‘çš„å¤±æ•—å˜—è©¦\r\n   */\r\n  private getRecentAttempts(attempts: LoginAttempt[]): LoginAttempt[] {\r\n    const windowStart = Date.now() - LOGIN_LIMIT_CONFIG.ATTEMPT_WINDOW * 1000;\r\n    return attempts.filter(a => a.timestamp > windowStart && !a.success);\r\n  }\r\n  \r\n  /**\r\n   * ç²å–é–å®šæ•¸æ“š\r\n   */\r\n  private getLockoutData(): LoginLockout {\r\n    try {\r\n      const data = localStorage.getItem(LOGIN_LIMIT_CONFIG.STORAGE_KEY);\r\n      if (data) {\r\n        return JSON.parse(data);\r\n      }\r\n    } catch (e) {\r\n      console.error('Failed to parse lockout data:', e);\r\n    }\r\n    return { lockedUntil: 0, attempts: [] };\r\n  }\r\n  \r\n  /**\r\n   * ä¿å­˜é–å®šæ•¸æ“š\r\n   */\r\n  private saveLockoutData(data: LoginLockout): void {\r\n    localStorage.setItem(LOGIN_LIMIT_CONFIG.STORAGE_KEY, JSON.stringify(data));\r\n  }\r\n  \r\n  /**\r\n   * è¨­ç½®é–å®š\r\n   */\r\n  private setLockout(lockedUntil: number, attempts: LoginAttempt[]): void {\r\n    this.saveLockoutData({ lockedUntil, attempts });\r\n  }\r\n  \r\n  // ==================== XSS é˜²è­· ====================\r\n  \r\n  /**\r\n   * æ¸…ç† HTMLï¼ˆé˜²æ­¢ XSSï¼‰\r\n   */\r\n  sanitizeHtml(html: string): string {\r\n    // å‰µå»ºè‡¨æ™‚å…ƒç´ \r\n    const temp = document.createElement('div');\r\n    temp.textContent = html;\r\n    return temp.innerHTML;\r\n  }\r\n  \r\n  /**\r\n   * é©—è­‰ URL å®‰å…¨æ€§\r\n   */\r\n  isUrlSafe(url: string): boolean {\r\n    if (!url) return false;\r\n    \r\n    // ç¦æ­¢ javascript: å”è­°\r\n    if (url.toLowerCase().startsWith('javascript:')) return false;\r\n    \r\n    // ç¦æ­¢ data: å”è­°ï¼ˆé™¤äº†åœ–ç‰‡ï¼‰\r\n    if (url.toLowerCase().startsWith('data:') && !url.toLowerCase().startsWith('data:image/')) {\r\n      return false;\r\n    }\r\n    \r\n    // åªå…è¨± http/https å’Œç›¸å°è·¯å¾‘\r\n    if (url.startsWith('/') || url.startsWith('http://') || url.startsWith('https://')) {\r\n      return true;\r\n    }\r\n    \r\n    return false;\r\n  }\r\n  \r\n  /**\r\n   * è½‰ç¾© HTML ç‰¹æ®Šå­—ç¬¦\r\n   */\r\n  escapeHtml(text: string): string {\r\n    const map: Record<string, string> = {\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      \"'\": '&#039;'\r\n    };\r\n    return text.replace(/[&<>\"']/g, m => map[m]);\r\n  }\r\n  \r\n  // ==================== è¼”åŠ©æ–¹æ³• ====================\r\n  \r\n  /**\r\n   * ç²å– Cookie å€¼\r\n   */\r\n  private getCookie(name: string): string | null {\r\n    const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));\r\n    return match ? decodeURIComponent(match[2]) : null;\r\n  }\r\n  \r\n  /**\r\n   * æ ¼å¼åŒ–æŒçºŒæ™‚é–“\r\n   */\r\n  private formatDuration(seconds: number): string {\r\n    if (seconds < 60) {\r\n      return `${seconds} ç§’`;\r\n    }\r\n    const minutes = Math.ceil(seconds / 60);\r\n    return `${minutes} åˆ†é˜`;\r\n  }\r\n  \r\n  /**\r\n   * å•Ÿå‹•é–å®šå€’è¨ˆæ™‚\r\n   */\r\n  startLockoutCountdown(callback?: (remaining: number) => void): () => void {\r\n    const interval = setInterval(() => {\r\n      const remaining = this._lockoutRemaining();\r\n      if (remaining <= 0) {\r\n        clearInterval(interval);\r\n        this._isLocked.set(false);\r\n        callback?.(0);\r\n        return;\r\n      }\r\n      \r\n      this._lockoutRemaining.update(r => r - 1);\r\n      callback?.(remaining - 1);\r\n    }, 1000);\r\n    \r\n    return () => clearInterval(interval);\r\n  }\r\n}\r\n", "/**\n * ç™»å…¥é é¢çµ„ä»¶\n * \n * å„ªåŒ–è¨­è¨ˆï¼š\n * 1. è¡¨å–®é©—è­‰å’ŒéŒ¯èª¤æç¤º\n * 2. å¯†ç¢¼å¯è¦‹åˆ‡æ›\n * 3. è¨˜ä½æˆ‘åŠŸèƒ½\n * 4. ç¬¬ä¸‰æ–¹ç™»å…¥å…¥å£\n * 5. åŠ è¼‰ç‹€æ…‹\n */\n\nimport { Component, inject, signal, computed, ChangeDetectionStrategy, OnInit, OnDestroy } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Router, RouterModule, ActivatedRoute } from '@angular/router';\nimport { AuthService } from '../core/auth.service';\nimport { I18nService } from '../i18n.service';\nimport { FrontendSecurityService } from '../services/security.service';\nimport { ElectronIpcService } from '../electron-ipc.service';\n\n@Component({\n  selector: 'app-login',\n  standalone: true,\n  imports: [CommonModule, FormsModule, RouterModule],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <div class=\"login-page\">\n      <!-- ğŸ†• Phase 3: ç™»å…¥æˆåŠŸå‹•ç•«é®ç½© -->\n      @if (loginSuccess()) {\n        <div class=\"success-overlay\">\n          <div class=\"success-content\">\n            <div class=\"success-icon\">\n              <svg viewBox=\"0 0 52 52\" class=\"checkmark\">\n                <circle class=\"checkmark-circle\" cx=\"26\" cy=\"26\" r=\"25\" fill=\"none\"/>\n                <path class=\"checkmark-check\" fill=\"none\" d=\"M14.1 27.2l7.1 7.2 16.7-16.8\"/>\n              </svg>\n            </div>\n            <h3 class=\"success-title\">{{ t('auth.loginSuccess') }}</h3>\n            <p class=\"success-user\">{{ t('auth.welcomeBackUser') }}ï¼Œ{{ successUserName() }}</p>\n            <p class=\"success-hint\">{{ t('auth.redirecting') }}</p>\n          </div>\n        </div>\n      }\n      \n      <h2 class=\"page-title\">{{ t('auth.welcomeBack') }}</h2>\n      <p class=\"page-subtitle\">{{ t('auth.loginSubtitle') }}</p>\n      \n      <!-- é–å®šæç¤º -->\n      @if (isLocked()) {\n        <div class=\"lockout-alert\">\n          <span class=\"lockout-icon\">ğŸ”’</span>\n          <div class=\"lockout-content\">\n            <span class=\"lockout-title\">{{ t('auth.accountLocked') }}</span>\n            <span class=\"lockout-time\">{{ t('auth.waitSeconds', {seconds: lockoutRemaining()}) }}</span>\n          </div>\n        </div>\n      }\n      \n      <!-- éŒ¯èª¤æç¤º -->\n      @if (error() && !isLocked()) {\n        <div class=\"error-alert\">\n          <span class=\"error-icon\">âš ï¸</span>\n          <span>{{ error() }}</span>\n        </div>\n      }\n      \n      <form class=\"login-form\" (ngSubmit)=\"onSubmit()\">\n        <!-- éƒµç®± -->\n        <div class=\"form-group\">\n          <label for=\"email\">{{ t('auth.email') }}</label>\n          <div class=\"input-wrapper\">\n            <span class=\"input-icon\">ğŸ“§</span>\n            <input\n              type=\"email\"\n              id=\"email\"\n              [(ngModel)]=\"email\"\n              name=\"email\"\n              [placeholder]=\"t('auth.emailPlaceholder')\"\n              required\n              autocomplete=\"email\"\n              [disabled]=\"isLoading()\"\n            />\n          </div>\n        </div>\n        \n        <!-- å¯†ç¢¼ -->\n        <div class=\"form-group\">\n          <label for=\"password\">{{ t('auth.password') }}</label>\n          <div class=\"input-wrapper\">\n            <span class=\"input-icon\">ğŸ”’</span>\n            <input\n              [type]=\"showPassword() ? 'text' : 'password'\"\n              id=\"password\"\n              [(ngModel)]=\"password\"\n              name=\"password\"\n              [placeholder]=\"t('auth.passwordPlaceholder')\"\n              required\n              autocomplete=\"current-password\"\n              [disabled]=\"isLoading()\"\n            />\n            <button \n              type=\"button\" \n              class=\"toggle-password\"\n              (click)=\"showPassword.set(!showPassword())\"\n            >\n              {{ showPassword() ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}\n            </button>\n          </div>\n        </div>\n        \n        <!-- è¨˜ä½æˆ‘ & å¿˜è¨˜å¯†ç¢¼ -->\n        <div class=\"form-options\">\n          <label class=\"checkbox-label\">\n            <input \n              type=\"checkbox\" \n              [(ngModel)]=\"rememberMe\" \n              name=\"rememberMe\"\n            />\n            <span>{{ t('auth.rememberMe') }}</span>\n          </label>\n          <a routerLink=\"/auth/forgot-password\" class=\"forgot-link\">\n            {{ t('auth.forgotPassword') }}\n          </a>\n        </div>\n        \n        <!-- ç™»å…¥æŒ‰éˆ• -->\n        <button \n          type=\"submit\" \n          class=\"submit-btn\"\n          [disabled]=\"isLoading() || !email || !password || isLocked()\"\n        >\n          @if (isLoading()) {\n            <span class=\"loading-spinner\"></span>\n            <span>{{ t('auth.loggingIn') }}</span>\n          } @else {\n            <span>{{ t('auth.login') }}</span>\n          }\n        </button>\n      </form>\n      \n      <!-- åˆ†éš”ç·š -->\n      <div class=\"divider\">\n        <span>{{ t('auth.or') }}</span>\n      </div>\n      \n      <!-- ğŸ†• Phase 2: å¤šç¨® Telegram ç™»å…¥æ–¹å¼ï¼ˆå« QR Codeï¼‰ -->\n      <div class=\"telegram-login-section\">\n        <!-- ç™»å…¥æ–¹å¼é¸æ“‡å™¨ -->\n        <div class=\"login-method-tabs\">\n          <button \n            class=\"method-tab\" \n            [class.active]=\"loginMethod() === 'qrcode'\"\n            (click)=\"switchLoginMethod('qrcode')\"\n          >\n            <span class=\"tab-icon\">ğŸ“·</span>\n            <span>{{ t('auth.qrCodeLogin') }}</span>\n          </button>\n          <button \n            class=\"method-tab\" \n            [class.active]=\"loginMethod() === 'deeplink'\"\n            (click)=\"switchLoginMethod('deeplink')\"\n          >\n            <span class=\"tab-icon\">ğŸ“±</span>\n            <span>{{ t('auth.appLogin') }}</span>\n          </button>\n          <button \n            class=\"method-tab\" \n            [class.active]=\"loginMethod() === 'widget'\"\n            (click)=\"switchLoginMethod('widget')\"\n          >\n            <span class=\"tab-icon\">ğŸ’¬</span>\n            <span>{{ t('auth.webLogin') }}</span>\n          </button>\n        </div>\n        \n        <!-- QR Code ç™»å…¥ï¼ˆé»˜èªï¼‰ -->\n        @if (loginMethod() === 'qrcode') {\n          <div class=\"qr-login-panel\">\n            @if (qrCodeLoading()) {\n              <div class=\"qr-loading\">\n                <span class=\"loading-spinner\"></span>\n                <span>{{ t('auth.generatingQR') }}</span>\n              </div>\n            } @else if (qrCodeUrl()) {\n              <div class=\"qr-container\">\n                <div class=\"qr-code-wrapper\">\n                  <img [src]=\"qrCodeUrl()\" [alt]=\"t('auth.telegramLoginQR')\" class=\"qr-code-img\" />\n                  @if (qrCodeExpired()) {\n                    <div class=\"qr-expired-overlay\">\n                      <span class=\"expired-text\">{{ t('auth.qrExpired') }}</span>\n                      <button class=\"refresh-btn\" (click)=\"refreshQRCode()\">{{ t('auth.clickToRefresh') }}</button>\n                    </div>\n                  }\n                </div>\n                <div class=\"qr-instructions\">\n                  <p class=\"step\"><span class=\"step-num\">1</span> {{ t('auth.openTelegram') }}</p>\n                  <p class=\"step\"><span class=\"step-num\">2</span> {{ t('auth.scanQRCode') }}</p>\n                  <p class=\"step\"><span class=\"step-num\">3</span> {{ t('auth.confirmLogin') }}</p>\n                </div>\n                \n                <!-- ğŸ†• é©—è­‰ç¢¼ï¼ˆè€ç”¨æˆ¶å‚™ç”¨ï¼‰ -->\n                @if (verifyCode()) {\n                  <div class=\"verify-code-section\">\n                    <p class=\"verify-hint\">æƒç¢¼ç„¡æ•ˆï¼Ÿåœ¨ Bot ä¸­è¼¸å…¥é©—è­‰ç¢¼ï¼š</p>\n                    <div class=\"verify-code\">{{ verifyCode() }}</div>\n                  </div>\n                }\n                @if (!qrCodeExpired()) {\n                  <div class=\"qr-countdown\">\n                    <span class=\"ws-status\" [class.connected]=\"wsConnected()\">\n                      {{ wsConnected() ? ('ğŸŸ¢ ' + t('auth.realtimeConnected')) : ('ğŸ”´ ' + t('auth.reconnecting')) }}\n                    </span>\n                    <span class=\"countdown-text\">{{ qrCountdown() }}s</span>\n                  </div>\n                }\n              </div>\n            } @else {\n              <button class=\"generate-qr-btn\" (click)=\"generateQRCode()\">\n                <span class=\"btn-icon\">ğŸ“·</span>\n                <span>{{ t('auth.generateQRCode') }}</span>\n              </button>\n            }\n          </div>\n        }\n        \n        <!-- Deep Link ç™»å…¥ -->\n        @if (loginMethod() === 'deeplink') {\n          <div class=\"deeplink-panel\">\n            <button \n              class=\"social-btn telegram full-width primary-telegram\" \n              (click)=\"openDeepLink()\"\n              [disabled]=\"telegramLoading()\"\n            >\n              @if (deepLinkLoading()) {\n                <span class=\"loading-spinner small\"></span>\n                <span>{{ t('auth.waitingConfirm') }}</span>\n              } @else {\n                <span class=\"social-icon\">ğŸ“±</span>\n                <span>{{ t('auth.openTelegramApp') }}</span>\n              }\n            </button>\n            \n            @if (deepLinkLoading()) {\n              <div class=\"deep-link-status\">\n                <div class=\"status-text\">\n                  {{ t('auth.clickConfirmInTelegram') }}\n                </div>\n                <div class=\"countdown\">\n                  {{ t('auth.remainingTime', {seconds: deepLinkCountdown()}) }}\n                </div>\n                <button class=\"cancel-btn\" (click)=\"cancelDeepLink()\">{{ t('auth.cancel') }}</button>\n              </div>\n            }\n          </div>\n        }\n        \n        <!-- Widget ç™»å…¥ï¼ˆå‚™ç”¨ï¼‰ -->\n        @if (loginMethod() === 'widget') {\n          <div class=\"widget-panel\">\n            <button \n              class=\"social-btn telegram full-width secondary-telegram\" \n              (click)=\"initTelegramWidget()\"\n              [disabled]=\"telegramLoading()\"\n            >\n              @if (telegramLoading() && !deepLinkLoading()) {\n                <span class=\"loading-spinner small\"></span>\n                <span>{{ t('auth.loadingTelegram') }}</span>\n              } @else {\n                <span class=\"social-icon\">ğŸ’¬</span>\n                <span>{{ t('auth.useTelegramWidget') }}</span>\n              }\n            </button>\n            <p class=\"widget-hint\">{{ t('auth.widgetHint') }}</p>\n          </div>\n        }\n      </div>\n      \n      <!-- è¨»å†Šå…¥å£ -->\n      <p class=\"register-link\">\n        {{ t('auth.noAccount') }}\n        <a routerLink=\"/auth/register\">{{ t('auth.registerNow') }}</a>\n      </p>\n    </div>\n  `,\n  styles: [`\n    .login-page {\n      color: var(--text-primary, #fff);\n    }\n    \n    .page-title {\n      font-size: 1.75rem;\n      font-weight: 700;\n      margin-bottom: 0.5rem;\n    }\n    \n    .page-subtitle {\n      color: var(--text-secondary, #888);\n      margin-bottom: 2rem;\n    }\n    \n    .error-alert {\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n      padding: 0.875rem 1rem;\n      background: rgba(239, 68, 68, 0.1);\n      border: 1px solid rgba(239, 68, 68, 0.3);\n      border-radius: 8px;\n      color: #f87171;\n      margin-bottom: 1.5rem;\n      font-size: 0.875rem;\n    }\n    \n    .lockout-alert {\n      display: flex;\n      align-items: center;\n      gap: 0.75rem;\n      padding: 1rem 1.25rem;\n      background: rgba(251, 146, 60, 0.1);\n      border: 1px solid rgba(251, 146, 60, 0.3);\n      border-radius: 8px;\n      color: #fb923c;\n      margin-bottom: 1.5rem;\n    }\n    \n    .lockout-icon {\n      font-size: 1.5rem;\n    }\n    \n    .lockout-content {\n      display: flex;\n      flex-direction: column;\n      gap: 0.25rem;\n    }\n    \n    .lockout-title {\n      font-weight: 600;\n      font-size: 0.9rem;\n    }\n    \n    .lockout-time {\n      font-size: 0.8rem;\n      opacity: 0.8;\n    }\n    \n    .login-form {\n      display: flex;\n      flex-direction: column;\n      gap: 1.25rem;\n    }\n    \n    .form-group {\n      display: flex;\n      flex-direction: column;\n      gap: 0.5rem;\n    }\n    \n    .form-group label {\n      font-size: 0.875rem;\n      font-weight: 500;\n      color: var(--text-secondary, #aaa);\n    }\n    \n    .input-wrapper {\n      position: relative;\n      display: flex;\n      align-items: center;\n    }\n    \n    .input-icon {\n      position: absolute;\n      left: 1rem;\n      font-size: 1rem;\n      opacity: 0.5;\n    }\n    \n    .input-wrapper input {\n      width: 100%;\n      padding: 0.875rem 1rem 0.875rem 2.75rem;\n      background: var(--bg-secondary, #1a1a1a);\n      border: 1px solid var(--border-color, #333);\n      border-radius: 8px;\n      color: var(--text-primary, #fff);\n      font-size: 1rem;\n      transition: all 0.2s ease;\n    }\n    \n    .input-wrapper input:focus {\n      outline: none;\n      border-color: var(--primary, #3b82f6);\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n    \n    .input-wrapper input::placeholder {\n      color: var(--text-muted, #666);\n    }\n    \n    .toggle-password {\n      position: absolute;\n      right: 1rem;\n      background: none;\n      border: none;\n      cursor: pointer;\n      font-size: 1rem;\n      opacity: 0.5;\n      transition: opacity 0.2s;\n    }\n    \n    .toggle-password:hover {\n      opacity: 1;\n    }\n    \n    .form-options {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      font-size: 0.875rem;\n    }\n    \n    .checkbox-label {\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n      cursor: pointer;\n      color: var(--text-secondary, #aaa);\n    }\n    \n    .checkbox-label input[type=\"checkbox\"] {\n      width: 16px;\n      height: 16px;\n      accent-color: var(--primary, #3b82f6);\n    }\n    \n    .forgot-link {\n      color: var(--primary, #3b82f6);\n      text-decoration: none;\n      transition: color 0.2s;\n    }\n    \n    .forgot-link:hover {\n      color: var(--primary-hover, #60a5fa);\n      text-decoration: underline;\n    }\n    \n    .submit-btn {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      gap: 0.5rem;\n      padding: 0.875rem 1.5rem;\n      background: linear-gradient(135deg, #3b82f6, #8b5cf6);\n      border: none;\n      border-radius: 8px;\n      color: white;\n      font-size: 1rem;\n      font-weight: 600;\n      cursor: pointer;\n      transition: all 0.2s ease;\n      margin-top: 0.5rem;\n    }\n    \n    .submit-btn:hover:not(:disabled) {\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n    }\n    \n    .submit-btn:disabled {\n      opacity: 0.6;\n      cursor: not-allowed;\n    }\n    \n    .loading-spinner {\n      width: 18px;\n      height: 18px;\n      border: 2px solid rgba(255, 255, 255, 0.3);\n      border-top-color: white;\n      border-radius: 50%;\n      animation: spin 0.8s linear infinite;\n    }\n    \n    @keyframes spin {\n      to { transform: rotate(360deg); }\n    }\n    \n    .divider {\n      display: flex;\n      align-items: center;\n      margin: 1.5rem 0;\n      color: var(--text-muted, #666);\n      font-size: 0.875rem;\n    }\n    \n    .divider::before,\n    .divider::after {\n      content: '';\n      flex: 1;\n      height: 1px;\n      background: var(--border-color, #333);\n    }\n    \n    .divider span {\n      padding: 0 1rem;\n    }\n    \n    .social-login {\n      display: flex;\n      gap: 1rem;\n    }\n    \n    .social-btn {\n      flex: 1;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      gap: 0.5rem;\n      padding: 0.75rem 1rem;\n      background: var(--bg-secondary, #1a1a1a);\n      border: 1px solid var(--border-color, #333);\n      border-radius: 8px;\n      color: var(--text-primary, #fff);\n      font-size: 0.875rem;\n      cursor: pointer;\n      transition: all 0.2s ease;\n    }\n    \n    .social-btn:hover {\n      background: var(--bg-tertiary, #252525);\n      border-color: var(--border-hover, #444);\n    }\n    \n    .social-btn.google .social-icon {\n      color: #ea4335;\n      font-weight: bold;\n    }\n    \n    .social-btn.telegram .social-icon {\n      color: #0088cc;\n    }\n    \n    .social-btn.full-width {\n      width: 100%;\n      flex: none;\n    }\n    \n    .social-btn.telegram {\n      background: linear-gradient(135deg, #0088cc, #0077b5);\n      border-color: #0088cc;\n    }\n    \n    .social-btn.telegram:hover {\n      background: linear-gradient(135deg, #0099dd, #0088cc);\n    }\n    \n    /* ğŸ†• Deep Link ä¸»æŒ‰éˆ• */\n    .social-btn.primary-telegram {\n      background: linear-gradient(135deg, #0088cc, #0066aa);\n      border-color: #0088cc;\n      font-weight: 600;\n    }\n    \n    .social-btn.primary-telegram:hover {\n      background: linear-gradient(135deg, #0099dd, #0077bb);\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(0, 136, 204, 0.3);\n    }\n    \n    /* ğŸ†• Widget å‚™ç”¨æŒ‰éˆ• */\n    .social-btn.secondary-telegram {\n      background: transparent;\n      border: 1px solid #0088cc;\n      color: #0088cc;\n    }\n    \n    .social-btn.secondary-telegram:hover {\n      background: rgba(0, 136, 204, 0.1);\n    }\n    \n    /* ğŸ†• Deep Link ç‹€æ…‹æç¤º */\n    .deep-link-status {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      gap: 0.75rem;\n      padding: 1rem;\n      background: rgba(0, 136, 204, 0.1);\n      border: 1px solid rgba(0, 136, 204, 0.3);\n      border-radius: 8px;\n      margin: 0.75rem 0;\n    }\n    \n    .deep-link-status .status-text {\n      color: #0088cc;\n      font-size: 0.875rem;\n      text-align: center;\n    }\n    \n    .deep-link-status .countdown {\n      font-size: 0.75rem;\n      color: var(--text-secondary, #888);\n    }\n    \n    .deep-link-status .cancel-btn {\n      padding: 0.375rem 1rem;\n      background: transparent;\n      border: 1px solid #888;\n      border-radius: 4px;\n      color: #888;\n      font-size: 0.75rem;\n      cursor: pointer;\n      transition: all 0.2s ease;\n    }\n    \n    .deep-link-status .cancel-btn:hover {\n      background: rgba(255, 255, 255, 0.1);\n      border-color: #fff;\n      color: #fff;\n    }\n    \n    .social-login {\n      display: flex;\n      flex-direction: column;\n      gap: 0.75rem;\n    }\n    \n    /* ğŸ†• Telegram Widget å®¹å™¨æ¨£å¼ */\n    .telegram-widget-container {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      min-height: 48px;\n      width: 100%;\n    }\n    \n    .telegram-widget-container iframe {\n      border-radius: 8px !important;\n    }\n    \n    #telegram-login-widget {\n      display: flex;\n      justify-content: center;\n    }\n    \n    .loading-spinner.small {\n      width: 14px;\n      height: 14px;\n      border-width: 2px;\n    }\n    \n    .register-link {\n      text-align: center;\n      margin-top: 1.5rem;\n      color: var(--text-secondary, #888);\n      font-size: 0.875rem;\n    }\n    \n    .register-link a {\n      color: var(--primary, #3b82f6);\n      text-decoration: none;\n      font-weight: 500;\n    }\n    \n    .register-link a:hover {\n      text-decoration: underline;\n    }\n    \n    /* ğŸ†• Phase 2: ç™»å…¥æ–¹å¼é¸æ“‡å™¨ */\n    .telegram-login-section {\n      margin-top: 0.5rem;\n    }\n    \n    .login-method-tabs {\n      display: flex;\n      gap: 0.25rem;\n      background: var(--bg-secondary, #1a1a1a);\n      padding: 0.25rem;\n      border-radius: 8px;\n      margin-bottom: 1rem;\n    }\n    \n    .method-tab {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      gap: 0.25rem;\n      padding: 0.5rem;\n      background: transparent;\n      border: none;\n      border-radius: 6px;\n      color: var(--text-secondary, #888);\n      font-size: 0.75rem;\n      cursor: pointer;\n      transition: all 0.2s ease;\n    }\n    \n    .method-tab:hover {\n      background: var(--bg-tertiary, #252525);\n      color: var(--text-primary, #fff);\n    }\n    \n    .method-tab.active {\n      background: linear-gradient(135deg, #0088cc, #0066aa);\n      color: #fff;\n    }\n    \n    .tab-icon {\n      font-size: 1.25rem;\n    }\n    \n    /* QR Code é¢æ¿ */\n    .qr-login-panel {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      padding: 1.5rem;\n      background: var(--bg-secondary, #1a1a1a);\n      border-radius: 12px;\n      border: 1px solid var(--border-color, #333);\n    }\n    \n    .qr-loading {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      gap: 1rem;\n      padding: 2rem;\n      color: var(--text-secondary, #888);\n    }\n    \n    .qr-container {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      gap: 1rem;\n      width: 100%;\n    }\n    \n    .qr-code-wrapper {\n      position: relative;\n      padding: 1rem;\n      background: #fff;\n      border-radius: 12px;\n      box-shadow: 0 4px 20px rgba(0, 136, 204, 0.2);\n    }\n    \n    .qr-code-img {\n      width: 180px;\n      height: 180px;\n      display: block;\n    }\n    \n    .qr-expired-overlay {\n      position: absolute;\n      inset: 0;\n      background: rgba(0, 0, 0, 0.85);\n      border-radius: 12px;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      gap: 0.75rem;\n    }\n    \n    .expired-text {\n      color: #f87171;\n      font-size: 0.875rem;\n    }\n    \n    .refresh-btn {\n      padding: 0.5rem 1rem;\n      background: linear-gradient(135deg, #0088cc, #0066aa);\n      border: none;\n      border-radius: 6px;\n      color: #fff;\n      font-size: 0.875rem;\n      cursor: pointer;\n      transition: transform 0.2s ease;\n    }\n    \n    .refresh-btn:hover {\n      transform: scale(1.05);\n    }\n    \n    .qr-instructions {\n      display: flex;\n      flex-direction: column;\n      gap: 0.5rem;\n      width: 100%;\n    }\n    \n    .qr-instructions .step {\n      display: flex;\n      align-items: center;\n      gap: 0.75rem;\n      color: var(--text-secondary, #888);\n      font-size: 0.875rem;\n      margin: 0;\n    }\n    \n    .step-num {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 1.5rem;\n      height: 1.5rem;\n      background: linear-gradient(135deg, #0088cc, #0066aa);\n    }\n\n    /* ğŸ†• é©—è­‰ç¢¼æ¨£å¼ */\n    .verify-code-section {\n      margin-top: 1.25rem;\n      padding-top: 1.25rem;\n      border-top: 1px dashed var(--border-color, #333);\n      text-align: center;\n    }\n\n    .verify-hint {\n      font-size: 0.8rem;\n      color: var(--text-muted, #666);\n      margin-bottom: 0.75rem;\n    }\n\n    .verify-code {\n      font-family: 'Courier New', monospace;\n      font-size: 2rem;\n      font-weight: 700;\n      letter-spacing: 0.5rem;\n      padding: 0.75rem 1.5rem;\n      background: linear-gradient(135deg, rgba(14, 165, 233, 0.15), rgba(139, 92, 246, 0.15));\n      border: 2px solid rgba(14, 165, 233, 0.3);\n      border-radius: 12px;\n      color: #0ea5e9;\n      display: inline-block;\n      border-radius: 50%;\n      color: #fff;\n      font-size: 0.75rem;\n      font-weight: 600;\n    }\n    \n    .qr-countdown {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      width: 100%;\n      padding: 0.5rem 0;\n      border-top: 1px solid var(--border-color, #333);\n      margin-top: 0.5rem;\n    }\n    \n    .ws-status {\n      font-size: 0.75rem;\n      color: #f87171;\n    }\n    \n    .ws-status.connected {\n      color: #4ade80;\n    }\n    \n    .countdown-text {\n      font-size: 0.875rem;\n      color: var(--text-secondary, #888);\n    }\n    \n    .generate-qr-btn {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      gap: 0.5rem;\n      padding: 1rem 2rem;\n      background: linear-gradient(135deg, #0088cc, #0066aa);\n      border: none;\n      border-radius: 8px;\n      color: #fff;\n      font-size: 1rem;\n      cursor: pointer;\n      transition: all 0.2s ease;\n    }\n    \n    .generate-qr-btn:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 4px 12px rgba(0, 136, 204, 0.3);\n    }\n    \n    .btn-icon {\n      font-size: 1.25rem;\n    }\n    \n    /* Deep Link é¢æ¿ */\n    .deeplink-panel, .widget-panel {\n      display: flex;\n      flex-direction: column;\n      gap: 0.75rem;\n    }\n    \n    .widget-hint {\n      text-align: center;\n      font-size: 0.75rem;\n      color: var(--text-secondary, #888);\n      margin: 0;\n    }\n    \n    /* ğŸ†• Phase 3: ç™»å…¥æˆåŠŸå‹•ç•« */\n    .success-overlay {\n      position: fixed;\n      inset: 0;\n      background: rgba(0, 0, 0, 0.9);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 9999;\n      animation: fadeIn 0.3s ease-out;\n    }\n    \n    @keyframes fadeIn {\n      from { opacity: 0; }\n      to { opacity: 1; }\n    }\n    \n    .success-content {\n      text-align: center;\n      animation: scaleIn 0.4s ease-out;\n    }\n    \n    @keyframes scaleIn {\n      from { transform: scale(0.8); opacity: 0; }\n      to { transform: scale(1); opacity: 1; }\n    }\n    \n    .success-icon {\n      width: 80px;\n      height: 80px;\n      margin: 0 auto 1.5rem;\n    }\n    \n    .checkmark {\n      width: 80px;\n      height: 80px;\n      border-radius: 50%;\n      display: block;\n      stroke-width: 2;\n      stroke: #4ade80;\n      stroke-miterlimit: 10;\n      animation: fill 0.4s ease-in-out 0.4s forwards, scale 0.3s ease-in-out 0.9s both;\n    }\n    \n    .checkmark-circle {\n      stroke-dasharray: 166;\n      stroke-dashoffset: 166;\n      stroke-width: 2;\n      stroke-miterlimit: 10;\n      stroke: #4ade80;\n      fill: none;\n      animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;\n    }\n    \n    .checkmark-check {\n      transform-origin: 50% 50%;\n      stroke-dasharray: 48;\n      stroke-dashoffset: 48;\n      animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;\n    }\n    \n    @keyframes stroke {\n      100% { stroke-dashoffset: 0; }\n    }\n    \n    @keyframes scale {\n      0%, 100% { transform: none; }\n      50% { transform: scale3d(1.1, 1.1, 1); }\n    }\n    \n    @keyframes fill {\n      100% { box-shadow: inset 0px 0px 0px 40px rgba(74, 222, 128, 0.1); }\n    }\n    \n    .success-title {\n      color: #4ade80;\n      font-size: 1.5rem;\n      font-weight: 600;\n      margin: 0 0 0.5rem;\n    }\n    \n    .success-user {\n      color: #fff;\n      font-size: 1rem;\n      margin: 0 0 0.5rem;\n    }\n    \n    .success-hint {\n      color: var(--text-secondary, #888);\n      font-size: 0.875rem;\n      margin: 0;\n      animation: pulse 1s infinite;\n    }\n    \n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n  `]\n})\nexport class LoginComponent implements OnInit, OnDestroy {\n  private authService = inject(AuthService);\n  private router = inject(Router);\n  private route = inject(ActivatedRoute);\n  private i18n = inject(I18nService);\n  private security = inject(FrontendSecurityService);\n  private ipcService = inject(ElectronIpcService);\n  \n  // è¡¨å–®æ•¸æ“š\n  email = '';\n  password = '';\n  rememberMe = false;\n  \n  // ç‹€æ…‹\n  showPassword = signal(false);\n  isLoading = signal(false);\n  telegramLoading = signal(false);\n  telegramWidgetReady = signal(false);  // ğŸ†• Widget æ˜¯å¦å·²è¼‰å…¥\n  error = signal<string | null>(null);\n  \n  // ğŸ†• Deep Link ç™»å…¥ç‹€æ…‹\n  deepLinkLoading = signal(false);\n  deepLinkCountdown = signal(300);  // 5 åˆ†é˜å€’è¨ˆæ™‚\n  private deepLinkToken = '';\n  private deepLinkPollInterval: any = null;\n  private deepLinkCountdownInterval: any = null;\n  \n  // ğŸ†• Phase 2: QR Code + WebSocket ç™»å…¥ç‹€æ…‹\n  loginMethod = signal<'qrcode' | 'deeplink' | 'widget'>('qrcode');  // é»˜èª QR Code\n  qrCodeLoading = signal(false);\n  qrCodeUrl = signal<string | null>(null);\n  qrCodeExpired = signal(false);\n  qrCountdown = signal(300);\n  wsConnected = signal(false);\n  verifyCode = signal<string | null>(null);  // ğŸ†• 6 ä½é©—è­‰ç¢¼\n  private qrToken = '';\n  private qrWebSocket: WebSocket | null = null;\n  private qrCountdownInterval: any = null;\n  \n  // ğŸ†• Phase 3: ç™»å…¥æˆåŠŸå‹•ç•«\n  loginSuccess = signal(false);\n  successUserName = signal('');\n  \n  // P1.5: å®‰å…¨å¢å¼· - ç™»å…¥é™åˆ¶\n  isLocked = computed(() => this.security.isLocked());\n  lockoutRemaining = computed(() => this.security.lockoutRemaining());\n  attemptsLeft = computed(() => this.security.attemptsLeft());\n  \n  // Telegram é…ç½®\n  private telegramBotUsername = '';\n  private telegramBotId = '';  // ğŸ†• æ•¸å­—æ ¼å¼çš„ Bot ID\n  private lockoutCleanup: (() => void) | null = null;\n  \n  ngOnInit() {\n    // æª¢æŸ¥ç™»å…¥é™åˆ¶ç‹€æ…‹\n    this.checkLoginLimit();\n    \n    // ğŸ†• Phase 3: å„ªå…ˆä½¿ç”¨ä¿å­˜çš„åå¥½\n    const savedPreference = this.loadLoginPreference();\n    \n    if (savedPreference) {\n      // ä½¿ç”¨ç”¨æˆ¶ä¹‹å‰çš„é¸æ“‡\n      this.loginMethod.set(savedPreference);\n      if (savedPreference === 'qrcode') {\n        this.generateQRCode();\n      }\n    } else if (this.isMobileDevice()) {\n      // ç§»å‹•ç«¯é»˜èªä½¿ç”¨ Deep Link\n      this.loginMethod.set('deeplink');\n    } else {\n      // æ¡Œé¢ç«¯è‡ªå‹•ç”Ÿæˆ QR Code\n      this.generateQRCode();\n    }\n  }\n  \n  /**\n   * æª¢æ¸¬æ˜¯å¦ç‚ºç§»å‹•è¨­å‚™\n   */\n  private isMobileDevice(): boolean {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n  }\n  \n  ngOnDestroy() {\n    // æ¸…ç†å€’è¨ˆæ™‚\n    this.lockoutCleanup?.();\n    // æ¸…ç† Deep Link è¼ªè©¢\n    this.cancelDeepLink();\n    // æ¸…ç† QR Code WebSocket\n    this.cleanupQRCode();\n  }\n  \n  private checkLoginLimit() {\n    const result = this.security.canAttemptLogin();\n    if (!result.allowed) {\n      this.error.set(result.message || '');\n      // å•Ÿå‹•å€’è¨ˆæ™‚\n      this.lockoutCleanup = this.security.startLockoutCountdown((remaining) => {\n        if (remaining <= 0) {\n          this.error.set(null);\n        }\n      });\n    }\n  }\n  \n  t(key: string): string {\n    return this.i18n.t(key);\n  }\n  \n  async onSubmit() {\n    if (!this.email || !this.password) return;\n    \n    // P1.5: å®‰å…¨æª¢æŸ¥ - ç™»å…¥é™åˆ¶\n    const canLogin = this.security.canAttemptLogin();\n    if (!canLogin.allowed) {\n      this.error.set(canLogin.message || '');\n      return;\n    }\n    \n    this.isLoading.set(true);\n    this.error.set(null);\n    \n    try {\n      const result = await this.authService.login({\n        email: this.email,\n        password: this.password,\n        remember: this.rememberMe\n      });\n      \n      if (result.success) {\n        // è¨˜éŒ„æˆåŠŸå˜—è©¦ï¼ˆæ¸…é™¤é™åˆ¶ï¼‰\n        this.security.recordLoginAttempt(true, this.email);\n        \n        // ç²å–é‡å®šå‘ URL\n        const returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\n        this.router.navigateByUrl(returnUrl);\n      } else {\n        // è¨˜éŒ„å¤±æ•—å˜—è©¦\n        this.security.recordLoginAttempt(false, this.email);\n        \n        // é¡¯ç¤ºéŒ¯èª¤å’Œå‰©é¤˜å˜—è©¦æ¬¡æ•¸\n        const attemptsLeft = this.security.attemptsLeft();\n        let errorMsg = result.error || this.t('auth.loginFailed');\n        if (attemptsLeft > 0 && attemptsLeft <= 3) {\n          errorMsg += ` (å‰©é¤˜ ${attemptsLeft} æ¬¡å˜—è©¦æ©Ÿæœƒ)`;\n        }\n        this.error.set(errorMsg);\n        \n        // æª¢æŸ¥æ˜¯å¦éœ€è¦é–å®š\n        this.checkLoginLimit();\n      }\n    } catch (e: any) {\n      // è¨˜éŒ„å¤±æ•—å˜—è©¦\n      this.security.recordLoginAttempt(false, this.email);\n      this.error.set(e.message || this.t('auth.loginFailed'));\n      this.checkLoginLimit();\n    } finally {\n      this.isLoading.set(false);\n    }\n  }\n  \n  async socialLogin(provider: string) {\n    if (provider === 'telegram') {\n      await this.initTelegramWidget();  // ğŸ”§ ä½¿ç”¨åµŒå…¥å¼ Widget\n    } else if (provider === 'google') {\n      await this.googleLogin();\n    }\n  }\n  \n  private async googleLogin() {\n    this.isLoading.set(true);\n    this.error.set(null);\n    \n    try {\n      // 1. ç²å– Google é…ç½®\n      const response = await fetch('/api/v1/oauth/google/config');\n      const config = await response.json();\n      \n      if (!config.success || !config.data?.enabled) {\n        this.error.set(this.t('auth.googleNotAvailable'));\n        return;\n      }\n      \n      // 2. æ‰“é–‹ Google OAuth å½ˆçª—\n      this.openGoogleLoginPopup();\n      \n    } catch (e: any) {\n      console.error('Google login error:', e);\n      this.error.set(this.t('auth.googleNotAvailable'));\n    } finally {\n      this.isLoading.set(false);\n    }\n  }\n  \n  private openGoogleLoginPopup() {\n    // æ§‹å»ºå›èª¿ URL\n    const origin = window.location.origin;\n    const callbackUrl = `${origin}/api/v1/oauth/google/callback`;\n    \n    // Google OAuth æˆæ¬Š URL\n    const authUrl = `/api/v1/oauth/google/authorize?callback=${encodeURIComponent(callbackUrl)}`;\n    \n    // æ‰“é–‹å½ˆçª—\n    const width = 550;\n    const height = 600;\n    const left = window.screenX + (window.outerWidth - width) / 2;\n    const top = window.screenY + (window.outerHeight - height) / 2;\n    \n    const popup = window.open(\n      authUrl,\n      'GoogleAuth',\n      `width=${width},height=${height},left=${left},top=${top},toolbar=no,menubar=no,scrollbars=yes`\n    );\n    \n    // ç›£è½å½ˆçª—æ¶ˆæ¯\n    const handleMessage = async (event: MessageEvent) => {\n      // æ¥å—ä¾†è‡ªä»»ä½•ä¾†æºçš„æ¶ˆæ¯ï¼ˆå› ç‚º Google å›èª¿æœƒç™¼é€æ¶ˆæ¯ï¼‰\n      if (event.data && event.data.type === 'google_auth') {\n        window.removeEventListener('message', handleMessage);\n        popup?.close();\n        \n        // è™•ç† Google èªè­‰æ•¸æ“š\n        await this.handleGoogleAuth(event.data.auth);\n      } else if (event.data && event.data.type === 'google_auth_error') {\n        window.removeEventListener('message', handleMessage);\n        popup?.close();\n        \n        this.error.set(event.data.error || 'Google ç™»å…¥å¤±æ•—');\n        this.isLoading.set(false);\n      }\n    };\n    \n    window.addEventListener('message', handleMessage);\n    \n    // ç›£æ¸¬å½ˆçª—é—œé–‰\n    const checkClosed = setInterval(() => {\n      if (popup?.closed) {\n        clearInterval(checkClosed);\n        window.removeEventListener('message', handleMessage);\n        this.isLoading.set(false);\n      }\n    }, 500);\n  }\n  \n  private async handleGoogleAuth(authData: any) {\n    this.isLoading.set(true);\n    \n    try {\n      if (authData.access_token && authData.user) {\n        // è¨­ç½®èªè­‰ç‹€æ…‹ï¼ˆç›´æ¥ä½¿ç”¨è¿”å›çš„ tokenï¼‰\n        localStorage.setItem('tgm_access_token', authData.access_token);\n        if (authData.refresh_token) {\n          localStorage.setItem('tgm_refresh_token', authData.refresh_token);\n        }\n        localStorage.setItem('tgm_user', JSON.stringify(authData.user));\n        \n        // ğŸ”§ ä¿®å¾©ï¼šé€šçŸ¥ IpcService æ›´æ–° Token\n        this.ipcService.setAuthToken(authData.access_token);\n        \n        // ç™»å…¥æˆåŠŸï¼Œé‡å®šå‘\n        const returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\n        window.location.href = returnUrl;\n      } else {\n        this.error.set('Google ç™»å…¥å¤±æ•—ï¼šç„¡æ•ˆçš„èªè­‰æ•¸æ“š');\n      }\n    } catch (e: any) {\n      this.error.set(e.message || 'Google ç™»å…¥å¤±æ•—');\n    } finally {\n      this.isLoading.set(false);\n    }\n  }\n  \n  // ==================== ğŸ†• Deep Link ç™»å…¥ ====================\n  \n  // ğŸ†• Deep Link WebSocket\n  private deepLinkWebSocket: WebSocket | null = null;\n  \n  /**\n   * æ‰“é–‹ Telegram Deep Link ç™»å…¥\n   * ğŸ”§ ä¿®å¾©ï¼šä½¿ç”¨ WebSocket æ›¿ä»£è¼ªè©¢ï¼Œç¢ºä¿å¯¦æ™‚æ¥æ”¶ç™»éŒ„ç¢ºèª\n   * æµç¨‹ï¼šç”Ÿæˆ Token â†’ å»ºç«‹ WebSocket â†’ æ‰“é–‹ Telegram App â†’ ç”¨æˆ¶ç¢ºèª â†’ WebSocket æ¥æ”¶é€šçŸ¥\n   */\n  async openDeepLink() {\n    this.error.set(null);\n    this.deepLinkLoading.set(true);\n    this.telegramLoading.set(true);\n    \n    try {\n      // 1. èª¿ç”¨ API ç”Ÿæˆç™»å…¥ Token\n      const response = await fetch('/api/v1/auth/login-token', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ type: 'deep_link' })\n      });\n      \n      const result = await response.json();\n      \n      if (!result.success || !result.data) {\n        this.error.set(result.error || 'ç„¡æ³•ç”Ÿæˆç™»å…¥é€£çµ');\n        this.deepLinkLoading.set(false);\n        this.telegramLoading.set(false);\n        return;\n      }\n      \n      const { token, deep_link_url, expires_in } = result.data;\n      this.deepLinkToken = token;\n      this.deepLinkCountdown.set(expires_in || 300);\n      \n      console.log('[DeepLink] Token generated:', token.substring(0, 8) + '...');\n      \n      // 2. ğŸ†• å»ºç«‹ WebSocket é€£æ¥ï¼ˆå„ªå…ˆä½¿ç”¨å¯¦æ™‚é€šçŸ¥ï¼‰\n      this.connectDeepLinkWebSocket(token);\n      \n      // 3. æ‰“é–‹ Telegram Deep Link\n      console.log('[DeepLink] Opening:', deep_link_url);\n      window.open(deep_link_url, '_blank');\n      \n      // 4. é–‹å§‹å€’è¨ˆæ™‚\n      this.deepLinkCountdownInterval = setInterval(() => {\n        const current = this.deepLinkCountdown();\n        if (current <= 0) {\n          this.cancelDeepLink();\n          this.error.set('ç™»å…¥è¶…æ™‚ï¼Œè«‹é‡è©¦');\n        } else {\n          this.deepLinkCountdown.set(current - 1);\n        }\n      }, 1000);\n      \n      // 5. ğŸ†• å‚™ç”¨è¼ªè©¢ï¼ˆWebSocket å¤±æ•—æ™‚ä½¿ç”¨ï¼‰\n      this.startPollingLoginStatus();\n      \n    } catch (e: any) {\n      console.error('[DeepLink] Error:', e);\n      this.error.set(e.message || 'ç™»å…¥å¤±æ•—');\n      this.deepLinkLoading.set(false);\n      this.telegramLoading.set(false);\n    }\n  }\n  \n  /**\n   * ğŸ†• å»ºç«‹ Deep Link WebSocket é€£æ¥\n   */\n  private connectDeepLinkWebSocket(token: string) {\n    // é—œé–‰ç¾æœ‰é€£æ¥\n    if (this.deepLinkWebSocket) {\n      this.deepLinkWebSocket.close();\n    }\n    \n    // æ§‹å»º WebSocket URL\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n    const host = window.location.host;\n    const wsUrl = `${protocol}//${host}/ws/login-token/${token}`;\n    \n    console.log('[DeepLink WS] Connecting to:', wsUrl);\n    \n    try {\n      this.deepLinkWebSocket = new WebSocket(wsUrl);\n      \n      this.deepLinkWebSocket.onopen = () => {\n        console.log('[DeepLink WS] âœ… Connected');\n      };\n      \n      this.deepLinkWebSocket.onmessage = (event) => {\n        try {\n          const data = JSON.parse(event.data);\n          console.log('[DeepLink WS] Message received:', data);\n          \n          // è™•ç†ç™»å…¥æˆåŠŸæ¶ˆæ¯\n          if (data.type === 'login_success' || data.event === 'login_confirmed') {\n            console.log('[DeepLink WS] ğŸ‰ Login confirmed via WebSocket!');\n            this.handleLoginSuccess(data.data);\n          } else if (data.status === 'confirmed' && data.data?.access_token) {\n            console.log('[DeepLink WS] ğŸ‰ Login confirmed (direct)!');\n            this.handleLoginSuccess(data.data);\n          }\n        } catch (e) {\n          console.error('[DeepLink WS] Parse error:', e);\n        }\n      };\n      \n      this.deepLinkWebSocket.onclose = () => {\n        console.log('[DeepLink WS] Disconnected');\n      };\n      \n      this.deepLinkWebSocket.onerror = (error) => {\n        console.warn('[DeepLink WS] Error (will fallback to polling):', error);\n      };\n      \n    } catch (e) {\n      console.warn('[DeepLink WS] Failed to create WebSocket:', e);\n    }\n  }\n  \n  /**\n   * å–æ¶ˆ Deep Link ç™»å…¥\n   */\n  cancelDeepLink() {\n    // ğŸ†• é—œé–‰ WebSocket\n    if (this.deepLinkWebSocket) {\n      this.deepLinkWebSocket.close();\n      this.deepLinkWebSocket = null;\n    }\n    if (this.deepLinkPollInterval) {\n      clearInterval(this.deepLinkPollInterval);\n      this.deepLinkPollInterval = null;\n    }\n    if (this.deepLinkCountdownInterval) {\n      clearInterval(this.deepLinkCountdownInterval);\n      this.deepLinkCountdownInterval = null;\n    }\n    this.deepLinkLoading.set(false);\n    this.telegramLoading.set(false);\n    this.deepLinkToken = '';\n  }\n  \n  /**\n   * è¼ªè©¢ç™»å…¥ç‹€æ…‹ï¼ˆå‚™ç”¨æ–¹æ¡ˆï¼ŒWebSocket å¤±æ•—æ™‚ä½¿ç”¨ï¼‰\n   */\n  private startPollingLoginStatus() {\n    if (this.deepLinkPollInterval) {\n      clearInterval(this.deepLinkPollInterval);\n    }\n    \n    const pollStatus = async () => {\n      if (!this.deepLinkToken) return;\n      \n      try {\n        console.log('[DeepLink Poll] Checking status...');\n        const response = await fetch(`/api/v1/auth/login-token/${this.deepLinkToken}`);\n        const result = await response.json();\n        \n        console.log('[DeepLink Poll] Response:', result);\n        \n        if (!result.success) {\n          console.warn('[DeepLink Poll] Error:', result.error);\n          return;\n        }\n        \n        const { status, access_token, refresh_token, user } = result.data || {};\n        \n        console.log('[DeepLink Poll] Status:', status, 'Has Token:', !!access_token);\n        \n        if (status === 'confirmed' && access_token) {\n          // ç™»å…¥æˆåŠŸï¼\n          console.log('[DeepLink Poll] ğŸ‰ Login confirmed via polling!');\n          this.handleLoginSuccess({\n            access_token,\n            refresh_token,\n            user\n          });\n          \n        } else if (status === 'expired') {\n          this.cancelDeepLink();\n          this.error.set('ç™»å…¥é€£çµå·²éæœŸï¼Œè«‹é‡è©¦');\n        }\n        // pending ç‹€æ…‹ç¹¼çºŒè¼ªè©¢\n        \n      } catch (e) {\n        console.error('[DeepLink Poll] Error:', e);\n      }\n    };\n    \n    // 3 ç§’å¾Œé–‹å§‹è¼ªè©¢ï¼ˆçµ¦ WebSocket ä¸€é»æ™‚é–“é€£æ¥ï¼‰\n    setTimeout(() => {\n      if (this.deepLinkToken) {\n        pollStatus();\n        // æ¯ 2 ç§’è¼ªè©¢ä¸€æ¬¡\n        this.deepLinkPollInterval = setInterval(pollStatus, 2000);\n      }\n    }, 3000);\n  }\n  \n  // ==================== ğŸ†• Phase 2: QR Code + WebSocket ç™»å…¥ ====================\n  \n  /**\n   * åˆ‡æ›ç™»å…¥æ–¹å¼\n   */\n  switchLoginMethod(method: 'qrcode' | 'deeplink' | 'widget') {\n    // æ¸…ç†ç•¶å‰æ–¹å¼çš„è³‡æº\n    if (this.loginMethod() === 'qrcode' && method !== 'qrcode') {\n      this.cleanupQRCode();\n    }\n    if (this.loginMethod() === 'deeplink' && method !== 'deeplink') {\n      this.cancelDeepLink();\n    }\n    \n    this.loginMethod.set(method);\n    this.error.set(null);\n    \n    // å¦‚æœåˆ‡æ›åˆ° QR Codeï¼Œè‡ªå‹•ç”Ÿæˆ\n    if (method === 'qrcode' && !this.qrCodeUrl()) {\n      this.generateQRCode();\n    }\n  }\n  \n  /**\n   * ç”Ÿæˆ QR Code\n   */\n  async generateQRCode() {\n    this.qrCodeLoading.set(true);\n    this.qrCodeExpired.set(false);\n    this.error.set(null);\n    \n    try {\n      // 1. èª¿ç”¨ API ç”Ÿæˆç™»å…¥ Token\n      const response = await fetch('/api/v1/auth/login-token', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ type: 'qr_code' })\n      });\n      \n      const result = await response.json();\n      \n      if (!result.success || !result.data) {\n        this.error.set(result.error || 'ç„¡æ³•ç”ŸæˆäºŒç¶­ç¢¼');\n        this.qrCodeLoading.set(false);\n        return;\n      }\n      \n      const { token, deep_link_url, expires_in, qr_image, qr_fallback_url, verify_code } = result.data;\n      this.qrToken = token;\n      this.qrCountdown.set(expires_in || 300);\n      \n      // ğŸ†• ä¿å­˜é©—è­‰ç¢¼ï¼ˆè€ç”¨æˆ¶å‚™ç”¨ï¼‰\n      this.verifyCode.set(verify_code || null);\n      \n      // å„ªå…ˆä½¿ç”¨å¾Œç«¯ç”Ÿæˆçš„ QR Code\n      const qrDataUrl = qr_image || qr_fallback_url || this.generateQRCodeImage(deep_link_url);\n      this.qrCodeUrl.set(qrDataUrl);\n      \n      // 3. å»ºç«‹ WebSocket é€£æ¥\n      this.connectWebSocket(token);\n      \n      // 4. é–‹å§‹å€’è¨ˆæ™‚\n      this.startQRCountdown();\n      \n    } catch (e: any) {\n      console.error('[QRCode] Error:', e);\n      this.error.set(e.message || 'ç”ŸæˆäºŒç¶­ç¢¼å¤±æ•—');\n    } finally {\n      this.qrCodeLoading.set(false);\n    }\n  }\n  \n  /**\n   * ç”Ÿæˆ QR Code åœ–ç‰‡ URL\n   * ä½¿ç”¨ Google Chart APIï¼ˆç°¡å–®å¯é ï¼‰\n   */\n  private generateQRCodeImage(data: string): string {\n    // æ–¹æ¡ˆ1: Google Chart APIï¼ˆéœ€è¦ç¶²çµ¡ï¼‰\n    const encoded = encodeURIComponent(data);\n    return `https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=${encoded}&bgcolor=ffffff&color=000000&margin=10`;\n    \n    // å‚™é¸æ–¹æ¡ˆ: æœ¬åœ°ç”Ÿæˆï¼ˆéœ€è¦ qrcode åº«ï¼‰\n    // å¦‚æœéœ€è¦é›¢ç·šæ”¯æŒï¼Œå¯ä»¥ä½¿ç”¨ qrcode.js\n  }\n  \n  /**\n   * åˆ·æ–° QR Code\n   */\n  refreshQRCode() {\n    this.cleanupQRCode();\n    this.generateQRCode();\n  }\n  \n  /**\n   * æ¸…ç† QR Code è³‡æº\n   */\n  private cleanupQRCode() {\n    // é—œé–‰ WebSocket\n    if (this.qrWebSocket) {\n      this.qrWebSocket.close();\n      this.qrWebSocket = null;\n    }\n    \n    // æ¸…ç†å€’è¨ˆæ™‚\n    if (this.qrCountdownInterval) {\n      clearInterval(this.qrCountdownInterval);\n      this.qrCountdownInterval = null;\n    }\n    \n    // é‡ç½®ç‹€æ…‹\n    this.qrToken = '';\n    this.qrCodeUrl.set(null);\n    this.qrCodeExpired.set(false);\n    this.wsConnected.set(false);\n  }\n  \n  /**\n   * é–‹å§‹ QR Code å€’è¨ˆæ™‚\n   */\n  private startQRCountdown() {\n    if (this.qrCountdownInterval) {\n      clearInterval(this.qrCountdownInterval);\n    }\n    \n    this.qrCountdownInterval = setInterval(() => {\n      const current = this.qrCountdown();\n      if (current <= 0) {\n        this.qrCodeExpired.set(true);\n        clearInterval(this.qrCountdownInterval);\n        this.qrCountdownInterval = null;\n      } else {\n        this.qrCountdown.set(current - 1);\n      }\n    }, 1000);\n  }\n  \n  /**\n   * å»ºç«‹ WebSocket é€£æ¥\n   */\n  private connectWebSocket(token: string) {\n    // é—œé–‰ç¾æœ‰é€£æ¥\n    if (this.qrWebSocket) {\n      this.qrWebSocket.close();\n    }\n    \n    // æ§‹å»º WebSocket URL\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n    const host = window.location.host;\n    const wsUrl = `${protocol}//${host}/ws/login-token/${token}`;\n    \n    console.log('[WebSocket] Connecting to:', wsUrl);\n    \n    try {\n      this.qrWebSocket = new WebSocket(wsUrl);\n      \n      this.qrWebSocket.onopen = () => {\n        console.log('[WebSocket] Connected');\n        this.wsConnected.set(true);\n      };\n      \n      this.qrWebSocket.onmessage = (event) => {\n        try {\n          const data = JSON.parse(event.data);\n          console.log('[WebSocket] Message:', data);\n          \n          // è™•ç†ä¸åŒé¡å‹çš„æ¶ˆæ¯\n          if (data.type === 'login_success' || data.event === 'login_confirmed') {\n            // ç™»å…¥æˆåŠŸï¼\n            this.handleLoginSuccess(data.data);\n          } else if (data.type === 'login_token_update') {\n            // Token ç‹€æ…‹æ›´æ–°\n            if (data.status === 'confirmed') {\n              // ç‹€æ…‹å·²ç¢ºèªï¼Œç™¼é€ check_status ç²å–å®Œæ•´æ•¸æ“š\n              this.qrWebSocket?.send(JSON.stringify({ type: 'check_status' }));\n            }\n          } else if (data.status === 'confirmed' && data.data?.access_token) {\n            // ç›´æ¥åŒ…å« token çš„ç¢ºèªæ¶ˆæ¯\n            this.handleLoginSuccess(data.data);\n          }\n        } catch (e) {\n          console.error('[WebSocket] Parse error:', e);\n        }\n      };\n      \n      this.qrWebSocket.onclose = () => {\n        console.log('[WebSocket] Disconnected');\n        this.wsConnected.set(false);\n        \n        // å¦‚æœæœªéæœŸä¸”æœªæˆåŠŸï¼Œå˜—è©¦é‡é€£\n        if (!this.qrCodeExpired() && this.qrToken) {\n          setTimeout(() => {\n            if (this.qrToken && !this.qrCodeExpired()) {\n              console.log('[WebSocket] Reconnecting...');\n              this.connectWebSocket(this.qrToken);\n            }\n          }, 3000);\n        }\n      };\n      \n      this.qrWebSocket.onerror = (error) => {\n        console.error('[WebSocket] Error:', error);\n        this.wsConnected.set(false);\n      };\n      \n      // è¨­ç½®å¿ƒè·³\n      const heartbeat = setInterval(() => {\n        if (this.qrWebSocket?.readyState === WebSocket.OPEN) {\n          this.qrWebSocket.send(JSON.stringify({ type: 'ping' }));\n        } else {\n          clearInterval(heartbeat);\n        }\n      }, 15000);\n      \n    } catch (e) {\n      console.error('[WebSocket] Create error:', e);\n      this.wsConnected.set(false);\n    }\n  }\n  \n  /**\n   * è™•ç†ç™»å…¥æˆåŠŸ\n   * \n   * ğŸ†• Phase 3: æ·»åŠ æˆåŠŸå‹•ç•«\n   */\n  private handleLoginSuccess(data: any) {\n    console.log('[Login] Success - Full data:', JSON.stringify(data));\n    console.log('[Login] access_token exists:', !!data?.access_token);\n    \n    if (!data?.access_token) {\n      console.error('[Login] âŒ No access_token in data!');\n      this.error.set('ç™»å…¥å¤±æ•—ï¼šæœªæ”¶åˆ°èªè­‰ä»¤ç‰Œ');\n      return;\n    }\n    \n    // æ¸…ç†è³‡æº\n    this.cleanupQRCode();\n    this.cancelDeepLink();\n    \n    // ğŸ†• ä½¿ç”¨ AuthService è¨­ç½®æœƒè©±ï¼ˆç¢ºä¿ç‹€æ…‹åŒæ­¥ï¼‰\n    this.authService.setSession({\n      access_token: data.access_token,\n      refresh_token: data.refresh_token,\n      user: data.user,\n      session_id: data.session_id\n    });\n    \n    // ğŸ”§ ä¿®å¾©ï¼šé€šçŸ¥ IpcService é‡æ–°é€£æ¥å¸¶èªè­‰çš„ WebSocket\n    this.ipcService.setAuthToken(data.access_token);\n    \n    console.log('[Login] âœ… Session set via AuthService');\n    console.log('[Login] isAuthenticated:', this.authService.isAuthenticated());\n    \n    // ğŸ†• Phase 3: é¡¯ç¤ºæˆåŠŸå‹•ç•«\n    this.successUserName.set(data?.user?.display_name || data?.user?.username || 'User');\n    this.loginSuccess.set(true);\n    \n    // è¨˜ä½ç™»å…¥æ–¹å¼åå¥½\n    this.saveLoginPreference();\n    \n    // ğŸ”§ ä½¿ç”¨ Angular Router è·³è½‰ï¼ˆé¿å…å®Œå…¨åˆ·æ–°é é¢ï¼‰\n    const returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/dashboard';\n    console.log('[Login] Will navigate to:', returnUrl, 'in 1.5 seconds');\n    \n    setTimeout(() => {\n      console.log('[Login] Navigating now...');\n      console.log('[Login] Final check - isAuthenticated:', this.authService.isAuthenticated());\n      console.log('[Login] Final check - accessToken:', !!this.authService.accessToken());\n      \n      // ä½¿ç”¨ Angular Router å°èˆªï¼ˆä¿æŒ SPA ç‹€æ…‹ï¼‰\n      this.router.navigateByUrl(returnUrl).then(() => {\n        console.log('[Login] âœ… Navigation complete');\n      }).catch(err => {\n        console.error('[Login] Navigation error:', err);\n        // å‚™ç”¨ï¼šä½¿ç”¨ location.href\n        window.location.href = returnUrl;\n      });\n    }, 1500);  // 1.5 ç§’å¾Œè·³è½‰\n  }\n  \n  /**\n   * ğŸ†• Phase 3: ä¿å­˜ç™»å…¥æ–¹å¼åå¥½\n   */\n  private saveLoginPreference() {\n    try {\n      localStorage.setItem('tgm_login_method', this.loginMethod());\n    } catch (e) {\n      console.debug('Could not save login preference');\n    }\n  }\n  \n  /**\n   * ğŸ†• Phase 3: è®€å–ç™»å…¥æ–¹å¼åå¥½\n   */\n  private loadLoginPreference(): 'qrcode' | 'deeplink' | 'widget' | null {\n    try {\n      const saved = localStorage.getItem('tgm_login_method');\n      if (saved === 'qrcode' || saved === 'deeplink' || saved === 'widget') {\n        return saved;\n      }\n    } catch (e) {\n      console.debug('Could not load login preference');\n    }\n    return null;\n  }\n  \n  // ==================== Telegram Widget ç™»å…¥ ====================\n  \n  /**\n   * ğŸ†• åˆå§‹åŒ–åµŒå…¥å¼ Telegram Login Widget\n   * å„ªé»ï¼šè‡ªå‹•æª¢æ¸¬å·²ç™»å…¥çš„ Telegram å¸³è™Ÿï¼Œä¸€éµç¢ºèªç™»å…¥\n   */\n  async initTelegramWidget() {\n    this.telegramLoading.set(true);\n    this.error.set(null);\n    \n    try {\n      // 1. ç²å– Telegram é…ç½®\n      const config = await this.authService.getTelegramConfig();\n      \n      if (!config.enabled || !config.bot_id) {\n        this.error.set(this.t('auth.telegramNotConfigured'));\n        return;\n      }\n      \n      this.telegramBotUsername = config.bot_username || '';\n      this.telegramBotId = config.bot_id;\n      \n      // 2. å®šç¾©å…¨å±€å›èª¿å‡½æ•¸\n      (window as any).onTelegramAuth = (user: any) => {\n        console.log('Telegram auth callback:', user);\n        this.handleTelegramAuth(user);\n      };\n      \n      // ğŸ†• å„ªå…ˆå˜—è©¦ Widgetï¼ˆæ”¯æŒä¸€éµç™»å…¥ï¼‰ï¼Œå¤±æ•—å‰‡å›é€€åˆ° OAuth\n      try {\n        await this.loadTelegramWidget();\n      } catch (widgetError) {\n        console.warn('Widget failed, falling back to OAuth:', widgetError);\n        this.openTelegramOAuth();\n      }\n      \n    } catch (e: any) {\n      console.error('Telegram login error:', e);\n      this.error.set(e.message || 'Telegram ç™»å…¥å¤±æ•—');\n    } finally {\n      this.telegramLoading.set(false);\n    }\n  }\n  \n  /**\n   * ğŸ†• è¼‰å…¥ Telegram Login Widgetï¼ˆæ”¯æŒä¸€éµç™»å…¥ï¼‰\n   */\n  private loadTelegramWidget(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      // å‰µå»ºå½ˆçª—å®¹å™¨\n      const popup = window.open('', 'telegram-widget', 'width=550,height=470,scrollbars=yes');\n      if (!popup) {\n        reject(new Error('Popup blocked'));\n        return;\n      }\n      \n      // å¯«å…¥ Widget HTML\n      popup.document.write(`\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Telegram ç™»å…¥</title>\n          <style>\n            body { \n              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n              display: flex; \n              flex-direction: column;\n              justify-content: center; \n              align-items: center; \n              height: 100vh; \n              margin: 0;\n              background: linear-gradient(135deg, #0f172a, #1e293b);\n              color: white;\n            }\n            h2 { margin-bottom: 30px; }\n            #telegram-login { min-height: 50px; }\n            .hint { color: #94a3b8; font-size: 14px; margin-top: 20px; text-align: center; }\n          </style>\n        </head>\n        <body>\n          <h2>ä½¿ç”¨ Telegram ç™»å…¥</h2>\n          <div id=\"telegram-login\"></div>\n          <p class=\"hint\">å¦‚æœæ‚¨å·²åœ¨ç€è¦½å™¨ç™»å…¥ Telegramï¼Œå°‡é¡¯ç¤ºä¸€éµç™»å…¥æŒ‰éˆ•</p>\n          <script>\n            window.onTelegramAuth = function(user) {\n              window.opener.onTelegramAuth(user);\n              window.close();\n            };\n          </script>\n          <script async src=\"https://telegram.org/js/telegram-widget.js?22\"\n            data-telegram-login=\"${this.telegramBotUsername}\"\n            data-size=\"large\"\n            data-radius=\"8\"\n            data-onauth=\"onTelegramAuth(user)\"\n            data-request-access=\"write\">\n          </script>\n        </body>\n        </html>\n      `);\n      popup.document.close();\n      \n      // ç›£è½å½ˆçª—é—œé–‰\n      const checkClosed = setInterval(() => {\n        if (popup.closed) {\n          clearInterval(checkClosed);\n          resolve();\n        }\n      }, 500);\n      \n      // 5ç§’è¶…æ™‚\n      setTimeout(() => {\n        clearInterval(checkClosed);\n        resolve();\n      }, 30000);\n    });\n  }\n  \n  /**\n   * ğŸ”§ æ”¹ç”¨ OAuth URL é‡å®šå‘æ–¹å¼ï¼ˆæ›´å¯é ï¼‰\n   * ä¸ä¾è³´å¤–éƒ¨è…³æœ¬åŠ è¼‰ï¼Œç›´æ¥è·³è½‰åˆ° Telegram æˆæ¬Šé é¢\n   */\n  private openTelegramOAuth(): void {\n    // æ§‹å»ºå›èª¿ URL\n    const callbackUrl = `${window.location.origin}/auth/telegram-callback`;\n    \n    // æ§‹å»º Telegram OAuth URL\n    const authUrl = `https://oauth.telegram.org/auth?bot_id=${this.telegramBotId}&origin=${encodeURIComponent(window.location.origin)}&request_access=write&return_to=${encodeURIComponent(callbackUrl)}`;\n    \n    console.log('Opening Telegram OAuth:', authUrl);\n    \n    // åœ¨æ–°çª—å£æ‰“é–‹ï¼ˆé¿å…é›¢é–‹ç•¶å‰é é¢ï¼‰\n    const width = 550;\n    const height = 470;\n    const left = (window.innerWidth - width) / 2;\n    const top = (window.innerHeight - height) / 2;\n    \n    const popup = window.open(\n      authUrl,\n      'telegram-oauth',\n      `width=${width},height=${height},left=${left},top=${top},scrollbars=yes`\n    );\n    \n    // ç›£è½æˆæ¬Šçµæœ\n    if (popup) {\n      const checkPopup = setInterval(() => {\n        try {\n          if (popup.closed) {\n            clearInterval(checkPopup);\n            // ç”¨æˆ¶é—œé–‰äº†å½ˆçª—\n            this.telegramLoading.set(false);\n          }\n        } catch (e) {\n          // è·¨åŸŸéŒ¯èª¤ï¼Œå¿½ç•¥\n        }\n      }, 500);\n    }\n  }\n  \n  private async handleTelegramAuth(authData: any) {\n    this.telegramLoading.set(true);\n    this.error.set(null);\n    \n    console.log('[TelegramAuth] Processing auth data:', authData);\n    \n    try {\n      // ğŸ†• P1.4: éŒ¯èª¤é‡è©¦æ©Ÿåˆ¶ï¼ˆæœ€å¤šé‡è©¦ 3 æ¬¡ï¼‰\n      let result: { success: boolean; error?: string } = { success: false };\n      let retries = 0;\n      const maxRetries = 3;\n      \n      while (retries < maxRetries) {\n        try {\n          result = await this.authService.telegramLogin(authData);\n          break;  // æˆåŠŸå‰‡è·³å‡ºå¾ªç’°\n        } catch (e: any) {\n          retries++;\n          console.warn(`[TelegramAuth] Retry ${retries}/${maxRetries}:`, e.message);\n          if (retries >= maxRetries) throw e;\n          await new Promise(r => setTimeout(r, 1000 * retries));  // éå¢å»¶é²\n        }\n      }\n      \n      if (result.success) {\n        console.log('[TelegramAuth] Login successful, redirecting...');\n        // ğŸ†• ç™»å…¥æˆåŠŸï¼Œä½¿ç”¨ window.location å¼·åˆ¶åˆ·æ–°ä»¥ç¢ºä¿ç‹€æ…‹æ›´æ–°\n        const returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/dashboard';\n        window.location.href = returnUrl;\n      } else {\n        console.error('[TelegramAuth] Login failed:', result.error);\n        this.error.set(result.error || this.t('auth.telegramLoginFailed'));\n      }\n    } catch (e: any) {\n      console.error('[TelegramAuth] Exception:', e);\n      this.error.set(e.message || this.t('auth.telegramLoginFailed'));\n    } finally {\n      this.telegramLoading.set(false);\n    }\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
