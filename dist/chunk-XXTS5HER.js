import{a as z}from"./chunk-VSSEQNUC.js";import{h as S,j as O}from"./chunk-IOZ6RGE3.js";import{b as E,c as D,d as k,e as B,f as N,g as A,p as L,t as T}from"./chunk-3FNGYHNZ.js";import{b as V}from"./chunk-LSISMS55.js";import{o as y}from"./chunk-HDSZBSQ2.js";import{Eb as F,Fb as v,Gb as h,La as _,O as p,T as g,U as f,Ya as d,Za as u,cb as C,da as c,db as t,eb as o,fb as x,jb as M,nb as P,pb as m,xa as a,xb as i,yb as w}from"./chunk-XBIFDY2N.js";function R(n,r){n&1&&(t(0,"div",3)(1,"span",8),i(2,"\u2705"),o(),t(3,"span"),i(4,"\u91CD\u7F6E\u93C8\u63A5\u5DF2\u767C\u9001\u5230\u60A8\u7684\u90F5\u7BB1\uFF0C\u8ACB\u67E5\u6536"),o()())}function W(n,r){if(n&1&&(t(0,"div",4)(1,"span",9),i(2,"\u26A0\uFE0F"),o(),t(3,"span"),i(4),o()()),n&2){let e=m();a(4),w(e.error())}}function j(n,r){n&1&&(x(0,"span",17),t(1,"span"),i(2,"\u767C\u9001\u4E2D..."),o())}function q(n,r){n&1&&(t(0,"span"),i(1,"\u767C\u9001\u91CD\u7F6E\u93C8\u63A5"),o())}function G(n,r){if(n&1){let e=M();t(0,"form",10),P("ngSubmit",function(){g(e);let l=m();return f(l.onSubmit())}),t(1,"div",11)(2,"label",12),i(3,"\u96FB\u5B50\u90F5\u4EF6"),o(),t(4,"div",13)(5,"span",14),i(6,"\u{1F4E7}"),o(),t(7,"input",15),h("ngModelChange",function(l){g(e);let b=m();return v(b.email,l)||(b.email=l),f(l)}),o()()(),t(8,"button",16),d(9,j,3,0)(10,q,2,0,"span"),o()()}if(n&2){let e=m();a(7),F("ngModel",e.email),C("disabled",e.isLoading()),a(),C("disabled",e.isLoading()||!e.email),a(),u(e.isLoading()?9:10)}}var I=class n{constructor(){this.i18n=p(V);this.authService=p(z);this.email="";this.isLoading=c(!1);this.error=c(null);this.success=c(!1)}async onSubmit(){if(this.email){this.isLoading.set(!0),this.error.set(null);try{let r=await this.authService.forgotPassword(this.email);r.success?this.success.set(!0):this.error.set(r.error||"\u767C\u9001\u5931\u6557")}catch(r){this.error.set(r.message||"\u767C\u9001\u5931\u6557")}finally{this.isLoading.set(!1)}}}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=_({type:n,selectors:[["app-forgot-password"]],decls:11,vars:3,consts:[[1,"forgot-password-page"],[1,"page-title"],[1,"page-subtitle"],[1,"success-alert"],[1,"error-alert"],[1,"forgot-form"],[1,"back-link"],["routerLink","/auth/login"],[1,"success-icon"],[1,"error-icon"],[1,"forgot-form",3,"ngSubmit"],[1,"form-group"],["for","email"],[1,"input-wrapper"],[1,"input-icon"],["type","email","id","email","name","email","placeholder","\u8ACB\u8F38\u5165\u96FB\u5B50\u90F5\u4EF6","required","","autocomplete","email",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"submit-btn",3,"disabled"],[1,"loading-spinner"]],template:function(e,s){e&1&&(t(0,"div",0)(1,"h2",1),i(2,"\u91CD\u7F6E\u5BC6\u78BC"),o(),t(3,"p",2),i(4,"\u8F38\u5165\u60A8\u7684\u96FB\u5B50\u90F5\u4EF6\uFF0C\u6211\u5011\u5C07\u767C\u9001\u91CD\u7F6E\u93C8\u63A5"),o(),d(5,R,5,0,"div",3),d(6,W,5,1,"div",4),d(7,G,11,4,"form",5),t(8,"p",6)(9,"a",7),i(10,"\u2190 \u8FD4\u56DE\u767B\u5165"),o()()()),e&2&&(a(5),u(s.success()?5:-1),a(),u(s.error()?6:-1),a(),u(s.success()?-1:7))},dependencies:[y,T,A,E,D,k,L,N,B,O,S],styles:[".forgot-password-page[_ngcontent-%COMP%]{color:var(--text-primary, #fff)}.page-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin-bottom:.5rem}.page-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary, #888);margin-bottom:2rem}.success-alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:1rem;background:#22c55e1a;border:1px solid rgba(34,197,94,.3);border-radius:8px;color:#4ade80;margin-bottom:1.5rem}.error-alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.875rem 1rem;background:#ef44441a;border:1px solid rgba(239,68,68,.3);border-radius:8px;color:#f87171;margin-bottom:1.5rem}.forgot-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--text-secondary, #aaa)}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;font-size:1rem;opacity:.5}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem .875rem 2.75rem;background:var(--bg-secondary, #1a1a1a);border:1px solid var(--border-color, #333);border-radius:8px;color:var(--text-primary, #fff);font-size:1rem;transition:all .2s ease}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary, #3b82f6);box-shadow:0 0 0 3px #3b82f61a}.submit-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.875rem 1.5rem;background:linear-gradient(135deg,#3b82f6,#8b5cf6);border:none;border-radius:8px;color:#fff;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.loading-spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.back-link[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem}.back-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary, #3b82f6);text-decoration:none}.back-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"],changeDetection:0})}};export{I as ForgotPasswordComponent};
