# TG-Matrix UI/UX 優化方案

> **版本**: 1.0.5  
> **日期**: 2026年1月11日

---

## 🔴 當前問題分析

### 1. 語言切換問題

| 問題 | 原因 | 影響 |
|------|------|------|
| 語言切換不生效 | i18n 服務未正確綁定到模板 | 用戶無法切換語言 |
| 側邊欄語言按鈕無響應 | 可能使用了舊的 TranslationService | 功能失效 |

### 2. 色彩對比度問題

| 問題 | 位置 | 原因 |
|------|------|------|
| 淺色模式文字看不清 | 全局 | 文字顏色未隨主題變化 |
| 菜單對比度低 | 側邊欄 | 灰底白字對比度不足 |
| 按鈕/標籤顏色過淺 | 各處 | 固定使用深色模式顏色 |
| 輸入框文字不可見 | 表單 | 背景和文字顏色相近 |

### 3. 整體 UI/UX 問題

| 問題 | 說明 |
|------|------|
| 主題切換不完整 | 只改背景，未改文字/邊框顏色 |
| 響應式不佳 | 某些元素在小窗口下重疊 |
| 視覺層次不清 | 標題/正文/次要文字區分不明顯 |
| 空狀態設計單調 | 空頁面缺乏引導 |

---

## 🎨 色彩系統優化方案

### 設計原則

1. **WCAG 2.1 AA 標準**：對比度至少 4.5:1（正文）、3:1（大字）
2. **語義化顏色**：成功/警告/錯誤有明確區分
3. **主題一致性**：深淺模式完整切換
4. **品牌識別**：保持 TG-Matrix 品牌色調

### 深色模式調色板

```
┌─────────────────────────────────────────────────────────┐
│  深色模式 (Dark Mode)                                    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  背景色系                                                │
│  ────────                                               │
│  bg-primary    #0f172a  ████████  主背景                │
│  bg-secondary  #1e293b  ████████  卡片/面板             │
│  bg-tertiary   #334155  ████████  懸停/選中             │
│  bg-elevated   #475569  ████████  彈窗/下拉             │
│                                                         │
│  文字色系                                                │
│  ────────                                               │
│  text-primary   #f8fafc  ████████  主要文字 (對比 15.4:1)│
│  text-secondary #cbd5e1  ████████  次要文字 (對比 9.7:1) │
│  text-muted     #94a3b8  ████████  輔助文字 (對比 5.6:1) │
│  text-disabled  #64748b  ████████  禁用文字 (對比 3.5:1) │
│                                                         │
│  品牌色系                                                │
│  ────────                                               │
│  primary        #06b6d4  ████████  主色調 (青色)         │
│  primary-light  #22d3ee  ████████  淺色                 │
│  primary-dark   #0891b2  ████████  深色                 │
│  accent         #8b5cf6  ████████  強調色 (紫色)         │
│                                                         │
│  狀態色系                                                │
│  ────────                                               │
│  success        #10b981  ████████  成功                 │
│  warning        #f59e0b  ████████  警告                 │
│  error          #ef4444  ████████  錯誤                 │
│  info           #3b82f6  ████████  信息                 │
│                                                         │
│  邊框色系                                                │
│  ────────                                               │
│  border-default #334155  ████████  默認邊框             │
│  border-light   #475569  ████████  淺色邊框             │
│  border-focus   #06b6d4  ████████  聚焦邊框             │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 淺色模式調色板

```
┌─────────────────────────────────────────────────────────┐
│  淺色模式 (Light Mode)                                   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  背景色系                                                │
│  ────────                                               │
│  bg-primary    #ffffff  ████████  主背景                │
│  bg-secondary  #f8fafc  ████████  卡片/面板             │
│  bg-tertiary   #f1f5f9  ████████  懸停/選中             │
│  bg-elevated   #e2e8f0  ████████  彈窗/下拉             │
│                                                         │
│  文字色系                                                │
│  ────────                                               │
│  text-primary   #0f172a  ████████  主要文字 (對比 15.4:1)│
│  text-secondary #334155  ████████  次要文字 (對比 9.8:1) │
│  text-muted     #64748b  ████████  輔助文字 (對比 4.7:1) │
│  text-disabled  #94a3b8  ████████  禁用文字 (對比 3.0:1) │
│                                                         │
│  品牌色系                                                │
│  ────────                                               │
│  primary        #0891b2  ████████  主色調 (深青)         │
│  primary-light  #06b6d4  ████████  淺色                 │
│  primary-dark   #0e7490  ████████  深色                 │
│  accent         #7c3aed  ████████  強調色 (深紫)         │
│                                                         │
│  狀態色系                                                │
│  ────────                                               │
│  success        #059669  ████████  成功 (深色適應)       │
│  warning        #d97706  ████████  警告 (深色適應)       │
│  error          #dc2626  ████████  錯誤 (深色適應)       │
│  info           #2563eb  ████████  信息 (深色適應)       │
│                                                         │
│  邊框色系                                                │
│  ────────                                               │
│  border-default #e2e8f0  ████████  默認邊框             │
│  border-light   #cbd5e1  ████████  淺色邊框             │
│  border-focus   #0891b2  ████████  聚焦邊框             │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 📐 組件優化方案

### 1. 側邊欄 (Sidebar)

#### 當前問題
- 灰底白字對比度不足
- 選中狀態不明顯
- 圖標和文字對齊不佳

#### 優化方案

```
┌─────────────────────────────────────┐
│  深色模式                           │
├─────────────────────────────────────┤
│                                     │
│  背景: #0f172a (深藍黑)              │
│  菜單項:                             │
│    - 默認: 文字 #cbd5e1, 圖標 #94a3b8 │
│    - 懸停: 背景 #1e293b, 文字 #f8fafc │
│    - 選中: 背景 #06b6d4/20%          │
│            文字 #22d3ee              │
│            左邊框 3px #06b6d4        │
│                                     │
│  分組標題: #64748b, 大寫, 字號 11px   │
│                                     │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  淺色模式                           │
├─────────────────────────────────────┤
│                                     │
│  背景: #f8fafc (淺灰白)              │
│  菜單項:                             │
│    - 默認: 文字 #334155, 圖標 #64748b │
│    - 懸停: 背景 #e2e8f0, 文字 #0f172a │
│    - 選中: 背景 #0891b2/15%          │
│            文字 #0891b2              │
│            左邊框 3px #0891b2        │
│                                     │
│  分組標題: #94a3b8, 大寫, 字號 11px   │
│                                     │
└─────────────────────────────────────┘
```

### 2. 卡片組件 (Cards)

#### 優化方案

| 屬性 | 深色模式 | 淺色模式 |
|------|----------|----------|
| 背景 | #1e293b | #ffffff |
| 邊框 | #334155 | #e2e8f0 |
| 標題文字 | #f8fafc | #0f172a |
| 正文文字 | #cbd5e1 | #334155 |
| 輔助文字 | #94a3b8 | #64748b |
| 陰影 | 0 4px 6px rgba(0,0,0,0.3) | 0 4px 6px rgba(0,0,0,0.1) |

### 3. 按鈕組件 (Buttons)

#### 主要按鈕

| 狀態 | 深色模式 | 淺色模式 |
|------|----------|----------|
| 默認 | 背景 #06b6d4, 文字 #ffffff | 背景 #0891b2, 文字 #ffffff |
| 懸停 | 背景 #0891b2 | 背景 #0e7490 |
| 禁用 | 背景 #334155, 文字 #64748b | 背景 #e2e8f0, 文字 #94a3b8 |

#### 次要按鈕

| 狀態 | 深色模式 | 淺色模式 |
|------|----------|----------|
| 默認 | 背景 #334155, 文字 #f8fafc | 背景 #f1f5f9, 文字 #334155 |
| 懸停 | 背景 #475569 | 背景 #e2e8f0 |

### 4. 表單組件 (Forms)

#### 輸入框

| 屬性 | 深色模式 | 淺色模式 |
|------|----------|----------|
| 背景 | #1e293b | #ffffff |
| 邊框 | #475569 | #cbd5e1 |
| 文字 | #f8fafc | #0f172a |
| 占位符 | #64748b | #94a3b8 |
| 聚焦邊框 | #06b6d4 | #0891b2 |
| 錯誤邊框 | #ef4444 | #dc2626 |

### 5. 表格組件 (Tables)

| 屬性 | 深色模式 | 淺色模式 |
|------|----------|----------|
| 表頭背景 | #1e293b | #f1f5f9 |
| 表頭文字 | #94a3b8 | #64748b |
| 行背景 | transparent | transparent |
| 行懸停 | #1e293b/50% | #f1f5f9 |
| 斑馬紋 | #1e293b/30% | #f8fafc |
| 邊框 | #334155 | #e2e8f0 |

### 6. 標籤/徽章 (Tags/Badges)

| 類型 | 深色模式 | 淺色模式 |
|------|----------|----------|
| 成功 | 背景 #10b981/20%, 文字 #34d399 | 背景 #059669/15%, 文字 #059669 |
| 警告 | 背景 #f59e0b/20%, 文字 #fbbf24 | 背景 #d97706/15%, 文字 #d97706 |
| 錯誤 | 背景 #ef4444/20%, 文字 #f87171 | 背景 #dc2626/15%, 文字 #dc2626 |
| 信息 | 背景 #3b82f6/20%, 文字 #60a5fa | 背景 #2563eb/15%, 文字 #2563eb |
| 中性 | 背景 #64748b/20%, 文字 #94a3b8 | 背景 #64748b/15%, 文字 #64748b |

---

## 🔧 功能優化方案

### 1. 語言切換修復

#### 問題診斷
```
當前流程:
用戶點擊語言按鈕 → 調用 setLanguage() → ❌ 未更新 i18n 服務

修復流程:
用戶點擊語言按鈕 → 調用 i18n.setLocale() → 更新 signal → 觸發重新渲染
```

#### 修復方案

| 步驟 | 操作 |
|------|------|
| 1 | 移除舊的 TranslationService 調用 |
| 2 | 替換為 I18nService |
| 3 | 更新側邊欄按鈕綁定 |
| 4 | 確保所有文字使用 i18n.t() |

### 2. 主題切換完善

#### 當前問題
- 只切換了背景色
- 文字/邊框/陰影未跟隨切換
- CSS 變量未正確應用

#### 修復方案

```css
/* 使用 CSS 變量實現完整主題切換 */

:root {
  /* 深色模式 (默認) */
  --bg-primary: #0f172a;
  --bg-secondary: #1e293b;
  --text-primary: #f8fafc;
  --text-secondary: #cbd5e1;
  --border-color: #334155;
  /* ... */
}

:root.light {
  /* 淺色模式 */
  --bg-primary: #ffffff;
  --bg-secondary: #f8fafc;
  --text-primary: #0f172a;
  --text-secondary: #334155;
  --border-color: #e2e8f0;
  /* ... */
}
```

---

## 📱 響應式優化方案

### 斷點定義

| 斷點 | 尺寸 | 說明 |
|------|------|------|
| xs | < 640px | 手機豎屏 |
| sm | 640-768px | 手機橫屏/小平板 |
| md | 768-1024px | 平板 |
| lg | 1024-1280px | 小桌面 |
| xl | > 1280px | 大桌面 |

### 側邊欄響應式

| 斷點 | 行為 |
|------|------|
| < 768px | 隱藏側邊欄，顯示漢堡菜單 |
| 768-1024px | 收縮為圖標模式 |
| > 1024px | 完整顯示 |

### 內容區響應式

| 組件 | xs | sm | md | lg | xl |
|------|-----|-----|-----|-----|-----|
| 卡片網格 | 1列 | 1列 | 2列 | 3列 | 4列 |
| 表格 | 堆疊 | 橫滾 | 完整 | 完整 | 完整 |
| 表單 | 單列 | 單列 | 雙列 | 雙列 | 雙列 |

---

## 🎯 UX 優化方案

### 1. 視覺層次

```
┌─────────────────────────────────────────────────────────┐
│  文字層次                                                │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  H1 頁面標題     28px / 700 / text-primary              │
│  H2 區塊標題     22px / 600 / text-primary              │
│  H3 卡片標題     18px / 600 / text-primary              │
│  H4 小標題       16px / 600 / text-primary              │
│                                                         │
│  正文           14px / 400 / text-secondary             │
│  輔助文字        12px / 400 / text-muted                │
│  標籤/徽章       11px / 500 / 各狀態色                   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 2. 間距系統

| 名稱 | 大小 | 用途 |
|------|------|------|
| xs | 4px | 緊湊元素內 |
| sm | 8px | 元素內間距 |
| md | 16px | 卡片內間距 |
| lg | 24px | 區塊間距 |
| xl | 32px | 大區塊間距 |
| 2xl | 48px | 頁面間距 |

### 3. 交互反饋

| 操作 | 反饋 |
|------|------|
| 按鈕點擊 | 縮放 0.98 + 顏色加深 |
| 菜單懸停 | 背景色過渡 150ms |
| 表單聚焦 | 邊框顏色 + 光暈 |
| 加載中 | 骨架屏/旋轉指示器 |
| 成功操作 | Toast 通知 + 動畫 |
| 錯誤操作 | Toast 通知 + 震動效果 |

### 4. 空狀態設計

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│                      🎯                                 │
│                                                         │
│              還沒有營銷活動                              │
│                                                         │
│     創建您的第一個自動化營銷活動，開始獲取客戶           │
│                                                         │
│              [+ 創建活動]  [查看教程]                    │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 5. 加載狀態

| 場景 | 方案 |
|------|------|
| 頁面加載 | 全屏 Logo + 進度條 |
| 數據加載 | 骨架屏 |
| 按鈕操作 | 按鈕內旋轉 + 禁用 |
| 表格刷新 | 頂部進度條 |

---

## ✅ 實施步驟

### Phase 1: 基礎修復（優先）

| 步驟 | 內容 | 預計時間 |
|------|------|----------|
| 1 | 修復語言切換功能 | 30 分鐘 |
| 2 | 創建 CSS 變量系統 | 1 小時 |
| 3 | 修復淺色模式文字顏色 | 1 小時 |
| 4 | 修復側邊欄對比度 | 30 分鐘 |

### Phase 2: 組件優化

| 步驟 | 內容 | 預計時間 |
|------|------|----------|
| 5 | 優化按鈕組件 | 30 分鐘 |
| 6 | 優化表單組件 | 30 分鐘 |
| 7 | 優化卡片組件 | 30 分鐘 |
| 8 | 優化表格組件 | 30 分鐘 |

### Phase 3: UX 增強

| 步驟 | 內容 | 預計時間 |
|------|------|----------|
| 9 | 添加交互動畫 | 30 分鐘 |
| 10 | 優化空狀態 | 30 分鐘 |
| 11 | 響應式調整 | 1 小時 |
| 12 | 測試驗證 | 30 分鐘 |

---

## 📊 對比度驗證

### 深色模式

| 組合 | 對比度 | 等級 |
|------|--------|------|
| #f8fafc on #0f172a | 15.4:1 | ✅ AAA |
| #cbd5e1 on #0f172a | 9.7:1 | ✅ AAA |
| #94a3b8 on #0f172a | 5.6:1 | ✅ AA |
| #06b6d4 on #0f172a | 7.2:1 | ✅ AAA |

### 淺色模式

| 組合 | 對比度 | 等級 |
|------|--------|------|
| #0f172a on #ffffff | 15.4:1 | ✅ AAA |
| #334155 on #ffffff | 9.8:1 | ✅ AAA |
| #64748b on #ffffff | 4.7:1 | ✅ AA |
| #0891b2 on #ffffff | 4.5:1 | ✅ AA |

---

## 🎯 預期效果

### 修復後對比

```
修復前 (淺色模式):
┌─────────────────────────────────────┐
│  ▓▓ TG-Matrix    ← 看不清           │
│  ▒▒▒▒▒▒▒▒▒▒▒▒   ← 灰底白字         │
│  ░░░░░░░░░░░░░  ← 對比度不足        │
└─────────────────────────────────────┘

修復後 (淺色模式):
┌─────────────────────────────────────┐
│  ■■ TG-Matrix    ← 清晰可見         │
│  ████████████   ← 適當對比度        │
│  ████████████   ← 可讀性良好        │
└─────────────────────────────────────┘
```

---

確認此方案後，我將開始實施代碼修復。需要調整嗎？
