# 三模式數據統一 - 測試結果

**測試時間**: 2026-02-22  
**後端**: http://127.0.0.1:8000

## 測試結論

同一後端 (8000) 同時提供 **登錄/auth** 與 **管理後台/admin** 接口，三端（網站版、本地安裝版、開發版）只要將 `api_server` 指向該地址，即使用同一套數據。

## 測試項

| 項目 | 結果 | 說明 |
|------|------|------|
| GET /health | 200 OK | 後端就緒，backend_ready: true |
| POST /api/v1/auth/login-token | 200, success | 掃碼登錄 token 生成正常，bot_valid: true |
| GET /api/admin/users | 401 | 需管理員 JWT，接口存在於同一後端 |
| GET /api/v1/admin/users | 401 | 需登入，接口存在於同一後端 |

## 數據統一方式

1. **服務器部署**（如 https://tgw.usdt2026.cc）  
   - 一個後端 + 一個數據庫 (users 表)  
   - 管理後台與主站同域，無需設置 api_server  

2. **本地安裝版 / 開發版**  
   - 登錄頁展開「使用服務器登錄」→ 輸入服務器地址（如 https://tgw.usdt2026.cc）→ 保存  
   - 之後登錄、掃碼、會員數據均請求該服務器，與管理後台所見一致  

3. **管理後台**  
   - 同域打開：自動請求同後端  
   - 異域打開：設置 localStorage `api_server` 為同一後端地址  

## 日誌監控

程序已通過 `npm run start:dev` 啟動，日誌輸出在終端；可同時使用 `logs-dev-mode.txt`（若已配置 tee）查看。後端初始化完成後會輸出「後端初始化完成」或 8000 就緒訊息。
