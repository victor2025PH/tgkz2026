# 用 100+ 台红米 13C（SIM + 流量）组建 IP 池并对接服务器

## 一、结论：可以组建并对接

用 100 多台红米 13C，每台插 SIM、开流量，可以组成**移动 IP 池**，并和现有服务器/代理池系统对接。  
要点：手机在运营商侧**没有公网 IP**（在 NAT 后面），不能「从互联网直接连到手机」，需要采用**手机主动连服务器、流量经手机出口**的架构。

---

## 二、为什么不能「直接连手机」？

| 情况 | 说明 |
|------|------|
| 家庭宽带 / 机房 | 常有公网 IP，别人可以直接 `连接 IP:端口`。 |
| 手机 4G/5G | 运营商一般做 NAT，手机只有内网地址（如 10.x.x.x），外网无法主动连到手机。 |

所以：**不能**在每台手机上简单开一个 SOCKS5 端口，然后服务器去连「手机 IP:端口」—— 因为从公网连不到手机。

正确做法：**手机先连你们服务器**，服务器再通过这条连接把「要代理的请求」交给手机，用**手机的流量**去访问目标（如 Telegram），这样出口 IP 就是该手机的运营商 IP。

---

## 三、推荐架构：手机端 Agent + 服务器网关

```
[ 你们的业务服务器 ]
        |
        | 需要代理时：把请求交给「某台手机」
        v
[ 代理网关服务 ]  ← 维护 100+ 条「手机长连」
        |
        | 长连接（WebSocket/ TCP 隧道）
        v
[ 手机 1 ] [ 手机 2 ] ... [ 手机 N ]
   |            |              |
   v            v              v
 运营商IP1   运营商IP2    运营商IPN  →  访问 Telegram 等
```

- **手机端**：每台红米 13C 上装一个 **Agent 应用**，开机/联网后**主动连**你们服务器，保持长连接。
- **服务器端**：跑一个 **网关服务**，接受这 100+ 条连接，给每台手机一个逻辑 ID（如 `mobile_001`～`mobile_100`），并实现「把 HTTP/SOCKS 请求通过对应连接转发到手机，由手机用本机流量发起请求，再把结果回传」。
- **对接现有系统**：网关对外提供「一个代理接口」（例如 SOCKS5 或 HTTP 代理），每当你方系统「分配一个代理」给某个账号时，实际是分配「某台手机的连接」。业务服务器或 Telegram 客户端连这个网关的代理端口，网关把流量转到对应手机出口。

这样，**100 多台手机 = 100 多个不同的移动 IP**，可以全部纳入你们现有「代理池」的分配逻辑。

---

## 四、需要哪些资源

### 4.1 手机端（红米 13C）

| 项目 | 说明 |
|------|------|
| 设备 | 100+ 台红米 13C，已插 SIM、开通流量。 |
| 系统 | 建议统一版本（如同一 MIUI 版本），方便维护。 |
| 网络 | 只用移动数据（关 WiFi），避免 IP 混用；若需省电可后面再优化策略。 |
| 应用 | 每台装一个 **Agent**：负责连服务器、维持长连、接收「代理任务」并用本机流量执行。 |
| 供电与放置 | 长期运行需考虑供电、散热；可集中放架子上，SIM 卡管理好归属地/运营商。 |

### 4.2 服务器端

| 项目 | 说明 |
|------|------|
| 一台服务器 | 有公网 IP，可被 100+ 台手机同时连接（建议 4 核 8G 起，带宽视并发而定）。 |
| 网关程序 | 接受手机长连、维护「手机 ID ↔ 连接」映射、把代理请求转发到对应手机、把响应回传。 |
| 与现有系统对接 | 网关对外提供「多出口代理」：例如每个出口对应一台手机，你们现有「代理池」里每条记录指向网关的某个出口（或网关统一一个入口，按「分配结果」选出口）。 |

### 4.3 Agent 应用从哪里来

| 方式 | 说明 |
|------|------|
| 自研 Android App | 用 Kotlin/Java 写：建长连接（WebSocket 或 TCP）、收服务器下发的「代理请求」、用本机网络发请求、回传结果。工作量大但完全可控。 |
| 现成开源/方案 | 搜索「mobile proxy agent」「4G proxy android」「反向代理 手机」等，看是否有可改用的开源或现成方案。 |
| 简化版 | 先用「手机开热点 + 树莓派/旧手机跑代理」做少量验证；再决定是否做 100 台规模的 App。 |

---

## 五、和现有「代理池」如何对接

你们现有逻辑大致是：**为每个账号分配一个代理（host:port 或 socks5://...）**。

- **做法一（推荐）**：网关在服务器上开放**一个** SOCKS5/HTTP 代理端口，并支持**按用户名或路由区分出口**。例如：  
  - 用户名 `mobile_001` → 走 1 号手机  
  - 用户名 `mobile_002` → 走 2 号手机  
  这样你们代理池里可以写：  
  - `socks5://mobile_001:统一密码@网关IP:端口`  
  - `socks5://mobile_002:统一密码@网关IP:端口`  
  每条算「一个代理」，分配逻辑不用大改。

- **做法二**：网关为每台手机开**不同端口**，例如 10001～10100。代理池里每条是 `网关IP:10001`、`网关IP:10002`… 分配时选端口即可。

无论哪种，**对现有系统来说**，只是「代理列表」从原来的 Blurpath/自建 VPS 变成了「网关上的 100+ 个出口」，对接方式不变。

---

## 六、实施步骤建议

| 阶段 | 内容 |
|------|------|
| 1. 验证出口 | 用 1～2 台红米 13C，开浏览器或简单 App 访问 ip.sb，确认每台在移动数据下拿到的是**不同公网 IP**（同一运营商可能同 C 段，但尽量不同）。 |
| 2. 单机 Agent 验证 | 在一台手机上跑一个最简 Agent（能连上服务器、收到一条「访问某 URL」的指令并用本机流量访问、把结果回传）。确认服务器能通过这台手机拿到该手机的出口 IP。 |
| 3. 网关原型 | 在服务器上写/跑一个网关：支持多台手机同时连接，并能把「指定手机」的代理请求转发出去。 |
| 4. 对接现有池 | 在你们代理池里新增 100+ 条记录，指向网关的 100+ 个出口（不同用户名或不同端口）。 |
| 5. 批量部署 | 100+ 台红米统一装 Agent、配置服务器地址、统一开机联网，在网关注册为 mobile_001～mobile_N。 |
| 6. 运维 | 监控掉线、重启 Agent、换 SIM/流量卡、记录每台手机对应 IP 段便于排查。 |

---

## 七、注意事项

| 项目 | 说明 |
|------|------|
| 运营商与合规 | 大量手机、大流量、长期代理，需确认运营商套餐与 ToS；使用场景需符合当地法律。 |
| 电量与发热 | 长期插电运行，建议用省电模式、关屏、必要时拆壳散热，避免电池鼓包。 |
| SIM 与 IP 稳定性 | 运营商可能换 IP（重连、跨天等），可把「手机 ID」当作代理单位，而不是死绑某个 IP。 |
| 成本 | 100+ 张 SIM 月费 + 流量费 + 一台网关服务器；对比第三方移动代理是否更划算可自行算一笔账。 |

---

## 八、总结

| 问题 | 答案 |
|------|------|
| 100+ 台红米 13C + SIM + 流量能组建 IP 池吗？ | **能**，适合做移动 IP 池。 |
| 能对接现有服务器吗？ | **能**，通过「手机 Agent + 服务器网关」把 100+ 个手机出口变成 100+ 个代理，再录入现有代理池即可。 |
| 主要难点？ | 手机在 NAT 后，必须用「手机连服务器、服务器把流量转给手机」的方式；需要手机端 Agent 和服务器端网关。 |
| 下一步？ | 先 1～2 台手机验证出口 IP 和简单 Agent，再在服务器上做网关，最后批量部署并接入现有代理池。 |

如果你愿意，我可以按你们现有技术栈（例如服务器用 Python/Node、手机用 Kotlin）给一个**网关 + Agent 的简易协议与示例结构**（不含完整代码，只到「能照着实现」的程度），方便你落地。

