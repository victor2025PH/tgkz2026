# 智能引擎 / 知识大脑 / AI 中心 — 导航与结构优化方案

## 一、现状问题简述

- **重复暴露**：侧边栏「AI 智能」下既有「知识大脑」（含 总览 / 知识管理 / 知识缺口），又有「AI 中心」；进入页面后，「智能引擎設置」下再次出现「知识大脑」Tab，其下又有 总览 / 知识管理 / 知识缺口 子 Tab，形成**双重导航**。
- **层级混乱**：侧边栏中「知识大脑」与「AI 中心」为同级；而页面内容实为同一套「智能引擎設置」，只是 Tab 不同。用户易误解为两个独立模块，且「AI 中心」在内容区没有对应的一级 Tab，仅通过默认打开「引擎概覽」间接体现。
- **路由与概念不一致**：`/ai-engine`、`/ai-engine/overview`、`/ai-engine/knowledge`、`/ai-engine/gaps` 均加载同一视图组件，仅通过 `enginePanel` 区分；侧边「AI 中心」与「知识大脑」都指向同一路由体系，概念边界不清晰。

---

## 二、开发工程师视角

### 2.1 UI/UX 优化

| 方向 | 建议 | 说明 |
|------|------|------|
| **单一信息源** | 侧边栏只保留一层「入口」，内容区用 Tab 承载全部子功能 | 避免「侧栏子项」与「内容区子 Tab」一一重复；侧栏点「智能引擎」进入后，所有子功能（引擎概覽、模型配置、人格風格、知识大脑、使用統計）仅在页面内 Tab 切换。 |
| **命名与层级统一** | 侧栏与路由统一使用「智能引擎」作为总称；「AI 中心」改为别名或弃用，避免与「知识大脑」并列 | 路由保持 `/ai-engine`，侧栏分组名可仍为「AI 智能」，其下仅一个可点击项：「智能引擎」（或「AI 中心」二选一），点击后进入智能引擎頁，再通过 Tab 选「知识大脑」等。 |
| **知识大脑子项仅保留在内容区** | 总览 / 知识管理 / 知识缺口 仅作为「知识大脑」Tab 下的子 Tab，不再在侧栏展开 | 侧栏不再出现「知识大脑」及其子项，只保留「智能引擎」一个入口；进入后选「知识大脑」Tab，再在页面内选 总览 / 知识管理 / 知识缺口，保证层级唯一。 |
| **面包屑与高亮** | 面包屑与侧栏高亮仅依赖路由：`/ai-engine`、`/ai-engine/overview`、`/ai-engine/knowledge`、`/ai-engine/gaps` | 高亮逻辑：在 `/ai-engine/*` 下统一高亮侧栏「智能引擎」；子 Tab 状态由 URL 或 query 决定，便于深链与刷新一致。 |

### 2.2 功能与路由优化

| 方向 | 建议 | 说明 |
|------|------|------|
| **路由结构** | 保持现有 `/ai-engine`、`/ai-engine/overview`、`/ai-engine/knowledge`、`/ai-engine/gaps`，明确为「同一视图 + 不同 Tab」 | 可选：用 query 统一为 `/ai-engine?tab=quick|models|persona|knowledge|stats` 与 `&sub=overview|manage|gaps`，减少路由条数，但需权衡可读性与分享链接。 |
| **视图与 Tab 同步** | 路由与 Tab 双向同步：路由变化更新 Tab，Tab 切换更新路由（含 replaceState） | 避免「侧栏点总览 → URL 变但 Tab 未切」或「只切 Tab 不更新 URL」导致刷新后状态丢失。 |
| **VIEW_ROUTE_MAP 与侧栏** | 侧栏只映射一个 view（如 `ai-engine`），对应 `/ai-engine`；子页 `overview/knowledge/gaps` 仅用于 Tab 初始状态与深链 | 移除侧栏对 `knowledge-brain`、`knowledge-manage`、`knowledge-gaps` 的独立映射，避免两套入口。 |
| **权限与功能开关** | 若未来「知识大脑」需独立权限，可在路由或 Tab 级做 `canActivate` 或显隐控制 | 当前可仍与智能引擎共用权限，结构清晰后再按需拆分。 |

### 2.3 数据库与后端

| 方向 | 建议 | 说明 |
|------|------|------|
| **概念与表结构** | 保持「知识库 / 知识条目 / 知识缺口」等现有领域模型；不在库中区分「AI 中心」与「知识大脑」 | 二者为前端导航与产品命名，后端仅按 tenant、knowledge_base、gap 等维度建模即可。 |
| **统计与配置** | 引擎概覽、知识大脑总览等所需统计（如知识条数、缺口数、对话数）由统一 API 提供，按模块复用 | 避免因前端多入口而重复建表或重复接口；可保留「智能引擎配置」与「知识库 / RAG」等现有 API 边界。 |
| **审计与埋点** | 埋点区分「入口」：侧栏 vs 内容区 Tab；统一记录为「智能引擎」模块下的子动作（如 knowledge_overview、knowledge_manage、knowledge_gaps） | 便于分析用户从哪一入口进入、在 Tab 间如何跳转，为后续简化导航提供数据。 |

---

## 三、市场经理视角

### 3.1 用户心智与话术

| 问题 | 建议 | 说明 |
|------|------|------|
| **两个名字易混淆** | 对外统一主推「智能引擎」；「AI 中心」仅作历史或口语化称呼，文案与帮助中减少并列出现 | 避免「先进 AI 中心还是知识大脑」的困惑，形成「一个智能引擎，里面包含配置、知识、统计」的清晰心智。 |
| **知识大脑定位** | 明确「知识大脑」是智能引擎下的**子模块**，负责知识库与缺口，而非与「引擎」平级 | 宣传与教程中：先介绍「智能引擎」（配置 AI、人格、知识、统计），再说明「知识大脑」专注知识与缺口，层级清晰。 |
| **总览 / 知识管理 / 知识缺口** | 在帮助与引导中只在一处描述（页面内 Tab），不重复写「侧栏也有」 | 减少文档与培训中的重复，降低新用户学习成本。 |

### 3.2 转化与留存

| 方向 | 建议 | 说明 |
|------|------|------|
| **首访路径** | 新用户引导或营销落地页，优先引导至「智能引擎」总览（引擎概覽），再按需进入「知识大脑」 | 一条主路径即可，避免多入口分散转化。 |
| **功能曝光** | 在「智能引擎」首页（引擎概覽）用卡片或短文案提示「知识大脑」「模型配置」等子能力，点击即切 Tab | 既保留发现性，又避免侧栏冗长与重复。 |
| **数据与卖点** | 知识缺口数、知识库健康度等指标可在仪表板或智能引擎总览中露出，无需依赖「知识大脑」单独入口 | 便于将「知识大脑」作为能力卖点而非独立菜单项。 |

### 3.3 对数据库与功能的要求

- **报表与看板**：若需按「知识大脑」做转化或使用报表，建议以「模块/功能」维度（如 `module=knowledge_brain`）打点，而非依赖多个菜单入口，避免重复统计。
- **套餐与权益**：若未来对「知识大脑」单独计费或限权，权限与用量仍建议与现有知识库/RAG 数据一致，仅在前端与套餐名称上区分，数据库不因导航调整而拆表。

---

## 四、用户视角

### 4.1 可发现性与路径

| 问题 | 建议 | 说明 |
|------|------|------|
| **不知道点哪个** | 侧栏「AI 智能」下只保留一个入口（如「智能引擎」），点进去后再选「知识大脑」或其它 Tab | 用户只需记住「做 AI 相关设置就进智能引擎」，不再在「知识大脑」和「AI 中心」之间选择。 |
| **重复入口** | 总览 / 知识管理 / 知识缺口 只在「智能引擎 → 知识大脑」下的子 Tab 中出现一次 | 避免「侧栏点总览」和「页面里再点总览」的重复感，路径唯一。 |
| **深链与分享** | URL 直接对应到具体 Tab（如 `/ai-engine/gaps`），分享或收藏后打开即到该子页 | 当前路由已支持，需保证 Tab 与 URL 始终同步。 |

### 4.2 学习成本与一致性

| 方向 | 建议 | 说明 |
|------|------|------|
| **层级一致** | 其它模块若为「侧栏一项 → 页面内多 Tab」，则智能引擎也采用同一模式 | 用户形成「侧栏进模块，内容区切 Tab」的统一习惯。 |
| **命名一致** | 侧栏、页面标题、面包屑统一使用同一套名称（如智能引擎、知识大脑、总览/知识管理/知识缺口） | 避免中英文混用或「概覽 vs 总览」等细微差异造成困惑。 |
| **反馈一致** | 在「知识大脑」任一子 Tab 操作（如刷新、深度清理）后，成功/失败提示与当前 Tab 一致，不跳到其它 Tab | 功能与数据层无需大改，前端保证操作结果与当前上下文一致即可。 |

### 4.3 对功能与数据的期望

- **性能**：无论从侧栏还是从 Tab 进入，同一子页（如知识缺口）只加载一次数据，不因入口不同而重复请求。
- **状态**：在知识管理/知识缺口中的筛选、排序、分页等，尽量与 URL 或本地状态绑定，刷新或重新进入时恢复，数据层无需为「多入口」做额外设计。

---

## 五、推荐落地方案（汇总）

1. **侧栏**  
   - 「AI 智能」下只保留一个入口：**「智能引擎」**（或保留「AI 中心」命名但仅此一项）。  
   - 移除侧栏的「知识大脑」及其子项（总览、知识管理、知识缺口）；上述功能仅通过「智能引擎」进入后，在「知识大脑」Tab 下的子 Tab 访问。

2. **内容区**  
   - 保持「智能引擎設置」及现有一级 Tab：引擎概覽、模型配置、人格風格、**知识大脑**、使用統計。  
   - 「知识大脑」下保留子 Tab：总览、知识管理、知识缺口；**不再在侧栏重复**。

3. **路由与高亮**  
   - 保留 `/ai-engine`、`/ai-engine/overview`、`/ai-engine/knowledge`、`/ai-engine/gaps`；侧栏在任意 `/ai-engine/*` 下高亮「智能引擎」；Tab 与 URL 双向同步。

4. **数据库与 API**  
   - 不因导航调整新增表或接口；继续以「智能引擎配置」「知识库 / RAG / 知识缺口」等现有模型与 API 为准；埋点区分入口与 Tab 便于后续分析。

5. **文案与对外**  
   - 统一主推「智能引擎」，将「知识大脑」明确为其中子模块；市场与帮助文档按「单一入口 + 页面内 Tab」描述，避免多入口话术。

按上述方案实施后，可消除「知识大脑」与「AI 中心」以及总览/知识管理/知识缺口的重复与嵌套混乱，同时保持现有路由与数据模型，便于开发、运营与用户理解一致。
