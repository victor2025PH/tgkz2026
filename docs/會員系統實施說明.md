# TG-Matrix æœƒå“¡ç³»çµ±å¯¦æ–½èªªæ˜

> **ç‰ˆæœ¬**: 1.0.3  
> **æ›´æ–°æ—¥æœŸ**: 2026å¹´1æœˆ11æ—¥

---

## ğŸ“Š æœƒå“¡ç­‰ç´šé«”ç³»

### ã€Œæ˜Ÿéš›è¨ˆåŠƒã€å››ç´šæœƒå“¡åˆ¶

| ç­‰ç´š | åç¨± | åœ–æ¨™ | æœˆè²» | å¹´è²» |
|------|------|------|------|------|
| Free | æ–°æ˜Ÿ | ğŸŒŸ | å…è²» | - |
| VIP | éŠ€æ˜Ÿ | â­ | Â¥99 | Â¥699 |
| SVIP | é‡‘æ˜Ÿ | ğŸŒ™ | Â¥299 | Â¥1999 |
| MVP | æ˜Ÿç‹ | ğŸ‘‘ | Â¥999 | Â¥6999 |

---

## ğŸ¯ é…é¡é™åˆ¶

| åŠŸèƒ½ | æ–°æ˜Ÿ | éŠ€æ˜Ÿ VIP | é‡‘æ˜Ÿ SVIP | æ˜Ÿç‹ MVP |
|------|------|----------|-----------|----------|
| è³¬æˆ¶æ•¸é‡ | 2 | 5 | 20 | 100 |
| æ¯æ—¥æ¶ˆæ¯ | 20 | 200 | 1000 | ç„¡é™ |
| æ¯æ—¥ AI | 10 | 100 | ç„¡é™ | ç„¡é™ |
| ç›£æ§ç¾¤çµ„ | 3 | 20 | 100 | ç„¡é™ |
| é—œéµè©é›† | 1 | 5 | ç„¡é™ | ç„¡é™ |
| æ•¸æ“šä¿å­˜ | 7å¤© | 30å¤© | 90å¤© | 365å¤© |

---

## âœ¨ åŠŸèƒ½æ¬Šé™

| åŠŸèƒ½ | æ–°æ˜Ÿ | VIP | SVIP | MVP |
|------|------|-----|------|-----|
| è³¬æˆ¶ç®¡ç† | âœ… | âœ… | âœ… | âœ… |
| é—œéµè©ç›£æ§ | âœ… | âœ… | âœ… | âœ… |
| æ½›åœ¨å®¢æˆ¶æ•ç² | âœ… | âœ… | âœ… | âœ… |
| AI è‡ªå‹•å›å¾© | âœ… (é™é¡) | âœ… | âœ… | âœ… |
| å»£å‘Šç™¼é€ | âŒ | âœ… | âœ… | âœ… |
| æ•¸æ“šå°å‡º | âŒ | âœ… | âœ… | âœ… |
| æ‰¹é‡æ“ä½œ | âŒ | âœ… | âœ… | âœ… |
| å¤šè§’è‰²å”ä½œ | âŒ | âŒ | âœ… | âœ… |
| AI éŠ·å”®æ¼æ–— | âŒ | âŒ | âœ… | âœ… |
| é«˜ç´šæ•¸æ“šåˆ†æ | âŒ | âŒ | âœ… | âœ… |
| æ™ºèƒ½é˜²å° | âŒ | âŒ | âœ… | âœ… |
| API æ¥å£ | âŒ | âŒ | âŒ | âœ… |
| åœ˜éšŠç®¡ç† | âŒ | âŒ | âŒ | âœ… |
| è‡ªå®šç¾©å“ç‰Œ | âŒ | âŒ | âŒ | âœ… |
| å„ªå…ˆå®¢æœ | âŒ | âŒ | âœ… | âœ… |

---

## ğŸ“ å¯¦ç¾æ–‡ä»¶

### å‰ç«¯

| æ–‡ä»¶ | èªªæ˜ |
|------|------|
| `src/membership.service.ts` | æœƒå“¡æœå‹™æ ¸å¿ƒ |
| `src/membership-ui.component.ts` | æœƒå“¡ UI çµ„ä»¶ |

### å¾Œç«¯

| æ–‡ä»¶ | èªªæ˜ |
|------|------|
| `backend/membership.py` | æœƒå“¡é©—è­‰æ¨¡å¡Š |
| `backend/license_generator.py` | å¡å¯†ç”Ÿæˆå·¥å…· |

---

## ğŸ”‘ å¡å¯†æ ¼å¼

```
TGM-[é¡å‹]-[XXXX]-[XXXX]-[XXXX]

é¡å‹ä»£ç¢¼ï¼š
  W = å‘¨å¡ (7å¤© VIP)
  M = æœˆå¡ (30å¤© VIP)
  Q = å­£å¡ (90å¤© VIP)
  Y = å¹´å¡ (365å¤© VIP)
  V = VIP æœˆå¡
  S = SVIP æœˆå¡
  P = MVP æœˆå¡

ç¤ºä¾‹ï¼š
  TGM-W-A1B2-C3D4-E5F6  (å‘¨å¡)
  TGM-S-X1Y2-Z3A4-B5C6  (SVIPæœˆå¡)
```

---

## ğŸ› ï¸ å¡å¯†ç”Ÿæˆå·¥å…·

### å‘½ä»¤è¡Œä½¿ç”¨

```bash
# é€²å…¥ backend ç›®éŒ„
cd backend

# ç”Ÿæˆ 10 å€‹å‘¨å¡
python license_generator.py generate W -n 10 --batch "é¦–ç™¼å„ªæƒ "

# ç”Ÿæˆ 5 å€‹ SVIP æœˆå¡
python license_generator.py generate S -n 5

# æŸ¥çœ‹çµ±è¨ˆ
python license_generator.py stats

# é©—è­‰å¡å¯†
python license_generator.py validate TGM-W-XXXX-XXXX-XXXX

# å°å‡ºæœªä½¿ç”¨çš„å¡å¯†åˆ° CSV
python license_generator.py export -o unused_licenses.csv --status unused

# åˆ—å‡ºæœªä½¿ç”¨çš„å¡å¯†
python license_generator.py list -t W
```

### Python èª¿ç”¨

```python
from license_generator import LicenseGenerator

generator = LicenseGenerator()

# ç”Ÿæˆå¡å¯†
keys = generator.generate('S', count=10, batch_name='é¦–ç™¼å„ªæƒ ')

# é©—è­‰å¡å¯†
valid, message, info = generator.validate('TGM-S-XXXX-XXXX-XXXX')

# ä½¿ç”¨å¡å¯†
success, message, info = generator.use('TGM-S-XXXX-XXXX-XXXX', machine_id='xxx')

# ç²å–çµ±è¨ˆ
stats = generator.get_stats()
```

---

## ğŸ¨ å‰ç«¯çµ„ä»¶

### MembershipBadgeComponent

æœƒå“¡ç‹€æ…‹å¾½ç« ï¼Œé¡¯ç¤ºåœ¨ç•Œé¢å³ä¸Šè§’ã€‚

```html
<app-membership-badge></app-membership-badge>
```

### MembershipDialogComponent

æœƒå“¡æ¿€æ´»å°è©±æ¡†ï¼ŒåŒ…å«ï¼š
- æœƒå“¡æ–¹æ¡ˆå°æ¯”
- å¡å¯†æ¿€æ´»
- é‚€è«‹çå‹µ

```html
<app-membership-dialog></app-membership-dialog>
```

### UpgradePromptComponent

å‡ç´šæç¤ºçµ„ä»¶ï¼Œç•¶ç”¨æˆ¶è§¸åŠé…é¡é™åˆ¶æ™‚é¡¯ç¤ºã€‚

```html
<app-upgrade-prompt></app-upgrade-prompt>
```

---

## ğŸ”Œ é›†æˆæŒ‡å—

### 1. åœ¨ app.component.ts ä¸­å°å…¥

```typescript
import { MembershipService } from './membership.service';
import { MembershipBadgeComponent, MembershipDialogComponent, UpgradePromptComponent } from './membership-ui.component';

@Component({
  imports: [
    // ... å…¶ä»–å°å…¥
    MembershipBadgeComponent,
    MembershipDialogComponent,
    UpgradePromptComponent,
  ],
})
export class AppComponent {
  membershipService = inject(MembershipService);
  
  // åœ¨æ·»åŠ è³¬æˆ¶å‰æª¢æŸ¥é…é¡
  async addAccount() {
    const check = this.membershipService.canAddAccount(this.accounts.length);
    if (!check.allowed) {
      this.toastService.warning(check.message);
      return;
    }
    // ç¹¼çºŒæ·»åŠ ...
  }
  
  // åœ¨ç™¼é€æ¶ˆæ¯å‰æª¢æŸ¥é…é¡
  async sendMessage() {
    const check = this.membershipService.canSendMessage();
    if (!check.allowed) {
      this.toastService.warning(check.message);
      return;
    }
    this.membershipService.recordMessageSent();
    // ç¹¼çºŒç™¼é€...
  }
  
  // æª¢æŸ¥åŠŸèƒ½æ˜¯å¦å¯ç”¨
  canUseMultiRole(): boolean {
    return this.membershipService.hasFeature('multiRole');
  }
}
```

### 2. åœ¨æ¨¡æ¿ä¸­æ·»åŠ çµ„ä»¶

```html
<!-- é ‚éƒ¨å°èˆªæ¬„ -->
<nav class="...">
  <!-- æœƒå“¡å¾½ç«  -->
  <app-membership-badge></app-membership-badge>
</nav>

<!-- æœƒå“¡å°è©±æ¡†ï¼ˆå…¨å±€ï¼‰ -->
<app-membership-dialog></app-membership-dialog>

<!-- å‡ç´šæç¤ºï¼ˆå…¨å±€ï¼‰ -->
<app-upgrade-prompt #upgradePrompt></app-upgrade-prompt>
```

### 3. åœ¨å¾Œç«¯æª¢æŸ¥æ¬Šé™

```python
from membership import get_membership_manager, check_feature, check_quota

# ç²å–ç®¡ç†å™¨
manager = get_membership_manager()

# æª¢æŸ¥åŠŸèƒ½
if not manager.has_feature('multi_role'):
    return {"error": "æ­¤åŠŸèƒ½éœ€è¦ SVIP æˆ–ä»¥ä¸Šæœƒå“¡"}

# æª¢æŸ¥é…é¡
allowed, message = manager.can_add_account(current_count)
if not allowed:
    return {"error": message}

# è¨˜éŒ„ä½¿ç”¨é‡
manager.record_message(1)
manager.record_ai_call(1)
manager.record_lead(1)
```

---

## ğŸ é‚€è«‹çå‹µæ©Ÿåˆ¶

### çå‹µè¦å‰‡

| è¡Œç‚º | é‚€è«‹è€…çå‹µ | è¢«é‚€è«‹è€…çå‹µ |
|------|-----------|-------------|
| è¢«é‚€è«‹è€…è¨»å†Š | +3å¤© VIP | +7å¤© VIP |
| è¢«é‚€è«‹è€…ä»˜è²» | +20% è¿”ç¾ | - |
| ç´¯è¨ˆé‚€è«‹ 10 äºº | +7å¤© VIP | - |

### ä½¿ç”¨æµç¨‹

1. ç”¨æˆ¶åœ¨ã€Œé‚€è«‹çå‹µã€æ¨™ç±¤æŸ¥çœ‹è‡ªå·±çš„é‚€è«‹ç¢¼
2. åˆ†äº«é‚€è«‹ç¢¼çµ¦å¥½å‹
3. å¥½å‹åœ¨ã€Œä½¿ç”¨é‚€è«‹ç¢¼ã€è¼¸å…¥é‚€è«‹ç¢¼
4. é›™æ–¹ç²å¾—çå‹µ

---

## ğŸ” å®‰å…¨è€ƒæ…®

### æœ¬åœ°å­˜å„²

- æœƒå“¡ä¿¡æ¯å­˜å„²åœ¨ `localStorage`
- åŠ å¯†æ•æ„Ÿä¿¡æ¯ï¼ˆå¡å¯†ã€æ©Ÿå™¨ç¢¼ï¼‰
- å®šæœŸåŒæ­¥åˆ°æœå‹™å™¨ï¼ˆç”Ÿç”¢ç’°å¢ƒï¼‰

### æœå‹™å™¨é©—è­‰ï¼ˆç”Ÿç”¢ç’°å¢ƒï¼‰

```
ç”¨æˆ¶æ¿€æ´» â†’ å‰ç«¯æäº¤å¡å¯† â†’ å¾Œç«¯é©—è­‰ â†’ æœå‹™å™¨APIé©—è­‰ â†’ è¿”å›çµæœ
                                â†“
                          æœ¬åœ°ç·©å­˜ + å®šæœŸå¿ƒè·³
```

### é˜²ç ´è§£æªæ–½

1. ä»£ç¢¼æ··æ·†
2. å¤šé»é©—è­‰
3. æœå‹™å™¨é»‘åå–®
4. æ©Ÿå™¨ç¢¼ç¶å®š

---

## ğŸ“Š æ•¸æ“šçµ±è¨ˆ

### æœƒå“¡åˆ†æ

- å„ç­‰ç´šç”¨æˆ¶æ•¸
- è½‰åŒ–ç‡ï¼ˆå…è²» â†’ ä»˜è²»ï¼‰
- çºŒè²»ç‡
- ARPUï¼ˆå¹³å‡æ¯ç”¨æˆ¶æ”¶å…¥ï¼‰

### ä½¿ç”¨é‡åˆ†æ

- æ¯æ—¥æ´»èºç”¨æˆ¶
- åŠŸèƒ½ä½¿ç”¨é »ç‡
- é…é¡è§¸åŠç‡

---

*æ–‡æª”æ›´æ–°æ™‚é–“: 2026-01-11*
