# 自建静态 IP 池方案说明

当第三方代理商（如 Blurpath）无法提供 API 对接资料时，可以考虑**自建静态 IP 池**。下面说明可行方式、所需资源和注意事项。

---

## 一、什么是「静态 IP 池」

在你这边的业务里，静态 IP 池 = **一批固定不变的出口 IP**，每个 IP 上跑代理服务（如 SOCKS5/HTTP），供 Telegram 等账号单独绑定使用，避免多账号同 IP 触发风控。

- **静态**：IP 不变，不轮换。
- **池**：多个 IP，统一管理、分配、回收。

---

## 二、自建是否可行？可以，但要看资源

| 维度 | 说明 |
|------|------|
| **技术** | 可行。用 VPS/独立服务器 + 代理软件即可搭建。 |
| **成本** | 比直接用 Blurpath 等按量付费贵还是便宜，取决于规模与选型。 |
| **维护** | 需要自己维护服务器、代理进程、监控和分配逻辑。 |
| **合规** | 需遵守机房/运营商、当地法律及使用场景规定。 |

结论：**可以自建**，适合在「对接不到供应商 API」或「对 IP 来源、稳定性有强需求」时考虑。

---

## 三、常见实现方式对比

| 方式 | 典型资源 | 优点 | 缺点 | 适用场景 |
|------|----------|------|------|----------|
| **1. 多台 VPS 各 1 个 IP** | 多家 VPS（Vultr、Linode、DigitalOcean、AWS 等） | 实现简单、IP 分散、易扩展 | 单机单 IP，成本随 IP 数线性涨 | 小规模（几十～一两百 IP） |
| **2. 单机多 IP（广播多 IP）** | 一台服务器 + 机房分配的一段 IP（如 /28、/29） | 一台机器管理多 IP，运维集中 | 需机房支持多 IP 广播，通常要独立服务器/托管 | 中规模、有固定预算 |
| **3. 住宅/家庭宽带 + 家庭网关** | 多条家庭宽带 + 树莓派/软路由/小型服务器 | 出口是住宅 IP，质量高 | 采购、部署、运维复杂，合规风险需单独评估 | 对「住宅静态 IP」有刚需 |
| **4. 4G/5G 物联网卡 + 模组/路由器** | 多张 SIM 卡 + 4G/5G 路由器或模组 | 移动网 IP，可做「准静态」长期使用 | 运营商可能换 IP、有流量与合规限制 | 实验或特定地区 |

你们当前若以「静态、稳定、可分配」为主，**优先考虑 1 或 2**；若必须住宅 IP，再评估 3/4。

---

## 四、自建所需资源清单

### 4.1 硬件/网络资源

| 资源 | 说明 | 示例 |
|------|------|------|
| **服务器或 VPS** | 每台至少 1 个公网 IP；若机房支持多 IP 则一台可挂多个 | 2 核 2G，5～20 美元/月/台 |
| **公网 IP** | 静态、独享，不被多人共用 | 每 IP 约 2～5 美元/月（视机房） |
| **带宽** | 按并发与流量估，Telegram 场景通常 1～5 Mbps/账号 足够 | 100 Mbps 共享或 按量 |

### 4.2 软件资源（均可自建/开源）

| 组件 | 作用 | 可选方案 |
|------|------|----------|
| **代理服务** | 在每台机器上提供 SOCKS5/HTTP 代理 | 3proxy、Dante、Squid、gost、microsocks |
| **认证** | 代理用户名/密码或 IP 白名单 | 3proxy/dante 自带或 Nginx 反代 + 鉴权 |
| **管理后台** | 录入 IP、分配/回收、状态检测 | 你们现有「代理池管理」扩展，或单独小系统 |
| **自动发现/注册** | 新机器上线自动把 IP 报给「池子」 | 脚本 + 你们现有 API 或数据库 |

### 4.3 人力与运维

- **搭建**：熟悉 Linux、会装 3proxy/Dante、会改防火墙与 systemd。
- **日常**：监控代理可用性、重启进程、替换故障 IP、扩容/缩容。
- **安全**：改默认端口、强密码、限访问 IP、定期更新系统。

---

## 五、最小可行方案（单机单 IP × N 台）

适合「先跑通、再扩展」：

1. **买 N 台 VPS**（如 5～10 台），每台 1 个独立公网 IP，不同地区更佳。
2. **每台安装代理**（以 3proxy 为例）：
   - 安装 3proxy，配置 SOCKS5 或 HTTP 代理，绑定 0.0.0.0:端口。
   - 设置用户名密码或只允许你们服务器 IP 访问。
3. **在你们现有系统里**：
   - 把「代理池」的数据源从「Blurpath API」改为「自建」：手动或通过脚本，把 `ip:port:user:pass` 或 `socks5://user:pass@ip:port` 录入现有代理池表（或等价结构）。
4. **分配逻辑不变**：你们已有「账号绑定一个代理」的逻辑，只需确保池子里是自建 IP 即可。

这样**不需要 Blurpath 提供任何对接资料**，只要你们后台支持「手动/批量导入代理」就能用。

---

## 六、和现有系统如何结合

你们已经有：

- 代理池管理（录入、分配、释放、状态）
- 账号与代理的绑定关系

自建 IP 池只需：

1. **把自建代理当作「静态代理」录入**  
   格式与现在一致：`socks5://user:pass@host:port` 或 `host:port`（若走白名单则可不带账密）。
2. **不再依赖 Blurpath API**  
   新代理来源 = 自建机器上的 3proxy/Dante，由你们脚本或后台录入。
3. **可选：简单「自动注册」**  
   每台 VPS 装一个 agent，启动时把本机 IP + 端口 + 凭证上报到你们 API，写入代理池，实现半自动化。

这样**对接的是你们自己的协议和数据库**，不依赖任何第三方 API 文档。

---

## 七、成本粗算（仅作参考）

| 规模 | 方式 | 月成本量级（美元） |
|------|------|--------------------|
| 10 个 IP | 10 台低价 VPS（如 3～5 美元/台） | 30～50 |
| 50 个 IP | 50 台 VPS 或 1 台服务器 + 机房多 IP 套餐 | 150～300 |
| 100+ 个 IP | 多台服务器 + 多 IP 或大量 VPS | 视机房报价 |

实际以各家 VPS/机房报价为准；住宅宽带或 4G 方案需单独询价和合规评估。

---

## 八、总结：能否自建、需要什么

| 问题 | 答案 |
|------|------|
| **可以自建吗？** | 可以，技术上完全可行。 |
| **需要哪些资源？** | 服务器/VPS、公网 IP、代理软件（如 3proxy）、现有代理池管理功能（或小改）。 |
| **客服不提供对接资料时怎么办？** | 不依赖 Blurpath API；用自建 IP + 现有「静态代理录入与分配」即可组成静态 IP 池。 |
| **建议** | 先用 5～10 台 VPS + 3proxy 做一个小自建池，把录入与分配流程跑通，再按需扩规模或考虑多 IP 机房方案。 |

如果你愿意，我可以按你们现有代码结构，写一个「自建代理批量录入」的接口或脚本示例（含 3proxy 最小配置示例），方便你直接落地。
