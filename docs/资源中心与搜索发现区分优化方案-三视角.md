# 资源中心与搜索发现区分优化方案（三视角）

## 一、需求摘要

1. **问题**：资源中心与搜索发现当前功能一致、界面几乎相同，仅通过「只显示已收藏」等微弱差异区分，导致用户混淆、资源中心缺乏独立价值。
2. **目标**：资源中心具备**独立功能**，与搜索发现在心智和动线上清晰区分；从开发工程师、市场经理、用户三个角度对 UI/UX、功能、数据库给出优化方案（本文仅方案，不涉及具体代码实现）。
3. **定位**：
   - **搜索发现**：以「发现」为主——搜、筛、试渠道，发现新群组/频道，并可将结果收藏。
   - **资源中心**：以「资产」为主——我的收藏库、分类/标签、批量操作、导出/联动（监控、营销等）。

---

## 二、现状简述

| 维度 | 当前实现 | 问题 |
|------|----------|------|
| **路由与组件** | `/resource-discovery` 与 `/search-discovery` 共用同一视图组件，加载同一 `SearchDiscoveryComponent` | 两页本质是同一页面，仅 `initialView` 与默认筛选不同 |
| **界面** | 两页均为：大搜索框 + 搜索渠道 + 结果列表 + 状态栏（结果/已收藏/操作） | 资源中心首屏仍是「搜索」，用户易认为重复入口 |
| **资源中心差异化** | 仅：标题/图标不同（📦 vs 🔍）、默认开启「只显示已收藏」 | 差异化不足；空状态时与搜索发现几乎一致，且无「我的资源库」的专属布局 |
| **数据** | 结果来自 sessionStorage + 后端；`is_saved` 标识收藏；操作历史有独立服务 | 收藏数据与「资源中心」未形成独立模型（如分类、标签、用途），不利于资源中心做资产管理 |
| **侧栏** | 「搜索发现」带 NEW 标签；「资源中心」紧随其后，两者并列 | 命名与入口接近，加重「两个一样的东西」的直觉 |

---

## 三、目标形态（概念）

### 3.1 搜索发现（保持「发现」心智）

- **主场景**：用户带着关键词/意图来「找」群组和频道。
- **首屏**：搜索框 + 搜索渠道（官方/中文/TGStat/本地索引）+ 推荐关键词/最近搜索。
- **结果区**：列表展示发现结果；支持筛选（类型、成员数、来源、加入状态）；支持单条/批量收藏、加入、加入并监控等。
- **弱化**：不强调「已收藏总数」为页面主焦点，可保留在状态栏或结果区副区。

### 3.2 资源中心（独立「资产」心智）

- **主场景**：用户来「管」已经收藏/已加入的群组与频道，而不是来搜新东西。
- **首屏**：以「我的资源」为主——收藏列表/卡片、分类或标签、统计（如按状态：已加入/监控中/待处理）。
- **能力**：对已有资源的筛选、排序、批量操作（加入、加监控、取消收藏、导出）；可选「从搜索发现添加」的次级入口（跳转或内嵌轻量搜索），而不是大搜索框占主屏。
- **联动**：与监控中心、发送控制台、成员提取等形成「从资源中心选资源 → 执行操作」的闭环。

### 3.3 两者关系（用户动线）

- **发现 → 收藏**：在「搜索发现」里搜索 → 收藏 → 资源自动进入「资源中心」。
- **管理 → 使用**：在「资源中心」里查看/筛选/批量操作 → 加入/加监控/提取成员等。
- **再发现**：资源中心提供「去搜索发现找更多」的入口，而不是在资源中心主区再做一个同等体量的搜索。

---

## 四、方案一：UI/UX 分离

### 4.1 搜索发现页

| 项目 | 建议 | 说明 |
|------|------|------|
| 主标题与图标 | 保持「搜索发现」+ 🔍 | 强化「发现」 |
| 首屏布局 | 搜索框 + 搜索渠道 + 推荐/最近搜索 占主视觉 | 不改变现有强搜索心智，可微调信息层级 |
| 状态栏 | 结果数、可选显示「本次/今日收藏数」 | 「已收藏」作为结果区辅助信息，不喧宾夺主 |
| 空状态 | 「输入关键词搜索 Telegram 群组和频道」+ 试试关键词 | 与现状一致，可保留 |
| 结果区 | 列表 + 筛选 + 批量操作（加入、收藏、加监控） | 保持；可增加「收藏后到资源中心查看」的轻提示 |

### 4.2 资源中心页（独立布局）

| 项目 | 建议 | 说明 |
| 主标题与图标 | 「资源中心」+ 📦（或类似「资源库」图标） | 与搜索发现视觉区分 |
| 首屏布局 | **以「我的资源」列表/看板为主**，而非大搜索框 | 首屏即见收藏/已加入资源，无收藏时为空状态 + CTA「去搜索发现」 |
| 顶部统计 | 已收藏总数、按状态分布（如：已加入 / 监控中 / 待处理）、今日操作数 | 与当前「0 结果、0 已收藏、0 操作」区分；资源中心强调「存量」与「操作」 |
| 搜索/发现入口 | 次级入口：如顶栏「添加资源」→ 跳转搜索发现，或内嵌紧凑型搜索（不占主屏） | 需要新资源时再进入发现流程，避免两页同质 |
| 列表能力 | 筛选（状态、来源、收藏时间）、排序（成员数、收藏时间）、批量操作 | 资源中心专属：取消收藏、批量加入、批量加监控、导出列表等 |
| 空状态 | 「还没有收藏资源」+ 引导「去搜索发现添加」按钮 | 明确动线：先发现、后管理 |

### 4.3 侧栏与导航

| 项目 | 建议 | 说明 |
| 顺序与分组 | 可将「搜索发现」与「资源中心」归为同一组（如「发现与资源」），或保持当前顺序但强化文案与图标差异 | 减少「两个一样」的错觉 |
| 文案/副标题 | 搜索发现：副标题或 tooltip「发现群组与频道」；资源中心：「我的收藏与资源管理」 | 帮助用户建立正确心智 |
| NEW 标签 | 若搜索发现为新产品，可保留；资源中心优化后也可考虑短期「优化」角标，便于老用户注意变化 | 按运营需要 |

---

## 五、方案二：功能分离

### 5.1 搜索发现（功能边界）

| 功能 | 归属 | 说明 |
|------|------|------|
| 关键词搜索、多渠道搜索（官方/中文/TGStat/本地） | 搜索发现 | 核心能力，保留并优化 |
| 结果列表、筛选、排序 | 搜索发现 | 针对「本次/当前发现结果」 |
| 单条/批量：收藏、加入、加入并监控、成员提取 | 搜索发现 | 操作结果可写回「资源中心」数据 |
| 搜索历史、推荐关键词、sessionStorage 结果恢复 | 搜索发现 | 发现流程内闭环 |
| 操作历史（今日加入/监控/提取成功失败） | 可共用 | 两页均可展示，或仅在资源中心强调「对已收藏资源的操作」 |

### 5.2 资源中心（独立功能）

| 功能 | 归属 | 说明 |
| 收藏列表的加载与展示 | 资源中心 | 数据来源：用户维度的「已收藏」资源（含状态：已加入/监控中等） |
| 按状态/来源/时间筛选与排序 | 资源中心 | 针对「我的资源库」 |
| 批量：取消收藏、加入、加监控、导出（如 CSV/Excel） | 资源中心 | 资产管理动作 |
| 单条：取消收藏、加入、加监控、跳转监控/发送控制台 | 资源中心 | 与业务线联动 |
| 「添加资源」入口 | 资源中心 | 跳转搜索发现或打开轻量搜索，不重复实现完整搜索能力 |
| 可选：标签/分组（如「待跟进」「高价值」） | 资源中心 | 后续扩展，便于资产分层 |

### 5.3 共用与数据流

| 项目 | 建议 | 说明 |
| 收藏状态（is_saved） | 两页共用同一数据源 | 在搜索发现收藏 → 资源中心立即可见 |
| 加入/监控状态 | 与监控中心等后端一致 | 资源中心展示最新状态，避免歧义 |
| 组件复用 | 结果卡片、详情弹窗、批量选择条等可抽成共用组件 | 搜索发现与资源中心分别组装布局与数据源，不共用「整页」 |

---

## 六、方案三：数据库与后端

### 6.1 资源中心所需数据

| 数据 | 用途 | 说明 |
|------|------|------|
| 用户维度「已收藏」资源列表 | 资源中心主列表 | 需按用户/租户隔离；含 telegram_id、标题、状态、来源、收藏时间等 |
| 资源状态（discovered/joined/monitoring/paused 等） | 筛选与展示 | 可与监控/账号等模块同步，避免多源真相 |
| 操作历史（加入、加监控、提取等） | 资源中心「今日操作」或操作记录 | 可按资源/用户维度查询，便于审计与复盘 |

### 6.2 表/模型建议（概念层）

| 方向 | 建议 | 说明 |
| 收藏关系表 | 用户/租户 + 资源标识（telegram_id 或统一 resource_id）+ 收藏时间、可选标签 | 与「发现结果」解耦，资源中心只读此表+资源主数据 |
| 资源主数据 | 群组/频道基础信息（id、title、username、member_count、invite_link 等） | 发现结果与收藏共用，避免重复存储 |
| 操作记录 | 已有 OperationHistory 可扩展或复用 | 按类型（join/monitor/extract）、资源、用户、时间查询 |
| 索引 | 收藏表按用户+收藏时间、状态；资源表按 telegram_id/username | 资源中心列表与筛选的查询性能 |

### 6.3 接口与同步

| 方向 | 建议 | 说明 |
| 资源中心列表 API | 按用户/租户返回已收藏资源，支持状态/来源/时间筛选与分页 | 与「搜索发现」的搜索 API 分离 |
| 收藏/取消收藏 API | 写收藏关系表，并更新前端 is_saved 与资源中心列表 | 两页共用同一接口，保证一致 |
| 状态同步 | 加入/监控状态由监控或账号模块维护，资源中心只读 | 避免多处写状态导致不一致 |

---

## 七、开发工程师视角

### 7.1 UI/UX 优化

| 方向 | 建议 | 说明 |
|------|------|------|
| 资源中心独立视图 | 资源中心使用独立路由与独立页面布局，不再与搜索发现共用同一套首屏 | 首屏以「我的资源」列表为主，搜索为次级入口 |
| 组件拆分 | 将「结果卡片」「详情弹窗」「批量操作条」「筛选栏」等抽成共用组件；搜索发现页与资源中心页分别组合 | 减少重复代码，便于两套布局独立演进 |
| 状态栏语义 | 搜索发现：强调「结果数」；资源中心：强调「已收藏数」「按状态统计」「操作数」 | 文案与数据与各自场景一致 |
| 空状态与引导 | 资源中心空状态明确引导「去搜索发现添加」；搜索发现可在收藏后轻提示「已加入资源中心」 | 形成清晰动线，减少迷惑 |
| 响应式与无障碍 | 两页均支持键盘导航、焦点管理、移动端适配 | 与现有规范一致 |

### 7.2 功能优化

| 方向 | 建议 | 说明 |
| 数据源分离 | 搜索发现：搜索 API + sessionStorage 缓存；资源中心：收藏列表 API + 可选本地缓存 | 两页拉取的数据接口与用途清晰分离 |
| 收藏与列表同步 | 收藏/取消收藏后，资源中心列表接口或本地状态即时更新 | 避免「在搜索发现收藏了，资源中心看不到」 |
| 深链与路由 | 支持从监控/发送控制台等跳转到资源中心并带筛选（如「仅监控中」） | 便于从业务场景回到资源管理 |
| 操作历史 | 若两页都展示操作历史，可共用同一服务与组件，按需过滤「本次搜索」与「我的资源」 | 避免逻辑重复 |

### 7.3 数据库与后端

| 方向 | 建议 | 说明 |
| 收藏关系持久化 | 用户维度收藏表或等效模型，与资源主数据关联 | 资源中心列表、已收藏数均基于此 |
| 列表 API 设计 | 资源中心专用：filter（状态/来源）、sort、分页；与搜索 API 分离 | 便于后续加标签、分组等扩展 |
| 审计与埋点 | 两页访问、搜索次数、收藏/取消收藏、资源中心批量操作 | 用于分析使用率与优化动线 |

---

## 八、市场经理视角

### 8.1 用户心智与话术

| 问题 | 建议 | 说明 |
|------|------|------|
| 「两个入口一样」 | 对外统一话术：搜索发现 = 「找新群组新频道」，资源中心 = 「管理我已收藏的群组与频道」 | 宣传与帮助文档、新手引导中明确区分 |
| 资源中心存在感弱 | 强调资源中心 = 「我的资源库」「营销资源资产管理」 | 可与「监控」「发送」「成员提取」等组合成「从发现到使用」的故事线 |
| 新用户不知道先点哪 | 引导路径：先「搜索发现」发现并收藏 → 再「资源中心」管理与使用 | 在引导或空状态中体现 |

### 8.2 转化与留存

| 方向 | 建议 | 说明 |
| 收藏动线 | 在搜索发现中强化「收藏」动作的价值（如「收藏后可在资源中心统一管理」） | 提高收藏率，进而提高资源中心使用率 |
| 资源中心价值 | 在资源中心突出「批量加入」「批量加监控」「导出」等效率能力 | 让用户形成「管资源来这里」的习惯 |
| 跨功能联动 | 在监控中心、发送控制台等处提供「从资源中心选择」的入口 | 提高资源中心曝光与使用频次 |

### 8.3 数据与迭代

| 方向 | 建议 | 说明 |
| 埋点 | 两页 PV/UV、搜索发现：搜索次数与收藏次数；资源中心：列表打开、筛选使用、批量操作次数 | 评估分离是否提升两端各自的使用深度 |
| 反馈 | 在资源中心或设置中收集「资源中心 vs 搜索发现」是否还混淆的反馈 | 迭代文案与布局 |

---

## 九、用户视角

### 9.1 UI/UX 体验

| 需求 | 建议 | 说明 |
| 我想找新群组 | 进「搜索发现」，输入关键词、选渠道、看结果、收藏 | 不改变现有习惯，仅强化这是「发现」的专属页面 |
| 我想管理已收藏的 | 进「资源中心」，直接看到收藏列表，按状态筛选/批量操作 | 首屏不再是搜索框，而是「我的资源」 |
| 我收藏了但不知道在哪看 | 资源中心首屏即我的收藏；空状态时提示「去搜索发现添加」 | 动线清晰，减少迷失 |
| 我想把资源导出或批量加监控 | 在资源中心筛选后使用批量操作；可选导出 | 资源中心成为「操作我的资源」的主场 |

### 9.2 功能预期

| 需求 | 建议 | 说明 |
| 收藏一次、两处一致 | 在搜索发现收藏后，资源中心立即可见；取消收藏同步 | 数据一致，用户无感 |
| 少点几次就能管理 | 资源中心不依赖「先搜再筛」，打开即列表 | 降低认知与操作成本 |
| 和监控/发送打通 | 资源中心可跳转监控、发送控制台，或从那里选「资源中心」的资源 | 形成闭环，提升效率 |

### 9.3 与「数据库」相关的用户无感优化

| 方向 | 建议 | 说明 |
| 多端/多设备 | 收藏与状态同步到账号，换设备也能看到资源中心列表 | 依赖后端用户维度存储 |
| 列表加载性能 | 资源中心列表分页与索引优化，大列表不卡顿 | 用户感知为「打开快、筛得快」 |
| 隐私与安全 | 收藏与操作记录按用户隔离，符合隐私策略 | 增强信任 |

---

## 十、实施顺序建议（不含代码，仅顺序）

1. **产品与数据模型确认**：确认「资源中心」列表数据来源（收藏关系表/接口），与现有 is_saved、监控状态等的对应关系。
2. **资源中心独立布局**：先做资源中心独立页（路由、首屏以「我的资源」列表为主、空状态与「去搜索发现」引导），仍可暂时复用部分搜索发现组件（如卡片、弹窗）。
3. **数据接口分离**：实现或对接资源中心专用「已收藏列表」API，与搜索 API 分离；收藏/取消收藏保证两页数据一致。
4. **搜索发现收束**：搜索发现页弱化「已收藏」在主视觉的权重，保留搜索与发现为主；可选在收藏后轻提示「已加入资源中心」。
5. **侧栏与文案**：侧栏与两页内文案、引导统一为「搜索发现 = 发现」「资源中心 = 我的资源管理」；按需加副标题或 tooltip。
6. **批量操作与联动**：在资源中心完善批量操作（加入、加监控、取消收藏、导出）及与监控/发送的跳转或联动。
7. **可选扩展**：资源中心标签/分组、资源中心深链参数（如 ?status=monitoring）；埋点与分析。

---

## 十一、成功指标（可量化）

- **心智**：用户调研或反馈中「资源中心与搜索发现区别」理解正确率提升；「两个一样」的投诉减少。
- **使用**：资源中心 PV/人均访问时长提升；搜索发现「收藏」次数与资源中心「批量操作」次数可分别统计并提升。
- **动线**：从搜索发现收藏后进入资源中心的比例；从资源中心跳转监控/发送的比例（若已做联动）。
- **性能**：资源中心列表首屏加载时间、筛选响应时间在可接受范围内。

---

## 十二、风险与回滚

- **风险 1**：习惯在「资源中心」里先搜再管的用户，短期内不适应。  
  **缓解**：在资源中心保留明确的「添加资源」入口跳转搜索发现；文案说明「找新资源请到搜索发现」。
- **风险 2**：后端暂无用户维度收藏表，资源中心列表需从现有结果+is_saved 拼装。  
  **缓解**：先做前端布局与动线分离，列表数据可暂时从现有接口+前端过滤实现；后续再上独立收藏表与 API，平滑迁移。
- **回滚**：若需回滚，可恢复为「两路由共用一个首屏」的现状；独立布局与接口改为可选特性或分支，便于切换。

---

## 十三、小结

| 视角 | 核心要点 |
|------|----------|
| **开发** | 资源中心独立页面与数据源；组件复用但布局与接口分离；收藏与状态同步一致。 |
| **市场** | 话术与引导明确「发现 vs 管理」；强化资源中心作为「资源库」的价值与动线。 |
| **用户** | 找新的用搜索发现、管已有的用资源中心；收藏一处生效、两处可见；资源中心首屏即「我的资源」。 |

---

## 十四、实施记录与再优化（已完成）

### 14.1 已实施内容

| 项目 | 实施方式 | 文件/位置 |
|------|----------|-----------|
| **已收藏数据源** | 新增 `SavedResourcesService`，localStorage 持久化（key: `tg-resource-center-saved`），提供 add/remove/list | `src/services/saved-resources.service.ts` |
| **View 绑定** | 资源中心模式下传入 `[resources]="resourceCenterList()"`；处理 `(saveResourceEvent)` / `(unsaveResourceEvent)` 写入服务并 toast | `src/views/resource-discovery-view.component.ts` |
| **mergedResources 逻辑** | 资源中心且父组件传入列表时优先使用 `resources()`，否则沿用搜索结果/内部列表 | `search-discovery.component.ts` mergedResources computed |
| **收藏/取消收藏即時 UI** | `toggleSave` 在 emit 後同步更新 `_internalResources` 的 `is_saved`，星标即時更新 | 同上 toggleSave() |
| **资源中心首屏** | 隐藏大搜索框（`@if (initialView() !== 'resource-center')`）；顶栏「已收藏 X」「X 項」+「➕ 添加资源」按钮跳转搜索发现 | 同上 template |
| **资源中心空状态** | 独立空状态：📦「还没有收藏资源」+ 说明 +「去搜索发现添加」按钮 | 同上 空状态分支 |
| **跳转搜索发现** | 组件内 `goToSearchDiscovery()` 触发 `navigateTo.emit('search-discovery')`，View 调用 `nav.navigateTo` | 组件 + view |
| **侧栏 tooltip** | 搜索发现 `title="发现群组与频道"`，资源中心 `title="我的收藏与资源管理"` | `app.component.html` |
| **i18n** | `menu.searchDiscoveryHint`、`menu.resourceCenterHint`（zh-CN / zh-TW / en） | `assets/i18n/*.json` |

### 14.2 在方案基础上的再优化

- **数据源前移**：方案建议「列表数据可暂时从现有接口+前端过滤实现」；实施时新增独立 `SavedResourcesService` 与 localStorage，资源中心列表与搜索结果彻底分离，收藏一次、两处一致（搜索发现收藏后资源中心立即可见）。
- **资源中心顶栏**：方案为「已收藏总数、按状态分布、今日操作数」；实施先做「已收藏 X」「X 項」+「添加资源」入口，操作历史沿用现有「📋 X 操作」折叠面板，按状态分布可后续在筛选栏强化。
- **空状态动线**：明确「在搜索发现中搜索并收藏后会出现在这里」，减少「不知道从哪加」的困惑。
- **navigateTo 输出**：组件新增 `navigateTo = output<string>()`，由 View 统一处理路由，便于后续深链或多入口跳转。

### 14.3 优化结果小结

- 资源中心与搜索发现**布局与心智分离**：资源中心首屏为「我的资源」列表或空状态+CTA，搜索发现首屏为搜索框与渠道。
- 收藏数据**单源**（SavedResourcesService + localStorage），两页共用；取消收藏后资源中心列表即时更新。
- 侧栏通过 tooltip 与 i18n 区分「发现群组与频道」与「我的收藏与资源管理」。

---

## 十五、下一阶段建议

1. **后端收藏 API（可选）**：若需多端同步或审计，可增加「已收藏列表」接口与「收藏/取消收藏」写接口，`SavedResourcesService` 改为先读接口、再 fallback 本地，收藏时双写。
2. **资源中心批量「取消收藏」**：在批量操作栏增加「取消收藏選中」，便于在资源中心批量清理。
3. **搜索发现收藏后轻提示**：收藏成功 toast 后可加一句「可在资源中心查看」，强化动线（本次未做，列为下一阶段）。
4. **资源中心按状态统计**：顶栏或筛选区展示「已加入 / 监控中 / 待处理」数量，便于资产分层。
5. **深链与联动**：支持从监控中心/发送控制台跳转资源中心并带 `?status=monitoring` 等参数，默认筛选对应状态。
6. **埋点**：两页 PV、收藏/取消收藏次数、资源中心「添加资源」点击与跳转率，用于验证分离效果。

---

*文档版本：v1.1；含实施记录与下一阶段建议。*
