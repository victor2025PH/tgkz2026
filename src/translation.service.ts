
import { Injectable, signal } from '@angular/core';

export type Language = 'en' | 'zh';

const translations: Record<Language, Record<string, string>> = {
  en: {
    title: 'TG-AI智控王',
    subtitle: 'AI Telegram Outreach',
    dashboard: 'Dashboard',
    accounts: 'Accounts',
    automation: 'Automation',
    leads: 'Leads',
    analytics: 'Analytics',
    logs: 'Logs',
    performance: 'Performance',
    alerts: 'Alerts',
    
    // Menu Categories
    resourceManagement: 'Resource Management',
    marketingAutomation: 'Marketing Automation',
    aiIntelligence: 'AI & Intelligence',
    systemMonitor: 'System Monitor',
    
    // New Menu Items
    resourceDiscoveryMenu: 'Resource Discovery',
    aiCenter: 'AI Center',
    monitoringCenter: 'Monitoring Center',
    
    // AI Center Tabs
    aiAutoChat: 'AI Auto Chat',
    ragKnowledge: 'RAG Knowledge',
    voiceService: 'Voice Service',
    enableAiAutoChat: 'Enable AI Auto Chat',
    aiAutoChatHint: 'Automatically reply to private messages using AI',
    chatMode: 'Chat Mode',
    systemPrompt: 'System Prompt',
    
    // Voice Service
    ttsService: 'Text to Speech (TTS)',
    sttService: 'Speech to Text (STT)',
    enableTts: 'Enable TTS',
    enableStt: 'Enable STT',
    ttsEndpointLabel: 'TTS Endpoint',
    sttEndpointLabel: 'STT Endpoint',
    settings: 'Settings',
    totalAccounts: 'Total Accounts',
    onlineAccounts: 'Online Accounts',
    leadsToday: 'Leads Today',
    messagesSentToday: 'Messages Sent Today',
    leadsCaptured: 'Leads Captured',
    keywords: 'Keywords',
    monitoredGroups: 'Monitored Groups',
    systemControl: 'System Control',
    monitoringStatus: 'Monitoring Status:',
    active: 'Active',
    inactive: 'Inactive',
    start: 'Start',
    stop: 'Stop',
    recentLogs: 'Recent Logs',
    recentLeads: 'Recent Leads',
    noRecentActivity: 'No recent activity.',
    manageAccounts: 'Manage Accounts',
    addNewAccount: 'Add New Account Manually',
    phoneNumber: 'Phone Number',
    apiId: 'API ID',
    apiHash: 'API Hash',
    proxy: 'SOCKS5 Proxy (Optional)',
    addAccount: 'Add Account',
    phone: 'Phone',
    status: 'Status',
    actions: 'Actions',
    login: 'Login',
    remove: 'Remove',
    enableWarmup: 'Enable Warm-up Mode',
    dailySends: 'Daily Sends',
    monitoringConfig: 'Monitoring Configuration',
    keywordsTitle: 'Keywords',
    addGroupTitle: 'Groups to Monitor',
    groupUrl: 'Group URL or @username',
    add: 'Add',
    regex: 'Regex',
    leadPipeline: 'Lead Pipeline',
    newLeadCaptured: 'New Lead Captured',
    username: 'Username',
    sourceGroup: 'Source Group',
    keyword: 'Keyword',
    message: 'Message',
    contacted: 'Contacted',
    actionLogs: 'Action Logs',
    clearLogs: 'Clear Logs',
    settingsTitle: 'Settings',
    messagingConfig: 'Messaging Configuration',
    enableSpintax: 'Enable Spintax Processing',
    spintaxHint: 'Process message prompts with Spintax (e.g., {Hi|Hello}) for message variations.',
    abTesting: 'A/B Testing Templates',
    addNewTemplate: 'Add New Template',
    templateName: 'Template Name',
    prompt: 'Prompt',
    saveTemplate: 'Save Template',
    deactivate: 'Deactivate',
    activate: 'Activate',
    abTestingHint: 'Create multiple active templates. The system will automatically assign them to new leads for testing.',
    leadDetails: 'Lead Details',
    sendMessageTab: 'Send Message',
    historyTab: 'History',
    assignedTemplate: 'Assigned Template',
    customizePrompt: 'Customize Prompt for this Lead',
    
    // Message sending enhancements
    selectSenderAccount: 'Select Sender Account',
    noSenderAccounts: 'No sender accounts available',
    noSenderAccountsHint: 'Please configure sender accounts in Account Management',
    manualInput: 'Manual Input',
    aiGenerate: 'AI Generate',
    useTemplate: 'Use Template',
    aiPromptPlaceholder: 'Enter instructions for AI to generate message...',
    aiNotConfigured: 'AI is not configured.',
    goToSettings: 'Go to Settings',
    selectTemplatePlaceholder: 'Choose a template...',
    messageContent: 'Message Content',
    characters: 'chars',
    messageContentPlaceholder: 'Enter your message here...',
    messageRequired: 'Please enter a message',
    selectSenderFirst: 'Please select a sender account',
    senderAccountNotFound: 'Sender account not found',
    messageSent: 'Message sent successfully!',
    messageQueued: 'Message added to queue',
    
    // AI Configuration
    aiConfiguration: 'AI Configuration',
    aiConfigurationHint: 'Configure AI API to enable automatic message generation',
    aiProvider: 'AI Provider',
    customApi: 'Custom API',
    customApiKey: 'API Key',
    geminiKeyHint: 'Get your API key from',
    openaiKeyHint: 'Get your API key from',
    customApiHint: 'Enter your custom API key',
    customApiEndpoint: 'API Endpoint URL',
    testConnection: 'Test Connection',
    testing: 'Testing...',
    saveApiKey: 'Save API Key',
    aiConnectionSuccess: 'AI connection successful!',
    aiConnectionFailed: 'AI connection failed',
    invalidApiKeyFormat: 'Invalid API key format',
    aiSettingsSaved: 'AI settings saved!',
    
    // Local AI & Voice Services
    localAi: 'Local AI',
    localAiConfiguration: 'Local AI Service',
    localAiHint: 'Configure local AI service (e.g., Ollama, LocalAI, LM Studio)',
    localAiEndpoint: 'Local AI Endpoint',
    localAiEndpointPlaceholder: 'http://localhost:3002',
    localAiModel: 'Model Name (Optional)',
    localAiModelPlaceholder: 'e.g., llama2, mistral',
    voiceServices: 'Voice Services',
    voiceServicesHint: 'Configure local text-to-speech and speech-to-text services',
    ttsServiceLabel: 'Text-to-Speech (TTS)',
    ttsEndpoint: 'TTS Endpoint',
    ttsEndpointPlaceholder: 'http://localhost:9881',
    ttsVoice: 'Voice ID (Optional)',
    ttsVoicePlaceholder: 'e.g., default, speaker_01',
    ttsEnabled: 'Enable TTS',
    sttServiceLabel: 'Speech-to-Text (STT)',
    sttEndpoint: 'STT Endpoint',
    sttEndpointPlaceholder: 'http://localhost:9000',
    sttEnabled: 'Enable STT',
    testLocalAi: 'Test Local AI',
    testTts: 'Test TTS',
    testStt: 'Test STT',
    localAiSuccess: 'Local AI connection successful!',
    localAiFailed: 'Local AI connection failed',
    ttsSuccess: 'TTS service connection successful!',
    ttsFailed: 'TTS service connection failed',
    sttSuccess: 'STT service connection successful!',
    sttFailed: 'STT service connection failed',
    invalidEndpointFormat: 'Invalid endpoint format (must start with http:// or https://)',
    saveLocalSettings: 'Save Settings',
    
    // AI Auto Chat (Extended)
    aiAutoChatTitle: 'AI Auto Chat',
    aiAutoChatDescription: 'Configure AI-powered automatic responses with unlimited context memory',
    enableAutoChat: 'Enable AI Auto Chat',
    autoChatMode: 'Auto Chat Mode',
    modeFullAuto: 'Full Auto',
    modeFullAutoDesc: 'AI fully takes over, automatically replies to all messages',
    modeSemiAuto: 'Semi-Auto',
    modeSemiAutoDesc: 'AI generates drafts, human confirms before sending',
    modeAssist: 'Assist',
    modeAssistDesc: 'Human inputs, AI provides suggestions and polishing',
    modeKeyword: 'Keyword Trigger',
    modeKeywordDesc: 'AI only activates when keywords are matched',
    typingSpeed: 'Typing Speed',
    typingSpeedHint: 'Characters per minute (simulates human typing)',
    replyDelay: 'Reply Delay',
    replyDelayHint: 'Random delay range before replying (seconds)',
    systemPromptLabel: 'System Prompt',
    systemPromptHint: 'Instructions for AI behavior and personality',
    systemPromptPlaceholder: 'You are a friendly customer service assistant...',
    maxContextMessages: 'Max Context Messages',
    maxContextHint: 'Number of recent messages to include in AI context',
    enableMemory: 'Enable AI Memory',
    enableMemoryHint: 'AI remembers important facts about users across sessions',
    autoGreeting: 'Auto Greeting',
    autoGreetingHint: 'Automatically greet new users',
    greetingMessage: 'Greeting Message',
    greetingPlaceholder: 'Hello {name}! How can I help you today?',
    unlimitedContext: 'Unlimited Context',
    chatHistory: 'Chat History',
    userProfile: 'User Profile',
    aiMemories: 'AI Memories',
    conversationStage: 'Conversation Stage',
    
    // Knowledge Base
    knowledgeBase: 'Knowledge Base',
    knowledgeBaseHint: 'Manage documents, images, videos and QA pairs for AI-enhanced responses',
    documents: 'Documents',
    images: 'Images',
    videos: 'Videos',
    qaPairs: 'Q&A Pairs',
    addDocument: 'Add Document',
    addImage: 'Add Image',
    addVideo: 'Add Video',
    addQaPair: 'Add Q&A',
    importQa: 'Import Q&A',
    searchKnowledge: 'Search Knowledge Base',
    documentTitle: 'Document Title',
    documentCategory: 'Category',
    documentTags: 'Tags',
    uploadFile: 'Upload File',
    orPasteContent: 'Or paste content directly',
    contentPlaceholder: 'Paste document content here...',
    question: 'Question',
    answer: 'Answer',
    noDocuments: 'No documents yet. Add documents to enhance AI responses.',
    noImages: 'No images yet. Add images for rich media responses.',
    noVideos: 'No videos yet. Add videos for tutorial responses.',
    noQaPairs: 'No Q&A pairs yet. Add common questions and answers.',
    categoryProducts: 'Products',
    categoryTutorials: 'Tutorials',
    categoryGeneral: 'General',
    categoryFaq: 'FAQ',
    dragDropHint: 'Drag & drop files here or click to browse',
    supportedFormats: 'Supported formats',
    fileSize: 'File size',
    chunks: 'chunks',
    preview: 'Preview',
    edit: 'Edit',
    ragEnabled: 'RAG Enabled',
    ragHint: 'AI will search knowledge base for relevant information',
    
    // Telegram RAG System
    telegramRagTitle: 'Telegram Auto-Learning RAG',
    telegramRagHint: 'Automatically learn from chat history to enhance AI responses',
    totalKnowledge: 'Total Knowledge',
    qaLearned: 'Q&A Learned',
    scriptsLearned: 'Scripts Learned',
    totalUses: 'Total Uses',
    ragSystemOnline: 'RAG System Online',
    ragSystemOffline: 'RAG System Offline',
    vectorDb: 'Vector DB',
    embedding: 'Embedding',
    initRagSystem: 'Initialize RAG',
    learnFromChats: 'Learn from Chats',
    reindexHighValue: 'Reindex High Value',
    cleanupRag: 'Cleanup',
    refreshStats: 'Refresh Stats',
    searchRagPlaceholder: 'Search knowledge base...',
    searchResults: 'Search Results',
    score: 'Score',
    knowledgeByType: 'Knowledge by Type',
    items: 'items',
    addManualKnowledge: 'Add Manual Knowledge',
    addRagKnowledge: 'Add RAG Knowledge',
    knowledgeType: 'Knowledge Type',
    ragQuestion: 'Question',
    ragAnswer: 'Answer',
    context: 'Context',
    questionPlaceholder: 'Enter question or trigger...',
    answerPlaceholder: 'Enter answer or response...',
    contextPlaceholder: 'Optional context info...',
    addKnowledge: 'Add',
    
    // Resource Discovery
    resourceDiscoveryTitle: 'Resource Discovery',
    resourceDiscoveryHint: 'Automatically discover and join Telegram groups/channels',
    totalResources: 'Total Resources',
    todayDiscovered: 'Discovered Today',
    pendingJoins: 'Pending Joins',
    joinedCount: 'Joined',
    initResourceDiscovery: 'Initialize',
    searchResources: 'Search Resources',
    searchResourcesPlaceholder: 'Enter keywords to search groups/channels...',
    processJoinQueue: 'Process Queue',
    batchJoin: 'Batch Join',
    addToQueue: 'Add to Queue',
    resourceType: 'Type',
    resourceStatus: 'Status',
    memberCount: 'Members',
    overallScore: 'Score',
    discoveredAt: 'Discovered',
    noResourcesFound: 'No resources found. Start searching!',
    discoveryKeywords: 'Search Keywords',
    addKeyword: 'Add Keyword',
    resourceGroup: 'Group',
    resourceSupergroup: 'Supergroup',
    resourceChannel: 'Channel',
    statusDiscovered: 'Discovered',
    statusQueued: 'Queued',
    statusJoined: 'Joined',
    statusBlocked: 'Blocked',
    selectAll: 'Select All',
    selectedCount: 'selected',
    
    // Voice Clone
    voiceClone: 'Voice Clone',
    voiceCloneHint: 'Upload audio samples to clone voices for TTS. Supports WAV, MP3, OGG, FLAC formats (max 50MB)',
    uploadVoiceSample: 'Upload Voice Sample',
    clonedVoices: 'Cloned Voices',
    noClonedVoices: 'No cloned voices yet. Upload an audio sample to get started.',
    voiceUploadSuccess: 'Voice sample uploaded successfully!',
    voiceUploadFailed: 'Failed to upload voice sample',
    voiceDeleted: 'Voice sample deleted',
    invalidAudioFormat: 'Invalid audio format. Please use WAV, MP3, OGG, or FLAC.',
    audioFileTooLarge: 'Audio file too large. Maximum size is 50MB.',
    selectVoiceFirst: 'Please select a cloned voice first',
    ttsEndpointRequired: 'Please configure TTS endpoint first',
    previewVoice: 'Preview',
    useThisVoice: 'Use',
    deleteVoice: 'Delete',
    remoteEndpointHint: 'Enter the remote server URL where the service is deployed',
    
    // Voice Recording
    recordVoice: 'Record Voice',
    startRecording: 'Start Recording',
    stopRecording: 'Stop Recording',
    recording: 'Recording...',
    recordingHint: 'Please record 3-10 seconds of clear speech',
    voiceNameLabel: 'Voice Name',
    voiceNamePlaceholder: 'e.g., My Voice, Customer Service',
    promptTextLabel: 'Reference Text (what you said)',
    promptTextPlaceholder: 'Enter the text you spoke during recording...',
    confirmUpload: 'Confirm & Upload',
    reRecord: 'Re-record',
    recordingTooShort: 'Recording too short. Please record at least 3 seconds.',
    recordingTooLong: 'Recording too long. Maximum 10 seconds.',
    voiceNameRequired: 'Please enter a voice name',
    noRecordingToUpload: 'No recording to upload. Please record first.',
    microphoneAccessDenied: 'Microphone access denied. Please allow microphone access.',
    orUploadFile: 'Or upload audio file',
    seconds: 'seconds',
    
    generateWithAi: '✨ Generate with AI',
    generating: 'Generating...',
    generatedMessage: 'Generated Message',
    error: 'Error:',
    cancel: 'Cancel',
    sendMessage: 'Send Message',
    language: 'Language',
    appearance: 'Appearance',
    light: 'Light',
    dark: 'Dark',
    health: 'Health',
    group: 'Group',
    allAccounts: 'All Accounts',
    importSession: 'Import Session',
    exportSession: 'Export Session',
    twoFactorPassword: '2FA Password (optional)',
    accountGroup: 'Account Group',
    accountHealthTooltip: 'Health Score based on activity, profile, and proxy quality.',
    viewLogs: 'View Logs',
    fileBasedManagement: 'File-Based Management',
    downloadTemplate: 'Download Template',
    uploadExcel: 'Upload Excel',
    reloadSessions: 'Reload Sessions',
    noAccountsFound: 'No accounts found. Add accounts manually or upload an Excel file.',
    'New': 'New',
    'Contacted': 'Contacted',
    'Replied': 'Replied',
    'Follow-up': 'Follow-up',
    'Closed-Won': 'Closed-Won',
    'Closed-Lost': 'Closed-Lost',
    moveTo: 'Move to',
    analyticsTitle: 'Performance Analytics',
    replyRate: 'Reply Rate',
    replyRateDesc: 'Percentage of contacted leads that have been moved to the "Replied" stage.',
    templatePerformance: 'Template Performance',
    leadsOverTime: 'Leads Over Time',
    last7Days: 'Last 7 Days',
    conversionFunnel: 'Conversion Funnel',
    contactHistory: 'Contact History',
    noHistoryFound: 'No history found for this lead.',
    kanbanView: 'Kanban',
    listView: 'List',
    exportToExcel: 'Export to Excel',
    onlineStatus: 'Online Status',
    userId: 'User ID',
    leadName: 'Lead Name',
    capturedAt: 'Captured At',
    'Online': 'Online',
    'Offline': 'Offline',
    'Recently': 'Recently',
    'Unknown': 'Unknown',
    role: 'Role',
    'Listener': 'Listener',
    'Sender': 'Sender',
    'Unassigned': 'Unassigned',
    'Logging in...': 'Logging in...',
    'Banned': 'Banned',
    'Warming Up': 'Warming Up',
    listenerConfiguration: 'Listener Configuration',
    senderConfiguration: 'Sender & Automation Configuration',
    activeListenerAccounts: 'Active Listener Accounts',
    activeSenderAccounts: 'Active Sender Accounts',
    outreachAutomation: 'Outreach & Follow-up Automation',
    enableAutoReply: 'Enable Automated Reply',
    autoReplyHint: "When a lead is moved to 'Replied', automatically send a message to acknowledge.",
    autoReplyMessage: 'Auto-Reply Message',
    autoReplyEditHint: 'Edit the message and click save to update',
    saveAutoReply: 'Save',
    settingsSaved: 'Settings saved successfully!',
    saveSettings: 'Save Settings',
    settingsAutoSaveHint: 'Settings are auto-saved when changed. You can also click to save manually.',
    sendingDelays: 'Randomized Sending Delays',
    delayRangeHint: "Wait for a random period before sending the first message.",
    min: 'Min (s)',
    max: 'Max (s)',
    noActiveListeners: 'No active Listener accounts. Assign the Listener role to online accounts.',
    noActiveSenders: 'No active Sender accounts. Assign the Sender role to online accounts.',
    sendingStrategy: 'Sending Strategy',
    sendImmediately: 'Send Immediately',
    sendWithinTimeWindow: 'Send within Time Window',
    timeWindowHint: 'Only send messages between these local times.',
    from: 'From',
    to: 'To',
    smartSending: 'Smart Sending',
    enableSmartSending: 'Enable Smart Sending',
    smartSendingHint: 'Only send messages when the lead is online. Queues message if offline.',
    attachImage: 'Attach Image',
    attachFile: 'Attach File',
    checkStatus: 'Check Status',
    'Proxy Error': 'Proxy Error',
    selected: 'selected',
    bulkActions: 'Bulk Actions',
    assignRole: 'Assign Role',
    assignGroup: 'Assign Group',
    enterGroupName: 'Enter new group name:',
    deleteSelected: 'Delete Selected',
    keywordSets: 'Keyword Sets',
    newKeywordSet: 'New Keyword Set Name',
    assignKeywordSets: 'Assign Keyword Sets',
    addToDNC: 'Add to Do Not Contact List',
    userOnDNC: 'User is on DNC List',
    automationCampaigns: 'Automation Campaigns',
    campaigns: 'Campaigns',
    createCampaign: 'Create New Campaign',
    campaignName: 'Campaign Name',
    triggers: 'Triggers',
    campaignTriggerHint: 'A lead will be captured if it matches ALL selected criteria.',
    sourceGroups: 'Source Groups',
    messageTemplate: 'Message Template',
    selectTemplate: 'Select a template...',
    noCampaignsFound: 'No campaigns created yet.',
    campaign: 'Campaign',
    groups: 'Groups',
    'Resting (Cooldown)': 'Resting (Cooldown)',
    allCampaigns: 'All Campaigns',
    selectCampaign: 'Select Campaign',
    campaignPerformance: 'Campaign Performance',
    replied: 'Replied',
    campaignDetails: 'Campaign Details',
    automationHub: 'Automation Hub',
    monitoringTargets: 'Step 1: Monitoring Targets',
    automationRules: 'Step 2: Automation Rules',
    globalSendingConfig: 'Global Sending Configuration',
    accountStatus: 'Account Status',
    addKeywordPlaceholder: 'Enter keyword or phrase (e.g., bitcoin, payment)',
    regexTooltip: 'Regular Expression: Use pattern matching instead of exact text. Example: bitcoin|BTC matches "bitcoin" or "BTC"',
    regexExamples: 'Regex Examples',
    regexExample1: 'bitcoin|BTC - matches bitcoin or BTC',
    regexExample2: 'pay.*ment - matches payment, payments, etc.',
    regexExample3: '\\d+.*USD - matches numbers followed by USD',
    addKeywordButton: 'Add',
    keywordAdded: 'Keyword added',
    keywordAddFailed: 'Failed to add keyword',
    invalidRegex: 'Invalid regex syntax',
    selectKeywordSetFirst: 'Please select a keyword set first',
    keywordEmpty: 'Keyword cannot be empty',
    testKeyword: 'Test',
    testKeywordPlaceholder: 'Enter test text...',
    keywordMatches: 'Matches',
    keywordNoMatch: 'No match',
  },
  zh: {
    title: 'TG-AI智控王',
    subtitle: 'AI Telegram 营销',
    dashboard: '仪表盘',
    accounts: '账户管理',
    automation: '自动化中心',
    leads: '潜在客户',
    analytics: '分析',
    logs: '日志',
    performance: '性能监控',
    alerts: '告警',
    
    // Menu Categories
    resourceManagement: '资源管理',
    marketingAutomation: '营销自动化',
    aiIntelligence: 'AI 智能',
    systemMonitor: '系统监控',
    
    // New Menu Items
    resourceDiscoveryMenu: '资源发现',
    aiCenter: 'AI 中心',
    monitoringCenter: '监控中心',
    
    // AI Center Tabs
    aiAutoChat: 'AI 自动聊天',
    ragKnowledge: 'RAG 知识库',
    voiceService: '语音服务',
    enableAiAutoChat: '启用 AI 自动聊天',
    aiAutoChatHint: '使用 AI 自动回复私信',
    chatMode: '聊天模式',
    systemPrompt: '系统提示词',
    
    // Voice Service
    ttsService: '文字转语音 (TTS)',
    sttService: '语音转文字 (STT)',
    enableTts: '启用 TTS',
    enableStt: '启用 STT',
    ttsEndpointLabel: 'TTS 端点',
    sttEndpointLabel: 'STT 端点',
    settings: '设置',
    totalAccounts: '总账户数',
    onlineAccounts: '在线账户',
    leadsToday: '今日获客',
    messagesSentToday: '今日已发',
    leadsCaptured: '捕获客户',
    keywords: '关键词',
    monitoredGroups: '监控群组',
    systemControl: '系统控制',
    monitoringStatus: '监控状态:',
    active: '运行中',
    inactive: '已停止',
    start: '启动',
    stop: '停止',
    recentLogs: '最近日志',
    recentLeads: '最近客户',
    noRecentActivity: '暂无最近活动。',
    manageAccounts: '管理账户',
    addNewAccount: '手动添加新账户',
    phoneNumber: '电话号码',
    apiId: 'API ID',
    apiHash: 'API Hash',
    proxy: 'SOCKS5 代理 (可选)',
    addAccount: '添加账户',
    phone: '电话',
    status: '状态',
    actions: '操作',
    login: '登录',
    remove: '移除',
    enableWarmup: '启用预热模式',
    dailySends: '今日已发',
    monitoringConfig: '监控配置',
    keywordsTitle: '关键词',
    addGroupTitle: '要监控的群组',
    groupUrl: '群组 URL 或 @username',
    add: '添加',
    regex: '正则',
    leadPipeline: '潜在客户漏斗',
    newLeadCaptured: '捕获新潜在客户',
    username: '用户名',
    sourceGroup: '来源群组',
    keyword: '关键词',
    message: '消息',
    contacted: '已联系',
    actionLogs: '操作日志',
    clearLogs: '清空日志',
    settingsTitle: '设置',
    messagingConfig: '消息配置',
    enableSpintax: '启用 Spintax 处理',
    spintaxHint: '处理消息提示中的 Spintax (例如 {Hi|Hello}) 以实现消息多样化。',
    abTesting: 'A/B 测试模板',
    addNewTemplate: '添加新模板',
    templateName: '模板名称',
    prompt: '提示语',
    saveTemplate: '保存模板',
    deactivate: '停用',
    activate: '激活',
    abTestingHint: '创建多个活动模板。系统将自动把它们分配给新的潜在客户进行测试。',
    leadDetails: '潜在客户详情',
    sendMessageTab: '发送消息',
    historyTab: '历史记录',
    assignedTemplate: '分配的模板',
    customizePrompt: '为此潜在客户自定义提示',
    
    // Message sending enhancements
    selectSenderAccount: '选择发送账号',
    noSenderAccounts: '没有可用的发送账号',
    noSenderAccountsHint: '请在账户管理中配置发送账号',
    manualInput: '手动输入',
    aiGenerate: 'AI 生成',
    useTemplate: '使用模板',
    aiPromptPlaceholder: '输入 AI 生成消息的指令...',
    aiNotConfigured: 'AI 尚未配置。',
    goToSettings: '前往设置',
    selectTemplatePlaceholder: '选择一个模板...',
    messageContent: '消息内容',
    characters: '字符',
    messageContentPlaceholder: '在此输入您的消息...',
    messageRequired: '请输入消息内容',
    selectSenderFirst: '请先选择发送账号',
    senderAccountNotFound: '发送账号不存在',
    messageSent: '消息发送成功！',
    messageQueued: '消息已加入发送队列',
    
    // AI Configuration
    aiConfiguration: 'AI 配置',
    aiConfigurationHint: '配置 AI API 以启用自动消息生成功能',
    aiProvider: 'AI 服务商',
    customApi: '自定义 API',
    customApiKey: 'API 密钥',
    geminiKeyHint: '从以下地址获取您的 API 密钥：',
    openaiKeyHint: '从以下地址获取您的 API 密钥：',
    customApiHint: '输入您的自定义 API 密钥',
    customApiEndpoint: 'API 接口地址',
    testConnection: '测试连接',
    testing: '测试中...',
    saveApiKey: '保存 API 密钥',
    aiConnectionSuccess: 'AI 连接成功！',
    aiConnectionFailed: 'AI 连接失败',
    invalidApiKeyFormat: 'API 密钥格式无效',
    aiSettingsSaved: 'AI 设置已保存！',
    
    // Local AI & Voice Services
    localAi: '本地 AI',
    localAiConfiguration: '本地 AI 服务',
    localAiHint: '配置本地 AI 服务（如 Ollama、LocalAI、LM Studio）',
    localAiEndpoint: '本地 AI 端点',
    localAiEndpointPlaceholder: 'http://localhost:3002',
    localAiModel: '模型名称（可选）',
    localAiModelPlaceholder: '例如：llama2、mistral',
    voiceServices: '语音服务',
    voiceServicesHint: '配置本地语音合成和语音识别服务',
    ttsServiceLabel: '语音合成 (TTS)',
    ttsEndpoint: 'TTS 端点',
    ttsEndpointPlaceholder: 'http://localhost:9881',
    ttsVoice: '语音 ID（可选）',
    ttsVoicePlaceholder: '例如：default、speaker_01',
    ttsEnabled: '启用 TTS',
    sttServiceLabel: '语音识别 (STT)',
    sttEndpoint: 'STT 端点',
    sttEndpointPlaceholder: 'http://localhost:9000',
    sttEnabled: '启用 STT',
    testLocalAi: '测试本地 AI',
    testTts: '测试 TTS',
    testStt: '测试 STT',
    localAiSuccess: '本地 AI 连接成功！',
    localAiFailed: '本地 AI 连接失败',
    ttsSuccess: 'TTS 服务连接成功！',
    ttsFailed: 'TTS 服务连接失败',
    sttSuccess: 'STT 服务连接成功！',
    sttFailed: 'STT 服务连接失败',
    invalidEndpointFormat: '端点格式无效（必须以 http:// 或 https:// 开头）',
    saveLocalSettings: '保存设置',
    
    // AI Auto Chat (Extended)
    aiAutoChatTitle: 'AI 自动聊天',
    aiAutoChatDescription: '配置 AI 驱动的自动回复，支持无限上下文记忆',
    enableAutoChat: '启用 AI 自动聊天',
    autoChatMode: '自动聊天模式',
    modeFullAuto: '全自动',
    modeFullAutoDesc: 'AI 完全接管，自动回复所有消息',
    modeSemiAuto: '半自动',
    modeSemiAutoDesc: 'AI 生成草稿，人工确认后发送',
    modeAssist: '辅助',
    modeAssistDesc: '人工输入，AI 提供建议和润色',
    modeKeyword: '关键词触发',
    modeKeywordDesc: '仅在匹配关键词时启动 AI',
    typingSpeed: '打字速度',
    typingSpeedHint: '每分钟字符数（模拟人类打字）',
    replyDelay: '回复延迟',
    replyDelayHint: '回复前的随机延迟范围（秒）',
    systemPromptLabel: '系统提示词',
    systemPromptHint: 'AI 行为和个性的指令',
    systemPromptPlaceholder: '你是一个友好的客服助手...',
    maxContextMessages: '最大上下文消息数',
    maxContextHint: '包含在 AI 上下文中的最近消息数量',
    enableMemory: '启用 AI 记忆',
    enableMemoryHint: 'AI 跨会话记住用户的重要信息',
    autoGreeting: '自动问候',
    autoGreetingHint: '自动问候新用户',
    greetingMessage: '问候语',
    greetingPlaceholder: '你好 {name}！有什么可以帮到你的吗？',
    unlimitedContext: '无限上下文',
    chatHistory: '聊天历史',
    userProfile: '用户画像',
    aiMemories: 'AI 记忆',
    conversationStage: '对话阶段',
    
    // Knowledge Base
    knowledgeBase: '知识库',
    knowledgeBaseHint: '管理文档、图片、视频和问答对，增强 AI 回复能力',
    documents: '文档',
    images: '图片',
    videos: '视频',
    qaPairs: '问答对',
    addDocument: '添加文档',
    addImage: '添加图片',
    addVideo: '添加视频',
    addQaPair: '添加问答',
    importQa: '导入问答',
    searchKnowledge: '搜索知识库',
    documentTitle: '文档标题',
    documentCategory: '分类',
    documentTags: '标签',
    uploadFile: '上传文件',
    orPasteContent: '或直接粘贴内容',
    contentPlaceholder: '在此粘贴文档内容...',
    question: '问题',
    answer: '回答',
    noDocuments: '还没有文档。添加文档来增强 AI 回复。',
    noImages: '还没有图片。添加图片用于富媒体回复。',
    noVideos: '还没有视频。添加视频用于教程回复。',
    noQaPairs: '还没有问答对。添加常见问题和回答。',
    categoryProducts: '产品',
    categoryTutorials: '教程',
    categoryGeneral: '通用',
    categoryFaq: '常见问题',
    dragDropHint: '拖放文件到这里或点击浏览',
    supportedFormats: '支持的格式',
    fileSize: '文件大小',
    chunks: '分段',
    preview: '预览',
    edit: '编辑',
    ragEnabled: '启用 RAG',
    ragHint: 'AI 将从知识库搜索相关信息',
    
    // Telegram RAG System
    telegramRagTitle: 'Telegram 自动学习 RAG',
    telegramRagHint: '自动从聊天记录中学习，增强 AI 回复能力',
    totalKnowledge: '总知识量',
    qaLearned: '学习的问答',
    scriptsLearned: '学习的话术',
    totalUses: '总使用次数',
    ragSystemOnline: 'RAG 系统在线',
    ragSystemOffline: 'RAG 系统离线',
    vectorDb: '向量库',
    embedding: '嵌入模型',
    initRagSystem: '初始化 RAG',
    learnFromChats: '从聊天学习',
    reindexHighValue: '重建高价值索引',
    cleanupRag: '清理知识库',
    refreshStats: '刷新统计',
    searchRagPlaceholder: '搜索知识库...',
    searchResults: '搜索结果',
    score: '评分',
    knowledgeByType: '按类型分类',
    items: '条',
    addManualKnowledge: '手动添加知识',
    addRagKnowledge: '添加 RAG 知识',
    knowledgeType: '知识类型',
    ragQuestion: '问题',
    ragAnswer: '回答',
    context: '上下文',
    questionPlaceholder: '输入问题或触发词...',
    answerPlaceholder: '输入答案或回复...',
    contextPlaceholder: '可选的上下文信息...',
    addKnowledge: '添加',
    
    // Resource Discovery
    resourceDiscoveryTitle: '资源发现',
    resourceDiscoveryHint: '自动发现并加入 Telegram 群组/频道',
    totalResources: '总资源数',
    todayDiscovered: '今日发现',
    pendingJoins: '待加入',
    joinedCount: '已加入',
    initResourceDiscovery: '初始化',
    searchResources: '搜索资源',
    searchResourcesPlaceholder: '输入关键词搜索群组/频道...',
    processJoinQueue: '处理队列',
    batchJoin: '批量加入',
    addToQueue: '加入队列',
    resourceType: '类型',
    resourceStatus: '状态',
    memberCount: '成员数',
    overallScore: '评分',
    discoveredAt: '发现时间',
    noResourcesFound: '暂无资源。开始搜索吧！',
    discoveryKeywords: '搜索关键词',
    addKeyword: '添加关键词',
    resourceGroup: '群组',
    resourceSupergroup: '超级群组',
    resourceChannel: '频道',
    statusDiscovered: '已发现',
    statusQueued: '队列中',
    statusJoined: '已加入',
    statusBlocked: '被封禁',
    selectAll: '全选',
    selectedCount: '已选',
    
    // Voice Clone
    voiceClone: '声音克隆',
    voiceCloneHint: '上传音频样本来克隆声音用于 TTS。支持 WAV、MP3、OGG、FLAC 格式（最大 50MB）',
    uploadVoiceSample: '上传声音样本',
    clonedVoices: '已克隆的声音',
    noClonedVoices: '还没有克隆的声音。上传音频样本开始使用。',
    voiceUploadSuccess: '声音样本上传成功！',
    voiceUploadFailed: '声音样本上传失败',
    voiceDeleted: '声音样本已删除',
    invalidAudioFormat: '音频格式无效。请使用 WAV、MP3、OGG 或 FLAC。',
    audioFileTooLarge: '音频文件过大。最大大小为 50MB。',
    selectVoiceFirst: '请先选择一个克隆的声音',
    ttsEndpointRequired: '请先配置 TTS 端点',
    previewVoice: '预览',
    useThisVoice: '使用',
    deleteVoice: '删除',
    remoteEndpointHint: '输入服务部署的远程服务器 URL',
    
    // Voice Recording
    recordVoice: '录制声音',
    startRecording: '开始录音',
    stopRecording: '停止录音',
    recording: '录音中...',
    recordingHint: '请录制 3-10 秒清晰的语音',
    voiceNameLabel: '声音名称',
    voiceNamePlaceholder: '例如：我的声音、客服声音',
    promptTextLabel: '参考文本（您说的内容）',
    promptTextPlaceholder: '输入您录音时说的文字...',
    confirmUpload: '确认并上传',
    reRecord: '重新录音',
    recordingTooShort: '录音时间太短，请至少录制 3 秒',
    recordingTooLong: '录音时间太长，最长 10 秒',
    voiceNameRequired: '请输入声音名称',
    noRecordingToUpload: '没有可上传的录音，请先录音',
    microphoneAccessDenied: '麦克风访问被拒绝，请允许麦克风权限',
    orUploadFile: '或上传音频文件',
    seconds: '秒',
    
    generateWithAi: '✨ AI 生成',
    generating: '生成中...',
    generatedMessage: '生成的消息',
    error: '错误:',
    cancel: '取消',
    sendMessage: '发送消息',
    language: '语言',
    appearance: '外观',
    light: '浅色',
    dark: '深色',
    health: '健康度',
    group: '分组',
    allAccounts: '所有账户',
    importSession: '导入会话',
    exportSession: '导出回话',
    twoFactorPassword: '2FA 密码 (可选)',
    accountGroup: '账户分组',
    accountHealthTooltip: '健康分基于账号活跃度、个人资料完整度和代理质量。',
    viewLogs: '查看日志',
    fileBasedManagement: '文件管理',
    downloadTemplate: '下载模板',
    uploadExcel: '上传 Excel',
    reloadSessions: '重新加载会话',
    noAccountsFound: '未找到任何账户。请手动添加或上传 Excel 文件。',
    'New': '新客户',
    'Contacted': '已联系',
    'Replied': '已回复',
    'Follow-up': '需跟进',
    'Closed-Won': '成交',
    'Closed-Lost': '流失',
    moveTo: '移动到',
    analyticsTitle: '性能分析',
    replyRate: '回复率',
    replyRateDesc: '已联系的潜在客户中被移至“已回复”阶段的百分比。',
    templatePerformance: '模板性能',
    leadsOverTime: '潜在客户趋势',
    last7Days: '过去7天',
    conversionFunnel: '转化漏斗',
    contactHistory: '联系历史',
    noHistoryFound: '未找到此潜在客户的历史记录。',
    kanbanView: '看板',
    listView: '列表',
    exportToExcel: '导出到 Excel',
    onlineStatus: '在线状态',
    userId: '用户 ID',
    leadName: '潜在客户',
    capturedAt: '捕获于',
    'Online': '在线',
    'Offline': '离线',
    'Recently': '最近在线',
    'Unknown': '未知',
    role: '角色',
    'Listener': '监控号',
    'Sender': '发送号',
    'Unassigned': '未分配',
    'Logging in...': '登录中...',
    'Banned': '已封禁',
    'Warming Up': '预热中',
    listenerConfiguration: '监控配置',
    senderConfiguration: '发送与自动化配置',
    activeListenerAccounts: '当前监控号',
    activeSenderAccounts: '当前发送号',
    outreachAutomation: '自动外联与跟进',
    enableAutoReply: '启用自动回复',
    autoReplyHint: "当潜在客户状态变为“已回复”时，自动发送一条消息以确认。",
    autoReplyMessage: '自动回复消息',
    autoReplyEditHint: '编辑消息内容，点击保存以更新',
    saveAutoReply: '保存',
    settingsSaved: '设置已保存！',
    saveSettings: '保存设置',
    settingsAutoSaveHint: '更改设置时会自动保存，也可以手动点击保存',
    sendingDelays: '随机发送延迟',
    delayRangeHint: "在发送第一条消息前，随机等待一段时间。",
    min: '最小 (秒)',
    max: '最大 (秒)',
    noActiveListeners: '没有可用的监控号。请为在线账户分配“监控号”角色。',
    noActiveSenders: '没有可用的发送号。请为在线账户分配“发送号”角色。',
    sendingStrategy: '发送策略',
    sendImmediately: '立即发送',
    sendWithinTimeWindow: '在时间窗口内发送',
    timeWindowHint: '仅在这些本地时间之间发送消息。',
    from: '从',
    to: '到',
    smartSending: '智能发送',
    enableSmartSending: '启用智能发送',
    smartSendingHint: '仅当潜在客户在线时发送消息。如果离线则将消息加入队列。',
    attachImage: '附加图片',
    attachFile: '附加文件',
    checkStatus: '检查状态',
    'Proxy Error': '代理错误',
    selected: '已选择',
    bulkActions: '批量操作',
    assignRole: '分配角色',
    assignGroup: '分配分组',
    enterGroupName: '输入新分组名称:',
    deleteSelected: '删除所选',
    keywordSets: '关键词集',
    newKeywordSet: '新关键词集名称',
    assignKeywordSets: '分配关键词集',
    addToDNC: '添加到“请勿联系”列表',
    userOnDNC: '用户已在“请勿联系”列表',
    automationCampaigns: '自动化活动',
    campaigns: '活动列表',
    createCampaign: '创建新活动',
    campaignName: '活动名称',
    triggers: '触发器',
    campaignTriggerHint: '当潜在客户满足所有选定条件时，将触发此活动。',
    sourceGroups: '来源群组',
    messageTemplate: '消息模板',
    selectTemplate: '选择一个模板...',
    noCampaignsFound: '尚未创建任何活动。',
    campaign: '活动',
    groups: '群组',
    'Resting (Cooldown)': '休息中 (冷却)',
    allCampaigns: '所有活动',
    selectCampaign: '选择活动',
    campaignPerformance: '活动性能',
    replied: '已回复',
    campaignDetails: '活动详情',
    automationHub: '自动化中心',
    monitoringTargets: '第1步：监控目标',
    automationRules: '第2步：自动化规则',
    globalSendingConfig: '全局发送配置',
    accountStatus: '账户状态',
    addKeywordPlaceholder: '輸入關鍵詞或短語（例如：bitcoin, 付款）',
    regexTooltip: '正則表達式：使用模式匹配而非精確文字。例如：bitcoin|BTC 可匹配 "bitcoin" 或 "BTC"',
    regexExamples: '正則示例',
    regexExample1: 'bitcoin|BTC - 匹配 bitcoin 或 BTC',
    regexExample2: 'pay.*ment - 匹配 payment, payments 等',
    regexExample3: '\\d+.*USD - 匹配數字後跟 USD',
    addKeywordButton: '添加',
    keywordAdded: '關鍵詞已添加',
    keywordAddFailed: '添加關鍵詞失敗',
    invalidRegex: '正則表達式語法錯誤',
    selectKeywordSetFirst: '請先點擊關鍵詞集以選擇',
    keywordEmpty: '關鍵詞不能為空',
    testKeyword: '測試',
    testKeywordPlaceholder: '輸入測試文本...',
    keywordMatches: '匹配',
    keywordNoMatch: '不匹配',
  }
};

@Injectable({ providedIn: 'root' })
export class TranslationService {
  language = signal<Language>('zh'); // 默认使用中文
  
  private dictionary = signal(translations);

  translate(key: string): string {
    const lang = this.language();
    return this.dictionary()[lang][key] || key;
  }

  setLanguage(lang: Language) {
    this.language.set(lang);
  }
}
