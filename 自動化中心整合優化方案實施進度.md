# ğŸš€ è‡ªå‹•åŒ–ä¸­å¿ƒæ•´åˆå„ªåŒ–æ–¹æ¡ˆ - å¯¦æ–½é€²åº¦

## ğŸ“‹ æ¦‚è¿°

æœ¬æ¬¡å„ªåŒ–è§£æ±ºäº†ä»¥ä¸‹å•é¡Œï¼š
1. âœ… è³‡æ–™åº«è¼‰å…¥å•é¡Œ - å‰µå»ºçµ±ä¸€è¯ç¹«äººè¡¨
2. âœ… æˆå“¡è³‡æ–™åº«åˆ†é›¢ - æ•´åˆ extracted_members å’Œ discovered_resources
3. âœ… åŠŸèƒ½åˆ†æ•£ - ç°¡åŒ–å´é‚Šæ¬„ï¼Œå‰µå»ºè³‡æºä¸­å¿ƒæ•´åˆé é¢

---

## âœ… Phase 1ï¼šæ•¸æ“šå±¤æ•´åˆ (å·²å®Œæˆ)

### 1.1 å‰µå»ºçµ±ä¸€è¯ç¹«äººè¡¨çµæ§‹

**æ–‡ä»¶**: `backend/unified_contacts.py`

**åŠŸèƒ½**:
- å‰µå»º `unified_contacts` è¡¨
- æ•´åˆ `extracted_members`ã€`discovered_resources` æ•¸æ“š
- æä¾›çµ±ä¸€çš„æŸ¥è©¢ã€ç¯©é¸ã€æ¨™ç±¤ç®¡ç†æ¥å£

**è¡¨çµæ§‹**:
```sql
CREATE TABLE unified_contacts (
    id INTEGER PRIMARY KEY,
    telegram_id TEXT UNIQUE NOT NULL,
    username TEXT,
    display_name TEXT,
    contact_type TEXT,          -- user/group/channel
    source_type TEXT,           -- member/resource/manual/import
    status TEXT,                -- new/contacted/interested/converted/lost
    tags TEXT,                  -- JSON array
    ai_score REAL,
    activity_score REAL,
    ...
)
```

### 1.2 æ·»åŠ  IPC å‘½ä»¤è™•ç†

**æ–‡ä»¶**: `backend/main.py`

**æ–°å¢å‘½ä»¤**:
- `unified-contacts:sync` - åŒæ­¥æ‰€æœ‰ä¾†æºæ•¸æ“š
- `unified-contacts:get` - ç²å–è¯ç¹«äººåˆ—è¡¨
- `unified-contacts:stats` - ç²å–çµ±è¨ˆæ•¸æ“š
- `unified-contacts:update` - æ›´æ–°å–®å€‹è¯ç¹«äºº
- `unified-contacts:add-tags` - æ‰¹é‡æ·»åŠ æ¨™ç±¤
- `unified-contacts:update-status` - æ‰¹é‡æ›´æ–°ç‹€æ…‹
- `unified-contacts:delete` - æ‰¹é‡åˆªé™¤

### 1.3 å‰µå»ºå‰ç«¯æœå‹™

**æ–‡ä»¶**: `src/services/unified-contacts.service.ts`

**åŠŸèƒ½**:
- çµ±ä¸€è¯ç¹«äººç‹€æ…‹ç®¡ç†
- IPC äº‹ä»¶ç›£è¯
- ç¯©é¸ã€æœç´¢ã€åˆ†é 
- æ‰¹é‡æ“ä½œ

---

## âœ… Phase 2ï¼šé é¢æ•´åˆ (å·²å®Œæˆ)

### 2.1 å‰µå»ºã€Œè³‡æºä¸­å¿ƒã€æ•´åˆé é¢

**æ–‡ä»¶**: `src/manual-mode/resource-center.component.ts`

**åŠŸèƒ½**:
- ğŸ“Š çµ±è¨ˆå¡ç‰‡ï¼ˆç¸½æ•¸ã€æˆå“¡ã€ç¾¤çµ„ã€é »é“ã€æœ¬é€±æ–°å¢ï¼‰
- ğŸ” ç¯©é¸å’Œæœç´¢ï¼ˆé¡å‹ã€ç‹€æ…‹ã€æ¨™ç±¤ã€é—œéµè©ï¼‰
- ğŸ“‹ è¡¨æ ¼åˆ—è¡¨å±•ç¤º
- âœ… æ‰¹é‡æ“ä½œï¼ˆæ¨™è¨˜ã€æ›´æ–°ç‹€æ…‹ã€ç™¼é€ã€åˆªé™¤ï¼‰
- ğŸ”„ æ•¸æ“šåŒæ­¥ï¼ˆå¾å„ä¾†æºæ•´åˆï¼‰

### 2.2 ç°¡åŒ–å´é‚Šæ¬„çµæ§‹

**ä¿®æ”¹**: `src/app.component.html`

**å„ªåŒ–å¾Œçš„å´é‚Šæ¬„çµæ§‹**:
```
ğŸ  å„€è¡¨æ¿
â”œâ”€â”€ ğŸ”§ æ‰‹å‹•æ“ä½œ
â”‚   â”œâ”€â”€ ğŸ“± å¸³è™Ÿç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“¦ è³‡æºä¸­å¿ƒ (æ•´åˆç‰ˆ) â† æ–°å¢
â”‚   â”œâ”€â”€ ğŸ“¤ ç™¼é€æ§åˆ¶å°
â”‚   â””â”€â”€ âš™ï¸ ç›£æ§è¦å‰‡
â”œâ”€â”€ ğŸ¤– AI æ™ºèƒ½
â”‚   â”œâ”€â”€ AI åœ˜éšŠéŠ·å”®
â”‚   â””â”€â”€ AI ç‡ŸéŠ·åŠ©æ‰‹
â”œâ”€â”€ ğŸ“Š æ•¸æ“šåˆ†æ
â”‚   â”œâ”€â”€ æ™ºèƒ½åˆ†æ
â”‚   â””â”€â”€ å®¢æˆ¶åŸ¹è‚²
â””â”€â”€ âš™ï¸ è¨­ç½®
```

---

## ğŸ“ æ–°å¢/ä¿®æ”¹æ–‡ä»¶æ¸…å–®

| æ–‡ä»¶ | æ“ä½œ | èªªæ˜ |
|------|------|------|
| `backend/unified_contacts.py` | æ–°å¢ | çµ±ä¸€è¯ç¹«äººç®¡ç†å™¨ |
| `backend/main.py` | ä¿®æ”¹ | æ·»åŠ  IPC å‘½ä»¤è™•ç† |
| `src/services/unified-contacts.service.ts` | æ–°å¢ | å‰ç«¯æœå‹™ |
| `src/manual-mode/resource-center.component.ts` | æ–°å¢ | è³‡æºä¸­å¿ƒçµ„ä»¶ |
| `src/app.component.ts` | ä¿®æ”¹ | æ·»åŠ çµ„ä»¶å°å…¥å’Œäº‹ä»¶è™•ç† |
| `src/app.component.html` | ä¿®æ”¹ | ç°¡åŒ–å´é‚Šæ¬„ + æ·»åŠ è¦–åœ– |

---

## âœ… Phase 3ï¼šAI æ¨¡å¼å®Œå–„ (å·²å®Œæˆ)

### 3.1 å„ªåŒ– AI ç‡ŸéŠ·åŠ©æ‰‹

**ä¿®æ”¹**: `src/ai-assistant/ai-marketing-assistant.component.ts`

**æ–°å¢åŠŸèƒ½**:
- æ·»åŠ ã€ŒğŸ¤– äº¤çµ¦ AI åœ˜éšŠã€æŒ‰éˆ•
- æ·»åŠ  `handoverToAITeamEvent` è¼¸å‡ºäº‹ä»¶
- æ·»åŠ  AI åœ˜éšŠå„ªå‹¢æç¤ºå€

### 3.2 å®Œå–„ AI åœ˜éšŠéŠ·å”®

**ä¿®æ”¹**: `src/multi-role/ai-team-hub.component.ts`

**æ–°å¢åŠŸèƒ½**:
- æ·»åŠ  `incomingStrategy` è¼¸å…¥å±¬æ€§
- è‡ªå‹•æ¥æ”¶ AI ç‡ŸéŠ·åŠ©æ‰‹ç­–ç•¥
- è‡ªå‹•ç”Ÿæˆç›®æ¨™æè¿°ä¸¦å¡«å…¥
- é¡¯ç¤ºã€Œå·²æ¥æ”¶ç­–ç•¥ã€æç¤ºæ¢
- æ·»åŠ æ¸…é™¤ç­–ç•¥åŠŸèƒ½

### 3.3 å¯¦ç¾ç„¡ç¸«éŠœæ¥

**ä¿®æ”¹**: 
- `src/app.component.ts` - æ·»åŠ  `aiTeamIncomingStrategy` ä¿¡è™Ÿå’Œ `handleAIStrategyHandover` æ–¹æ³•
- `src/app.component.html` - é€£æ¥äº‹ä»¶è™•ç†

**å·¥ä½œæµç¨‹**:
```
[AI ç‡ŸéŠ·åŠ©æ‰‹] 
     â”‚ 
     â”‚ é»æ“Šã€Œäº¤çµ¦ AI åœ˜éšŠã€
     â–¼
[handleAIStrategyHandover()]
     â”‚
     â”‚ ä¿å­˜ç­–ç•¥åˆ° aiTeamIncomingStrategy
     â”‚ åˆ‡æ›è¦–åœ–åˆ° ai-team
     â–¼
[AI åœ˜éšŠéŠ·å”®]
     â”‚
     â”‚ effect ç›£è½åˆ° incomingStrategy è®ŠåŒ–
     â”‚ èª¿ç”¨ handleIncomingStrategy()
     â–¼
[è‡ªå‹•å¡«å…¥ç›®æ¨™ä¸¦é–‹å§‹ç­–åŠƒ]
```

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### é€²å…¥è³‡æºä¸­å¿ƒ

1. é»æ“Šå´é‚Šæ¬„ã€ŒğŸ“¦ è³‡æºä¸­å¿ƒã€
2. é»æ“Šã€ŒåŒæ­¥æ•¸æ“šã€æ•´åˆæ‰€æœ‰ä¾†æºæ•¸æ“š
3. ä½¿ç”¨ Tab åˆ‡æ›ï¼šå…¨éƒ¨/æˆå“¡/ç¾¤çµ„/é »é“
4. ä½¿ç”¨ç¯©é¸å’Œæœç´¢å®šä½ç›®æ¨™è¯ç¹«äºº

### æ‰¹é‡æ“ä½œ

1. å‹¾é¸ç›®æ¨™è¯ç¹«äºº
2. ä½¿ç”¨é ‚éƒ¨æ‰¹é‡æ“ä½œæŒ‰éˆ•ï¼š
   - æ‰¹é‡æ¨™è¨˜ - æ·»åŠ æ¨™ç±¤
   - æ›´æ–°ç‹€æ…‹ - ä¿®æ”¹è·Ÿé€²ç‹€æ…‹
   - æ‰¹é‡ç™¼é€ - ç™¼é€æ¶ˆæ¯
   - åŠ å…¥ AI éŠ·å”® - äº¤çµ¦ AI è™•ç†
   - åˆªé™¤ - æ‰¹é‡åˆªé™¤

### æ•¸æ“šåŒæ­¥

é»æ“Šã€ŒåŒæ­¥æ•¸æ“šã€æœƒï¼š
1. å¾ `extracted_members` è¡¨è®€å–ç¾¤çµ„æˆå“¡
2. å¾ `discovered_resources` è¡¨è®€å–è³‡æºç™¼ç¾æ•¸æ“š
3. åˆä½µåˆ° `unified_contacts` è¡¨
4. æ ¹æ“š `telegram_id` è‡ªå‹•å»é‡

---

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯ (Angular)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ResourceCenterComponent â†â†’ UnifiedContactsService              â”‚
â”‚         â†“                         â†“                              â”‚
â”‚    ç”¨æˆ¶ç•Œé¢                    IPC é€šä¿¡                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“ IPC
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å¾Œç«¯ (Python)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CommandProcessor â†â†’ UnifiedContactsManager                     â”‚
â”‚         â†“                         â†“                              â”‚
â”‚    IPC å‘½ä»¤è™•ç†              æ•¸æ“šåº«æ“ä½œ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“ SQL
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ•¸æ“šåº« (SQLite)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  unified_contacts â† extracted_members + discovered_resources    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ç·¨è­¯ç‹€æ…‹

âœ… ç·¨è­¯æˆåŠŸï¼Œç„¡éŒ¯èª¤

---

## ğŸ‰ å¯¦æ–½å®Œæˆç¸½çµ

### å®Œæˆçš„ Phase

| Phase | ç‹€æ…‹ | èªªæ˜ |
|-------|------|------|
| Phase 1ï¼šæ•¸æ“šå±¤æ•´åˆ | âœ… å®Œæˆ | unified_contacts è¡¨ã€å¾Œç«¯æœå‹™ã€IPC å‘½ä»¤ |
| Phase 2ï¼šé é¢æ•´åˆ | âœ… å®Œæˆ | è³‡æºä¸­å¿ƒçµ„ä»¶ã€ç°¡åŒ–å´é‚Šæ¬„ |
| Phase 3ï¼šAI æ¨¡å¼å®Œå–„ | âœ… å®Œæˆ | AI ç‡ŸéŠ·â†’AI éŠ·å”®ç„¡ç¸«éŠœæ¥ |

### æ–°å¢/ä¿®æ”¹çš„æ‰€æœ‰æ–‡ä»¶

| æ–‡ä»¶ | é¡å‹ | èªªæ˜ |
|------|------|------|
| `backend/unified_contacts.py` | æ–°å¢ | çµ±ä¸€è¯ç¹«äººç®¡ç†å™¨ |
| `backend/main.py` | ä¿®æ”¹ | IPC å‘½ä»¤è™•ç† |
| `src/services/unified-contacts.service.ts` | æ–°å¢ | å‰ç«¯æœå‹™ |
| `src/manual-mode/resource-center.component.ts` | æ–°å¢ | è³‡æºä¸­å¿ƒçµ„ä»¶ |
| `src/ai-assistant/ai-marketing-assistant.component.ts` | ä¿®æ”¹ | æ·»åŠ äº¤çµ¦ AI åœ˜éšŠåŠŸèƒ½ |
| `src/multi-role/ai-team-hub.component.ts` | ä¿®æ”¹ | æ¥æ”¶ç­–ç•¥åŠŸèƒ½ |
| `src/app.component.ts` | ä¿®æ”¹ | View é¡å‹ã€çµ„ä»¶å°å…¥ã€äº‹ä»¶è™•ç† |
| `src/app.component.html` | ä¿®æ”¹ | ç°¡åŒ–å´é‚Šæ¬„ã€æ·»åŠ è¦–åœ–ã€é€£æ¥äº‹ä»¶ |

---

## âœ… ç³»çµ±å„ªåŒ–ä¿®å¾© (å·²å®Œæˆ)

### ğŸ”§ ä¿®å¾©æ¸…å–®

| å„ªå…ˆç´š | ä»»å‹™ | ç‹€æ…‹ |
|--------|------|------|
| P0 | ä¿®å¾©ç­–ç•¥å‚³éå¾Œæ¸…é™¤é‚è¼¯ | âœ… å®Œæˆ |
| P0 | å®Œå–„ AI åœ˜éšŠç­–ç•¥æ¥æ”¶ï¼Œä½¿ç”¨å®Œæ•´æ•¸æ“š | âœ… å®Œæˆ |
| P1 | é€£æ¥ AI åœ˜éšŠåˆ°å¾Œç«¯æ¶ˆæ¯ç™¼é€ | âœ… å®Œæˆ |
| P1 | é€²ä¸€æ­¥ç°¡åŒ–å´é‚Šæ¬„ | âœ… å®Œæˆ |
| P2 | å¯¦ç¾è³‡æºä¸­å¿ƒæ‰¹é‡ç™¼é€ | âœ… å®Œæˆ |

### ä¸»è¦æ”¹é€²

#### 1. AI ç‡ŸéŠ· â†’ AI éŠ·å”® å®Œæ•´éŠœæ¥
- å‚³éå®Œæ•´ç­–ç•¥æ•¸æ“šï¼ˆé—œéµè©ã€æ¶ˆæ¯æ¨¡æ¿ï¼‰
- ä½¿ç”¨å¾Œè‡ªå‹•æ¸…é™¤å‚³å…¥ç­–ç•¥
- æ–°å¢ `startWithMarketingStrategy` æ–¹æ³•

#### 2. AI åœ˜éšŠå¾Œç«¯åŸ·è¡Œ
- æ–°å¢ `ai-team:start-execution` IPC å‘½ä»¤
- å¯¦ç¾å¾Œå°ç•°æ­¥åŸ·è¡Œä»»å‹™
- å¯¦æ™‚æ›´æ–°åŸ·è¡Œçµ±è¨ˆï¼ˆæ¶ˆæ¯æ•¸ã€å›è¦†æ•¸ã€éšæ®µï¼‰
- ä½¿ç”¨ç‡ŸéŠ·æ¨¡æ¿ç™¼é€æ¶ˆæ¯

#### 3. å´é‚Šæ¬„å„ªåŒ–
- ç§»é™¤å†—é¤˜å…¥å£ï¼ˆå»£å‘Šç™¼é€ã€ç”¨æˆ¶è¿½è¹¤ã€ç‡ŸéŠ·æ´»å‹•ï¼‰
- æ–°å¢ã€Œé€²éšè¨­ç½®ã€åˆ†çµ„
- çµæ§‹æ›´æ¸…æ™°

#### 4. è³‡æºä¸­å¿ƒå¢å¼·
- æ‰¹é‡ç™¼é€åŠŸèƒ½é€£æ¥åˆ°çˆ¶çµ„ä»¶
- ç™¼é€åˆ° AI éŠ·å”®éšŠåˆ—
- æ–°å¢äº‹ä»¶è¼¸å‡º

---

*æ–‡æª”æ›´æ–°æ™‚é–“ï¼š2026-01-19*
