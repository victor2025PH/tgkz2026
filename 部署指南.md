# TG-Matrix éƒ¨ç½²æŒ‡å—

## ğŸ“– ç›®å½•

1. [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
2. [å®‰è£…æ­¥éª¤](#å®‰è£…æ­¥éª¤)
3. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
4. [å¯åŠ¨åº”ç”¨](#å¯åŠ¨åº”ç”¨)
5. [ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²](#ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²)
6. [æ‰“åŒ…å‘å¸ƒ](#æ‰“åŒ…å‘å¸ƒ)
7. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
8. [ç»´æŠ¤æŒ‡å—](#ç»´æŠ¤æŒ‡å—)

---

## ç³»ç»Ÿè¦æ±‚

### æ“ä½œç³»ç»Ÿ

- **Windows 10/11** æˆ–æ›´é«˜ç‰ˆæœ¬
- **macOS 10.15** æˆ–æ›´é«˜ç‰ˆæœ¬
- **Linux** (Ubuntu 20.04+ / Debian 11+ / CentOS 8+)

### è½¯ä»¶ä¾èµ–

#### å¿…éœ€è½¯ä»¶

1. **Node.js** 18.0 æˆ–æ›´é«˜ç‰ˆæœ¬
   - ä¸‹è½½åœ°å€ï¼šhttps://nodejs.org/
   - éªŒè¯å®‰è£…ï¼š`node --version`

2. **Python** 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
   - ä¸‹è½½åœ°å€ï¼šhttps://www.python.org/
   - éªŒè¯å®‰è£…ï¼š`python --version` æˆ– `python3 --version`
   - **é‡è¦ï¼š** ç¡®ä¿ Python å·²æ·»åŠ åˆ°ç³»ç»Ÿ PATH

3. **npm**ï¼ˆé€šå¸¸éš Node.js ä¸€èµ·å®‰è£…ï¼‰
   - éªŒè¯å®‰è£…ï¼š`npm --version`

#### å¯é€‰è½¯ä»¶

- **Git**ï¼šç”¨äºç‰ˆæœ¬æ§åˆ¶ï¼ˆå¯é€‰ï¼‰
- **Visual Studio Code**ï¼šæ¨èç”¨äºå¼€å‘ï¼ˆå¯é€‰ï¼‰

### ç¡¬ä»¶è¦æ±‚

- **CPU**ï¼š2 æ ¸å¿ƒæˆ–ä»¥ä¸Š
- **å†…å­˜**ï¼š4GB RAM æˆ–ä»¥ä¸Šï¼ˆæ¨è 8GBï¼‰
- **ç£ç›˜ç©ºé—´**ï¼šè‡³å°‘ 500MB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**ï¼šç¨³å®šçš„äº’è”ç½‘è¿æ¥

---

## å®‰è£…æ­¥éª¤

### æ­¥éª¤ 1ï¼šè·å–é¡¹ç›®ä»£ç 

#### æ–¹æ³• 1ï¼šä» Git ä»“åº“å…‹éš†

```bash
git clone <repository-url>
cd tgkz2026
```

#### æ–¹æ³• 2ï¼šè§£å‹é¡¹ç›®æ–‡ä»¶

1. è§£å‹é¡¹ç›®å‹ç¼©åŒ…åˆ°ç›®æ ‡ç›®å½•
2. è¿›å…¥é¡¹ç›®ç›®å½•

### æ­¥éª¤ 2ï¼šå®‰è£… Node.js ä¾èµ–

åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
npm install
```

**é¢„æœŸè¾“å‡ºï¼š**
```
added 1234 packages in 2m
```

**å¦‚æœé‡åˆ°é”™è¯¯ï¼š**
- ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸
- å°è¯•ä½¿ç”¨å›½å†…é•œåƒï¼š`npm config set registry https://registry.npmmirror.com`
- æ¸…é™¤ç¼“å­˜ï¼š`npm cache clean --force`

### æ­¥éª¤ 3ï¼šå®‰è£… Python ä¾èµ–

åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
pip install -r backend/requirements.txt
```

**Windows ç”¨æˆ·ï¼š**
```powershell
pip install -r backend/requirements.txt
```

**Linux/macOS ç”¨æˆ·ï¼š**
```bash
pip3 install -r backend/requirements.txt
```

**é¢„æœŸè¾“å‡ºï¼š**
```
Successfully installed pyrogram-2.0.106 aiosqlite-0.21.0 ...
```

**å¦‚æœé‡åˆ°é”™è¯¯ï¼š**
- ç¡®ä¿ Python ç‰ˆæœ¬æ­£ç¡®ï¼ˆ3.8+ï¼‰
- å°è¯•ä½¿ç”¨ `pip3` è€Œä¸æ˜¯ `pip`
- å¦‚æœæƒé™ä¸è¶³ï¼Œä½¿ç”¨ `--user` å‚æ•°ï¼š`pip install --user -r backend/requirements.txt`

### æ­¥éª¤ 4ï¼šéªŒè¯å®‰è£…

#### éªŒè¯ Node.js ä¾èµ–

```bash
npm list --depth=0
```

åº”è¯¥çœ‹åˆ°æ‰€æœ‰ä¾èµ–åŒ…å·²å®‰è£…ã€‚

#### éªŒè¯ Python ä¾èµ–

```bash
python -c "import pyrogram; print('Pyrogram installed')"
```

æˆ–

```bash
python3 -c "import pyrogram; print('Pyrogram installed')"
```

### æ­¥éª¤ 5ï¼šé¦–æ¬¡å¯åŠ¨æµ‹è¯•

```bash
npm run start:build
```

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
1. Angular åº”ç”¨æ„å»ºæˆåŠŸ
2. Electron çª—å£æ‰“å¼€
3. åº”ç”¨ç•Œé¢æ­£å¸¸æ˜¾ç¤º
4. åç«¯æœåŠ¡å¯åŠ¨æˆåŠŸ

---

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¯é€‰ï¼Œç”¨äºè¦†ç›–é»˜è®¤é…ç½®ï¼‰ï¼š

```env
# Telegram API é…ç½®ï¼ˆå¯é€‰ï¼Œä¹Ÿå¯ä»¥åœ¨ç•Œé¢ä¸­é…ç½®ï¼‰
TELEGRAM_API_ID=your_api_id
TELEGRAM_API_HASH=your_api_hash

# æ•°æ®åº“é…ç½®ï¼ˆå¯é€‰ï¼‰
DATABASE_PATH=backend/data/tgmatrix.db

# æ—¥å¿—é…ç½®ï¼ˆå¯é€‰ï¼‰
LOG_LEVEL=INFO
```

### é…ç½®æ–‡ä»¶

ç³»ç»Ÿä½¿ç”¨ `backend/config.yaml` è¿›è¡Œé…ç½®ç®¡ç†ã€‚

#### é»˜è®¤é…ç½®ä½ç½®

é…ç½®æ–‡ä»¶ï¼š`backend/config.yaml`

å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œç³»ç»Ÿä¼šä½¿ç”¨é»˜è®¤é…ç½®ã€‚

#### é…ç½®é¡¹è¯´æ˜

```yaml
database:
  path: "backend/data/tgmatrix.db"
  backup:
    enabled: true
    interval_hours: 24
    max_backups: 7

telegram:
  api_id: ""  # ä»ç¯å¢ƒå˜é‡æˆ–ç•Œé¢é…ç½®
  api_hash: ""  # ä»ç¯å¢ƒå˜é‡æˆ–ç•Œé¢é…ç½®
  sessions_dir: "backend/sessions"

sending:
  default_daily_limit: 50
  default_health_score: 100
  min_delay: 30
  max_delay: 120

monitoring:
  message_check_interval: 5
  max_concurrent_accounts: 10

logging:
  level: "INFO"
  max_entries: 10000
  rotation:
    enabled: true
    max_size_mb: 100
    max_days: 30
```

#### ä¿®æ”¹é…ç½®

1. ç¼–è¾‘ `backend/config.yaml` æ–‡ä»¶
2. ä¿å­˜æ–‡ä»¶
3. é‡å¯åº”ç”¨ä½¿é…ç½®ç”Ÿæ•ˆ

**æ³¨æ„ï¼š** æŸäº›é…ç½®é¡¹ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–ã€‚

---

## å¯åŠ¨åº”ç”¨

### å¼€å‘æ¨¡å¼

#### æ–¹æ³• 1ï¼šæ„å»ºå¹¶å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
npm run start:build
```

è¿™ä¼šï¼š
1. è‡ªåŠ¨æ„å»º Angular åº”ç”¨
2. å¯åŠ¨ Electron åº”ç”¨
3. å¯åŠ¨ Python åç«¯æœåŠ¡

#### æ–¹æ³• 2ï¼šä»…å¯åŠ¨ï¼ˆå¦‚æœå·²æ„å»ºï¼‰

```bash
npm start
```

**é€‚ç”¨åœºæ™¯ï¼š** ä»£ç æœªä¿®æ”¹ï¼Œåªéœ€é‡å¯åº”ç”¨

### ç”Ÿäº§æ¨¡å¼

#### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

æ„å»ºåçš„æ–‡ä»¶åœ¨ `dist/` ç›®å½•ã€‚

#### å¯åŠ¨ç”Ÿäº§ç‰ˆæœ¬

```bash
npm start
```

### åœæ­¢åº”ç”¨

- **æ–¹æ³• 1**ï¼šå…³é—­ Electron çª—å£
- **æ–¹æ³• 2**ï¼šåœ¨ç»ˆç«¯æŒ‰ `Ctrl + C`ï¼ˆWindows/Linuxï¼‰æˆ– `Cmd + C`ï¼ˆmacOSï¼‰

---

## ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### Windows éƒ¨ç½²

#### 1. å‡†å¤‡éƒ¨ç½²ç›®å½•

åˆ›å»ºéƒ¨ç½²ç›®å½•ç»“æ„ï¼š

```
C:\TG-Matrix\
â”œâ”€â”€ app\              # åº”ç”¨æ–‡ä»¶
â”‚   â”œâ”€â”€ backend\
â”‚   â”œâ”€â”€ dist\
â”‚   â”œâ”€â”€ node_modules\
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ data\             # æ•°æ®ç›®å½•ï¼ˆå¯é€‰ï¼Œç”¨äºæ•°æ®åˆ†ç¦»ï¼‰
â””â”€â”€ logs\             # æ—¥å¿—ç›®å½•ï¼ˆå¯é€‰ï¼‰
```

#### 2. å¤åˆ¶æ–‡ä»¶

```powershell
# å¤åˆ¶é¡¹ç›®æ–‡ä»¶
xcopy /E /I /Y tgkz2026 C:\TG-Matrix\app

# åˆ›å»ºæ•°æ®ç›®å½•ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
mkdir C:\TG-Matrix\data
```

#### 3. å®‰è£…ä¾èµ–

```powershell
cd C:\TG-Matrix\app
npm install --production
pip install -r backend/requirements.txt
```

#### 4. é…ç½®å¯åŠ¨è„šæœ¬

åˆ›å»º `start.bat`ï¼š

```batch
@echo off
cd /d C:\TG-Matrix\app
npm start
pause
```

#### 5. åˆ›å»ºå¿«æ·æ–¹å¼

1. å³é”® `start.bat` â†’ åˆ›å»ºå¿«æ·æ–¹å¼
2. å°†å¿«æ·æ–¹å¼æ”¾åˆ°æ¡Œé¢æˆ–å¼€å§‹èœå•

### Linux éƒ¨ç½²

#### 1. å‡†å¤‡éƒ¨ç½²ç›®å½•

```bash
sudo mkdir -p /opt/tg-matrix
sudo chown $USER:$USER /opt/tg-matrix
```

#### 2. å¤åˆ¶æ–‡ä»¶

```bash
cp -r tgkz2026/* /opt/tg-matrix/
```

#### 3. å®‰è£…ä¾èµ–

```bash
cd /opt/tg-matrix
npm install --production
pip3 install -r backend/requirements.txt
```

#### 4. åˆ›å»ºç³»ç»ŸæœåŠ¡ï¼ˆå¯é€‰ï¼‰

åˆ›å»º `/etc/systemd/system/tg-matrix.service`ï¼š

```ini
[Unit]
Description=TG-Matrix Application
After=network.target

[Service]
Type=simple
User=your-user
WorkingDirectory=/opt/tg-matrix
ExecStart=/usr/bin/npm start
Restart=on-failure
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯ç”¨æœåŠ¡ï¼š

```bash
sudo systemctl enable tg-matrix
sudo systemctl start tg-matrix
```

#### 5. åˆ›å»ºå¯åŠ¨è„šæœ¬

åˆ›å»º `/opt/tg-matrix/start.sh`ï¼š

```bash
#!/bin/bash
cd /opt/tg-matrix
npm start
```

è®¾ç½®æ‰§è¡Œæƒé™ï¼š

```bash
chmod +x /opt/tg-matrix/start.sh
```

### macOS éƒ¨ç½²

#### 1. å‡†å¤‡éƒ¨ç½²ç›®å½•

```bash
mkdir -p ~/Applications/TG-Matrix
```

#### 2. å¤åˆ¶æ–‡ä»¶

```bash
cp -r tgkz2026/* ~/Applications/TG-Matrix/
```

#### 3. å®‰è£…ä¾èµ–

```bash
cd ~/Applications/TG-Matrix
npm install --production
pip3 install -r backend/requirements.txt
```

#### 4. åˆ›å»ºå¯åŠ¨åº”ç”¨ï¼ˆå¯é€‰ï¼‰

ä½¿ç”¨ Automator åˆ›å»ºåº”ç”¨ç¨‹åºï¼š

1. æ‰“å¼€ Automator
2. é€‰æ‹©"åº”ç”¨ç¨‹åº"
3. æ·»åŠ "è¿è¡Œ Shell è„šæœ¬"æ“ä½œ
4. è¾“å…¥ï¼š

```bash
cd ~/Applications/TG-Matrix
npm start
```

5. ä¿å­˜ä¸º `TG-Matrix.app`

---

## æ‰“åŒ…å‘å¸ƒ

### ä½¿ç”¨ Electron Builder æ‰“åŒ…

#### 1. å®‰è£… Electron Builder

```bash
npm install --save-dev electron-builder
```

#### 2. é…ç½® package.json

åœ¨ `package.json` ä¸­æ·»åŠ ï¼š

```json
{
  "build": {
    "appId": "com.tgmatrix.app",
    "productName": "TG-Matrix",
    "directories": {
      "output": "release"
    },
    "files": [
      "dist/**/*",
      "backend/**/*",
      "node_modules/**/*",
      "package.json",
      "electron.js",
      "preload.js"
    ],
    "win": {
      "target": "nsis",
      "icon": "assets/icon.ico"
    },
    "mac": {
      "target": "dmg",
      "icon": "assets/icon.icns"
    },
    "linux": {
      "target": "AppImage",
      "icon": "assets/icon.png"
    }
  }
}
```

#### 3. æ·»åŠ æ‰“åŒ…è„šæœ¬

åœ¨ `package.json` çš„ `scripts` ä¸­æ·»åŠ ï¼š

```json
{
  "scripts": {
    "build:win": "electron-builder --win",
    "build:mac": "electron-builder --mac",
    "build:linux": "electron-builder --linux",
    "build:all": "electron-builder --win --mac --linux"
  }
}
```

#### 4. æ‰“åŒ…åº”ç”¨

**Windowsï¼š**
```bash
npm run build:win
```

**macOSï¼š**
```bash
npm run build:mac
```

**Linuxï¼š**
```bash
npm run build:linux
```

**æ‰€æœ‰å¹³å°ï¼š**
```bash
npm run build:all
```

æ‰“åŒ…åçš„æ–‡ä»¶åœ¨ `release/` ç›®å½•ã€‚

### æ‰“åŒ… Python åç«¯ï¼ˆå¯é€‰ï¼‰

#### ä½¿ç”¨ PyInstaller

1. å®‰è£… PyInstallerï¼š

```bash
pip install pyinstaller
```

2. åˆ›å»ºæ‰“åŒ…è„šæœ¬ `build_backend.py`ï¼š

```python
import PyInstaller.__main__

PyInstaller.__main__.run([
    'backend/main.py',
    '--onefile',
    '--name=tg-matrix-backend',
    '--hidden-import=pyrogram',
    '--hidden-import=aiosqlite',
    '--collect-all=pyrogram',
    '--distpath=release/backend'
])
```

3. è¿è¡Œæ‰“åŒ…ï¼š

```bash
python build_backend.py
```

æ‰“åŒ…åçš„å¯æ‰§è¡Œæ–‡ä»¶åœ¨ `release/backend/` ç›®å½•ã€‚

---

## æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šPython æœªæ‰¾åˆ°

**é”™è¯¯ä¿¡æ¯ï¼š**
```
Python executable not found
```

**è§£å†³æ–¹æ³•ï¼š**

**Windowsï¼š**
1. ç¡®ä¿ Python å·²å®‰è£…
2. å°† Python æ·»åŠ åˆ°ç³»ç»Ÿ PATHï¼š
   - æ‰“å¼€"ç³»ç»Ÿå±æ€§" â†’ "ç¯å¢ƒå˜é‡"
   - åœ¨ PATH ä¸­æ·»åŠ  Python å®‰è£…ç›®å½•
3. é‡å¯ç»ˆç«¯

**Linux/macOSï¼š**
1. ç¡®ä¿ Python 3 å·²å®‰è£…ï¼š`python3 --version`
2. å¦‚æœä½¿ç”¨ `python3`ï¼Œä¿®æ”¹ `electron.js` ä¸­çš„ Python è·¯å¾„

### é—®é¢˜ 2ï¼šæ¨¡å—æœªæ‰¾åˆ°

**é”™è¯¯ä¿¡æ¯ï¼š**
```
ModuleNotFoundError: No module named 'pyrogram'
```

**è§£å†³æ–¹æ³•ï¼š**
```bash
pip install -r backend/requirements.txt
```

å¦‚æœä½¿ç”¨ Python 3ï¼Œä½¿ç”¨ï¼š
```bash
pip3 install -r backend/requirements.txt
```

### é—®é¢˜ 3ï¼šæ•°æ®åº“é”å®šé”™è¯¯

**é”™è¯¯ä¿¡æ¯ï¼š**
```
database is locked
```

**è§£å†³æ–¹æ³•ï¼š**
1. ç¡®ä¿æ²¡æœ‰å¤šä¸ªåº”ç”¨å®ä¾‹åŒæ—¶è¿è¡Œ
2. æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–è¿›ç¨‹è®¿é—®æ•°æ®åº“
3. é‡å¯åº”ç”¨

### é—®é¢˜ 4ï¼šç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯ï¼š**
```
Port already in use
```

**è§£å†³æ–¹æ³•ï¼š**
1. æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
2. ç»“æŸè¯¥è¿›ç¨‹
3. æˆ–ä¿®æ”¹åº”ç”¨é…ç½®ä½¿ç”¨å…¶ä»–ç«¯å£

### é—®é¢˜ 5ï¼šæ„å»ºå¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š**
```
Angular build failed
```

**è§£å†³æ–¹æ³•ï¼š**
1. æ¸…é™¤ç¼“å­˜ï¼š`npm cache clean --force`
2. åˆ é™¤ `node_modules` å’Œ `package-lock.json`
3. é‡æ–°å®‰è£…ï¼š`npm install`
4. é‡æ–°æ„å»ºï¼š`npm run build`

### é—®é¢˜ 6ï¼šElectron çª—å£ç™½å±

**è§£å†³æ–¹æ³•ï¼š**
1. ç¡®ä¿å·²è¿è¡Œ `npm run start:build`
2. æ£€æŸ¥ `dist/` ç›®å½•æ˜¯å¦å­˜åœ¨
3. æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
4. æ£€æŸ¥ä¸»è¿›ç¨‹æ§åˆ¶å°ï¼ˆç»ˆç«¯ï¼‰çš„é”™è¯¯ä¿¡æ¯

### é—®é¢˜ 7ï¼šåç«¯é€šä¿¡å¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š**
```
Backend communication failed
```

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥ Python è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼ˆåœ¨ `electron.js` ä¸­ï¼‰
2. ç¡®ä¿ Python ä¾èµ–å·²å®‰è£…
3. æ£€æŸ¥åç«¯æ—¥å¿—ï¼š`backend/logs/`
4. æŸ¥çœ‹ä¸»è¿›ç¨‹æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯

---

## ç»´æŠ¤æŒ‡å—

### æ—¥å¸¸ç»´æŠ¤

#### 1. æ•°æ®åº“å¤‡ä»½

ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“å¤‡ä»½ï¼Œä½†å»ºè®®ï¼š

- **å®šæœŸæ‰‹åŠ¨å¤‡ä»½**ï¼šé€šè¿‡ç•Œé¢åˆ›å»ºå¤‡ä»½
- **å¤‡ä»½ä½ç½®**ï¼š`backend/data/backups/`
- **å¤‡ä»½é¢‘ç‡**ï¼šå»ºè®®æ¯å¤©å¤‡ä»½ä¸€æ¬¡

#### 2. æ—¥å¿—ç®¡ç†

- **æ—¥å¿—ä½ç½®**ï¼š`backend/logs/`
- **æ—¥å¿—è½®è½¬**ï¼šç³»ç»Ÿè‡ªåŠ¨è½®è½¬ï¼Œä¿ç•™ 30 å¤©
- **æ¸…ç†æ—§æ—¥å¿—**ï¼šå®šæœŸæ¸…ç†è¶…è¿‡ 30 å¤©çš„æ—¥å¿—æ–‡ä»¶

#### 3. ä¼šè¯æ–‡ä»¶ç®¡ç†

- **ä¼šè¯æ–‡ä»¶ä½ç½®**ï¼š`backend/sessions/`
- **å¤‡ä»½ä¼šè¯æ–‡ä»¶**ï¼šå®šæœŸå¤‡ä»½ `.session` æ–‡ä»¶
- **å®‰å…¨å­˜å‚¨**ï¼šä¼šè¯æ–‡ä»¶åŒ…å«è®¤è¯ä¿¡æ¯ï¼Œè¯·å¦¥å–„ä¿ç®¡

### æ€§èƒ½ä¼˜åŒ–

#### 1. æ•°æ®åº“ä¼˜åŒ–

- å®šæœŸæ¸…ç†æ—§æ•°æ®
- ä½¿ç”¨ `VACUUM` å‘½ä»¤ä¼˜åŒ–æ•°æ®åº“ï¼š

```bash
sqlite3 backend/data/tgmatrix.db "VACUUM;"
```

#### 2. æ—¥å¿—ä¼˜åŒ–

- å®šæœŸæ¸…ç†æ—§æ—¥å¿—
- è°ƒæ•´æ—¥å¿—çº§åˆ«ï¼ˆç”Ÿäº§ç¯å¢ƒä½¿ç”¨ INFO æˆ– WARNINGï¼‰

#### 3. ç›‘æ§ä¼˜åŒ–

- æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´ç›‘æ§é—´éš”
- é™åˆ¶å¹¶å‘è´¦æˆ·æ•°

### å®‰å…¨å»ºè®®

1. **ä¿æŠ¤ API å‡­è¯**ï¼š
   - API ID å’Œ API Hash å·²åŠ å¯†å­˜å‚¨
   - ä¸è¦åˆ†äº«é…ç½®æ–‡ä»¶

2. **ä¿æŠ¤ä¼šè¯æ–‡ä»¶**ï¼š
   - ä¼šè¯æ–‡ä»¶åŒ…å«è´¦æˆ·è®¤è¯ä¿¡æ¯
   - å®šæœŸå¤‡ä»½å¹¶å®‰å…¨å­˜å‚¨

3. **æ•°æ®åº“å®‰å…¨**ï¼š
   - å®šæœŸå¤‡ä»½æ•°æ®åº“
   - é™åˆ¶æ•°æ®åº“æ–‡ä»¶è®¿é—®æƒé™

4. **ç½‘ç»œå®‰å…¨**ï¼š
   - ä½¿ç”¨ä»£ç†ä¿æŠ¤è´¦æˆ·
   - é¿å…åœ¨å…¬å…±ç½‘ç»œä½¿ç”¨

### æ›´æ–°å‡çº§

#### 1. å¤‡ä»½æ•°æ®

å‡çº§å‰ï¼ŒåŠ¡å¿…ï¼š

1. åˆ›å»ºæ•°æ®åº“å¤‡ä»½
2. å¤‡ä»½ä¼šè¯æ–‡ä»¶
3. å¤‡ä»½é…ç½®æ–‡ä»¶

#### 2. æ›´æ–°ä»£ç 

```bash
# å¦‚æœä½¿ç”¨ Git
git pull origin main

# æˆ–ä¸‹è½½æ–°ç‰ˆæœ¬å¹¶æ›¿æ¢æ–‡ä»¶
```

#### 3. æ›´æ–°ä¾èµ–

```bash
# æ›´æ–° Node.js ä¾èµ–
npm install

# æ›´æ–° Python ä¾èµ–
pip install -r backend/requirements.txt --upgrade
```

#### 4. è¿è¡Œè¿ç§»

ç³»ç»Ÿä¼šè‡ªåŠ¨è¿è¡Œæ•°æ®åº“è¿ç§»ã€‚

#### 5. æµ‹è¯•éªŒè¯

1. å¯åŠ¨åº”ç”¨
2. éªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
3. æ£€æŸ¥æ•°æ®å®Œæ•´æ€§

### å¸è½½

#### å®Œå…¨å¸è½½

1. **åœæ­¢åº”ç”¨**ï¼šå…³é—­æ‰€æœ‰è¿è¡Œå®ä¾‹

2. **åˆ é™¤åº”ç”¨æ–‡ä»¶**ï¼š
   ```bash
   # Windows
   rmdir /S /Q C:\TG-Matrix
   
   # Linux/macOS
   rm -rf /opt/tg-matrix
   ```

3. **åˆ é™¤æ•°æ®**ï¼ˆå¯é€‰ï¼‰ï¼š
   - æ•°æ®åº“ï¼š`backend/data/tgmatrix.db`
   - ä¼šè¯æ–‡ä»¶ï¼š`backend/sessions/`
   - æ—¥å¿—æ–‡ä»¶ï¼š`backend/logs/`

4. **å¸è½½ä¾èµ–**ï¼ˆå¯é€‰ï¼‰ï¼š
   ```bash
   # å¸è½½ Python åŒ…ï¼ˆå¦‚æœéœ€è¦ï¼‰
   pip uninstall -r backend/requirements.txt -y
   ```

**æ³¨æ„ï¼š** å¸è½½å‰è¯·ç¡®ä¿å·²å¤‡ä»½é‡è¦æ•°æ®ï¼

---

## é«˜çº§é…ç½®

### è‡ªå®šä¹‰ Python è·¯å¾„

å¦‚æœ Python ä¸åœ¨ç³»ç»Ÿ PATH ä¸­ï¼Œå¯ä»¥åœ¨ `electron.js` ä¸­æŒ‡å®šè·¯å¾„ï¼š

```javascript
const pythonPath = 'C:\\Python313\\python.exe';  // Windows
// æˆ–
const pythonPath = '/usr/bin/python3';  // Linux/macOS
```

### ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ

#### åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
# Windows
python -m venv venv
venv\Scripts\activate

# Linux/macOS
python3 -m venv venv
source venv/bin/activate
```

#### å®‰è£…ä¾èµ–

```bash
pip install -r backend/requirements.txt
```

#### é…ç½® Electron ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ

ä¿®æ”¹ `electron.js` ä¸­çš„ Python è·¯å¾„æŒ‡å‘è™šæ‹Ÿç¯å¢ƒã€‚

### ä»£ç†é…ç½®

#### å…¨å±€ä»£ç†

åœ¨ç³»ç»Ÿè®¾ç½®ä¸­é…ç½®ä»£ç†ã€‚

#### è´¦æˆ·çº§ä»£ç†

åœ¨æ·»åŠ è´¦æˆ·æ—¶ï¼Œé…ç½®ä»£ç†ï¼š

- **SOCKS5**ï¼š`socks5://user:pass@host:port`
- **HTTP**ï¼š`http://user:pass@host:port`
- **HTTPS**ï¼š`https://user:pass@host:port`

---

## æ€§èƒ½è°ƒä¼˜

### æ•°æ®åº“ä¼˜åŒ–

1. **å¯ç”¨ WAL æ¨¡å¼**ï¼ˆåœ¨ `database.py` ä¸­ï¼‰ï¼š
   ```python
   await self._connection.execute("PRAGMA journal_mode=WAL")
   ```

2. **è°ƒæ•´ç¼“å­˜å¤§å°**ï¼š
   ```python
   await self._connection.execute("PRAGMA cache_size=10000")
   ```

### è¿æ¥æ± ä¼˜åŒ–

åœ¨ `config.yaml` ä¸­è°ƒæ•´ï¼š

```yaml
connection_pool:
  max_connections_per_account: 3
  max_idle_time: 300
  cleanup_interval: 60
```

### æ¶ˆæ¯é˜Ÿåˆ—ä¼˜åŒ–

è°ƒæ•´é˜Ÿåˆ—å¤„ç†å‚æ•°ï¼š

```yaml
message_queue:
  batch_size: 10
  processing_interval: 0.5
  max_retries: 3
```

---

## ç›‘æ§å’Œå‘Šè­¦

### ç³»ç»Ÿç›‘æ§

ç³»ç»Ÿå†…ç½®æ€§èƒ½ç›‘æ§ï¼Œå¯ä»¥ï¼š

1. æŸ¥çœ‹ CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡
2. ç›‘æ§è¿æ¥çŠ¶æ€
3. ç›‘æ§é˜Ÿåˆ—é•¿åº¦
4. æŸ¥çœ‹æ•°æ®åº“æ€§èƒ½

### å‘Šè­¦é…ç½®

åœ¨ `config.yaml` ä¸­é…ç½®å‘Šè­¦è§„åˆ™ï¼š

```yaml
alerts:
  error_rate:
    enabled: true
    threshold: 0.1  # 10%
  queue_length:
    enabled: true
    threshold: 100
  account_health:
    enabled: true
    threshold: 50
```

---

## æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©

1. **æŸ¥çœ‹æ–‡æ¡£**ï¼š
   - ç”¨æˆ·æ‰‹å†Œï¼š`ç”¨æˆ·æ‰‹å†Œ.md`
   - åç«¯æ–‡æ¡£ï¼š`backend/README.md`
   - å¿«é€Ÿå¯åŠ¨ï¼š`æœ€ç»ˆå¯åŠ¨æŒ‡å—.md`

2. **æŸ¥çœ‹æ—¥å¿—**ï¼š
   - åº”ç”¨æ—¥å¿—ï¼š`backend/logs/`
   - Electron æ§åˆ¶å°ï¼šF12 æ‰“å¼€å¼€å‘è€…å·¥å…·
   - ä¸»è¿›ç¨‹æ§åˆ¶å°ï¼šè¿è¡Œ `npm start` çš„ç»ˆç«¯

3. **å¸¸è§é—®é¢˜**ï¼š
   - æŸ¥çœ‹ç”¨æˆ·æ‰‹å†Œçš„"å¸¸è§é—®é¢˜"éƒ¨åˆ†
   - æŸ¥çœ‹æœ¬æ–‡æ¡£çš„"æ•…éšœæ’é™¤"éƒ¨åˆ†

### æŠ¥å‘Šé—®é¢˜

æŠ¥å‘Šé—®é¢˜æ—¶ï¼Œè¯·æä¾›ï¼š

1. **ç³»ç»Ÿä¿¡æ¯**ï¼š
   - æ“ä½œç³»ç»Ÿç‰ˆæœ¬
   - Node.js ç‰ˆæœ¬
   - Python ç‰ˆæœ¬

2. **é”™è¯¯ä¿¡æ¯**ï¼š
   - å®Œæ•´çš„é”™è¯¯æ¶ˆæ¯
   - æ—¥å¿—æ–‡ä»¶å†…å®¹
   - æ§åˆ¶å°è¾“å‡º

3. **å¤ç°æ­¥éª¤**ï¼š
   - è¯¦ç»†çš„æ“ä½œæ­¥éª¤
   - é¢„æœŸç»“æœ
   - å®é™…ç»“æœ

---

**ç‰ˆæœ¬ï¼š** 1.0.0  
**æœ€åæ›´æ–°ï¼š** 2026-01-02  
**æ–‡æ¡£ä½œè€…ï¼š** TG-Matrix å¼€å‘å›¢é˜Ÿ

