# éªŒè¯ç å¯¹è¯æ¡†è°ƒè¯•æŒ‡å—

## ğŸ” é—®é¢˜ï¼šç‚¹å‡»ç™»å½•åæ²¡æœ‰çœ‹åˆ°éªŒè¯ç è¾“å…¥æ¡†

## âœ… å·²å®Œæˆçš„ä¿®å¤

1. âœ… å‰ç«¯ä»£ç å·²æ›´æ–°ï¼ˆæ·»åŠ äº†è°ƒè¯•æ—¥å¿—ï¼‰
2. âœ… å‰ç«¯å·²é‡æ–°æ„å»º
3. âœ… åç«¯åˆå§‹åŒ–æˆåŠŸ

## ğŸ› ï¸ è°ƒè¯•æ­¥éª¤

### æ­¥éª¤ 1ï¼šé‡å¯åº”ç”¨

**é‡è¦ï¼š** ä¿®æ”¹ä»£ç åå¿…é¡»é‡å¯åº”ç”¨ï¼

```bash
# åœæ­¢å½“å‰åº”ç”¨ï¼ˆCtrl+Cï¼‰
# é‡æ–°å¯åŠ¨
npm start
```

### æ­¥éª¤ 2ï¼šæ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·

1. åœ¨ Electron åº”ç”¨ä¸­æŒ‰ `F12` æˆ– `Ctrl+Shift+I`
2. åˆ‡æ¢åˆ° **Console** æ ‡ç­¾
3. **ä¿æŒæ§åˆ¶å°æ‰“å¼€**

### æ­¥éª¤ 3ï¼šæ·»åŠ æµ‹è¯•è´¦æˆ·ï¼ˆå¦‚æœæ²¡æœ‰ï¼‰

1. åœ¨"è´¦æˆ·ç®¡ç†"é¡µé¢
2. å¡«å†™è´¦æˆ·ä¿¡æ¯ï¼š
   - ç”µè¯å·ç ï¼š`+1234567890`ï¼ˆç¤ºä¾‹ï¼‰
   - API IDï¼šå¡«å†™æ‚¨çš„ API ID
   - API Hashï¼šå¡«å†™æ‚¨çš„ API Hash
3. ç‚¹å‡»"æ·»åŠ è´¦æˆ·"

### æ­¥éª¤ 4ï¼šæµ‹è¯•ç™»å½•

1. åœ¨è´¦æˆ·åˆ—è¡¨ä¸­æ‰¾åˆ°åˆšæ·»åŠ çš„è´¦æˆ·
2. **ç‚¹å‡»"ç™»å½•"æŒ‰é’®**ï¼ˆç»¿è‰²å›¾æ ‡ï¼‰
3. **ç«‹å³æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º**

### æ­¥éª¤ 5ï¼šæ£€æŸ¥æ§åˆ¶å°æ—¥å¿—

**åº”è¯¥çœ‹åˆ°çš„æ—¥å¿—ï¼ˆæŒ‰é¡ºåºï¼‰ï¼š**

```
[Frontend] loginAccount called with accountId: 1
[Frontend] Found account: +1234567890, Status: Offline
[Frontend] Sending login-account command to IPC
```

**åç«¯ç»ˆç«¯åº”è¯¥æ˜¾ç¤ºï¼š**

```
[Backend] handle_login_account called with payload: 1
[Backend] Found account: +1234567890
[TelegramClient] Sending verification code to +1234567890...
[TelegramClient] Verification code sent successfully
[Backend] login_account result: success=True, requires_code=True
[Backend] Sending login-requires-code event
```

**å‰ç«¯æ§åˆ¶å°åº”è¯¥æ˜¾ç¤ºï¼š**

```
[Frontend] Received login-requires-code event: {accountId: 1, phone: "+1234567890", phoneCodeHash: "..."}
[Frontend] Current loginState before update: {accountId: null, phone: "", requiresCode: false, ...}
[Frontend] Updated loginState: {accountId: 1, phone: "+1234567890", requiresCode: true, ...}
[Frontend] requiresCode value: true
```

### æ­¥éª¤ 6ï¼šæ£€æŸ¥å¯¹è¯æ¡†

å¦‚æœçœ‹åˆ° `requiresCode value: true`ï¼Œä½†å¯¹è¯æ¡†æ²¡æœ‰æ˜¾ç¤ºï¼š

1. **æ£€æŸ¥ HTML ä¸­çš„è°ƒè¯•ä¿¡æ¯**
   - åœ¨é¡µé¢ä¸ŠæŸ¥æ‰¾ï¼š`Debug: loginState = ...`
   - æŸ¥çœ‹ `requiresCode` çš„å€¼

2. **æ£€æŸ¥æ˜¯å¦æœ‰ JavaScript é”™è¯¯**
   - æŸ¥çœ‹æ§åˆ¶å°çš„çº¢è‰²é”™è¯¯ä¿¡æ¯

3. **æ£€æŸ¥ CSS æ ·å¼**
   - å¯¹è¯æ¡†å¯èƒ½è¢«å…¶ä»–å…ƒç´ é®æŒ¡
   - z-index å¯èƒ½ä¸å¤Ÿé«˜

## ğŸ”§ æ‰‹åŠ¨æµ‹è¯•æ–¹æ³•

### æ–¹æ³• 1ï¼šåœ¨æ§åˆ¶å°æ‰‹åŠ¨è§¦å‘å¯¹è¯æ¡†

åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œï¼š

```javascript
// è¿™éœ€è¦åœ¨ Angular ç»„ä»¶ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ
// æˆ–è€…é€šè¿‡å¼€å‘è€…å·¥å…·æ‰¾åˆ°ç»„ä»¶å®ä¾‹
```

### æ–¹æ³• 2ï¼šæ£€æŸ¥ Signal å€¼

åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œï¼ˆéœ€è¦è®¿é—®ç»„ä»¶ï¼‰ï¼š

```javascript
// æ£€æŸ¥ loginState çš„å€¼
// éœ€è¦æ‰¾åˆ° Angular ç»„ä»¶å®ä¾‹
```

## ğŸ“‹ æ£€æŸ¥æ¸…å•

è¯·æŒ‰é¡ºåºæ£€æŸ¥ï¼š

- [ ] **åº”ç”¨å·²é‡å¯**ï¼ˆä¿®æ”¹ä»£ç åå¿…é¡»é‡å¯ï¼‰
- [ ] **æµè§ˆå™¨å¼€å‘è€…å·¥å…·å·²æ‰“å¼€**ï¼ˆF12ï¼‰
- [ ] **æœ‰æµ‹è¯•è´¦æˆ·**ï¼ˆå·²æ·»åŠ è´¦æˆ·ï¼‰
- [ ] **ç‚¹å‡»äº†"ç™»å½•"æŒ‰é’®**
- [ ] **æ§åˆ¶å°æœ‰ `loginAccount called` æ—¥å¿—**
- [ ] **åç«¯ç»ˆç«¯æœ‰ `Sending verification code` æ—¥å¿—**
- [ ] **å‰ç«¯æ§åˆ¶å°æœ‰ `Received login-requires-code event` æ—¥å¿—**
- [ ] **å‰ç«¯æ§åˆ¶å°æœ‰ `requiresCode value: true` æ—¥å¿—**
- [ ] **å¯¹è¯æ¡†æ˜¯å¦æ˜¾ç¤º**

## ğŸ¯ å¦‚æœè¿˜æ˜¯æ²¡æœ‰æ˜¾ç¤º

è¯·å‘Šè¯‰æˆ‘ï¼š

1. **æ§åˆ¶å°çœ‹åˆ°äº†ä»€ä¹ˆæ—¥å¿—ï¼Ÿ**
   - æ˜¯å¦æœ‰ `loginAccount called`ï¼Ÿ
   - æ˜¯å¦æœ‰ `Received login-requires-code event`ï¼Ÿ
   - æ˜¯å¦æœ‰ `requiresCode value: true`ï¼Ÿ
   - æ˜¯å¦æœ‰ä»»ä½•é”™è¯¯ï¼Ÿ

2. **åç«¯ç»ˆç«¯çœ‹åˆ°äº†ä»€ä¹ˆï¼Ÿ**
   - æ˜¯å¦æœ‰ `Sending verification code`ï¼Ÿ
   - æ˜¯å¦æœ‰ `Sending login-requires-code event`ï¼Ÿ

3. **é¡µé¢ä¸Šæ˜¯å¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼Ÿ**
   - æŸ¥æ‰¾ `Debug: loginState = ...`
   - `requiresCode` çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆä¿®æ”¹ä»£ç åçœ‹ä¸åˆ°å˜åŒ–ï¼Ÿ

**A:** å¿…é¡»é‡å¯åº”ç”¨ï¼ä¿®æ”¹ TypeScript/HTML ä»£ç åï¼Œéœ€è¦ï¼š
1. é‡æ–°æ„å»ºï¼š`npm run build`
2. é‡å¯åº”ç”¨ï¼š`npm start`

### Q2: äº‹ä»¶æ²¡æœ‰è§¦å‘æ€ä¹ˆåŠï¼Ÿ

**A:** æ£€æŸ¥ï¼š
1. IPC æœåŠ¡æ˜¯å¦æ­£ç¡®åˆå§‹åŒ–
2. äº‹ä»¶ç›‘å¬å™¨æ˜¯å¦åœ¨ `setupIpcListeners()` ä¸­æ³¨å†Œ
3. åç«¯æ˜¯å¦æ­£ç¡®å‘é€äº‹ä»¶

### Q3: å¯¹è¯æ¡†è¢«é®æŒ¡äº†æ€ä¹ˆåŠï¼Ÿ

**A:** æ£€æŸ¥ z-indexï¼Œå¯¹è¯æ¡†çš„ z-index åº”è¯¥æ˜¯ 50ã€‚

---

**ä¸‹ä¸€æ­¥ï¼š** è¯·é‡å¯åº”ç”¨ï¼Œç„¶åæŒ‰ç…§æ­¥éª¤ 3-6 æµ‹è¯•ï¼Œå‘Šè¯‰æˆ‘çœ‹åˆ°äº†ä»€ä¹ˆæ—¥å¿—ï¼

