# éªŒè¯ç å¯¹è¯æ¡†è°ƒè¯•æ­¥éª¤

## ğŸš¨ é—®é¢˜ï¼šç‚¹å‡»ç™»å½•åæ²¡æœ‰çœ‹åˆ°éªŒè¯ç è¾“å…¥æ¡†

## âœ… å·²ç¡®è®¤çš„ä»£ç 

1. âœ… HTML æ¨¡æ¿ä¸­æœ‰éªŒè¯ç å¯¹è¯æ¡†ï¼ˆç¬¬ 449-481 è¡Œï¼‰
2. âœ… TypeScript ä¸­æœ‰äº‹ä»¶ç›‘å¬å™¨ï¼ˆç¬¬ 547 è¡Œï¼‰
3. âœ… å‰ç«¯å·²é‡æ–°æ„å»º

## ğŸ” è°ƒè¯•æ­¥éª¤

### æ­¥éª¤ 1ï¼šé‡å¯åº”ç”¨

**é‡è¦ï¼š** ä¿®æ”¹ä»£ç åå¿…é¡»é‡å¯åº”ç”¨æ‰èƒ½çœ‹åˆ°å˜åŒ–ï¼

```bash
# 1. åœæ­¢å½“å‰è¿è¡Œçš„åº”ç”¨ï¼ˆCtrl+Cï¼‰
# 2. é‡æ–°æ„å»ºå¹¶å¯åŠ¨
npm run start:build
```

æˆ–è€…ï¼š

```bash
# 1. åœæ­¢å½“å‰è¿è¡Œçš„åº”ç”¨
# 2. åªæ„å»º
npm run build
# 3. å¯åŠ¨
npm start
```

### æ­¥éª¤ 2ï¼šæ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·

1. åœ¨ Electron åº”ç”¨ä¸­æŒ‰ `F12` æˆ– `Ctrl+Shift+I`
2. åˆ‡æ¢åˆ° **Console** æ ‡ç­¾
3. ä¿æŒæ§åˆ¶å°æ‰“å¼€

### æ­¥éª¤ 3ï¼šæµ‹è¯•ç™»å½•æµç¨‹

1. åœ¨åº”ç”¨ä¸­æ‰¾åˆ°è¦ç™»å½•çš„è´¦æˆ·
2. ç‚¹å‡»"ç™»å½•"æŒ‰é’®ï¼ˆç»¿è‰²å›¾æ ‡ï¼‰
3. **ç«‹å³æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º**

### æ­¥éª¤ 4ï¼šæ£€æŸ¥æ§åˆ¶å°æ—¥å¿—

**åº”è¯¥çœ‹åˆ°çš„æ—¥å¿—ï¼š**

```
[Frontend] loginAccount called with accountId: 1
[Frontend] Found account: +1234567890, Status: Offline
[Frontend] Sending login-account command to IPC
```

**åç«¯ç»ˆç«¯åº”è¯¥æ˜¾ç¤ºï¼š**

```
[Backend] handle_login_account called with payload: 1
[Backend] Found account: +1234567890
[Backend] Status updated to 'Logging in...'
[TelegramClient] Sending verification code to +1234567890...
[TelegramClient] Verification code sent successfully
[Backend] login_account result: success=True, requires_code=True
[Backend] Sending login-requires-code event
```

**å‰ç«¯æ§åˆ¶å°åº”è¯¥æ˜¾ç¤ºï¼š**

```
[Frontend] Received login-requires-code event: {accountId: 1, phone: "+1234567890", phoneCodeHash: "..."}
```

### æ­¥éª¤ 5ï¼šæ£€æŸ¥å¯¹è¯æ¡†æ˜¯å¦æ˜¾ç¤º

å¦‚æœçœ‹åˆ° `Received login-requires-code event` æ—¥å¿—ï¼Œä½†å¯¹è¯æ¡†æ²¡æœ‰æ˜¾ç¤ºï¼š

1. **åœ¨æ§åˆ¶å°è¿è¡Œï¼š**
   ```javascript
   // æ£€æŸ¥ loginState çš„å€¼
   // æ³¨æ„ï¼šè¿™éœ€è¦åœ¨ Angular ç»„ä»¶ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ
   ```

2. **æ£€æŸ¥æ˜¯å¦æœ‰ JavaScript é”™è¯¯**
   - æŸ¥çœ‹æ§åˆ¶å°çš„çº¢è‰²é”™è¯¯ä¿¡æ¯

3. **æ£€æŸ¥ CSS æ ·å¼**
   - å¯¹è¯æ¡†å¯èƒ½è¢«å…¶ä»–å…ƒç´ é®æŒ¡
   - z-index å¯èƒ½ä¸å¤Ÿé«˜

## ğŸ› ï¸ å¿«é€Ÿæµ‹è¯•æ–¹æ³•

### æ–¹æ³• 1ï¼šæ‰‹åŠ¨è§¦å‘å¯¹è¯æ¡†ï¼ˆæµ‹è¯•ç”¨ï¼‰

åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œï¼ˆéœ€è¦è®¿é—® Angular ç»„ä»¶ï¼‰ï¼š

```javascript
// è¿™éœ€è¦åœ¨ Angular ç»„ä»¶ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ
// æˆ–è€…ä¿®æ”¹ä»£ç ä¸´æ—¶æ·»åŠ æµ‹è¯•
```

### æ–¹æ³• 2ï¼šæ£€æŸ¥äº‹ä»¶æ˜¯å¦æ­£ç¡®å‘é€

åœ¨åç«¯ `main.py` çš„ `handle_login_account` æ–¹æ³•ä¸­æ·»åŠ æ›´å¤šæ—¥å¿—ï¼š

```python
print(f"[Backend] About to send login-requires-code event", file=sys.stderr)
self.send_event("login-requires-code", {
    "accountId": account_id,
    "phone": phone,
    "phoneCodeHash": result.get('phone_code_hash')
})
print(f"[Backend] login-requires-code event sent", file=sys.stderr)
```

## ğŸ“‹ æ£€æŸ¥æ¸…å•

è¯·æŒ‰é¡ºåºæ£€æŸ¥ï¼š

- [ ] **åº”ç”¨å·²é‡å¯**ï¼ˆä¿®æ”¹ä»£ç åå¿…é¡»é‡å¯ï¼‰
- [ ] **æµè§ˆå™¨å¼€å‘è€…å·¥å…·å·²æ‰“å¼€**ï¼ˆF12ï¼‰
- [ ] **ç‚¹å‡»"ç™»å½•"æŒ‰é’®**
- [ ] **æ§åˆ¶å°æœ‰ `loginAccount called` æ—¥å¿—**
- [ ] **åç«¯ç»ˆç«¯æœ‰ `Sending verification code` æ—¥å¿—**
- [ ] **å‰ç«¯æ§åˆ¶å°æœ‰ `Received login-requires-code event` æ—¥å¿—**
- [ ] **å¯¹è¯æ¡†æ˜¯å¦æ˜¾ç¤º**

## ğŸ¯ å¦‚æœè¿˜æ˜¯æ²¡æœ‰æ˜¾ç¤º

è¯·å‘Šè¯‰æˆ‘ï¼š

1. **æ§åˆ¶å°çœ‹åˆ°äº†ä»€ä¹ˆæ—¥å¿—ï¼Ÿ**
   - æ˜¯å¦æœ‰ `loginAccount called`ï¼Ÿ
   - æ˜¯å¦æœ‰ `Received login-requires-code event`ï¼Ÿ
   - æ˜¯å¦æœ‰ä»»ä½•é”™è¯¯ï¼Ÿ

2. **åç«¯ç»ˆç«¯çœ‹åˆ°äº†ä»€ä¹ˆï¼Ÿ**
   - æ˜¯å¦æœ‰ `Sending verification code`ï¼Ÿ
   - æ˜¯å¦æœ‰ `login-requires-code event sent`ï¼Ÿ

3. **åº”ç”¨æ˜¯å¦å·²é‡å¯ï¼Ÿ**
   - ä¿®æ”¹ä»£ç åå¿…é¡»é‡å¯æ‰èƒ½çœ‹åˆ°å˜åŒ–

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆä¿®æ”¹ä»£ç åçœ‹ä¸åˆ°å˜åŒ–ï¼Ÿ

**A:** å¿…é¡»é‡å¯åº”ç”¨ï¼ä¿®æ”¹ TypeScript/HTML ä»£ç åï¼Œéœ€è¦ï¼š
1. é‡æ–°æ„å»ºï¼š`npm run build`
2. é‡å¯åº”ç”¨ï¼š`npm start`

### Q2: å¯¹è¯æ¡†è¢«é®æŒ¡äº†æ€ä¹ˆåŠï¼Ÿ

**A:** æ£€æŸ¥ z-indexï¼Œå¯¹è¯æ¡†çš„ z-index åº”è¯¥æ˜¯ 50ã€‚

### Q3: äº‹ä»¶æ²¡æœ‰è§¦å‘æ€ä¹ˆåŠï¼Ÿ

**A:** æ£€æŸ¥ï¼š
1. IPC æœåŠ¡æ˜¯å¦æ­£ç¡®åˆå§‹åŒ–
2. äº‹ä»¶ç›‘å¬å™¨æ˜¯å¦åœ¨ `setupIpcListeners()` ä¸­æ³¨å†Œ
3. åç«¯æ˜¯å¦æ­£ç¡®å‘é€äº‹ä»¶

---

**ä¸‹ä¸€æ­¥ï¼š** è¯·é‡å¯åº”ç”¨ï¼Œç„¶åæŒ‰ç…§æ­¥éª¤ 3-5 æµ‹è¯•ï¼Œå‘Šè¯‰æˆ‘çœ‹åˆ°äº†ä»€ä¹ˆï¼

